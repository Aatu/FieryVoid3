{"version":3,"sources":["model/utils/math.mjs","client/view/game/components/GameSceneComponent.js","model/gameConfig.mjs","model/hexagon/Offset.mjs","model/hexagon/Cube.mjs","model/hexagon/index.mjs","model/utils/HexagonMath.mjs","model/utils/CoordinateConverter.mjs","model/utils/Vector.mjs","model/movement/RequiredThrust.mjs","model/movement/MovementOrder.mjs","model/movement/movementTypes.mjs","model/movement/MovementResolver.mjs","model/movement/ThrustBill.mjs","model/movement/ThrustAssignment.mjs","model/movement/MovementService.mjs","model/unit/ShipPower.mjs","model/unit/system/DamageEntry.mjs","model/unit/system/criticals/Critical.mjs","model/unit/system/criticals/OutputReduced.mjs","model/unit/system/criticals/OutputReduced2.mjs","model/unit/system/criticals/OutputReduced4.mjs","model/unit/system/criticals/OutputReduced6.mjs","model/unit/system/criticals/OutputReduced8.mjs","model/unit/system/criticals/LoadingTimeIncreased.mjs","model/unit/system/criticals/ForcedOffline.mjs","model/unit/system/criticals/ForcedOfflineOverheat.mjs","model/unit/system/criticals/ThrustChannelHeatIncreased.mjs","model/unit/system/SystemDamage.mjs","model/unit/system/PowerEntry.mjs","model/unit/system/SystemPower.mjs","model/unit/system/SystemHeat.mjs","model/unit/system/ShipSystemLog/ShipSystemLogEntry.mjs","model/utils/format.mjs","model/unit/system/ShipSystemLog/ShipSystemLogEntryHeat.mjs","model/unit/system/ShipSystemLog/ShipSystemLogEntryCriticalHit.mjs","model/unit/system/ShipSystemLog/ShipSystemLogEntryDamage.mjs","model/unit/system/ShipSystemLog/systemLogEntryClasses.mjs","model/unit/system/ShipSystemLog/ShipSystemLog.mjs","model/unit/system/ShipSystem.mjs","model/unit/system/strategy/ShipSystemStrategy.mjs","model/unit/system/cargo/CargoEntity.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo158.mjs","model/unit/system/strategy/weapon/utils/HitSystemRandomizer.mjs","model/combatLog/CombatLogDamageEntry.mjs","model/unit/system/strategy/weapon/StandardDamageStrategy.mjs","model/unit/system/weapon/ammunition/torpedo/torpedoDamageStrategy/MSVTorpedoDamageStrategy.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo158MSV.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo158MSV2.mjs","model/unit/system/strategy/weapon/ExplosiveDamageStrategy.mjs","model/unit/system/weapon/ammunition/torpedo/torpedoDamageStrategy/HETorpedoDamageStrategy.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo158Nuclear.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo72.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo72MSV.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo72HE.mjs","model/unit/system/weapon/ammunition/torpedo/Torpedo158HE.mjs","model/unit/system/weapon/ammunition/Ammo.mjs","model/unit/system/weapon/ammunition/conventional/Ammo30mm.mjs","model/unit/system/weapon/ammunition/conventional/Ammo85mmHE.mjs","model/unit/system/weapon/ammunition/conventional/Ammo85mmAP.mjs","model/unit/system/weapon/ammunition/conventional/Ammo140mmAP.mjs","model/unit/system/weapon/ammunition/conventional/Ammo140mmHE.mjs","model/unit/system/weapon/ammunition/conventional/Ammo120mmAP.mjs","model/unit/system/weapon/ammunition/conventional/Ammo120mmHE.mjs","model/unit/system/weapon/ammunition/NoAmmunitionLoaded.mjs","model/unit/system/weapon/ammunition/index.mjs","model/unit/system/cargo/cargo.mjs","model/unit/system/strategy/CargoBaySystemStrategy.mjs","model/unit/system/strategy/StoreHeatStrategy.mjs","model/unit/system/strategy/RadiateHeatStrategy.mjs","model/unit/system/strategy/FuelTankSystemStrategy.mjs","model/unit/system/structure/Structure.mjs","model/unit/system/systemSection/systemLocation.mjs","model/unit/system/systemSection/SystemSection.mjs","model/unit/system/systemSection/PrimarySection.mjs","model/unit/system/systemSection/AftSection.mjs","model/unit/system/systemSection/FrontSection.mjs","model/unit/system/systemSection/PortAftSection.mjs","model/unit/system/systemSection/PortFrontSection.mjs","model/unit/system/systemSection/StarboardFrontSection.mjs","model/unit/system/systemSection/StarboardAftSection.mjs","model/unit/system/ShipSystemSections.mjs","model/unit/ShipSystems.mjs","model/electronicWarfare/electronicWarfareTypes.mjs","model/electronicWarfare/ElectronicWarfareEntry.mjs","model/unit/ShipCurrentElectronicWarfare.mjs","model/unit/ShipElectronicWarfare.mjs","model/User.mjs","model/unit/ShipPlayer.mjs","model/unit/ShipMovement.mjs","model/unit/Ship.mjs","model/weapon/FireOrder.mjs","model/weapon/WeaponFireService.mjs","client/view/game/phase/PhaseState.js","client/view/game/renderer/shader/starVertexShader.js","client/view/game/renderer/shader/starFragmentShader.js","client/view/game/renderer/shader/effectVertexShader.js","client/view/game/renderer/shader/effectFragmentShader.js","client/view/game/renderer/shader/spriteFragmentShader.js","client/view/game/renderer/shader/spriteVertexShader.js","client/view/game/renderer/shader/lineFragmentShader.js","client/view/game/renderer/shader/lineVertexShader.js","client/view/game/renderer/shader/boltVertexShader.js","client/view/game/renderer/shader/boltFragmentShader.js","client/view/game/renderer/shader/line2dVertexShader.js","client/view/game/renderer/shader/line2dFragmentShader.js","client/view/game/renderer/shader/effectSpriteFragmentShader.js","client/view/game/renderer/shader/effectSpriteVertexShader.js","client/view/game/utils/objectLoader.js","client/view/game/renderer/sprite/LineSprite.js","client/view/game/renderer/sprite/Sprite.js","client/view/game/utils/graphics.js","client/view/game/utils/abstractCanvas.js","client/view/game/renderer/hexgrid/HexagonTexture.js","client/view/game/renderer/sprite/HexagonSprite.js","client/view/game/renderer/sprite/ShipEWSprite.js","client/view/game/renderer/sprite/ShipFacingSprite.js","client/view/game/renderer/sprite/DottedCircleSprite.js","client/view/game/renderer/sprite/TextSprite.js","client/view/game/renderer/sprite/CircleSprite.js","client/view/game/renderer/sprite/ShipMapSprite.js","client/view/game/renderer/Line.js","client/view/game/renderer/ships/ShipMapIcon.js","client/view/game/animation/Animation.js","client/view/game/animation/particle/BaseParticle.js","client/view/game/animation/particle/ParticleEmitter.js","client/view/game/animation/particle/BoltParticleEmitter/BoltInstance.js","client/view/game/animation/particle/BoltParticleEmitter/BoltContainer.js","client/view/game/animation/particle/BoltParticleEmitter/BoltInstanceFactory.js","client/view/game/animation/particle/ParticleEmitterContainer.js","client/view/game/animation/particle/StarParticle.js","client/view/game/animation/particle/StarParticleEmitter.js","client/view/game/renderer/ships/ShipObjectBoundingBox.js","client/view/game/animation/effect/BoltEffect.js","client/view/game/animation/effect/ExplosionEffect.js","client/view/game/renderer/ships/ShipObjectSectionDamageEffect.js","client/view/game/renderer/ships/ShipObject.js","client/view/game/renderer/ships/uc/Gunship.js","client/view/game/renderer/ships/uc/Rhino.js","client/view/game/renderer/ships/uc/Capital.js","client/view/game/renderer/object3d/Object3d.js","client/view/game/renderer/ships/uc/Haka.js","client/view/game/renderer/ships/protectorate/Caliope.js","client/view/game/renderer/ships/protectorate/Fulcrum.js","client/view/game/renderer/ships/protectorate/Mouros.js","client/view/game/renderer/ships/federation/Impetous.js","client/view/game/renderer/icon/ShipIconContainer.js","client/view/game/renderer/electronicWarfare/OEWIndicator.js","client/view/game/renderer/electronicWarfare/ShipEWIndicators.js","client/view/game/renderer/electronicWarfare/CurrentOEWIndicator.js","client/view/game/renderer/electronicWarfare/ShipCurrentEWIndicators.js","client/view/game/renderer/electronicWarfare/ElectronicWarfareIndicatorService.js","client/view/game/renderer/TerrainRenderer.js","client/view/game/ui/shipWindow/ShipWindowManager.js","client/view/game/movement/MovementPath.js","client/view/game/movement/MovementPathService.js","model/game/gameStatuses.mjs","model/game/gamePhases.mjs","client/view/game/phase/phaseStrategy/PhaseStrategy.js","client/view/game/phase/phaseStrategy/LobbyPhaseStrategy.js","client/view/game/ui/uiStrategy/UiStrategy.js","client/view/game/ui/uiStrategy/MouseOverShowsMovementPath.js","client/view/game/ui/uiStrategy/SelectedShipMovementPath.js","client/view/game/ui/uiStrategy/HighlightSelectedShip.js","client/view/game/ui/uiStrategy/movement/SelectedShipMovementUi.js","client/view/game/ui/uiStrategy/ShowDeploymentAreas.js","client/view/game/animation/ShipMovementAnimation/ShipEvasionMovementPath.js","client/view/game/animation/ShipMovementAnimation/PivotSteps.js","client/view/game/animation/ShipMovementAnimation/ShipMovementAnimation.js","client/view/game/animation/ShipMovementAnimation/index.js","client/view/game/animation/ShipIdleMovementAnimation.js","client/view/game/animation/ShipSystemAnimation.js","client/view/game/animation/ShipWeaponAnimation/ShipWeaponAnimation.js","client/view/game/animation/ShipWeaponAnimation/ShipWeaponBoltAnimation.js","client/view/game/animation/ShipWeaponAnimation/ShipWeaponBoltBurstAnimation.js","client/view/game/animation/ShipWeaponAnimation/ShipWeaponUniversalBoltAnimation.js","client/view/game/animation/ShipWeaponAnimation/index.js","client/view/game/ui/uiStrategy/AnimationUiStrategy.js","client/view/game/animation/ShipDamageAnimation.js","client/view/game/ui/uiStrategy/ShowShipObjects.js","client/view/game/ui/uiStrategy/RightClickShowsShipWindow.js","client/view/game/ui/uiStrategy/MouseOverShowsShipTooltip.js","client/view/game/ui/uiStrategy/MouseOverHighlightsShip.js","client/view/game/ui/uiStrategy/deployment/SelectUndeployedShip.js","client/view/game/ui/uiStrategy/deployment/DeployShipOnHexClick.js","client/view/game/ui/uiStrategy/deployment/AllowSubmittingWhenDeploymentDone.js","client/view/game/ui/uiStrategy/DebugDrawLineFromSelectedShip.js","client/view/game/movement/NavigationalMovementPath.js","client/view/game/ui/uiStrategy/SelectedShipNavigationPath.js","client/view/game/ui/uiStrategy/deployment/SelectedShipDeploymentMovementUi.js","client/view/game/ui/uiStrategy/ShowWaitingStatus.js","client/view/game/ui/uiStrategy/SelectFirstActiveShip.js","client/view/game/ui/gameUiModes.js","client/view/game/ui/uiStrategy/AllShipsMovementPaths.js","client/view/game/ui/uiStrategy/AllowSubmittingOnValidGameState.js","client/view/game/ui/uiStrategy/replay/AutomaticReplay.js","client/view/game/ui/uiStrategy/replay/ShowReplayUi.js","client/styled/Colors.js","client/styled/icon/Arrow.js","client/styled/icon/ArrowSmall.js","client/styled/icon/Roll.js","client/styled/icon/X.js","client/styled/icon/Evade.js","client/styled/icon/Pivot.js","client/styled/icon/Cancel.js","client/styled/icon/CheckMark.js","client/styled/icon/Play.js","client/styled/icon/Pause.js","client/styled/icon/Replay.js","client/styled/IconAndLabel.js","client/styled/Container.js","client/styled/Text.js","client/styled/Title.js","client/styled/Clickable.js","client/styled/Error.js","client/styled/InputAndLabel.js","client/styled/Tooltip.js","client/styled/Button.js","client/styled/Link.js","client/view/game/ui/electronicWarfare/OEWButtons.js","client/view/game/ui/GamePositionComponent.js","client/view/game/ui/system/SystemInfoWeaponTargeting.js","client/view/game/ui/system/SystemStrategyUi/cargo/CargoTooltip.js","client/view/game/ui/system/SystemStrategyUi/cargo/CargoItem.js","client/view/game/ui/system/SystemStrategyUi/cargo/CargoList.js","client/view/game/ui/system/SystemStrategyUi/torpedo/TorpedoLauncher.js","client/view/game/ui/system/SystemStrategyUi/ammo/Ammo.js","client/view/game/ui/system/SystemStrategyUi/range/RangePenalty.js","client/view/game/ui/HeatBar/Bar.js","client/view/game/ui/HeatBar/SystemHeatBar.js","client/view/game/ui/HeatBar/SystemFuelBar.js","client/view/game/ui/system/SystemStrategyUi/SystemStrategyUiComponent.js","client/view/game/ui/system/SystemStrategyUi/index.js","client/view/game/ui/system/SystemInfo.js","client/view/game/ui/system/SystemIcon.js","client/view/game/ui/system/StructureIcon.js","client/view/game/ui/shipWindow/ShipSection.js","client/view/game/ui/shipWindow/ShipWindow.js","client/view/game/ui/shipTooltip/WeaponTargeting.js","model/unit/TorpedoFlight.mjs","model/unit/system/strategy/weapon/TorpedoLauncherStrategy.mjs","model/weapon/TorpedoAttackService.mjs","client/view/game/ui/shipTooltip/TorpedoAttackTooltip.js","client/view/game/ui/shipTooltip/TorpedoAttackEntry.js","client/view/game/ui/shipTooltip/WeaponTargetingList.js","model/movement/TorpedoMovementService.mjs","client/view/game/ui/shipTooltip/TorpedoAttack.js","client/view/game/ui/HeatBar/ShipHeatBar.js","client/view/game/ui/HeatBar/ShipFuelBar.js","client/view/game/ui/shipTooltip/ShipTooltipDetails.js","client/view/game/ui/shipTooltip/GameShipTooltipMenuBack.js","client/view/game/ui/shipTooltip/TorpedoDefense/TorpedoDefenseTooltip.js","client/view/game/ui/shipTooltip/TorpedoDefense/IncomingTorpedo.js","client/view/game/ui/shipTooltip/TorpedoDefense/TorpedoDefense.js","client/view/game/ui/shipTooltip/TorpedoDefense/index.js","client/config.js","client/api/user.js","client/api/game.js","client/state/actions.js","client/state/StoreProvider.js","client/view/game/ui/ShipName.js","client/view/game/ui/electronicWarfare/CCEWButtons.js","client/view/game/ui/shipTooltip/GameShipTooltipMenuTorpedoDefense.js","client/view/game/ui/shipTooltip/ShipTooltip.js","client/view/game/ui/shipTooltip/GameShipTooltipMenu.js","client/view/game/ui/uiStrategy/GameShipTooltipMenuStrategy.js","client/view/game/ui/uiStrategy/ShowUiModeButtons.js","client/view/game/ui/uiStrategy/electronicWarfare/OwnedShipEw.js","client/view/game/ui/uiStrategy/electronicWarfare/MouseOverShowsElectronicWarfare.js","client/view/game/ui/uiStrategy/ShipClickSelectsShip.js","client/view/game/ui/uiStrategy/electronicWarfare/CurrentEW.js","client/view/game/ui/uiStrategy/weapon/WeaponArcsOnSystemMouseOver.js","client/view/game/ui/uiStrategy/weapon/SelectWeaponOnSystemClick.js","client/view/game/ui/uiStrategy/weapon/SelectedShipSystemList.js","client/view/game/ui/system/GameSystemTooltipMenu.js","client/view/game/ui/uiStrategy/GameSystemInfoMenuStrategy.js","client/view/game/ui/uiStrategy/SystemClickShowsSystemMenu.js","client/view/game/ui/uiStrategy/electronicWarfare/SelectedShipEwList.js","client/view/game/ui/uiStrategy/UnderHexForShips.js","client/view/game/ui/uiStrategy/ShowMapIcons.js","client/view/game/ui/uiStrategy/ShowShipBadges.js","client/view/game/ui/uiStrategy/ShowTorpedoObjects.js","client/view/game/ui/uiStrategy/weapon/WeaponTargetingMouseoverShowsLine.js","client/view/game/ui/uiStrategy/ShowShipDEWandCCEW.js","client/view/game/phase/phaseStrategy/DeploymentPhaseStrategy.js","client/view/game/phase/phaseStrategy/ReplayPhaseStrategy.js","client/view/game/phase/phaseStrategy/WaitingPhaseStrategy.js","client/view/game/phase/phaseStrategy/GamePhaseStrategy.js","client/view/game/animation/ShipVelocityAnimation.js","client/view/game/phase/phaseStrategy/AutomaticReplayPhaseStrategy/ReplayContext.js","client/view/game/ui/uiStrategy/replay/ShipWeaponAnimationService.js","model/combatLog/CombatLogShipMovement.mjs","client/view/game/animation/CameraPositionAnimation.js","model/weapon/WeaponHitChance.mjs","model/combatLog/CombatLogWeaponFireHitResult.mjs","model/combatLog/CombatLogWeaponFire.mjs","model/combatLog/CombatLogGroupedWeaponFire.mjs","client/view/game/animation/SystemDestroyedTextAnimation.js","client/view/game/animation/TorpedoMovementAnimation.js","model/combatLog/CombatLogTorpedoAttack.mjs","model/combatLog/CombatLogGroupedTorpedoAttack.mjs","client/view/game/animation/TorpedoExplosion/TorpedoExplosionHE.js","client/view/game/animation/TorpedoExplosion/TorpedoExplosionMSV.js","model/combatLog/CombatLogTorpedoLaunch.mjs","client/view/game/renderer/sprite/EffectSprite.js","client/view/game/animation/ShipDestroyedAnimation.js","client/view/game/ui/uiStrategy/replay/ReplayTurnActions.js","client/view/game/phase/phaseStrategy/AutomaticReplayPhaseStrategy/AutomaticReplayPhaseStrategy.js","client/view/game/phase/phaseStrategy/AutomaticReplayPhaseStrategy/index.js","client/view/game/phase/GameDataCache.js","model/game/GameSlot.mjs","model/game/GameSlots.mjs","model/unit/system/strategy/BoostableSystemStrategy.mjs","model/unit/system/strategy/ThrustOutputSystemStrategy.mjs","model/unit/system/strategy/RequiresPowerSystemStrategy.mjs","model/unit/system/strategy/PowerOutputSystemStrategy.mjs","model/unit/system/strategy/ThrustChannelSystemStrategy.mjs","model/unit/system/strategy/AllowsEvasionSystemStrategy.mjs","model/unit/system/strategy/ElectronicWarfareProvider.mjs","model/unit/system/strategy/LargerHitProfileOnlineSystemStrategy.mjs","model/unit/system/strategy/BoostablePlusOneOutputSystemStrategy.mjs","model/unit/system/strategy/ArmorBoostOfflineSystemStrategy.mjs","model/unit/system/strategy/OutputHeatOnlineStrategy.mjs","model/unit/system/strategy/FireOrderHeatStrategy.mjs","model/unit/system/strategy/AlwaysTargetableSystemStrategy.mjs","model/unit/system/strategy/weapon/StandardHitStrategy.mjs","model/unit/system/strategy/weapon/StandardRangeStrategy.mjs","model/combatLog/CombatLogWeaponOutOfArc.mjs","model/unit/system/strategy/weapon/FireOrderStrategy.mjs","model/unit/system/strategy/weapon/StandardLoadingStrategy.mjs","model/unit/system/strategy/weapon/WeaponArcStrategy.mjs","model/unit/system/reactor/Reactor.mjs","model/unit/system/strategy/weapon/TestDamageStrategy.mjs","model/unit/system/strategy/weapon/BurstDamageStrategy.mjs","model/unit/system/strategy/weapon/PiercingDamageStrategy.mjs","model/unit/system/strategy/weapon/InterceptorStrategy.mjs","model/unit/system/thruster/ManeuveringThruster.mjs","model/unit/system/thruster/Thruster.mjs","model/unit/system/thruster/ManeuveringThrusterLeft.mjs","model/unit/system/thruster/ManeuveringThrusterRight.mjs","model/unit/system/thruster/ChemicalThruster.mjs","model/unit/system/engine/Engine.mjs","model/unit/system/electronicWarfare/EwArray.mjs","model/unit/system/electronicWarfare/CQEWArray.mjs","model/unit/system/electronicWarfare/ElintArray.mjs","model/unit/system/electronicWarfare/OEWArray.mjs","model/unit/system/weapon/Weapon.mjs","model/unit/system/weapon/TestWeapon.mjs","model/unit/system/weapon/OverPoweredTestWeapon.mjs","model/unit/system/strategy/weapon/WeaponAnimationStrategy.mjs","model/unit/system/weapon/coilgun/CoilgunLightFixed.mjs","model/unit/system/weapon/coilgun/MediumCoilgunTurretedUC.mjs","model/unit/system/weapon/coilgun/RailgunTurreted64gw.mjs","model/unit/system/weapon/coilgun/RailgunTurreted32gw.mjs","model/cargo/CargoService.mjs","model/unit/system/strategy/weapon/AmmunitionStrategy.mjs","model/unit/system/weapon/pdc/PDC30mm.mjs","model/unit/system/weapon/railgun/RailgunFixed120mm.mjs","model/unit/system/weapon/railgun/RailgunTurreted2x140mm.mjs","model/unit/system/weapon/railgun/RailgunTurreted140mmUC.mjs","model/unit/system/weapon/launcher/TorpedoLauncher158.mjs","model/unit/system/weapon/launcher/TorpedoLauncherDual72.mjs","model/unit/system/weapon/launcher/TorpedoLauncherDual158.mjs","model/unit/system/weapon/launcher/TorpedoLauncherQuadruple158.mjs","model/unit/system/weapon/autocannon/AutoCannon85mm.mjs","model/unit/system/weapon/index.mjs","model/unit/system/heat/Radiator.mjs","model/unit/system/heat/HeatSink.mjs","model/unit/system/heat/Radiator5x40.mjs","model/unit/system/heat/Radiator10x40.mjs","model/unit/system/heat/Radiator10x50.mjs","model/unit/system/cargo/CargoBay.mjs","model/unit/system/cargo/FuelTank.mjs","model/unit/system/index.mjs","model/unit/ships/uc/UcRhino.mjs","model/unit/ships/uc/Haka.mjs","model/unit/ships/test/TestShip.mjs","model/unit/ships/protectorate/Caliope.mjs","model/unit/ships/protectorate/Mouros.mjs","model/unit/ships/protectorate/Fulcrum.mjs","model/unit/system/weapon/pdc/X2PDC30mm.mjs","model/unit/ships/federation/Impetous.mjs","model/unit/ships/index.mjs","model/unit/createShipObject.mjs","model/game/GameShips.mjs","model/game/GameActiveShips.mjs","model/game/GameTerrainEntity.mjs","model/utils/ARKStep.mjs","model/utils/ARK.mjs","model/game/GameTerrain.mjs","model/game/GameTorpedos.mjs","model/combatLog/CombatLogTorpedoIntercept.mjs","model/combatLog/CombatLogTorpedoMove.mjs","model/combatLog/CombatLogTorpedoOutOfTime.mjs","model/combatLog/CombatLogShipVelocity.mjs","model/combatLog/CombatLogTorpedoNotArmed.mjs","model/combatLog/combatLogClasses.mjs","model/combatLog/CombatLogData.mjs","model/game/GameData.mjs","client/view/game/renderer/ships/TorpedoObject.js","client/view/game/renderer/icon/TorpedoIconContainer.js","client/view/game/phase/PhaseDirector.js","client/view/game/utils/PositionObject.js","client/view/game/GameSettings.js","model/game/gameMessage.mjs","client/view/game/GameConnector.js","client/view/game/renderer/hexgrid/HexGridRender.js","client/view/game/terrain/StarField.js","client/view/game/GameCamera.js","client/view/game/GameScene.js","client/view/game/Game.js","client/view/game/ui/UIState.js","client/view/game/components/lobby/PurchasedShip.js","client/view/game/components/lobby/FleetList.js","client/view/createGame/Slot.js","client/view/game/components/lobby/LobbySlots.js","model/unit/ships/factions.mjs","client/view/game/components/lobby/Faction.js","client/view/game/components/lobby/FleetStore.js","client/view/baseView/HomeScene.js","client/view/baseView/HomeSceneComponent.js","client/view/createGame/Slots.js","client/view/createGame/CreateGame.js","client/view/createGame/index.js","client/view/home/Home.js","client/view/home/index.js","client/view/login/Login.js","client/view/baseView/index.js","client/view/game/components/lobby/Lobby.js","client/view/game/components/lobby/index.js","client/view/game/ui/shipTooltip/index.js","client/view/game/ui/TurnHeader.js","client/view/game/ui/movement/Movement.js","client/view/game/ui/movement/Container.js","client/view/game/ui/movement/ThrustButton.js","client/view/game/ui/movement/RevertButton.js","client/view/game/ui/movement/CancelButton.js","client/view/game/ui/movement/PivotButton.js","client/view/game/ui/movement/RollButton.js","client/view/game/ui/movement/EvadeButton.js","client/view/game/ui/movement/GameMovement.js","client/view/game/ui/movement/DeploymentPivotButton.js","client/view/game/ui/movement/DeploymentMovement.js","client/view/game/ui/GameUiModeButtons.js","client/view/game/ui/system/SystemList.js","client/view/game/ui/electronicWarfare/EwList.js","client/view/game/ui/leftPanel/LeftPanel.js","client/view/game/ui/replay/ReplayUI.js","client/view/game/ui/combatLog/styled.js","client/view/game/ui/combatLog/HitChance.js","client/view/game/ui/combatLog/DamageLine.js","client/view/game/ui/combatLog/CombatLogLine.js","client/view/game/ui/combatLog/CombatLog.js","client/view/game/ui/shipBadge/ShipBadge.js","client/view/game/GameStoreProvider.js","client/view/game/ui/shipList/ShipFleetBadge.js","client/view/game/ui/shipList/ShipList.js","client/view/game/components/GameUiComponent.js","client/view/login/LoginFloater.js","client/view/game/components/GameComponent.js","client/view/game/index.js","client/view/logout/Logout.js","client/view/logout/index.js","client/Router.js","client/App.js","client/serviceWorker.js","index.js"],"names":["distance","x1","y1","x2","y2","x","undefined","y","Math","sqrt","pow","distance3d","pointA","pointB","dx","dy","dz","z","dist","getSeededRandomGenerator","seed","xmur3","str","i","h","length","imul","charCodeAt","seedGenerator","xoshiro128ss","a","b","c","d","t","r","addToDirection","current","add","ret","getDistanceBetweenDirections","start","end","direction","getPointBetween","percentage","noRound","floor","getPointBetween3d","getPointBetweenInDistance","totalDistance","getDistanceBetweenShipsInHex","s1","s2","getHexPosition","distanceTo","getAngleBetween","angle1","angle2","right","difference","addToHexFacing","facing","getPointInDirection","cx","cy","cos","PI","sin","round","getArcLength","isInArc","radianToDegree","angle","degreeToRadian","getCompassHeadingOfPoint","observer","target","heading","atan2","abs","hexFacingToAngle","angleToHexFacing","shuffleArray","j","random","WebglCanvas","styled","div","ClickCatcher","getMousePositionInObservedElement","event","element","touches","originalEvent","pageX","offset","left","pageY","top","xR","window","innerWidth","yR","innerHeight","clientX","clientY","offsetWidth","offsetHeight","GameSceneComponent","props","onTouchStart","stopPropagation","preventDefault","onWheel","stopImmediatePropagation","game","delta","sign","deltaY","onMouseWheel","onResize","canvasRef","React","clickCatcherRef","mouseDownPosition","lastDraggingPosition","draggingThreshold","addEventListener","document","onKeyDown","bind","onKeyUp","initRender","removeEventListener","onMouseUp","button","onMouseMove","position","onDrag","onMouseOut","nextProps","nextState","onMouseDown","e","HEX_SIZE","ZOOM_MAX","ZOOM_MIN","ZOOM_PERSPECTIVE_MIN","ZOOM_FOR_MAPICONS","ZOOM_FOR_SHIPBADGE","ZOOM_FOR_SHIPBADGE_NAME","TORPEDO_Z","COLOR_FRIENDLY","THREE","Color","COLOR_ENEMY","COLOR_FRIENDLY_HIGHLIGHT","clone","multiplyScalar","COLOR_ENEMY_HIGHLIGHT","COLOR_OEW_FRIENDLY","COLOR_OEW_ENEMY","MEDIUM_WEAPON_RANGE","NEIGHBOURS","q","Offset","console","trace","neighbours","forEach","neighbour","push","toCube","toOffset","subtract","scale","steps","moveToDirection","getNeighbours","radius","ring","map","cube","spiral","Cube","coordinateConverter","fromHexToGame","drawLine","rotate","normalize","PRECISION","lerp","cubeLerp","_formatNumber","_validate","rx","ry","rz","x_diff","y_diff","z_diff","Error","max","index","some","hex","equals","results","k","concat","number","parseFloat","toFixed","n","result","takeStep","getHexA","hexSize","gameConfig","getHexB","getHexHeight","getHexWidth","getHexRowHeight","getTextureHeight","getTextureWidth","getGridWidth","hexCountWidth","getGridHeight","hexCountHeight","amount","height","getShipIcon","object3d","userData","icon","parent","CoordinateConverter","hexlenght","width","zoom","camera","scene","raycaster","Raycaster","fromGameToViewPort","HexagonMath","hex1","hexagon","hex2","getNeighbourAtDirection","gameCoordinates","offsetHex","Vector","pos","setFromCamera","getCamera","intersects","intersectObjects","children","intersected","object","name","point","debug","includes","vector","Vector3","set","project","helperA","helperB","Vector2","dot","sub","scalar","matrix","applyMatrix4","fromGameToHex","RequiredThrust","ship","move","requirements","fullfilments","type","movementTypes","SPEED","requireSpeed","PIVOT","requirePivot","ROLL","requireRoll","EVADE","requireEvade","data","Object","keys","reduce","total","required","getFulfilledAmount","every","getRequirement","thruster","thrusterId","id","entry","key","filter","fulfillment","rollcost","evasioncost","value","movement","isRolled","pivotcost","actualDirection","accelcost","MovementOrder","velocity","rolled","turn","requiredThrust","evasion","setPosition","setVelocity","req","serialize","deserialize","roundToHexCenter","DEPLOY","START","END","isSpeed","isPivot","isEvade","isRoll","MovementResolver","movementService","bill","commit","pay","newMovement","getMoves","replaceMovement","shipStateChanged","roll","rollMove","getRollMove","endMove","getLastEndMoveOrSurrogate","movements","getMovement","playerAdded","isPlayerAdded","nonPlayerAdded","ThrustBill","billAndPay","step","evade","evadeMove","getEvadeMove","getMaxEvasion","pivotDirection","pivot","lastMove","getLastMove","pivotMove","pop","maxPivots","thrust","thrustMove","getHexVelocity","isCancellable","toCancel","removeMovement","thrusters","systems","getSystems","system","callHandler","isDisabled","ThrustAssignment","buildRequiredThrust","fuel","getFuel","paid","directionsRequired","getRequiredThrustDirections","accumulator","accumulate","totalRequired","getCurrentThrustRequired","totalFuelRequirement","all","getFuelRequirement","capacity","getThrustCapacity","isDirection","getNextThrustFuelCost","sort","sortThrusters","getOverheat","aHeat","overheatPercentage","aCooling","coolingPercent","bHeat","bCooling","channeled","process","isPaid","message","parseInt","useThrusters","assigned","getAllUsableThrusters","channel","setRequiredThrust","free","fulfill","addAssigned","isFulfilled","directions","oldChannel","payload","heat","predictHeatChange","MovementService","gamedata","phaseDirector","getLastEndMove","getMostRecentMove","ships","ship2","isDestroyed","terrain","startMove","getVelocity","getGravityVectorForTurn","setEvasion","getEvasion","deployMove","getDeployMove","addMovement","replaceDeployMove","newfacing","currentTurn","relayEvent","canThrust","canCancel","canRevert","cancel","revert","turnDirection","canPivot","canRoll","canEvade","ShipPower","shipSystems","acc","power","getPowerOutput","isOffline","getPowerRequirement","getPowerRequired","getRemainingPowerOutput","canSetOffline","canSetOnline","otherSystem","getSystemById","isGoingOffline","isOnline","setOffline","isGoingOnline","setOnline","isValidPower","DamageEntry","armor","Number","isInteger","isNaN","uuidv4","destroyedSystem","new","Critical","duration","turnsRemaining","className","getClassName","critical","constructor","OutputReduced","outputReduction","getDuration","OutputReduced2","OutputReduced4","OutputReduced6","OutputReduced8","LoadingTimeIncreased","loadingTimeIncrease","ForcedOffline","ForcedOfflineOverheat","getOverheatPercentage","ThrustChannelHeatIncreased","heatMultiplier","SystemDamage","entries","criticals","damage","find","setSystem","old","isReplacedBy","crit","getDamage","hitpoints","getTotalDamage","advanceTurn","Boolean","isFixed","POWER_TYPE_OFFLINE","POWER_TYPE_BOOST","POWER_TYPE_GO_OFFLINE","POWER_TYPE_GO_ONLINE","PowerEntry","powerType","SystemPower","forceOffline","SystemHeat","overheat","heatTransferPerStructure","overheatLimitPerStructure","overheatTransferRatio","heatTransferred","isHeatStorage","getHeatTransferPerStructure","ratio","getOverheatTransferRatio","withRatio","getMaxTransferHeat","overheatTransfer","getTransferOverHeat","getHeat","newHeat","cooling","overHeatThreshold","maximumPossibleOverheatReduction","getHeatGenerated","finalHeat","heatCooling","maxOverheatCooling","overheatCooling","cumulatedOverheat","actualOverheatCooling","getOverheatTreshold","maxCooling","getMaxHeatStoreCapacity","change","extra","ShipSystemLogEntry","messages","formatNumber","ShipSystemLogEntryHeat","initialOverheat","initialOverheatPercentage","heatGenerated","heatCooled","heatRadiated","isForcedOffline","intialHeatStored","newHeatStored","heatGivenToRadiators","isRadiator","isStorage","getHeatStorageMessage","getRadiatorMessage","getRegularMessage","heatMessage","ShipSystemLogEntryCriticalHit","newDamagePoints","overHeatPoints","oldDamagePoints","criticalMessage","extraPoints","ShipSystemLogEntryDamage","blockedByArmor","wasDestroyed","damageEntry","addBlockedByArmor","systemLogEntryClasses","ShipSystemLog","log","isOpen","isTurn","getMessage","turns","turnEntry","setTurn","ShipSystem","args","strategies","strategy","init","heatMessages","shouldDisplayHeat","component","currentOverheat","prediction","header","getRemainingHitpoints","getArmor","armorMod","shipWasDestroyed","systemWasDestroyed","addDamage","setDestroyedSystem","logEntry","getOpenLogEntryByClass","markDestroyedThisTurn","addCritical","hasAnyCritical","hasCritical","response","instance","endTurn","ShipSystemStrategy","diceRoller","dice","DiceRoller","previousResponse","hasHandler","CargoEntity","Torpedo","minRange","maxRange","hitSize","damageStrategy","visuals","engineColor","explosionType","explosionSize","flight","getMessages","Torpedo158","HitSystemRandomizer","totalStructure","ceil","getSystemHitSize","rollForSystem","tested","CombatLogDamageEntry","notes","note","logEntryClass","systemId","damageIds","damageId","getDamageById","StandardDamageStrategy","damageFormula","armorPiercingFormula","hitSystemRandomizer","ammo","join","_getDamageTypeMessage","_getDamageMessage","_getArmorPiercingMessage","fireOrder","combatLogEntry","hitResolution","hit","setShots","_doDamage","shooterPosition","shooter","getPosition","damageResult","lastSection","armorPiercing","_getArmorPiercing","_getDamageForWeaponHit","hitSystem","_chooseHitSystem","addNote","_doDamageToSystem","overkillSystem","_findOverkillStructure","sections","getSectionBySystem","section","structure","getStructure","finalArmor","armorPiercingLeft","randomizeHitSystem","getSystemsForHit","requiredToHit","rolledToHit","getArmorPiercing","MSVTorpedoDamageStrategy","rangePenalty","numberOfShots","strikeHitChance","minStrikeDistance","msv","getStrikeDistance","torpedoFlight","hitProfile","getHitProfile","strikePosition","rangeModifier","getHitChance","combatLogEvent","attackPosition","shots","hitChance","hits","Torpedo158MSV","Torpedo158MSV2","ExplosiveDamageStrategy","numberOfDamagesFormula","numberOfDamages","_getNumberOfDamagesForWeaponHit","HETorpedoDamageStrategy","numberOfHitsFormula","launchPosition","Torpedo158Nuclear","Torpedo72","Torpedo72MSV","Torpedo72HE","Torpedo158HE","Ammo","Ammo30mm","Ammo85mmHE","Ammo85mmAP","Ammo140mmAP","Ammo140mmHE","Ammo120mmAP","Ammo120mmHE","NoAmmunitionLoaded","ammunition","torpedoes","conventional","cargoClasses","CargoBaySystemStrategy","space","cargo","list","cargoBaySystemStrategy","getCargoSpaceUsed","getSpaceRequired","getAvailableCargoSpace","stored","parentClass","getCargoEntry","hasSpaceFor","StoreHeatStrategy","heatCapacity","RadiateHeatStrategy","radiationCapacity","getHeatRadiationCapacity","undamaged","getPercentUnDamaged","heatLeft","FuelTankSystemStrategy","fuelTankSystemStrategy","Structure","cargoSpace","heatStorage","radiator","addStrategy","SYSTEM_LOCATION_PRIMARY","SYSTEM_LOCATION_FRONT","SYSTEM_LOCATION_AFT","SYSTEM_LOCATION_PORT_FRONT","SYSTEM_LOCATION_PORT_AFT","SYSTEM_LOCATION_STARBOARD_FRONT","SYSTEM_LOCATION_STARBOARD_AFT","SystemSection","location","systemLocation","PrimarySection","AftSection","FrontSection","PortAftSection","PortFrontSection","StarboardFrontSection","StarboardAftSection","ShipSystemSections","shipPosition","shipFacing","getOffsetHex","intervening","getNeighbourAtHeading","blockingSection","hasUndestroyedStructure","getHitSectionHeading","getSectionsThatCanBeHit","newSection","getNextSectionForHit","getSection","hasSectionWithStructure","ShipSystems","systemsAsArray","structuresDestroyed","structures","primaryStructure","getPrimarySection","getHitSections","getFacing","getSectionsForHit","addSystem","addShipSystemsReference","getFrontSection","getAftSection","getStarboardFrontSection","getStarboardAftSection","getPortFrontSection","getPortAftSection","systemData","clientShip","gameData","phase","clientSystem","user","mine","producedAndTransferred","getRadiateHeatCapacity","EW_OFFENSIVE","EW_DEFENSIVE","EW_CC","EW_OFFENSIVE_SUPPORT","EW_DEFENSIVE_SUPPORT","EW_DISRUPTION","EW_AREA_DEFENSIVE_SUPPORT","ElectronicWarfareEntry","targetShipId","ewTypes","ShipCurrentElectronicWarfare","dew","ccew","ElectornicWarfareEntry","getFromEntries","combined","getType","existing","combinedEntry","Ship","getAmount","UnableToAssignEw","ShipElectronicWarfare","inEffect","getDefensiveEw","getCcEw","getAllEntries","canAssignEw","assingEw","getEw","getEwArrays","assignEntries","allowIncomplete","removeAll","negativeEntries","negativeEntry","assignPositiveEW","availableSystems","getAvailableSystemsForEntry","shift","aValidTypes","bValidTypes","User","username","accessLevel","ShipPlayer","ShipMovement","moves","buildIndex","toDelete","other","isEnd","isDeploy","isStart","deploy","newMove","lastIndex","callAllSystemHandlers","fulfilments","getFulfilments","fulfilment","slice","reverse","getStartMove","getTotalAmountRequired","getThrustOutput","getThrustRequired","otherShip","otherShipPosition","otherShipFacing","hexSizes","otherHex","hasValidMovement","replaceLastMove","shipFuel","fuelCost","getFuelCost","payFuel","tank","aFuel","bFuel","moveData","pointCost","frontHitProfile","sideHitProfile","shipModel","shipTypeName","setShipProperties","front","getFrontHitProfile","getSideHitProfile","hexFacing","shipData","shipClass","slotId","player","electronicWarfare","destroyedThisTurn","gameId","removeMovementExceptEnd","censorForUser","removeMovementForOtherTurns","activatePlannedElectronicWarfare","getRequiredPhasesForReceivingPlayerData","receivePlayerData","FireOrder","shooterId","targetId","weaponId","weaponSettigs","resolved","WeaponFireService","getShips","getAllFireOrdersForShip","getAllFireOrders","order","fireOrders","weapon","canFire","PhaseState","state","starVertexShader","starFragmentShader","effectVertexShader","effectFragmentShader","spriteFragmentShader","spriteVertexShader","lineFragmentShader","lineVertexShader","boltVertexShader","boltFragmentShader","line2dVertexShader","line2dFragmentShader","effectSpriteFragmentShader","effectSpriteVertexShader","loader","GLTFLoader","entities","cloneObject","source","cloneMaterial","sourceLookup","Map","cloneLookup","animations","parallelTraverse","sourceNode","clonedNode","traverse","node","isSkinnedMesh","clonedMesh","sourceMesh","get","sourceBones","skeleton","bones","bindMatrix","copy","bone","isMesh","material","callback","loadObject","url","cached","entity","Promise","resolve","reject","load","GEOMETRY","getTexture","LineSprite","lineWidth","mesh","color","opacity","uniforms","time","textureRepeat","pulse","pulseAmount","pulseSpeed","transparent","depthWrite","depthTest","side","blending","vertexShader","fragmentShader","create","update","animate","now","Date","needsUpdate","requestAnimationFrame","wrapT","minFilter","geometry","size","textureSize","roundTestureRepeate","force","setY","quaternion","setFromUnitVectors","setX","testureRepeat","visible","remove","dispose","textureLoader","geometries","baseMaterial","Sprite","image","texture","overlayAlpha","overlayColor","m","alpha","g","rotation","getMaterial","clearCanvas","canvasid","canvas","getElementById","getContext","clearRect","clearContext","context","clearSmallCanvas","getCanvas","drawCone","p1","p2","arcs","w","beginPath","moveTo","lineTo","arc","mathlib","closePath","stroke","fill","drawBox","p","lw","drawCircle","drawHollowCircleAndFill","r2","drawEllipseSegment","s","ellipse","drawCircleSegment","drawDottedCircle","segments","gapratio","deg","gap","drawFilledCircle","r1","drawFilledEllipse","drawCircleAndFill","drawCircleNoStroke","drawArrow","p3","p4","p5","p6","p7","drawX","l","drawCenteredHexagon","leftside","topleft","topright","drawHexagon","drawAndRotate","iw","ih","img","save","translate","drawImage","restore","createElement","style","zIndex","border","body","appendChild","createCanvas","abstractCanvas","gridWidth","gridHeight","wrapS","repeat","getHorizontalRepeat","getVerticalRepeat","hexagons","renderHexGrid","canvasSize","lineColor","fillColor","hl","antialias","fillStyle","strokeStyle","canvas2","getHexGridTexture","getHexTexture","TEXTURE_SIZE","TEXTURE","createTexture","HexagonTexture","getStrokeColor","getFillColor","tex","HexagonSprite","getDEWWidth","DEW","getEvasionWidth","getCCEWWidth","CCEW","drawDEW","ratios","getDEWRadiuses","getCCEWRadiuses","getEvasionRadiuses","drawEvasion","setLineDash","drawCCEW","ShipEWSprite","dimensions","calculateRadiusRatios","ShipFacingSprite","setOpacity","DottedCircleSprite","TextSprite","text","fontSize","font","textAlign","textBaseline","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","fillText","CircleSprite","textureMovementTarget","ShipMapSprite","movementTarget","hexagonMesh","verticeAmount","Line","dashSize","subVectors","ready","resolveReady","currentRotationMatrix","getGeometry","speed","pulseAttribute","pulses","getVertexAmount","Float32Array","setDynamic","setAttribute","setXY","dashAttribute","dashRatio","dashes","colors","colorAttribute","setXYZ","opacityAttribute","opacitys","pointX","pointY","orientation","lookAt","up","multiply","createMesh","getOrientation","applyMatrix","setColorAttribute","setDashed","setPulse","getInverse","updateMesh","ShipMapIcon","normalSprite","movementTargetSprite","sprite","hide","replaceColor","revertColor","setScale","setFacing","setOverlayColor","setOverlayColorAlpha","show","Animation","getRandom","active","started","done","startCallback","doneCallback","last","goingBack","changeAttribute","values","attributes","array","TEXTURE_GAS","TEXTURE_BOLT","TEXTURE_GLOW","TEXTURE_RING","TEXTURE_STARLINE","BaseParticle","emitter","gas","bolt","glow","starLine","setInitialValues","setColor","setFadeIn","setFadeOut","setSize","setSizeChange","setAngle","setActivationTime","setAcceleration","setTexture","setRepeat","frequency","amplitude","acceleration","gameTime","ParticleEmitter","particleCount","effects","zoomLevel","particleGeometry","dynamic","setDrawRange","particleMaterial","flyParticle","frustumCulled","aquire","particleIndices","BoltInstance","boltContainer","setQuaternion","fade","setDeactivationTime","BoltContainer","offsetAttribute","textureNumberAttribute","scaleAttribute","quaternionAttribute","velocityAttribute","activationGameTimeAttribute","deactivationGameTimeAttribute","deactivationFadeAttribute","repeatAttribute","numberCreated","flyBolt","used","setArray","setIndex","setEmitter","setXYZW","loadedCube","BoltInstanceFactory","loadCube","makeInstanced","cubeGeometry","original","uv","offsets","textureNumbers","scales","quaternions","velocitys","activations","deactivations","fades","repeats","ParticleEmitterContainer","defaultParticleAmount","boltInstanceFactory","reservations","emitters","star","effect","normal","_isReady","readyPromise","createStarParticleEmitter","createBoltParticleEmitter","createNormalParticleEmitter","createEffectParticleEmitter","StarParticleEmitter","setParentPosition","reserver","hasFree","createParticleEmitter","particle","getParticle","cleanUp","reservation","freeParticles","render","StarParticle","setAngleChange","setParallaxFactor","setSineFrequency","setSineAmplitude","parallaxFactor","sineFrequency","sineAmplitude","ShipObjectBoundingBox","hasFrontSectionWithStructure","hasAftSectionWithStructure","hasStarboardFrontSectionWithStructure","hasPortFrontSectionWithStructure","hasStarboardAftSectionWithStructure","hasPortAftSectionWithStructure","getX","startX","endX","getY","startY","endY","disregardStructure","horizontal","getAmountOfHorizontalSections","vertical","getAmountOfVerticalSections","bounds","getBoundsForSectionDisregardStructure","boundSize","setZ","BoltEffect","startTime","startPosition","endPosition","particleEmitterContainer","createBolt","directionNormal","tailLength","getBoltParticle","setBoltTexture","setRotation","coreLength","corePosition","coreTime","coreOpacity","boltEffect","ExplosionEffect","emitterContainer","getRandomColor","setRGB","getSmokeColor","createGas","createGlow","createEMP","createPillar","createMainGlow","createCore","createWhiteCenter","shootoffs","createShootOffs","createMain","createPillars","createEmpGlow","createEmpCore","activation","fadeInSpeed","fadeOutAt","createShootOff","fadeOutSpeed","activationTime","getYellowColor","getCoreColor","getNormalParticle","release","ShipObjectSectionDamageEffect","damageCache","animationTime","center","boundingBox","particleContainer","shipZ","removeDamage","getSectionsWithStructure","createDamageForSection","particles","getByIndex","activateFromCache","getBoundsForSection","dimensionDebugCube","getColor","wireframe","count","createSmoke","sparkCount","createSpark","toObject","getYellowRandomColor","modPosition","ShipObject","shipId","systemLocations","bumpMap","shipObject","systemObjects","resolveShipObjectLoaded","isShipObjectLoaded","mapIcon","hexSprites","hexSpriteContainer","ghostShipObject","shipSideSprite","shipEWSprite","shipSelectedSprite","line","defaultHeight","sideSpriteSize","hidden","emissiveReplaced","ghost","forcedEmissiveColor","ewSpriteDimensions","shipObjectBoundingBox","shipObjectSectionDamageEffect","consumeShipdata","bumpScale","flipY","child","addTo","shipObjects","overlaySpriteSize","setShipZ","setFromAxisAngle","tmpQuaternion","replaceOpacity","names","slot","newEntity","setId","replaceEmissive","replacement","emissive","emissiveMap","forceEmissive","hexSprite","hideShip","showShip","renderPayload","playAnimation","setAnimation","disableAnimation","iconPosition","iconFacing","getIconHexas","hexas","getShipHexas","lowest","highest","Gunship","Loader","loadTexturesAndAssign","startRotation","Rhino","autoCannon","shipMaterial","Capital","normalScale","shininess","loadObject3d","Object3d","actions","animationMixer","loopAnimation","callBack","clip","findByName","action","clipAction","reset","weight","paused","clampWhenFinished","loop","play","Haka","setShipObject","Caliope","Fulcrum","Mouros","Impetous","buildShipArray","iconsAsObject","createIcon","createGhostShipIcon","currentUser","setGhostShip","is","ShipIconContainer","iconsAsArray","ghostShipIcons","hasIcon","call","hexHeight","getHexHeightViewport","currentDistance","icons","getIconsInSameHex","closest","closestDistance","shipIcon","getLastMovement","OEWIndicator","targetIcon","targetGhost","shipGhost","targetPosition","createLine","getZ","destroy","newTargetPosition","newShipPosition","updateTextureSize","ShipEWIndicators","shipIconContainer","getByShip","oew","useGhost","createOEW","shipsLoaded","newOew","getAllOew","ewEntry","getById","getGhostShipIconByShip","indicator","indicatorNew","CurrentOEWIndicator","ShipCurrentEWIndicators","COLOR_OEW_DIST","COLOR_SDEW","COLOR_OEW_SOEW","ElectronicWarfareIndicatorService","iconContainer","indicators","currentIndicators","isShip","getCurrentIndicators","getIndicators","TerrainRenderer","terrainObjects","getEntities","createObject","diameter","ShipWindowManager","uiState","setShipWindows","openShip","MovementPath","objects","getNewEndMove","createMovementLine","createMovementFacing","setGhostShipEmissive","setMovementTarget","MovementPathService","paths","path","movementPath","getPath","LOBBY","ACTIVE","FINISHED","ABANDONED","DEPLOYMENT","GAME","getInterestingStuffInPosition","mouseovered","getIconsInProximity","PhaseStrategy","services","inactive","animationPaused","animationReversed","currentDeltaTime","animationStartTime","totalAnimationTime","lastAnimationTime","animationEndtime","animationTurnLength","callStrategies","activate","functionName","stopped","updateDeltaTime","updateTotalAnimationTime","torpedoIconContainer","setGameData","updateStrategies","activateStrategies","gameConnector","LobbyPhaseStrategy","setLobby","takeSlot","leaveSlot","buyShips","UiStrategy","MouseOverShowsMovementPath","movementPathService","hideAllMovementPaths","showMovementPath","getArray","hideMovementPath","SelectedShipMovementPath","getSelectedShip","HighlightSelectedShip","activeTime","revertEmissive","revertOpacity","SelectedShipMovementUi","hideShipMovement","showShipMovement","ShowDeploymentAreas","areas","area","sprites","slots","getSlots","deploymentLocation","deploymentRadius","isUsers","isUsersTeamSlot","getRandomPosition","maxDistance","constructFirstCurve","nextPosition","constructEvasionCurve","currentPosition","constructEvasionCurves","curves","positions","Array","ShipEvasionMovementPath","percent","curveNumber","decimal","curve","getPoint","shouldEaseIn","startsAndEnds","startEndIndex","between","betweenIndex","lastBetween","shouldEaseOut","nextBetween","nextMove","betweenMap","easeIn","easeOut","startsAndEndsToSteps","startFacing","endFacing","setStartFacings","newStep","movesToSteps","PivotPath","percentDone","stepIndex","stepDone","ShipMovementAnimation","positionCurves","movesToCurves","pivotSteps","PivotSteps","startRoll","endRoll","easeInOut","getPositionAndFacing","turnDone","getMovementTurnDone","isDestroyedThisTurn","getCurrentRoll","setRoll","buildPositionCurve","point1","control1","control2","point2","ShipIdleMovementAnimation","gameTerrain","getRoll","back","isRolling","ShipSystemAnimation","updateAll","updateSystem","disableSystemAnimation","playSystemAnimation","setSystemAnimation","ShipWeaponAnimation","applyQuaternion","getLocationForSystem","getRandomPositionForSystem","transformLocation","toThree","getRandomPositionOnShip","ShipWeaponBoltAnimation","shooterIcon","weaponAnimationService","shotsHit","extraWait","getBoltEffect","explosion","causedDamage","getDamageExplosion","ShipWeaponBoltBurstAnimation","missesFirst","offsetVector","missExtra","missFade","totalShots","startExtra","shotNumber","ShipWeaponUniversalBoltAnimation","omitHitExplosion","setStartPosition","setEndPosition","setStartTime","shot","hitsStart","currentShot","impactPosition","fireEntry","getRandomLocationOnShip","damages","getLocationForSystemOrRandomLocationOnSection","impactTime","startWait","firstHit","getFirstHit","AnimationUiStrategy","removeAllAnimations","animation","deactivate","toRemove","ShipDamageAnimation","createDamageForSections","createDamage","ShowShipObjects","RightClickShowsShipWindow","MouseOverShowsShipTooltip","clickedShip","clickedEnemy","mouseOveredShip","isMine","showShipTooltip","hideShipTooltip","MouseOverHighlightsShip","SelectUndeployedShip","getShipsForUser","selectShip","DeployShipOnHexClick","getSlotByShip","isValidShipDeployment","AllowSubmittingWhenDeploymentDone","setTurnReady","checkDeployment","DebugDrawLineFromSelectedShip","NavigationalMovementPath","performance","newPosition","newVelocity","collision","SelectedShipNavigationPath","SelectedShipDeploymentMovementUi","showShipDeploymentMovement","ShowWaitingStatus","setWaiting","SelectFirstActiveShip","gameCamera","activeShips","isActive","oldShip","newShip","getShipById","getActiveShipsForUser","setByLookAtPosition","WEAPONS","ENEMY_WEAPONS","MOVEMENT","EW","AllShipsMovementPaths","hasGameUiMode","gameUiModes","getAliveShips","AllowSubmittingOnValidGameState","AutomaticReplay","phaseStrategy","replayContext","gameDatas","setTimeout","animateFromTo","getTurnLength","closeReplay","ShowReplayUi","showReplayUi","blue","darkBlue","borderDark","textDanger","lightBlue","red","systemWindowBorder","systemWindowPrimaryBorder","systemBorder","tooltipButtonColor","mediumBlue","hitpointsCritical","Arrow","ArrowSmall","Roll","X","Evade","Pivot","Cancel","CheckMark","Play","PureComponent","Pause","Replay","IconAndLabel","background","Container","Backdrop","ContainerRoundedRightBottom","ContainerRounded","ContainerRoundedRightSide","defaultPadding","css","defaultWidth","DarkContainer","Section","SectionRight","Cell50","Paragraph","Label","span","Value","Title","SubTitle","Clickable","disabled","InputAndLabel","label","placeholder","onChange","error","rest","SubContainer","Input","input","TooltipContainer","Tooltip","RelativeTooltipContainer","TooltipValue","RelativeTooltip","getBoundingClientRect","bottom","TooltipHeader","TooltipSubHeader","TooltipValueHeader","TooltipEntry","noMargin","important","clickable","CenteredTooltipEntry","InlineTooltipEntry","TooltipMenu","selectedTooltipButton","disabledTooltipButton","hoverTooltipButton","TooltipButton","selected","buildTooltipEntries","componentHandler","subKey","isValue","replace","isArray","SystemTooltip","tab","RelativeOrStaticTooltip","relative","greyButton","iconStyle","IconContainer","ButtonContainer","buttonStyle","Button","CloseButtonContainer","CloseButton","Link","RouterLink","LinkInline","Text","ShipName","Amount","OEWButtons","canAssignOffensiveEw","assignOffensiveEw","GamePositionComponent","containerRef","renderCallback","onGameRender","marginTop","marginLeft","subscribeToRender","unsubscribeFromRender","InfoHeader","SystemInfoTooltip","Entry","Header","InfoValue","SystemInfoWeaponTargeting","baseToHit","fireControl","outOfRange","evasionPenalty","ownEvasionPenalty","noLockPenalty","CargoTooltipContainer","CargoTooltip","additionalContent","absoluteTooltip","getDisplayName","getCargoInfo","getEntry","Component","onClick","CargoItem","createRef","mouseOveredCargo","handleMouseOver","setState","handleMouseOut","handleOnClick","tooltipAdditionalContent","onCargoMouseOver","onCargoMouseOut","getBackgroundImage","CargoListContainer","CargoList","customEvent","mouseOveredSystem","TorpedoList","TorpedoCargoItem","TorpedoLauncher","launcher","forceUpdate","systemChangedCallbackInstance","systemChangedCallback","subscribeToSystemChange","unsubscribeFromSystemChange","launcherIndex","unloadAmmo","shipSystemStateChanged","torpedo","loadAmmo","getLoadedTorpedoTarget","loadedTorpedo","launchTarget","loadingTime","turnsLoaded","torpedoMouseOver","torpedoMouseOut","getPossibleTorpedosToLoad","loadTorpedo","LoadingList","NewTargetContainer","MagazineTooltipEntry","LoadingButton","loadingOpen","ammoStrategy","loadingTarget","getLoadingTarget","ammunitionClasses","notFound","addToLoading","ammoPerFireOrder","getSelectedAmmo","getShortDisplayName","getAmmoInMagazine","startLoadingAfter","turnsOffline","intakeInTurn","getLoadingTargetAmount","getNewLoadOutButtons","RangeContainer","RangeNumbersContainer","RangeStep","RangePenalty","rangeStrategy","getMaxRange","getRangeModifier","range","ranges","rangesAndPenalties","BarContainer","Bar","ChangeBar","more","barDecreaseColor","barIncreaseColor","oldPercent","DividerBar","HeatBar","newPercent","divider","barColor","FuelBar","HeatBarContainer","SystemHeatBar","useState","details","setDetails","useMemo","FuelBarContainer","SystemFuelBar","SystemStrategyUiComponent","SystemStrategyUi","myShip","Warning","HeaderMenu","HeaderMenuItem","SystemStrategyUiComponentContainer","LogContainer","SystemInfo","warnings","getCriticals","getSystemDescription","getWithTurns","messageIndex","systemInfoMenuProvider","weaponTargeting","Menu","getWarnings","getSystemInfo","getComponentHandler","scs","getDefaultTab","getLogTab","getInfoTab","HealthBar","destroyed","health","SystemText","System","targeting","reserved","firing","offline","boosted","loading","Overheat","SystemIcon","clickedSystem","weaponFireService","getSystemFireOrderTargetId","systemMenu","activeSystem","activeSystemElement","onSystemClicked","clickSystem","getIconText","menu","displayMenu","systemHasFireOrder","systemHasFireOrderAgainstShip","oldOverheat","newOverheat","onSystemMouseOver","onSystemMouseOut","onContextMenu","isLoading","getStructureLeft","StructureText","StructureContainer","StructureIcon","ShipSectionContainer","ShipSection","getNonStructureSystems","isSelectedSystem","ShipWindowContainer","Column","ColumnMiddle","ShipWindow","shipWindowClicked","useCallback","team","WeaponTargeting","TorpedoFlight","intercepted","TorpedoLauncherStrategy","torpedoClass","nextTorpedoClass","changeAmmo","previousTorpedo","launcherData","hexDistanceTo","possibleNewTorpedos","newAmmo","same","cargoBay","from","newTorpedo","receiveAmmoChange","previousTurnsLoaded","clientStrategy","getThisStrategy","canLaunchAgainst","possibleAmmo","ammoEntry","TorpedoAttackService","allLaunchers","launchers","torpedoAttackShips","attack","deltaDistance","getDeltaVelocty","aLastMove","bLastMove","aPosition","bPosition","newDistance","getTorpedoTooltip","strikePrediction","impactTurn","impactVelocity","TorpedoAttackTooltip","TorpedoAttackEntry","onLauncherClick","setLaunchTarget","launcherClick","WeaponTargetingList","torpedoAttackService","targetShip","unTargetShip","removeFireOrders","addFireOrder","isSameTeam","getPossibleTorpedosFrom","getSystemIcons","TorpedoMovementService","torpedoMath","getTorpedoGameDeltaVelocity","accelerationVector","maxInterceptVelocity","effectiveness","turnsActive","armingTime","turnsToLive","buildPredictions","shooterVelocity","targetVelocity","Δpos","φ","rotationMatrix","Matrix4","makeRotationZ","newShooterVelocity","torpedoAcceleration","standardize","accelerationAngle","θ","findRoot","toString","vx","vy","findRoot2","findUpperLimit","findLowerLimit","θ1","θ2","θlow","θhigh","θmid","f","argument","Cell","TorpedoAttack","ShipHeatBar","ShipFuelBar","newFuel","Row","ShipDetailsTooltipEntry","ShipTooltipDetails","heatPercent","getTotalHeatStored","getTotalHeatStorage","heatChange","getPassiveHeatChange","newHeatPercent","shipFuelSpace","getFuelSpace","shipNewFuel","BackTooltipMenu","RotatedButton","GameShipTooltipMenuBack","selectTooltipTab","getAttackRunMessages","getInterceptors","interceptors","getPossibleInterceptors","interceptChance","interceptor","interceptorGroups","intercept","group","intercepts","min","getInterceptValue","TorpedoDefenseTooltip","interceptorEntries","IncomingTorpedo","sortFlights","getTorpedosAgainstThisShip","torpedos","getTorpedoFlights","getTorpedosAgainstFriendlyShips","entryShip","flights","TorpedoDefense","friendlyEntries","SERVER_URL","SERVER_WEBSOCKET_URL","axiosConfig","withCredentials","headers","login","password","axios","post","register","getCurrentUser","logout","createGame","createTestGameGame","actionTypes","GET_CURRENT_USER","dispatch","reducer","StateStore","createContext","DispatchStore","initialState","StoreProvider","useReducer","useEffect","ShipNameContainer","useContext","CCEWButtons","canAssignCcEw","assignCcEw","GameShipTooltipMenuTorpedoDefense","ShipTooltipContainer","interactable","TOOLTIP_TAB_TORPEDO_ATTACK","TOOLTIP_TAB_TORPEDO_DEFENSE","ShipTooltip","tooltipTab","ui","shipTooltipMenuProvider","getTooltipTab","getMenu","getTabHeader","toggleRadiators","on","hasRadiators","hasOnlineradiators","toggleInterceptors","hasInterceptors","hasOnlineInterceptors","GameShipTooltipMenu","selectedShip","isSelected","getOffensiveEw","GameShipTooltipMenuStrategy","setTooltipMenuProvider","getTooltipComponent","ShowUiModeButtons","showUiModeButtons","OwnedShipEw","electronicWarfareIndicatorService","hideAll","showForShip","getUsersShips","MouseOverShowsElectronicWarfare","ShipClickSelectsShip","CurrentEW","hideAllCurrent","getShipsEnemyTeams","showCurrentForShip","getShipsInSameTeam","WeaponArcsOnSystemMouseOver","weaponArcs","getHexDistance","fillRect","faceVertexUvs","_","uvsNeedUpdate","circle","arcsList","arcLenght","intial","SelectWeaponOnSystemClick","deselectAllSystems","isWeapon","deselectSystem","selectSystem","updateState","SelectedShipSystemList","setSystemList","showOnSystemList","GameSystemTooltipMenu","disabledHandler","onClickHandler","GameSystemInfoMenuStrategy","setSystemInfoMenuProvider","SystemClickShowsSystemMenu","setSystemMenuActiveSystem","SelectedShipEwList","setEwList","UnderHexForShips","showing","ShowMapIcons","showingIcons","showHighligh","shouldShow","hideHighligh","changeScale","showMapIcon","changeToMapView","hideMapIcon","changeToCloseView","showIcons","hideIcons","extraScale","ShowShipBadges","showingName","showShipBadge","showName","hideShipBadge","removeShipBadge","ShowTorpedoObjects","lines","hexes","hexPositions","hexPosition","spriteFacing","toVector","isShipInUsersTeam","isPosition","isOverlayColor","handleImpactingTorpedo","markHexes","getIconByTorpedoFlight","variance","torpedoPosition","flightId","WeaponTargetingMouseoverShowsLine","ShowShipDEWandCCEW","getActiveEvasion","showEwSprite","hideEwSprite","DeploymentPhaseStrategy","commitDeployment","ReplayPhaseStrategy","WaitingPhaseStrategy","GamePhaseStrategy","commitTurn","ShipVelocityAnimation","positionCurve","ReplayContext","firingDuration","movementDuration","torpedoAttackDuration","destroyedShipsDuration","systemsDestroyed","unpauseAndRewindAnimation","pauseAnimation","unpauseAnimation","setAnimationTime","systemShip","ShipWeaponAnimationService","CombatLogShipMovement","replayOrder","CameraPositionAnimation","endTime","lastTime","smoothMove","getLookAtPosition","doMove","WeaponHitChance","absoluteResult","rollingPenalty","CombatLogWeaponFireHitResult","hitRoll","CombatLogWeaponFire","fireOrderId","hitResult","ammoName","getDamages","CombatLogGroupedWeaponFire","fire","getKey","getSprite","toUpperCase","changeTimeIfNeccessary","texts","inSameHex","getInSameHex","isTooClose","gamePosition","SystemDestroyedTextAnimation","destroyedTexts","destroyedText","ellapsedTime","newPos","fadeTime","TorpedoMovementAnimation","launch","interceptTime","impact","CombatLogTorpedoAttack","torpedoFlightId","CombatLogGroupedTorpedoAttack","TorpedoExplosionHE","TorpedoExplosionMSV","msvPosition","boltArgs","explosionPosition","missAmount","CombatLogTorpedoLaunch","TEXTURE_FILLED_RING","EffecSprite","fadeInDuration","fadeOutDuration","fadeOutTime","textureNumber","scaleChange","getOpacity","ShipDestroyedAnimation","hideTime","explosionCount","mainExplosionGlow","secondaryExplosionGlow","getMovesForShip","getEndMoveForShip","getStartMoveForShip","getShipStartPositionAndFacingForShip","ReplayTurnActions","systemDestroyedTextAnimation","startCombatLog","combatLog","getForReplay","buildMovementAnimation","buildWeaponFireAnimation","buildTorpedoMoveAnimation","buildTorpedoAttackAnimation","buildShipDamageAnimations","getDestroyedShipsStart","cameraDuration","effectStart","addDestroyedShipsDuration","getDestroyedStructuresByShip","buildDestroyedShipsAnimation","destroyedSections","destroyedAnimations","newDestroyed","interceptPosition","isSucessfull","animationName","ShipWeaponAnimations","charAt","attackDuration","getNextTorpedoAttackStart","fireStart","longestDuration","torpedoEntry","getTorpedoFlightById","addToCombatLog","getInterceptsFor","attackDistance","msvDistance","flightDuration","randomFlightDuration","flightEndTime","getDestroyedSystems","getInterceptPosition","buildInterceptAnimation","addTorpedoAttackAnimationDuration","getMovementStart","setMovementDuration","getNextFireStart","getFireOrderById","systemDestroyedTime","noteDestroyedSystem","addFireAnimationDuration","doesMove","hideCombatLog","AutomaticReplayPhaseStrategy","replayTurnActions","GameDataCache","replays","currentGameData","lastGameData","replay","newReplay","GameSlot","shipIds","userId","bought","deploymentVector","points","includesShip","GameSlots","teams","userSlot","addSlot","slotData","BoostableSystemStrategy","maxLevel","boostLevel","remainginPower","getPowerRequiredForBoost","canBoost","getStrategiesByInstance","targetBoostlevel","canDeBoost","deBoost","boost","boostableSystemStrategy","ThrustOutputSystemStrategy","output","getOutputReduction","severity","onSystemPowerLevelDecrease","revertMovementsUntilValidMovement","RequiresPowerSystemStrategy","getsCriticals","PowerOutputSystemStrategy","directionsToString","THRUSTER_MODE_FUSION","THRUSTER_MODE_MANEUVER","THRUSTER_MODE_CHEMICAL","ThrustChannelSystemStrategy","thrustHeatExtra","fuelExtra","mode","alternateModes","newMode","canChangeMode","indexOf","increase","getFuelPerThrustChanneled","thrustChannelSystemStrategy","thisData","substring","getDirectionString","changeMode","onDisabledHandler","getBaseHeatPerThrustChanneled","getHeatIncrease","extraIncrement","getHeatPerThrustChanneled","getMaxChannelAmount","targetMode","AllowsEvasionSystemStrategy","typeAsString","ElectronicWarfareProvider","allowedEwTypes","electronicWarfareProvider","getUsageVsOutputText","getTotalEwUsed","getEwOutput","getValidEwTypes","canUseEw","getEwEntry","addAmount","canUseEwType","canUseEwAmount","getUnusedCapacity","repeatElectonicWarfare","LargerHitProfileOnlineSystemStrategy","hitSizeMultiplier","largerHitProfileOnlineSystemStrategy","BoostablePlusOneOutputSystemStrategy","basePowerRequirement","ArmorBoostOfflineSystemStrategy","armorBoost","OutputHeatOnlineStrategy","heatOutput","heatOutputPerBoostLevel","FireOrderHeatStrategy","heatPerFireOrder","AlwaysTargetableSystemStrategy","turnsOfflineToCancel","alwaysTargetableSystemStrategy","StandardHitStrategy","weaponSettings","toHit","addHitResult","initialRangeModifier","getFireControl","onRange","StandardRangeStrategy","currentRange","exactModifier","modifier","CombatLogWeaponOutOfArc","FireOrderStrategy","resolutionPriority","setResolved","addEntry","fireOrderStrategy","StandardLoadingStrategy","firedThisTurn","boostLoading","_getBoostLoading","getLoadingTime","boostPower","loadingPerTurn","_getTurnsUntilLoaded","isLoaded","getLoadingTimeIncrease","standardLoadingStrategy","loadingStep","targetLoading","WeaponArcStrategy","targetHeading","shooterFacing","getArcs","isPositionOnArc","Reactor","TestDamageStrategy","BurstDamageStrategy","shotsFormula","maxShots","grouping","_getNumberOfShots","PiercingDamageStrategy","maxDamages","systemsHit","shotsResolved","InterceptorStrategy","numberOfIntercepts","heatPerIntercept","timesIntercepted","torpedoHitSize","getHitSize","ManeuveringThruster","Thruster","maxBoost","ManeuveringThrusterLeft","ManeuveringThrusterRight","ChemicalThruster","Engine","EwArray","boostHeat","boostable","CQEWArray","ElintArray","OEWArray","Weapon","alwaysTargetable","TestWeapon","OverPoweredTestWeapon","WeaponAnimationStrategy","animationArguments","CoilgunLightFixed","MediumCoilgunTurretedUC","RailgunTurreted64gw","RailgunTurreted32gw","CargoService","cargoBays","getBaysWithSpace","getShipWideCargoSpaceAvailable","AmmunitionStrategy","selectedAmmo","targetLoad","_buildInitialTargetLoad","changeTargetLoad","changeSelectedAmmo","loaded","amountUsed","over","under","toggleSelectedAmmo","ammunitionStrategy","ammoData","ammoClass","onWeaponFired","getGenericLogEntry","addMessage","_changeSelectedAmmoIfOutOfAmmo","_load","ammoTransferredIn","ammoTransferredOut","cargoService","spaceAvailable","hasSpaceForHowMany","divideCargo","cargoSystem","missing","PDC30mm","RailgunFixed120mm","RailgunTurreted2x140mm","RailgunTurreted140mmUC","TorpedoLauncher158","TorpedoLauncherDual72","TorpedoLauncherDual158","TorpedoLauncherQuadruple158","AutoCannon85mm","merged","coilguns","railguns","Radiator","extraProfile","HeatSink","Radiator5x40","Radiator10x40","Radiator10x50","CargoBay","FuelTank","engines","reactors","ewArrays","weapons","UcRhino","addFrontSystem","addPrimarySystem","addAftSystem","description","addStarboardFrontSystem","addPortFrontSystem","addPortAftSystem","addStarboardAftSystem","TestShip","X2PDC30mm","Uc","Protectorate","Test","Federation","createShipObject","createBareShipObject","GameShips","shipA","shipB","getTeamForShip","getUsersSlots","teamShips","setShipLoadout","GameActiveShips","TERRAIN_TYPE_SUN","GameTerrainEntity","actualGravity","gravity","gravityVector","mass","affectedByGravity","bs","bsx","getCacheKey","stage","arkFunction","ARKStep","parentPosition","parentMass","dt","setValues","sum","derivativeVelocityX","derivativeVelocityY","findCached","cacheHit","cacheMiss","kx","ky","kvx","kvy","setCache","cache","valueA","ks","getAllKs","dPosition","weightedSum","dVelocity","Vector4","arkStep","MAX_ERROR","MIN_ERROR","ARK","currentTime","getParentEntity","calculate","fDPosition","fDVelocity","GameTerrain","ark","calculateNewPositionVelocity","GameTorpedos","isDone","CombatLogTorpedoIntercept","interceptChange","CombatLogTorpedoMove","CombatLogTorpedoOutOfTime","CombatLogShipVelocity","CombatLogTorpedoNotArmed","combatLogClasses","CombatLogData","torpedoAttack","groupedFires","grouped","groupedTorpedos","GameData","status","players","activePlayerIds","requireShips","isPlayerActive","slotError","validate","setActive","setInactive","creatorId","gamePhases","gameStatuses","setPlayerActive","setActiveShip","torpedoMesh","TorpedoObject","particleEmitter","enginePosition","getEnginePosition","setSine","shines","angleChange","deltaTime","TorpedoIconContainer","getIconById","PhaseDirector","timeline","shipWindowManager","terrainRenderer","phaseState","gameDataCache","setPhaseDirector","resolvePhaseStrategy","getGameDatasForAutomaticReplay","activatePhaseStrategy","setCurrent","receiveTurnChange","splice","setReplays","canDisturb","onEvent","getCurrent","gameStatus","isPlayerInGame","isReplay","gamePhase","getServices","PositionObject","view","GameSettings","settings","matchEvent","def","keyCode","shiftKey","altKey","ctrlKey","metaKey","populate","ShowAllEW","ShowFriendlyEW","ShowEnemyEW","ZoomLevelToStrategic","localStorage","setItem","JSON","stringify","getItem","parse","MESSAGE_TAKE_SLOT","MESSAGE_LEAVE_SLOT","MESSAGE_BUY_SHIPS","MESSAGE_COMMIT_TURN","MESSAGE_COMMIT_DEPLOYMENT","MESSAGE_REQUEST_REPLAY","MESSAGE_REPLAY","MESSAGE_GAMEDATA","MESSAGE_TURN_CHANGED","GameConnector","webSocket","open","connection","connectionResolve","close","timeout","WebSocket","onerror","onError","onmessage","onMessage","onclose","onClose","onopen","onOpen","send","gameMessages","connect","receiveGameData","receiveReplay","HEX_COUNT_WIDTH","HEX_COUNT_HEIGHT","HEX_LINE_COLOR","HEX_FILL_COLOR","HEX_LINE_WIDTH","HEX_CANVAS_SIZE","HEX_OPACITY","getGeometryWidth","getGeometryHeight","HexGridRenderer","onZoom","minZoom","maxZoom","StarField","starCount","zoomChanged","stars","createStar","createShiningStar","getTime","isReady","getStarParticle","getRandomBand","iterations","createGasCloudPart","baseRotation","GameCamera","ortho","orthoCameraAngle","perspectiveRatio","perspectiveFieldOfView","perspective","perspectiveCameraDistance","closeAngle","setCameraAngle","adjacent","hypotenuse","opposite","aspect","solvePerspectiveSize","perspectiveZoom","setPerspectiveCameraPositionByLookat","zoomPerspective","updateProjectionMatrix","updateMatrixWorld","perspectivePositionVector","perspectivePosition","newAngle","currentLookat","GameScene","hexGridRenderer","starFieldScene","starFieldCamera","starField","initialized","zoomTarget","cameraAngle","deactivated","light","directionalLight","renderer","setPixelRatio","devicePixelRatio","autoClear","getExtension","gl","domElement","shadowMap","enabled","gammaOutput","gammaFactor","moveCamera","addPosition","animationReady","zoomCamera","clear","clearDepth","animateZoom","resize","zoominprogress","newzoom","removeChild","forceContextLoss","Game","gameScene","gameSettings","sceneElement","mouseOvered","mouseOveredHex","getDimensions","changeZoom","gamePos","fromViewPortToGame","getEntitiesIntersected","hexPos","scroll","UIState","renderListeners","systemChangeListeners","lobby","selectedSystems","systemInfo","systemInfoMenu","shipMovement","shipTooltip","turnReady","shipBadges","gameUiMode","gameUiModeButtons","replayUi","systemList","ewList","stateVersion","badge","version","startReplay","waiting","deselectShip","tooltip","listener","PurchasedShip","openShipWindow","setError","FleetContainer","FleetList","onReady","SlotContainer","Slot","edit","take","selectedSlot","handleChange","isTaken","getPlayerName","isOccupiedBy","LobbySlots","getSlotsByTeams","isBought","mapTeamsToComponents","Faction","buyShip","faction","FleetStore","factions","HomeScene","HomeSceneComponent","Slots","CreateGame","addPlayer","changeGameName","createGameCallBack","pathname","GameIdContainer","Home","setGameId","callApi","ErrorContainer","Login","onSubmit","setSubmitting","loginUser","Yup","shape","touched","errors","isSubmitting","handleBlur","handleSubmit","wrappedHandleChange","alert","Logo","SuperContainer","ContainerLeft","ContainerRight","BaseView","LobbyContainer","Lobby","shipClasses","totalCost","getPointCost","prevState","TurnHeaderContainer","ReadySection","ReadyContainer","TurnHeader","TextContainer","Power","TextRow","TextRowSmall","Movement","overChannel","ThrustButton","can","RevertButton","CancelButton","PivotButton","RollContainer","RollButton","EvadeContainer","RotatedContainer","Evasion","EvadeButton","canMore","canLess","GameMovement","DeploymentPivotButton","doDeploymentTurn","DeploymentMovementButtons","ReplayButton","GameUiModeButtons","ew","enemy_weapons","toggleGameUiMode","SystemList","EwList","LeftPanel","ReplayUi","rewindToFiring","resumeReplayRewind","pauseReplay","resumeReplay","Highlight","DangerHighlight","HitChanceContainer","HitChance","resolution","DamageContainer","DamageLine","totalDamage","totalArmor","LineContainer","SubLine","IndentedSubline","CombatLogLine","targetName","trim","shooterName","weaponName","getWeaponFireLine","getTorpedoAttackLine","CombatLog","ShipBadgeContainer","DewBadge","BackgroundContainer","Icon","BadgeIconAndLabel","BadgeIcon","Badges","WarningBadge","getNumberOfMissilesImpacting","gameDataObject","ShipBadge","missiles","validPower","memoizedComponent","GameStateStore","GameDispatchStore","GameStoreProvider","getReducer","getInitialState","setDispatch","Fleet","ShipFleetBadge","scrollToShip","mouseOver","mouseOut","ShipListActual","primary","secondary","ShipList","myShips","alliedShips","enemyShips","GameUiComponent","getUiState","LoginFloaterContainer","LoginFloater","GameComponent","match","setUiState","setGame","newUiState","newGame","params","gameid","Logout","logoutUser","PrivateRoute","authed","Routes","App","isLocalhost","hostname","config","navigator","publicUrl","URL","href","origin","swUrl","checkValidServiceWorker","serviceWorker","then","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","fetch","contentType","unregister","reload","ReactDOM"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,GAAMA,cAAQ,CAAG,QAAXA,SAAW,CAACC,EAAD,CAAKC,EAAL,CAASC,EAAT,CAAaC,EAAb,CAAoB,CACnC,GAAIF,EAAE,CAACG,CAAH,GAASC,SAAT,EAAsBL,EAAE,CAACI,CAAH,GAASC,SAAnC,CAA8C,CAC5CH,EAAE,CAAGD,EAAE,CAACG,CAAR,CACAD,EAAE,CAAGF,EAAE,CAACK,CAAR,CACAL,EAAE,CAAGD,EAAE,CAACM,CAAR,CACAN,EAAE,CAAGA,EAAE,CAACI,CAAR,CACD,CAED,MAAOG,KAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASP,EAAE,CAAGF,EAAd,CAAkB,CAAlB,EAAuBO,IAAI,CAACE,GAAL,CAASN,EAAE,CAAGF,EAAd,CAAkB,CAAlB,CAAjC,CAAP,CACD,CATD,CAWA,GAAMS,WAAU,CAAG,QAAbA,WAAa,CAACC,MAAD,CAASC,MAAT,CAAoB,CACrC,GAAMC,GAAE,CAAGD,MAAM,CAACR,CAAP,CAAWO,MAAM,CAACP,CAA7B,CACA,GAAMU,GAAE,CAAGF,MAAM,CAACN,CAAP,CAAWK,MAAM,CAACL,CAA7B,CACA,GAAMS,GAAE,CAAGH,MAAM,CAACI,CAAP,CAAWL,MAAM,CAACK,CAA7B,CAEA,GAAMC,KAAI,CAAGV,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASI,EAAT,CAAa,CAAb,EAAkBN,IAAI,CAACE,GAAL,CAASK,EAAT,CAAa,CAAb,CAAlB,CAAoCP,IAAI,CAACE,GAAL,CAASM,EAAT,CAAa,CAAb,CAA9C,CAAb,CAEA,MAAOE,KAAP,CACD,CARD,CAUA,GAAMC,yBAAwB,CAAG,QAA3BA,yBAA2B,CAAAC,IAAI,CAAI,CACvC,QAASC,MAAT,CAAeC,GAAf,CAAoB,CAClB,IAAK,GAAIC,EAAC,CAAG,CAAR,CAAWC,CAAC,CAAG,WAAaF,GAAG,CAACG,MAArC,CAA6CF,CAAC,CAAGD,GAAG,CAACG,MAArD,CAA6DF,CAAC,EAA9D,CAAkE,CAChEC,CAAC,CAAGhB,IAAI,CAACkB,IAAL,CAAUF,CAAC,CAAGF,GAAG,CAACK,UAAJ,CAAeJ,CAAf,CAAd,CAAiC,UAAjC,CAAJ,CACAC,CAAC,CAAIA,CAAC,EAAI,EAAN,CAAaA,CAAC,GAAK,EAAvB,CACD,CAED,MAAO,WAAW,CAChBA,CAAC,CAAGhB,IAAI,CAACkB,IAAL,CAAUF,CAAC,CAAIA,CAAC,GAAK,EAArB,CAA0B,UAA1B,CAAJ,CACAA,CAAC,CAAGhB,IAAI,CAACkB,IAAL,CAAUF,CAAC,CAAIA,CAAC,GAAK,EAArB,CAA0B,UAA1B,CAAJ,CACA,MAAO,CAACA,CAAC,EAAIA,CAAC,GAAK,EAAZ,IAAoB,CAA3B,CACD,CAJD,CAKD,CAED,GAAMI,cAAa,CAAGP,KAAK,CAACD,IAAD,CAA3B,CAEA,GAAMS,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAIC,CAAJ,CAAOC,CAAP,CAAUC,CAAV,CAAgB,CACnC,MAAO,WAAW,CAChB,GAAIC,EAAC,CAAGH,CAAC,EAAI,CAAb,CACEI,CAAC,CAAGL,CAAC,CAAG,CADV,CAEAK,CAAC,CAAG,CAAEA,CAAC,EAAI,CAAN,CAAYA,CAAC,GAAK,EAAnB,EAA0B,CAA9B,CACAH,CAAC,EAAIF,CAAL,CACAG,CAAC,EAAIF,CAAL,CACAA,CAAC,EAAIC,CAAL,CACAF,CAAC,EAAIG,CAAL,CACAD,CAAC,EAAIE,CAAL,CACAD,CAAC,CAAIA,CAAC,EAAI,EAAN,CAAaA,CAAC,GAAK,EAAvB,CACA,MAAO,CAACE,CAAC,GAAK,CAAP,EAAY,UAAnB,CACD,CAXD,CAYD,CAbD,CAeA,MAAON,aAAY,CACjBD,aAAa,EADI,CAEjBA,aAAa,EAFI,CAGjBA,aAAa,EAHI,CAIjBA,aAAa,EAJI,CAAnB,CAMD,CArCD,CAuCA,GAAMQ,eAAc,CAAG,QAAjBA,eAAiB,CAACC,OAAD,CAAUC,GAAV,CAAkB,CACvCA,GAAG,CAAGA,GAAG,CAAG,GAAZ,CAEA,GAAIC,IAAG,CAAG,CAAV,CACA,GAAIF,OAAO,CAAGC,GAAV,CAAgB,GAApB,CAAyB,CACvBC,GAAG,CAAGD,GAAG,EAAI,IAAMD,OAAV,CAAT,CACD,CAFD,IAEO,IAAIA,OAAO,CAAGC,GAAV,CAAgB,CAApB,CAAuB,CAC5BC,GAAG,CAAG,KAAOF,OAAO,CAAGC,GAAjB,CAAN,CACD,CAFM,IAEA,CACLC,GAAG,CAAGF,OAAO,CAAGC,GAAhB,CACD,CAED,MAAOC,IAAP,CACD,CAbD,CAeA,GAAMC,6BAA4B,CAAG,QAA/BA,6BAA+B,CAACC,KAAD,CAAQC,GAAR,CAA+B,IAAlBC,UAAkB,2DAAN,CAAM,CAClE,GAAID,GAAG,GAAKD,KAAZ,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,GAAIE,SAAS,CAAG,CAAhB,CAAmB,CACjB,GAAID,GAAG,CAAGD,KAAV,CAAiB,CACf,MAAO,KAAMA,KAAN,CAAcC,GAArB,CACD,CAFD,IAEO,CACL,MAAOA,IAAG,CAAGD,KAAb,CACD,CACF,CAND,IAMO,CACL,GAAIC,GAAG,CAAGD,KAAV,CAAiB,CACf,MAAO,KAAMC,GAAN,CAAYD,KAAnB,CACD,CAFD,IAEO,CACL,MAAOA,MAAK,CAAGC,GAAf,CACD,CACF,CACF,CAlBD,CAoBA,GAAME,gBAAe,CAAG,QAAlBA,gBAAkB,CAACH,KAAD,CAAQC,GAAR,CAAaG,UAAb,CAAyBC,OAAzB,CAAqC,CAC3D,GAAIzC,EAAC,CAAGoC,KAAK,CAACpC,CAAN,CAAUwC,UAAU,EAAIH,GAAG,CAACrC,CAAJ,CAAQoC,KAAK,CAACpC,CAAlB,CAA5B,CACA,GAAIE,EAAC,CAAGkC,KAAK,CAAClC,CAAN,CAAUsC,UAAU,EAAIH,GAAG,CAACnC,CAAJ,CAAQkC,KAAK,CAAClC,CAAlB,CAA5B,CAEA,GAAIuC,OAAJ,CAAa,CACX,MAAO,CAAEzC,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAAP,CACD,CAED,MAAO,CAAEF,CAAC,CAAEG,IAAI,CAACuC,KAAL,CAAW1C,CAAX,CAAL,CAAoBE,CAAC,CAAEC,IAAI,CAACuC,KAAL,CAAWxC,CAAX,CAAvB,CAAP,CACD,CATD,CAWA,GAAMyC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACP,KAAD,CAAQC,GAAR,CAAaG,UAAb,CAAyBC,OAAzB,CAAqC,CAC7D,GAAIzC,EAAC,CAAGoC,KAAK,CAACpC,CAAN,CAAUwC,UAAU,EAAIH,GAAG,CAACrC,CAAJ,CAAQoC,KAAK,CAACpC,CAAlB,CAA5B,CACA,GAAIE,EAAC,CAAGkC,KAAK,CAAClC,CAAN,CAAUsC,UAAU,EAAIH,GAAG,CAACnC,CAAJ,CAAQkC,KAAK,CAAClC,CAAlB,CAA5B,CACA,GAAIU,EAAC,CAAGwB,KAAK,CAACxB,CAAN,CAAU4B,UAAU,EAAIH,GAAG,CAACzB,CAAJ,CAAQwB,KAAK,CAACxB,CAAlB,CAA5B,CAEA,GAAI6B,OAAJ,CAAa,CACX,MAAO,CAAEzC,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAAcU,CAAC,CAAEA,CAAjB,CAAP,CACD,CAED,MAAO,CAAEZ,CAAC,CAAEG,IAAI,CAACuC,KAAL,CAAW1C,CAAX,CAAL,CAAoBE,CAAC,CAAEC,IAAI,CAACuC,KAAL,CAAWxC,CAAX,CAAvB,CAAsCU,CAAC,CAAET,IAAI,CAACuC,KAAL,CAAW9B,CAAX,CAAzC,CAAP,CACD,CAVD,CAYA,GAAMgC,0BAAyB,CAAG,QAA5BA,0BAA4B,CAACR,KAAD,CAAQC,GAAR,CAAa1C,QAAb,CAAuB8C,OAAvB,CAAmC,CACnE,GAAMI,cAAa,CAAGvC,UAAU,CAAC8B,KAAD,CAAQC,GAAR,CAAhC,CACA,GAAMG,WAAU,CAAG7C,QAAQ,CAAGkD,aAA9B,CACA,MAAOF,kBAAiB,CAACP,KAAD,CAAQC,GAAR,CAAaG,UAAb,CAAyBC,OAAzB,CAAxB,CACD,CAJD,CAMA,GAAMK,6BAA4B,CAAG,QAA/BA,6BAA+B,CAACC,EAAD,CAAKC,EAAL,CAAY,CAC/C,GAAIZ,MAAK,CAAGW,EAAE,CAACE,cAAH,EAAZ,CACA,GAAIZ,IAAG,CAAGW,EAAE,CAACC,cAAH,EAAV,CACA,MAAOb,MAAK,CAACc,UAAN,CAAiBb,GAAjB,CAAP,CACD,CAJD,CAMA,GAAMc,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,MAAD,CAASC,MAAT,CAAiBC,KAAjB,CAA2B,CACjD,GAAIC,WAAJ,CACA,GAAID,KAAJ,CAAW,CACT,GAAIF,MAAM,CAAGC,MAAb,CAAqB,CACnBE,UAAU,CAAG,IAAMH,MAAN,CAAeC,MAA5B,CACD,CAFD,IAEO,CACLE,UAAU,CAAGF,MAAM,CAAGD,MAAtB,CACD,CACF,CAND,IAMO,CACL,GAAIA,MAAM,CAAGC,MAAb,CAAqB,CACnBE,UAAU,CAAG,CAACH,MAAM,EAAI,IAAMC,MAAV,CAAP,EAA4B,CAAC,CAA1C,CACD,CAFD,IAEO,CACLE,UAAU,CAAGF,MAAM,CAAGD,MAAtB,CACD,CACF,CAED,MAAOG,WAAP,CACD,CAjBD,CAmBA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAACC,MAAD,CAASxB,GAAT,CAAiB,CACtC,GAAIwB,MAAM,CAAGxB,GAAT,CAAe,CAAnB,CAAsB,CACpB,MAAOuB,eAAc,CAAC,CAAD,CAAIC,MAAM,CAAGxB,GAAT,CAAe,CAAnB,CAArB,CACD,CAED,GAAIwB,MAAM,CAAGxB,GAAT,CAAe,CAAnB,CAAsB,CACpB,MAAOuB,eAAc,CAAC,CAAD,CAAIC,MAAM,CAAGxB,GAAb,CAArB,CACD,CAED,MAAOwB,OAAM,CAAGxB,GAAhB,CACD,CAVD,CAYA,GAAMyB,oBAAmB,CAAG,QAAtBA,oBAAsB,CAAC5B,CAAD,CAAIL,CAAJ,CAAOkC,EAAP,CAAWC,EAAX,CAAenB,OAAf,CAA2B,CACrDhB,CAAC,CAAG,CAACA,CAAL,CAEA,GAAIzB,EAAC,CAAG2D,EAAE,CAAG7B,CAAC,CAAG3B,IAAI,CAAC0D,GAAL,CAAUpC,CAAC,CAAGtB,IAAI,CAAC2D,EAAV,CAAgB,GAAzB,CAAjB,CACA,GAAI5D,EAAC,CAAG0D,EAAE,CAAG9B,CAAC,CAAG3B,IAAI,CAAC4D,GAAL,CAAUtC,CAAC,CAAGtB,IAAI,CAAC2D,EAAV,CAAgB,GAAzB,CAAjB,CAEA,GAAIrB,OAAJ,CAAa,CACX,MAAO,CAAEzC,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAAP,CACD,CACD,MAAO,CAAEF,CAAC,CAAEG,IAAI,CAAC6D,KAAL,CAAWhE,CAAX,CAAL,CAAoBE,CAAC,CAAEC,IAAI,CAAC6D,KAAL,CAAW9D,CAAX,CAAvB,CAAP,CACD,CAVD,CAYA,GAAM+D,aAAY,CAAG,QAAfA,aAAe,CAAC7B,KAAD,CAAQC,GAAR,CAAgB,CACnC,GAAIZ,EAAC,CAAG,CAAR,CACA,GAAIW,KAAK,CAAGC,GAAZ,CAAiB,CACfZ,CAAC,CAAG,IAAMW,KAAN,CAAcC,GAAlB,CACD,CAFD,IAEO,CACLZ,CAAC,CAAGY,GAAG,CAAGD,KAAV,CACD,CAED,MAAOX,EAAP,CACD,CATD,CAWA,GAAMyC,QAAO,CAAG,QAAVA,QAAU,CAAC5B,SAAD,CAAYF,KAAZ,CAAmBC,GAAnB,CAA2B,CACzC;AACAC,SAAS,CAAGnC,IAAI,CAAC6D,KAAL,CAAW1B,SAAX,CAAZ,CAEA,GAAIF,KAAK,GAAKC,GAAd,CAAmB,MAAO,KAAP,CAEnB,GAAKC,SAAS,GAAK,CAAd,EAAmBF,KAAK,GAAK,GAA9B,EAAuCE,SAAS,GAAK,CAAd,EAAmBD,GAAG,GAAK,GAAtE,CACE,MAAO,KAAP,CAEF,GAAID,KAAK,CAAGC,GAAZ,CAAiB,CACf,MAAOC,UAAS,EAAIF,KAAb,EAAsBE,SAAS,EAAID,GAA1C,CACD,CAFD,IAEO,IAAIC,SAAS,EAAIF,KAAb,EAAsBE,SAAS,EAAID,GAAvC,CAA4C,CACjD,MAAO,KAAP,CACD,CAED,MAAO,MAAP,CACD,CAhBD,CAkBA,GAAM8B,eAAc,CAAG,QAAjBA,eAAiB,CAAAC,KAAK,CAAI,CAC9B,MAAOA,MAAK,EAAI,MAAQjE,IAAI,CAAC2D,EAAjB,CAAZ,CACD,CAFD,CAIA,GAAMO,eAAc,CAAG,QAAjBA,eAAiB,CAAAD,KAAK,QAAIA,MAAK,EAAI,MAAQjE,IAAI,CAAC2D,EAAjB,CAAT,EAA5B,CAEA,GAAMQ,yBAAwB,CAAG,QAA3BA,yBAA2B,CAACC,QAAD,CAAWC,MAAX,CAAsB,CACrD,GAAIC,QAAO,CAAGN,cAAc,CAC1BhE,IAAI,CAACuE,KAAL,CAAWF,MAAM,CAACtE,CAAP,CAAWqE,QAAQ,CAACrE,CAA/B,CAAkCsE,MAAM,CAACxE,CAAP,CAAWuE,QAAQ,CAACvE,CAAtD,CAD0B,CAA5B,CAIA,GAAIyE,OAAO,CAAG,CAAd,CAAiB,CACfA,OAAO,CAAG,IAAMA,OAAhB,CACD,CAFD,IAEO,CACLA,OAAO,CAAGtE,IAAI,CAACwE,GAAL,CAASF,OAAT,CAAV,CACD,CAED,MAAOA,QAAP,CACD,CAZD,CAcA,GAAMG,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAAhD,CAAC,CAAI,CAC5B,OAAQA,CAAR,EACE,IAAK,EAAL,CACE,MAAO,EAAP,CACF,IAAK,EAAL,CACE,MAAO,GAAP,CACF,IAAK,EAAL,CACE,MAAO,IAAP,CACF,IAAK,EAAL,CACE,MAAO,IAAP,CACF,IAAK,EAAL,CACE,MAAO,IAAP,CACF,QACE,MAAO,IAAP,CAZJ,CAcD,CAfD,CAiBA,GAAMiD,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAAjD,CAAC,CAAI,CAC5B,OAAQA,CAAR,EACE,IAAK,EAAL,CACE,MAAO,EAAP,CACF,IAAK,GAAL,CACE,MAAO,EAAP,CACF,IAAK,IAAL,CACE,MAAO,EAAP,CACF,IAAK,IAAL,CACE,MAAO,EAAP,CACF,IAAK,IAAL,CACE,MAAO,EAAP,CACF,QACE,MAAO,EAAP,CAZJ,CAcD,CAfD,CAiBA,GAAMkD,aAAY,CAAG,QAAfA,aAAe,CAAArD,CAAC,CAAI,CACxB,IAAK,GAAIP,EAAC,CAAGO,CAAC,CAACL,MAAF,CAAW,CAAxB,CAA2BF,CAAC,CAAG,CAA/B,CAAkCA,CAAC,EAAnC,CAAuC,CACrC,GAAM6D,EAAC,CAAG5E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,IAAiB9D,CAAC,CAAG,CAArB,CAAX,CAAV,CADqC,SAEtB,CAACO,CAAC,CAACsD,CAAD,CAAF,CAAOtD,CAAC,CAACP,CAAD,CAAR,CAFsB,CAEpCO,CAAC,CAACP,CAAD,CAFmC,SAE9BO,CAAC,CAACsD,CAAD,CAF6B,SAGtC,CACD,MAAOtD,EAAP,CACD,CAND,C;;opBC5PA,GAAMwD,YAAW,CAAGC,gDAAM,CAACC,GAAV,mBAAjB,CAQA;AAEA,GAAMC,aAAY,CAAGF,gDAAM,CAACC,GAAV,oBAAlB,CAaA,GAAME,kCAAiC,CAAG,QAApCA,kCAAoC,CAACC,KAAD,CAAQC,OAAR,CAAoB,CAC5D,GAAID,KAAK,CAACE,OAAV,CAAmB,CACjB,MAAO,CACLxF,CAAC,CAAEsF,KAAK,CAACG,aAAN,CAAoBD,OAApB,CAA4B,CAA5B,EAA+BE,KAA/B,CAAuCH,OAAO,CAACI,MAAR,GAAiBC,IADtD,CAEL1F,CAAC,CAAEoF,KAAK,CAACG,aAAN,CAAoBD,OAApB,CAA4B,CAA5B,EAA+BK,KAA/B,CAAuCN,OAAO,CAACI,MAAR,GAAiBG,GAFtD,CAGLC,EAAE,CACC,CAACT,KAAK,CAACG,aAAN,CAAoBD,OAApB,CAA4B,CAA5B,EAA+BE,KAA/B,CAAuCH,OAAO,CAACI,MAAR,GAAiBC,IAAzD,EACCI,MAAM,CAACC,UADT,CAEE,CAFF,CAGA,CAPG,CAQLC,EAAE,CACA,EACE,CAACZ,KAAK,CAACG,aAAN,CAAoBD,OAApB,CAA4B,CAA5B,EAA+BK,KAA/B,CAAuCN,OAAO,CAACI,MAAR,GAAiBG,GAAzD,EACAE,MAAM,CAACG,WAFT,EAIE,CAJF,CAKA,CAdG,CAAP,CAgBD,CAED,MAAO,CACLnG,CAAC,CAAEsF,KAAK,CAACc,OADJ,CAELlG,CAAC,CAAEoF,KAAK,CAACe,OAFJ,CAGLN,EAAE,CAAGT,KAAK,CAACc,OAAN,CAAgBb,OAAO,CAACe,WAAzB,CAAwC,CAAxC,CAA4C,CAH3C,CAILJ,EAAE,CAAE,EAAEZ,KAAK,CAACe,OAAN,CAAgBd,OAAO,CAACgB,YAA1B,EAA0C,CAA1C,CAA8C,CAJ7C,CAAP,CAMD,CA1BD,C,GA4BMC,sC,kHACJ,4BAAYC,KAAZ,CAAmB,8EACjB,wIAAMA,KAAN,GACA;AAFiB,MA8BnBC,YA9BmB,CA8BJ,SAACpB,KAAD,CAAW,CACxBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GACD,CAjCkB,OAmCnBC,OAnCmB,CAmCT,SAACvB,KAAD,CAAW,CACnBA,KAAK,CAACwB,wBAAN,GACAxB,KAAK,CAACsB,cAAN,GAFmB,GAGXG,KAHW,CAGF,MAAKN,KAHH,CAGXM,IAHW,CAInB,GAAMC,MAAK,CAAG7G,IAAI,CAAC8G,IAAL,CAAU3B,KAAK,CAAC4B,MAAhB,CAAd,CACAH,IAAI,CAACI,YAAL,CAAkBH,KAAlB,EACD,CAzCkB,OA2CnBI,QA3CmB,CA2CR,UAAM,IACPL,KADO,CACE,MAAKN,KADP,CACPM,IADO,CAEfA,IAAI,CAACK,QAAL,GACD,CA9CkB,CAGjB,MAAKC,SAAL,CAAiBC,kBAAA,EAAjB,CACA,MAAKC,eAAL,CAAuBD,kBAAA,EAAvB,CACA,MAAKE,iBAAL,CAAyB,IAAzB,CACA,MAAKC,oBAAL,CAA4B,IAA5B,CACA,MAAKC,iBAAL,CAAyB,CAAzB,CAPiB,aAQlB,C,sHAEmB,IACVX,KADU,CACD,KAAKN,KADJ,CACVM,IADU,CAGlBf,MAAM,CAAC2B,gBAAP,CAAwB,QAAxB,CAAkC,KAAKP,QAAvC,EACA,KAAKG,eAAL,CAAqBvF,OAArB,CAA6B2F,gBAA7B,CAA8C,OAA9C,CAAuD,KAAKd,OAA5D,EACAb,MAAM,CAAC2B,gBAAP,CAAwB,YAAxB,CAAsC,KAAKjB,YAA3C,EACAkB,QAAQ,CAACD,gBAAT,CAA0B,SAA1B,CAAqC,KAAKE,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAArC,CAAgE,KAAhE,EACAF,QAAQ,CAACD,gBAAT,CAA0B,OAA1B,CAAmC,KAAKI,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAnC,CAA4D,KAA5D,EAEAf,IAAI,CAACiB,UAAL,CAAgB,KAAKX,SAAL,CAAerF,OAA/B,EACD,C,mEAEsB,CACrB4F,QAAQ,CAACK,mBAAT,CAA6B,SAA7B,CAAwC,KAAKJ,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAxC,CAAmE,KAAnE,EACAF,QAAQ,CAACK,mBAAT,CAA6B,OAA7B,CAAsC,KAAKF,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAtC,CAA+D,KAA/D,EACA9B,MAAM,CAACiC,mBAAP,CAA2B,QAA3B,CAAqC,KAAKb,QAA1C,EACA,KAAKG,eAAL,CAAqBvF,OAArB,CAA6BiG,mBAA7B,CAAiD,OAAjD,CAA0D,KAAKpB,OAA/D,EACAb,MAAM,CAACiC,mBAAP,CAA2B,YAA3B,CAAyC,KAAKvB,YAA9C,EACD,C,gDAoBWpB,K,CAAO,CACjBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GACA,KAAKY,iBAAL,CAAyBnC,iCAAiC,CACxDC,KADwD,CAExD,KAAKiC,eAAL,CAAqBvF,OAFmC,CAA1D,CAID,C,4CAESsD,K,CAAO,CACfA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFe,GAIPG,KAJO,CAIE,KAAKN,KAJP,CAIPM,IAJO,CAKf,GAAI,CAAC,KAAKU,oBAAV,CAAgC,CAC9BV,IAAI,CAACmB,SAAL,CACE7C,iCAAiC,CAACC,KAAD,CAAQ,KAAKiC,eAAL,CAAqBvF,OAA7B,CADnC,CAEEsD,KAAK,CAAC6C,MAFR,EAID,CAED,KAAKX,iBAAL,CAAyB,IAAzB,CACA,KAAKC,oBAAL,CAA4B,IAA5B,CACD,C,gDAEWnC,K,CAAO,CACjBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFiB,GAITG,KAJS,CAIA,KAAKN,KAJL,CAITM,IAJS,CAMjB,GAAI,KAAKS,iBAAL,GAA2B,IAA/B,CAAqC,CACnCT,IAAI,CAACqB,WAAL,CACE/C,iCAAiC,CAACC,KAAD,CAAQ,KAAK+B,SAAL,CAAerF,OAAvB,CADnC,EAGA,OACD,CAED,GAAMqG,SAAQ,CAAGhD,iCAAiC,CAChDC,KADgD,CAEhD,KAAKiC,eAAL,CAAqBvF,OAF2B,CAAlD,CAKA,GACE,CAAC,KAAKyF,oBAAN,EACA9H,aAAQ,CAAC,KAAK6H,iBAAN,CAAyBa,QAAzB,CAAR,CAA6C,KAAKX,iBAFpD,CAGE,CACA,KAAKD,oBAAL,CAA4B,KAAKD,iBAAjC,CACD,CAED,GAAI,KAAKC,oBAAT,CAA+B,CAC7B,GAAMT,MAAK,CAAG,CACZhH,CAAC,CAAEqI,QAAQ,CAACrI,CAAT,CAAa,KAAKyH,oBAAL,CAA0BzH,CAD9B,CAEZE,CAAC,CAAEmI,QAAQ,CAACnI,CAAT,CAAa,KAAKuH,oBAAL,CAA0BvH,CAF9B,CAAd,CAKA,KAAKuH,oBAAL,CAA4BY,QAA5B,CACAtB,IAAI,CAACuB,MAAL,CAAYD,QAAZ,CAAsBrB,KAAtB,EACD,CACF,C,8CAEU1B,K,CAAO,IACRyB,KADQ,CACC,KAAKN,KADN,CACRM,IADQ,CAEhB,KAAKS,iBAAL,CAAyB,IAAzB,CACA,KAAKC,oBAAL,CAA4B,IAA5B,CACAV,IAAI,CAACwB,UAAL,CAAgBjD,KAAhB,EACD,C,4CAESA,K,CAAO,IACPyB,KADO,CACE,KAAKN,KADP,CACPM,IADO,CAEfA,IAAI,CAACc,SAAL,CAAevC,KAAf,EACD,C,wCAEOA,K,CAAO,IACLyB,KADK,CACI,KAAKN,KADT,CACLM,IADK,CAEbA,IAAI,CAACgB,OAAL,CAAazC,KAAb,EACD,C,+DAEoB,CACnB,KAAKmB,KAAL,CAAWM,IAAX,CAAgBiB,UAAhB,CAA2B,KAAKX,SAAL,CAAerF,OAA1C,EACD,C,oEAEqBwG,S,CAAWC,S,CAAW,CAC1C;;;;;IAOA,MAAO,MAAP,CACD,C,uCAEQ,CACP,MACE,+CACE,uBAAC,YAAD,EACE,GAAG,CAAE,KAAKlB,eADZ,CAEE,UAAU,CAAE,KAAKgB,UAAL,CAAgBT,IAAhB,CAAqB,IAArB,CAFd,CAGE,WAAW,CAAE,KAAKY,WAAL,CAAiBZ,IAAjB,CAAsB,IAAtB,CAHf,CAIE,SAAS,CAAE,KAAKI,SAAL,CAAeJ,IAAf,CAAoB,IAApB,CAJb,CAKE,WAAW,CAAE,KAAKM,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB,CALf,CAME,OAAO,CAAE,KAAKC,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CANX,CAOE,aAAa,CAAE,uBAACa,CAAD,CAAO,CACpBA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACD,CAVH,EADF,CAaE,uBAAC,WAAD,EAAa,GAAG,CAAE,KAAKU,SAAvB,EAbF,CADF,CAiBD,C,gCAhK8BC,kB,EAmKlBd,uGAAf,E;;;;;;;;;;;ACxNA,GAAMoC,SAAQ,CAAG,IAAjB,CACA,GAAMC,SAAQ,CAAG,EAAjB,CACA,GAAMC,SAAQ,CAAG,IAAjB,CACA,GAAMC,qBAAoB,CAAG,GAA7B,CACA,GAAMC,kBAAiB,CAAG,CAA1B,CACA,GAAMC,mBAAkB,CAAG,CAA3B,CACA,GAAMC,wBAAuB,CAAG,GAAhC,CAEA,GAAMC,UAAS,CAAG,EAAlB,CAEA,GAAMC,eAAc,CAAG,GAAIC,MAAK,CAACC,KAAV,CAAgB,EAAI,GAApB,CAAyB,IAAM,GAA/B,CAAoC,IAAM,GAA1C,CAAvB,CAAuE;AACvE,GAAMC,YAAW,CAAG,GAAIF,MAAK,CAACC,KAAV,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,GAAK,GAA1C,CAApB,CACA,GAAME,yBAAwB,CAAGJ,cAAc,CAACK,KAAf,GAAuBC,cAAvB,CAAsC,GAAtC,CAAjC,CACA,GAAMC,sBAAqB,CAAGJ,WAAW,CAACE,KAAZ,GAAoBC,cAApB,CAAmC,GAAnC,CAA9B,CAEA,GAAME,mBAAkB,CAAG,GAAIP,MAAK,CAACC,KAAV,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,IAAM,GAA5C,CAA3B,CACA,GAAMO,gBAAe,CAAG,GAAIR,MAAK,CAACC,KAAV,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,GAAK,GAA1C,CAAxB,CAEA,GAAMQ,oBAAmB,CAAG,EAA5B,C;;ACjBA,GAAMC,WAAU,CAAG,CACjB,CACE,CAAEC,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAX,CADF,CAEE,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAC,CAAZ,CAFF,CAGE,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAC,CAAZ,CAHF,CAIE,CAAEkI,CAAC,CAAE,CAAC,CAAN,CAASlI,CAAC,CAAE,CAAZ,CAJF,CAKE,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAX,CALF,CAME,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAX,CANF,CADiB,CASjB,CACE,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAX,CADF,CAEE,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAC,CAAZ,CAFF,CAGE,CAAEkI,CAAC,CAAE,CAAC,CAAN,CAASlI,CAAC,CAAE,CAAC,CAAb,CAHF,CAIE,CAAEkI,CAAC,CAAE,CAAC,CAAN,CAASlI,CAAC,CAAE,CAAZ,CAJF,CAKE,CAAEkI,CAAC,CAAE,CAAC,CAAN,CAASlI,CAAC,CAAE,CAAZ,CALF,CAME,CAAEkI,CAAC,CAAE,CAAL,CAAQlI,CAAC,CAAE,CAAX,CANF,CATiB,CAAnB,C,GAmBMmI,c,yBACJ,gBAAYD,CAAZ,CAAelI,CAAf,CAAkB,CAAC,uDACjB,GAAIkI,CAAC,GAAK/J,SAAV,CAAqB,CACnBiK,OAAO,CAACC,KAAR,GACD,CACD,GAAIH,CAAC,WAAYC,OAAb,EAAwBD,CAAC,CAACA,CAAF,GAAQ/J,SAAR,EAAqB+J,CAAC,CAAClI,CAAF,GAAQ7B,SAAzD,CAAqE,CACnE,GAAM0F,OAAM,CAAGqE,CAAf,CACA,KAAKA,CAAL,CAASrE,MAAM,CAACqE,CAAhB,CACA,KAAKlI,CAAL,CAAS6D,MAAM,CAAC7D,CAAhB,CACD,CAJD,IAIO,CACL,KAAKkI,CAAL,CAASA,CAAT,CACA,KAAKlI,CAAL,CAASA,CAAT,CACD,CACF,C,kGAEe,CACd,GAAIsI,WAAU,CAAG,EAAjB,CAEAL,UAAU,CAAC,KAAKjI,CAAL,CAAS,CAAV,CAAV,CAAuBuI,OAAvB,CAA+B,SAASC,SAAT,CAAoB,CACjDF,UAAU,CAACG,IAAX,CAAgB,KAAKtI,GAAL,CAAS,GAAIgI,OAAJ,CAAWK,SAAX,CAAT,CAAhB,EACD,CAFD,CAEG,IAFH,EAIA,MAAOF,WAAP,CACD,C,oEAEqB3F,O,CAAS,CAC7B,GAAIA,OAAO,EAAI,GAAX,EAAkBA,OAAO,EAAI,EAAjC,CAAqC,CACnC,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAX,CAAc,CAAd,CAAT,CAAP,CACD,CAFD,IAEO,IAAIxF,OAAO,EAAI,GAAX,EAAkBA,OAAO,EAAI,GAAjC,CAAsC,CAC3C,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAAT,CAAP,CACD,CAFM,IAEA,IAAIxF,OAAO,CAAG,EAAV,EAAgBA,OAAO,CAAG,EAA9B,CAAkC,CACvC,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAAT,CAAP,CACD,CAFM,IAEA,IAAIxF,OAAO,EAAI,EAAX,EAAiBA,OAAO,CAAG,GAA/B,CAAoC,CACzC,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAAT,CAAP,CACD,CAFM,IAEA,IAAIxF,OAAO,CAAG,GAAV,EAAiBA,OAAO,EAAI,GAAhC,CAAqC,CAC1C,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAX,CAAc,CAAd,CAAT,CAAP,CACD,CAFM,IAEA,IAAIxF,OAAO,CAAG,GAAV,EAAiBA,OAAO,CAAG,GAA/B,CAAoC,CACzC,MAAO,MAAKxC,GAAL,CAAS,GAAIgI,OAAJ,CAAW,CAAX,CAAc,CAAd,CAAT,CAAP,CACD,CACF,C,gCAEGtE,M,CAAQ,CACV,MAAO,MAAK6E,MAAL,GACJvI,GADI,CACA0D,MAAM,CAAC6E,MAAP,EADA,EAEJC,QAFI,EAAP,CAGD,C,0CAEQ9E,M,CAAQ,CACf,MAAO,MAAK6E,MAAL,GACJE,QADI,CACK/E,MAAM,CAAC6E,MAAP,EADL,EAEJC,QAFI,EAAP,CAGD,C,oCAEKE,M,CAAO,CACX,MAAO,MAAKH,MAAL,GACJG,KADI,CACEA,MADF,EAEJF,QAFI,EAAP,CAGD,C,wDAEenI,S,CAAWsI,K,CAAO,CAChC,MAAO,MAAKJ,MAAL,GACJK,eADI,CACYvI,SADZ,CACuBsI,KADvB,EAEJH,QAFI,EAAP,CAGD,C,sCAEM9E,M,CAAQ,CACb,MAAO,MAAKqE,CAAL,GAAWrE,MAAM,CAACqE,CAAlB,EAAuB,KAAKlI,CAAL,GAAW6D,MAAM,CAAC7D,CAAhD,CACD,C,wEAEuBQ,S,CAAW,CACjC,GAAI8H,WAAU,CAAG,KAAKU,aAAL,EAAjB,CAEA,MAAOV,WAAU,CAAC9H,SAAD,CAAjB,CACD,C,8CAEUkC,M,CAAQ,CACjB,MAAO,MAAKgG,MAAL,GAActH,UAAd,CAAyBsB,MAAM,CAACgG,MAAP,EAAzB,CAAP,CACD,C,kCAEIO,M,CAAQ,CACX,MAAO,MAAKP,MAAL,GACJQ,IADI,CACCD,MADD,EAEJE,GAFI,CAEA,SAAAC,IAAI,QAAIA,KAAI,CAACT,QAAL,EAAJ,EAFJ,CAAP,CAGD,C,sCAEMM,M,CAAQ,CACb,MAAO,MAAKP,MAAL,GACJW,MADI,CACGJ,MADH,EAEJE,GAFI,CAEA,SAAAC,IAAI,QAAIA,KAAI,CAACT,QAAL,EAAJ,EAFJ,CAAP,CAGD,C,qCAEO,CACN,MAAO,IAAIR,OAAJ,CAAW,IAAX,CAAP,CACD,C,uCAEQ,CACP,GAAMjK,EAAC,CAAG,KAAKgK,CAAL,CAAS,CAAC,KAAKlI,CAAL,EAAU,KAAKA,CAAL,CAAS,CAAnB,CAAD,EAA0B,CAA7C,CACA,GAAMlB,EAAC,CAAG,KAAKkB,CAAf,CACA,GAAM5B,EAAC,CAAG,CAACF,CAAD,CAAKY,CAAf,CAEA;;;;;;;;;;;;;;UAgBA,MAAO,IAAIwK,aAAJ,CAASpL,CAAT,CAAYE,CAAZ,CAAeU,CAAf,EAAkBoD,KAAlB,EAAP,CACD,C,2CAEU,CACT,MAAOqH,0BAAmB,CAACC,aAApB,CAAkC,IAAlC,CAAP,CACD,C,0CAEQ9G,M,CAAQ7E,Q,CAAU,CACzB,MAAO,MAAK6K,MAAL,GACJe,QADI,CACK/G,MAAM,CAACgG,MAAP,EADL,CACsB7K,QADtB,EAEJsL,GAFI,CAEA,SAAAC,IAAI,QAAIA,KAAI,CAACT,QAAL,EAAJ,EAFJ,CAAP,CAGD,C,2CAEU,CACT,iBAAW,KAAKT,CAAhB,cAAsB,KAAKlI,CAA3B,MACD,C,sCAEM2B,M,CAAQ,CACb,MAAO,MAAK+G,MAAL,GACJgB,MADI,CACG/H,MADH,EAEJgH,QAFI,EAAP,CAGD,C,6CAEW,CACV,MAAO,MAAKD,MAAL,GACJiB,SADI,GAEJhB,QAFI,EAAP,CAGD,C,sBAGYR,gEAAf,E;;ACtKA,GAAMyB,UAAS,CAAG,CAAlB,CAEA,GAAMC,KAAI,CAAG,QAAPA,KAAO,CAAClK,CAAD,CAAIC,CAAJ,CAAOG,CAAP,CAAa,CACxB,MAAOJ,EAAC,CAAG,CAACC,CAAC,CAAGD,CAAL,EAAUI,CAArB,CACD,CAFD,CAIA,GAAM+J,SAAQ,CAAG,QAAXA,SAAW,CAACnK,CAAD,CAAIC,CAAJ,CAAOG,CAAP,CAAa,CAC5B,MAAO,IAAIuJ,UAAJ,CAASO,IAAI,CAAClK,CAAC,CAACzB,CAAH,CAAM0B,CAAC,CAAC1B,CAAR,CAAW6B,CAAX,CAAb,CAA4B8J,IAAI,CAAClK,CAAC,CAACvB,CAAH,CAAMwB,CAAC,CAACxB,CAAR,CAAW2B,CAAX,CAAhC,CAA+C8J,IAAI,CAAClK,CAAC,CAACb,CAAH,CAAMc,CAAC,CAACd,CAAR,CAAWiB,CAAX,CAAnD,CAAP,CACD,CAFD,C,GAIMuJ,U,yBACJ,cAAYpL,CAAZ,CAAeE,CAAf,CAAkBU,CAAlB,CAAqB,CAAC,qDACpB,GACEZ,CAAC,WAAYoL,KAAb,EACCpL,CAAC,CAACA,CAAF,GAAQC,SAAR,EAAqBD,CAAC,CAACE,CAAF,GAAQD,SAA7B,EAA0CD,CAAC,CAACY,CAAF,GAAQX,SAFrD,CAGE,CACA,GAAMiL,KAAI,CAAGlL,CAAb,CACA,KAAKA,CAAL,CAAS,KAAK6L,aAAL,CAAmBX,IAAI,CAAClL,CAAxB,CAAT,CACA,KAAKE,CAAL,CAAS,KAAK2L,aAAL,CAAmBX,IAAI,CAAChL,CAAxB,CAAT,CACA,KAAKU,CAAL,CAAS,KAAKiL,aAAL,CAAmBX,IAAI,CAACtK,CAAxB,CAAT,CACD,CARD,IAQO,CACL,KAAKZ,CAAL,CAAS,KAAK6L,aAAL,CAAmB7L,CAAnB,CAAT,CACA,KAAKE,CAAL,CAAS,KAAK2L,aAAL,CAAmB3L,CAAnB,CAAT,CACA,KAAKU,CAAL,CAAS,KAAKiL,aAAL,CAAmBjL,CAAnB,CAAT,CACD,CAED,KAAKwJ,UAAL,CAAkB,CAChB,CAAEpK,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAC,CAAZ,CAAeU,CAAC,CAAE,CAAlB,CADgB,CAEhB,CAAEZ,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAC,CAAlB,CAFgB,CAGhB,CAAEZ,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAC,CAAlB,CAHgB,CAIhB,CAAEZ,CAAC,CAAE,CAAC,CAAN,CAASE,CAAC,CAAE,CAAZ,CAAeU,CAAC,CAAE,CAAlB,CAJgB,CAKhB,CAAEZ,CAAC,CAAE,CAAC,CAAN,CAASE,CAAC,CAAE,CAAZ,CAAeU,CAAC,CAAE,CAAlB,CALgB,CAMhB,CAAEZ,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAC,CAAZ,CAAeU,CAAC,CAAE,CAAlB,CANgB,CAAlB,CASA,KAAKkL,SAAL,GACD,C,gFAEO,CACN,GAAI,KAAK9L,CAAL,CAAS,CAAT,GAAe,CAAf,EAAoB,KAAKE,CAAL,CAAS,CAAT,GAAe,CAAnC,EAAwC,KAAKU,CAAL,CAAS,CAAT,GAAe,CAA3D,CAA8D,CAC5D,MAAO,KAAP,CACD,CAED,GAAImL,GAAE,CAAG5L,IAAI,CAAC6D,KAAL,CAAW,KAAKhE,CAAhB,CAAT,CACA,GAAIgM,GAAE,CAAG7L,IAAI,CAAC6D,KAAL,CAAW,KAAK9D,CAAhB,CAAT,CACA,GAAI+L,GAAE,CAAG9L,IAAI,CAAC6D,KAAL,CAAW,KAAKpD,CAAhB,CAAT,CAEA,GAAIsL,OAAM,CAAG/L,IAAI,CAACwE,GAAL,CAASoH,EAAE,CAAG,KAAK/L,CAAnB,CAAb,CACA,GAAImM,OAAM,CAAGhM,IAAI,CAACwE,GAAL,CAASqH,EAAE,CAAG,KAAK9L,CAAnB,CAAb,CACA,GAAIkM,OAAM,CAAGjM,IAAI,CAACwE,GAAL,CAASsH,EAAE,CAAG,KAAKrL,CAAnB,CAAb,CAEA,GAAIsL,MAAM,CAAGC,MAAT,EAAmBD,MAAM,CAAGE,MAAhC,CAAwC,CACtCL,EAAE,CAAG,CAACC,EAAD,CAAMC,EAAX,CACD,CAFD,IAEO,IAAIE,MAAM,CAAGC,MAAb,CAAqB,CAC1BJ,EAAE,CAAG,CAACD,EAAD,CAAME,EAAX,CACD,CAFM,IAEA,CACLA,EAAE,CAAG,CAACF,EAAD,CAAMC,EAAX,CACD,CAED,MAAO,IAAIZ,KAAJ,CAASW,EAAT,CAAaC,EAAb,CAAiBC,EAAjB,CAAP,CACD,C,6CAEW,CACV,GAAI9L,IAAI,CAACwE,GAAL,CAAS,KAAK3E,CAAL,CAAS,KAAKE,CAAd,CAAkB,KAAKU,CAAhC,EAAqC,KAAzC,CAAgD,CAC9C,KAAM,IAAIyL,MAAJ,CACJ,8BACE,KAAKrM,CADP,CAEE,IAFF,CAGE,KAAKE,CAHP,CAIE,IAJF,CAKE,KAAKU,CALP,CAME,GAPE,CAAN,CASD,CACF,C,qDAEe,CACd,GAAIwJ,WAAU,CAAG,EAAjB,CAEA,KAAKA,UAAL,CAAgBC,OAAhB,CAAwB,SAASC,SAAT,CAAoB,CAC1CF,UAAU,CAACG,IAAX,CAAgB,KAAKtI,GAAL,CAAS,GAAImJ,KAAJ,CAASd,SAAT,CAAT,CAAhB,EACD,CAFD,CAEG,IAFH,EAIA,MAAOF,WAAP,CACD,C,wDAEe9H,S,CAAsB,IAAXsI,MAAW,2DAAH,CAAG,CACpC,MAAO,MAAK3I,GAAL,CAAS,GAAImJ,KAAJ,CAAS,KAAKhB,UAAL,CAAgB9H,SAAhB,CAAT,EAAqCqI,KAArC,CAA2CC,KAA3C,CAAT,CAAP,CACD,C,gCAEGM,I,CAAM,CACR,MAAO,IAAIE,KAAJ,CAAS,KAAKpL,CAAL,CAASkL,IAAI,CAAClL,CAAvB,CAA0B,KAAKE,CAAL,CAASgL,IAAI,CAAChL,CAAxC,CAA2C,KAAKU,CAAL,CAASsK,IAAI,CAACtK,CAAzD,CAAP,CACD,C,0CAEQsK,I,CAAM,CACb,MAAO,IAAIE,KAAJ,CAAS,KAAKpL,CAAL,CAASkL,IAAI,CAAClL,CAAvB,CAA0B,KAAKE,CAAL,CAASgL,IAAI,CAAChL,CAAxC,CAA2C,KAAKU,CAAL,CAASsK,IAAI,CAACtK,CAAzD,CAAP,CACD,C,oCAEK+J,M,CAAO,CACX,MAAO,IAAIS,KAAJ,CAAS,KAAKpL,CAAL,CAAS2K,MAAlB,CAAyB,KAAKzK,CAAL,CAASyK,MAAlC,CAAyC,KAAK/J,CAAL,CAAS+J,MAAlD,CAAP,CACD,C,8CAEUO,I,CAAM,CACf,MAAO/K,KAAI,CAACmM,GAAL,CACLnM,IAAI,CAACwE,GAAL,CAAS,KAAK3E,CAAL,CAASkL,IAAI,CAAClL,CAAvB,CADK,CAELG,IAAI,CAACwE,GAAL,CAAS,KAAKzE,CAAL,CAASgL,IAAI,CAAChL,CAAvB,CAFK,CAGLC,IAAI,CAACwE,GAAL,CAAS,KAAK/D,CAAL,CAASsK,IAAI,CAACtK,CAAvB,CAHK,CAAP,CAKD,C,sCAEMsK,I,CAAM,CACX,MAAO,MAAKlL,CAAL,GAAWkL,IAAI,CAAClL,CAAhB,EAAqB,KAAKE,CAAL,GAAWgL,IAAI,CAAChL,CAArC,EAA0C,KAAKU,CAAL,GAAWsK,IAAI,CAACtK,CAAjE,CACD,C,qCAEO,CACN,MAAO,IAAIwK,KAAJ,CAAS,IAAT,CAAP,CACD,C,4CAESd,S,CAAW,CACnB,GAAIiC,MAAK,CAAG,CAAC,CAAb,CAEA,GAAIvF,MAAK,CAAGsD,SAAS,CAACI,QAAV,CAAmB,IAAnB,CAAZ,CAEA,KAAKN,UAAL,CAAgBoC,IAAhB,CAAqB,SAASC,GAAT,CAAcvL,CAAd,CAAiB,CACpC,GAAI8F,KAAK,CAAC0F,MAAN,CAAaD,GAAb,CAAJ,CAAuB,CACrBF,KAAK,CAAGrL,CAAR,CACA,MAAO,KAAP,CACD,CAED,MAAO,MAAP,CACD,CAPD,EASA,MAAOqL,MAAP,CACD,C,kCAEIxB,M,CAAQ,CACX,GAAM4B,QAAO,CAAG,EAAhB,CAEA,GAAI5B,MAAM,GAAK,CAAf,CAAkB,CAChB,MAAO4B,QAAP,CACD,CAED,GAAIzB,KAAI,CAAG,KAAKL,eAAL,CAAqB,CAArB,CAAwBE,MAAxB,CAAX,CACA,IAAK,GAAI7J,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CAC1B,IAAK,GAAI6D,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGgG,MAApB,CAA4BhG,CAAC,EAA7B,CAAiC,CAC/B4H,OAAO,CAACpC,IAAR,CAAaW,IAAb,EACAA,IAAI,CAAGA,IAAI,CAACL,eAAL,CAAqB3J,CAArB,CAAP,CACD,CACF,CAED,MAAOyL,QAAP,CACD,C,sCAEM5B,M,CAAQ,CACb,GAAI4B,QAAO,CAAG,CAAC,KAAKlD,KAAL,EAAD,CAAd,CACA,IAAK,GAAImD,EAAC,CAAG,CAAb,CAAgBA,CAAC,EAAI7B,MAArB,CAA6B6B,CAAC,EAA9B,CAAkC,CAChCD,OAAO,CAAGA,OAAO,CAACE,MAAR,CAAe,KAAK7B,IAAL,CAAU4B,CAAV,CAAf,CAAV,CACD,CACD,MAAOD,QAAP,CACD,C,2CAEU,CACT,GAAI3C,EAAC,CAAG,KAAKhK,CAAL,CAAS,CAAC,KAAKY,CAAL,EAAU,KAAKA,CAAL,CAAS,CAAnB,CAAD,EAA0B,CAA3C,CACA,GAAIkB,EAAC,CAAG,KAAKlB,CAAb,CAEA,MAAO,IAAIqJ,eAAJ,CAAWD,CAAX,CAAclI,CAAd,CAAP,CAAyB;AAC1B,CAED;;;;;;;;iDASW,CACT,MAAO,IAAM,KAAK9B,CAAX,CAAe,GAAf,CAAqB,KAAKE,CAA1B,CAA8B,GAA9B,CAAoC,KAAKU,CAAzC,CAA6C,GAApD,CACD,C,oDAEakM,M,CAAQ,CACpB,MAAOC,WAAU,CAACD,MAAM,CAACE,OAAP,CAAetB,SAAf,CAAD,CAAjB,CACD,C,6CAEW,CACV,MAAO,MAAKH,QAAL,CAAc,GAAIH,KAAJ,CAAS,CAAT,CAAY,CAAZ,CAAe,CAAf,CAAd,CAAiC,CAAjC,EAAoC,CAApC,CAAP,CACD,C,0CAEQ5G,M,CAAyB,IAAjB7E,SAAiB,2DAAN,IAAM,CAChC,GAAMsN,EAAC,CAAG,KAAK/J,UAAL,CAAgBsB,MAAhB,CAAV,CAEA,GAAI7E,QAAQ,GAAK,IAAjB,CAAuB,CACrBA,QAAQ,CAAGsN,CAAX,CACD,CAED,GAAMN,QAAO,CAAG,EAAhB,CACA,IAAK,GAAIzL,EAAC,CAAGvB,QAAb,CAAuBuB,CAAC,EAAI,CAA5B,CAA+BA,CAAC,EAAhC,CAAoC,CAClCyL,OAAO,CAACpC,IAAR,CAAaqB,QAAQ,CAACpH,MAAD,CAAS,IAAT,CAAgB,IAAMyI,CAAP,CAAY/L,CAA3B,CAAR,CAAsC8C,KAAtC,EAAb,EACD,CAED,MAAO2I,QAAP,CACD,C,sCAEMlJ,M,CAAQ,CACb,GAAIyJ,OAAM,CAAG,IAAb,CAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAAAjC,IAAI,CAAI,CACvB,MAAO,IAAIE,KAAJ,CAAS,CAACF,IAAI,CAAChL,CAAf,CAAkB,CAACgL,IAAI,CAACtK,CAAxB,CAA2B,CAACsK,IAAI,CAAClL,CAAjC,CAAP,CACD,CAFD,CAIA,MAAOyD,MAAM,EAAb,CAAiB,CACfyJ,MAAM,CAAGC,QAAQ,CAACD,MAAD,CAAjB,CACD,CAED,MAAOA,OAAP,CACD,C,oBAGY9B,0DAAf,E;;AC1Ne,6CAAEA,IAAI,CAAJA,YAAF,CAAQnB,MAAM,CAANA,cAAR,CAAf,E;;ACDA,GAAMmD,oBAAO,CAAG,QAAVA,QAAU,CAAAC,OAAO,CAAI,CACzB,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOD,QAAO,CAAGlN,IAAI,CAAC4D,GAAL,CAAU,GAAK,GAAN,CAAa5D,IAAI,CAAC2D,EAA3B,CAAjB,CACD,CAND,CAQA,GAAMyJ,oBAAO,CAAG,QAAVA,QAAU,CAAAF,OAAO,CAAI,CACzB,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOD,QAAO,CAAGlN,IAAI,CAAC0D,GAAL,CAAU,GAAK,GAAN,CAAa1D,IAAI,CAAC2D,EAA3B,CAAjB,CACD,CAND,CAQA,GAAM0J,yBAAY,CAAG,QAAfA,aAAe,CAAAH,OAAO,CAAI,CAC9B,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOD,QAAO,CAAG,EAAID,mBAAO,CAACC,OAAD,CAA5B,CACD,CAND,CAQA,GAAMI,wBAAW,CAAG,QAAdA,YAAc,CAAAJ,OAAO,CAAI,CAC7B,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOC,oBAAO,CAACF,OAAD,CAAP,CAAmB,CAA1B,CACD,CAND,CAQA,GAAMK,4BAAe,CAAG,QAAlBA,gBAAkB,CAAAL,OAAO,CAAI,CACjC,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOD,QAAO,CAAGD,mBAAO,CAACC,OAAD,CAAxB,CACD,CAND,CAQA,GAAMM,6BAAgB,CAAG,QAAnBA,iBAAmB,CAAAN,OAAO,CAAI,CAClC,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOnN,KAAI,CAACuC,KAAL,CAAW2K,OAAO,CAAGG,wBAAY,CAACH,OAAD,CAAjC,CAAP,CACD,CAND,CAQA,GAAMO,4BAAe,CAAG,QAAlBA,gBAAkB,CAAAP,OAAO,CAAI,CACjC,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAGC,QAAV,CACD,CAED,MAAOG,wBAAW,CAACJ,OAAD,CAAX,CAAuB,CAA9B,CACD,CAND,CAQA,GAAMQ,aAAY,CAAG,QAAfA,aAAe,CAAAC,aAAa,CAAI,CACpC,MAAOL,wBAAW,IAAMK,aAAa,CAAG,GAAtB,CAAlB,CACD,CAFD,CAIA,GAAMC,0BAAa,CAAG,QAAhBA,cAAgB,CAAAC,cAAc,CAAI,CACtC,GAAIC,OAAM,CAAG9N,IAAI,CAACuC,KAAL,CAAWsL,cAAc,CAAG,CAA5B,CAAb,CACA,GAAIE,OAAM,CAAGD,MAAM,EAAIT,wBAAY,GAAKF,QAArB,CAAnB,CAEA,GAAIU,cAAc,CAAG,CAAjB,GAAuB,CAA3B,CAA8B,CAC5BE,MAAM,EAAIV,wBAAY,EAAtB,CACD,CAED,MAAOU,OAAP,CACD,CATD,CAWe,iDACbd,OAAO,CAAPA,mBADa,CAEbG,OAAO,CAAPA,mBAFa,CAGbC,YAAY,CAAZA,wBAHa,CAIbC,WAAW,CAAXA,uBAJa,CAKbC,eAAe,CAAfA,2BALa,CAMbC,gBAAgB,CAAhBA,4BANa,CAObC,eAAe,CAAfA,2BAPa,CAQbC,YAAY,CAAZA,YARa,CASbE,aAAa,CAAbA,yBATa,CAAf,E;;AClEA,GAAMI,YAAW,CAAG,QAAdA,YAAc,CAAAC,QAAQ,CAAI,CAC9B,EAAG,CACD,GAAIA,QAAQ,CAACC,QAAT,CAAkBC,IAAtB,CAA4B,CAC1B,MAAOF,SAAQ,CAACC,QAAT,CAAkBC,IAAzB,CACD,CACDF,QAAQ,CAAGA,QAAQ,CAACG,MAApB,CACD,CALD,MAKSH,QAAQ,CAACG,MALlB,EAOA,MAAO,KAAP,CACD,CATD,C,GAWMC,wC,yBACJ,8BAAc,CAAC,oEACb,KAAKC,SAAL,CAAiBnB,QAAjB,CACA,KAAKoB,KAAL,CAAa,CAAb,CACA,KAAKR,MAAL,CAAc,CAAd,CACA,KAAKS,IAAL,CAAY,CAAZ,CACA,KAAKC,MAAL,CAAc,IAAd,CACA,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKC,SAAL,CAAiB,GAAIzF,MAAK,CAAC0F,SAAV,EAAjB,CACD,C,4FAEIH,M,CAAQC,K,CAAO,CAClB,KAAKD,MAAL,CAAcA,MAAd,CACA,KAAKC,KAAL,CAAaA,KAAb,CACD,C,+CAE2B,IAAjBH,MAAiB,MAAjBA,KAAiB,CAAVR,MAAU,MAAVA,MAAU,CAC1B,KAAKQ,KAAL,CAAaA,KAAb,CACA,KAAKR,MAAL,CAAcA,MAAd,CACD,C,sCAEMS,I,CAAM,CACX,KAAKA,IAAL,CAAYA,IAAZ,CACD,C,4DAEiBlC,G,CAAK,CACrB,MAAO,MAAKuC,kBAAL,CAAwB,KAAK1D,aAAL,CAAmBmB,GAAnB,CAAxB,CAAP,CACD,C,mEAEsB,CACrB,MAAOwC,YAAW,CAACzB,YAAZ,GAA6B,KAAKmB,IAAzC,CACD,C,uDAEgB,CACf,GAAIO,KAAI,CAAG,GAAIC,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAAX,CACA,GAAImF,KAAI,CAAGF,IAAI,CAACG,uBAAL,CAA6B,CAA7B,CAAX,CAEA,MAAO1P,cAAQ,CAAC,KAAK2L,aAAL,CAAmB4D,IAAnB,CAAD,CAA2B,KAAK5D,aAAL,CAAmB8D,IAAnB,CAA3B,CAAf,CACD,C,oDAEaE,e,CAAiB,CAC7B,GAAI,CAACA,eAAL,CAAsB,CACpBpF,OAAO,CAACC,KAAR,GACD,CACD,GAAIH,EAAC,CACH,CAAE,EAAI,CAAL,CAAU7J,IAAI,CAACC,IAAL,CAAU,CAAV,CAAV,CAAyBkP,eAAe,CAACtP,CAAzC,CACE,EAAI,CAAL,CAAUsP,eAAe,CAACpP,CAD5B,EAEA,KAAKuO,SAHP,CAIA,GAAI3M,EAAC,CAAK,EAAI,CAAL,CAAUwN,eAAe,CAACpP,CAA3B,CAAgC,KAAKuO,SAA7C,CAEA,GAAIzO,EAAC,CAAGgK,CAAR,CACA,GAAIpJ,EAAC,CAAGkB,CAAR,CACA,GAAI5B,EAAC,CAAG,CAACF,CAAD,CAAKY,CAAb,CAEA,MAAO,IAAIuO,QAAO,CAAC/D,IAAZ,CAAiBpL,CAAjB,CAAoBE,CAApB,CAAuBU,CAAvB,EAA0BoD,KAA1B,GAAkCyG,QAAlC,EAAP,CACD,C,oDAEa8E,S,CAAW,CACvB,GAAIA,SAAS,WAAYJ,QAAO,CAAC/D,IAAjC,CAAuC,CACrCmE,SAAS,CAAGA,SAAS,CAAC9E,QAAV,EAAZ,CACD,CAED,GAAI,EAAE8E,SAAS,WAAYJ,QAAO,CAAClF,MAA/B,CAAJ,CAA4C,CAC1CsF,SAAS,CAAG,GAAIJ,QAAO,CAAClF,MAAZ,CAAmBsF,SAAS,CAACvF,CAA7B,CAAgCuF,SAAS,CAACzN,CAA1C,CAAZ,CACD,CAED,GAAI9B,EAAC,CACH,KAAKyO,SAAL,CAAiBtO,IAAI,CAACC,IAAL,CAAU,CAAV,CAAjB,EAAiCmP,SAAS,CAACvF,CAAV,CAAc,KAAOuF,SAAS,CAACzN,CAAV,CAAc,CAArB,CAA/C,CADF,CAEA,GAAI5B,EAAC,CAAK,KAAKuO,SAAL,CAAiB,CAAlB,CAAuB,CAAxB,CAA6Bc,SAAS,CAACzN,CAA/C,CAEA,MAAO,IAAI0N,aAAJ,CAAWxP,CAAX,CAAcE,CAAd,CAAiB,CAAjB,CAAP,CACD,C,8DAEkBuP,G,CAAK,CACtB,GAAIvC,OAAM,CAAG,CACXlN,CAAC,CAAE,CADQ,CAEXE,CAAC,CAAE,CAFQ,CAGXU,CAAC,CAAE,CAHQ,CAAb,CAMA,KAAKkO,SAAL,CAAeY,aAAf,CACE,CAAE1P,CAAC,CAAEyP,GAAG,CAAC1J,EAAT,CAAa7F,CAAC,CAAEuP,GAAG,CAACvJ,EAApB,CADF,CAEE,KAAK0I,MAAL,CAAYe,SAAZ,EAFF,EAIA,GAAIC,WAAU,CAAG,KAAKd,SAAL,CAAee,gBAAf,CAAgC,KAAKhB,KAAL,CAAWiB,QAA3C,CAAqD,IAArD,CAAjB,CAEAF,UAAU,CAACvF,OAAX,CAAmB,SAAS0F,WAAT,CAAsB,CACvC,GAAIA,WAAW,CAACC,MAAZ,CAAmBC,IAAnB,GAA4B,SAAhC,CAA2C,CACzC/C,MAAM,CAAClN,CAAP,CAAW+P,WAAW,CAACG,KAAZ,CAAkBlQ,CAA7B,CACAkN,MAAM,CAAChN,CAAP,CAAW6P,WAAW,CAACG,KAAZ,CAAkBhQ,CAA7B,CACAgN,MAAM,CAACtM,CAAP,CAAWmP,WAAW,CAACG,KAAZ,CAAkBtP,CAA7B,CACD,CACF,CAND,EAQA,MAAOsM,OAAP,CACD,C,sEAEsBuC,G,CAAoB,IAAfU,MAAe,2DAAP,KAAO,CACzC,GAAIjD,OAAM,CAAG,EAAb,CAEA,KAAK4B,SAAL,CAAeY,aAAf,CACE,CAAE1P,CAAC,CAAEyP,GAAG,CAAC1J,EAAT,CAAa7F,CAAC,CAAEuP,GAAG,CAACvJ,EAApB,CADF,CAEE,KAAK0I,MAAL,CAAYe,SAAZ,EAFF,EAIA,GAAIC,WAAU,CAAG,KAAKd,SAAL,CAAee,gBAAf,CAAgC,KAAKhB,KAAL,CAAWiB,QAA3C,CAAqD,IAArD,CAAjB,CAEAF,UAAU,CAACvF,OAAX,CAAmB,SAAS0F,WAAT,CAAsB,CACvC,GAAIA,WAAW,CAACC,MAAZ,CAAmBC,IAAnB,GAA4B,SAAhC,CAA2C,CACzC,GAAI3B,KAAI,CAAGH,WAAW,CAAC4B,WAAW,CAACC,MAAb,CAAtB,CAEA1B,IAAI,EAAI,CAACpB,MAAM,CAACkD,QAAP,CAAgB9B,IAAhB,CAAT,EAAkCpB,MAAM,CAAC3C,IAAP,CAAY+D,IAAZ,CAAlC,CACD,CACF,CAND,EAQA,MAAOpB,OAAP,CACD,C,8DAEkBuC,G,CAAK,CACtB,GAAIY,OAAM,CAAG,GAAIhH,MAAK,CAACiH,OAAV,EAAb,CACAD,MAAM,CAACE,GAAP,CAAWd,GAAG,CAACzP,CAAf,CAAkByP,GAAG,CAACvP,CAAtB,CAAyBuP,GAAG,CAAC7O,CAAJ,EAAS,CAAlC,EAEA;AACAyP,MAAM,CAACG,OAAP,CAAe,KAAK5B,MAAL,CAAYe,SAAZ,EAAf,EAEA;AACAU,MAAM,CAACrQ,CAAP,CAAWG,IAAI,CAAC6D,KAAL,CAAY,CAACqM,MAAM,CAACrQ,CAAP,CAAW,CAAZ,EAAiB,KAAK0O,KAAvB,CAAgC,CAA3C,CAAX,CACA2B,MAAM,CAACnQ,CAAP,CAAWC,IAAI,CAAC6D,KAAL,CAAY,CAAC,CAACqM,MAAM,CAACnQ,CAAR,CAAY,CAAb,EAAkB,KAAKgO,MAAxB,CAAkC,CAA7C,CAAX,CACAmC,MAAM,CAACzP,CAAP,CAAW,CAAX,CAEA,MAAO,CACLZ,CAAC,CAAEqQ,MAAM,CAACrQ,CADL,CAELE,CAAC,CAAEmQ,MAAM,CAACnQ,CAFL,CAAP,CAKA;;;;;;;;;;UAWD,C,mCAGH,GAAMmL,wCAAmB,CAAG,GAAImD,wCAAJ,EAA5B,CACenD,qGAAf,E;;ACnKA,GAAMoF,QAAO,CAAG,GAAIpH,MAAK,CAACiH,OAAV,EAAhB,CACA,GAAMI,QAAO,CAAG,GAAIrH,MAAK,CAACiH,OAAV,EAAhB,C,GAEMd,c,yBACJ,iBAAiC,IAArBxP,EAAqB,2DAAjB,CAAiB,IAAdE,EAAc,2DAAV,CAAU,IAAPU,EAAO,2DAAH,CAAG,wDAC/B,GAAIZ,CAAC,WAAYqJ,MAAK,CAACiH,OAAnB,EAA8BtQ,CAAC,WAAYwP,OAA/C,CAAuD,CACrD,KAAKxP,CAAL,CAASA,CAAC,CAACA,CAAX,CACA,KAAKE,CAAL,CAASF,CAAC,CAACE,CAAX,CACA,KAAKU,CAAL,CAASZ,CAAC,CAACY,CAAX,CACD,CAJD,IAIO,IAAIZ,CAAC,WAAYqJ,MAAK,CAACsH,OAAvB,CAAgC,CACrC,KAAK3Q,CAAL,CAASA,CAAC,CAACA,CAAX,CACA,KAAKE,CAAL,CAASF,CAAC,CAACE,CAAX,CACA,KAAKU,CAAL,CAAS,CAAT,CACD,CAJM,IAIA,IAAI,MAAOZ,EAAP,GAAa,QAAjB,CAA2B,CAChC,KAAKA,CAAL,CAASA,CAAC,CAACA,CAAF,EAAO,CAAhB,CACA,KAAKE,CAAL,CAASF,CAAC,CAACE,CAAF,EAAO,CAAhB,CACA,KAAKU,CAAL,CAASZ,CAAC,CAACY,CAAF,EAAO,CAAhB,CACD,CAJM,IAIA,CACL,KAAKZ,CAAL,CAASA,CAAT,CACA,KAAKE,CAAL,CAASA,CAAT,CACA,KAAKU,CAAL,CAASA,CAAT,CACD,CACF,C,kFAEO,CACN,MAAO,IAAI4O,OAAJ,CAAW,KAAKxP,CAAhB,CAAmB,KAAKE,CAAxB,CAA2B,KAAKU,CAAhC,CAAP,CACD,C,6CAEW,CACV,MAAO,CACLZ,CAAC,CAAE,KAAKA,CADH,CAELE,CAAC,CAAE,KAAKA,CAFH,CAGLU,CAAC,CAAE,KAAKA,CAHH,CAAP,CAKD,C,kCAEIZ,C,CAAG,CACN,MAAO,IAAIwP,OAAJ,CAAWxP,CAAX,CAAc,KAAKE,CAAnB,CAAsB,KAAKU,CAA3B,CAAP,CACD,C,kCAEIV,C,CAAG,CACN,MAAO,IAAIsP,OAAJ,CAAW,KAAKxP,CAAhB,CAAmBE,CAAnB,CAAsB,KAAKU,CAA3B,CAAP,CACD,C,kCAEIA,C,CAAG,CACN,MAAO,IAAI4O,OAAJ,CAAW,KAAKxP,CAAhB,CAAmB,KAAKE,CAAxB,CAA2BU,CAA3B,CAAP,CACD,C,kDAEYa,C,CAAG,CACd,MAAO,IAAI+N,OAAJ,CACLrP,IAAI,CAAC0D,GAAL,CAASQ,cAAc,CAAC5C,CAAD,CAAvB,CADK,CAELtB,IAAI,CAAC4D,GAAL,CAASM,cAAc,CAAC5C,CAAD,CAAvB,CAFK,EAGLgK,SAHK,EAAP,CAID,C,8CAEU4E,M,CAAQ,CACjBA,MAAM,CAAG,GAAIb,OAAJ,CAAWa,MAAX,CAAT,CACAI,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA8P,OAAO,CAACH,GAAR,CAAYF,MAAM,CAACrQ,CAAnB,CAAsBqQ,MAAM,CAACnQ,CAA7B,CAAgCmQ,MAAM,CAACzP,CAAvC,EACA,MAAO6P,QAAO,CAACvN,UAAR,CAAmBwN,OAAnB,CAAP,CACD,C,gCAEGL,M,CAAQ,CACVA,MAAM,CAAG,GAAIb,OAAJ,CAAWa,MAAX,CAAT,CACAI,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA8P,OAAO,CAACH,GAAR,CAAYF,MAAM,CAACrQ,CAAnB,CAAsBqQ,MAAM,CAACnQ,CAA7B,CAAgCmQ,MAAM,CAACzP,CAAvC,EACA6P,OAAO,CAACxO,GAAR,CAAYyO,OAAZ,EACA,MAAO,IAAIlB,OAAJ,CAAWiB,OAAO,CAACzQ,CAAnB,CAAsByQ,OAAO,CAACvQ,CAA9B,CAAiCuQ,OAAO,CAAC7P,CAAzC,CAAP,CACD,C,gCAEGyP,M,CAAQ,CACVI,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA8P,OAAO,CAACH,GAAR,CAAYF,MAAM,CAACrQ,CAAnB,CAAsBqQ,MAAM,CAACnQ,CAA7B,CAAgCmQ,MAAM,CAACzP,CAAvC,EACA,MAAO6P,QAAO,CAACG,GAAR,CAAYF,OAAZ,CAAP,CACD,C,0CAEQL,M,CAAQ,CACf,MAAO,MAAKQ,GAAL,CAASR,MAAT,CAAP,CACD,C,gCAEGA,M,CAAQ,CACVA,MAAM,CAAG,GAAIb,OAAJ,CAAWa,MAAX,CAAT,CACAI,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA8P,OAAO,CAACH,GAAR,CAAYF,MAAM,CAACrQ,CAAnB,CAAsBqQ,MAAM,CAACnQ,CAA7B,CAAgCmQ,MAAM,CAACzP,CAAvC,EACA6P,OAAO,CAACI,GAAR,CAAYH,OAAZ,EACA,MAAO,IAAIlB,OAAJ,CAAWiB,OAAO,CAACzQ,CAAnB,CAAsByQ,OAAO,CAACvQ,CAA9B,CAAiCuQ,OAAO,CAAC7P,CAAzC,CAAP,CACD,C,6CAEW,CACV6P,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA6P,OAAO,CAAChF,SAAR,GACA,MAAO,IAAI+D,OAAJ,CAAWiB,OAAO,CAACzQ,CAAnB,CAAsByQ,OAAO,CAACvQ,CAA9B,CAAiCuQ,OAAO,CAAC7P,CAAzC,CAAP,CACD,C,sDAEckQ,M,CAAQ,CACrBL,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA6P,OAAO,CAAC/G,cAAR,CAAuBoH,MAAvB,EACA,MAAO,IAAItB,OAAJ,CAAWiB,OAAO,CAACzQ,CAAnB,CAAsByQ,OAAO,CAACvQ,CAA9B,CAAiCuQ,OAAO,CAAC7P,CAAzC,CAAP,CACD,C,uCAEQ,CACP6P,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EACA,MAAO6P,QAAO,CAACrP,MAAR,EAAP,CACD,C,kDAEY2P,M,CAAQ,CACnBN,OAAO,CAACF,GAAR,CAAY,KAAKvQ,CAAjB,CAAoB,KAAKE,CAAzB,CAA4B,KAAKU,CAAjC,EAEA,MAAO,IAAI4O,OAAJ,CAAWiB,OAAO,CAACO,YAAR,CAAqBD,MAArB,CAAX,CAAP,CACD,C,sCAEMV,M,CAAQ,CACb,GAAI,CAACA,MAAL,CAAa,CACX,MAAO,MAAP,CACD,CAED,MAAO,MAAKrQ,CAAL,GAAWqQ,MAAM,CAACrQ,CAAlB,EAAuB,KAAKE,CAAL,GAAWmQ,MAAM,CAACnQ,CAAzC,EAA8C,KAAKU,CAAL,GAAWyP,MAAM,CAACzP,CAAvE,CACD,C,qCAEO,CACN,MAAO,IAAI4O,OAAJ,CACLrP,IAAI,CAACuC,KAAL,CAAW,KAAK1C,CAAhB,CADK,CAELG,IAAI,CAACuC,KAAL,CAAW,KAAKxC,CAAhB,CAFK,CAGLC,IAAI,CAACuC,KAAL,CAAW,KAAK9B,CAAhB,CAHK,CAAP,CAKD,C,2DAEkB,CACjB,MAAOyK,0BAAmB,CAACC,aAApB,CACLD,yBAAmB,CAAC4F,aAApB,CAAkC,IAAlC,CADK,CAAP,CAGD,C,2CAEU,CACT,MAAO5F,0BAAmB,CAAC4F,aAApB,CAAkC,IAAlC,CAAP,CACD,C,2CAEU,CACT,mBAAa,KAAKjR,CAAlB,gBAA0B,KAAKE,CAA/B,gBAAuC,KAAKU,CAA5C,MACD,C,yCAES,CACR,MAAO,IAAIyI,MAAK,CAACiH,OAAV,CAAkB,KAAKtQ,CAAvB,CAA0B,KAAKE,CAA/B,CAAkC,KAAKU,CAAvC,CAAP,CACD,C,2CAEU,CACT,MAAO,CACLZ,CAAC,CAAE,KAAKA,CADH,CAELE,CAAC,CAAE,KAAKA,CAFH,CAGLU,CAAC,CAAE,KAAKA,CAHH,CAAP,CAKD,C,sBAGY4O,8DAAf,E;;GC3JM0B,8B,yBACJ,wBAAYC,IAAZ,CAAkBC,IAAlB,CAAwB,CAAC,+DACvB,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,YAAL,CAAoB,CAClB,EAAG,EADe,CAElB,EAAG,EAFe,CAGlB,EAAG,EAHe,CAIlB,EAAG,EAJe,CAKlB,EAAG,EALe,CAMlB,EAAG,EANe,CAOlB,EAAG,EAPe,CAQlB,EAAG,EARe,CASlB,EAAG,EATe,CAApB,CAYA,GAAIF,IAAJ,CAAU,CACR,OAAQA,IAAI,CAACG,IAAb,EACE,IAAKC,uBAAa,CAACC,KAAnB,CACE,KAAKC,YAAL,CAAkBP,IAAlB,CAAwBC,IAAxB,EACA,MACF,IAAKI,uBAAa,CAACG,KAAnB,CACE,KAAKC,YAAL,CAAkBT,IAAlB,CAAwBC,IAAxB,EACA,MACF,IAAKI,uBAAa,CAACK,IAAnB,CACE,KAAKC,WAAL,CAAiBX,IAAjB,EACA,MACF,IAAKK,uBAAa,CAACO,KAAnB,CACE,KAAKC,YAAL,CAAkBb,IAAlB,CAAwBC,IAAxB,EACA,MACF,QAbF,CAeD,CACF,C,kGAEW,CACV,MAAO,CACLC,YAAY,CAAE,KAAKA,YADd,CAELC,YAAY,CAAE,KAAKA,YAFd,CAAP,CAID,C,iDAEsB,IAAXW,KAAW,2DAAJ,EAAI,CACrB,KAAKZ,YAAL,CAAoBY,IAAI,CAACZ,YAAL,EAAqB,EAAzC,CACA,KAAKC,YAAL,CAAoBW,IAAI,CAACX,YAAL,EAAqB,CACvC,EAAG,EADoC,CAEvC,EAAG,EAFoC,CAGvC,EAAG,EAHoC,CAIvC,EAAG,EAJoC,CAKvC,EAAG,EALoC,CAMvC,EAAG,EANoC,CAOvC,EAAG,EAPoC,CAQvC,EAAG,EARoC,CASvC,EAAG,EAToC,CAAzC,CAWA,MAAO,KAAP,CACD,C,uEAEwB,gBACvB,MAAOY,OAAM,CAACC,IAAP,CAAY,KAAKd,YAAjB,EAA+Be,MAA/B,CAAsC,SAACC,KAAD,CAAQ/P,SAAR,CAAsB,CACjE,GAAMgQ,SAAQ,CAAG,KAAI,CAACjB,YAAL,CAAkB/O,SAAlB,GAAgC,CAAjD,CACA,MAAO+P,MAAK,CAAGC,QAAf,CACD,CAHM,CAGJ,CAHI,CAAP,CAID,C,sDAEchQ,S,CAAW,CACxB,GAAI,CAAC,KAAK+O,YAAL,CAAkB/O,SAAlB,CAAL,CAAmC,CACjC,MAAO,EAAP,CACD,CAED,MAAO,MAAK+O,YAAL,CAAkB/O,SAAlB,EAA+B,KAAKiQ,kBAAL,CAAwBjQ,SAAxB,CAAtC,CACD,C,iDAEa,iBACZ,MAAO4P,OAAM,CAACC,IAAP,CAAY,KAAKd,YAAjB,EAA+BmB,KAA/B,CACL,SAAAlQ,SAAS,QAAI,OAAI,CAACmQ,cAAL,CAAoBnQ,SAApB,IAAmC,CAAvC,EADJ,CAAP,CAGD,C,wCAEOA,S,CAAW2L,M,CAAQyE,Q,CAAU,CACnC,KAAKpB,YAAL,CAAkBhP,SAAlB,EAA6BiI,IAA7B,CAAkC,CAAE0D,MAAM,CAANA,MAAF,CAAU0E,UAAU,CAAED,QAAQ,CAACE,EAA/B,CAAlC,EACA,GAAI,KAAKvB,YAAL,CAAkB/O,SAAlB,EAA+B,KAAKiQ,kBAAL,CAAwBjQ,SAAxB,CAAnC,CAAuE,CACrE,KAAM,IAAI+J,MAAJ,CAAU,qBAAV,CAAN,CACD,CACF,C,8DAEkB/J,S,CAAW,CAC5B,MAAO,MAAKgP,YAAL,CAAkBhP,SAAlB,EAA6B8P,MAA7B,CACL,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAAK,CAAC5E,MAAhC,EADK,CAEL,CAFK,CAAP,CAID,C,uDAEgB,iBACf,MAAOiE,OAAM,CAACC,IAAP,CAAY,KAAKb,YAAjB,EACJrG,GADI,CACA,SAAA6H,GAAG,QAAI,OAAI,CAACxB,YAAL,CAAkBwB,GAAlB,CAAJ,EADH,EAEJC,MAFI,CAEG,SAAAC,WAAW,QAAIA,YAAW,CAAC5R,MAAZ,CAAqB,CAAzB,EAFd,CAAP,CAGD,C,gDAEW+P,I,CAAM,CAChB,KAAKE,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAAC8B,QAA5B,CACD,C,kDAEY9B,I,CAAMC,I,CAAM,CACvB,KAAKC,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAAC+B,WAAL,CAAmB9B,IAAI,CAAC+B,KAA/C,CACD,C,kDAEYhC,I,CAAMC,I,CAAM,CACvB,GAAID,IAAI,CAACiC,QAAL,CAAcC,QAAd,EAAJ,CAA8B,CAC5B,GAAIjC,IAAI,CAAC+B,KAAL,GAAe,CAAnB,CAAsB,CACpB,KAAK9B,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAACmC,SAA5B,CACD,CAFD,IAEO,CACL,KAAKjC,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAACmC,SAA5B,CACD,CACF,CAND,IAMO,CACL,GAAIlC,IAAI,CAAC+B,KAAL,GAAe,CAAnB,CAAsB,CACpB,KAAK9B,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAACmC,SAA5B,CACD,CAFD,IAEO,CACL,KAAKjC,YAAL,CAAkB,CAAlB,EAAuBF,IAAI,CAACmC,SAA5B,CACD,CACF,CACF,C,kDAEYnC,I,CAAMC,I,CAAM,CACvB,GAAM3N,OAAM,CAAG2N,IAAI,CAAC3N,MAApB,CACA,GAAMnB,UAAS,CAAG8O,IAAI,CAAC+B,KAAvB,CACA,GAAMI,gBAAe,CAAG/P,cAAc,CACpCA,cAAc,CAAClB,SAAD,CAAY,CAACmB,MAAb,CADsB,CAEpC,CAFoC,CAAtC,CAKA,GAAI0N,IAAI,CAACiC,QAAL,CAAcC,QAAd,IAA4B,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,EAAajD,QAAb,CAAsBmD,eAAtB,CAAhC,CAAwE,CACtE,KAAKlC,YAAL,CAAkB7N,cAAc,CAAC+P,eAAD,CAAkB,CAAlB,CAAhC,EAAwDpC,IAAI,CAACqC,SAA7D,CACD,CAFD,IAEO,CACL,KAAKnC,YAAL,CAAkBkC,eAAlB,EAAqCpC,IAAI,CAACqC,SAA1C,CACD,CACF,C,8CAEUnB,K,CAAO,iBAChBH,MAAM,CAACC,IAAP,CAAY,KAAKd,YAAjB,EAA+BhH,OAA/B,CAAuC,SAAA/H,SAAS,CAAI,CAClD+P,KAAK,CAAC/P,SAAD,CAAL,CAAmB+P,KAAK,CAAC/P,SAAD,CAAL,CACf+P,KAAK,CAAC/P,SAAD,CAAL,CAAmB,MAAI,CAAC+O,YAAL,CAAkB/O,SAAlB,CADJ,CAEf,MAAI,CAAC+O,YAAL,CAAkB/O,SAAlB,CAFJ,CAGD,CAJD,EAMA,MAAO+P,MAAP,CACD,C,8BAGYnB,yFAAf,E;;GChJMuC,4B,yBACJ,uBACEb,EADF,CAEErB,IAFF,CAGElJ,QAHF,CAIEqL,QAJF,CAKEjQ,MALF,CAMEkQ,MANF,CAOEC,IAPF,CAYE,IAJAT,MAIA,2DAJQ,CAIR,IAHAU,eAGA,2DAHiB5T,SAGjB,IAFAsM,MAEA,2DAFQ,CAER,IADAuH,QACA,8DADU,CACV,+DACA,KAAKlB,EAAL,CAAUA,EAAV,CACA,KAAKrB,IAAL,CAAYA,IAAZ,CACA,KAAK9N,MAAL,CAAcA,MAAd,CACA,KAAKkQ,MAAL,CAAcA,MAAd,CACA,KAAKC,IAAL,CAAYA,IAAZ,CACA,KAAKT,KAAL,CAAaA,KAAb,CACA,KAAKU,cAAL,CAAsBA,cAAc,EAAI,GAAI3C,wBAAJ,EAAxC,CACA,KAAK3E,KAAL,CAAaA,KAAb,CACA,KAAKwH,WAAL,CAAiB1L,QAAjB,EACA,KAAK2L,WAAL,CAAiBN,QAAjB,EACA,KAAKI,OAAL,CAAeA,OAAf,CACD,C,yFAEO,CACN,GAAMzL,SAAQ,CAAG,KAAKA,QAAL,CAAcrE,KAAd,EAAjB,CACA,GAAM0P,SAAQ,CAAG,KAAKA,QAAL,CAAc1P,KAAd,EAAjB,CAEA,GAAMyF,MAAK,CAAG,KAAKA,KAAL,EAAd,CACAA,KAAK,CAACsK,WAAN,CAAkB1L,QAAlB,EACAoB,KAAK,CAACuK,WAAN,CAAkBN,QAAlB,EACA,MAAOjK,MAAP,CACD,C,gDAEWpB,Q,CAAU,CACpB,GAAIA,QAAQ,WAAY8G,QAAO,CAAClF,MAAhC,CAAwC,CACtC5B,QAAQ,CAAGgD,yBAAmB,CAACC,aAApB,CAAkCjD,QAAlC,CAAX,CACD,CAED,KAAKA,QAAL,CAAgBA,QAAhB,CACD,C,gDAEWqL,Q,CAAU,CACpB,GAAIA,QAAQ,WAAYvE,QAAO,CAAClF,MAAhC,CAAwC,CACtCyJ,QAAQ,CAAGrI,yBAAmB,CAACC,aAApB,CAAkCoI,QAAlC,CAAX,CACD,CAED,KAAKA,QAAL,CAAgBA,QAAhB,CACD,C,8CAEUI,O,CAAS,CAClB,KAAKA,OAAL,CAAeA,OAAf,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,MAAKrQ,MAAZ,CACD,C,iDAEa,CACZ,MAAO,MAAK4E,QAAZ,CACD,C,iDAEa,CACZ,MAAO,MAAKqL,QAAZ,CACD,C,uDAEgB,CACf,MAAOrI,0BAAmB,CAAC4F,aAApB,CAAkC,KAAK5I,QAAvC,CAAP,CACD,C,uDAEgB,CACf,MAAOgD,0BAAmB,CAAC4F,aAApB,CAAkC,KAAKyC,QAAvC,CAAP,CACD,C,4DAEiBO,G,CAAK,CACrB,KAAKJ,cAAL,CAAsBI,GAAtB,CACA,MAAO,KAAP,CACD,C,oCAEKrB,E,CAAI,CACR,KAAKA,EAAL,CAAUA,EAAV,CACA,MAAO,KAAP,CACD,C,0CAEQrG,K,CAAO,CACd,KAAKA,KAAL,CAAaA,KAAb,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACLqG,EAAE,CAAE,KAAKA,EADJ,CAELrB,IAAI,CAAE,KAAKA,IAFN,CAGLlJ,QAAQ,CAAE,KAAKA,QAAL,CAAc6L,SAAd,EAHL,CAILR,QAAQ,CAAE,KAAKA,QAAL,CAAcQ,SAAd,EAJL,CAKLzQ,MAAM,CAAE,KAAKA,MALR,CAMLkQ,MAAM,CAAE,KAAKA,MANR,CAOLC,IAAI,CAAE,KAAKA,IAPN,CAQLT,KAAK,CAAE,KAAKA,KARP,CASLU,cAAc,CAAE,KAAKA,cAAL,CAAoBK,SAApB,EATX,CAUL3H,KAAK,CAAE,KAAKA,KAVP,CAWLuH,OAAO,CAAE,KAAKA,OAXT,CAAP,CAaD,C,gDAEW7B,I,CAAM,CAChB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAf,CACA,KAAKrB,IAAL,CAAYU,IAAI,CAACV,IAAjB,CACA,KAAKlJ,QAAL,CAAgB,GAAImH,aAAJ,CAAWyC,IAAI,CAAC5J,QAAhB,CAAhB,CACA,KAAKqL,QAAL,CAAgB,GAAIlE,aAAJ,CAAWyC,IAAI,CAACyB,QAAhB,CAAhB,CACA,KAAKjQ,MAAL,CAAcwO,IAAI,CAACxO,MAAnB,CACA,KAAKkQ,MAAL,CAAc1B,IAAI,CAAC0B,MAAnB,CACA,KAAKC,IAAL,CAAY3B,IAAI,CAAC2B,IAAjB,CACA,KAAKT,KAAL,CAAalB,IAAI,CAACkB,KAAlB,CACA,KAAK5G,KAAL,CAAa0F,IAAI,CAAC1F,KAAlB,CACA,KAAKuH,OAAL,CAAe7B,IAAI,CAAC6B,OAAL,EAAgB,CAA/B,CACA,KAAKD,cAAL,CAAsB,GAAI3C,wBAAJ,GAAqBiD,WAArB,CAAiClC,IAAI,CAAC4B,cAAtC,CAAtB,CAEA,MAAO,KAAP,CACD,C,sCAEMzC,I,CAAM,CACX,MACE,MAAKG,IAAL,GAAcH,IAAI,CAACG,IAAnB,EACA,KAAKlJ,QAAL,CACG+L,gBADH,GAEG1H,MAFH,CAEU0E,IAAI,CAAC/I,QAAL,CAAc+L,gBAAd,EAFV,CADA,EAIA,KAAKV,QAAL,CACGU,gBADH,GAEG1H,MAFH,CAEU0E,IAAI,CAACsC,QAAL,CAAcU,gBAAd,EAFV,CAJA,EAOA,KAAK3Q,MAAL,GAAgB2N,IAAI,CAAC3N,MAPrB,EAQA,KAAKkQ,MAAL,GAAgBvC,IAAI,CAACuC,MARrB,EASA,KAAKC,IAAL,GAAcxC,IAAI,CAACwC,IATnB,EAUA,KAAKT,KAAL,GAAe/B,IAAI,CAAC+B,KAXtB,CAaD,C,yCAES,CACR,MAAO,MAAK5B,IAAL,GAAcC,sBAAa,CAACC,KAAnC,CACD,C,2CAEU,CACT,MAAO,MAAKF,IAAL,GAAcC,sBAAa,CAAC6C,MAAnC,CACD,C,yCAES,CACR,MAAO,MAAK9C,IAAL,GAAcC,sBAAa,CAAC8C,KAAnC,CACD,C,yCAES,CACR,MAAO,MAAK/C,IAAL,GAAcC,sBAAa,CAACO,KAAnC,CACD,C,uCAEQ,CACP,MAAO,MAAKR,IAAL,GAAcC,sBAAa,CAACK,IAAnC,CACD,C,qCAEO,CACN,MAAO,MAAKN,IAAL,GAAcC,sBAAa,CAAC+C,GAAnC,CACD,C,yCAES,CACR,MAAO,MAAKhD,IAAL,GAAcC,sBAAa,CAACG,KAAnC,CACD,C,qDAEe,CACd,MAAO,MAAK6C,OAAL,IAAkB,KAAKC,OAAL,EAAlB,EAAoC,KAAKC,OAAL,EAApC,EAAsD,KAAKC,MAAL,EAA7D,CACD,C,qDAEe,CACd,MAAO,MAAKH,OAAL,IAAkB,KAAKC,OAAL,EAAlB,EAAoC,KAAKC,OAAL,EAApC,EAAsD,KAAKC,MAAL,EAA7D,CACD,C,qCAEO,CACN,MAAO,IAAIlB,cAAJ,CACL,KAAKb,EADA,CAEL,KAAKrB,IAFA,CAGL,KAAKlJ,QAHA,CAIL,KAAKqL,QAJA,CAKL,KAAKjQ,MALA,CAML,KAAKkQ,MANA,CAOL,KAAKC,IAPA,CAQL,KAAKT,KARA,CASL,KAAKU,cATA,CAUL,KAAKtH,KAVA,CAWL,KAAKuH,OAXA,CAAP,CAaD,C,8CAEU1C,I,CAAM,CACf,OAAQA,IAAI,CAACG,IAAb,EACE,IAAKC,uBAAa,CAACC,KAAnB,CACE,MAAO,MAAK+C,OAAL,IAAkB,KAAKrB,KAAL,GAAe3P,cAAc,CAAC4N,IAAI,CAAC+B,KAAN,CAAa,CAAb,CAAtD,CACF,QACE,MAAO,MAAP,CAJJ,CAMD,C,6BAGYM,sFAAf,E;;AClNA,GAAMjC,cAAa,CAAG,CACpB8C,KAAK,CAAE,OADa,CAEpBC,GAAG,CAAE,KAFe,CAGpBF,MAAM,CAAE,QAHY,CAIpB5C,KAAK,CAAE,OAJa,CAKpBE,KAAK,CAAE,OALa,CAMpBI,KAAK,CAAE,OANa,CAOpBF,IAAI,CAAE,MAPc,CAAtB,CAUeL,wEAAf,E;;GCLMoD,kC,yBACJ,0BAAYzD,IAAZ,CAAkB0D,eAAlB,CAAmCjB,IAAnC,CAAyC,CAAC,iEACxC,KAAKzC,IAAL,CAAYA,IAAZ,CACA,KAAK0D,eAAL,CAAuBA,eAAvB,CACA,KAAKjB,IAAL,CAAYA,IAAZ,CACD,C,qGAEUkB,I,CAAqB,IAAfC,OAAe,2DAAN,IAAM,CAC9B,GAAID,IAAI,CAACE,GAAL,EAAJ,CAAgB,CACd,GAAMC,YAAW,CAAGH,IAAI,CAACI,QAAL,EAApB,CAEA,GAAIH,MAAJ,CAAY,CACV,KAAK5D,IAAL,CAAUiC,QAAV,CAAmB+B,eAAnB,CAAmCF,WAAnC,EACA,KAAKJ,eAAL,CAAqBO,gBAArB,CAAsC,KAAKjE,IAA3C,EACD,CAED,MAAO,KAAP,CACD,CATD,IASO,IAAI4D,MAAJ,CAAY,CACjB,KAAM,IAAI1I,MAAJ,CACJ,gEADI,CAAN,CAGD,CAJM,IAIA,CACL,MAAO,MAAP,CACD,CACF,C,yCAES,CACR,MAAO,MAAKgJ,IAAL,CAAU,KAAV,CAAP,CACD,C,mCAEmB,IAAfN,OAAe,2DAAN,IAAM,CAClB,GAAIO,SAAQ,CAAG,KAAKnE,IAAL,CAAUiC,QAAV,CAAmBmC,WAAnB,EAAf,CAEA,GAAMC,QAAO,CAAG,KAAKrE,IAAL,CAAUiC,QAAV,CAAmBqC,yBAAnB,EAAhB,CAEA,GAAIC,UAAS,CAAG,KAAKvE,IAAL,CAAUiC,QAAV,CAAmBuC,WAAnB,EAAhB,CAEA,GAAIL,QAAJ,CAAc,CACZI,SAAS,CAAGA,SAAS,CAAC3C,MAAV,CAAiB,SAAC3B,IAAD,QAAU,CAACA,IAAI,CAACuD,MAAL,EAAX,EAAjB,CAAZ,CACD,CAFD,IAEO,CACLW,QAAQ,CAAG,GAAI7B,uBAAJ,CACT,IADS,CAETjC,sBAAa,CAACK,IAFL,CAGT2D,OAAO,CAACnN,QAHC,CAITmN,OAAO,CAAC9B,QAJC,CAKT8B,OAAO,CAAC/R,MALC,CAMT+R,OAAO,CAAC7B,MANC,CAOT,KAAKC,IAPI,CAQT4B,OAAO,CAAC7B,MAAR,CAAiB,KAAjB,CAAyB,IARhB,CAAX,CAWA,GAAMiC,YAAW,CAAGF,SAAS,CAAC3C,MAAV,CAAiB,SAAC3B,IAAD,QAAUA,KAAI,CAACyE,aAAL,EAAV,EAAjB,CAApB,CACA,GAAMC,eAAc,CAAGJ,SAAS,CAAC3C,MAAV,CAAiB,SAAC3B,IAAD,QAAU,CAACA,IAAI,CAACyE,aAAL,EAAX,EAAjB,CAAvB,CAEAH,SAAS,wDAAOI,cAAP,GAAuBR,QAAvB,+CAAoCM,WAApC,EAAT,CACD,CAED,GAAMd,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0BuE,SAA1B,CAAb,CAEA,MAAO,MAAKM,UAAL,CAAgBlB,IAAhB,CAAsBC,MAAtB,CAAP,CACD,C,0CAEQkB,I,CAAM,CACb,MAAO,MAAKC,KAAL,CAAWD,IAAX,CAAiB,KAAjB,CAAP,CACD,C,oCAEKA,I,CAAqB,IAAflB,OAAe,2DAAN,IAAM,CACzB,GAAIoB,UAAS,CAAG,KAAKhF,IAAL,CAAUiC,QAAV,CAAmBgD,YAAnB,EAAhB,CAEA,GAAMZ,QAAO,CAAG,KAAKrE,IAAL,CAAUiC,QAAV,CAAmBqC,yBAAnB,EAAhB,CAEA,GAAIU,SAAJ,CAAe,CACb,GAAIA,SAAS,CAAChD,KAAV,CAAkB8C,IAAlB,CAAyB,KAAK9E,IAAL,CAAUiC,QAAV,CAAmBiD,aAAnB,EAA7B,CAAiE,CAC/D,MAAO,MAAP,CACD,CAED,GAAIF,SAAS,CAAChD,KAAV,CAAkB8C,IAAlB,CAAyB,CAA7B,CAAgC,CAC9B,MAAO,MAAP,CACD,CACDE,SAAS,CAAChD,KAAV,EAAmB8C,IAAnB,CACD,CATD,IASO,CACL,GAAIA,IAAI,CAAG,CAAX,CAAc,CACZ,MAAO,MAAP,CACD,CAEDE,SAAS,CAAG,GAAI1C,uBAAJ,CACV,IADU,CAEVjC,sBAAa,CAACO,KAFJ,CAGVyD,OAAO,CAACnN,QAHE,CAIVmN,OAAO,CAAC9B,QAJE,CAKV8B,OAAO,CAAC/R,MALE,CAMV+R,OAAO,CAAC7B,MANE,CAOV,KAAKC,IAPK,CAQV,CARU,CAAZ,CAUD,CAED,GAAMgC,YAAW,CAAG,KAAKzE,IAAL,CAAUiC,QAAV,CACjBuC,WADiB,GAEjB5C,MAFiB,CAGhB,SAAC3B,IAAD,QAAUA,KAAI,CAACyE,aAAL,IAAwB,CAACzE,IAAI,CAACuD,MAAL,EAAzB,EAA0C,CAACvD,IAAI,CAACsD,OAAL,EAArD,EAHgB,CAApB,CAKA,GAAMoB,eAAc,CAAG,KAAK3E,IAAL,CAAUiC,QAAV,CACpBuC,WADoB,GAEpB5C,MAFoB,CAEb,SAAC3B,IAAD,QAAU,CAACA,IAAI,CAACyE,aAAL,EAAD,EAAyBzE,IAAI,CAACuD,MAAL,EAAnC,EAFa,CAAvB,CAIA,GAAMe,UAAS,CACbS,SAAS,CAAChD,KAAV,GAAoB,CAApB,wDACQ2C,cADR,+CAC2BF,WAD3B,0DAEQE,cAFR,GAEwBK,SAFxB,+CAEsCP,WAFtC,EADF,CAKA,GAAMd,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0BuE,SAA1B,CAAb,CAEA,MAAO,MAAKM,UAAL,CAAgBlB,IAAhB,CAAsBC,MAAtB,CAAP,CACD,C,0CAEQuB,c,CAAgB,CACvB,MAAO,MAAKC,KAAL,CAAWD,cAAX,CAA2B,KAA3B,CAAP,CACD,C,oCAEKA,c,CAA+B,IAAfvB,OAAe,2DAAN,IAAM,CACnC,GAAMyB,SAAQ,CAAG,KAAKrF,IAAL,CAAUiC,QAAV,CAAmBqD,WAAnB,EAAjB,CAEA,GAAMC,UAAS,CAAG,GAAIjD,uBAAJ,CAChB,IADgB,CAEhBjC,sBAAa,CAACG,KAFE,CAGhB6E,QAAQ,CAACnO,QAHO,CAIhBmO,QAAQ,CAAC9C,QAJO,CAKhBlQ,cAAc,CAACgT,QAAQ,CAAC/S,MAAV,CAAkB6S,cAAlB,CALE,CAMhBE,QAAQ,CAAC7C,MANO,CAOhB,KAAKC,IAPW,CAQhB0C,cARgB,CAAlB,CAWA,GAAMZ,UAAS,CAAG,KAAKvE,IAAL,CAAUiC,QAAV,CAAmBuC,WAAnB,EAAlB,CAEA,GAAIa,QAAQ,CAAC/B,OAAT,IAAsB+B,QAAQ,CAACrD,KAAT,GAAmBmD,cAA7C,CAA6D,CAC3DZ,SAAS,CAACiB,GAAV,GACD,CAFD,IAEO,CACL,GACE,KAAKxF,IAAL,CAAUyF,SAAV,GAAwB,IAAxB,EACA,KAAKzF,IAAL,CAAUiC,QAAV,CAAmBuC,WAAnB,GAAiC5C,MAAjC,CAAwC,SAAC3B,IAAD,QAAUA,KAAI,CAACqD,OAAL,EAAV,EAAxC,EACGrT,MADH,EACa,KAAK+P,IAAL,CAAUyF,SAHzB,CAIE,CACA,MAAO,MAAP,CACD,CAEDlB,SAAS,CAACnL,IAAV,CAAemM,SAAf,EACD,CAED,GAAM5B,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0BuE,SAA1B,CAAb,CAEA,MAAO,MAAKM,UAAL,CAAgBlB,IAAhB,CAAsBC,MAAtB,CAAP,CACD,C,4CAESzS,S,CAAW,CACnB,MAAO,MAAKuU,MAAL,CAAYvU,SAAZ,CAAuB,KAAvB,CAAP,CACD,C,sCAEMA,S,CAA0B,IAAfyS,OAAe,2DAAN,IAAM,CAC/B,GAAMyB,SAAQ,CAAG,KAAKrF,IAAL,CAAUiC,QAAV,CAAmBqD,WAAnB,EAAjB,CAEA,GAAMK,WAAU,CAAG,GAAIrD,uBAAJ,CACjB,IADiB,CAEjBjC,sBAAa,CAACC,KAFG,CAGjB+E,QAAQ,CAACnO,QAHQ,CAIjBmO,QAAQ,CAACO,cAAT,GAA0BlM,eAA1B,CAA0CvI,SAA1C,CAJiB,CAKjBkU,QAAQ,CAAC/S,MALQ,CAMjB+S,QAAQ,CAAC7C,MANQ,CAOjB,KAAKC,IAPY,CAQjBtR,SARiB,CAAnB,CAWA,GAAIoT,UAAS,CAAG,KAAKvE,IAAL,CAAUiC,QAAV,CAAmBuC,WAAnB,EAAhB,CACA,GAAIa,QAAQ,CAAChC,OAAT,IAAsBgC,QAAQ,CAACrD,KAAT,GAAmB3P,cAAc,CAAClB,SAAD,CAAY,CAAZ,CAA3D,CAA2E,CACzEoT,SAAS,CAACiB,GAAV,GACD,CAFD,IAEO,CACLjB,SAAS,CAACnL,IAAV,CAAeuM,UAAf,EACD,CAED,GAAMhC,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0BuE,SAA1B,CAAb,CAEA,MAAO,MAAKM,UAAL,CAAgBlB,IAAhB,CAAsBC,MAAtB,CAAP,CACD,C,6CAEW,CACV,MAAO,MAAK5D,IAAL,CAAUiC,QAAV,CACJuC,WADI,GAEJnJ,IAFI,CAEC,SAAC4E,IAAD,QAAUA,KAAI,CAAC4F,aAAL,EAAV,EAFD,CAAP,CAGD,C,uCAEQ,CACP,GAAMC,SAAQ,CAAG,KAAK9F,IAAL,CAAUiC,QAAV,CAAmBqD,WAAnB,EAAjB,CAEA,GAAI,CAACQ,QAAD,EAAa,CAACA,QAAQ,CAACD,aAAT,EAAlB,CAA4C,CAC1C,OACD,CAED,KAAK7F,IAAL,CAAUiC,QAAV,CAAmB8D,cAAnB,CAAkCD,QAAlC,EAEA,GAAMnC,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0B,KAAKA,IAAL,CAAUiC,QAAV,CAAmBuC,WAAnB,EAA1B,CAAb,CAEA,MAAO,MAAKK,UAAL,CAAgBlB,IAAhB,CAAsB,IAAtB,CAAP,CACD,C,6CAEW,CACV,MAAO,MAAK3D,IAAL,CAAUiC,QAAV,CACJuC,WADI,GAEJnJ,IAFI,CAEC,SAAC4E,IAAD,QAAUA,KAAI,CAACyE,aAAL,EAAV,EAFD,CAAP,CAGD,C,uCAEQ,gBACP,KAAK1E,IAAL,CAAUiC,QAAV,CACGuC,WADH,GAEG5C,MAFH,CAEU,SAAC3B,IAAD,QAAUA,KAAI,CAAC4F,aAAL,EAAV,EAFV,EAGG3M,OAHH,CAGW,SAAC+G,IAAD,QAAU,MAAI,CAACD,IAAL,CAAUiC,QAAV,CAAmB8D,cAAnB,CAAkC9F,IAAlC,CAAV,EAHX,EAKA,KAAKyD,eAAL,CAAqBO,gBAArB,CAAsC,KAAKjE,IAA3C,EACD,C,gCAGYyD,+FAAf,E;;GChOMmB,sB,yBACJ,oBAAY5E,IAAZ,CAAkBiC,QAAlB,CAA4B,CAAC,2DAC3B,KAAKjC,IAAL,CAAYA,IAAZ,CACA,KAAKiC,QAAL,CAAgBA,QAAQ,CAACnI,GAAT,CAAa,SAACmG,IAAD,QAAUA,KAAI,CAAC3H,KAAL,EAAV,EAAb,CAAhB,CACA,KAAK0N,SAAL,CAAiBhG,IAAI,CAACiG,OAAL,CACdC,UADc,GAEdtE,MAFc,CAEP,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,YAAnB,CAAiC,IAAjC,CAAuC,KAAvC,CAAZ,EAFO,EAGdxE,MAHc,CAGP,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACE,UAAP,EAAb,EAHO,EAIdvM,GAJc,CAIV,SAACyH,QAAD,QAAc,IAAI+E,0BAAJ,CAAqB/E,QAArB,CAAd,EAJU,CAAjB,CAMA,KAAKgF,mBAAL,CAAyB,KAAKtE,QAA9B,EAEA,KAAKuE,IAAL,CAAY,KAAKxG,IAAL,CAAUiC,QAAV,CAAmBwE,OAAnB,EAAZ,CAEA,KAAKC,IAAL,CAAY,IAAZ,CAEA,KAAKC,kBAAL,CAA0B,KAAKC,2BAAL,EAA1B,CACD,C,kIAE6B,CAC5B,GAAM7K,OAAM,CAAG,KAAKkG,QAAL,CAAchB,MAAd,CACb,SAAC4F,WAAD,CAAc5G,IAAd,QAAuBA,KAAI,CAACyC,cAAL,CAAoBoE,UAApB,CAA+BD,WAA/B,CAAvB,EADa,CAEb,EAFa,CAAf,CAKA9K,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CACAA,MAAM,CAAC,CAAD,CAAN,CAAYA,MAAM,CAAC,CAAD,CAAN,EAAa,CAAzB,CAEA,MAAOA,OAAP,CACD,C,uEAEwB,CACvB,GAAMgL,cAAa,CAAG,KAAKH,2BAAL,EAAtB,CACA,MACEG,cAAa,CAAC,CAAD,CAAb,CACAA,aAAa,CAAC,CAAD,CADb,CAEAA,aAAa,CAAC,CAAD,CAFb,CAGAA,aAAa,CAAC,CAAD,CAHb,CAIAA,aAAa,CAAC,CAAD,CAJb,CAKAA,aAAa,CAAC,CAAD,CALb,CAMAA,aAAa,CAAC,CAAD,CANb,CAOAA,aAAa,CAAC,CAAD,CAPb,CAQAA,aAAa,CAAC,CAAD,CATf,CAWD,C,2EAE0B,CACzB,MACE,MAAKJ,kBAAL,CAAwB,CAAxB,EACA,KAAKA,kBAAL,CAAwB,CAAxB,CADA,CAEA,KAAKA,kBAAL,CAAwB,CAAxB,CAFA,CAGA,KAAKA,kBAAL,CAAwB,CAAxB,CAHA,CAIA,KAAKA,kBAAL,CAAwB,CAAxB,CAJA,CAKA,KAAKA,kBAAL,CAAwB,CAAxB,CALA,CAMA,KAAKA,kBAAL,CAAwB,CAAxB,CANA,CAOA,KAAKA,kBAAL,CAAwB,CAAxB,CAPA,CAQA,KAAKA,kBAAL,CAAwB,CAAxB,CATF,CAWD,C,uCAEQ,CACP;;;;;;;;;MAUA,MACE,MAAKK,wBAAL,KAAoC,CAApC,EACA,KAAKR,IAAL,EAAa,KAAKS,oBAAL,EAFf,CAID,C,mEAEsB,CACrB,MAAO,MAAKjB,SAAL,CAAe/E,MAAf,CACL,SAACiG,GAAD,CAAM3F,QAAN,QAAmB2F,IAAG,CAAG3F,QAAQ,CAAC4F,kBAAT,EAAzB,EADK,CAEL,CAFK,CAAP,CAID,C,oEAEqBhW,S,CAAW,gBAC/B,MAAO,MAAK6U,SAAL,CACJpE,MADI,CACG,SAACL,QAAD,CAAc,CACpB,GAAM6F,SAAQ,CAAG7F,QAAQ,CAAC8F,iBAAT,EAAjB,CAEA,MACE9F,SAAQ,CAAC+F,WAAT,CAAqBnW,SAArB,GACAiW,QAAQ,CAAG,CADX,EAEA,KAAI,CAACZ,IAAL,EAAajF,QAAQ,CAACgG,qBAAT,EAHf,CAKD,CATI,EAUJC,IAVI,CAUC,KAAKC,aAVN,CAAP,CAWD,C,oDAEanX,C,CAAGC,C,CAAG,oBAIdD,CAAC,CAACoX,WAAF,EAJc,CAEIC,KAFJ,gBAEhBC,kBAFgB,CAGAC,QAHA,gBAGhBC,cAHgB,oBAQdvX,CAAC,CAACmX,WAAF,EARc,CAMIK,KANJ,gBAMhBH,kBANgB,CAOAI,QAPA,gBAOhBF,cAPgB,CAUlB,GAAIH,KAAK,CAAGI,KAAZ,CAAmB,CACjB,MAAO,CAAC,CAAR,CACD,CAED,GAAIJ,KAAK,CAAGI,KAAZ,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,GAAIF,QAAQ,CAAGG,QAAf,CAAyB,CACvB,MAAO,CAAC,CAAR,CACD,CAED,GAAIH,QAAQ,CAAGG,QAAf,CAAyB,CACvB,MAAO,EAAP,CACD,CAED,GAAI1X,CAAC,CAACiX,qBAAF,GAA4BhX,CAAC,CAACgX,qBAAF,EAAhC,CAA2D,CACzD,MAAO,CAAC,CAAR,CACD,CAED,GAAIjX,CAAC,CAACiX,qBAAF,GAA4BhX,CAAC,CAACgX,qBAAF,EAAhC,CAA2D,CACzD,MAAO,EAAP,CACD,CAED,GAAIjX,CAAC,CAAC2X,SAAF,CAAc1X,CAAC,CAAC0X,SAApB,CAA+B,CAC7B,MAAO,CAAC,CAAR,CACD,CAED,GAAI3X,CAAC,CAAC2X,SAAF,CAAc1X,CAAC,CAAC0X,SAApB,CAA+B,CAC7B,MAAO,EAAP,CACD,CAED,MAAO,EAAP,CACD,C,iCAEK,CACJ,GAAI,KAAKvB,IAAL,GAAc,IAAlB,CAAwB,CACtB,KAAM,IAAIxL,MAAJ,CAAU,8BAAV,CAAN,CACD,CAED,GAAI,CACF,KAAKgN,OAAL,GAEA,KAAKxB,IAAL,CAAY,KAAKyB,MAAL,EAAZ,CACA,MAAO,MAAKzB,IAAZ,CACD,CAAC,MAAOlP,CAAP,CAAU,CACV,GAAIA,CAAC,CAAC4Q,OAAF,GAAc,aAAlB,CAAiC,CAC/B,KAAK1B,IAAL,CAAY,KAAZ,CACA,MAAO,MAAKA,IAAZ,CACD,CAED,KAAMlP,EAAN,CACD,CACF,C,yCAES,iBACRuJ,MAAM,CAACC,IAAP,CAAY,KAAK2F,kBAAjB,EAAqCzN,OAArC,CAA6C,SAAC/H,SAAD,CAAe,CAC1D,GAAMgQ,SAAQ,CAAG,MAAI,CAACwF,kBAAL,CAAwBxV,SAAxB,CAAjB,CACAA,SAAS,CAAGkX,QAAQ,CAAClX,SAAD,CAAY,EAAZ,CAApB,CAEA,GAAIgQ,QAAQ,GAAK,CAAjB,CAAoB,CAClB,OACD,CAED,MAAI,CAACmH,YAAL,CAAkBnX,SAAlB,CAA6BgQ,QAA7B,EACD,CATD,EAWA,MAAO,MAAKgH,MAAL,EAAP,CACD,C,kDAEYhX,S,CAAWgQ,Q,CAAU,CAChC,GAAIoH,SAAQ,CAAG,CAAf,CAEA,MAAO,IAAP,CAAa,CACX,GAAMvC,UAAS,CAAG,KAAKwC,qBAAL,CAA2BrX,SAA3B,CAAlB,CAEA,GAAIoX,QAAQ,GAAKpH,QAAjB,CAA2B,CACzB,OACD,CAED,GAAI6E,SAAS,CAAC/V,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,OACD,CAED,GAAMsR,SAAQ,CAAGyE,SAAS,CAACR,GAAV,EAAjB,CACAjE,QAAQ,CAACkH,OAAT,CAAiB,CAAjB,EACA,KAAK9B,kBAAL,CAAwBxV,SAAxB,GAAsC,CAAtC,CACAoX,QAAQ,EAAI,CAAZ,CACD,CACF,C,gEAEmBtG,Q,CAAU,iBAC5BA,QAAQ,CAAC/I,OAAT,CAAiB,SAAC+G,IAAD,QACfA,KAAI,CAACyI,iBAAL,CAAuB,GAAI3I,wBAAJ,CAAmB,MAAI,CAACC,IAAxB,CAA8BC,IAA9B,CAAvB,CADe,EAAjB,EAGD,C,2CAEU,iBACT,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EAA4B/G,OAA5B,CAAoC,SAAC/H,SAAD,CAAe,CACjD,MAAI,CAAC6U,SAAL,CAAe9M,OAAf,CAAuB,SAACqI,QAAD,CAAc,CACnC,GAAI,CAACA,QAAQ,CAAC+F,WAAT,CAAqBnW,SAArB,CAAL,CAAsC,CACpC,OACD,CAED,GAAIwX,KAAI,CAAGpH,QAAQ,CAAC0G,SAAT,CAAqB1G,QAAQ,CAACgH,QAAzC,CAEA,GAAII,IAAI,GAAK,CAAb,CAAgB,CACd,OACD,CAED,MAAI,CAAC1G,QAAL,CAAc/I,OAAd,CAAsB,SAAC+G,IAAD,CAAU,CAC9B,GAAMkB,SAAQ,CAAGlB,IAAI,CAACyC,cAAL,CAAoBpB,cAApB,CAAmCnQ,SAAnC,CAAjB,CAEA,GAAIgQ,QAAQ,GAAK,CAAjB,CAAoB,CAClB,OACD,CAED,GAAIA,QAAQ,CAAGwH,IAAf,CAAqB,CACnB1I,IAAI,CAACyC,cAAL,CAAoBkG,OAApB,CAA4BzX,SAA5B,CAAuCwX,IAAvC,CAA6CpH,QAAQ,CAACA,QAAtD,EACAA,QAAQ,CAACsH,WAAT,CAAqBF,IAArB,EACAA,IAAI,CAAG,CAAP,CACD,CAJD,IAIO,CACL1I,IAAI,CAACyC,cAAL,CAAoBkG,OAApB,CAA4BzX,SAA5B,CAAuCgQ,QAAvC,CAAiDI,QAAQ,CAACA,QAA1D,EACAA,QAAQ,CAACsH,WAAT,CAAqB1H,QAArB,EACAwH,IAAI,EAAIxH,QAAR,CACD,CACF,CAhBD,EAiBD,CA5BD,EA6BD,CA9BD,EAgCA,GAAI,CAAC,KAAKc,QAAL,CAAcZ,KAAd,CAAoB,SAACpB,IAAD,QAAUA,KAAI,CAACyC,cAAL,CAAoBoG,WAApB,EAAV,EAApB,CAAL,CAAuE,CACrE,KAAM,IAAI5N,MAAJ,CAAU,6BAAV,CAAN,CACD,CAED,MAAO,MAAK+G,QAAZ,CACD,C,0BAGY2C,6EAAf,E;;GC/PM0B,kC,yBACJ,0BAAY/E,QAAZ,CAAsB,CAAC,iEACrB,KAAKA,QAAL,CAAgBA,QAAhB,CAEA,KAAKwH,UAAL,CAAkB,GAAGrN,MAAH,CAAU6F,QAAQ,CAAC6E,WAAT,CAAqB,oBAArB,CAAV,CAAlB,CACA,KAAKM,IAAL,CAAY,CAAZ,CACA,KAAKuB,SAAL,CAAiB,CAAjB,CACA,KAAKb,QAAL,CAAgB7F,QAAQ,CAAC6E,WAAT,CAAqB,iBAArB,CAAwC,IAAxC,CAA8C,CAA9C,CAAhB,CACA,KAAKmC,QAAL,CAAgB,CAAhB,CACD,C,uGAEWzL,M,CAAQ,CAClB,KAAKyL,QAAL,EAAiBzL,MAAjB,CACD,C,iDAEa,CACZ,GAAMkM,WAAU,CAAG,KAAKzH,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD,IAAhD,CAAsD,CAAtD,CAAnB,CACA,KAAK7E,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD,KAAK6B,SAArD,EAEA,GAAMgB,QAAO,CAAG,KAAK1H,QAAL,CAAc2H,IAAd,CAAmBC,iBAAnB,EAAhB,CAEA,KAAK5H,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD4C,UAAhD,EAEA,MAAOC,QAAP,CACD,C,+DAEoB,CACnB,MAAO,MAAK1H,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD,KAAK6B,SAArD,CAAgE,CAAhE,CAAP,CACD,C,qEAEuB,CACtB,MACE,MAAK1G,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD,KAAK6B,SAAL,CAAiB,CAAjE,CAAoE,CAApE,EACA,KAAK1G,QAAL,CAAc6E,WAAd,CAA0B,oBAA1B,CAAgD,KAAK6B,SAArD,CAAgE,CAAhE,CAFF,CAID,C,gDAEW9W,S,CAAW,CACrB,MAAO,MAAK4X,UAAL,CAAgB9J,QAAhB,CAAyB9N,SAAzB,CAAP,CACD,C,+CAEY,CACX,MAAO,MAAK8W,SAAL,CAAiB,KAAKb,QAA7B,CACD,C,6DAEmB,CAClB,GAAMA,SAAQ,CAAG,KAAKA,QAAL,CAAgB,KAAKa,SAAtC,CAEA,GAAIb,QAAQ,CAAG,CAAf,CAAkB,CAChB,MAAO,EAAP,CACD,CAED,MAAOA,SAAP,CACD,C,wCAEOtK,M,CAAQ,CACd,KAAKmL,SAAL,EAAkBnL,MAAlB,CACD,C,gDAEWA,M,CAAQ,CAClB,GAAI,KAAKmL,SAAL,CAAiBnL,MAAjB,CAA0B,CAA9B,CAAiC,CAC/B,KAAM,IAAI5B,MAAJ,CAAU,0CAAV,CAAN,CACD,CAED,KAAK+M,SAAL,CAAiB,KAAKA,SAAL,CAAiBnL,MAAlC,CACD,C,gCAGYwJ,+FAAf,E;;;;GChEM8C,gC,yBACJ,0BAAc,CAAC,gEACb,KAAKC,QAAL,CAAgB,IAAhB,CACD,C,4FAEMA,Q,CAAUC,a,CAAe,CAC9B,KAAKD,QAAL,CAAgBA,QAAhB,CACA,KAAKC,aAAL,CAAqBA,aAArB,CAEA,MAAO,KAAP,CACD,C,wCAEOtJ,I,CAAMyC,I,CAAM,CAClB,GAAMvR,IAAG,CAAG,KAAKqY,cAAL,CAAoBvJ,IAApB,CAAZ,CAEA,GAAI,CAAC9O,GAAL,CAAU,CACR,MAAO,MAAP,CACD,CAED,MAAOA,IAAG,CAACuR,IAAJ,GAAaA,IAApB,CACD,C,4DAEiBzC,I,CAAM1E,G,CAAK,gBAC3BA,GAAG,CAAGA,GAAG,EAAI,KAAKkO,iBAAL,CAAuBxJ,IAAvB,EAA6B9I,QAA1C,CACA,MAAO,MAAKmS,QAAL,CAAcI,KAAd,CAAoB7H,MAApB,CACL,SAAA8H,KAAK,QACHA,MAAK,CAACC,WAAN,IACA3J,IAAI,GAAK0J,KADT,EAEA,KAAI,CAACF,iBAAL,CAAuBE,KAAvB,EAA8BxS,QAA9B,CAAuCqE,MAAvC,CAA8CD,GAA9C,CAHG,EADA,CAAP,CAMD,C,oDAEa0E,I,CAAM4J,O,CAAS,CAC3B,GAAMC,UAAS,CAAG7J,IAAI,CAACiC,QAAL,CAAcqC,yBAAd,EAAlB,CACA,GAAMe,SAAQ,CAAGrF,IAAI,CAACiC,QAAL,CAAcqD,WAAd,EAAjB,CACA,GAAMpG,OAAM,CAAGmG,QAAQ,CAACyE,WAAT,EAAf,CAH2B,0BAKIF,OAAO,CAACG,uBAAR,CAC7BF,SAAS,CAAC3S,QADmB,CAE7BgI,MAF6B,CALJ,CAKnBhI,QALmB,uBAKnBA,QALmB,CAKTqL,QALS,uBAKTA,QALS,CAU3B,MAAO,IAAID,uBAAJ,CACL,IADK,CAELjC,sBAAa,CAAC+C,GAFT,CAGLlM,QAHK,CAILqL,QAJK,CAKL8C,QAAQ,CAAC/S,MALJ,CAML+S,QAAQ,CAAC7C,MANJ,CAOLqH,SAAS,CAACpH,IAAV,CAAiB,CAPZ,CAQL,CARK,EASLuH,UATK,CASMhK,IAAI,CAACiC,QAAL,CAAcgI,UAAd,EATN,CAAP,CAUD,C,sCAEMjK,I,CAAM1B,G,CAAK,CAChB,GAAI4L,WAAU,CAAGlK,IAAI,CAACiC,QAAL,CAAckI,aAAd,EAAjB,CAEA,GAAI,CAACD,UAAL,CAAiB,CACf,GAAM7E,SAAQ,CAAGrF,IAAI,CAACiC,QAAL,CAAcqD,WAAd,EAAjB,CACA4E,UAAU,CAAG,GAAI5H,uBAAJ,CACX,CAAC,CADU,CAEXjC,sBAAa,CAAC6C,MAFH,CAGX5E,GAHW,CAIX+G,QAAQ,CAAC9C,QAJE,CAKX8C,QAAQ,CAAC/S,MALE,CAMX+S,QAAQ,CAAC7C,MANE,CAOX,KAAK6G,QAAL,CAAc5G,IAPH,CAQX,CARW,CASX,IATW,CAUX,CAVW,CAAb,CAYAzC,IAAI,CAACiC,QAAL,CAAcmI,WAAd,CAA0BF,UAA1B,EACD,CAfD,IAeO,CACLA,UAAU,CAACtH,WAAX,CAAuBtE,GAAvB,EACA0B,IAAI,CAACiC,QAAL,CAAcoI,iBAAd,CAAgCH,UAAhC,EACD,CACF,C,0DAEgBlK,I,CAAM8E,I,CAAM,CAC3B,GAAMoF,WAAU,CAAGlK,IAAI,CAACiC,QAAL,CAAckI,aAAd,EAAnB,CACA,GAAMG,UAAS,CAAGjY,cAAc,CAAC6X,UAAU,CAAC5X,MAAZ,CAAoBwS,IAApB,CAAhC,CACAoF,UAAU,CAAC5X,MAAX,CAAoBgY,SAApB,CACAtK,IAAI,CAACiC,QAAL,CAAcoI,iBAAd,CAAgCH,UAAhC,EACA,KAAKjG,gBAAL,CAAsBjE,IAAtB,EACD,C,0EAEwBA,I,CAAMuK,W,CAAa,CAC1C,GAAIA,WAAW,GAAKzb,SAApB,CAA+B,CAC7Byb,WAAW,CAAG,KAAKlB,QAAL,CAAc5G,IAA5B,CACD,CAED,GAAIxC,KAAI,CAAG,IAAX,CAEA,IAAK,GAAIlQ,EAAC,CAAGiQ,IAAI,CAACiC,QAAL,CAAchS,MAAd,CAAuB,CAApC,CAAuCF,CAAC,EAAI,CAA5C,CAA+CA,CAAC,EAAhD,CAAoD,CAClDkQ,IAAI,CAAGD,IAAI,CAACiC,QAAL,CAAclS,CAAd,CAAP,CACA,GAAIkQ,IAAI,CAACwC,IAAL,CAAY8H,WAAhB,CAA6B,CAC3B,MACD,CACF,CAED,MAAO,IAAIvM,QAAO,CAAClF,MAAZ,CAAmBmH,IAAI,CAAC/I,QAAxB,CAAP,CACD,C,0DAEgB8I,I,CAAM,CACrB,KAAKsJ,aAAL,CAAmBkB,UAAnB,CAA8B,kBAA9B,CAAkDxK,IAAlD,EACD,C,4CAESA,I,CAAM7O,S,CAAW,CACzB,MAAO,IAAIsS,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDgI,SAArD,CACLtZ,SADK,CAAP,CAGD,C,sCAEM6O,I,CAAM7O,S,CAAW,CACtB,GAAIsS,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDiD,MAArD,CAA4DvU,SAA5D,EACD,C,4CAES6O,I,CAAM,CACd,MAAO,IAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDiI,SAArD,EAAP,CACD,C,4CAES1K,I,CAAM,CACd,MAAO,IAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDkI,SAArD,EAAP,CACD,C,sCAEM3K,I,CAAM,CACX,GAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDmI,MAArD,GACD,C,sCAEM5K,I,CAAM,CACX,GAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDoI,MAArD,GACD,C,0CAEQ7K,I,CAAM8K,a,CAAe,CAC5B,GAAIA,aAAa,GAAK,CAAlB,EAAuBA,aAAa,GAAK,CAAC,CAA9C,CAAiD,CAC/C,KAAM,IAAI5P,MAAJ,CAAU,0CAAV,CAAN,CACD,CAED,MAAO,IAAIuI,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDsI,QAArD,CACLD,aADK,CAAP,CAGD,C,oCAEK9K,I,CAAM8K,a,CAAe,CACzB,GAAIA,aAAa,GAAK,CAAlB,EAAuBA,aAAa,GAAK,CAAC,CAA9C,CAAiD,CAC/C,KAAM,IAAI5P,MAAJ,CAAU,0CAAV,CAAN,CACD,CAED,MAAO,IAAIuI,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqD2C,KAArD,CACL0F,aADK,CAAP,CAGD,C,wCAEO9K,I,CAAM,CACZ,MAAO,IAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDuI,OAArD,EAAP,CACD,C,kCAEIhL,I,CAAM,CACT,MAAO,IAAIyD,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDyB,IAArD,EAAP,CACD,C,0CAEQlE,I,CAAM8E,I,CAAM,CACnB,GAAIA,IAAI,GAAK,CAAT,EAAcA,IAAI,GAAK,CAAC,CAA5B,CAA+B,CAC7B,KAAM,IAAI5J,MAAJ,CAAU,oCAAV,CAAN,CACD,CAED,GAAI8E,IAAI,CAACiC,QAAL,CAAcgI,UAAd,GAA6BnF,IAA7B,CAAoC9E,IAAI,CAACiC,QAAL,CAAciD,aAAd,EAAxC,CAAuE,CACrE,MAAO,MAAP,CACD,CAED,MAAO,IAAIzB,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDwI,QAArD,CAA8DnG,IAA9D,CAAP,CACD,C,oCAEK9E,I,CAAM8E,I,CAAM,CAChB,GAAIA,IAAI,GAAK,CAAT,EAAcA,IAAI,GAAK,CAAC,CAA5B,CAA+B,CAC7B,KAAM,IAAI5J,MAAJ,CAAU,oCAAV,CAAN,CACD,CAED,MAAO,IAAIuI,0BAAJ,CAAqBzD,IAArB,CAA2B,IAA3B,CAAiC,KAAKqJ,QAAL,CAAc5G,IAA/C,EAAqDsC,KAArD,CAA2DD,IAA3D,CAAP,CACD,C,+BAGYsE,4FAAf,E;;GCxLM8B,oB,yBACJ,mBAAYC,WAAZ,CAAyB,CAAC,0DACxB,KAAKA,WAAL,CAAmBA,WAAnB,CACD,C,uGAEgB,CACf,MAAO,MAAKA,WAAL,CACJjF,UADI,GAEJjF,MAFI,CAEG,SAACmK,GAAD,CAAMjF,MAAN,QAAiBiF,IAAG,CAAGjF,MAAM,CAACkF,KAAP,CAAaC,cAAb,EAAvB,EAFH,CAEyD,CAFzD,CAAP,CAGD,C,2DAEkB,CACjB,MAAO,MAAKH,WAAL,CACJjF,UADI,GAEJtE,MAFI,CAEG,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACkF,KAAP,CAAaE,SAAb,EAAb,EAFH,EAGJtK,MAHI,CAGG,SAACmK,GAAD,CAAMjF,MAAN,QAAiBiF,IAAG,CAAGjF,MAAM,CAACkF,KAAP,CAAaG,mBAAb,EAAvB,EAHH,CAG8D,CAH9D,CAAP,CAID,C,yEAEyB,CACxB,MAAO,MAAKF,cAAL,GAAwB,KAAKG,gBAAL,EAA/B,CACD,C,mDAEc,CACb,MAAO,MAAKC,uBAAL,IAAkC,CAAlC,EAAuC,KAAKD,gBAAL,KAA4B,CAA1E,CACD,C,oDAEatF,M,CAAQ,CACpB,MAAOA,OAAM,CAACkF,KAAP,CAAaM,aAAb,EAAP,CACD,C,kDAEYxF,M,CAAQ,CACnB,GAAI,CAACA,MAAM,CAACkF,KAAP,CAAaO,YAAb,EAAL,CAAkC,CAChC,MAAO,MAAP,CACD,CAED,MAAO,MAAKF,uBAAL,IAAkCvF,MAAM,CAACkF,KAAP,CAAaG,mBAAb,EAAzC,CACD,C,4CAESxL,I,CAAM,CACd,KAAKmL,WAAL,CAAiBjF,UAAjB,GAA8BhN,OAA9B,CAAsC,SAACiN,MAAD,CAAY,CAChD,GAAM0F,YAAW,CAAG7L,IAAI,CAACiG,OAAL,CAAa6F,aAAb,CAA2B3F,MAAM,CAAC1E,EAAlC,CAApB,CAEA,GAAIoK,WAAW,CAACR,KAAZ,CAAkBU,cAAlB,IAAsC5F,MAAM,CAACkF,KAAP,CAAaW,QAAb,EAA1C,CAAmE,CACjE7F,MAAM,CAACkF,KAAP,CAAaY,UAAb,GACD,CAED,GAAIJ,WAAW,CAACR,KAAZ,CAAkBa,aAAlB,IAAqC/F,MAAM,CAACkF,KAAP,CAAaE,SAAb,EAAzC,CAAmE,CACjEpF,MAAM,CAACkF,KAAP,CAAac,SAAb,GACD,CACF,CAVD,EAWD,C,yDAEiB,gBAChB,GAAMlG,QAAO,CAAGtS,YAAY,CAAC,KAAKwX,WAAL,CAAiBjF,UAAjB,EAAD,CAA5B,CAEAD,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,CAAY,CAC1B,GAAI,KAAI,CAACwF,aAAL,CAAmBxF,MAAnB,GAA8B,CAAC,KAAI,CAACiG,YAAL,EAAnC,CAAwD,CACtDjG,MAAM,CAACkF,KAAP,CAAaY,UAAb,GACD,CACF,CAJD,EAKD,C,gDAEWxJ,I,CAAM,CAAE,C,yBAGPyI,sEAAf,E;;;;;GCjEMmB,wB,yBACJ,sBAAmC,IAAvBvP,OAAuB,2DAAd,CAAc,IAAXwP,MAAW,2DAAH,CAAG,6DACjC,GACE,CAACC,MAAM,CAACC,SAAP,CAAiB1P,MAAjB,CAAD,EACAyP,MAAM,CAACE,KAAP,CAAa3P,MAAb,CADA,EAEA,CAACyP,MAAM,CAACC,SAAP,CAAiBF,KAAjB,CAFD,EAGAC,MAAM,CAACE,KAAP,CAAaH,KAAb,CAJF,CAKE,CACA,KAAM,IAAIpR,MAAJ,wEAC4D4B,MAD5D,cACuEwP,KADvE,EAAN,CAGD,CACD,KAAKxP,MAAL,CAAcA,MAAd,CACA,GAAI,KAAKA,MAAL,CAAc,CAAlB,CAAqB,CACnB,KAAKA,MAAL,CAAc,CAAd,CACD,CACD,KAAKwP,KAAL,CAAaA,KAAb,CACA,KAAK7K,EAAL,CAAUiL,EAAM,EAAhB,CACA,KAAKC,eAAL,CAAuB,KAAvB,CAEA,KAAKxG,MAAL,CAAc,IAAd,CACA,KAAKyG,GAAL,CAAW,IAAX,CACD,C,uFAEO,CACN,MAAO,MAAKA,GAAZ,CACD,C,4CAESzG,M,CAAQ,CAChB,KAAKA,MAAL,CAAcA,MAAd,CACD,C,+DAEoB,CACnB,KAAKwG,eAAL,CAAuB,IAAvB,CACD,C,6CAEW,CACV,MAAO,CACL7P,MAAM,CAAE,KAAKA,MADR,CAELwP,KAAK,CAAE,KAAKA,KAFP,CAGL7K,EAAE,CAAE,KAAKA,EAHJ,CAILkL,eAAe,CAAE,KAAKA,eAJjB,CAAP,CAMD,C,gDAEW7L,I,CAAM,CAChB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAWiL,EAAM,EAA3B,CACA,KAAK5P,MAAL,CAAcgE,IAAI,CAAChE,MAAL,EAAe,CAA7B,CACA,KAAKwP,KAAL,CAAaxL,IAAI,CAACwL,KAAL,EAAc,CAA3B,CACA,KAAKK,eAAL,CAAuB7L,IAAI,CAAC6L,eAAL,EAAwB,KAA/C,CACA,KAAKC,GAAL,CAAW,KAAX,CAEA,GACE,CAACL,MAAM,CAACC,SAAP,CAAiB,KAAK1P,MAAtB,CAAD,EACAyP,MAAM,CAACE,KAAP,CAAa,KAAK3P,MAAlB,CADA,EAEA,CAACyP,MAAM,CAACC,SAAP,CAAiB,KAAKF,KAAtB,CAFD,EAGAC,MAAM,CAACE,KAAP,CAAa,KAAKH,KAAlB,CAJF,CAKE,CACA,KAAM,IAAIpR,MAAJ,0EAC8D,KAAK4B,MADnE,cAC8E,KAAKwP,KADnF,EAAN,CAGD,CAED,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,MAAKxP,MAAZ,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,2BAGYuP,8EAAf,E;;;;;GC3EMQ,kB,yBACJ,mBAA6B,IAAjBC,SAAiB,2DAAN,IAAM,0DAC3B,KAAKrL,EAAL,CAAUiL,EAAM,EAAhB,CACA,KAAKI,QAAL,CAAgBP,MAAM,CAACC,SAAP,CAAiBM,QAAjB,EAA6BA,QAAQ,CAAG,CAAxC,CAA4C,IAA5D,CACA,KAAKC,cAAL,CAAsB,KAAKD,QAA3B,CACD,C,8FAEY,CACX,MAAO,EAAP,CACD,C,6CAEW,CACV,MAAO,CACLE,SAAS,CAAE,KAAKC,YAAL,EADN,CAELxL,EAAE,CAAE,KAAKA,EAFJ,CAGLqL,QAAQ,CAAE,KAAKA,QAHV,CAILC,cAAc,CAAE,KAAKA,cAJhB,CAAP,CAMD,C,gDAEWjM,I,CAAM,CAChB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,IAArB,CACA,KAAKsL,cAAL,CAAsBjM,IAAI,CAACiM,cAAL,EAAuB,IAA7C,CACA,KAAKD,QAAL,CAAgBhM,IAAI,CAACgM,QAAL,EAAiB,IAAjC,CACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,GAAI,KAAKC,cAAL,GAAwB,IAAxB,EAAgC,KAAKA,cAAL,CAAsB,CAA1D,CAA6D,CAC3D,KAAKA,cAAL,GACD,CACF,C,0CAEQG,Q,CAAU,CACjB,MAAO,MAAP,CACD,C,kDAEYA,Q,CAAU,CACrB,MAAO,MAAP,CACD,C,yCAES,CACR,MAAO,MAAKH,cAAL,GAAwB,CAA/B,CACD,C,iDAEa,CACZ,MAAO,MAAKD,QAAZ,CACD,C,mDAEc,CACb,MAAO,MAAKK,WAAL,CAAiBrO,IAAxB,CACD,C,wBAGY+N,wEAAf,E;;GCtDMO,4B,+FACJ,uBAAYC,eAAZ,CAA6BP,QAA7B,CAAuC,yEACrC,mIAAMA,QAAN,GAEA,MAAKO,eAAL,CAAuBA,eAAvB,CAHqC,aAItC,C,iGAEW,CACV,OAAO,4KAELA,eAAe,CAAE,KAAKA,eAFxB,GAID,C,iDAEsB,IAAXvM,KAAW,2DAAJ,EAAI,CACrB,gIAAkBA,IAAlB,EACA,KAAKuM,eAAL,CAAuBvM,IAAI,CAACuM,eAAL,EAAwB,CAA/C,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAI,KAAKP,QAAT,CAAmB,CACjB,oCAA8B,KAAKO,eAAnC,iBAA0D,KAAKN,cAA/D,WACD,CACD,oCAA8B,KAAKM,eAAnC,EACD,C,+DAEoB,CACnB,MAAO,MAAKA,eAAZ,CACD,C,0CAEQH,Q,CAAU,CACjB,GAAI,EAAEA,QAAQ,WAAYE,cAAtB,CAAJ,CAA0C,CACxC,MAAO,MAAP,CACD,CAED,GAAIF,QAAQ,CAACG,eAAT,GAA6B,KAAKA,eAAtC,CAAuD,CACrD,MAAO,MAAP,CACD,CAED,GAAIH,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,MAAOJ,SAAQ,CAACI,WAAT,IAA0B,KAAKP,cAAtC,CACD,CAED,MAAO,MAAP,CACD,C,kDAEYG,Q,CAAU,CACrB,GAAI,EAAEA,QAAQ,WAAYE,cAAtB,CAAJ,CAA0C,CACxC,MAAO,MAAP,CACD,CAED,GAAIF,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,GAAIJ,QAAQ,CAACG,eAAT,GAA6B,KAAKA,eAAtC,CAAuD,CACrD,MAAO,MAAP,CACD,CAED,MAAOH,SAAQ,CAACI,WAAT,GAAyB,KAAKP,cAArC,CACD,CAED,MAAO,MAAP,CACD,C,2BA9DyBF,kB,EAiEbO,uFAAf,E;;GCjEMG,8B,0GACJ,wBAAYT,QAAZ,CAAsB,CAAC,oMACf,CADc,CACXA,QADW,GAErB,C,wBAH0BM,uB,EAMdG,0FAAf,E;;GCNMC,8B,0GACJ,wBAAYV,QAAZ,CAAsB,CAAC,oMACf,CADc,CACXA,QADW,GAErB,C,wBAH0BM,uB,EAMdI,0FAAf,E;;GCNMC,8B,0GACJ,wBAAYX,QAAZ,CAAsB,CAAC,oMACf,CADc,CACXA,QADW,GAErB,C,wBAH0BM,uB,EAMdK,0FAAf,E;;GCNMC,8B,0GACJ,wBAAYZ,QAAZ,CAAsB,CAAC,oMACf,CADc,CACXA,QADW,GAErB,C,wBAH0BM,uB,EAMdM,0FAAf,E;;GCNMC,0C,sGACJ,8BAAYb,QAAZ,CAAsBc,mBAAtB,CAA2C,gFACzC,0IAAMd,QAAN,GAEA,MAAKc,mBAAL,CAA2BA,mBAA3B,CAHyC,aAI1C,C,wGAEW,CACV,OAAO,mLAELA,mBAAmB,CAAE,KAAKA,mBAF5B,GAID,C,iDAEsB,IAAX9M,KAAW,2DAAJ,EAAI,CACrB,uIAAkBA,IAAlB,EACA,KAAK8M,mBAAL,CAA2B9M,IAAI,CAAC8M,mBAAL,EAA4B,CAAvD,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAI,KAAKd,QAAT,CAAmB,CACjB,2CAAqC,KAAKc,mBAA1C,iBAAqE,KAAKb,cAA1E,WACD,CACD,2CAAqC,KAAKa,mBAA1C,EACD,C,uEAEwB,CACvB,MAAO,MAAKA,mBAAZ,CACD,C,0CAEQV,Q,CAAU,CACjB,GAAI,EAAEA,QAAQ,WAAYS,qBAAtB,CAAJ,CAAiD,CAC/C,MAAO,MAAP,CACD,CAED,GAAIT,QAAQ,CAACU,mBAAT,CAA+B,KAAKA,mBAAxC,CAA6D,CAC3D,MAAO,KAAP,CACD,CAED,GAAIV,QAAQ,CAACU,mBAAT,CAA+B,KAAKA,mBAAxC,CAA6D,CAC3D,MAAO,MAAP,CACD,CAED,GAAIV,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,MAAO,KAAP,CACD,CAED,MAAOJ,SAAQ,CAACI,WAAT,IAA0B,KAAKP,cAAtC,CACD,C,kDAEYG,Q,CAAU,CACrB,GAAI,EAAEA,QAAQ,WAAYS,qBAAtB,CAAJ,CAAiD,CAC/C,MAAO,MAAP,CACD,CAED,GAAIT,QAAQ,CAACU,mBAAT,CAA+B,KAAKA,mBAAxC,CAA6D,CAC3D,MAAO,KAAP,CACD,CAED,GAAIV,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,MAAO,KAAP,CACD,CAED,MAAOJ,SAAQ,CAACI,WAAT,GAAyB,KAAKP,cAArC,CACD,C,kCAlEgCF,kB,EAqEpBc,4GAAf,E;;GCrEME,4B,2aACS,CACX,mCAA6B,KAAKd,cAAlC,WACD,C,0CAEQG,Q,CAAU,CACjB,MACEA,SAAQ,WAAYW,cAApB,EACAX,QAAQ,CAACI,WAAT,IAA0B,KAAKP,cAFjC,CAID,C,kDAEYG,Q,CAAU,CACrB,MACEA,SAAQ,WAAYW,cAApB,EACAX,QAAQ,CAACI,WAAT,GAAyB,KAAKP,cAFhC,CAID,C,2BAjByBF,kB,EAoBbgB,uFAAf,E;;GCpBMC,4C,mdACS,CACX,gEACD,C,0CAEQZ,Q,CAAU,CACjB,MAAOA,SAAQ,WAAYY,sBAA3B,CACD,C,wCAEO3H,M,CAAQ,CACd,MAAOA,OAAM,CAAC+C,IAAP,CAAY6E,qBAAZ,GAAsC,GAA7C,CACD,C,mCAXiClB,kB,EAcrBiB,+GAAf,E;;GCdME,sD,4GACJ,qCAA4C,cAAhCC,eAAgC,2DAAf,GAAe,IAAVnB,SAAU,sHAC1C,gJAAMA,QAAN,GAEA,MAAKmB,cAAL,CAAsBA,cAAtB,CAH0C,aAI3C,C,8GAEW,CACV,OAAO,yLAELA,cAAc,CAAE,KAAKA,cAFvB,GAID,C,iDAEsB,IAAXnN,KAAW,2DAAJ,EAAI,CACrB,6IAAkBA,IAAlB,EACA,KAAKmN,cAAL,CAAsBnN,IAAI,CAACmN,cAAL,EAAuB,GAA7C,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAI,KAAKnB,QAAT,CAAmB,CACjB,6CAAuC,KAAKmB,cAA5C,iBAAkE,KAAKlB,cAAvE,WACD,CACD,6CAAuC,KAAKkB,cAA5C,EACD,C,yDAEiB,CAChB,MAAO,MAAKA,cAAZ,CACD,C,0CAEQf,Q,CAAU,CACjB,GAAI,EAAEA,QAAQ,WAAYc,2BAAtB,CAAJ,CAAuD,CACrD,MAAO,MAAP,CACD,CAED,GAAId,QAAQ,CAACe,cAAT,GAA4B,KAAKA,cAArC,CAAqD,CACnD,MAAO,MAAP,CACD,CAED,GAAIf,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,MAAOJ,SAAQ,CAACI,WAAT,IAA0B,KAAKP,cAAtC,CACD,CAED,MAAO,MAAP,CACD,C,kDAEYG,Q,CAAU,CACrB,GAAI,EAAEA,QAAQ,WAAYc,2BAAtB,CAAJ,CAAuD,CACrD,MAAO,MAAP,CACD,CAED,GAAId,QAAQ,CAACI,WAAT,KAA2B,IAA3B,EAAmC,KAAKA,WAAL,KAAuB,IAA9D,CAAoE,CAClE,GAAIJ,QAAQ,CAACe,cAAT,GAA4B,KAAKA,cAArC,CAAqD,CACnD,MAAO,MAAP,CACD,CAED,MAAOf,SAAQ,CAACI,WAAT,GAAyB,KAAKP,cAArC,CACD,CAED,MAAO,MAAP,CACD,C,wCA9DsCF,kB,EAiE1BmB,8HAAf,E;;;;GC/DME,0B,yBACJ,sBAAY/H,MAAZ,CAAoB,CAAC,6DACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKgI,OAAL,CAAe,EAAf,CACA,KAAKC,SAAL,CAAiB,EAAjB,CACD,C,gGAEW,CACV,MAAO,CACLD,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAWA,MAAK,CAACqB,SAAN,EAAX,EAAjB,CADJ,CAELqL,SAAS,CAAE,KAAKA,SAAL,CAAetU,GAAf,CAAmB,SAAC4H,KAAD,QAAWA,MAAK,CAACqB,SAAN,EAAX,EAAnB,CAFN,CAAP,CAID,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKqN,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAW,IAAI2K,mBAAJ,GAAkBrJ,WAAlB,CAA8BtB,KAA9B,CAAX,EAAjB,CADW,CAEX,EAFJ,CAIA,KAAK0M,SAAL,CAAiBtN,IAAI,CAACsN,SAAL,CACbtN,IAAI,CAACsN,SAAL,CAAetU,GAAf,CAAmB,SAAC4H,KAAD,QACjB,IAAI0M,0BAAS,CAAC1M,KAAK,CAACsL,SAAP,CAAb,GAAiChK,WAAjC,CAA6CtB,KAA7C,CADiB,EAAnB,CADa,CAIb,EAJJ,CAMA,MAAO,KAAP,CACD,C,4CAES2M,M,CAAQ,CAChB,KAAKF,OAAL,CAAa/U,IAAb,CAAkBiV,MAAlB,EACD,C,oDAEa5M,E,CAAI,CAChB,GAAMC,MAAK,CAAG,KAAKyM,OAAL,CAAaG,IAAb,CAAkB,SAACD,MAAD,QAAYA,OAAM,CAAC5M,EAAP,GAAcA,EAA1B,EAAlB,CAAd,CAEA,GAAIC,KAAJ,CAAW,CACTA,KAAK,CAAC6M,SAAN,CAAgB,KAAKpI,MAArB,EACD,CAED,MAAOzE,MAAP,CACD,C,gDAEWwL,Q,CAAU,CACpB,KAAKkB,SAAL,CAAehV,IAAf,CAAoB8T,QAApB,EACD,C,sDAEcA,Q,CAAU,CACvB,KAAKkB,SAAL,CAAiB,KAAKA,SAAL,CAAexM,MAAf,CACf,SAAC4M,GAAD,QAAS,CAACA,GAAG,CAACC,YAAJ,CAAiBvB,QAAjB,CAAV,EADe,CAAjB,CAGD,C,gDAEWrO,M,CAAQ,CAClB,OAAQ,MAAOA,OAAf,EACE,IAAK,QAAL,CACE,MAAO,MAAKuP,SAAL,CAAe/S,IAAf,CACL,SAACqT,IAAD,QAAUA,KAAI,CAACvB,WAAL,GAAqBtO,MAAM,CAACsO,WAAtC,EADK,CAAP,CAGF,IAAK,UAAL,CACE,MAAO,MAAKiB,SAAL,CAAe/S,IAAf,CAAoB,SAACqT,IAAD,QAAUA,KAAI,WAAY7P,OAA1B,EAApB,CAAP,CAEF,IAAK,QAAL,CACE,MAAO,MAAKuP,SAAL,CAAe/S,IAAf,CAAoB,SAACqT,IAAD,QAAUA,KAAI,CAACvB,WAAL,CAAiBrO,IAAjB,GAA0BD,MAApC,EAApB,CAAP,CATJ,CAWD,C,mDAEc,CACb,MAAO,MAAKuP,SAAZ,CACD,C,uDAEgB,CACf,MAAO,MAAKA,SAAL,CAAene,MAAf,CAAwB,CAA/B,CACD,C,uDAEgB,CACf,GAAMoe,OAAM,CAAG,KAAKF,OAAL,CAAalN,MAAb,CACb,SAACmK,GAAD,CAAM1J,KAAN,QAAgB0J,IAAG,CAAG1J,KAAK,CAACiN,SAAN,EAAtB,EADa,CAEb,CAFa,CAAf,CAKA,GAAIN,MAAM,CAAG,KAAKlI,MAAL,CAAYyI,SAAzB,CAAoC,CAClC,MAAO,MAAKzI,MAAL,CAAYyI,SAAnB,CACD,CAED,MAAOP,OAAP,CACD,C,iEAEqB,CACpB,MAAO,GAAI,KAAKQ,cAAL,GAAwB,KAAK1I,MAAL,CAAYyI,SAA/C,CACD,C,mDAEc,CACb,MAAO,MAAKT,OAAL,CACJvM,MADI,CACG,SAACF,KAAD,QAAWA,MAAK,CAACkL,GAAjB,EADH,EAEJ3L,MAFI,CAEG,SAACmK,GAAD,CAAM1J,KAAN,QAAgB0J,IAAG,CAAG1J,KAAK,CAACiN,SAAN,EAAtB,EAFH,CAE4C,CAF5C,CAAP,CAGD,C,iDAEa,CACZ,MAAO,MAAKE,cAAL,IAAyB,KAAK1I,MAAL,CAAYyI,SAA5C,CACD,C,iDAEa,gBACZ,KAAKT,OAAL,CAAe,KAAKA,OAAL,CACZrU,GADY,CACR,SAAC4H,KAAD,QAAWA,MAAK,CAACoN,WAAN,EAAX,EADQ,EAEZlN,MAFY,CAELmN,OAFK,CAAf,CAGA,KAAKX,SAAL,CAAelV,OAAf,CAAuB,SAACgU,QAAD,QAAcA,SAAQ,CAAC4B,WAAT,EAAd,EAAvB,EACA,KAAKV,SAAL,CAAiB,KAAKA,SAAL,CAAexM,MAAf,CACf,SAACsL,QAAD,QAAc,CAACA,QAAQ,CAAC8B,OAAT,CAAiB,KAAI,CAAC7I,MAAtB,CAAf,EADe,CAAjB,CAGD,C,4BAGY+H,iFAAf,E;;ACpHA,GAAMe,mBAAkB,CAAG,SAA3B,CACA,GAAMC,iBAAgB,CAAG,OAAzB,CACA,GAAMC,sBAAqB,CAAG,YAA9B,CACA,GAAMC,qBAAoB,CAAG,WAA7B,C,GAEMC,sB,yBACJ,oBAAYC,SAAZ,CAAmC,IAAZxS,OAAY,2DAAH,CAAG,4DACjC,KAAKsD,IAAL,CAAYkP,SAAZ,CACA,KAAKxS,MAAL,CAAcA,MAAd,CACD,C,8FAEW,CACV,MAAO,MAAKsD,IAAL,GAAc6O,kBAArB,CACD,C,uDAEgB,CACf,MAAO,MAAK7O,IAAL,GAAc+O,qBAArB,CACD,C,qDAEe,CACd,MAAO,MAAK/O,IAAL,GAAcgP,oBAArB,CACD,C,yCAES,CACR,MAAO,MAAKhP,IAAL,GAAc8O,gBAArB,CACD,C,6CAEW,CACV,MAAO,MAAKpS,MAAZ,CACD,C,4CAESA,M,CAAQ,CAChB,KAAKA,MAAL,CAAcA,MAAd,CACD,C,6CAEW,CACV,MAAO,CACLsD,IAAI,CAAE,KAAKA,IADN,CAELtD,MAAM,CAAE,KAAKA,MAFR,CAAP,CAID,C,gDAEWgE,I,CAAM,CAChB,KAAKV,IAAL,CAAYU,IAAI,CAACV,IAAjB,CACA,KAAKtD,MAAL,CAAcgE,IAAI,CAAChE,MAAL,EAAe,CAA7B,CAEA,MAAO,KAAP,CACD,C,0BAUYuS,2EAAf,E;;GClDME,wB,yBACJ,qBAAYpJ,MAAZ,CAAoB,CAAC,4DACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKgI,OAAL,CAAe,EAAf,CACD,C,+FAEW,CACV,MAAO,CACLA,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAWA,MAAK,CAACqB,SAAN,EAAX,EAAjB,CADJ,CAAP,CAGD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKqN,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAW,IAAI2N,kBAAJ,GAAiBrM,WAAjB,CAA6BtB,KAA7B,CAAX,EAAjB,CADW,CAEX,EAFJ,CAIA,MAAO,KAAP,CACD,C,6CAEW,CACV,GAAI,KAAKyE,MAAL,CAAYwD,WAAZ,EAAJ,CAA+B,CAC7B,MAAO,MAAP,CACD,CAED,MACE,CAAC,KAAKwE,OAAL,CAAa9S,IAAb,CAAkB,SAACqG,KAAD,QAAWA,MAAK,CAAC6J,SAAN,EAAX,EAAlB,GACC,KAAKQ,cAAL,EADF,GAEA,CAAC,KAAKG,aAAL,EAHH,CAKD,C,2CAEU,CACT,MAAO,CAAC,KAAKX,SAAL,EAAR,CACD,C,qDAEe,CACd,MAAO,MAAK4C,OAAL,CAAa9S,IAAb,CAAkB,SAACqG,KAAD,QAAWA,MAAK,CAACwK,aAAN,EAAX,EAAlB,CAAP,CACD,C,uDAEgB,CACf,MAAO,MAAKiC,OAAL,CAAa9S,IAAb,CAAkB,SAACqG,KAAD,QAAWA,MAAK,CAACqK,cAAN,EAAX,EAAlB,CAAP,CACD,C,mDAEc,CACb,GAAI,KAAKR,SAAL,IAAoB,CAAC,KAAKI,aAAL,EAAzB,CAA+C,CAC7C,OACD,CAED,KAAKwC,OAAL,CAAe,KAAKA,OAAL,CAAavM,MAAb,CACb,SAACF,KAAD,QAAWA,MAAK,CAACtB,IAAN,GAAegP,oBAA1B,EADa,CAAf,CAIA,KAAKjB,OAAL,CAAa/U,IAAb,CAAkB,GAAIiW,kBAAJ,CAAeF,qBAAf,CAAlB,EACD,C,+CAEY,CACX,KAAKK,YAAL,GACA,KAAKrJ,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,EACD,C,qDAEe,CACd,MACE,CAAC,KAAKmF,SAAL,EAAD,EAAqB,KAAKpF,MAAL,CAAYC,WAAZ,CAAwB,eAAxB,CAAyC,IAAzC,CAA+C,KAA/C,CADvB,CAGD,C,mDAEc,CACb,GAAI,KAAKD,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,CAA2C,IAA3C,CAAiD,KAAjD,CAAJ,CAA6D,CAC3D,MAAO,MAAP,CACD,CAED,MACE,MAAKmF,SAAL,IAAoB,KAAKpF,MAAL,CAAYC,WAAZ,CAAwB,cAAxB,CAAwC,IAAxC,CAA8C,KAA9C,CADtB,CAGD,C,6CAEW,CACV,GAAI,CAAC,KAAKmF,SAAL,EAAL,CAAuB,CACrB,OACD,CAED,KAAK4C,OAAL,CAAe,KAAKA,OAAL,CAAavM,MAAb,CACb,SAACF,KAAD,QAAWA,MAAK,CAACtB,IAAN,GAAe+O,qBAA1B,EADa,CAAf,CAIA,KAAKhB,OAAL,CAAa/U,IAAb,CAAkB,GAAIiW,kBAAJ,CAAeD,oBAAf,CAAlB,EACA,KAAKjJ,MAAL,CAAYC,WAAZ,CAAwB,gBAAxB,EACD,C,uDAEgB,CACf,MAAO,MAAKD,MAAL,CAAYC,WAAZ,CAAwB,gBAAxB,CAA0C,IAA1C,CAAgD,CAAhD,CAAP,CACD,C,iEAEqB,CACpB,MAAO,MAAKD,MAAL,CAAYC,WAAZ,CAAwB,qBAAxB,CAA+C,IAA/C,CAAqD,CAArD,CAAP,CACD,C,iDAEa,CACZ,GAAI,KAAKmF,SAAL,EAAJ,CAAsB,CACpB,KAAK4C,OAAL,CAAe,CAAC,GAAIkB,kBAAJ,CAAeJ,kBAAf,CAAD,CAAf,CACD,CAFD,IAEO,CACL,KAAKd,OAAL,CAAe,EAAf,CACD,CACF,C,2BAGYoB,8EAAf,E;;GClHME,sB,yBACJ,oBAAYtJ,MAAZ,CAAoB,CAAC,2DACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAK+C,IAAL,CAAY,CAAZ,CACA,KAAKwG,QAAL,CAAgB,CAAhB,CAEA,KAAKC,wBAAL,CAAgC,GAAhC,CACA,KAAKC,yBAAL,CAAiC,CAAjC,CAEA,KAAKC,qBAAL,CAA6B,GAA7B,CAEA,KAAKC,eAAL,CAAuB,CAAvB,CACD,C,8FAEW,CACV,MAAO,CACL5G,IAAI,CAAE,KAAKA,IADN,CAELwG,QAAQ,CAAE,KAAKA,QAFV,CAAP,CAID,C,iDAEsB,IAAX5O,KAAW,2DAAJ,EAAI,CACrB,KAAKoI,IAAL,CAAYpI,IAAI,CAACoI,IAAL,EAAa,CAAzB,CACA,KAAKwG,QAAL,CAAgB5O,IAAI,CAAC4O,QAAL,EAAiB,CAAjC,CAEA,MAAO,KAAP,CACD,C,iFAE6B,CAC5B,MACE,MAAKvJ,MAAL,CAAYC,WAAZ,CAAwB,6BAAxB,CAAuD,IAAvD,CAA6D,CAA7D,EACA,KAAKuJ,wBAFP,CAID,C,yCAES,CACR,MAAO,MAAKzG,IAAZ,CACD,C,+DAEoB,CACnB,GAAI,KAAK6G,aAAL,EAAJ,CAA0B,CACxB,MAAO,EAAP,CACD,CAED,MAAO,MAAK5J,MAAL,CAAYyI,SAAZ,CAAwB,KAAKoB,2BAAL,EAA/B,CACD,C,2EAE0B,CACzB,MACE,MAAK7J,MAAL,CAAYC,WAAZ,CAAwB,0BAAxB,CAAoD,IAApD,CAA0D,CAA1D,GACA,KAAKyJ,qBAFP,CAID,C,iEAEqB,CACpB,GAAMI,MAAK,CAAG,KAAKC,wBAAL,EAAd,CACA,GAAMR,SAAQ,CAAG,KAAKA,QAAL,CAAgB,CAAhB,CAAoB,KAAKA,QAAzB,CAAoC,CAArD,CACA,GAAMS,UAAS,CAAGT,QAAQ,CAAGO,KAA7B,CACA,GAAIE,SAAS,CAAGF,KAAhB,CAAuB,CACrB,GAAIA,KAAK,CAAGP,QAAZ,CAAsB,CACpB,MAAOA,SAAP,CACD,CACD,MAAOO,MAAP,CACD,CAED,MAAOE,UAAP,CACD,C,yDAEiB,CAChB,GAAMhV,IAAG,CAAG,KAAKiV,kBAAL,GAA4B,KAAKN,eAA7C,CAEA,GAAI3U,GAAG,EAAI,CAAX,CAAc,CACZ,MAAO,EAAP,CACD,CAED,GAAIA,GAAG,CAAG,KAAK+N,IAAf,CAAqB,CACnB,GAAImH,iBAAgB,CAAGlV,GAAG,CAAG,KAAK+N,IAAlC,CAEA,GAAImH,gBAAgB,CAAG,KAAKC,mBAAL,EAAvB,CAAmD,CACjDD,gBAAgB,CAAG,KAAKC,mBAAL,EAAnB,CACD,CAED,MAAO,MAAKpH,IAAL,CAAYmH,gBAAnB,CACD,CAED,MAAOlV,IAAP,CACD,C,2DAEkB,CACjB,MAAO,MAAKgL,MAAL,CAAYC,WAAZ,CAAwB,kBAAxB,CAA4C,IAA5C,CAAkD,CAAlD,CAAP,CACD,C,iEAEqB,CACpB,MAAO,MAAKmK,OAAL,GAAiB,KAAKpK,MAAL,CAAYyI,SAApC,CACD,C,6DAEmB,CAClB,MACE,MAAKzI,MAAL,CAAYC,WAAZ,CAAwB,eAAxB,CAAyC,IAAzC,CAA+C,KAA/C,GACA,KAAK2J,aAAL,EAFF,CAID,C,6DAEmB,CAClB,GAAI,KAAKA,aAAL,IAAwB,KAAK5J,MAAL,CAAYwD,WAAZ,EAA5B,CAAuD,CACrD,MAAO,CACL+F,QAAQ,CAAE,CADL,CAELc,OAAO,CAAE,CAFJ,CAGL5I,kBAAkB,CAAE,CAHf,CAIL6I,OAAO,CAAE,CAJJ,CAKLC,iBAAiB,CAAE,CALd,CAMLC,gCAAgC,CAAE,CAN7B,CAAP,CAQD,CAED,GAAMH,QAAO,CAAG,KAAKI,gBAAL,EAAhB,CACA,GAAM1H,KAAI,CAAG,KAAKA,IAAL,CAAYsH,OAAzB,CACA,GAAMC,QAAO,CAAG,KAAKL,kBAAL,EAAhB,CACA,GAAMS,UAAS,CAAG3H,IAAI,EAAIuH,OAAR,CAAkBvH,IAAI,CAAGuH,OAAzB,CAAmC,CAArD,CAEA,GAAMK,YAAW,CAAGL,OAAO,CAAGvH,IAAV,CAAiBA,IAAjB,CAAwBuH,OAA5C,CAEA,GAAMM,mBAAkB,CACtBD,WAAW,CAAGL,OAAd,CAAwBA,OAAO,CAAGK,WAAlC,CAAgD,CADlD,CAGA,GAAME,gBAAe,CACnBD,kBAAkB,CAAG,KAAKrB,QAAL,CAAgB,KAAKQ,wBAAL,EAArC,CACI,KAAKR,QAAL,CAAgB,KAAKQ,wBAAL,EADpB,CAEIa,kBAHN,CAKA,GAAME,kBAAiB,CAAG,KAAKvB,QAAL,CAAgBmB,SAA1C,CAEA,GAAMK,sBAAqB,CACzBF,eAAe,EAAIC,iBAAnB,CACID,eADJ,CAEIC,iBAHN,CAKA,GAAMvB,SAAQ,CAAGuB,iBAAiB,CAAGC,qBAArC,CAEA,GAAMP,iCAAgC,CAAG,KAAKT,wBAAL,EAAzC,CAEA,MAAO,CACLR,QAAQ,CAARA,QADK,CAELc,OAAO,CAAPA,OAFK,CAGL5I,kBAAkB,CAAE8H,QAAQ,CAAG,KAAKyB,mBAAL,EAH1B,CAILV,OAAO,CAAEK,WAAW,CAAGI,qBAJlB,CAKLE,UAAU,CAAE,KAAKhB,kBAAL,EALP,CAMLtI,cAAc,CAAE,CAACgJ,WAAW,CAAGI,qBAAf,EAAwCT,OANnD,CAOLC,iBAAiB,CAAE,KAAKS,mBAAL,EAPd,CAQLR,gCAAgC,CAAhCA,gCARK,CAAP,CAUD,C,mDAEc,CACb,GAAMH,QAAO,CAAG,KAAKI,gBAAL,EAAhB,CACA,KAAK1H,IAAL,EAAasH,OAAb,CACA,MAAOA,QAAP,CACD,C,qDAEe,CACd,MAAO,MAAKrK,MAAL,CAAYC,WAAZ,CAAwB,cAAxB,CAAwC,IAAxC,CAA8C,KAA9C,CAAP,CACD,C,yEAEyB,CACxB,MAAO,MAAKD,MAAL,CAAYC,WAAZ,CAAwB,oBAAxB,CAA8C,IAA9C,CAAoD,CAApD,CAAP,CACD,C,mEAEsB,CACrB,GAAMgB,SAAQ,CAAG,KAAKiK,uBAAL,GAAiC,KAAKnI,IAAvD,CAEA,GAAI9B,QAAQ,EAAI,CAAhB,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,MAAOA,SAAP,CACD,C,8CAEUkK,M,CAAQ,CACjB,GAAIA,MAAM,CAAG,CAAb,CAAgB,CACd,GAAIA,MAAM,CAAG,KAAKpI,IAAlB,CAAwB,CACtB,KAAKwG,QAAL,EAAiB4B,MAAM,CAAG,KAAKpI,IAA/B,CACA,KAAKA,IAAL,CAAY,CAAZ,CACD,CAHD,IAGO,CACL,KAAKA,IAAL,EAAaoI,MAAb,CACD,CAED,KAAKxB,eAAL,EAAwB9gB,IAAI,CAACwE,GAAL,CAAS8d,MAAT,CAAxB,CACD,CATD,IASO,CACL,KAAKpI,IAAL,EAAaoI,MAAb,CACD,CACD,MAAO,KAAP,CACD,C,yDAEiB,CAChB,GAAI,KAAKvB,aAAL,EAAJ,CAA0B,CACxB,OACD,CAED,KAAKL,QAAL,EAAiB,KAAKxG,IAAtB,CACA,KAAKA,IAAL,CAAY,CAAZ,CACD,C,iDAEa,CACZ,GAAI,KAAK6G,aAAL,EAAJ,CAA0B,CACxB,MAAO,EAAP,CACD,CAED,MAAO,MAAKL,QAAZ,CACD,C,iEAEqB,CACpB,MAAO,MAAKvJ,MAAL,CAAYyI,SAAZ,CAAwB,KAAKgB,yBAApC,CACD,C,qEAEgC,IAAX2B,MAAW,2DAAH,CAAG,CAC/B,GAAI,KAAKxB,aAAL,EAAJ,CAA0B,CACxB,MAAO,EAAP,CACD,CAED,MAAO,CAAC,KAAKL,QAAL,CAAgB6B,KAAjB,EAA0B,KAAKJ,mBAAL,EAAjC,CACD,C,uEAEwB,CACvB,MAAO,MAAKhL,MAAL,CAAYC,WAAZ,CAAwB,0BAAxB,CAAoD,IAApD,CAA0D,CAA1D,CAAP,CACD,C,gDAEW8C,I,CAAM,CAChB,MAAO,MAAK/C,MAAL,CAAYC,WAAZ,CAAwB,aAAxB,CAAuC8C,IAAvC,CAAP,CACD,C,iDAEa,CACZ,KAAK4G,eAAL,CAAuB,CAAvB,CACD,C,0BAGYL,2EAAf,E;;GC3OM+B,sC,yBACJ,4BAAYrL,MAAZ,CAAoB,CAAC,mEACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAK1D,IAAL,CAAY,IAAZ,CAEA,KAAKgP,QAAL,CAAgB,EAAhB,CACD,C,iGAEOhP,I,CAAM,CACZ,KAAKA,IAAL,CAAYA,IAAZ,CACD,C,8CAEU2F,O,CAAS,CAClB,KAAKqJ,QAAL,CAAcrY,IAAd,CAAmBgP,OAAnB,EACD,C,+CAEY,CACX,MAAO,MAAKqJ,QAAZ,CACD,C,uCAEQ,CACP,MAAO,MAAKhP,IAAL,GAAc,IAArB,CACD,C,sCAEMA,I,CAAM,CACX,MAAO,MAAKA,IAAL,GAAcA,IAArB,CACD,C,6CAEW,CACV,MAAO,CACLuK,SAAS,CAAE,KAAKG,WAAL,CAAiBrO,IADvB,CAEL2S,QAAQ,CAAE,KAAKA,QAFV,CAGLhP,IAAI,CAAE,KAAKA,IAHN,CAAP,CAKD,C,iDAEsB,IAAX3B,KAAW,2DAAJ,EAAI,CACrB,KAAK2B,IAAL,CAAY3B,IAAI,CAAC2B,IAAL,EAAa,IAAzB,CACA,KAAKgP,QAAL,CAAgB3Q,IAAI,CAAC2Q,QAAL,EAAiB,EAAjC,CAEA,MAAO,KAAP,CACD,C,kCAGYD,0GAAf,E;;AC5CO,GAAME,aAAY,CAAG,QAAfA,aAAe,CAAC/V,MAAD,CAAY,CACtC,GAAKA,MAAM,CAAG,EAAV,CAAgB,CAAhB,CAAoB,CAAxB,CAA2B,CACzB,MAAOA,OAAM,CAACE,OAAP,CAAe,CAAf,CAAP,CACD,CAED,GAAIF,MAAM,CAAG,CAAT,CAAa,CAAjB,CAAoB,CAClB,MAAOA,OAAM,CAACE,OAAP,CAAe,CAAf,CAAP,CACD,CACD,MAAOF,OAAP,CACD,CATM,C;;GCGDgW,8C,4HACJ,gCAAYxL,MAAZ,CAAoB,kFAClB,4IAAMA,MAAN,GAEA,MAAKyL,eAAL,CAAuB,CAAvB,CACA,MAAKC,yBAAL,CAAiC,CAAjC,CACA,MAAKC,aAAL,CAAqB,CAArB,CACA,MAAKC,UAAL,CAAkB,CAAlB,CACA,MAAKC,YAAL,CAAoB,CAApB,CACA,MAAKtC,QAAL,CAAgB,CAAhB,CACA,MAAK9H,kBAAL,CAA0B,CAA1B,CACA,MAAKqK,eAAL,CAAuB,CAAvB,CACA,MAAKC,gBAAL,CAAwB,CAAxB,CACA,MAAKC,aAAL,CAAqB,CAArB,CACA,MAAKC,oBAAL,CAA4B,CAA5B,CAbkB,aAcnB,C,6HAEmBlJ,I,CAAM,CACxB,KAAKgJ,gBAAL,CAAwBhJ,IAAxB,CACD,C,0DAEgBpM,M,CAAQ,CACvB,KAAKqV,aAAL,EAAsBrV,MAAtB,CACD,C,wEAEuBA,M,CAAQ,CAC9B,KAAKsV,oBAAL,EAA6BtV,MAA7B,CACD,C,8DAEkBoM,I,CAAM7X,U,CAAY,CACnC,KAAKugB,eAAL,CAAuB1I,IAAvB,CACA,KAAK2I,yBAAL,CAAiCxgB,UAAjC,CACD,C,0DAEgB6X,I,CAAM,CACrB,KAAK4I,aAAL,CAAqB5I,IAArB,CACD,C,sDAEcA,I,CAAM7X,U,CAAY,CAC/B,KAAKqe,QAAL,CAAgBxG,IAAhB,CACA,KAAKtB,kBAAL,CAA0BvW,UAA1B,CAEA,KAAK0gB,UAAL,CAAkB,KAAKD,aAAL,CAAqB,KAAKF,eAA1B,CAA4C,KAAKlC,QAAnE,CACD,C,wDAEexG,I,CAAM,CACpB,KAAK8I,YAAL,CAAoB9I,IAApB,CACD,C,2DAEkB,CACjB,KAAK+I,eAAL,CAAuB,IAAvB,CACD,C,6CAEW,CACV,OAAO,qLAELL,eAAe,CAAE,KAAKA,eAFxB,CAGEC,yBAAyB,CAAE,KAAKA,yBAHlC,CAIEC,aAAa,CAAE,KAAKA,aAJtB,CAKEC,UAAU,CAAE,KAAKA,UALnB,CAMEC,YAAY,CAAE,KAAKA,YANrB,CAOEtC,QAAQ,CAAE,KAAKA,QAPjB,CAQE9H,kBAAkB,CAAE,KAAKA,kBAR3B,CASEqK,eAAe,CAAE,KAAKA,eATxB,CAUEC,gBAAgB,CAAE,KAAKA,gBAVzB,CAWEC,aAAa,CAAE,KAAKA,aAXtB,CAYEC,oBAAoB,CAAE,KAAKA,oBAZ7B,GAcD,C,iDAEsB,IAAXtR,KAAW,2DAAJ,EAAI,CACrB,yIAAkBA,IAAlB,EACA,KAAK8Q,eAAL,CAAuB9Q,IAAI,CAAC8Q,eAAL,EAAwB,CAA/C,CACA,KAAKC,yBAAL,CAAiC/Q,IAAI,CAAC+Q,yBAAL,EAAkC,CAAnE,CACA,KAAKC,aAAL,CAAqBhR,IAAI,CAACgR,aAAL,EAAsB,CAA3C,CACA,KAAKC,UAAL,CAAkBjR,IAAI,CAACiR,UAAL,EAAmB,CAArC,CACA,KAAKC,YAAL,CAAoBlR,IAAI,CAACkR,YAAL,EAAqB,CAAzC,CACA,KAAKtC,QAAL,CAAgB5O,IAAI,CAAC4O,QAAL,EAAiB,CAAjC,CACA,KAAK9H,kBAAL,CAA0B9G,IAAI,CAAC8G,kBAAL,EAA2B,CAArD,CACA,KAAKqK,eAAL,CAAuBnR,IAAI,CAACmR,eAAL,EAAwB,CAA/C,CACA,KAAKC,gBAAL,CAAwBpR,IAAI,CAACoR,gBAAL,EAAyB,CAAjD,CACA,KAAKC,aAAL,CAAqBrR,IAAI,CAACqR,aAAL,EAAsB,CAA3C,CACA,KAAKC,oBAAL,CAA4BtR,IAAI,CAACsR,oBAAL,EAA6B,CAAzD,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAIX,SAAQ,CAAG,EAAf,CAEA,GAAMY,WAAU,CAAG,KAAKlM,MAAL,CAAYC,WAAZ,CAAwB,YAAxB,CAAsC,IAAtC,CAA4C,KAA5C,CAAnB,CACA,GAAMkM,UAAS,CAAG,KAAKnM,MAAL,CAAY+C,IAAZ,CAAiB6G,aAAjB,EAAlB,CAEA,GAAIuC,SAAJ,CAAe,CACbb,QAAQ,wDAAOA,QAAP,+CAAoB,KAAKc,qBAAL,EAApB,EAAR,CACD,CAED,GAAIF,UAAJ,CAAgB,CACdZ,QAAQ,wDAAOA,QAAP,+CAAoB,KAAKe,kBAAL,EAApB,EAAR,CACD,CAED,GAAI,CAACH,UAAD,EAAe,CAACC,SAApB,CAA+B,CAC7Bb,QAAQ,wDAAOA,QAAP,+CAAoB,KAAKgB,iBAAL,EAApB,EAAR,CACD,CAED,MAAOhB,SAAP,CACD,C,+DAEoB,CACnB,GAAI,KAAKO,YAAT,CAAuB,CACrB,MAAO,oBAAaN,YAAY,CAAC,KAAKM,YAAN,CAAzB,oBAAP,CACD,CAED,MAAO,EAAP,CACD,C,qEAEuB,CACtB,GAAMP,SAAQ,CAAG,EAAjB,CAEA,GAAI,KAAKW,oBAAL,EAA6B,KAAKD,aAAtC,CAAqD,CACnDV,QAAQ,CAACrY,IAAT,iBACWsY,YAAY,CACnB,KAAKS,aADc,CADvB,uCAGiCT,YAAY,CACzC,KAAKU,oBADoC,CAH7C,kCAOD,CAEDX,QAAQ,CAACrY,IAAT,kBACYsY,YAAY,CACpB,KAAKQ,gBAAL,CAAwB,KAAKC,aAA7B,CAA6C,KAAKC,oBAD9B,CADxB,qBAMA,MAAOX,SAAP,CACD,C,6DAEmB,CAClB,GAAMA,SAAQ,CAAG,EAAjB,CAEA,GAAI,KAAKK,aAAL,EAAsB,KAAKC,UAA/B,CAA2C,CACzCN,QAAQ,CAACrY,IAAT,iBACWsY,YAAY,CAAC,KAAKI,aAAN,CADvB,wBAC0DJ,YAAY,CAClE,KAAKK,UAD6D,CADtE,qBAKD,CAED,GAAIW,YAAW,mCAA8BhB,YAAY,CAAC,KAAKhC,QAAN,CAA1C,KAAf,CAEA+B,QAAQ,CAACrY,IAAT,GAEA,GAAI,KAAKsW,QAAT,CAAmB,CACjBgD,WAAW,yBAAoB1jB,IAAI,CAAC6D,KAAL,CAC7B,KAAK+U,kBAAL,CAA0B,GADG,CAApB,MAAX,CAGD,CAED6J,QAAQ,CAACrY,IAAT,CAAcsZ,WAAd,EACA,GAAI,KAAKT,eAAT,CAA0B,CACxBR,QAAQ,CAACrY,IAAT,2DACD,CAED,MAAOqY,SAAP,CACD,C,oCArKkCD,gC,EAwKtBG,sHAAf,E;;GCzKMgB,4D,mIACJ,uCAAYxM,MAAZ,CAAoB,yFAClB,mJAAMA,MAAN,GAEA,MAAKyM,eAAL,CAAuB,CAAvB,CACA,MAAKC,cAAL,CAAsB,CAAtB,CACA,MAAKC,eAAL,CAAuB,CAAvB,CACA,MAAKC,eAAL,CAAuB,EAAvB,CACA,MAAKC,WAAL,CAAmB,CAAnB,CAPkB,aAQnB,C,0HAEclW,M,CAAQ,CACrB,KAAKkW,WAAL,CAAmBlW,MAAnB,CACD,C,8DAEkBuR,M,CAAQ,CACzB,KAAKuE,eAAL,CAAuBvE,MAAvB,CACD,C,8DAEkBA,M,CAAQ,CACzB,KAAKyE,eAAL,CAAuBzE,MAAvB,CACD,C,4DAEiBvR,M,CAAQ,CACxB,KAAK+V,cAAL,EAAuB/V,MAAvB,CACD,C,8DAEkBsL,O,CAAS,CAC1B,KAAK2K,eAAL,CAAuB3K,OAAvB,CACD,C,6CAEW,CACV,OAAO,4LAELwK,eAAe,CAAE,KAAKA,eAFxB,CAGEC,cAAc,CAAE,KAAKA,cAHvB,CAIEC,eAAe,CAAE,KAAKA,eAJxB,CAKEC,eAAe,CAAE,KAAKA,eALxB,CAMEC,WAAW,CAAE,KAAKA,WANpB,GAQD,C,iDAEsB,IAAXlS,KAAW,2DAAJ,EAAI,CACrB,gJAAkBA,IAAlB,EACA,KAAK8R,eAAL,CAAuB9R,IAAI,CAAC8R,eAAL,EAAwB,CAA/C,CACA,KAAKC,cAAL,CAAsB/R,IAAI,CAAC+R,cAAL,EAAuB,CAA7C,CACA,KAAKC,eAAL,CAAuBhS,IAAI,CAACgS,eAAL,EAAwB,CAA/C,CACA,KAAKC,eAAL,CAAuBjS,IAAI,CAACiS,eAAL,EAAwB,EAA/C,CACA,KAAKC,WAAL,CAAmBlS,IAAI,CAACkS,WAAL,EAAoB,CAAvC,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAMvB,SAAQ,CAAG,0DAEK,KAAKqB,eAFV,mBAGb,KAAKF,eAHQ,wBAIA,KAAKC,cAJL,sBAKb,KAAKG,WALQ,qBAMH,KAAKF,eAAL,CACV,KAAKF,eADK,CAEV,KAAKC,cAFK,CAGV,KAAKG,WATQ,EAAjB,CAYA,GAAI,KAAKD,eAAT,CAA0B,CACxBtB,QAAQ,CAACrY,IAAT,0BACAqY,QAAQ,CAACrY,IAAT,aAAkB,KAAK2Z,eAAvB,QACD,CAED,MAAOtB,SAAP,CACD,C,2CAxEyCD,gC,EA2E7BmB,2IAAf,E;;GC3EMM,kD,8HACJ,kCAAY9M,MAAZ,CAAoB,oFAClB,8IAAMA,MAAN,GAEA,MAAKkI,MAAL,CAAc,CAAd,CACA,MAAK6E,cAAL,CAAsB,CAAtB,CACA,MAAKC,YAAL,CAAoB,KAApB,CALkB,aAMnB,C,2GAESC,W,CAAa,CACrB,KAAK/E,MAAL,EAAe+E,WAAW,CAACtW,MAA3B,CACA,KAAKoW,cAAL,EAAuBE,WAAW,CAAC9G,KAAnC,CACA,GAAI8G,WAAW,CAACzG,eAAhB,CAAiC,CAC/B,KAAKwG,YAAL,CAAoB,IAApB,CACD,CACF,C,6CAEW,CACV,OAAO,uLAELD,cAAc,CAAE,KAAKA,cAFvB,CAGE7E,MAAM,CAAE,KAAKA,MAHf,CAIE8E,YAAY,CAAE,KAAKA,YAJrB,GAMD,C,iDAEsB,IAAXrS,KAAW,2DAAJ,EAAI,CACrB,2IAAkBA,IAAlB,EACA,KAAKoS,cAAL,CAAsBpS,IAAI,CAACoS,cAAL,EAAuB,CAA7C,CACA,KAAK7E,MAAL,CAAcvN,IAAI,CAACuN,MAAL,EAAe,CAA7B,CACA,KAAK8E,YAAL,CAAoBrS,IAAI,CAACqS,YAAL,EAAqB,KAAzC,CAEA,MAAO,KAAP,CACD,C,+CAEY,CACX,GAAM1B,SAAQ,CAAG,oBACH,KAAKpD,MADF,4CAC2C,KAAKgF,iBADhD,aAAjB,CAIA,GAAI,KAAKF,YAAT,CAAuB,CACrB1B,QAAQ,CAACrY,IAAT,yBACD,CAED,MAAOqY,SAAP,CACD,C,sCA7CoCD,gC,EAgDxByB,4HAAf,E;;AC7CO,GAAMK,sBAAqB,CAAG,CACnC9B,kBAAkB,CAAlBA,gCADmC,CAEnCG,sBAAsB,CAAtBA,oCAFmC,CAGnCgB,6BAA6B,CAA7BA,2CAHmC,CAInCM,wBAAwB,CAAxBA,sCAJmC,CAA9B,C;;GCFDM,4B,yBACJ,uBAAYpN,MAAZ,CAAoB,CAAC,8DACnB,KAAKA,MAAL,CAAcA,MAAd,CAEA,KAAKqN,GAAL,CAAW,EAAX,CACD,C,mHAEoB,CACnB,GAAM9R,MAAK,CAAG,GAAI8P,iCAAJ,EAAd,CACA,KAAKgC,GAAL,CAASpa,IAAT,CAAcsI,KAAd,EACA,MAAOA,MAAP,CACD,C,sEAEsBsL,S,CAAW,CAChC,GAAItL,MAAK,CAAG,KAAK8R,GAAL,CACT5R,MADS,CACF,SAAAF,KAAK,QAAIA,MAAK,CAAC+R,MAAN,EAAJ,EADH,EAETnF,IAFS,CAEJ,SAAA5M,KAAK,QAAIA,MAAK,WAAYsL,UAArB,EAFD,CAAZ,CAIA,GAAI,CAACtL,KAAL,CAAY,CACVA,KAAK,CAAG,GAAIsL,UAAJ,CAAc,KAAK7G,MAAnB,CAAR,CACA,KAAKqN,GAAL,CAASpa,IAAT,CAAcsI,KAAd,EACD,CAED,MAAOA,MAAP,CACD,C,6CAEW,CACV,MAAO,CACL8R,GAAG,CAAE,KAAKA,GAAL,CAAS1Z,GAAT,CAAa,SAAA4H,KAAK,QAAIA,MAAK,CAACqB,SAAN,EAAJ,EAAlB,CADA,CAAP,CAGD,C,8DAEkBN,I,CAAM,CACvB,MAAO,MAAK+Q,GAAL,CACJ5R,MADI,CACG,SAAAF,KAAK,QAAIA,MAAK,CAACgS,MAAN,CAAajR,IAAb,CAAJ,EADR,EAEJxB,MAFI,CAEG,SAACiG,GAAD,CAAMxF,KAAN,+DAAoBwF,GAApB,+CAA4BxF,KAAK,CAACiS,UAAN,EAA5B,IAFH,CAEoD,EAFpD,CAAP,CAGD,C,mDAEc,CACb,GAAMC,MAAK,CAAG,EAAd,CAEA,KAAKJ,GAAL,CAASta,OAAT,CAAiB,SAAAwI,KAAK,CAAI,CACxB,GAAImS,UAAS,CAAGD,KAAK,CAACtF,IAAN,CAAW,SAAAuF,SAAS,QAAIA,UAAS,CAACpR,IAAV,GAAmBf,KAAK,CAACe,IAA7B,EAApB,CAAhB,CAEA,GAAI,CAACoR,SAAL,CAAgB,CACdA,SAAS,CAAG,CACVpR,IAAI,CAAEf,KAAK,CAACe,IADF,CAEVgP,QAAQ,CAAE,EAFA,CAAZ,CAKAmC,KAAK,CAACxa,IAAN,CAAWya,SAAX,EACD,CAEDA,SAAS,CAACpC,QAAV,wDAAyBoC,SAAS,CAACpC,QAAnC,+CAAgD/P,KAAK,CAACiS,UAAN,EAAhD,GACD,CAbD,EAeA,MAAOC,MAAP,CACD,C,iDAEsB,mBAAX9S,KAAW,2DAAJ,EAAI,CACrB,KAAK0S,GAAL,CAAW1S,IAAI,CAAC0S,GAAL,EAAY,EAAvB,CACA,KAAKA,GAAL,CAAW,KAAKA,GAAL,CAAS1Z,GAAT,CAAa,SAAA4H,KAAK,QAC3B,IAAI4R,sBAAqB,CAAC5R,KAAK,CAACsL,SAAP,CAAzB,CAA2C,KAAI,CAAC7G,MAAhD,EAAwDnD,WAAxD,CAAoEtB,KAApE,CAD2B,EAAlB,CAAX,CAIA,MAAO,KAAP,CACD,C,wCAEOe,I,CAAM,CACZ,KAAK+Q,GAAL,CACG5R,MADH,CACU,SAAAF,KAAK,QAAIA,MAAK,CAAC+R,MAAN,EAAJ,EADf,EAEGva,OAFH,CAEW,SAAAwI,KAAK,QAAIA,MAAK,CAACoS,OAAN,CAAcrR,IAAd,CAAJ,EAFhB,EAGD,C,gDAEWA,I,CAAM,CAAE,C,6BAGP8Q,kGAAf,E;;GCzEMQ,sB,yBACJ,qBAAwC,mBAA5BC,KAA4B,2DAArB,EAAqB,IAAjBC,WAAiB,2DAAJ,EAAI,4DACtC,KAAKxS,EAAL,CAAUuS,IAAI,CAACvS,EAAf,CACA,KAAKmN,SAAL,CAAiBoF,IAAI,CAACpF,SAAtB,CACA,KAAKtC,KAAL,CAAa0H,IAAI,CAAC1H,KAAL,EAAc,CAA3B,CACA,KAAK2H,UAAL,CAAkBA,UAAlB,CAEA,GAAI,CAAC,KAAKrF,SAAV,CAAqB,CACnB,KAAM,IAAI1T,MAAJ,CAAU,4BAAV,CAAN,CACD,CAED,KAAK+Y,UAAL,CAAgB/a,OAAhB,CAAwB,SAACgb,QAAD,QAAcA,SAAQ,CAACC,IAAT,CAAc,KAAd,CAAd,EAAxB,EAEA,KAAK9F,MAAL,CAAc,GAAIH,oBAAJ,CAAiB,IAAjB,CAAd,CACA,KAAK7C,KAAL,CAAa,GAAIkE,mBAAJ,CAAgB,IAAhB,CAAb,CAEA,KAAKpE,WAAL,CAAmB,IAAnB,CAEA,KAAKjC,IAAL,CAAY,GAAIuG,kBAAJ,CAAe,IAAf,CAAZ,CACA,KAAK+D,GAAL,CAAW,GAAID,mCAAJ,CAAkB,IAAlB,CAAX,CACD,C,oHAEsB,CACrB,MAAO,EAAP,CACD,C,gDAEWW,Q,CAAU,CACpB,KAAKD,UAAL,CAAgB7a,IAAhB,CAAqB8a,QAArB,EACAA,QAAQ,CAACC,IAAT,CAAc,IAAd,EACD,C,wEAEuBhJ,W,CAAa,CACnC,KAAKA,WAAL,CAAmBA,WAAnB,CACD,C,oDAEanL,I,CAAM,CAClB,GAAMoU,aAAY,CAAG,EAArB,CAEA,GAAI,KAAKlL,IAAL,CAAUmL,iBAAV,EAAJ,CAAmC,CACjC,GAAI,CAAC,KAAKnL,IAAL,CAAU6G,aAAV,EAAL,CAAgC,CAC9BqE,YAAY,CAAChb,IAAb,CAAkB,CAChBoO,IAAI,CAAE,MADU,CAEhB8M,SAAS,CAAE,eAFK,CAGhBhf,KAAK,CAAE,CACLif,eAAe,CAAE,KAAKrL,IAAL,CAAU6E,qBAAV,EADZ,CAELyG,UAAU,CAAE,KAAKtL,IAAL,CAAUC,iBAAV,EAFP,CAHS,CAAlB,EAQD,CACF,CAED,OACE,CACE3B,IAAI,CAAE,KADR,CAEExF,KAAK,CAAE,CACL,CACEyS,MAAM,CAAE,WADV,CAEEzS,KAAK,WAAK,KAAK0S,qBAAL,EAAL,aAAqC,KAAK9F,SAA1C,CAFP,CADK,CAKL,CAAE6F,MAAM,CAAE,OAAV,CAAmBzS,KAAK,WAAK,KAAK2S,QAAL,EAAL,CAAxB,CALK,CAFT,CADF,SAWKP,YAXL,8CAYK,KAAKhO,WAAL,CAAiB,aAAjB,CAAgC,IAAhC,CAAsC,EAAtC,CAZL,GAcD,C,uDAEgB,CACf,MAAO,KAAP,CACD,C,+DAEoB,CACnB,MAAO,KAAP,CACD,C,iDAEa,CACZ,MAAO,MAAKA,WAAL,CAAiB,aAAjB,CAAgC,IAAhC,CAAsC,EAAtC,CAAP,CACD,C,iDAEa,CACZ,MAAO,MAAKiI,MAAL,CAAY1E,WAAZ,EAAP,CACD,C,+CAEY,CACX,MAAO,MAAK0B,KAAL,CAAWE,SAAX,IAA0B,KAAK5B,WAAL,EAAjC,CACD,C,2CAEU,CACT,GAAMiL,SAAQ,CAAG,KAAKxO,WAAL,CAAiB,kBAAjB,CAAqC,IAArC,CAA2C,CAA3C,CAAjB,CAEA,MAAO,MAAKkG,KAAL,CAAasI,QAApB,CACD,C,qEAEuB,CACtB,MAAO,MAAKhG,SAAL,CAAiB,KAAKC,cAAL,EAAxB,CACD,C,uDAEgB,CACf,MAAO,MAAKR,MAAL,CAAYQ,cAAZ,EAAP,CACD,C,4CAESR,M,CAAQ,CAChB,GAAMwG,iBAAgB,CAAG,KAAK1J,WAAL,CACrB,KAAKA,WAAL,CAAiBxB,WAAjB,EADqB,CAErB7a,SAFJ,CAIA,GAAMgmB,mBAAkB,CAAG,KAAKnL,WAAL,EAA3B,CACA,KAAK0E,MAAL,CAAY0G,SAAZ,CAAsB1G,MAAtB,EAEA,GAAI,CAACyG,kBAAD,EAAuB,KAAKnL,WAAL,EAA3B,CAA+C,CAC7C0E,MAAM,CAAC2G,kBAAP,GACD,CAED,GAAMC,SAAQ,CAAG,KAAKzB,GAAL,CAAS0B,sBAAT,CAAgCjC,sCAAhC,CAAjB,CACAgC,QAAQ,CAACF,SAAT,CAAmB1G,MAAnB,EAEA,GACE,KAAKlD,WAAL,EACA0J,gBAAgB,GAAK,KADrB,EAEA,KAAK1J,WAAL,CAAiBxB,WAAjB,EAHF,CAIE,CACA,KAAKwB,WAAL,CAAiBgK,qBAAjB,GACD,CACF,C,gDAEWjI,Q,CAAU,CACpB,KAAKmB,MAAL,CAAY+G,WAAZ,CAAwBlI,QAAxB,EACD,C,uDAEgB,CACf,MAAO,MAAKmB,MAAL,CAAYgH,cAAZ,EAAP,CACD,C,gDAEWvW,I,CAAM,CAChB,MAAO,MAAKuP,MAAL,CAAYiH,WAAZ,CAAwBxW,IAAxB,CAAP,CACD,C,gDAEWA,I,CAA0C,IAApCmK,QAAoC,2DAA1B,EAA0B,IAAtBsM,SAAsB,2DAAXzmB,SAAW,CACpD,KAAKmlB,UAAL,CAAgB/a,OAAhB,CAAwB,SAACgb,QAAD,CAAc,CACpCqB,QAAQ,CAAGrB,QAAQ,CAAC9N,WAAT,CAAqBtH,IAArB,CAA2BmK,OAA3B,CAAoCsM,QAApC,CAAX,CACD,CAFD,EAIA,MAAOA,SAAP,CACD,C,wEAEuBC,Q,CAAU,CAChC,MAAO,MAAKvB,UAAL,CAAgBrS,MAAhB,CAAuB,SAACsS,QAAD,QAAcA,SAAQ,WAAYsB,SAAlC,EAAvB,CAAP,CACD,C,iDAEsB,IAAX1U,KAAW,2DAAJ,EAAI,CACrB,KAAKuN,MAAL,CAAYrL,WAAZ,CAAwBlC,IAAI,CAACuN,MAA7B,EACA,KAAKhD,KAAL,CAAWrI,WAAX,CAAuBlC,IAAI,CAACuK,KAA5B,EACA,KAAKnC,IAAL,CAAUlG,WAAV,CAAsBlC,IAAI,CAACoI,IAA3B,EACA,KAAKsK,GAAL,CAASxQ,WAAT,CAAqBlC,IAAI,CAAC0S,GAA1B,EACA,KAAKpN,WAAL,CAAiB,aAAjB,CAAgCtF,IAAhC,EAEA,MAAO,KAAP,CACD,C,6CAEW,CACV,OAAO,0CACLuN,MAAM,CAAE,KAAKA,MAAL,CAAYtL,SAAZ,EADV,CAEEsI,KAAK,CAAE,KAAKA,KAAL,CAAWtI,SAAX,EAFT,CAGEmG,IAAI,CAAE,KAAKA,IAAL,CAAUnG,SAAV,EAHR,CAIEyQ,GAAG,CAAE,KAAKA,GAAL,CAASzQ,SAAT,EAJP,EAKK,KAAKqD,WAAL,CAAiB,WAAjB,CALL,EAOD,C,wCAEO3D,I,CAAM,CACZ,KAAK+Q,GAAL,CAASiC,OAAT,CAAiBhT,IAAjB,EACD,C,gDAEWA,I,CAAM,CAChB,KAAK4L,MAAL,CAAYS,WAAZ,CAAwBrM,IAAxB,EACA,KAAK4I,KAAL,CAAWyD,WAAX,CAAuBrM,IAAvB,EACA,KAAKyG,IAAL,CAAU4F,WAAV,CAAsBrM,IAAtB,EACA,KAAK+Q,GAAL,CAAS1E,WAAT,CAAqBrM,IAArB,EACA,KAAK2D,WAAL,CAAiB,aAAjB,CAAgC3D,IAAhC,EACD,C,2CAEU,CACT,MAAO,MAAP,CACD,C,2DAEkB,CACjB,MAAO,MAAP,CACD,C,0BAGYsR,2EAAf,E;;;;;GCnMM2B,sC,yBACJ,6BAAc,CAAC,mEACb,KAAKvP,MAAL,CAAc,IAAd,CACA,KAAKwP,UAAL,CAAkB,GAAIC,OAAI,CAACC,UAAT,EAAlB,CACD,C,2FAEI1P,M,CAAQ,CACX,KAAKA,MAAL,CAAcA,MAAd,CACD,C,8CAEUrH,I,CAAM,CACf,MAAOiQ,QAAO,CAAC,KAAKjQ,IAAL,CAAD,CAAd,CACD,C,gDAEWA,I,CAAsC,IAAhCmK,QAAgC,2DAAtB,EAAsB,IAAlB6M,iBAAkB,2CAChD,GAAI,CAAC,KAAKC,UAAL,CAAgBjX,IAAhB,CAAL,CAA4B,CAC1B,MAAOgX,iBAAP,CACD,CACD,MAAO,MAAKhX,IAAL,EAAWmK,OAAX,CAAoB6M,gBAApB,CAAP,CACD,C,kCAGYJ,qGAAf,E;;GCxBMM,wB,0NACe,CACjB,MAAO,IAAP,CACD,C,mDAEc,CACb,MAAO,EAAP,CACD,C,uDAEgB,CACf,MAAO,EAAP,CACD,C,iEAEqB,CACpB,MAAO,EAAP,CACD,C,+DAEoB,CACnB,MAAO,EAAP,CACD,C,2BAGYA,6EAAf,E;;GCpBMC,gB,+FACJ,sBAA2E,kCAA7DC,QAA6D,CAA7DA,QAA6D,wBAAlD,GAAkD,kCAA7CC,QAA6C,CAA7CA,QAA6C,wBAAlC,GAAkC,iCAA7BC,OAA6B,CAA7BA,OAA6B,uBAAnB,CAAmB,gCAAhBzT,OAAgB,CAAhBA,OAAgB,uBAAN,EAAM,sEACzE,+HACA,MAAKuT,QAAL,CAAgBA,QAAhB,CACA,MAAKC,QAAL,CAAgBA,QAAhB,CACA,MAAKC,OAAL,CAAeA,OAAf,CACA,MAAKzT,OAAL,CAAeA,OAAf,CAEA,MAAK0T,cAAL,CAAsB,IAAtB,CAEA,MAAKC,OAAL,CAAe,CACbC,WAAW,CAAE,CAAC,GAAK,GAAN,CAAW,IAAM,GAAjB,CAAsB,IAAM,GAA5B,CADA,CAEbC,aAAa,CAAE,IAFF,CAGbC,aAAa,CAAE,EAHF,CAAf,CATyE,aAc1E,C,0GAEiBC,M,CAAQrjB,M,CAAQ,CAChC,MAAO,EAAP,CACD,C,+CAEY,CACX,MAAO,MAAK+iB,OAAZ,CACD,C,+CAEY,CACX,MAAO,MAAKzT,OAAZ,CACD,C,mDAEc,CACb,GAAMmT,iBAAgB,4HAAtB,CAEA,6DACKA,gBADL,GAEE,CAAErB,MAAM,CAAE,OAAV,CAAmBzS,KAAK,WAAK,KAAKkU,QAAV,oBAAwB,KAAKC,QAA7B,UAAxB,CAFF,CAGE,CAAE1B,MAAM,CAAE,SAAV,CAAqBzS,KAAK,YAAM,KAAKW,OAAL,CAAe,EAArB,mBAA1B,CAHF,+CAIK,KAAK0T,cAAL,CAAoBM,WAApB,EAJL,GAMD,C,qBAtCmBX,iB,EAyCPC,mEAAf,E;;GCxCMW,sB,0FACJ,yBAKG,wBAJDV,QAIC,CAJDA,QAIC,wBAJUvd,mBAAmB,CAAG,CAIhC,kCAHDwd,QAGC,CAHDA,QAGC,wBAHUnnB,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAGV,iCAFDyd,OAEC,CAFDA,OAEC,uBAFS,CAET,gCADDzT,OACC,CADDA,OACC,uBADS,EACT,0MACK,CACJuT,QAAQ,CAARA,QADI,CAEJC,QAAQ,CAARA,QAFI,CAGJC,OAAO,CAAPA,OAHI,CAIJzT,OAAO,CAAPA,OAJI,CADL,GAOF,C,oBAbsBsT,e,EAgBVW,4EAAf,E;;;;;GCnBMC,wC,2OACUC,c,CAAgB,CAC5B,MAAO9nB,KAAI,CAAC+nB,IAAL,CAAU/nB,IAAI,CAAC6E,MAAL,GAAgBijB,cAA1B,CAAP,CACD,C,8DAEkB7Q,O,CAAS,gBAC1B,GAAIA,OAAO,CAAChW,MAAR,GAAmB,CAAvB,CAA0B,CACxB,MAAO,KAAP,CACD,CAED,GAAM6mB,eAAc,CAAG7Q,OAAO,CAAChF,MAAR,CACrB,SAACC,KAAD,CAAQiF,MAAR,QAAmBjF,MAAK,CAAG,KAAI,CAAC8V,gBAAL,CAAsB7Q,MAAtB,CAA3B,EADqB,CAErB,CAFqB,CAAvB,CAKA,GAAMjC,KAAI,CAAG,KAAK+S,aAAL,CAAmBH,cAAnB,CAAb,CAEA,GAAII,OAAM,CAAG,CAAb,CAEA,MAAOjR,QAAO,CAACqI,IAAR,CAAa,SAAAnI,MAAM,CAAI,CAC5B,GAAIjC,IAAI,CAAGgT,MAAP,EAAiBhT,IAAI,EAAI,KAAI,CAAC8S,gBAAL,CAAsB7Q,MAAtB,EAAgC+Q,MAA7D,CAAqE,CACnE,MAAO,KAAP,CACD,CAEDA,MAAM,EAAI,KAAI,CAACF,gBAAL,CAAsB7Q,MAAtB,CAAV,CACA,MAAO,MAAP,CACD,CAPM,CAAP,CAQD,C,0DAEgBA,M,CAAQ,CACvB,MACEA,OAAM,CAACyI,SAAP,CACAzI,MAAM,CAACC,WAAP,CAAmB,4BAAnB,CAAiD,IAAjD,CAAuD,CAAvD,CAFF,CAID,C,mCAGYyQ,qGAAf,E;;GCrCMM,0C,yBACJ,+BAAc,CAAC,qEACb,KAAKhJ,OAAL,CAAe,EAAf,CACA,KAAKiJ,KAAL,CAAa,EAAb,CACD,C,mGAEOC,I,CAAM,CACZ,KAAKD,KAAL,CAAWhe,IAAX,CAAgBie,IAAhB,EACD,C,6CAEW,CACV,MAAO,CACLC,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqP,OAAO,CAAE,KAAKA,OAFT,CAGLiJ,KAAK,CAAE,KAAKA,KAHP,CAAP,CAKD,C,iDAEsB,IAAXtW,KAAW,2DAAJ,EAAI,CACrB,KAAKqN,OAAL,CAAerN,IAAI,CAACqN,OAAL,EAAgB,EAA/B,CACA,KAAKiJ,KAAL,CAAatW,IAAI,CAACsW,KAAL,EAAc,EAA3B,CACA,MAAO,KAAP,CACD,C,gCAEGjR,M,CAAQkI,M,CAAQ,CAClB,KAAKF,OAAL,CAAa/U,IAAb,CAAkB,CAChBme,QAAQ,CAAEpR,MAAM,CAAC1E,EADD,CAEhB+V,SAAS,CAAE,GAAG9b,MAAH,CAAU2S,MAAV,EAAkBvU,GAAlB,CAAsB,SAAArJ,CAAC,QAAIA,EAAC,CAACgR,EAAN,EAAvB,CAFK,CAAlB,EAID,C,8CAEUpO,M,CAAQ,CACjB,MAAO,MAAK8a,OAAL,CAAalN,MAAb,CAAoB,SAACC,KAAD,MAAoC,IAA1BqW,SAA0B,MAA1BA,QAA0B,CAAhBC,SAAgB,MAAhBA,SAAgB,CAC7D,GAAMrR,OAAM,CAAG9S,MAAM,CAAC4S,OAAP,CAAe6F,aAAf,CAA6ByL,QAA7B,CAAf,CAEA,MAAOrW,MAAK,CAACxF,MAAN,CACL8b,SAAS,CAAC1d,GAAV,CAAc,SAAA2d,QAAQ,QAAItR,OAAM,CAACkI,MAAP,CAAcqJ,aAAd,CAA4BD,QAA5B,CAAJ,EAAtB,CADK,CAAP,CAGD,CANM,CAMJ,EANI,CAAP,CAOD,C,oCAGYN,4GAAf,E;;GCrCMQ,8C,4HACJ,iCAAyD,cAA7CC,cAA6C,2DAA7B,CAA6B,IAA1BC,qBAA0B,2DAAH,CAAG,wEACvD,8IAEA,MAAKD,aAAL,CAAqBA,aAArB,CACA,MAAKC,oBAAL,CAA4BA,oBAA5B,CACA,MAAKC,mBAAL,CAA2B,GAAIjB,0BAAJ,EAA3B,CALuD,aAMxD,C,0HAEmB,CAClB,MAAO,EAAP,CACD,C,6DAEmB,CAClB,GAAIpF,SAAQ,CAAG,EAAf,CAEA,GAAI,KAAKmG,aAAT,CAAwB,CACtBnG,QAAQ,CAACrY,IAAT,CAAc,KAAKwe,aAAnB,EACD,CAED,GAAMG,KAAI,CAAG,KAAK5R,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,CAA2C,IAA3C,CAAiD,IAAjD,CAAb,CAEA,GAAI2R,IAAJ,CAAU,CACRtG,QAAQ,CAACrY,IAAT,CAAc2e,IAAI,CAACH,aAAnB,EACD,CAED,MAAOnG,SAAQ,CAACuG,IAAT,CAAc,WAAd,CAAP,CACD,C,2EAE0B,CACzB,GAAIvG,SAAQ,CAAG,EAAf,CAEA,GAAI,KAAKoG,oBAAT,CAA+B,CAC7BpG,QAAQ,CAACrY,IAAT,CAAc,KAAKye,oBAAnB,EACD,CAED,GAAME,KAAI,CAAG,KAAK5R,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,CAA2C,IAA3C,CAAiD,IAAjD,CAAb,CAEA,GAAI2R,IAAJ,CAAU,CACRtG,QAAQ,CAACrY,IAAT,CAAc2e,IAAI,CAACF,oBAAnB,EACD,CAED,MAAOpG,SAAQ,CAACuG,IAAT,CAAc,WAAd,CAAP,CACD,C,qEAEuB,CACtB,MAAO,UAAP,CACD,C,gDAEW/O,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,aADY,CAEpBzS,KAAK,CAAE,KAAKiW,qBAAL,EAFa,CAAtB,EAKAnC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,QADY,CAEpBzS,KAAK,CAAE,KAAKkW,iBAAL,EAFa,CAAtB,EAKApC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKmW,wBAAL,EAFa,CAAtB,EAKA,MAAOrC,iBAAP,CACD,C,4EAEyB7M,O,CAAS,IACzBmP,UADyB,CACoBnP,OADpB,CACzBmP,SADyB,CACdC,cADc,CACoBpP,OADpB,CACdoP,cADc,CACEC,aADF,CACoBrP,OADpB,CACEqP,aADF,CAGjC,GAAMC,IAAG,CAAGD,aAAa,CAACvc,MAA1B,CAEA,GAAMA,OAAM,CAAG,GAAIob,+BAAJ,EAAf,CACAkB,cAAc,CAACtD,SAAf,CAAyBhZ,MAAzB,EAEA,GAAIwc,GAAJ,CAAS,CACPF,cAAc,CAACG,QAAf,CAAwB,CAAxB,CAA2B,CAA3B,EACA,KAAKC,SAAL,2CACIC,eAAe,CAAEzP,OAAO,CAAC0P,OAAR,CAAgBC,WAAhB,EADrB,EACuD3P,OADvD,EAEElN,MAFF,EAID,CAND,IAMO,CACLsc,cAAc,CAACG,QAAf,CAAwB,CAAxB,CAA2B,CAA3B,EACD,CACF,C,4CAGCvP,O,CACA4P,Y,CACAC,W,CAGA,IAFAC,cAEA,2DAFgBjqB,SAEhB,IADAuf,OACA,2DADSvf,SACT,IACQuE,OADR,CACoC4V,OADpC,CACQ5V,MADR,CACgBqlB,eADhB,CACoCzP,OADpC,CACgByP,eADhB,CAGA,GAAIK,aAAa,GAAKjqB,SAAtB,CAAiC,CAC/BiqB,aAAa,CAAG,KAAKC,iBAAL,CAAuB/P,OAAvB,CAAhB,CACD,CAED,GAAIoF,MAAM,GAAKvf,SAAf,CAA0B,CACxBuf,MAAM,CAAG,KAAK4K,sBAAL,CAA4BhQ,OAA5B,CAAT,CACD,CAED,GAAMiQ,UAAS,CAAG,KAAKC,gBAAL,CAAsB,CACtC9lB,MAAM,CAANA,MADsC,CAEtCqlB,eAAe,CAAfA,eAFsC,CAGtCI,WAAW,CAAXA,WAHsC,CAAtB,CAAlB,CAMA,GAAI,CAACI,SAAL,CAAgB,CACdL,YAAY,CAACO,OAAb,CAAqB,8BAArB,EACA,OACD,CAED,GAAIrd,OAAM,CAAG,KAAKsd,iBAAL,CACXpQ,OADW,CAEX4P,YAFW,CAGXK,SAHW,CAIXH,aAJW,CAKX1K,MALW,CAAb,CAQA0K,aAAa,CAAGhd,MAAM,CAACgd,aAAvB,CACA1K,MAAM,CAAGtS,MAAM,CAACsS,MAAhB,CAEA,GAAIA,MAAM,GAAK,CAAf,CAAkB,CAChB,MAAOwK,aAAP,CACD,CAED,GAAIS,eAAc,CAAG,KAAKC,sBAAL,CAA4BL,SAA5B,CAAuC7lB,MAAvC,CAArB,CAEA,GAAI,CAACimB,cAAL,CAAqB,CACnB,MAAO,MAAKb,SAAL,CACLxP,OADK,CAEL4P,YAFK,CAGLxlB,MAAM,CAAC4S,OAAP,CAAeuT,QAAf,CAAwBC,kBAAxB,CAA2CP,SAA3C,CAHK,CAILH,aAJK,CAKL1K,MALK,CAAP,CAOD,CAEDtS,MAAM,CAAG,KAAKsd,iBAAL,CACPpQ,OADO,CAEP4P,YAFO,CAGPS,cAHO,CAIPP,aAJO,CAKP1K,MALO,CAAT,CAQA0K,aAAa,CAAGhd,MAAM,CAACgd,aAAvB,CACA1K,MAAM,CAAGtS,MAAM,CAACsS,MAAhB,CAEA,GAAIA,MAAM,GAAK,CAAf,CAAkB,CAChB,OACD,CAED,MAAO,MAAKoK,SAAL,CACLxP,OADK,CAEL4P,YAFK,CAGLxlB,MAAM,CAAC4S,OAAP,CAAeuT,QAAf,CAAwBC,kBAAxB,CAA2CH,cAA3C,CAHK,CAILP,aAJK,CAKL1K,MALK,CAAP,CAOD,C,sEAEsBlI,M,CAAQnG,I,CAAM,CACnC,GAAM0Z,QAAO,CAAG1Z,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBC,kBAAtB,CAAyCtT,MAAzC,CAAhB,CACA,GAAMwT,UAAS,CAAGD,OAAO,CAACE,YAAR,EAAlB,CAEA,GAAI,CAACD,SAAD,EAAcA,SAAS,CAAClY,EAAV,GAAiB0E,MAAM,CAAC1E,EAAtC,EAA4CkY,SAAS,CAAChQ,WAAV,EAAhD,CAAyE,CACvE,MAAO,KAAP,CACD,CAED,MAAOgQ,UAAP,CACD,C,iEAEqBd,Y,CAAcK,S,CAAWH,a,CAAe1K,M,CAAQ,CAAC,0DACrE,GAAI/B,MAAK,CAAG4M,SAAS,CAACvE,QAAV,EAAZ,CACA,GAAIkF,WAAU,CAAGvN,KAAK,CAAGyM,aAAzB,CACA,GAAIc,UAAU,CAAG,CAAjB,CAAoB,CAClBA,UAAU,CAAG,CAAb,CACD,CAEDxL,MAAM,EAAIwL,UAAV,CAEA,GAAIC,kBAAiB,CAAGf,aAAa,CAAGzM,KAAxC,CACA,GAAIwN,iBAAiB,CAAG,CAAxB,CAA2B,CACzBA,iBAAiB,CAAG,CAApB,CACD,CAED,GAAIzL,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,GAAI3M,MAAK,CAAG,IAAZ,CAEA,GAAI2M,MAAM,CAAG6K,SAAS,CAACxE,qBAAV,EAAb,CAAgD,CAC9C,GAAIwE,SAAS,CAACxE,qBAAV,IAAqC,CAAzC,CAA4C,CAC1C,KAAM,IAAIxZ,MAAJ,CAAU,mCAAV,CAAN,CACD,CAEDwG,KAAK,CAAG,GAAI2K,mBAAJ,CAAgB6M,SAAS,CAACxE,qBAAV,EAAhB,CAAmDmF,UAAnD,CAAR,CACAxL,MAAM,EAAI6K,SAAS,CAACxE,qBAAV,EAAV,CACD,CAPD,IAOO,CACLhT,KAAK,CAAG,GAAI2K,mBAAJ,CAAgBgC,MAAhB,CAAwBwL,UAAxB,CAAR,CAEAxL,MAAM,CAAG,CAAT,CACD,CAED6K,SAAS,CAACnE,SAAV,CAAoBrT,KAApB,EACAmX,YAAY,CAAC/nB,GAAb,CAAiBooB,SAAjB,CAA4BxX,KAA5B,EAEA,MAAO,CACLqX,aAAa,CAAEe,iBADV,CAELzL,MAAM,CAANA,MAFK,CAAP,CAID,C,gEAE0D,IAAxChb,OAAwC,OAAxCA,MAAwC,CAAhCqlB,eAAgC,OAAhCA,eAAgC,CAAfI,WAAe,OAAfA,WAAe,CACzD,MAAO,MAAKhB,mBAAL,CAAyBiC,kBAAzB,CACL1mB,MAAM,CAAC4S,OAAP,CAAe+T,gBAAf,CAAgCtB,eAAhC,CAAiDI,WAAjD,CADK,CAAP,CAGD,C,4EAEsD,IAA9BmB,cAA8B,OAA9BA,aAA8B,CAAfC,WAAe,OAAfA,WAAe,CACrD,GAAI7L,OAAM,CAAG,CAAb,CACA,GAAI9B,MAAM,CAACC,SAAP,CAAiB,KAAKoL,aAAtB,CAAJ,CAA0C,CACxCvJ,MAAM,CAAG,KAAKuJ,aAAd,CACD,CAFD,IAEO,IAAI,KAAKA,aAAL,GAAuB,IAA3B,CAAiC,CACtCvJ,MAAM,CAAG,KAAKsH,UAAL,CAAgBzR,IAAhB,CAAqB,KAAK0T,aAA1B,EAAyC1W,KAAlD,CACD,CAED,GAAI,CAAC,KAAKiF,MAAV,CAAkB,CAChB,MAAOkI,OAAP,CACD,CAED,GAAM0J,KAAI,CAAG,KAAK5R,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,CAA2C,IAA3C,CAAiD,IAAjD,CAAb,CAEA,GAAI,CAAC2R,IAAL,CAAW,CACT,MAAO1J,OAAP,CACD,CAED,MAAOA,OAAM,CAAG0J,IAAI,CAACpJ,SAAL,CAAe,KAAKgH,UAApB,CAAhB,CACD,C,6DAEmB,CAClB,GAAIoD,cAAa,CAAG,CAApB,CACA,GAAIxM,MAAM,CAACC,SAAP,CAAiB,KAAKqL,oBAAtB,CAAJ,CAAiD,CAC/CkB,aAAa,CAAG,KAAKlB,oBAArB,CACD,CAFD,IAEO,IAAI,KAAKA,oBAAL,GAA8B,IAAlC,CAAwC,CAC7CkB,aAAa,CAAG,KAAKpD,UAAL,CAAgBzR,IAAhB,CAAqB,KAAK2T,oBAA1B,EAAgD3W,KAAhE,CACD,CAED,GAAI,CAAC,KAAKiF,MAAV,CAAkB,CAChB,MAAO4S,cAAP,CACD,CAED,GAAMhB,KAAI,CAAG,KAAK5R,MAAL,CAAYC,WAAZ,CAAwB,iBAAxB,CAA2C,IAA3C,CAAiD,IAAjD,CAAb,CAEA,GAAI,CAAC2R,IAAL,CAAW,CACT,MAAOgB,cAAP,CACD,CAED,MAAOA,cAAa,CAAGhB,IAAI,CAACoC,gBAAL,CAAsB,KAAKxE,UAA3B,CAAvB,CACD,C,oCAzQkCD,2B,EA4QtBiC,+GAAf,E;;GC9QMyC,kD,kIACJ,kCACExC,aADF,CAEEC,oBAFF,CAGEwC,YAHF,CAIEC,aAJF,CAOE,cAFAC,gBAEA,2DAFkB,EAElB,IADAC,kBACA,2DADoB,CACpB,0EACA,8IAAM5C,aAAN,CAAqBC,oBAArB,GACA,MAAKwC,YAAL,CAAoBA,YAApB,CACA,MAAKC,aAAL,CAAqBA,aAArB,CACA,MAAKC,eAAL,CAAuBA,eAAvB,CACA,MAAKC,iBAAL,CAAyBA,iBAAzB,CACA,MAAKC,GAAL,CAAW,IAAX,CANA,aAOD,C,iIAEoBxR,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,MAAO,CACL,CACErB,MAAM,CAAE,iBADV,CAEEzS,KAAK,CAAE,KAAK0Y,iBAAL,CAAuBzR,OAAvB,CAFT,CADK,CAAP,CAMD,C,gDAEWA,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,eADY,CAEpBzS,KAAK,CAAE,KAAKsY,aAFQ,CAAtB,EAKAxE,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,eADY,CAEpBzS,KAAK,CAAE,KAAK4V,aAFQ,CAAtB,EAKA9B,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,uBADY,CAEpBzS,KAAK,CAAE,KAAK6V,oBAFQ,CAAtB,EAKA/B,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,kBADY,CAEpBzS,KAAK,CAAE,KAAKqY,YAFQ,CAAtB,EAKAvE,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,mBADY,CAEpBzS,KAAK,WAAK,KAAKuY,eAAV,KAFe,CAAtB,EAKA,MAAOzE,iBAAP,CACD,C,2EAEyC,IAAjB6E,cAAiB,MAAjBA,aAAiB,CACxC,GAAIpO,MAAM,CAACC,SAAP,CAAiB,KAAKoL,aAAtB,CAAJ,CAA0C,CACxC,MAAO5oB,KAAI,CAAC+nB,IAAL,CAAU,KAAKa,aAAf,CAAP,CACD,CACD,MAAO5oB,KAAI,CAAC+nB,IAAL,CAAU,KAAKpB,UAAL,CAAgBzR,IAAhB,CAAqB,KAAK0T,aAA1B,EAAyC1W,KAAnD,CAAP,CACD,C,kEAEoC,IAAjByZ,cAAiB,OAAjBA,aAAiB,CACnC,GAAIpO,MAAM,CAACC,SAAP,CAAiB,KAAKqL,oBAAtB,CAAJ,CAAiD,CAC/C,MAAO7oB,KAAI,CAAC6D,KAAL,CAAW,KAAKglB,oBAAhB,CAAP,CACD,CAED,MAAO7oB,KAAI,CAAC6D,KAAL,CAAW,KAAK8iB,UAAL,CAAgBzR,IAAhB,CAAqB,KAAK2T,oBAA1B,EAAgD3W,KAA3D,CAAP,CACD,C,wDAEiD,IAAnC7N,OAAmC,OAAnCA,MAAmC,CAA3BsnB,aAA2B,OAA3BA,aAA2B,CAAZnsB,QAAY,OAAZA,QAAY,CAChD,GAAMosB,WAAU,CAAGvnB,MAAM,CAACwnB,aAAP,CAAqBF,aAAa,CAACG,cAAnC,CAAnB,CACA,GAAMC,cAAa,CACjB,KAAKV,YAAL,EAAqB,EAAIhnB,MAAM,CAAC4O,QAAP,CAAgBgI,UAAhB,GAA+B,EAAxD,EAA8Dzb,QADhE,CAGA,MAAOosB,WAAU,CAAGG,aAApB,CACD,C,4DAEiB9R,O,CAAS,CACzB,GAAIza,SAAQ,CAAG,EAAf,CAEA,MAAOA,QAAQ,EAAf,CAAmB,CACjB,GAAIA,QAAQ,GAAK,KAAKgsB,iBAAtB,CAAyC,CACvC,MAAOhsB,SAAP,CACD,CAED,GAAI,KAAKwsB,YAAL,6CAAuB/R,OAAvB,EAAgCza,QAAQ,CAARA,QAAhC,KAA+C,KAAK+rB,eAAxD,CAAyE,CACvE,MAAO/rB,SAAP,CACD,CACF,CAED,MAAO,EAAP,CACD,C,4EAEyBya,O,CAAS,IACzB0R,cADyB,CACS1R,OADT,CACzB0R,aADyB,CACVM,cADU,CACShS,OADT,CACVgS,cADU,CAEjC,GAAMC,eAAc,CAAGP,aAAa,CAACG,cAArC,CAEA,GAAIK,MAAK,CAAG,KAAKb,aAAjB,CAEA,GAAM9rB,SAAQ,CAAG,KAAKksB,iBAAL,CAAuBzR,OAAvB,CAAjB,CACA,GAAMmS,UAAS,CAAG,KAAKJ,YAAL,6CAAuB/R,OAAvB,EAAgCza,QAAQ,CAARA,QAAhC,GAAlB,CAEAysB,cAAc,CAAC7B,OAAf,oBACc,KAAKkB,aADnB,qCAC4D9rB,QAD5D,gCAC2F4sB,SAD3F,aAIA,GAAIC,KAAI,CAAG,CAAX,CAEA,MAAOF,KAAK,EAAZ,CAAgB,CACd,GAAMjX,KAAI,CAAGlV,IAAI,CAAC+nB,IAAL,CAAU/nB,IAAI,CAAC6E,MAAL,GAAgB,GAA1B,CAAb,CACA,GAAM0kB,IAAG,CAAGrU,IAAI,EAAIkX,SAApB,CAEA,GAAI7C,GAAJ,CAAS,CACP8C,IAAI,GACJ,GAAMtf,OAAM,CAAG,GAAIob,+BAAJ,EAAf,CACA8D,cAAc,CAAClG,SAAf,CAAyBhZ,MAAzB,EACA,KAAK0c,SAAL,2CAAiBC,eAAe,CAAEwC,cAAlC,EAAqDjS,OAArD,EAAgElN,MAAhE,EACD,CACF,CAEDkf,cAAc,CAAC7B,OAAf,WAA0BiC,IAA1B,uBACD,C,sCA1HoC1D,6B,EA6HxByC,oIAAf,E;;GC7HMkB,4B,6FACJ,wBAAc,yEACZ,mIAAM,EAAN,GAEA,MAAKjF,cAAL,CAAsB,GAAI+D,+CAAJ,CAA6B,MAA7B,CAAqC,CAArC,CAAwC,EAAxC,CAA4C,EAA5C,CAAtB,CAEA,MAAK9D,OAAL,CAAe,CACbC,WAAW,CAAE,CAAC,IAAM,GAAP,CAAY,IAAM,GAAlB,CAAuB,IAAM,GAA7B,CADA,CAEbC,aAAa,CAAE,KAFF,CAAf,CALY,aASb,C,gHAEiBE,M,CAAQrjB,M,CAAQ,CAChC,MAAO,MAAKgjB,cAAL,CAAoBqE,iBAApB,CAAsC,CAC3CrnB,MAAM,CAANA,MAD2C,CAE3CsnB,aAAa,CAAEjE,MAF4B,CAAtC,CAAP,CAID,C,mDAEc,CACb,GAAMZ,iBAAgB,kIAAtB,CAEA,OACE,CACE9T,KAAK,CAAE,qDADT,CADF,sDAIK8T,gBAJL,GAMD,C,uDAEgB,CACf,MAAO,0BAAP,CACD,C,+DAEoB,CACnB,MAAO,4BAAP,CACD,C,2BApCyBc,kB,EAuCb0E,qFAAf,E;;GCvCMC,8B,8FACJ,yBAAc,0EACZ,oIAAM,CAAE5Y,OAAO,CAAE,EAAX,CAAN,GAEA,MAAK0T,cAAL,CAAsB,GAAI+D,+CAAJ,CAA6B,IAA7B,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,EAAzC,CAA6C,EAA7C,CAAtB,CAEA,MAAK9D,OAAL,CAAe,CACbC,WAAW,CAAE,CAAC,IAAM,GAAP,CAAY,IAAM,GAAlB,CAAuB,IAAM,GAA7B,CADA,CAEbC,aAAa,CAAE,KAFF,CAAf,CALY,aASb,C,iHAEiBE,M,CAAQrjB,M,CAAQ,CAChC,MAAO,MAAKgjB,cAAL,CAAoBqE,iBAApB,CAAsC,CAC3CrnB,MAAM,CAANA,MAD2C,CAE3CsnB,aAAa,CAAEjE,MAF4B,CAAtC,CAAP,CAID,C,mDAEc,CACb,GAAMZ,iBAAgB,mIAAtB,CAEA,OACE,CACE9T,KAAK,CACH,0FAFJ,CADF,sDAKK8T,gBALL,GAOD,C,uDAEgB,CACf,MAAO,uCAAP,CACD,C,+DAEoB,CACnB,MAAO,6BAAP,CACD,C,4BArC0Bc,kB,EAwCd2E,wFAAf,E;;GCzCMC,gD,iIACJ,iCAAY5D,aAAZ,CAA2BC,oBAA3B,CAA6E,cAA5B4D,uBAA4B,2DAAH,CAAG,yEAC3E,6IAAM7D,aAAN,CAAqBC,oBAArB,GAEA,MAAK4D,sBAAL,CAA8BA,sBAA9B,CAH2E,aAI5E,C,mIAEuB,CACtB,MAAO,WAAP,CACD,C,gDAEWxS,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,aADY,CAEpBzS,KAAK,CAAE,KAAKiW,qBAAL,EAFa,CAAtB,EAKAnC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKyZ,sBAFQ,CAAtB,EAKA3F,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKkW,iBAAL,EAFa,CAAtB,EAKApC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,wBADY,CAEpBzS,KAAK,CAAE,KAAKmW,wBAAL,EAFa,CAAtB,EAKA,MAAOrC,iBAAP,CACD,C,yFAEiC,CAChC,GAAIvJ,MAAM,CAACC,SAAP,CAAiB,KAAKiP,sBAAtB,CAAJ,CAAmD,CACjD,MAAO,MAAKA,sBAAZ,CACD,CACD,MAAO,MAAK9F,UAAL,CAAgBzR,IAAhB,CAAqB,KAAKuX,sBAA1B,EAAkDva,KAAzD,CACD,C,4CAES+H,O,CAAS4P,Y,CAAc,IACvBxlB,OADuB,CACK4V,OADL,CACvB5V,MADuB,CACfqlB,eADe,CACKzP,OADL,CACfyP,eADe,CAG/B,GAAIgD,gBAAe,CAAG,KAAKC,+BAAL,EAAtB,CAEA,MAAOD,eAAe,EAAtB,CAA0B,CACxB,GAAMxC,UAAS,CAAG,KAAKC,gBAAL,CAAsB,CACtC9lB,MAAM,CAANA,MADsC,CAEtCqlB,eAAe,CAAfA,eAFsC,CAAtB,CAAlB,CAKA,GAAI,CAACQ,SAAL,CAAgB,CACd,OACD,CAED,KAAKG,iBAAL,CACEpQ,OADF,CAEE4P,YAFF,CAGEK,SAHF,CAIE,KAAKF,iBAAL,EAJF,CAKE,KAAKC,sBAAL,CAA4BhQ,OAA5B,CALF,EAOD,CACF,C,qCAjEmC0O,6B,EAoEvB6D,kHAAf,E;;GCnEMI,gD,iIACJ,iCAAYhE,aAAZ,CAA2BC,oBAA3B,CAAiDgE,mBAAjD,CAAsE,CAAC,sNAC/DjE,aAD8D,CAC/CC,oBAD+C,CACzBgE,mBADyB,GAErE,C,gIAEoB5S,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,MAAO,CACL,CACErB,MAAM,CAAE,iBADV,CAEEzS,KAAK,CAAE,KAAK0Y,iBAAL,CAAuBzR,OAAvB,CAFT,CADK,CAAP,CAMD,C,6DACmB,CAClB,MAAO,MAAK2O,aAAZ,CACD,C,2EAE0B,CACzB,MAAO,MAAKC,oBAAZ,CACD,C,6DAEmB,CAClB,MAAO,EAAP,CACD,C,4EAEyB5O,O,CAAS,IACzB0R,cADyB,CACS1R,OADT,CACzB0R,aADyB,CACVM,cADU,CACShS,OADT,CACVgS,cADU,CAEjC,GAAMC,eAAc,CAAGP,aAAa,CAACmB,cAArC,CAEA,GAAM/f,OAAM,CAAG,GAAIob,+BAAJ,EAAf,CACA8D,cAAc,CAAClG,SAAf,CAAyBhZ,MAAzB,EACA,KAAK0c,SAAL,2CAAiBC,eAAe,CAAEwC,cAAlC,EAAqDjS,OAArD,EAAgElN,MAAhE,EACD,C,qCAhCmCyf,8B,EAmCvBI,iIAAf,E;;GCnCMG,oC,iGACJ,2BAAY/H,IAAZ,CAAkB,6EAChB,uIAAM,CAAErR,OAAO,CAAE,EAAX,CAAN,GAEA,MAAK0T,cAAL,CAAsB,GAAIuF,8CAAJ,CAA4B,OAA5B,CAAqC,CAArC,CAAwC,QAAxC,CAAtB,CAHgB,aAIjB,C,2GAEc,CACb,GAAM9F,iBAAgB,sIAAtB,CAEA,OACE,CACE9T,KAAK,CAAE,8CADT,CADF,sDAIK8T,gBAJL,GAMD,C,uDAEgB,CACf,MAAO,8BAAP,CACD,C,+DAEoB,CACnB,MAAO,gCAAP,CACD,C,+BAxB6Bc,kB,EA2BjBmF,iGAAf,E;;GC3BMC,oB,yFACJ,wBAKG,wBAJD9F,QAIC,CAJDA,QAIC,wBAJUvd,mBAAmB,CAAG,CAIhC,kCAHDwd,QAGC,CAHDA,QAGC,wBAHUnnB,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAGV,iCAFDyd,OAEC,CAFDA,OAEC,uBAFS,CAET,gCADDzT,OACC,CADDA,OACC,uBADS,EACT,wMACK,CACJuT,QAAQ,CAARA,QADI,CAEJC,QAAQ,CAARA,QAFI,CAGJC,OAAO,CAAPA,OAHI,CAIJzT,OAAO,CAAPA,OAJI,CADL,GAOF,C,mBAbqBsT,e,EAgBT+F,yEAAf,E;;GChBMC,0B,4FACJ,uBAAc,wEACZ,kIAAM,EAAN,GAEA,MAAK5F,cAAL,CAAsB,GAAI+D,+CAAJ,CAA6B,MAA7B,CAAqC,CAArC,CAAwC,EAAxC,CAA4C,EAA5C,CAAtB,CACA,MAAK9D,OAAL,CAAe,CACbC,WAAW,CAAE,CAAC,IAAM,GAAP,CAAY,IAAM,GAAlB,CAAuB,IAAM,GAA7B,CADA,CAEbC,aAAa,CAAE,KAFF,CAAf,CAJY,aAQb,C,+GAEiBE,M,CAAQrjB,M,CAAQ,CAChC,MAAO,MAAKgjB,cAAL,CAAoBqE,iBAApB,CAAsC,CAC3CrnB,MAAM,CAANA,MAD2C,CAE3CsnB,aAAa,CAAEjE,MAF4B,CAAtC,CAAP,CAID,C,mDAEc,CACb,GAAMZ,iBAAgB,iIAAtB,CAEA,OACE,CACE9T,KAAK,CAAE,uDADT,CADF,sDAIK8T,gBAJL,GAMD,C,uDAEgB,CACf,MAAO,6BAAP,CACD,C,+DAEoB,CACnB,MAAO,iCAAP,CACD,C,0BAnCwBkG,iB,EAsCZC,kFAAf,E;;GCtCMC,wB,2FACJ,sBAAc,uEACZ,iIAAM,EAAN,GAEA,MAAK7F,cAAL,CAAsB,GAAIuF,8CAAJ,CAA4B,MAA5B,CAAoC,CAApC,CAAuC,MAAvC,CAAtB,CAHY,aAIb,C,qGAEc,CACb,GAAM9F,iBAAgB,gIAAtB,CAEA,OACE,CACE9T,KAAK,CAAE,qDADT,CADF,sDAIK8T,gBAJL,GAMD,C,uDAEgB,CACf,MAAO,uBAAP,CACD,C,+DAEoB,CACnB,MAAO,gCAAP,CACD,C,yBAxBuBkG,iB,EA2BXE,+EAAf,E;;GC3BMC,0B,4FACJ,uBAAc,wEACZ,kIAAM,EAAN,GAEA,MAAK9F,cAAL,CAAsB,GAAIuF,8CAAJ,CAA4B,OAA5B,CAAqC,CAArC,CAAwC,MAAxC,CAAtB,CAHY,aAIb,C,sGAEc,CACb,GAAM9F,iBAAgB,iIAAtB,CAEA,OACE,CACE9T,KAAK,CAAE,mDADT,CADF,sDAIK8T,gBAJL,GAMD,C,uDAEgB,CACf,MAAO,yBAAP,CACD,C,+DAEoB,CACnB,MAAO,2BAAP,CACD,C,0BAxBwBc,kB,EA2BZuF,kFAAf,E;;;;GC5BMC,U,4FACJ,cAAYxE,aAAZ,CAA2BC,oBAA3B,CAAiD,gEAC/C,4HACA,MAAKD,aAAL,CAAqBA,aAArB,CACA,MAAKC,oBAAL,CAA4BA,oBAA5B,CAH+C,aAIhD,C,uFAESlC,U,CAAY,CACpB,GAAIpJ,MAAM,CAACC,SAAP,CAAiB,KAAKoL,aAAtB,CAAJ,CAA0C,CACxC,MAAO,MAAKC,oBAAZ,CACD,CAED,MAAOlC,WAAU,CAACzR,IAAX,CAAgB,KAAK0T,aAArB,EAAoC1W,KAA3C,CACD,C,0DAEgByU,U,CAAY,CAC3B,GAAIpJ,MAAM,CAACC,SAAP,CAAiB,KAAKqL,oBAAtB,CAAJ,CAAiD,CAC/C,MAAO,MAAKA,oBAAZ,CACD,CAED,MAAOlC,WAAU,CAACzR,IAAX,CAAgB,KAAK2T,oBAArB,EAA2C3W,KAAlD,CACD,C,mDAEc,CACb,GAAM4U,iBAAgB,yHAAtB,CAEA,OACE,CACErB,MAAM,CAAE,QADV,CAEEzS,KAAK,CAAE,KAAK4V,aAFd,CADF,CAKE,CACEnD,MAAM,CAAE,gBADV,CAEEzS,KAAK,CAAE,KAAK6V,oBAFd,CALF,sDASK/B,gBATL,GAWD,C,iDAEa,CACZ,MAAO,EAAP,CACD,C,kBAzCgBE,iB,EA4CJoG,6DAAf,E;;GC5CMC,kB,kFACJ,mBAAc,CAAC,wLACP,IADM,CACA,MADA,GAEb,C,0GAEkB,CACjB,MAAO,KAAP,CACD,C,uDAEgB,CACf,MAAO,gBAAP,CACD,C,iEAEqB,CACpB,MAAO,MAAP,CACD,C,+DAEoB,CACnB,MAAO,oBAAP,CACD,C,sBAnBoBD,e,EAsBRC,2EAAf,E;;GCtBMC,sB,oFACJ,qBAAc,CAAC,4LACP,OADM,CACG,CADH,GAEb,C,4GAEkB,CACjB,MAAO,KAAP,CACD,C,uDAEgB,CACf,MAAO,2BAAP,CACD,C,iEAEqB,CACpB,MAAO,SAAP,CACD,C,+DAEoB,CACnB,MAAO,sBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,wBAvBsBF,e,EA0BVE,iFAAf,E;;GC1BMC,sB,oFACJ,qBAAc,CAAC,4LACP,IADM,CACA,OADA,GAEb,C,4GAEkB,CACjB,MAAO,KAAP,CACD,C,uDAEgB,CACf,MAAO,2BAAP,CACD,C,iEAEqB,CACpB,MAAO,SAAP,CACD,C,+DAEoB,CACnB,MAAO,sBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,wBAvBsBH,e,EA0BVG,iFAAf,E;;GC1BMC,wB,qFACJ,sBAAc,CAAC,8LACP,OADM,CACG,EADH,GAEb,C,yGAEgB,CACf,MAAO,yCAAP,CACD,C,iEAEqB,CACpB,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,uBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,yBAnBuBJ,e,EAsBXI,oFAAf,E;;GCtBMC,wB,qFACJ,sBAAc,CAAC,8LACP,UADM,CACM,CADN,GAEb,C,yGAEgB,CACf,MAAO,yCAAP,CACD,C,iEAEqB,CACpB,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,uBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,yBAnBuBL,e,EAsBXK,oFAAf,E;;GCtBMC,wB,qFACJ,sBAAc,CAAC,8LACP,OADM,CACG,EADH,GAEb,C,yGAEgB,CACf,MAAO,yCAAP,CACD,C,iEAEqB,CACpB,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,uBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,yBAnBuBN,e,EAsBXM,oFAAf,E;;GCtBMC,wB,qFACJ,sBAAc,CAAC,8LACP,UADM,CACM,CADN,GAEb,C,yGAEgB,CACf,MAAO,yCAAP,CACD,C,iEAEqB,CACpB,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,uBAAP,CACD,C,iDAEa,CACZ,MAAO,IAAP,CACD,C,yBAnBuBP,e,EAsBXO,oFAAf,E;;;;GCtBMC,sC,kdACa,CACf,MAAO,sBAAP,CACD,C,+DAEoB,CACnB,MAAO,wBAAP,CACD,C,gCAP8B5G,iB,EAUlB4G,uGAAf,E;;ACRO,GAAMC,WAAU,6CAClBC,uBADkB,IAElBC,4BAFkB,EAGrBH,kBAAkB,CAAlBA,6BAHqB,EAAhB,C;;ACFA,GAAMI,aAAY,6CAAQH,UAAR,CAAlB,C;;GCCDI,8C,4HACJ,gCAAYC,KAAZ,CAAmB,kFACjB,8IACA,MAAKA,KAAL,CAAaA,KAAb,CACA,MAAKC,KAAL,CAAa,EAAb,CAHiB,aAIlB,C,qHAEelU,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC9C,6DACKA,gBADL,GAEE,CACEhX,IAAI,CAAE,WADR,CAEExJ,KAAK,CAAE,CACL8nB,IAAI,CAAE,KAAKD,KAAL,CAAWrjB,GAAX,CAAe,SAAAqjB,KAAK,QAAK,CAC7Bte,MAAM,CAAEse,KAAK,CAACte,MADe,CAE7B/B,MAAM,CAAEqgB,KAAK,CAACrgB,MAFe,CAAL,EAApB,CADD,CAFT,CAFF,GAYD,C,4CAESmM,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEuH,sBAAsB,CAAE,KAAKF,KAAL,CAAWrjB,GAAX,CAAe,SAAAqjB,KAAK,QAAK,CAC/CnQ,SAAS,CAAEmQ,KAAK,CAACte,MAAN,CAAasO,WAAb,CAAyBrO,IADW,CAE/ChC,MAAM,CAAEqgB,KAAK,CAACrgB,MAFiC,CAAL,EAApB,CAF1B,GAOD,C,iDAEsB,IAAXgE,KAAW,2DAAJ,EAAI,CACrB,KAAKqc,KAAL,CAAarc,IAAI,CAACuc,sBAAL,CACTvc,IAAI,CAACuc,sBAAL,CAA4BvjB,GAA5B,CAAgC,SAAAgH,IAAI,QAAK,CACvCjC,MAAM,CAAE,GAAIme,aAAY,CAAClc,IAAI,CAACkM,SAAN,CAAhB,EAD+B,CAEvClQ,MAAM,CAAEgE,IAAI,CAAChE,MAF0B,CAAL,EAApC,CADS,CAKT,EALJ,CAOA,MAAO,KAAP,CACD,C,+DAEoB,CACnB,MAAO,MAAKogB,KAAZ,CACD,C,uEAEwB,CACvB,MAAO,MAAKA,KAAL,CAAa,KAAKI,iBAAL,EAApB,CACD,C,6DAEmB,CAClB,MAAO,MAAKH,KAAL,CAAWlc,MAAX,CACL,SAACC,KAAD,UAAUrC,OAAV,MAAUA,MAAV,CAAkB/B,MAAlB,MAAkBA,MAAlB,OAA+BoE,MAAK,CAAGrC,MAAM,CAAC0e,gBAAP,GAA4BzgB,MAAnE,EADK,CAEL,CAFK,CAAP,CAID,C,sDAE+B,IAAlB+B,OAAkB,OAAlBA,MAAkB,CAAV/B,MAAU,OAAVA,MAAU,CAC9B,MAAO,MAAK0gB,sBAAL,IAAiC3e,MAAM,CAAC0e,gBAAP,GAA4BzgB,MAApE,CACD,C,oDAEa+B,M,CAAQ,CACpB,MAAO,MAAKse,KAAL,CAAW7O,IAAX,CACL,SAAAmP,MAAM,QAAIA,OAAM,CAAC5e,MAAP,CAAcsO,WAAd,GAA8BtO,MAAM,CAACsO,WAAzC,EADD,CAAP,CAGD,C,oEAEqBuQ,W,CAAa,CACjC,MAAO,MAAKP,KAAL,CAAWvb,MAAX,CAAkB,SAAAub,KAAK,QAAIA,MAAK,CAACte,MAAN,WAAwB6e,YAA5B,EAAvB,CAAP,CACD,C,gDAEgC,IAAtB7e,OAAsB,OAAtBA,MAAsB,oBAAd/B,MAAc,CAAdA,MAAc,uBAAL,CAAK,cAC/B,GAAM4E,MAAK,CAAG,KAAKic,aAAL,CAAmB9e,MAAnB,CAAd,CAEA,GAAI,CAAC6C,KAAL,CAAY,CACV,MAAO,MAAP,CACD,CAED,MAAOA,MAAK,CAAC5E,MAAN,EAAgBA,MAAvB,CACD,C,sDAEmC,IAAtB+B,OAAsB,OAAtBA,MAAsB,oBAAd/B,MAAc,CAAdA,MAAc,uBAAL,CAAK,cAClC,GAAM4E,MAAK,CAAG,KAAKic,aAAL,CAAmB9e,MAAnB,CAAd,CAEA,GAAI,CAAC6C,KAAD,EAAUA,KAAK,CAAC5E,MAAN,CAAeA,MAA7B,CAAqC,CACnC,KAAM,IAAI5B,MAAJ,CAAU,uBAAV,CAAN,CACD,CAEDwG,KAAK,CAAC5E,MAAN,EAAgBA,MAAhB,CAEA,KAAKqgB,KAAL,CAAa,KAAKA,KAAL,CAAWvb,MAAX,CAAkB,SAAAF,KAAK,QAAIA,MAAK,CAAC5E,MAAN,CAAe,CAAnB,EAAvB,CAAb,CACD,C,gDAEgC,IAAtB+B,OAAsB,OAAtBA,MAAsB,oBAAd/B,MAAc,CAAdA,MAAc,uBAAL,CAAK,cAC/B,GAAI,CAAC,KAAK8gB,WAAL,CAAiB,CAAE/e,MAAM,CAANA,MAAF,CAAU/B,MAAM,CAANA,MAAV,CAAjB,CAAL,CAA2C,CACzC,KAAM,IAAI5B,MAAJ,CAAU,uBAAV,CAAN,CACD,CAED,GAAIwG,MAAK,CAAG,KAAKic,aAAL,CAAmB9e,MAAnB,CAAZ,CAEA,GAAI6C,KAAJ,CAAW,CACTA,KAAK,CAAC5E,MAAN,EAAgBA,MAAhB,CACD,CAFD,IAEO,CACL4E,KAAK,CAAG,CACN7C,MAAM,CAAE,GAAIme,aAAY,CAACne,MAAM,CAACsO,WAAP,CAAmBrO,IAApB,CAAhB,EADF,CAENhC,MAAM,CAANA,MAFM,CAAR,CAKA,KAAKqgB,KAAL,CAAW/jB,IAAX,CAAgBsI,KAAhB,EACD,CACF,C,oCA/GkCgU,2B,EAkHtBuH,iHAAf,E;;GCnHMY,oC,uHACJ,2BAAYC,YAAZ,CAA0B,6EACxB,yIACA,MAAKA,YAAL,CAAoBA,YAApB,CAFwB,aAGzB,C,wGAEW7U,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,6DACKA,gBADL,EAEK,CACD,CACErB,MAAM,CAAE,iCADV,CAEEzS,KAAK,WAAK,KAAK8b,YAAV,CAFP,CADC,CAKD,CACErJ,MAAM,CAAE,aADV,CAEEzS,KAAK,CAAEhT,IAAI,CAAC6D,KAAL,CAAW,KAAKsT,MAAL,CAAY+C,IAAZ,CAAiBqH,OAAjB,EAAX,CAFT,CALC,CAFL,EAaD,C,mDAEc,CACb,GAAI,KAAKpK,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAO,MAAP,CACD,CAED,MAAO,KAAP,CACD,C,8DAEkB4C,O,CAAS6M,gB,CAAkB,CAC5C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG,KAAKgI,YAA/B,CACD,C,+BApC6BpI,2B,EAuCjBmI,kGAAf,E;;GCvCME,wC,yHACJ,6BAAYC,iBAAZ,CAA+B,+EAC7B,2IACA,MAAKA,iBAAL,CAAyBA,iBAAzB,CAEA,MAAKhM,YAAL,CAAoB,CAApB,CAJ6B,aAK9B,C,yGAEY,CACX,MAAO,KAAP,CACD,C,gDAEW/I,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,eADY,CAEpBzS,KAAK,WAAK,KAAKic,wBAAL,EAAL,CAFe,CAAtB,EAKA,MAAOnI,iBAAP,CACD,C,wDAEe7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC7C,MAAO,MAAK9D,YAAL,CAAoB8D,gBAA3B,CACD,C,0EAEwB7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACtD,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAMoI,UAAS,CAAG,KAAK/X,MAAL,CAAYkI,MAAZ,CAAmB8P,mBAAnB,EAAlB,CACA,GAAI/W,SAAQ,CACVpY,IAAI,CAACuC,KAAL,CAAW,KAAKysB,iBAAL,CAAyBE,SAApC,EAAiD,KAAKlM,YADxD,CAGA,GAAI5K,QAAQ,CAAG,CAAf,CAAkB,CAChBA,QAAQ,CAAG,CAAX,CACD,CAED,MAAO0O,iBAAgB,CAAG1O,QAA1B,CACD,C,gDAEW8B,I,CAA4B,IAAtB4M,iBAAsB,2DAAH,CAAG,CACtC,GAAIsI,SAAQ,CAAGlV,IAAI,CAAG4M,gBAAtB,CACA,GAAIsI,QAAQ,EAAI,CAAhB,CAAmB,CACjB,MAAOtI,iBAAP,CACD,CAED,GAAM1O,SAAQ,CAAG,KAAK6W,wBAAL,EAAjB,CACA,GAAI7W,QAAQ,CAAGgX,QAAf,CAAyB,CACvBA,QAAQ,CAAGhX,QAAX,CACD,CAED,KAAK4K,YAAL,EAAqBoM,QAArB,CAEA,MAAOtI,iBAAgB,CAAGsI,QAA1B,CACD,C,iCAvD+B1I,2B,EA0DnBqI,wGAAf,E;;GC1DMM,8C,4HACJ,gCAAYnB,KAAZ,CAAmB,kFACjB,8IACA,MAAKA,KAAL,CAAaA,KAAb,CACA,MAAK1W,IAAL,CAAY,CAAZ,CAHiB,aAIlB,C,sGAES,CACR,MAAO,MAAKA,IAAZ,CACD,C,mDAEc,CACb,MAAO,MAAK0W,KAAZ,CACD,C,+CAEY,CACX,KAAK1W,IAAL,CAAY,KAAK0W,KAAjB,CACD,C,wCAEO1W,I,CAAM,CACZ,GAAIA,IAAI,CAAG,KAAK0W,KAAhB,CAAuB,CACrB,KAAM,IAAIhiB,MAAJ,CAAU,mBAAV,CAAN,CACD,CACD,KAAKsL,IAAL,CAAYA,IAAZ,CACD,C,0CAEQ1J,M,CAAQ,CACf,GAAIA,MAAM,CAAG,KAAK0J,IAAlB,CAAwB,CACtB,KAAM,IAAItL,MAAJ,CAAU,sCAAV,CAAN,CACD,CAED,KAAKsL,IAAL,EAAa1J,MAAb,CACD,C,wCAEOA,M,CAAQ,CACd,GAAI,KAAK0J,IAAL,CAAY1J,MAAZ,CAAqB,KAAKogB,KAA9B,CAAqC,CACnC,KAAM,IAAIhiB,MAAJ,CAAU,mBAAV,CAAN,CACD,CACD,KAAKsL,IAAL,EAAa1J,MAAb,CACD,C,wDAEemM,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC9C,6DACKA,gBADL,GAEE,CACEhX,IAAI,CAAE,eADR,CAEExJ,KAAK,CAAE,CACL4nB,KAAK,CAAE,KAAKA,KADP,CAEL1W,IAAI,CAAE,KAAKA,IAFN,CAFT,CAFF,GAUD,C,4CAESyC,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEwI,sBAAsB,CAAE,CACtB9X,IAAI,CAAE,KAAKA,IADW,CAF1B,GAMD,C,iDAEsB,IAAX1F,KAAW,2DAAJ,EAAI,CACrB,KAAK0F,IAAL,CAAY1F,IAAI,CAACwd,sBAAL,CACRxd,IAAI,CAACwd,sBAAL,CAA4B9X,IADpB,CAER,CAFJ,CAIA,MAAO,KAAP,CACD,C,oCArEkCkP,2B,EAwEtB2I,iHAAf,E;;GCpEME,oB,+FACJ,wBAMG,oCALDC,UAKC,CALDA,UAKC,0BALY,CAKZ,uCAJDC,WAIC,CAJDA,WAIC,2BAJa,CAIb,qCAHDC,QAGC,CAHDA,QAGC,wBAHU,CAGV,8BAFDlY,IAEC,CAFDA,IAEC,oBAFM,CAEN,WADEwN,IACF,mKACD,+HAAMA,IAAN,GAEA,GAAIwK,UAAJ,CAAgB,CACd,MAAKG,WAAL,CAAiB,GAAI1B,gCAAJ,CAA2BuB,UAA3B,CAAjB,EACD,CAED,GAAIC,WAAJ,CAAiB,CACf,MAAKE,WAAL,CAAiB,GAAId,2BAAJ,CAAsBY,WAAtB,CAAjB,EACD,CAED,GAAIC,QAAJ,CAAc,CACZ,MAAKC,WAAL,CAAiB,GAAIZ,6BAAJ,CAAwBW,QAAxB,CAAjB,EACD,CAED,GAAIlY,IAAJ,CAAU,CACR,MAAKmY,WAAL,CAAiB,GAAIN,gCAAJ,CAA2B7X,IAA3B,CAAjB,EACD,CAjBA,aAkBF,C,uGAEgB,CACf,MAAO,WAAP,CACD,C,uBA7BqBuN,iB,EAgCTwK,2EAAf,E;;ACtCO,GAAMK,wBAAuB,CAAG,CAAhC,CACA,GAAMC,sBAAqB,CAAG,CAA9B,CACA,GAAMC,oBAAmB,CAAG,CAA5B,CACA,GAAMC,2BAA0B,CAAG,EAAnC,CACA,GAAMC,yBAAwB,CAAG,EAAjC,CACA,GAAMC,gCAA+B,CAAG,EAAxC,CACA,GAAMC,8BAA6B,CAAG,EAAtC,C;;GCFDC,4B,yBACJ,uBAAYC,QAAZ,CAAsB,CAAC,8DACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKnZ,OAAL,CAAe,EAAf,CACD,C,uGAEc,CACb,OAAQ,KAAKmZ,QAAb,EACE,IAAKC,wBAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAAP,CACF,IAAKumB,sBAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAAP,CACF,IAAKumB,oBAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAC,CAApB,CAAuB,CAAvB,CAAP,CACF,IAAKumB,2BAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAAP,CACF,IAAKumB,yBAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAAP,CACF,IAAKumB,gCAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAC,CAAvB,CAAP,CACF,IAAKumB,8BAAL,CACE,MAAO,IAAIrhB,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAC,CAAvB,CAAP,CAdJ,CAgBD,C,yEAEyB,CACxB,MAAO,MAAKmN,OAAL,CAAa5K,IAAb,CACL,SAAA8K,MAAM,QAAIA,OAAM,WAAYoY,oBAAlB,EAA+B,CAACpY,MAAM,CAACE,UAAP,EAApC,EADD,CAAP,CAGD,C,4CAESF,M,CAAQ,CAChB,KAAKF,OAAL,CAAa7M,IAAb,CAAkB+M,MAAlB,EACA,MAAO,KAAP,CACD,C,+CAEY,CACX,MAAO,MAAKF,OAAZ,CACD,C,8CAEUmZ,Q,CAAU,CACnB,MAAO,MAAKA,QAAL,GAAkBA,QAAzB,CACD,C,+CAEY,CACX,MAAO,MAAKnZ,OAAL,CAAahW,MAAb,CAAsB,CAA7B,CACD,C,mDAEc,CACb,MAAO,MAAKgW,OAAL,CAAaqI,IAAb,CAAkB,SAAAnI,MAAM,QAAIA,OAAM,WAAYoY,oBAAtB,EAAxB,CAAP,CACD,C,uEAEwB,CACvB,MAAO,MAAKtY,OAAL,CAAarE,MAAb,CAAoB,SAAAuE,MAAM,QAAI,EAAEA,MAAM,WAAYoY,oBAApB,CAAJ,EAA1B,CAAP,CACD,C,6BAGYY,2FAAf,E;;GC1DMG,8B,0GACJ,yBAAc,CAAC,oMACPD,uBADM,GAEb,C,wBAH0BF,2B,EAMdG,8FAAf,E;;GCNMC,sB,sGACJ,qBAAc,CAAC,4LACPF,mBADM,GAEb,C,oBAHsBF,2B,EAMVI,kFAAf,E;;GCNMC,0B,wGACJ,uBAAc,CAAC,gMACPH,qBADM,GAEb,C,sBAHwBF,2B,EAMZK,wFAAf,E;;GCNMC,8B,0GACJ,yBAAc,CAAC,oMACPJ,wBADM,GAEb,C,wBAH0BF,2B,EAMdM,8FAAf,E;;GCNMC,kC,4GACJ,2BAAc,CAAC,wMACPL,0BADM,GAEb,C,0BAH4BF,2B,EAMhBO,oGAAf,E;;GCNMC,4C,iHACJ,gCAAc,CAAC,kNACPN,+BADM,GAEb,C,+BAHiCF,2B,EAMrBQ,mHAAf,E;;GCNMC,wC,+GACJ,8BAAc,CAAC,8MACPP,6BADM,GAEb,C,6BAH+BF,2B,EAMnBS,6GAAf,E;;;;GCEMC,sC,yBACJ,4BAAY7f,IAAZ,CAAkB,CAAC,mEACjB,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAKwZ,QAAL,CAAgB,CACd,GAAI8F,6BAAJ,EADc,CAEd,GAAIE,2BAAJ,EAFc,CAGd,GAAID,yBAAJ,EAHc,CAId,GAAIG,+BAAJ,EAJc,CAKd,GAAID,6BAAJ,EALc,CAMd,GAAIE,oCAAJ,EANc,CAOd,GAAIC,kCAAJ,EAPc,CAAhB,CASD,C,2HAEoBlH,e,CAAiBoH,Y,CAAcC,U,CAAY,CAC9D,GAAMzsB,QAAO,CAAG1C,cAAc,CAC5BuC,wBAAwB,CAAC2sB,YAAD,CAAepH,eAAf,CADI,CAE5B,CAACqH,UAF2B,CAA9B,CAKA,GAAI,KAAK/f,IAAL,CAAUiC,QAAV,CAAmBC,QAAnB,EAAJ,CAAmC,CACjC,MAAOtR,eAAc,CAAC,CAAD,CAAI,CAAC0C,OAAL,CAArB,CACD,CAED,MAAOA,QAAP,CACD,C,kEAEoBA,O,CAASwlB,W,CAAa,CACzC,MAAO,MAAKU,QAAL,CAAclL,IAAd,CAAmB,SAACoL,OAAD,CAAa,CACrC,GAAM0F,SAAQ,CAAG1F,OAAO,CAACsG,YAAR,EAAjB,CACA,GAAMC,YAAW,CAAGb,QAAQ,CAACc,qBAAT,CAA+B5sB,OAA/B,CAApB,CAEA,MAAOwlB,YAAW,CAACkH,YAAZ,GAA2BzkB,MAA3B,CAAkC0kB,WAAlC,CAAP,CACD,CALM,CAAP,CAMD,C,wEAEuB3sB,O,CAAS,gBAC/B,MAAO,MAAKkmB,QAAL,CAAc5X,MAAd,CAAqB,SAAC8X,OAAD,CAAa,CACvC,GAAM0F,SAAQ,CAAG1F,OAAO,CAACsG,YAAR,EAAjB,CACA,GAAMC,YAAW,CAAGb,QAAQ,CAACc,qBAAT,CAA+B5sB,OAA/B,CAApB,CAEA,MAAO,MAAI,CAACkmB,QAAL,CAAcnY,KAAd,CAAoB,SAAC8e,eAAD,CAAqB,CAC9C,GAAI,CAACA,eAAe,CAACH,YAAhB,GAA+BzkB,MAA/B,CAAsC0kB,WAAtC,CAAL,CAAyD,CACvD,MAAO,KAAP,CACD,CAFD,IAEO,IAAI,CAACE,eAAe,CAACC,uBAAhB,EAAL,CAAgD,CACrD,MAAO,KAAP,CACD,CAFM,IAEA,IAAID,eAAe,GAAKzG,OAAxB,CAAiC,CACtC,MAAO,KAAP,CACD,CAFM,IAEA,CACL,MAAO,MAAP,CACD,CACF,CAVM,CAAP,CAWD,CAfM,CAAP,CAgBD,C,sDAEchB,e,CAAiBoH,Y,CAAcC,U,CAAYjH,W,CAAa,CACrE,GAAMxlB,QAAO,CAAG,KAAK+sB,oBAAL,CACd3H,eADc,CAEdoH,YAFc,CAGdC,UAHc,CAAhB,CAMA,GAAI,CAACjH,WAAL,CAAkB,CAChB,MAAO,MAAKwH,uBAAL,CAA6BhtB,OAA7B,CAAP,CACD,CAED,GAAIyI,OAAM,CAAG,EAAb,CAEA,MAAO,IAAP,CAAa,CACX,GAAMwkB,WAAU,CAAG,KAAKC,oBAAL,CAA0BltB,OAA1B,CAAmCwlB,WAAnC,CAAnB,CAEA,GAAI,CAACyH,UAAL,CAAiB,CACf,MAAOxkB,OAAP,CACD,CAEDA,MAAM,CAAGA,MAAM,CAACL,MAAP,CAAc6kB,UAAd,CAAT,CAEA,GAAIA,UAAU,CAACH,uBAAX,EAAJ,CAA0C,CACxC,MAAOrkB,OAAP,CACD,CAED+c,WAAW,CAAGyH,UAAd,CACD,CACF,C,wEAEuBngB,I,CAAM,CAC5B,MAAO,MAAKqgB,UAAL,CAAgBrgB,IAAhB,EAAsBwZ,YAAtB,EAAP,CACD,C,mFAE8B,CAC7B,MAAO,MAAK8G,uBAAL,CAA6BlB,0BAA7B,CAAP,CACD,C,qGAEuC,CACtC,MAAO,MAAKkB,uBAAL,CAA6Bf,mCAA7B,CAAP,CACD,C,iGAEqC,CACpC,MAAO,MAAKe,uBAAL,CAA6Bd,iCAA7B,CAAP,CACD,C,2FAEkC,CACjC,MAAO,MAAKc,uBAAL,CAA6BhB,8BAA7B,CAAP,CACD,C,uFAEgC,CAC/B,MAAO,MAAKgB,uBAAL,CAA6BjB,4BAA7B,CAAP,CACD,C,+EAE4B,CAC3B,MAAO,MAAKiB,uBAAL,CAA6BnB,wBAA7B,CAAP,CACD,C,6DAEmB,CAClB,MAAO,MAAKkB,UAAL,CAAgBnB,4BAAhB,CAAP,CACD,C,yDAEiB,CAChB,MAAO,MAAKmB,UAAL,CAAgBjB,0BAAhB,CAAP,CACD,C,qDAEe,CACd,MAAO,MAAKiB,UAAL,CAAgBlB,wBAAhB,CAAP,CACD,C,2EAE0B,CACzB,MAAO,MAAKkB,UAAL,CAAgBd,mCAAhB,CAAP,CACD,C,uEAEwB,CACvB,MAAO,MAAKc,UAAL,CAAgBb,iCAAhB,CAAP,CACD,C,iEAEqB,CACpB,MAAO,MAAKa,UAAL,CAAgBf,8BAAhB,CAAP,CACD,C,6DAEmB,CAClB,MAAO,MAAKe,UAAL,CAAgBhB,4BAAhB,CAAP,CACD,C,8CAEUL,Q,CAAU,CACnB,MAAO,MAAK5F,QAAL,CAAclL,IAAd,CAAmB,SAACoL,OAAD,QAAaA,QAAO,WAAY0F,SAAhC,EAAnB,CAAP,CACD,C,8DAEkBjZ,M,CAAQ,CACzB,MAAO,MAAKqT,QAAL,CAAclL,IAAd,CAAmB,SAACoL,OAAD,QACxBA,QAAO,CAACzT,OAAR,CAAgBqI,IAAhB,CAAqB,SAACzC,WAAD,QAAiB1F,OAAM,CAAC1E,EAAP,GAAcoK,WAAW,CAACpK,EAA3C,EAArB,CADwB,EAAnB,CAAP,CAGD,C,2EAE0B,CACzB,MAAO,MAAK+X,QAAL,CAAc5X,MAAd,CAAqB,SAAC8X,OAAD,QAAaA,QAAO,CAACE,YAAR,EAAb,EAArB,CAAP,CACD,C,kCAGYiG,mGAAf,E;;GCpKMc,wB,yBACJ,qBAAY3gB,IAAZ,CAAkB,CAAC,4DACjB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKiG,OAAL,CAAe,EAAf,CACA,KAAK2a,cAAL,CAAsB,EAAtB,CAEA,KAAKpH,QAAL,CAAgB,GAAIqG,0BAAJ,CAAuB7f,IAAvB,CAAhB,CACA,KAAKqL,KAAL,CAAa,GAAIH,eAAJ,CAAc,IAAd,CAAb,CACD,C,uHAEuB,CACtB,KAAKlL,IAAL,CAAUmV,qBAAV,GACD,C,iDAEa,CACZ,GAAM0L,oBAAmB,CAAG,KAAKrH,QAAL,CAAcA,QAAd,CAAuBvY,MAAvB,CAC1B,SAACC,KAAD,CAAQwY,OAAR,CAAoB,CAClB,GAAMC,UAAS,CAAGD,OAAO,CAACE,YAAR,EAAlB,CAEA,GAAID,SAAS,EAAIA,SAAS,CAAChQ,WAAV,EAAjB,CAA0C,CACxC,MAAOzI,MAAK,CAAG,CAAf,CACD,CAED,MAAOA,MAAP,CACD,CATyB,CAU1B,CAV0B,CAA5B,CAaA,GAAM4f,WAAU,CAAG,KAAKtH,QAAL,CAAcA,QAAd,CAAuBvY,MAAvB,CAA8B,SAACC,KAAD,CAAQwY,OAAR,CAAoB,CACnE,GAAIA,OAAO,CAACE,YAAR,EAAJ,CAA4B,CAC1B,MAAO1Y,MAAK,CAAG,CAAf,CACD,CAED,MAAOA,MAAP,CACD,CANkB,CAMhB,CANgB,CAAnB,CAQA,GAAM6f,iBAAgB,CAAG,KAAKvH,QAAL,CAAcwH,iBAAd,GAAkCpH,YAAlC,EAAzB,CAEA,MACE,CAAC,CAACmH,gBAAD,EAAqBA,gBAAgB,CAACpX,WAAjB,EAAtB,GACAkX,mBAAmB,CAAGC,UAAU,CAAG,CAFrC,CAID,C,4DAEiB5F,c,CAAgBpC,W,CAAa,CAC7C,MAAO,MAAKU,QAAL,CAAcyH,cAAd,CACL/F,cADK,CAEL,KAAKlb,IAAL,CAAU4Y,WAAV,EAFK,CAGLnlB,gBAAgB,CAAC,KAAKuM,IAAL,CAAUkhB,SAAV,EAAD,CAHX,CAILpI,WAJK,CAAP,CAMD,C,0DAEgBoC,c,CAAgBpC,W,CAAa,CAC5C,GAAM7S,QAAO,CAAG,KAAKkb,iBAAL,CAAuBjG,cAAvB,CAAuCpC,WAAvC,EAAoD7X,MAApD,CACd,SAACiG,GAAD,CAAMwS,OAAN,CAAkB,CAChB,6DACKxS,GADL,+CAEKwS,OAAO,CAACxT,UAAR,GAAqBtE,MAArB,CAA4B,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAA5B,CAFL,GAID,CANa,CAOd,EAPc,CAAhB,CAUA,6DACK1D,OADL,+CAEK,KAAKC,UAAL,GAAkBtE,MAAlB,CAAyB,SAACuE,MAAD,QAC1BA,OAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC,IAApC,CAA0C,KAA1C,CAD0B,EAAzB,CAFL,GAMD,C,4CAESD,M,CAAQuT,O,CAAS,CACzB,GAAI,KAAK5N,aAAL,CAAmB3F,MAAM,CAAC1E,EAA1B,CAAJ,CAAmC,CACjC,KAAM,IAAIvG,MAAJ,CAAU,6BAA+BiL,MAAM,CAAC1E,EAAhD,CAAN,CACD,CAED,GAAI,CAAC0E,MAAM,CAAC1E,EAAZ,CAAgB,CACd,KAAM,IAAIvG,MAAJ,CAAU,uBAAV,CAAN,CACD,CAED,KAAK+K,OAAL,CAAaE,MAAM,CAAC1E,EAApB,EAA0B0E,MAA1B,CACA,KAAKya,cAAL,CAAoBxnB,IAApB,CAAyB+M,MAAzB,EACAuT,OAAO,CAAC0H,SAAR,CAAkBjb,MAAlB,EACAA,MAAM,CAACkb,uBAAP,CAA+B,IAA/B,EAEA,MAAO,KAAP,CACD,C,0DAEgBpb,O,CAAS,gBACxBA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,MAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,KAAI,CAACqT,QAAL,CAAcwH,iBAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,sDAEc/a,O,CAAS,iBACtBA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAc8H,eAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,kDAEYrb,O,CAAS,iBACpBA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAc+H,aAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,wEAEuBtb,O,CAAS,iBAC/BA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAcgI,wBAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,oEAEqBvb,O,CAAS,iBAC7BA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAciI,sBAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,8DAEkBxb,O,CAAS,iBAC1BA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAckI,mBAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,0DAEgBzb,O,CAAS,iBACxBA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CACAA,OAAO,CAAC/M,OAAR,CAAgB,SAACiN,MAAD,QACd,OAAI,CAACib,SAAL,CAAejb,MAAf,CAAuB,MAAI,CAACqT,QAAL,CAAcmI,iBAAd,EAAvB,CADc,EAAhB,EAIA,MAAO,KAAP,CACD,C,oDAEalgB,E,CAAI,CAChB,MAAO,MAAKwE,OAAL,CAAaxE,EAAb,CAAP,CACD,C,+CAEY,CACX,MAAO,MAAKmf,cAAZ,CACD,C,iDAEsB,oBAAX9f,KAAW,2DAAJ,EAAI,CACrBA,IAAI,CAAC5H,OAAL,CAAa,SAAC0oB,UAAD,CAAgB,CAC3B,GAAMzb,OAAM,CAAG,MAAI,CAAC2F,aAAL,CAAmB8V,UAAU,CAACrK,QAA9B,CAAf,CACA,GAAIpR,MAAJ,CAAY,CACVA,MAAM,CAACnD,WAAP,CAAmB4e,UAAU,CAAC9gB,IAA9B,EACD,CACF,CALD,EAOA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,MAAK8f,cAAL,CAAoB9mB,GAApB,CAAwB,SAACqM,MAAD,QAAa,CAC1CoR,QAAQ,CAAEpR,MAAM,CAAC1E,EADyB,CAE1CX,IAAI,CAAEqF,MAAM,CAACpD,SAAP,EAFoC,CAAb,EAAxB,CAAP,CAID,C,wCAEON,I,CAAM,CACZ,KAAKyD,UAAL,GAAkBhN,OAAlB,CAA0B,SAACiN,MAAD,CAAY,CACpCA,MAAM,CAACsP,OAAP,CAAehT,IAAf,EACD,CAFD,EAGD,C,gDAEWA,I,CAAM,CAChB,KAAKyD,UAAL,GAAkBhN,OAAlB,CAA0B,SAACiN,MAAD,CAAY,CACpCA,MAAM,CAAC2I,WAAP,CAAmBrM,IAAnB,EACD,CAFD,EAIA,KAAK4I,KAAL,CAAWyD,WAAX,CAAuBrM,IAAvB,EACA,MAAO,KAAP,CACD,C,yGAEyC,CACxC,MAAO,MAAKyD,UAAL,GACJpM,GADI,CACA,SAACqM,MAAD,QACHA,OAAM,CAACC,WAAP,CAAmB,yCAAnB,CAA8D,IAA9D,CAAoE,CAApE,CADG,EADA,EAIJoB,IAJI,CAIC,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAAGC,CAAR,CAAW,CACT,MAAO,CAAC,CAAR,CACD,CAED,GAAID,CAAC,CAAGC,CAAR,CAAW,CACT,MAAO,EAAP,CACD,CAED,MAAO,EAAP,CACD,CAdI,EAcF,CAdE,CAAP,CAeD,C,4DAEiBsxB,U,CAAYC,Q,CAAUC,K,CAAO,CAC7C,KAAK7b,UAAL,GAAkBhN,OAAlB,CAA0B,SAACiN,MAAD,CAAY,CACpC,GACE4b,KAAK,CACL5b,MAAM,CAACC,WAAP,CAAmB,yCAAnB,CAA8D,IAA9D,CAAoE,CAApE,CAFF,CAGE,CACA,OACD,CAEDD,MAAM,CAACC,WAAP,CAAmB,mBAAnB,CAAwC,CACtCyb,UAAU,CAAVA,UADsC,CAEtCG,YAAY,CAAEH,UAAU,CAAC5b,OAAX,CAAmB6F,aAAnB,CAAiC3F,MAAM,CAAC1E,EAAxC,CAFwB,CAGtCqgB,QAAQ,CAARA,QAHsC,CAItCC,KAAK,CAALA,KAJsC,CAAxC,EAMD,CAdD,EAeD,C,oDAEaE,I,CAAMC,I,CAAM,CACxB,KAAKhc,UAAL,GAAkBhN,OAAlB,CAA0B,SAACiN,MAAD,CAAY,CACpCA,MAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC,CAAE6b,IAAI,CAAJA,IAAF,CAAQC,IAAI,CAAJA,IAAR,CAApC,EACD,CAFD,EAGD,C,oEAEqBpjB,I,CAAMmK,O,CAAS,CACnC,MAAO,MAAK/C,UAAL,GACJjF,MADI,CAEH,SAACC,KAAD,CAAQiF,MAAR,+DACKjF,KADL,+CAEK,GAAGxF,MAAH,CAAUyK,MAAM,CAACC,WAAP,CAAmBtH,IAAnB,CAAyBmK,OAAzB,CAAV,CAFL,IAFG,CAMH,EANG,EAQJrH,MARI,CAQGmN,OARH,CAAP,CASD,C,mDAEc,CACb,MAAO,MAAK7I,UAAL,GAAkBjF,MAAlB,CACL,SAACC,KAAD,CAAQiF,MAAR,QAAmBjF,MAAK,CAAGiF,MAAM,CAAC+C,IAAP,CAAYqH,OAAZ,EAA3B,EADK,CAEL,CAFK,CAAP,CAID,C,iEAEqB,CACpB,MAAO,MAAKrK,UAAL,GAAkBjF,MAAlB,CACL,SAACC,KAAD,CAAQiF,MAAR,QAAmBjF,MAAK,CAAGiF,MAAM,CAAC+C,IAAP,CAAYmI,uBAAZ,EAA3B,EADK,CAEL,CAFK,CAAP,CAID,C,+DAEoB,CACnB,MAAO,MAAKnL,UAAL,GACJtE,MADI,CACG,SAACuE,MAAD,QAAYA,OAAM,CAAC+C,IAAP,CAAY6G,aAAZ,EAAZ,EADH,EAEJ9O,MAFI,CAEG,SAACC,KAAD,CAAQiF,MAAR,QAAmBjF,MAAK,CAAGiF,MAAM,CAAC+C,IAAP,CAAYqH,OAAZ,EAA3B,EAFH,CAEqD,CAFrD,CAAP,CAGD,C,mEAEsB,CACrB,GAAM4R,uBAAsB,CAAG,KAAKjc,UAAL,GAAkBjF,MAAlB,CAAyB,SAACC,KAAD,CAAQiF,MAAR,CAAmB,2BACrDA,MAAM,CAAC+C,IAAP,CAAYC,iBAAZ,EADqD,CACjEsH,OADiE,uBACjEA,OADiE,CAGzE,MAAOvP,MAAK,CAAGuP,OAAf,CACD,CAJ8B,CAI5B,CAJ4B,CAA/B,CAMA,GAAMuB,aAAY,CAAG,KAAK9L,UAAL,GAAkBjF,MAAlB,CACnB,SAACC,KAAD,CAAQiF,MAAR,QAAmBjF,MAAK,CAAGiF,MAAM,CAAC+C,IAAP,CAAYkZ,sBAAZ,EAA3B,EADmB,CAEnB,CAFmB,CAArB,CAKA,MAAOD,uBAAsB,CAAGnQ,YAAhC,CACD,C,2BAGY2O,4EAAf,E;;;;;AC/RO,GAAM0B,aAAY,CAAG,KAArB,CACA,GAAMC,aAAY,CAAG,KAArB,CACA,GAAMC,MAAK,CAAG,MAAd,CACA,GAAMC,qBAAoB,CAAG,MAA7B,CACA,GAAMC,qBAAoB,CAAG,MAA7B,CACA,GAAMC,cAAa,CAAG,OAAtB,CACA,GAAMC,0BAAyB,CAAG,MAAlC,C;;GCJDC,8C,yBACJ,gCAAYxiB,IAAZ,CAAkByiB,YAAlB,CAAgC/lB,MAAhC,CAAwC,CAAC,uEACvC,KAAKkG,WAAL,CAAiB,CACf5C,IAAI,CAAJA,IADe,CAEfyiB,YAAY,CAAZA,YAFe,CAGf/lB,MAAM,CAANA,MAHe,CAAjB,EAKD,C,kGAEO,CACN,MAAO,IAAI8lB,uBAAJ,CACL,KAAKxiB,IADA,CAEL,KAAKyiB,YAFA,CAGL,KAAK/lB,MAHA,CAAP,CAKD,C,4CAESA,M,CAAQ,CAChB,KAAKA,MAAL,EAAeA,MAAf,CACD,C,6CAEW,CACV,MAAO,MAAKA,MAAZ,CACD,C,yCAES,CACR,MAAO,MAAKsD,IAAZ,CACD,C,uDAEgB,CACf,OAAQ,KAAKA,IAAb,EACE,IAAK0iB,aAAL,CACA,IAAKA,aAAL,CACA,IAAKA,MAAL,CACA,IAAKA,qBAAL,CACA,IAAKA,qBAAL,CACE,MAAO,MAAKhmB,MAAZ,CACF,IAAKgmB,cAAL,CACE,MAAO,MAAKhmB,MAAL,CAAc,CAArB,CACF,IAAKgmB,0BAAL,CACE,MAAO,MAAKhmB,MAAL,CAAc,GAArB,CAVJ,CAYD,C,qDAEe,CACd,OAAQ,KAAKsD,IAAb,EACE,IAAK0iB,aAAL,CACA,IAAKA,aAAL,CACA,IAAKA,MAAL,CACA,IAAKA,qBAAL,CACA,IAAKA,qBAAL,CACE,MAAO,EAAP,CACF,IAAKA,cAAL,CACE,MAAO,EAAP,CACF,IAAKA,0BAAL,CACE,MAAO,IAAP,CAVJ,CAYD,C,6CAEW,CACV,MAAO,CACL1iB,IAAI,CAAE,KAAKA,IADN,CAELyiB,YAAY,CAAE,KAAKA,YAFd,CAGL/lB,MAAM,CAAE,KAAKA,MAHR,CAAP,CAKD,C,iDAEsB,IAAXgE,KAAW,2DAAJ,EAAI,CACrB,KAAKV,IAAL,CAAYU,IAAI,CAACV,IAAjB,CACA,KAAKyiB,YAAL,CAAoB/hB,IAAI,CAAC+hB,YAAzB,CACA,KAAK/lB,MAAL,CAAcgE,IAAI,CAAChE,MAAnB,CAEA,MAAO,KAAP,CACD,C,sCAGY8lB,0HAAf,E;;GC1EMG,0D,yBACJ,sCAAYC,GAAZ,CAAiBC,IAAjB,CAAuB9U,OAAvB,CAAgC,CAAC,6EAC/B,KAAK6U,GAAL,CAAWA,GAAX,CACA,KAAKC,IAAL,CAAYA,IAAZ,CACA,KAAK9U,OAAL,CAAeA,OAAO,CAAGA,OAAO,CAACrU,GAAR,CAAY,SAAA4H,KAAK,QAAIA,MAAK,CAACpJ,KAAN,EAAJ,EAAjB,CAAH,CAAyC,EAA/D,CACD,C,gHAEW,CACV,MAAO,CACL0qB,GAAG,CAAE,KAAKA,GADL,CAELC,IAAI,CAAE,KAAKA,IAFN,CAGL9U,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QAAIA,MAAK,CAACqB,SAAN,EAAJ,EAAtB,CAHJ,CAAP,CAKD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKkiB,GAAL,CAAWliB,IAAI,CAACkiB,GAAL,EAAY,CAAvB,CACA,KAAKC,IAAL,CAAYniB,IAAI,CAACmiB,IAAL,EAAa,CAAzB,CACA,KAAK9U,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QACpB,IAAIwhB,yCAAJ,GAA6BlgB,WAA7B,CAAyCtB,KAAzC,CADoB,EAAtB,CADW,CAIX,EAJJ,CAMA,MAAO,KAAP,CACD,C,uDAEgB,CACf,MAAO,MAAKshB,GAAZ,CACD,C,yCAES,CACR,MAAO,MAAKC,IAAZ,CACD,C,sDAEc5vB,M,CAAQ,CACrB,MAAO,MAAK8vB,cAAL,CAAoBL,YAApB,CAA0CzvB,MAA1C,CAAP,CACD,C,6CAEW,CACV,GAAM+vB,SAAQ,CAAG,EAAjB,CAEA,KAAKjV,OAAL,CACGvM,MADH,CACU,SAAAF,KAAK,QAAIA,MAAK,CAAC2hB,OAAN,KAAoBP,YAAxB,EADf,EAEG5pB,OAFH,CAEW,SAAAwI,KAAK,CAAI,CAChB,GAAM4hB,SAAQ,CAAGF,QAAQ,CAAC9U,IAAT,CACf,SAAAiV,aAAa,QAAIA,cAAa,CAACV,YAAd,GAA+BnhB,KAAK,CAACmhB,YAAzC,EADE,CAAjB,CAIA,GAAIS,QAAJ,CAAc,CACZA,QAAQ,CAACxmB,MAAT,EAAmB4E,KAAK,CAAC5E,MAAzB,CACD,CAFD,IAEO,CACLsmB,QAAQ,CAAChqB,IAAT,CAAcsI,KAAK,CAACpJ,KAAN,EAAd,EACD,CACF,CAZH,EAcA,MAAO8qB,SAAP,CACD,C,sDAEchjB,I,CAAM/M,M,CAAQ,CAC3B,GAAIA,MAAM,WAAYmwB,UAAtB,CAA4B,CAC1BnwB,MAAM,CAAGA,MAAM,CAACoO,EAAhB,CACD,CAED,MAAO,MAAK0M,OAAL,CACJvM,MADI,CACG,SAAAF,KAAK,QAAIA,MAAK,CAACtB,IAAN,GAAeA,IAAf,EAAuBsB,KAAK,CAACmhB,YAAN,GAAuBxvB,MAAlD,EADR,EAEJ4N,MAFI,CAEG,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAAK,CAAC+hB,SAAN,EAA1B,EAFH,CAEgD,CAFhD,CAAP,CAGD,C,4CAGYV,+HAAf,E;;ACrEO,GAAMW,uCAAb,mZAAsCxoB,KAAtC,G,GAEMyoB,4C,yBACJ,+BAAY3jB,IAAZ,CAAkB,CAAC,sEACjB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAK4jB,QAAL,CAAgB,GAAIb,kCAAJ,EAAhB,CACD,C,yGAEW,CACV,MAAO,MAAKa,QAAL,CAAc7gB,SAAd,EAAP,CACD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAK8iB,QAAL,CAAc5gB,WAAd,CAA0BlC,IAA1B,EAEA,MAAO,KAAP,CACD,C,2FAEkC,CACjC,KAAK8iB,QAAL,CAAgB,GAAIb,kCAAJ,CACd,KAAKc,cAAL,EADc,CAEd,KAAKC,OAAL,EAFc,CAGd,KAAKC,aAAL,EAHc,CAAhB,CAKD,C,oDAEajnB,M,CAAQ,CACpB,MAAO,MAAKknB,WAAL,CAAiBlB,KAAjB,CAAgC,KAAK9iB,IAAL,CAAUyB,EAA1C,CAA8C3E,MAA9C,CAAP,CACD,C,8CAEUA,M,CAAQ,CACjB,KAAKmnB,QAAL,CAAcnB,KAAd,CAA6B,KAAK9iB,IAAL,CAAUyB,EAAvC,CAA2C3E,MAA3C,EACD,C,4DAEiBzJ,M,CAAQyJ,M,CAAQ,CAChC,KAAKmnB,QAAL,CAAcnB,YAAd,CAAoCzvB,MAApC,CAA4CyJ,MAA5C,EACD,C,kEAEoBzJ,M,CAAQyJ,M,CAAQ,CACnC,MAAO,MAAKknB,WAAL,CAAiBlB,YAAjB,CAAuCzvB,MAAvC,CAA+CyJ,MAA/C,CAAP,CACD,C,yCAES,CACR,MAAO,MAAKonB,KAAL,CAAWpB,KAAX,CAA0B,KAAK9iB,IAAL,CAAUyB,EAApC,CAAP,CACD,C,uDAEgB,CACf,MAAO,MAAKyiB,KAAL,CAAWpB,YAAX,CAAP,CACD,C,sDAEczvB,M,CAAQ,CACrB,MAAO,MAAK6wB,KAAL,CAAWpB,YAAX,CAAiCzvB,MAAjC,CAAP,CACD,C,oCAEK+M,I,CAAM/M,M,CAAQ,CAClB,GAAIA,MAAM,EAAIA,MAAM,WAAYmwB,UAAhC,CAAsC,CACpCnwB,MAAM,CAAGA,MAAM,CAACoO,EAAhB,CACD,CAED,GAAIrB,IAAI,GAAK0iB,YAAb,CAAmC,CACjC,MAAO,MAAKqB,WAAL,GAAmBljB,MAAnB,CACL,SAACC,KAAD,CAAQiF,MAAR,QACEjF,MAAK,CAAGiF,MAAM,CAACC,WAAP,CAAmB,sBAAnB,CAA2ChG,IAA3C,CADV,EADK,CAGL,CAHK,CAAP,CAKD,CAED,GAAMrE,OAAM,CAAG,KAAKgoB,aAAL,GACZniB,MADY,CACL,SAACF,KAAD,QAAWA,MAAK,CAACtB,IAAN,GAAeA,IAAf,EAAuBsB,KAAK,CAACmhB,YAAN,GAAuBxvB,MAAzD,EADK,EAEZ4N,MAFY,CAEL,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAAK,CAAC+hB,SAAN,EAA1B,EAFK,CAEwC,CAFxC,CAAf,CAIA,MAAO1nB,OAAP,CACD,C,0CAEQqE,I,CAAM/M,M,CAAQyJ,M,CAAQ,CAC7B,GAAIzJ,MAAM,EAAIA,MAAM,WAAYmwB,UAAhC,CAAsC,CACpCnwB,MAAM,CAAGA,MAAM,CAACoO,EAAhB,CACD,CAED,GAAM0M,QAAO,CAAG,KAAK4V,aAAL,EAAhB,CACA5V,OAAO,CAAC/U,IAAR,CAAa,GAAIwpB,yCAAJ,CAA2BxiB,IAA3B,CAAiC/M,MAAjC,CAAyCyJ,MAAzC,CAAb,EAEA,KAAKsnB,aAAL,CAAmBjW,OAAnB,EACD,C,gDAEW/N,I,CAAM/M,M,CAAQyJ,M,CAAQ,CAChC,GAAMqR,QAAO,CAAG,KAAK4V,aAAL,EAAhB,CACA,GAAI,CACF,KAAKE,QAAL,CAAc7jB,IAAd,CAAoB/M,MAApB,CAA4ByJ,MAA5B,EACA,KAAKsnB,aAAL,CAAmBjW,OAAnB,EACA,MAAO,KAAP,CACD,CAAC,MAAO3W,CAAP,CAAU,CACV,GAAIA,CAAC,WAAYksB,uCAAjB,CAAmC,CACjC,KAAKU,aAAL,CAAmBjW,OAAnB,EACA,MAAO,MAAP,CACD,CAED,KAAM3W,EAAN,CACD,CACF,C,6CAEW,CACV,GAAM4rB,SAAQ,CAAG,EAAjB,CAEA,KAAKe,WAAL,GACGljB,MADH,CAEI,SAACiG,GAAD,CAAMf,MAAN,+DAAqBe,GAArB,+CAA6Bf,MAAM,CAACC,WAAP,CAAmB,cAAnB,CAA7B,IAFJ,CAGI,EAHJ,EAKGxE,MALH,CAKU,SAACF,KAAD,QAAWA,MAAK,CAAC2hB,OAAN,KAAoBP,YAA/B,EALV,EAMG5pB,OANH,CAMW,SAACwI,KAAD,CAAW,CAClB,GAAM4hB,SAAQ,CAAGF,QAAQ,CAAC9U,IAAT,CACf,SAACiV,aAAD,QAAmBA,cAAa,CAACV,YAAd,GAA+BnhB,KAAK,CAACmhB,YAAxD,EADe,CAAjB,CAIA,GAAIS,QAAJ,CAAc,CACZA,QAAQ,CAACxmB,MAAT,EAAmB4E,KAAK,CAAC5E,MAAzB,CACD,CAFD,IAEO,CACLsmB,QAAQ,CAAChqB,IAAT,CAAcsI,KAAK,CAACpJ,KAAN,EAAd,EACD,CACF,CAhBH,EAkBA,MAAO8qB,SAAP,CACD,C,qDAEe,CACd,MAAO,MAAKe,WAAL,GAAmBljB,MAAnB,CACL,SAACiG,GAAD,CAAMf,MAAN,+DAAqBe,GAArB,+CAA6Bf,MAAM,CAACC,WAAP,CAAmB,cAAnB,CAA7B,IADK,CAEL,EAFK,CAAP,CAID,C,iDAEa,CACZ,MAAO,MAAKpG,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJtE,MAFI,CAEG,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,WAAnB,CAAZ,EAFH,CAAP,CAGD,C,uEAEwB,CACvB,KAAKge,aAAL,CAAmB,KAAKL,aAAL,EAAnB,CAAyC,IAAzC,EACD,C,6CAEW,CACV,KAAKI,WAAL,GAAmBjrB,OAAnB,CAA2B,SAACiN,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,SAAnB,CAAZ,EAA3B,EACD,C,oDAEa+H,O,CAAkC,mBAAzBkW,gBAAyB,2DAAP,KAAO,CAC9C,KAAKC,SAAL,GACA,GAAMC,gBAAe,CAAGpW,OAAO,CAACvM,MAAR,CAAe,SAACF,KAAD,QAAWA,MAAK,CAAC+hB,SAAN,GAAoB,CAA/B,EAAf,CAAxB,CAEAtV,OAAO,CACJvM,MADH,CACU,SAACF,KAAD,QAAWA,MAAK,CAAC+hB,SAAN,GAAoB,CAA/B,EADV,EAEGjc,IAFH,CAEQ,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GACED,CAAC,CAAC8P,IAAF,GAAW0iB,YAAX,EACAvyB,CAAC,CAAC6P,IAAF,GAAW0iB,YAFb,CAGE,CACA,MAAO,EAAP,CACD,CAED,GACExyB,CAAC,CAAC8P,IAAF,GAAW0iB,YAAX,EACAvyB,CAAC,CAAC6P,IAAF,GAAW0iB,YAFb,CAGE,CACA,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAlBH,EAmBGhpB,GAnBH,CAmBO,SAAC4H,KAAD,CAAW,CACd6iB,eAAe,CACZ3iB,MADH,CAEI,SAAC4iB,aAAD,QACEA,cAAa,CAACpkB,IAAd,GAAuBsB,KAAK,CAACtB,IAA7B,EACAokB,aAAa,CAAC3B,YAAd,GAA+BnhB,KAAK,CAACmhB,YAFvC,EAFJ,EAMG3pB,OANH,CAMW,SAACsrB,aAAD,CAAmB,CAC1B,GAAI9iB,KAAK,CAAC+hB,SAAN,IAAqBz0B,IAAI,CAACwE,GAAL,CAASgxB,aAAa,CAACf,SAAd,EAAT,CAAzB,CAA8D,CAC5D/hB,KAAK,CAAC5E,MAAN,EAAgB0nB,aAAa,CAACf,SAAd,EAAhB,CACAe,aAAa,CAAC1nB,MAAd,CAAuB,CAAvB,CACD,CAHD,IAGO,IACL9N,IAAI,CAACwE,GAAL,CAASgxB,aAAa,CAACf,SAAd,EAAT,EAAsC/hB,KAAK,CAAC+hB,SAAN,EADjC,CAEL,CACAe,aAAa,CAAC1nB,MAAd,EAAwB4E,KAAK,CAAC+hB,SAAN,EAAxB,CACA/hB,KAAK,CAAC5E,MAAN,CAAe,CAAf,CACD,CACF,CAhBH,EAkBA,MAAO4E,MAAP,CACD,CAvCH,EAwCGE,MAxCH,CAwCU,SAACF,KAAD,QAAWA,MAAK,CAAC+hB,SAAN,KAAsB,CAAjC,EAxCV,EAyCGvqB,OAzCH,CAyCW,SAACwI,KAAD,QAAW,MAAI,CAAC+iB,gBAAL,CAAsB/iB,KAAtB,CAA6B2iB,eAA7B,CAAX,EAzCX,EA2CA,GAAIE,eAAe,CAAClpB,IAAhB,CAAqB,SAACqG,KAAD,QAAWA,MAAK,CAAC+hB,SAAN,KAAsB,CAAjC,EAArB,CAAJ,CAA8D,CAC5D,KAAM,IAAIC,uCAAJ,CAAqB,mCAArB,CAAN,CACD,CACF,C,0DAEgBhiB,K,CAAO2iB,e,CAAiB,CACvC,GAAIvnB,OAAM,CAAG4E,KAAK,CAAC+hB,SAAN,EAAb,CACA,MAAO3mB,MAAM,CAAG,CAAhB,CAAmB,CACjB,GAAM4nB,iBAAgB,CAAG,KAAKC,2BAAL,CAAiCjjB,KAAjC,CAAzB,CAEA,GAAIgjB,gBAAgB,CAACz0B,MAAjB,GAA4B,CAAhC,CAAmC,CACjC,GAAIo0B,eAAJ,CAAqB,CACnB,OACD,CAFD,IAEO,CACL,KAAM,IAAIX,uCAAJ,CAAqB,YAArB,CAAN,CACD,CACF,CAEDgB,gBAAgB,CAACE,KAAjB,GAAyBxe,WAAzB,CAAqC,UAArC,CAAiD,CAC/ChG,IAAI,CAAEsB,KAAK,CAACtB,IADmC,CAE/C/M,MAAM,CAAEqO,KAAK,CAACmhB,YAFiC,CAG/C/lB,MAAM,CAAE,CAHuC,CAAjD,EAKAA,MAAM,GACP,CACF,C,gFAE2B4E,K,CAAO,CACjC,MAAO,MAAKyiB,WAAL,GACJviB,MADI,CACG,SAACuE,MAAD,QACNA,OAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAC7BhG,IAAI,CAAEsB,KAAK,CAACtB,IADiB,CAE7BtD,MAAM,CAAE,CAFqB,CAA/B,CADM,EADH,EAOJ0K,IAPI,CAOC,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAMs0B,YAAW,CAAGv0B,CAAC,CAAC8V,WAAF,CAAc,iBAAd,CAApB,CACA,GAAM0e,YAAW,CAAGv0B,CAAC,CAAC6V,WAAF,CAAc,iBAAd,CAApB,CAEA,GAAIye,WAAW,CAAC50B,MAAZ,CAAqB60B,WAAW,CAAC70B,MAArC,CAA6C,CAC3C,MAAO,CAAC,CAAR,CACD,CAFD,IAEO,IAAI40B,WAAW,CAAC50B,MAAZ,CAAqB60B,WAAW,CAAC70B,MAArC,CAA6C,CAClD,MAAO,EAAP,CACD,CAED,MAAO,EAAP,CACD,CAlBI,CAAP,CAmBD,C,qCAGY0zB,0GAAf,E;;GCxPMoB,U,yBACJ,cAAYtjB,EAAZ,CAAgBujB,QAAhB,CAA2C,IAAjBC,YAAiB,2DAAH,CAAG,sDACzC,KAAKxjB,EAAL,CAAUA,EAAV,CACA,KAAKujB,QAAL,CAAgBA,QAAhB,CACA,KAAKC,WAAL,CAAmBA,WAAnB,CACD,C,wFAEW,CACV,MAAO,CACLxjB,EAAE,CAAE,KAAKA,EADJ,CAELujB,QAAQ,CAAE,KAAKA,QAFV,CAGLC,WAAW,CAAE,KAAKA,WAHb,CAAP,CAKD,C,gDAEWnkB,I,CAAM,CAChB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAf,CACA,KAAKujB,QAAL,CAAgBlkB,IAAI,CAACkkB,QAArB,CACA,KAAKC,WAAL,CAAmBnkB,IAAI,CAACmkB,WAAxB,CAEA,MAAO,KAAP,CACD,C,oBAGYF,wDAAf,E;;GCtBMG,sB,yBACJ,qBAAc,CAAC,2DACb,KAAKjD,IAAL,CAAY,IAAZ,CACD,C,+EAEEA,I,CAAM,CACP,MAAOA,KAAI,EAAI,KAAKA,IAAL,CAAUxgB,EAAV,GAAiBwgB,IAAI,CAACxgB,EAArC,CACD,C,wCAEOwgB,I,CAAM,CACZ,KAAKA,IAAL,CAAYA,IAAZ,CACD,C,wCAEOA,I,CAAM,CACZ,MAAOA,KAAI,EAAI,KAAKA,IAAb,EAAqB,KAAKA,IAAL,CAAUxgB,EAAV,GAAiBwgB,IAAI,CAACxgB,EAAlD,CACD,C,gDAEWwgB,I,CAAM,CAChB,KAAKA,IAAL,CAAYA,IAAI,CAAG,GAAI8C,WAAJ,GAAW/hB,WAAX,CAAuBif,IAAvB,CAAH,CAAkCnzB,SAAlD,CAEA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,MAAKmzB,IAAL,CAAY,KAAKA,IAAL,CAAUlf,SAAV,EAAZ,CAAoCjU,SAA3C,CACD,C,0BAGYo2B,yEAAf,E;;GC1BMC,0B,yBACJ,sBAAYnlB,IAAZ,CAAkB,CAAC,6DACjB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKolB,KAAL,CAAa,EAAb,CACD,C,mGAEWnlB,I,CAAM,CAChB,KAAKmlB,KAAL,CAAWhsB,IAAX,CAAgB6G,IAAI,CAAC3H,KAAL,EAAhB,EACA,KAAK+sB,UAAL,GACD,C,sDAEcplB,I,CAAM,CACnB,GAAMqlB,SAAQ,CAAG,KAAKF,KAAL,CAAW9W,IAAX,CAAgB,SAACiX,KAAD,QAAWA,MAAK,CAAChqB,MAAN,CAAa0E,IAAb,CAAX,EAAhB,CAAjB,CACA,KAAKmlB,KAAL,CAAa,KAAKA,KAAL,CAAWxjB,MAAX,CAAkB,SAAC2jB,KAAD,QAAWA,MAAK,GAAKD,QAArB,EAAlB,CAAb,CACA,KAAKD,UAAL,GACD,C,wDAEeplB,I,CAAM,CACpB,KAAKmlB,KAAL,CAAW,KAAKA,KAAL,CAAWn1B,MAAX,CAAoB,CAA/B,EAAoCgQ,IAApC,CACA,KAAKolB,UAAL,GACD,C,wEAEuB5iB,I,CAAM,CAC5B,KAAK2iB,KAAL,CAAa,KAAKA,KAAL,CAAWxjB,MAAX,CACX,SAAC3B,IAAD,QACEA,KAAI,CAACwC,IAAL,CAAYA,IAAZ,EAAoBxC,IAAI,CAACulB,KAAL,EAApB,EAAoCvlB,IAAI,CAACwlB,QAAL,EAApC,EAAuDxlB,IAAI,CAACylB,OAAL,EADzD,EADW,CAAb,CAIA,KAAKL,UAAL,GACD,C,oEAEqB5iB,I,CAAM,CAC1B,KAAK2iB,KAAL,CAAa,KAAKA,KAAL,CAAWxjB,MAAX,CACX,SAAC3B,IAAD,QAAUA,KAAI,CAACwC,IAAL,CAAYA,IAAZ,EAAoBxC,IAAI,CAACylB,OAAL,EAA9B,EADW,CAAb,CAGA,KAAKL,UAAL,GACD,C,gFAE2B5iB,I,CAAM,CAChC,KAAK2iB,KAAL,CAAa,KAAKA,KAAL,CAAWxjB,MAAX,CAAkB,SAAC3B,IAAD,QAAUA,KAAI,CAACwC,IAAL,GAAcA,IAAxB,EAAlB,CAAb,CACA,KAAK4iB,UAAL,GACD,C,iDAEa,CACZ,MAAO,MAAKD,KAAL,CAAWtrB,GAAX,CAAe,SAACmG,IAAD,QAAUA,KAAI,CAAC3H,KAAL,EAAV,EAAf,CAAP,CACD,C,uEAEwB,CACvB,MAAO,MAAK8sB,KAAL,CACJxjB,MADI,CACG,SAAC3B,IAAD,QAAUA,KAAI,CAACyE,aAAL,EAAV,EADH,EAEJ5K,GAFI,CAEA,SAACmG,IAAD,QAAUA,KAAI,CAAC3H,KAAL,EAAV,EAFA,CAAP,CAGD,C,iDAEa,CACZ,GAAI,KAAK8sB,KAAL,CAAWn1B,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAO,KAAP,CACD,CAED,MAAO,MAAKm1B,KAAL,CAAW,KAAKA,KAAL,CAAWn1B,MAAX,CAAoB,CAA/B,EAAkCqI,KAAlC,EAAP,CACD,C,mDAEc,CACb,GAAMrH,MAAK,CAAG,KAAKm0B,KAAL,CAAW9W,IAAX,CAAgB,SAACrO,IAAD,QAAUA,KAAI,CAACylB,OAAL,EAAV,EAAhB,CAAd,CACA,GAAI,CAACz0B,KAAL,CAAY,CACV,MAAO,KAAP,CACD,CAED,MAAOA,MAAK,CAACqH,KAAN,EAAP,CACD,C,qDAEe,CACd,GAAMqtB,OAAM,CAAG,KAAKP,KAAL,CAAW9W,IAAX,CAAgB,SAACrO,IAAD,QAAUA,KAAI,CAACwlB,QAAL,EAAV,EAAhB,CAAf,CACA,GAAI,CAACE,MAAL,CAAa,CACX,MAAO,KAAP,CACD,CAED,MAAOA,OAAM,CAACrtB,KAAP,EAAP,CACD,C,4DAEiBstB,O,CAAS,CACzB,KAAKR,KAAL,CAAa,KAAKA,KAAL,CAAWtrB,GAAX,CAAe,SAACmG,IAAD,CAAU,CACpC,GAAIA,IAAI,CAACwlB,QAAL,EAAJ,CAAqB,CACnB,MAAOG,QAAP,CACD,CAFD,IAEO,CACL,MAAO3lB,KAAI,CAAC3H,KAAL,EAAP,CACD,CACF,CANY,CAAb,CAOD,C,wDAEewL,W,CAAa,CAC3B,KAAKshB,KAAL,wDACK,KAAKA,KAAL,CAAWxjB,MAAX,CAAkB,SAAC3B,IAAD,QAAU,CAACA,IAAI,CAACyE,aAAL,EAAX,EAAlB,CADL,+CAEKZ,WAAW,CAAClC,MAAZ,CAAmB,SAAC3B,IAAD,QAAUA,KAAI,CAACyE,aAAL,EAAV,EAAnB,CAFL,GAKA,KAAK0gB,KAAL,CAAa,KAAKA,KAAL,CAAWtrB,GAAX,CAAe,SAACmG,IAAD,QAAUA,KAAI,CAAC3H,KAAL,EAAV,EAAf,CAAb,CACA,KAAK+sB,UAAL,GACD,C,+CAEY,gBACX,GAAIQ,UAAS,CAAG,IAAhB,CAEA,KAAKT,KAAL,CAAWlsB,OAAX,CAAmB,SAAC+G,IAAD,CAAU,CAC3B,GACE4lB,SAAS,GAAK,IAAd,GACC5lB,IAAI,CAACulB,KAAL,IAAgBvlB,IAAI,CAACylB,OAAL,EAAhB,EAAkCzlB,IAAI,CAACwlB,QAAL,EADnC,GAEAxlB,IAAI,CAAC7E,KAAL,GAAe,CAHjB,CAIE,CACAyqB,SAAS,CAAG5lB,IAAI,CAAC7E,KAAjB,CACD,CAND,IAMO,IAAIyqB,SAAS,GAAK,IAAlB,CAAwB,CAC7BA,SAAS,GACT5lB,IAAI,CAAC7E,KAAL,CAAayqB,SAAb,CACD,CACF,CAXD,EAaA,KAAK7lB,IAAL,CAAUiG,OAAV,CAAkB6f,qBAAlB,CAAwC,sBAAxC,EAEA,KAAKV,KAAL,CAAWlsB,OAAX,CAAmB,SAAC+G,IAAD,CAAU,CAC3B,GAAM8lB,YAAW,CAAG9lB,IAAI,CAACyC,cAAL,CAAoBsjB,cAApB,EAApB,CACAD,WAAW,CAAC7sB,OAAZ,CAAoB,SAAC+sB,UAAD,CAAgB,CAClCA,UAAU,CAAC/sB,OAAX,CAAmB,cAA4B,IAAzB4D,OAAyB,MAAzBA,MAAyB,CAAjB0E,UAAiB,MAAjBA,UAAiB,CAC7C,KAAI,CAACxB,IAAL,CAAUiG,OAAV,CACG6F,aADH,CACiBtK,UADjB,EAEG4E,WAFH,CAEe,oBAFf,CAEqCtJ,MAFrC,EAGD,CAJD,EAKD,CAND,EAOD,CATD,EAUD,C,uDAEgB,CACf,GAAM5L,IAAG,CAAG,KAAKk0B,KAAL,CACTc,KADS,GAETC,OAFS,GAGT7X,IAHS,CAGJ,SAACrO,IAAD,QAAUA,KAAI,CAACulB,KAAL,EAAV,EAHI,CAAZ,CAKA,GAAI,CAACt0B,GAAL,CAAU,CACR,MAAO,KAAP,CACD,CAED,MAAOA,IAAG,CAACoH,KAAJ,EAAP,CACD,C,6EAE2B,CAC1B,GAAMpH,IAAG,CAAG,KAAKqY,cAAL,EAAZ,CACA,GAAI,CAACrY,GAAL,CAAU,CACR,GAAMy0B,OAAM,CAAG,KAAKxb,aAAL,EAAf,CAEA,GAAI,CAACwb,MAAL,CAAa,CACX,GAAM10B,MAAK,CAAG,KAAKm1B,YAAL,EAAd,CACA,MAAOn1B,MAAP,CACD,CAED,MAAO00B,OAAP,CACD,CAED,MAAOz0B,IAAP,CACD,C,mDAEc,CACb,GAAM+O,KAAI,CAAG,KAAKmlB,KAAL,CAAW9W,IAAX,CAAgB,SAACrO,IAAD,QAAUA,KAAI,CAACsD,OAAL,EAAV,EAAhB,CAAb,CAEA,GAAI,CAACtD,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CAED,MAAOA,KAAI,CAAC3H,KAAL,EAAP,CACD,C,2CAEU,CACT,GAAMpH,IAAG,CAAG,KAAKoT,yBAAL,EAAZ,CACA,MAAOpT,IAAG,CAACsR,MAAX,CACD,C,6CAEW,CACV,MAAO,MAAK4B,WAAL,EAAP,CACD,C,iDAEa,CACZ,GAAMnE,KAAI,CAAG,KAAKmlB,KAAL,CAAW9W,IAAX,CAAgB,SAACrO,IAAD,QAAUA,KAAI,CAACuD,MAAL,EAAV,EAAhB,CAAb,CAEA,GAAI,CAACvD,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CAED,MAAOA,KAAI,CAAC3H,KAAL,EAAP,CACD,C,+CAEY,CACX,GAAM2H,KAAI,CAAG,KAAKgF,YAAL,EAAb,CAEA,GAAI,CAAChF,IAAL,CAAW,CACT,MAAO,EAAP,CACD,CAED,MAAOA,KAAI,CAAC+B,KAAZ,CACD,C,2DAEkB,CACjB,GAAM/B,KAAI,CAAG,KAAKqE,yBAAL,EAAb,CAEA,GAAI,CAACrE,IAAL,CAAW,CACT,MAAO,EAAP,CACD,CAED,MAAOA,KAAI,CAAC0C,OAAZ,CACD,C,yDAEiB,CAChB,MAAO,MAAK3C,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJjF,MAFI,CAGH,SAACmK,GAAD,CAAMjF,MAAN,QAAiBA,OAAM,CAACC,WAAP,CAAmB,iBAAnB,CAAsC,IAAtC,CAA4CgF,GAA5C,CAAjB,EAHG,CAIH,CAJG,CAAP,CAMD,C,6DAEmB,CAClB,MAAO,MAAKga,KAAL,CACJxjB,MADI,CACG,SAAC3B,IAAD,QAAUA,KAAI,CAACyC,cAAf,EADH,EAEJzB,MAFI,CAGH,SAACC,KAAD,CAAQjB,IAAR,QAAiBiB,MAAK,CAAGjB,IAAI,CAACyC,cAAL,CAAoB2jB,sBAApB,EAAzB,EAHG,CAIH,CAJG,CAAP,CAMD,C,2EAE0B,CACzB,MAAO,MAAKC,eAAL,GAAyB,KAAKC,iBAAL,EAAhC,CACD,C,mDAEc,CACb,MAAO,MAAKvmB,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJtE,MAFI,CAEG,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,YAAnB,CAAZ,EAFH,EAGJxE,MAHI,CAGG,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACE,UAAP,EAAb,EAHH,CAAP,CAID,C,qDAEe,CACd,MAAO,MAAKrG,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJjF,MAFI,CAGH,SAACmK,GAAD,CAAMjF,MAAN,QAAiBA,OAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC,IAApC,CAA0CgF,GAA1C,CAAjB,EAHG,CAIH,CAJG,CAAP,CAMD,C,oDAEaob,S,CAAW,CACvB,GAAM1G,aAAY,CAAG,KAAK9f,IAAL,CAAUlO,cAAV,EAArB,CACA,GAAMiuB,WAAU,CAAG,KAAK/f,IAAL,CAAUkhB,SAAV,EAAnB,CACA,GAAMuF,kBAAiB,CAAGD,SAAS,CAAC10B,cAAV,EAA1B,CACA,GAAM40B,gBAAe,CAAGF,SAAS,CAACtF,SAAV,EAAxB,CAEA,MAAO,MAAKlhB,IAAL,CAAU2mB,QAAV,CAAmBtrB,IAAnB,CAAwB,SAACC,GAAD,CAAS,CACtC,MAAOkrB,UAAS,CAACG,QAAV,CAAmBtrB,IAAnB,CAAwB,SAACurB,QAAD,QAC7B9G,aAAY,CACThvB,GADH,CACOwK,GAAG,CAACjB,MAAJ,CAAW0lB,UAAX,CADP,EAEGxkB,MAFH,CAEUkrB,iBAAiB,CAAC31B,GAAlB,CAAsB81B,QAAQ,CAACvsB,MAAT,CAAgBqsB,eAAhB,CAAtB,CAFV,CAD6B,EAAxB,CAAP,CAKD,CANM,CAAP,CAOD,C,2DAEkB,CACjB,GAAM/iB,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0B,KAAKwE,WAAL,EAA1B,CAAb,CAEA,GAAMzI,OAAM,CAAG4H,IAAI,CAACE,GAAL,EAAf,CACA,MAAO9H,OAAP,CACD,C,6FAEmC,iBAClC,GAAM4O,UAAS,CAAG,QAAZA,UAAY,SAChB,OAAI,CAACnG,WAAL,GAAmBnJ,IAAnB,CAAwB,SAAC4E,IAAD,QAAUA,KAAI,CAACyE,aAAL,EAAV,EAAxB,CADgB,EAAlB,CAGA,MAAO,IAAP,CAAa,CACX,GAAI,KAAKmiB,gBAAL,EAAJ,CAA6B,CAC3B,GAAMljB,KAAI,CAAG,GAAIiB,oBAAJ,CAAe,KAAK5E,IAApB,CAA0B,KAAKwE,WAAL,EAA1B,CAAb,CACAb,IAAI,CAACE,GAAL,GACA,GAAMC,YAAW,CAAGH,IAAI,CAACI,QAAL,EAApB,CACA,KAAK/D,IAAL,CAAUiC,QAAV,CAAmB+B,eAAnB,CAAmCF,WAAnC,EACA,OACD,CAED,GAAI,CAAC6G,SAAS,EAAd,CAAkB,CAChB,KAAM,IAAIzP,MAAJ,CACJ,8DADI,CAAN,CAGD,CAED,KAAK6K,cAAL,CACE,KAAKvB,WAAL,GACG5C,MADH,CACU,SAAC3B,IAAD,QAAUA,KAAI,CAAC4F,aAAL,EAAV,EADV,EAEGL,GAFH,EADF,EAKD,CACF,C,6CAEW,CACV,GAAMnB,QAAO,CAAG,KAAKkF,cAAL,EAAhB,CACA,GAAMpF,SAAQ,CAAG,KAAKC,WAAL,EAAjB,CACA,GAAID,QAAJ,CAAc,CACZE,OAAO,CAAC7B,MAAR,CAAiB,CAAC6B,OAAO,CAAC7B,MAA1B,CACD,CAED,KAAKskB,eAAL,CAAqBziB,OAArB,EACD,C,yCAES,CACR,MAAO,MAAKrE,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJjF,MAFI,CAEG,SAACiG,GAAD,CAAMf,MAAN,QAAiBe,IAAG,CAAGf,MAAM,CAACC,WAAP,CAAmB,SAAnB,CAA8B,IAA9B,CAAoC,CAApC,CAAvB,EAFH,CAEkE,CAFlE,CAAP,CAGD,C,mDAEc,CACb,MAAO,MAAKpG,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJjF,MAFI,CAGH,SAACiG,GAAD,CAAMf,MAAN,QAAiBe,IAAG,CAAGf,MAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,IAAnC,CAAyC,CAAzC,CAAvB,EAHG,CAIH,CAJG,CAAP,CAMD,C,iDAEa,CACZ,MAAO,MAAKpG,IAAL,CAAUiG,OAAV,CACJC,UADI,GAEJjF,MAFI,CAGH,SAACiG,GAAD,CAAMf,MAAN,QACEe,IAAG,CAAGf,MAAM,CAACC,WAAP,CAAmB,oBAAnB,CAAyC,IAAzC,CAA+C,CAA/C,CADR,EAHG,CAKH,CALG,CAAP,CAOD,C,iDAEa,iBACZ,GAAM2gB,SAAQ,CAAG,KAAKtgB,OAAL,EAAjB,CACA,GAAMugB,SAAQ,CAAG,KAAKC,WAAL,EAAjB,CAEA,GAAIvgB,KAAI,CAAG,CAAX,CAEA,GAAIsgB,QAAQ,CAAGD,QAAf,CAAyB,CACvB,KAAM,IAAI7rB,MAAJ,CACJ,oFADI,CAAN,CAGD,CAED,GAAMgsB,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,GAAMC,KAAI,CAAG,MAAI,CAACnnB,IAAL,CAAUiG,OAAV,CACVC,UADU,GAEVtE,MAFU,CAEH,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,SAAnB,CAA8B,IAA9B,CAAoC,CAApC,EAAyC,CAArD,EAFG,EAGVoB,IAHU,CAGL,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAM62B,MAAK,CAAG92B,CAAC,CAAC8V,WAAF,CAAc,SAAd,CAAyB,IAAzB,CAA+B,CAA/B,CAAd,CACA,GAAMihB,MAAK,CAAG92B,CAAC,CAAC6V,WAAF,CAAc,SAAd,CAAyB,IAAzB,CAA+B,CAA/B,CAAd,CAEA,GAAIghB,KAAK,CAAGC,KAAZ,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,GAAID,KAAK,CAAGC,KAAZ,CAAmB,CACjB,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAhBU,EAiBV7hB,GAjBU,EAAb,CAmBA,GAAI,CAAC2hB,IAAL,CAAW,CACT,KAAM,IAAIjsB,MAAJ,CACJ,oFADI,CAAN,CAGD,CAEDisB,IAAI,CAAC/gB,WAAL,CAAiB,UAAjB,CAA6B,CAA7B,EACD,CA3BD,CA6BA,MAAOM,IAAI,CAAGsgB,QAAd,CAAwB,CACtBE,OAAO,GACPxgB,IAAI,GACL,CACF,C,iDAEsB,IAAX5F,KAAW,2DAAJ,EAAI,CACrB,KAAKskB,KAAL,CAAatkB,IAAI,CAAChH,GAAL,CAAS,SAACwtB,QAAD,QACpB,IAAIhlB,uBAAJ,GAAoBU,WAApB,CAAgCskB,QAAhC,CADoB,EAAT,CAAb,CAIA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,MAAKlC,KAAL,CAAWtrB,GAAX,CAAe,SAACmG,IAAD,QAAUA,KAAI,CAAC8C,SAAL,EAAV,EAAf,CAAP,CACD,C,4BAGYoiB,+EAAf,E;;GC7XM3B,U,yBACJ,eAAuB,IAAX1iB,KAAW,2DAAJ,EAAI,sDACrB,KAAKmF,OAAL,CAAe,GAAI0a,iBAAJ,CAAgB,IAAhB,CAAf,CACA,KAAK4G,SAAL,CAAiB,CAAjB,CACA,KAAKllB,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKsD,SAAL,CAAiB,IAAjB,CACA,KAAK1D,WAAL,CAAmB,CAAnB,CACA,KAAKylB,eAAL,CAAuB,EAAvB,CACA,KAAKC,cAAL,CAAsB,EAAtB,CACA,KAAKd,QAAL,CAAgB,EAAhB,CAEA,KAAKe,SAAL,CAAiB,IAAjB,CACA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,iBAAL,GACA,KAAK5kB,WAAL,CAAiBlC,IAAjB,EACD,C,wGAEmB,CAAE,C,+DAED,CACnB,MACE,MAAK0mB,eAAL,CACA,KAAKvhB,OAAL,CACG6f,qBADH,CACyB,eADzB,CAC0C,CAAE+B,KAAK,CAAE,IAAT,CAD1C,EAEG5mB,MAFH,CAEU,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAA1B,EAFV,CAE2C,CAF3C,CAFF,CAMD,C,6DAEmB,CAClB,MACE,MAAK+lB,cAAL,CACA,KAAKxhB,OAAL,CACG6f,qBADH,CACyB,eADzB,CAC0C,CAAE+B,KAAK,CAAE,KAAT,CAD1C,EAEG5mB,MAFH,CAEU,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAA1B,EAFV,CAE2C,CAF3C,CAFF,CAMD,C,oDAEaxK,Q,CAAU,CACtB,GAAM5D,QAAO,CAAG1C,cAAc,CAC5BuC,wBAAwB,CAAC,KAAKylB,WAAL,EAAD,CAAqB1hB,QAArB,CADI,CAE5B,CAACzD,gBAAgB,CAAC,KAAKytB,SAAL,EAAD,CAFW,CAA9B,CAKA,GAAI5tB,OAAO,EAAI,GAAX,EAAkBA,OAAO,EAAI,EAA7B,EAAoCA,OAAO,EAAI,GAAX,EAAkBA,OAAO,EAAI,GAArE,CAA2E,CACzE,MAAO,MAAKw0B,kBAAL,EAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAKC,iBAAL,EAAP,CACD,CACF,C,mDAEc,CACb,MAAO,MAAKR,SAAZ,CACD,C,6CAEW,CACV,GAAMliB,SAAQ,CAAG,KAAKpD,QAAL,CAAcqC,yBAAd,EAAjB,CACA,GAAI,CAACe,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAED,MAAOA,SAAQ,CAAC6b,SAAT,EAAP,CACD,C,iDAEa,CACZ,GAAM7b,SAAQ,CAAG,KAAKpD,QAAL,CAAcqC,yBAAd,EAAjB,CACA,GAAI,CAACe,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAED,MAAOA,SAAQ,CAACuT,WAAT,EAAP,CACD,C,uDAEgB,CACf,MAAO1e,0BAAmB,CAAC4F,aAApB,CAAkC,KAAK8Y,WAAL,EAAlC,CAAP,CACD,C,8CAEUvlB,M,CAAQ,CACjB,MAAO,MAAKulB,WAAL,GAAmB7mB,UAAnB,CAA8BsB,MAAM,CAACulB,WAAP,EAA9B,CAAP,CACD,C,oDAEavlB,M,CAAQ,CACpB,MAAO,MAAKvB,cAAL,GAAsBC,UAAtB,CAAiCsB,MAAM,CAACvB,cAAP,EAAjC,CAAP,CACD,C,iDAEa,CACZ,GAAMuT,SAAQ,CAAG,KAAKpD,QAAL,CAAcqC,yBAAd,EAAjB,CACA,GAAI,CAACe,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAED,MAAOA,SAAQ,CAACyE,WAAT,EAAP,CACD,C,mDAE2B,IAAfke,UAAe,2DAAH,CAAG,CAC1B,MAAO,MAAKrB,QAAL,CAAc7sB,GAAd,CAAkB,SAACwB,GAAD,QAASA,IAAG,CAACjB,MAAJ,CAAW2tB,SAAX,CAAT,EAAlB,CAAP,CACD,C,iDAEsB,IAAXlnB,KAAW,2DAAJ,EAAI,CACrB,GAAMmnB,SAAQ,CAAGnnB,IAAI,CAACmnB,QAAL,EAAiB,EAAlC,CACA,KAAKxmB,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,IAArB,CACA,KAAK3C,IAAL,CAAYgC,IAAI,CAAChC,IAAL,EAAa,eAAzB,CACA,KAAKopB,SAAL,CAAiB,KAAK/a,WAAL,CAAiBrO,IAAlC,CACA,KAAKqpB,MAAL,CAAcrnB,IAAI,CAACqnB,MAAL,EAAe,IAA7B,CAEA,KAAKliB,OAAL,CAAajD,WAAb,CAAyBilB,QAAQ,CAAChiB,OAAlC,EACA,KAAKmiB,MAAL,CAAc,GAAIlD,gBAAJ,CAAe,IAAf,EAAqBliB,WAArB,CAAiCilB,QAAQ,CAACG,MAA1C,CAAd,CACA,KAAKnmB,QAAL,CAAgB,GAAIkjB,kBAAJ,CAAiB,IAAjB,EAAuBniB,WAAvB,CAAmClC,IAAI,CAACmB,QAAxC,CAAhB,CACA,KAAKomB,iBAAL,CAAyB,GAAI1E,2BAAJ,CAA0B,IAA1B,EAAgC3gB,WAAhC,CACvBilB,QAAQ,CAACI,iBADc,CAAzB,CAGA,KAAKC,iBAAL,CAAyBL,QAAQ,CAACK,iBAAT,EAA8B,KAAvD,CAEA,MAAO,KAAP,CACD,C,6CAEW,CACV;;;;MAKA,MAAO,CACL7mB,EAAE,CAAE,KAAKA,EADJ,CAEL8mB,MAAM,CAAE,KAAKA,MAFR,CAGLzpB,IAAI,CAAE,KAAKA,IAHN,CAILopB,SAAS,CAAE,KAAKA,SAJX,CAKLC,MAAM,CAAE,KAAKA,MALR,CAMLlmB,QAAQ,CAAE,KAAKA,QAAL,CAAcc,SAAd,EANL,CAOLklB,QAAQ,CAAE,CACRhiB,OAAO,CAAE,KAAKA,OAAL,CAAalD,SAAb,EADD,CAERqlB,MAAM,CAAE,KAAKA,MAAL,CAAYrlB,SAAZ,EAFA,CAGRslB,iBAAiB,CAAE,KAAKA,iBAAL,CAAuBtlB,SAAvB,EAHX,CAIRulB,iBAAiB,CAAE,KAAKA,iBAJhB,CAPL,CAAP,CAcD,C,iDAEa,CACZ,MAAO,MAAKriB,OAAL,CAAa0D,WAAb,EAAP,CACD,C,iEAEqB,CACpB,MAAO,MAAK2e,iBAAZ,CACD,C,qEAEuB,CACtB,KAAKA,iBAAL,CAAyB,IAAzB,CACD,C,oDAEarG,I,CAAMC,I,CAAM,CACxB,GAAI,CAACA,IAAL,CAAW,CACT,KAAKjgB,QAAL,CAAcumB,uBAAd,CAAsC,KAAK/lB,IAA3C,EACD,CACD,KAAKwD,OAAL,CAAawiB,aAAb,CAA2BxG,IAA3B,CAAiCC,IAAjC,EACD,C,wCAEOzf,I,CAAM,CACZ,KAAKwD,OAAL,CAAawP,OAAb,CAAqBhT,IAArB,EACD,C,gDAEWA,I,CAAM,CAChB,KAAKR,QAAL,CAAcymB,2BAAd,CAA0CjmB,IAA1C,EACA,KAAKwD,OAAL,CAAa6I,WAAb,CAAyBrM,IAAzB,EACA,KAAK4lB,iBAAL,CAAuBM,gCAAvB,GACA,KAAKN,iBAAL,CAAuB/D,SAAvB,GAEA,KAAKgE,iBAAL,CAAyB,KAAzB,CACA,MAAO,KAAP,CACD,C,yGAEyC,CACxC,MAAO,MAAKriB,OAAL,CAAa2iB,uCAAb,EAAP,CACD,C,4DAEiB/G,U,CAAYC,Q,CAAUC,K,CAAO,CAC7C,KAAK9b,OAAL,CAAa4iB,iBAAb,CAA+BhH,UAA/B,CAA2CC,QAA3C,CAAqDC,KAArD,EACD,C,uDAEgB,CACf,KAAK9b,OAAL,CAAa6f,qBAAb,CAAmC,aAAnC,EACA,KAAK7f,OAAL,CAAa6f,qBAAb,CAAmC,mBAAnC,EACA,KAAK7f,OAAL,CAAa6f,qBAAb,CAAmC,YAAnC,EACD,C,oBAGYtC,uDAAf,E;;GCnMMsF,oB,yBACJ,mBAAYC,SAAZ,CAAuBC,QAAvB,CAAiCC,QAAjC,CAA+D,IAApBC,cAAoB,2DAAJ,EAAI,2DAC7D,KAAKznB,EAAL,CAAU,IAAV,CACA,KAAKsnB,SAAL,CAAiBA,SAAS,WAAYvF,UAArB,CAA4BuF,SAAS,CAACtnB,EAAtC,CAA2CsnB,SAA5D,CACA,KAAKC,QAAL,CAAgBD,SAAS,WAAYvF,UAArB,CAA4BwF,QAAQ,CAACvnB,EAArC,CAA0CunB,QAA1D,CACA,KAAKC,QAAL,CAAgBA,QAAQ,WAAYlV,kBAApB,CAAiCkV,QAAQ,CAACxnB,EAA1C,CAA+CwnB,QAA/D,CACA,KAAKC,aAAL,CAAqBA,aAArB,CACA,KAAKC,QAAL,CAAgB,KAAhB,CACD,C,oFAEK1nB,E,CAAI,CACR,KAAKA,EAAL,CAAUA,EAAV,CACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,KAAK0nB,QAAL,CAAgB,IAAhB,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACL1nB,EAAE,CAAE,KAAKA,EADJ,CAELsnB,SAAS,CAAE,KAAKA,SAFX,CAGLC,QAAQ,CAAE,KAAKA,QAHV,CAILC,QAAQ,CAAE,KAAKA,QAJV,CAKLC,aAAa,CAAE,KAAKA,aALf,CAMLC,QAAQ,CAAE,KAAKA,QANV,CAAP,CAQD,C,iDAEsB,IAAXroB,KAAW,2DAAJ,EAAI,CACrB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,IAArB,CACA,KAAKsnB,SAAL,CAAiBjoB,IAAI,CAACioB,SAAtB,CACA,KAAKC,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAKC,QAAL,CAAgBnoB,IAAI,CAACmoB,QAArB,CACA,KAAKC,aAAL,CAAqBpoB,IAAI,CAACooB,aAAL,EAAsB,EAA3C,CACA,KAAKC,QAAL,CAAgBroB,IAAI,CAACqoB,QAArB,CAEA,MAAO,KAAP,CACD,C,yBAGYL,wEAAf,E;;GC5CMM,oC,yBACJ,4BAAc,CAAC,kEACb,KAAK/f,QAAL,CAAgB,IAAhB,CACD,C,8FAEMA,Q,CAAU,CACf,KAAKA,QAAL,CAAgBA,QAAhB,CAEA,MAAO,KAAP,CACD,C,2DAEkB,gBACjB,MAAO,MAAKA,QAAL,CAAcI,KAAd,CACJ4f,QADI,GAEJpoB,MAFI,CAGH,SAACiG,GAAD,CAAMlH,IAAN,+DAAmBkH,GAAnB,+CAA2B,KAAI,CAACoiB,uBAAL,CAA6BtpB,IAA7B,CAA3B,IAHG,CAIH,EAJG,CAAP,CAMD,C,0DAEgByB,E,CAAI,CACnB,MAAO,MAAK8nB,gBAAL,GAAwBjb,IAAxB,CAA6B,SAAAkb,KAAK,QAAIA,MAAK,CAAC/nB,EAAN,GAAaA,EAAjB,EAAlC,CAAP,CACD,C,wEAEuBkX,O,CAAS,CAC/B,MAAOA,QAAO,CAAC1S,OAAR,CACJC,UADI,GAEJjF,MAFI,CAGH,SAACiG,GAAD,CAAMf,MAAN,+DACKe,GADL,+CAEKf,MAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC,EAApC,CAAwC,EAAxC,CAFL,IAHG,CAOH,EAPG,CAAP,CASD,C,8DAEkBD,M,CAAQ,CACzB,GAAMsjB,WAAU,CAAGtjB,MAAM,CAACC,WAAP,CAAmB,eAAnB,CAAnB,CACA,MAAOqjB,WAAU,EAAIA,UAAU,CAACx5B,MAAX,CAAoB,CAAzC,CACD,C,8EAE0BkW,M,CAAQ,CACjC,GAAMsjB,WAAU,CAAGtjB,MAAM,CAACC,WAAP,CAAmB,eAAnB,CAAnB,CACA,MAAOqjB,WAAU,EAAIA,UAAU,CAACx5B,MAAX,CAAoB,CAAlC,CAAsCw5B,UAAU,CAAC,CAAD,CAAV,CAAcT,QAApD,CAA+D,IAAtE,CACD,C,oFAE6B7iB,M,CAAQ9S,M,CAAQ,CAC5C,GAAMo2B,WAAU,CAAGtjB,MAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC,IAApC,CAA0C,EAA1C,CAAnB,CAEA,MAAOqjB,WAAU,CAACpuB,IAAX,CAAgB,SAAAmuB,KAAK,QAAIA,MAAK,CAACR,QAAN,GAAmB31B,MAAM,CAACoO,EAA9B,EAArB,CAAP,CACD,C,kDAEYkX,O,CAAStlB,M,CAAQq2B,M,CAAQ,CACpC,GAAI,CAAC,KAAKC,OAAL,CAAahR,OAAb,CAAsBtlB,MAAtB,CAA8Bq2B,MAA9B,CAAL,CAA4C,CAC1C,KAAM,IAAIxuB,MAAJ,CAAU,sBAAV,CAAN,CACD,CAED,MAAOwuB,OAAM,CAACtjB,WAAP,CAAmB,cAAnB,CAAmC,CACxCuS,OAAO,CAAPA,OADwC,CAExCtlB,MAAM,CAANA,MAFwC,CAAnC,CAAP,CAID,C,0DAEgBslB,O,CAAS+Q,M,CAAQ,CAChCA,MAAM,CAACtjB,WAAP,CAAmB,kBAAnB,EACD,C,wCAEOuS,O,CAAStlB,M,CAAQq2B,M,CAAQ,CAC/B,GACE/Q,OAAO,CAAChP,WAAR,IACAtW,MAAM,CAACsW,WAAP,EADA,EAEA+f,MAAM,CAACrjB,UAAP,EAFA,EAGA,CAACqjB,MAAM,CAACtjB,WAAP,CAAmB,gBAAnB,CAAqC,IAArC,CAA2C,KAA3C,CAJH,CAKE,CACA,MAAO,MAAP,CACD,CAED,GAAI,CAACsjB,MAAM,CAACtjB,WAAP,CAAmB,SAAnB,CAA8B,CAAE/S,MAAM,CAANA,MAAF,CAA9B,CAA0C,IAA1C,CAAL,CAAsD,CACpD,MAAO,MAAP,CACD,CAED,GAAI,CAACq2B,MAAM,CAACtjB,WAAP,CAAmB,SAAnB,CAA8B,IAA9B,CAAoC,IAApC,CAAL,CAAgD,CAC9C,MAAO,MAAP,CACD,CAED,MAAO,KAAP,CACD,C,iCAGYgjB,gGAAf,E;;GC3FMQ,sB,yBACJ,qBAAc,CAAC,2DACb,KAAKC,KAAL,CAAa,EAAb,CACD,C,iFAEGloB,G,CAAKsH,O,CAAS,CAChB,KAAK4gB,KAAL,CAAWloB,GAAX,EAAkBsH,OAAlB,CACD,C,gCAEGtH,G,CAAK,CACP,MAAO,MAAKkoB,KAAL,CAAWloB,GAAX,CAAP,CACD,C,0BAGYioB,0EAAf,E;;;;;;;;;;;;ACdA,GAAME,iBAAgB,ymDAAtB,CAsDeA,4EAAf,E;;ACtDA,GAAMC,mBAAkB,kjCAAxB,CAqCeA,gFAAf,E;;ACrCA,GAAMC,mBAAkB,8hGAAxB,CAiGeA,gFAAf,E;;ACjGA,GAAMC,qBAAoB,kjCAA1B,CAqCeA,oFAAf,E;;ACrCA,GAAMC,qBAAoB,mzBAA1B,CA4BeA,oFAAf,E;;AC5BA,GAAMC,mBAAkB,6JAAxB,CAUeA,gFAAf,E;;ACVA,GAAMC,mBAAkB,+2DAAxB,CAkFeA,gFAAf,E;;AClFA,GAAMC,iBAAgB,ifAAtB,CAsBeA,4EAAf,E;;ACtBA,GAAMC,iBAAgB,m7HAAtB,CAqJeA,4EAAf,E;;ACrJA,GAAMC,mBAAkB,k6BAAxB,CAyCeA,gFAAf,E;;ACzCA,GAAMC,mBAAkB,4nBAAxB,CA4BeA,gFAAf,E;;AC5BA,GAAMC,qBAAoB,urCAA1B,CAsDeA,oFAAf,E;;ACtDA,GAAMC,2BAA0B,opCAAhC,CAyCeA,gGAAf,E;;ACzCA,GAAMC,yBAAwB,6JAA9B,CAUeA,4FAAf,E;;;;;;;ACRA,GAAMC,OAAM,CAAG,GAAIC,iCAAJ,EAAf,CAEA,GAAMC,SAAQ,CAAG,EAAjB,CAEO,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,MAAD,CAAkC,IAAzBC,cAAyB,2DAAT,IAAS,CAC3D,GAAMC,aAAY,CAAG,GAAIC,IAAJ,EAArB,CACA,GAAMC,YAAW,CAAG,GAAID,IAAJ,EAApB,CAEA,GAAM7yB,MAAK,CAAG0yB,MAAM,CAACttB,KAAP,CAAapF,KAAb,EAAd,CACA,GAAM+yB,WAAU,CAAGL,MAAM,CAACK,UAA1B,CAEAC,gBAAgB,CAACN,MAAM,CAACttB,KAAR,CAAepF,KAAf,CAAsB,SAASizB,UAAT,CAAqBC,UAArB,CAAiC,CACrEN,YAAY,CAAC9rB,GAAb,CAAiBosB,UAAjB,CAA6BD,UAA7B,EACAH,WAAW,CAAChsB,GAAZ,CAAgBmsB,UAAhB,CAA4BC,UAA5B,EACD,CAHe,CAAhB,CAKAlzB,KAAK,CAACmzB,QAAN,CAAe,SAASC,IAAT,CAAe,CAC5B,GAAI,CAACA,IAAI,CAACC,aAAV,CAAyB,OAEzB,GAAMC,WAAU,CAAGF,IAAnB,CACA,GAAMG,WAAU,CAAGX,YAAY,CAACY,GAAb,CAAiBJ,IAAjB,CAAnB,CACA,GAAMK,YAAW,CAAGF,UAAU,CAACG,QAAX,CAAoBC,KAAxC,CAEAL,UAAU,CAACI,QAAX,CAAsBH,UAAU,CAACG,QAAX,CAAoB1zB,KAApB,EAAtB,CACAszB,UAAU,CAACM,UAAX,CAAsBC,IAAtB,CAA2BN,UAAU,CAACK,UAAtC,EAEAN,UAAU,CAACI,QAAX,CAAoBC,KAApB,CAA4BF,WAAW,CAACjyB,GAAZ,CAAgB,SAASsyB,IAAT,CAAe,CACzD,MAAOhB,YAAW,CAACU,GAAZ,CAAgBM,IAAhB,CAAP,CACD,CAF2B,CAA5B,CAIAR,UAAU,CAACj1B,IAAX,CAAgBi1B,UAAU,CAACI,QAA3B,CAAqCJ,UAAU,CAACM,UAAhD,EACD,CAfD,EAiBA,GAAIjB,aAAJ,CAAmB,CACjB3yB,KAAK,CAACmzB,QAAN,CAAe,SAAAC,IAAI,CAAI,CACrB,GAAIA,IAAI,CAACW,MAAT,CAAiB,CACfX,IAAI,CAACY,QAAL,CAAgBZ,IAAI,CAACY,QAAL,CAAch0B,KAAd,EAAhB,CACD,CACF,CAJD,EAKD,CAED,MAAO,CAAEoF,KAAK,CAAEpF,KAAT,CAAgB+yB,UAAU,CAAVA,UAAhB,CAAP,CACD,CAtCM,CAwCP,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACh7B,CAAD,CAAIC,CAAJ,CAAOg8B,QAAP,CAAoB,CAC3CA,QAAQ,CAACj8B,CAAD,CAAIC,CAAJ,CAAR,CAEA,IAAK,GAAIR,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGO,CAAC,CAACqO,QAAF,CAAW1O,MAA/B,CAAuCF,CAAC,EAAxC,CAA4C,CAC1Cu7B,gBAAgB,CAACh7B,CAAC,CAACqO,QAAF,CAAW5O,CAAX,CAAD,CAAgBQ,CAAC,CAACoO,QAAF,CAAW5O,CAAX,CAAhB,CAA+Bw8B,QAA/B,CAAhB,CACD,CACF,CAND,CAQO,GAAMC,WAAU,sHAAG,iBAAMC,GAAN,qJAClBC,MADkB,CACT5B,QAAQ,CAACxc,IAAT,CAAc,SAAAqe,MAAM,QAAIA,OAAM,CAACF,GAAP,GAAeA,GAAnB,EAApB,CADS,KAGpBC,MAHoB,+CAIDA,OAAM,CAAC1qB,KAJN,QAIhBnD,OAJgB,+CAKfksB,WAAW,CAAClsB,OAAD,CALI,SAQlB8tB,MARkB,CAQT,CACbF,GAAG,CAAEA,GADQ,CAEbzqB,KAAK,CAAE,GAAI4qB,QAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACtC,GAAI,CACFlC,MAAM,CAACmC,IAAP,CAAYN,GAAZ,CAAiB,SAAA5tB,MAAM,CAAI,CACzBguB,OAAO,CAAChuB,MAAD,CAAP,CACD,CAFD,EAGD,CAAC,MAAOrH,CAAP,CAAU,CACV,KAAM,IAAI0D,MAAJ,gCAAkCuxB,GAAlC,EAAN,CACD,CACF,CARM,CAFM,CARS,CAqBxB3B,QAAQ,CAAC1xB,IAAT,CAAcuzB,MAAd,EArBwB,uBAuBHA,OAAM,CAAC3qB,KAvBJ,SAuBlBnD,MAvBkB,+CAwBjBksB,WAAW,CAAClsB,MAAD,CAxBM,yDAAH,kBAAV2tB,WAAU,4CAAhB,C;;AChDP,GAAMQ,SAAQ,CAAGR,UAAU,CAAC,0BAAD,CAA3B,CAEA,GAAMS,sBAAU,CAAG,QAAbA,WAAa,EAAe,IAAd7sB,KAAc,2DAAP,EAAO,CAChC,OAAQA,IAAR,EACE,IAAK,QAAL,CACE,MAAO,IAAIlI,8BAAJ,GAA0B60B,IAA1B,CAA+B,oBAA/B,CAAP,CACF,IAAK,cAAL,CACE,MAAO,IAAI70B,8BAAJ,GAA0B60B,IAA1B,CAA+B,yBAA/B,CAAP,CACF,IAAK,eAAL,CACE,MAAO,IAAI70B,8BAAJ,GAA0B60B,IAA1B,CAA+B,0BAA/B,CAAP,CACF,QACE,MAAO,IAAI70B,8BAAJ,GAA0B60B,IAA1B,CAA+B,oBAA/B,CAAP,CARJ,CAUD,CAXD,C,GAaMG,sB,yBACJ,oBAAYj8B,KAAZ,CAAmBC,GAAnB,CAAwBi8B,SAAxB,CAA8C,IAAXnZ,KAAW,2DAAJ,EAAI,4DAC5C,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKoZ,IAAL,CAAY,IAAZ,CAEA,KAAKC,KAAL,CAAarZ,IAAI,CAACqZ,KAAL,EAAc,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAA3B,CACA,KAAKo1B,OAAL,CAAetZ,IAAI,CAACsZ,OAAL,EAAgB,CAA/B,CAEA,KAAKhB,QAAL,CAAgB,GAAIp0B,kCAAJ,CAA4B,CAC1Cq1B,QAAQ,CAAE,CACRzzB,GAAG,CAAE,CACHkI,KAAK,CAAEirB,qBAAU,CAACjZ,IAAI,CAAC5T,IAAN,CADd,CADG,CAIRotB,IAAI,CAAE,CAAEptB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAJE,CAKRxE,IAAI,CAAE,CAAE4C,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CALE,CAMRqrB,KAAK,CAAE,CAAEjtB,IAAI,CAAE,IAAR,CAAc4B,KAAK,CAAE,KAAKqrB,KAA1B,CANC,CAORC,OAAO,CAAE,CAAEltB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,KAAKsrB,OAAzB,CAPD,CAQRG,aAAa,CAAE,CAAErtB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CARP,CASR0rB,KAAK,CAAE,CACLttB,IAAI,CAAE,IADD,CAEL4B,KAAK,CAAE,CAACgS,IAAI,CAAC2Z,WAAL,EAAoB,CAArB,CAAwB3Z,IAAI,CAAC4Z,UAAL,EAAmB,CAA3C,CAFF,CATC,CADgC,CAe1CC,WAAW,CAAE,IAf6B,CAgB1CC,UAAU,CAAE,KAhB8B,CAiB1CC,SAAS,CAAE,IAjB+B,CAkB1CC,IAAI,CAAE91B,0BAlBoC,CAmB1C+1B,QAAQ,CAAEja,IAAI,CAACia,QAAL,EAAiB/1B,8BAnBe,CAoB1Cg2B,YAAY,CAAE1D,yBApB4B,CAqB1C2D,cAAc,CAAE1D,2BAChB;AAtB0C,CAA5B,CAAhB,CAyBA,KAAKx5B,KAAL,CAAaA,KAAb,CACA,KAAKC,GAAL,CAAWA,GAAX,CACA,KAAKi8B,SAAL,CAAiBA,SAAjB,CAEA,KAAKiB,MAAL,GACA,KAAKC,MAAL,CAAYp9B,KAAZ,CAAmBC,GAAnB,CAAwBi8B,SAAxB,CAAmC,IAAnC,EACA,KAAKmB,OAAL,GACD,C,0FAES,CACR,GAAMC,IAAG,CAAGC,IAAI,CAACD,GAAL,EAAZ,CACA,KAAKjC,QAAL,CAAciB,QAAd,CAAuBC,IAAvB,CAA4BxrB,KAA5B,CAAqCusB,GAAG,CAAG,IAAP,CAAe,KAAnD,CACA,KAAKjC,QAAL,CAAcmC,WAAd,CAA4B,IAA5B,CACAC,qBAAqB,CAAC,KAAKJ,OAAL,CAAa33B,IAAb,CAAkB,IAAlB,CAAD,CAArB,CACD,C,gJAEW+G,K,oHACV,KAAKA,KAAL,CAAaA,KAAb,C,sBACMsvB,S,QACNtvB,KAAK,CAAC5M,GAAN,CAAU,KAAKs8B,IAAf,E,8ZAIA,KAAKd,QAAL,CAAciB,QAAd,CAAuBzzB,GAAvB,CAA2BkI,KAA3B,CAAiC2sB,KAAjC,CAAyCz2B,8BAAzC,CACA,KAAKo0B,QAAL,CAAciB,QAAd,CAAuBzzB,GAAvB,CAA2BkI,KAA3B,CAAiC4sB,SAAjC,CACE,KAAK5a,IAAL,CAAU4a,SAAV,EAAuB12B,yCADzB,CAGA,KAAKo0B,QAAL,CAAcmC,WAAd,CAA4B,IAA5B,C,uBAEuBzB,S,QAAjB6B,Q,gBACN,KAAKzB,IAAL,CAAY,GAAIl1B,qBAAJ,CACV22B,QAAQ,CAACnxB,KAAT,CAAeiB,QAAf,CAAwB,CAAxB,EAA2BkwB,QAA3B,CAAoCv2B,KAApC,EADU,CAEV,KAAKg0B,QAFK,CAAZ,C,kTAMsBwC,I,mJACtB,KAAK9a,IAAL,CAAU+a,WAAV,CAAwBD,IAAxB,CACMtgC,Q,CAAW,KAAKyC,KAAL,CAAWc,UAAX,CAAsB,KAAKb,GAA3B,C,CACbu8B,a,CAAgB,KAAKzZ,IAAL,CAAU+a,WAAV,CAChBvgC,QAAQ,CAAG,KAAKwlB,IAAL,CAAU+a,WADL,CAEhB,C,CAEJ,GAAI,KAAK/a,IAAL,CAAUgb,mBAAd,CAAmC,CACjCvB,aAAa,CAAGz+B,IAAI,CAAC6D,KAAL,CAAW46B,aAAX,CAAhB,CACD,CAED,KAAKnB,QAAL,CAAciB,QAAd,CAAuBE,aAAvB,CAAqCzrB,KAArC,CAA6CyrB,aAA7C,C,gUAGWx8B,K,CAAOC,G,uMAAKi8B,S,kDAAY,C,CAAG8B,K,4DAChCjC,S,QAEN,GAAIG,SAAS,GAAK,KAAKA,SAAnB,EAAgC8B,KAApC,CAA2C,CACzC,KAAK7B,IAAL,CAAU5zB,KAAV,CAAgB01B,IAAhB,CAAqB,KAAK/B,SAA1B,EACD,CAED,GAAI,CAACl8B,KAAK,CAACsK,MAAN,CAAa,KAAKtK,KAAlB,CAAD,EAA6B,CAACC,GAAG,CAACqK,MAAJ,CAAW,KAAKrK,GAAhB,CAA9B,EAAsD+9B,KAA1D,CAAiE,CACzD99B,SADyD,CAC7CD,GAAG,CAACwO,GAAJ,CAAQzO,KAAR,CAD6C,CAG/D,KAAKm8B,IAAL,CAAU+B,UAAV,CAAqBC,kBAArB,CACE,GAAIl3B,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EAA2BoC,SAA3B,EADF,CAEEnJ,SAAS,CAACmJ,SAAV,EAFF,EAKM9L,QARyD,CAQ9CyC,KAAK,CAACc,UAAN,CAAiBb,GAAjB,CAR8C,CAS/D,KAAKk8B,IAAL,CAAU5zB,KAAV,CAAgB61B,IAAhB,CAAqB7gC,QAArB,EACM0I,QAVyD,CAU9CjG,KAAK,CAACH,GAAN,CAAUK,SAAS,CAACoH,cAAV,CAAyB,GAAzB,CAAV,CAV8C,CAW/D,KAAK60B,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuBlI,QAAQ,CAACrI,CAAhC,CAAmCqI,QAAQ,CAACnI,CAA5C,CAA+CmI,QAAQ,CAACzH,CAAxD,EACI6/B,aAZ2D,CAY3C,KAAKtb,IAAL,CAAU+a,WAAV,CAChBvgC,QAAQ,CAAG,KAAKwlB,IAAL,CAAU+a,WADL,CAEhB,CAd2D,CAgB/D,GAAI,KAAK/a,IAAL,CAAUgb,mBAAd,CAAmC,CACjCM,aAAa,CAAGtgC,IAAI,CAAC6D,KAAL,CAAWy8B,aAAX,CAAhB,CACD,CACD,KAAKhD,QAAL,CAAciB,QAAd,CAAuBE,aAAvB,CAAqCzrB,KAArC,CAA6CstB,aAA7C,CACA,KAAKhD,QAAL,CAAcmC,WAAd,CAA4B,IAA5B,CACD,CAED,KAAKx9B,KAAL,CAAaA,KAAb,CACA,KAAKC,GAAL,CAAWA,GAAX,CACA,KAAKi8B,SAAL,CAAiBA,SAAjB,C,iCAEO,I,yLAGF3vB,I,CAAM,CACX;;;;;MADW,CAOX;AACA;;;;;;QAOD,C,8RAGOwvB,S,QACN,KAAKI,IAAL,CAAUmC,OAAV,CAAoB,KAApB,C,iCACO,I,maAIDvC,S,QACN,KAAKI,IAAL,CAAUmC,OAAV,CAAoB,IAApB,C,iCACO,I,yaAIDvC,S,QACN,KAAKtvB,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACA,KAAKA,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,G,sKAIWvC,2EAAf,E;;AC1KA,GAAMwC,cAAa,CAAG,GAAIx3B,8BAAJ,EAAtB,CACA,GAAMy3B,WAAU,CAAG,EAAnB,CAEA,GAAMC,aAAY,CAAG,GAAI13B,+BAAJ,CAAyB,CAC5Cg2B,YAAY,CAAE/D,yBAD8B,CAE5CgE,cAAc,CAAEjE,2BAF4B,CAG5C2D,WAAW,CAAE,IAH+B,CAI5CC,UAAU,CAAE,KAJgC,CAAzB,CAArB,C,GAOM+B,c,yBACJ,gBAAYC,KAAZ,CAAmBhB,IAAnB,CAAyBr/B,CAAzB,CAA4B,CAAC,uDAC3B,KAAKA,CAAL,CAASA,CAAC,EAAI,CAAd,CACA,KAAK29B,IAAL,CAAY,IAAZ,CACA,KAAK0B,IAAL,CAAYA,IAAZ,CACA,KAAKxB,OAAL,CAAe,CAAf,CACA,KAAKC,QAAL,CAAgB,CACdwC,OAAO,CAAE,CAAE3vB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAAI9J,4BAAJ,CAAsB,IAAtB,CAA4B,CAA5B,CAA+B,CAA/B,CAApB,CADK,CAEd83B,YAAY,CAAE,CAAE5vB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAFA,CAGdiuB,YAAY,CAAE,CAAE7vB,IAAI,CAAE,IAAR,CAAc4B,KAAK,CAAE,GAAI9J,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAArB,CAHA,CAIdo1B,OAAO,CAAE,CAAEltB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAJK,CAAhB,CAOA,KAAKqrB,KAAL,CAAa,IAAb,CAEA,KAAKD,IAAL,CAAY,KAAKgB,MAAL,CAAYU,IAAZ,CAAkBgB,KAAlB,CAAZ,CACD,C,8FAEa,CACZ,MAAOF,aAAP,CACD,C,mCAEM,CACL,KAAKxC,IAAL,CAAUmC,OAAV,CAAoB,KAApB,CACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKnC,IAAL,CAAUmC,OAAV,CAAoB,IAApB,CACA,MAAO,KAAP,CACD,C,kDAEYlC,K,CAAO,CAClB,KAAKE,QAAL,CAAc0C,YAAd,CAA2BjuB,KAA3B,CAAmCqrB,KAAnC,CACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,GAAI,CAAC,KAAKA,KAAV,CAAiB,CACf,OACD,CAED,KAAKE,QAAL,CAAc0C,YAAd,CAA2BjuB,KAA3B,CAAmC,KAAKqrB,KAAxC,CACD,C,gDAEW/uB,G,CAAK,CACf,KAAK8uB,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,CAAuByP,GAAG,CAACzP,CAA3B,CACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,CAAuBuP,GAAG,CAACvP,CAA3B,CACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,MAAO,MAAKq+B,IAAL,CAAUl2B,QAAjB,CACD,C,8CAEUA,Q,CAAU,CACnB,MACE,MAAKk2B,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,GAAyBqI,QAAQ,CAACrI,CAAlC,EACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,GAAyBmI,QAAQ,CAACnI,CADlC,EAEA,KAAKq+B,IAAL,CAAUl2B,QAAV,CAAmBzH,CAAnB,GAAyByH,QAAQ,CAACzH,CAHpC,CAKD,C,8CAEU69B,O,CAAS,CAClB,KAAKA,OAAL,CAAeA,OAAf,CACA,KAAKC,QAAL,CAAcD,OAAd,CAAsBtrB,KAAtB,CAA8BsrB,OAA9B,CACA,MAAO,KAAP,CACD,C,wDAEe4C,C,CAAG,CACjB,KAAK3C,QAAL,CAAcD,OAAd,CAAsBtrB,KAAtB,CAA8B,KAAKsrB,OAAL,CAAe4C,CAA7C,CACA,MAAO,KAAP,CACD,C,kEAEoBC,K,CAAO,CAC1B,KAAK5C,QAAL,CAAcyC,YAAd,CAA2BhuB,KAA3B,CAAmCmuB,KAAnC,CACA,MAAO,KAAP,CACD,C,wDAEe9C,K,CAAO,CACrB,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKE,QAAL,CAAc0C,YAAd,CAA2BjuB,KAA3B,CAAmCqrB,KAAnC,CACA,MAAO,KAAP,CACD,C,sDAEcA,K,CAAO,CACpB,MACE,MAAKA,KAAL,CAAW18B,CAAX,GAAiB08B,KAAK,CAAC18B,CAAvB,EACA,KAAK08B,KAAL,CAAW+C,CAAX,GAAiB/C,KAAK,CAAC+C,CADvB,EAEA,KAAK/C,KAAL,CAAW98B,CAAX,GAAiB88B,KAAK,CAAC98B,CAHzB,CAKD,C,0CAEQgN,K,CAAOR,M,CAAQ,CACtB,KAAKqwB,IAAL,CAAU5zB,KAAV,CAAgB4F,GAAhB,CAAoB7B,KAApB,CAA2BR,MAA3B,CAAmC,CAAnC,EACA,MAAO,KAAP,CACD,C,yCAES,CACR,KAAKqwB,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,GACD,C,4CAESn9B,M,CAAQ,CAChB,KAAK86B,IAAL,CAAUiD,QAAV,CAAmB5gC,CAAnB,CAAuByD,cAAc,CAACZ,MAAD,CAArC,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAOU,eAAc,CAAC,KAAKo6B,IAAL,CAAUiD,QAAV,CAAmB5gC,CAApB,CAArB,CACD,C,sCAEMq/B,I,CAAMgB,K,CAAO,CAClB,GAAMxD,SAAQ,CAAG,KAAKgE,WAAL,EAAjB,CACA,GAAMzB,SAAQ,CACZc,UAAU,CAAC,GAAKb,IAAI,CAACvxB,KAAV,CAAkB,GAAlB,CAAwBuxB,IAAI,CAAC/xB,MAA9B,CAAV,EACC,UAAM,CACL,GAAM8xB,SAAQ,CAAG,GAAI32B,8BAAJ,CAAwB42B,IAAI,CAACvxB,KAA7B,CAAoCuxB,IAAI,CAAC/xB,MAAzC,CAAiD,CAAjD,CAAoD,CAApD,CAAjB,CACA4yB,UAAU,CAAC,GAAKb,IAAI,CAACvxB,KAAV,CAAkB,GAAlB,CAAwBuxB,IAAI,CAAC/xB,MAA9B,CAAV,CAAkD8xB,QAAlD,CACA,MAAOA,SAAP,CACD,CAJD,EAFF,CAQA,GAAI,MAAOiB,MAAP,EAAgB,QAApB,CAA8B,CAC5BA,KAAK,CAAGJ,aAAa,CAAC3C,IAAd,CAAmB,qBAAnB,CAAR,CACD,CAED,KAAKQ,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B8tB,KAA9B,CAEA,KAAKxD,QAAL,CAAgBA,QAAQ,CAACh0B,KAAT,EAAhB,CACA,KAAKg0B,QAAL,CAAciB,QAAd,CAAyB,KAAKA,QAA9B,CAEA,KAAKjB,QAAL,CAAcyB,SAAd,CAA0B,IAA1B,CAEA,GAAMX,KAAI,CAAG,GAAIl1B,qBAAJ,CAAe22B,QAAf,CAAyB,KAAKvC,QAA9B,CAAb,CAEAc,IAAI,CAACl2B,QAAL,CAAczH,CAAd,CAAkB,KAAKA,CAAvB,CACA,MAAO29B,KAAP,CACD,C,sBAGYyC,+DAAf,E;;AC1JA,GAAMU,YAAW,CAAG,QAAdA,YAAc,CAAAC,QAAQ,CAAI,CAC9B,GAAMC,OAAM,CAAGh6B,QAAQ,CAACi6B,cAAT,CAAwBF,QAAxB,CAAf,CACAC,MAAM,CAACE,UAAP,CAAkB,IAAlB,EAAwBC,SAAxB,CAAkC,CAAlC,CAAqC,CAArC,CAAwCH,MAAM,CAAClzB,KAA/C,CAAsDkzB,MAAM,CAAC1zB,MAA7D,EACD,CAHD,CAKA,GAAM8zB,aAAY,CAAG,QAAfA,aAAe,CAACC,OAAD,CAAUL,MAAV,CAAqB,CACxCK,OAAO,CAACF,SAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAwBH,MAAM,CAAClzB,KAA/B,CAAsCkzB,MAAM,CAAC1zB,MAA7C,EACD,CAFD,CAIA,GAAMg0B,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAAD,OAAO,CAAI,CAClCA,OAAO,CAACF,SAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,GAAxB,CAA6B,GAA7B,EACD,CAFD,CAIA,GAAMI,UAAS,CAAG,QAAZA,UAAY,CAAAR,QAAQ,CAAI,CAC5B;AACA,GAAIC,OAAM,CAAGh6B,QAAQ,CAACi6B,cAAT,CAAwBF,QAAxB,CAAb,CACA,GAAI,CAACC,MAAL,CAAa,CACX13B,OAAO,CAACya,GAAR,CAAY,gBAAZ,EACAza,OAAO,CAACC,KAAR,GACA,MAAO,KAAP,CACD,CAED,GAAI83B,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAd,CACA,MAAOG,QAAP,CACD,CAXD,CAaA,GAAMG,kBAAQ,CAAG,QAAXA,SAAW,CAACR,MAAD,CAASx/B,KAAT,CAAgBigC,EAAhB,CAAoBC,EAApB,CAAwBC,IAAxB,CAA8BC,CAA9B,CAAoC,CACnDZ,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAActgC,KAAK,CAACpC,CAApB,CAAuBoC,KAAK,CAAClC,CAA7B,EACA0hC,MAAM,CAACe,MAAP,CAAcN,EAAE,CAACriC,CAAjB,CAAoBqiC,EAAE,CAACniC,CAAvB,EACA0hC,MAAM,CAACgB,GAAP,CACExgC,KAAK,CAACpC,CADR,CAEEoC,KAAK,CAAClC,CAFR,CAGE2iC,aAAA,CAAiBzgC,KAAjB,CAAwBigC,EAAxB,CAHF,CAIEQ,cAAA,CAAuBN,IAAI,CAACngC,KAA5B,CAJF,CAKEygC,cAAA,CAAuBN,IAAI,CAAClgC,GAA5B,CALF,CAME,KANF,EAQA;AACAu/B,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAjBD,CAmBA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACrB,MAAD,CAASsB,CAAT,CAAYV,CAAZ,CAAerhC,CAAf,CAAkBgiC,EAAlB,CAAyB,CACvCvB,MAAM,CAACtD,SAAP,CAAmB6E,EAAnB,CACAvB,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAAcQ,CAAC,CAACljC,CAAF,CAAMwiC,CAAC,CAAG,CAAxB,CAA2BU,CAAC,CAAChjC,CAAF,CAAMiB,CAAC,CAAG,CAArC,EACAygC,MAAM,CAACe,MAAP,CAAcO,CAAC,CAACljC,CAAF,CAAMwiC,CAAC,CAAG,CAAxB,CAA2BU,CAAC,CAAChjC,CAAF,CAAMiB,CAAC,CAAG,CAArC,EACAygC,MAAM,CAACe,MAAP,CAAcO,CAAC,CAACljC,CAAF,CAAMwiC,CAAC,CAAG,CAAxB,CAA2BU,CAAC,CAAChjC,CAAF,CAAMiB,CAAC,CAAG,CAArC,EACAygC,MAAM,CAACe,MAAP,CAAcO,CAAC,CAACljC,CAAF,CAAMwiC,CAAC,CAAG,CAAxB,CAA2BU,CAAC,CAAChjC,CAAF,CAAMiB,CAAC,CAAG,CAArC,EACAygC,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAVD,CAYA,GAAMI,WAAU,CAAG,QAAbA,WAAa,CAACxB,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkB0gC,CAAlB,CAAwB,CACzC,GAAI1gC,CAAC,CAAG,CAAR,CAAWA,CAAC,CAAG,CAAJ,CACX8/B,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiB4B,CAAjB,CAAoB,CAApB,CAAuB3B,IAAI,CAAC2D,EAAL,CAAU,CAAjC,CAAoC,IAApC,EACA89B,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACD,CAPD,CASA,GAAMM,wBAAuB,CAAG,QAA1BA,wBAA0B,CAACzB,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkBwhC,EAAlB,CAAsBd,CAAtB,CAA4B,CAC1DZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiBojC,EAAjB,CAAqB,CAArB,CAAwBnjC,IAAI,CAAC2D,EAAL,CAAU,CAAlC,CAAqC,KAArC,EAA6C;AAC7C89B,MAAM,CAACc,MAAP,CAAc1iC,CAAC,CAAG8B,CAAlB,CAAqB5B,CAArB,EACA0hC,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiB4B,CAAjB,CAAoB,CAApB,CAAuB3B,IAAI,CAAC2D,EAAL,CAAU,CAAjC,CAAoC,IAApC,EAA2C;AAC3C89B,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAPD,CASA,GAAMO,mBAAkB,CAAG,QAArBA,mBAAqB,CAAC3B,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe6L,EAAf,CAAmBC,EAAnB,CAAuBw3B,CAAvB,CAA0B76B,CAA1B,CAAgC,CACzDi5B,MAAM,CAACa,SAAP,GACA;AACAb,MAAM,CAAC6B,OAAP,CAAezjC,CAAf,CAAkBE,CAAlB,CAAqB6L,EAArB,CAAyBC,EAAzB,CAA6B,CAA7B,CAAgCw3B,CAAhC,CAAmC76B,CAAnC,CAAsC,KAAtC,EAEAi5B,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACD,CAPD,CASA,GAAMW,2BAAiB,CAAG,QAApBA,kBAAoB,CAAC9B,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkBwhC,EAAlB,CAAsBE,CAAtB,CAAyB76B,CAAzB,CAA+B,CACvDi5B,MAAM,CAACa,SAAP,GACAb,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiBojC,EAAjB,CAAqBE,CAArB,CAAwB76B,CAAxB,CAA2B,KAA3B,EAAmC;AAEnC,GAAM05B,GAAE,CAAGQ,mBAAA,CAA4B/gC,CAA5B,CAA+B,CAAC+gC,cAAA,CAAuBl6B,CAAvB,CAAhC,CAA2D3I,CAA3D,CAA8DE,CAA9D,CAAX,CACA0hC,MAAM,CAACe,MAAP,CAAcN,EAAE,CAACriC,CAAjB,CAAoBqiC,EAAE,CAACniC,CAAvB,EACA0hC,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiB4B,CAAjB,CAAoB6G,CAApB,CAAuB66B,CAAvB,CAA0B,IAA1B,EAAiC;AACjC,GAAMlB,GAAE,CAAGO,mBAAA,CAA4BS,EAA5B,CAAgC,CAACT,cAAA,CAAuBW,CAAvB,CAAjC,CAA4DxjC,CAA5D,CAA+DE,CAA/D,CAAX,CACA0hC,MAAM,CAACe,MAAP,CAAcL,EAAE,CAACtiC,CAAjB,CAAoBsiC,EAAE,CAACpiC,CAAvB,EAEA0hC,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAbD,CAeA,GAAMW,0BAAgB,CAAG,QAAnBA,iBAAmB,CAAC/B,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkBwhC,EAAlB,CAAsBM,QAAtB,CAAgCC,QAAhC,CAA6C,CACpE,GAAMC,IAAG,CAAG,IAAMF,QAAlB,CACA,GAAMG,IAAG,CAAGD,GAAG,CAAGD,QAAlB,CAEA,IAAK,GAAIjiC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,GAApB,CAAyBA,CAAC,EAAIkiC,GAA9B,CAAmC,CACjCJ,0BAAiB,CACf9B,MADe,CAEf5hC,CAFe,CAGfE,CAHe,CAIf4B,CAJe,CAKfwhC,EALe,CAMfT,cAAA,CAAuBjhC,CAAvB,CANe,CAOfihC,cAAA,CAAuBjhC,CAAC,CAAGkiC,GAAJ,CAAUC,GAAjC,CAPe,CAAjB,CASD,CACF,CAfD,CAiBA,GAAMC,0BAAgB,CAAG,QAAnBA,iBAAmB,CAACpC,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe+jC,EAAf,CAAmBX,EAAnB,CAA0B,CACjDI,0BAAiB,CACf9B,MADe,CAEf5hC,CAFe,CAGfE,CAHe,CAIf+jC,EAJe,CAKfX,EALe,CAMfT,cAAA,CAAuB,CAAvB,CANe,CAOfA,cAAA,CAAuB,GAAvB,CAPe,CAAjB,CASD,CAVD,CAYA,GAAMqB,2BAAiB,CAAG,QAApBA,kBAAoB,CAACtC,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe+jC,EAAf,CAAmBX,EAAnB,CAA0B,CAClDC,kBAAkB,CAChB3B,MADgB,CAEhB5hC,CAFgB,CAGhBE,CAHgB,CAIhB+jC,EAJgB,CAKhBX,EALgB,CAMhBT,cAAA,CAAuB,CAAvB,CANgB,CAOhBA,cAAA,CAAuB,GAAvB,CAPgB,CAAlB,CASD,CAVD,CAYA,GAAMsB,kBAAiB,CAAG,QAApBA,kBAAoB,CAACvC,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkB0gC,CAAlB,CAAwB,CAChDZ,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiB4B,CAAjB,CAAoB,CAApB,CAAuB3B,IAAI,CAAC2D,EAAL,CAAU,CAAjC,CAAoC,IAApC,EACA89B,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAPD,CASA,GAAMoB,mBAAkB,CAAG,QAArBA,mBAAqB,CAACxC,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe4B,CAAf,CAAkB0gC,CAAlB,CAAwB,CACjDZ,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACgB,GAAP,CAAW5iC,CAAX,CAAcE,CAAd,CAAiB4B,CAAjB,CAAoB,CAApB,CAAuB3B,IAAI,CAAC2D,EAAL,CAAU,CAAjC,CAAoC,IAApC,EACA89B,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACoB,IAAP,GACD,CAND,CAQA,GAAMz3B,SAAQ,CAAG,QAAXA,SAAW,CAACq2B,MAAD,CAAShiC,EAAT,CAAaC,EAAb,CAAiBC,EAAjB,CAAqBC,EAArB,CAAyByiC,CAAzB,CAA+B,CAC9CZ,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAAc9iC,EAAd,CAAkBC,EAAlB,EACA+hC,MAAM,CAACe,MAAP,CAAc7iC,EAAd,CAAkBC,EAAlB,EACA6hC,MAAM,CAACmB,MAAP,GACD,CAND,CAQA,GAAMsB,mBAAS,CAAG,QAAZA,UAAY,CAACzC,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAeuB,CAAf,CAAkB+hC,CAAlB,CAAqBhB,CAArB,CAA2B,CAC3C,GAAIH,GAAJ,CAAQC,EAAR,CAAYgC,EAAZ,CAAgBC,EAAhB,CAAoBC,EAApB,CAAwBC,EAAxB,CAA4BC,EAA5B,CAEArC,EAAE,CAAGQ,mBAAA,CAA4BW,CAAC,CAAG,GAAhC,CAAqC,CAAC/hC,CAAtC,CAAyCzB,CAAzC,CAA4CE,CAA5C,CAAL,CACAoiC,EAAE,CAAGO,mBAAA,CACHW,CAAC,CAAG,GADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,CAAC,GAA3B,CAFE,CAGH4gC,EAAE,CAACriC,CAHA,CAIHqiC,EAAE,CAACniC,CAJA,CAAL,CAMAokC,EAAE,CAAGzB,mBAAA,CACHW,CAAC,CAAG,IADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,EAA1B,CAFE,CAGH6gC,EAAE,CAACtiC,CAHA,CAIHsiC,EAAE,CAACpiC,CAJA,CAAL,CAMAqkC,EAAE,CAAG1B,mBAAA,CACHW,CAAC,CAAG,GADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,GAA1B,CAFE,CAGH6iC,EAAE,CAACtkC,CAHA,CAIHskC,EAAE,CAACpkC,CAJA,CAAL,CAOAwkC,EAAE,CAAG7B,mBAAA,CACHW,CAAC,CAAG,GADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,GAA1B,CAFE,CAGH4gC,EAAE,CAACriC,CAHA,CAIHqiC,EAAE,CAACniC,CAJA,CAAL,CAMAukC,EAAE,CAAG5B,mBAAA,CACHW,CAAC,CAAG,IADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,CAAC,EAA3B,CAFE,CAGHijC,EAAE,CAAC1kC,CAHA,CAIH0kC,EAAE,CAACxkC,CAJA,CAAL,CAMAskC,EAAE,CAAG3B,mBAAA,CACHW,CAAC,CAAG,GADD,CAEH,CAACX,cAAA,CAAuBphC,CAAvB,CAA0B,GAA1B,CAFE,CAGHgjC,EAAE,CAACzkC,CAHA,CAIHykC,EAAE,CAACvkC,CAJA,CAAL,CAOA0hC,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAAcL,EAAE,CAACriC,CAAjB,CAAoBqiC,EAAE,CAACniC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAcL,EAAE,CAACtiC,CAAjB,CAAoBsiC,EAAE,CAACpiC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc2B,EAAE,CAACtkC,CAAjB,CAAoBskC,EAAE,CAACpkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc4B,EAAE,CAACvkC,CAAjB,CAAoBukC,EAAE,CAACrkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc6B,EAAE,CAACxkC,CAAjB,CAAoBwkC,EAAE,CAACtkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc8B,EAAE,CAACzkC,CAAjB,CAAoBykC,EAAE,CAACvkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc+B,EAAE,CAAC1kC,CAAjB,CAAoB0kC,EAAE,CAACxkC,CAAvB,EACA0hC,MAAM,CAACkB,SAAP,GACAlB,MAAM,CAACoB,IAAP,GACApB,MAAM,CAACmB,MAAP,GACD,CAtDD,CAwDA,GAAM4B,MAAK,CAAG,QAARA,MAAQ,CAAC/C,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe0kC,CAAf,CAAkBpC,CAAlB,CAAwB,CACpCxiC,CAAC,CAAGwZ,QAAQ,CAACxZ,CAAD,CAAZ,CACAE,CAAC,CAAGsZ,QAAQ,CAACtZ,CAAD,CAAZ,CACA0kC,CAAC,CAAGprB,QAAQ,CAACorB,CAAD,CAAZ,CAEAhD,MAAM,CAACtD,SAAP,CAAmBkE,CAAnB,CACAZ,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAAc1iC,CAAC,CAAG4kC,CAAlB,CAAqB1kC,CAAC,CAAG0kC,CAAzB,EACAhD,MAAM,CAACe,MAAP,CAAc3iC,CAAC,CAAG4kC,CAAlB,CAAqB1kC,CAAC,CAAG0kC,CAAzB,EACAhD,MAAM,CAACmB,MAAP,GAEAnB,MAAM,CAACa,SAAP,GACAb,MAAM,CAACc,MAAP,CAAc1iC,CAAC,CAAG4kC,CAAlB,CAAqB1kC,CAAC,CAAG0kC,CAAzB,EACAhD,MAAM,CAACe,MAAP,CAAc3iC,CAAC,CAAG4kC,CAAlB,CAAqB1kC,CAAC,CAAG0kC,CAAzB,EACAhD,MAAM,CAACmB,MAAP,GACD,CAfD,CAiBA,GAAM8B,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACjD,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe0kC,CAAf,CAAkBE,QAAlB,CAA4BC,OAA5B,CAAqCC,QAArC,CAAkD,CAC5E,GAAMvjC,EAAC,CAAGmjC,CAAC,CAAGzkC,IAAI,CAAC4D,GAAL,CAAU,GAAK,GAAN,CAAa5D,IAAI,CAAC2D,EAA3B,CAAd,CACA,GAAMpC,EAAC,CAAGkjC,CAAC,CAAGzkC,IAAI,CAAC0D,GAAL,CAAU,GAAK,GAAN,CAAa1D,IAAI,CAAC2D,EAA3B,CAAd,CAEA9D,CAAC,CAAGA,CAAC,CAAG0B,CAAR,CACAxB,CAAC,CAAGA,CAAC,CAAGuB,CAAC,CAAG,CAAZ,CACAwjC,WAAW,CAACrD,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe0kC,CAAf,CAAkBE,QAAlB,CAA4BC,OAA5B,CAAqCC,QAArC,CAAX,CACD,CAPD,CASA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACrD,MAAD,CAAS5hC,CAAT,CAAYE,CAAZ,CAAe0kC,CAAf,CAAkBE,QAAlB,CAA4BC,OAA5B,CAAqCC,QAArC,CAAkD,CACpE,GAAMvjC,EAAC,CAAGmjC,CAAC,CAAGzkC,IAAI,CAAC4D,GAAL,CAAU,GAAK,GAAN,CAAa5D,IAAI,CAAC2D,EAA3B,CAAd,CACA,GAAMpC,EAAC,CAAGkjC,CAAC,CAAGzkC,IAAI,CAAC0D,GAAL,CAAU,GAAK,GAAN,CAAa1D,IAAI,CAAC2D,EAA3B,CAAd,CAEA,GAAIu+B,GAAJ,CAAQC,EAAR,CAAYgC,EAAZ,CAAgBC,EAAhB,CAAoBC,EAApB,CAAwBC,EAAxB,CAEApC,EAAE,CAAG,CAAEriC,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAC,CAAGuB,CAAJ,CAAQmjC,CAAnB,CAAL,CACAtC,EAAE,CAAG,CAAEtiC,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAC,CAAGuB,CAAf,CAAL,CACA6iC,EAAE,CAAG,CAAEtkC,CAAC,CAAEA,CAAC,CAAG0B,CAAT,CAAYxB,CAAC,CAAEA,CAAf,CAAL,CACAqkC,EAAE,CAAG,CAAEvkC,CAAC,CAAEA,CAAC,CAAG,EAAI0B,CAAb,CAAgBxB,CAAC,CAAEA,CAAC,CAAGuB,CAAvB,CAAL,CACA+iC,EAAE,CAAG,CAAExkC,CAAC,CAAEA,CAAC,CAAG,EAAI0B,CAAb,CAAgBxB,CAAC,CAAEA,CAAC,CAAGuB,CAAJ,CAAQmjC,CAA3B,CAAL,CACAH,EAAE,CAAG,CAAEzkC,CAAC,CAAEA,CAAC,CAAG0B,CAAT,CAAYxB,CAAC,CAAEA,CAAC,CAAG,EAAI0kC,CAAvB,CAAL,CAEAhD,MAAM,CAACa,SAAP,GAEA,GAAIqC,QAAJ,CAAc,CACZlD,MAAM,CAACc,MAAP,CAAcL,EAAE,CAACriC,CAAjB,CAAoBqiC,EAAE,CAACniC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAcL,EAAE,CAACtiC,CAAjB,CAAoBsiC,EAAE,CAACpiC,CAAvB,EACD,CAHD,IAGO,CACL0hC,MAAM,CAACc,MAAP,CAAcJ,EAAE,CAACtiC,CAAjB,CAAoBsiC,EAAE,CAACpiC,CAAvB,EACD,CAED,GAAI6kC,OAAJ,CAAa,CACXnD,MAAM,CAACe,MAAP,CAAc2B,EAAE,CAACtkC,CAAjB,CAAoBskC,EAAE,CAACpkC,CAAvB,EACD,CAFD,IAEO,CACL0hC,MAAM,CAACc,MAAP,CAAc4B,EAAE,CAACtkC,CAAjB,CAAoBskC,EAAE,CAACpkC,CAAvB,EACD,CAED,GAAI8kC,QAAJ,CAAc,CACZpD,MAAM,CAACe,MAAP,CAAc4B,EAAE,CAACvkC,CAAjB,CAAoBukC,EAAE,CAACrkC,CAAvB,EACD,CAFD,IAEO,CACL0hC,MAAM,CAACc,MAAP,CAAc6B,EAAE,CAACvkC,CAAjB,CAAoBukC,EAAE,CAACrkC,CAAvB,EACD,CAED0hC,MAAM,CAACe,MAAP,CAAc6B,EAAE,CAACxkC,CAAjB,CAAoBwkC,EAAE,CAACtkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAc8B,EAAE,CAACzkC,CAAjB,CAAoBykC,EAAE,CAACvkC,CAAvB,EACA0hC,MAAM,CAACe,MAAP,CAAcN,EAAE,CAACriC,CAAjB,CAAoBqiC,EAAE,CAACniC,CAAvB,EACA0hC,MAAM,CAACkB,SAAP,GAEAlB,MAAM,CAACmB,MAAP,GACAnB,MAAM,CAACoB,IAAP,GACD,CAzCD,CA2CA,GAAMkC,cAAa,CAAG,QAAhBA,cAAgB,CAACtD,MAAD,CAASY,CAAT,CAAYrhC,CAAZ,CAAegkC,EAAf,CAAmBC,EAAnB,CAAuBhhC,KAAvB,CAA8BihC,GAA9B,CAAmC1xB,MAAnC,CAA8C,CAClE,GAAM3T,EAAC,CAAGG,IAAI,CAAC6D,KAAL,CAAWw+B,CAAC,CAAG,CAAf,CAAV,CACA,GAAMtiC,EAAC,CAAGC,IAAI,CAAC6D,KAAL,CAAW7C,CAAC,CAAG,CAAf,CAAV,CACA,GAAMuN,MAAK,CAAGy2B,EAAE,CAAG,CAAnB,CACA,GAAMj3B,OAAM,CAAGk3B,EAAE,CAAG,CAApB,CAEA,GAAIzxB,MAAJ,CAAYvP,KAAK,CAAG,IAAMA,KAAd,CAEZA,KAAK,CAAIA,KAAK,CAAGjE,IAAI,CAAC2D,EAAd,CAAoB,GAA5B,CACA89B,MAAM,CAAC0D,IAAP,GACA1D,MAAM,CAAC2D,SAAP,CAAiBvlC,CAAjB,CAAoBE,CAApB,EACA,GAAIyT,MAAJ,CAAYiuB,MAAM,CAACj3B,KAAP,CAAa,CAAb,CAAgB,CAAC,CAAjB,EACZi3B,MAAM,CAACp2B,MAAP,CAAcpH,KAAd,EACAw9B,MAAM,CAAC4D,SAAP,CAAiBH,GAAjB,CAAsB,CAAC32B,KAAD,CAAS,CAA/B,CAAkC,CAACR,MAAD,CAAU,CAA5C,CAA+CQ,KAA/C,CAAsDR,MAAtD,EACA0zB,MAAM,CAACp2B,MAAP,CAAc,CAACpH,KAAf,EACAw9B,MAAM,CAAC2D,SAAP,CAAiB,CAACvlC,CAAlB,CAAqB,CAACE,CAAtB,EACA0hC,MAAM,CAAC6D,OAAP,GACD,CAjBD,C;;ACpSA,GAAMlG,sBAAM,CAAG,QAATA,OAAS,CAAC7wB,KAAD,CAAQR,MAAR,CAAgBiC,KAAhB,CAA0B,CACvC,GAAMyxB,OAAM,CAAGh6B,QAAQ,CAAC89B,aAAT,CAAuB,QAAvB,CAAf,CACA9D,MAAM,CAAClzB,KAAP,CAAeA,KAAf,CACAkzB,MAAM,CAAC1zB,MAAP,CAAgBA,MAAhB,CACA0zB,MAAM,CAAC+D,KAAP,CAAaC,MAAb,CAAsB,IAAtB,CACAhE,MAAM,CAAC+D,KAAP,CAAat9B,QAAb,CAAwB,UAAxB,CACAu5B,MAAM,CAAC+D,KAAP,CAAa7/B,GAAb,CAAmB,KAAnB,CACA87B,MAAM,CAAC+D,KAAP,CAAa//B,IAAb,CAAoB,KAApB,CACAg8B,MAAM,CAAC+D,KAAP,CAAaE,MAAb,CAAsB,eAAtB,CAEA,GAAI11B,KAAJ,CAAW,CACTvI,QAAQ,CAACk+B,IAAT,CAAcC,WAAd,CAA0BnE,MAA1B,EACD,CAED,MAAOA,OAAP,CACD,CAfD,CAiBe,oDACbrC,MAAM,CAANA,qBADa,CAAf,E;;ACZA,GAAMyG,4BAAY,CAAG,QAAfA,aAAe,CAACt3B,KAAD,CAAQR,MAAR,CAAgBiC,KAAhB,CAA0B,CAC7C,MAAO81B,eAAc,CAAC1G,MAAf,CAAsB7wB,KAAtB,CAA6BR,MAA7B,CAAqCiC,KAArC,CAAP,CACD,CAFD,CAIA,GAAMiuB,0BAAU,CAAG,QAAbA,WAAa,CAASwD,MAAT,CAAiBsE,SAAjB,CAA4BC,UAA5B,CAAwC,CACzD,GAAID,SAAS,GAAKjmC,SAAlB,CAA6B,CAC3BimC,SAAS,CAAG,CAAZ,CACD,CAED,GAAIC,UAAU,GAAKlmC,SAAnB,CAA8B,CAC5BkmC,UAAU,CAAG,CAAb,CACD,CAED,GAAIjF,QAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAd,CACAV,OAAO,CAACtB,WAAR,CAAsB,IAAtB,CACAsB,OAAO,CAACkF,KAAR,CAAgB/8B,8BAAhB,CACA63B,OAAO,CAACpB,KAAR,CAAgBz2B,8BAAhB,CACA63B,OAAO,CAACmF,MAAR,CAAe91B,GAAf,CACE+1B,mBAAmB,CAACJ,SAAD,CADrB,CAEEK,iBAAiB,CAACJ,UAAD,CAFnB,EAKAjF,OAAO,CAACv7B,MAAR,CAAe4K,GAAf,CAAmB,CAAnB,CAAsB,OAAtB,EAEA,MAAO2wB,QAAP,CACD,CArBD,CAuBA,GAAMoF,oBAAmB,CAAG,QAAtBA,oBAAsB,CAAAE,QAAQ,QAAI,GAAI,CAAJ,CAAS,CAACA,QAAQ,CAAG,CAAZ,EAAiB,CAAlB,CAAuB,CAAnC,EAApC,CAEA,GAAMD,kBAAiB,CAAG,QAApBA,kBAAoB,CAAAC,QAAQ,QAAI,GAAI,CAAJ,CAAS,CAACA,QAAQ,CAAG,CAAZ,EAAiB,CAAlB,CAAuB,CAAnC,EAAlC,CAEA,GAAMC,6BAAa,CAAG,QAAhBA,cAAgB,CAACC,UAAD,CAAaC,SAAb,CAAwBC,SAAxB,CAAmCtI,SAAnC,CAA8C+H,MAA9C,CAAyD,CAC7E,GAAI17B,MAAK,CAAG,CAAE3K,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAZ,CACA,GAAIwO,MAAK,CAAGg4B,UAAZ,CACA,GAAIG,GAAE,CAAGn4B,KAAK,CAAG,CAAR,CAAYvO,IAAI,CAAC0D,GAAL,CAAU,GAAK,GAAN,CAAa1D,IAAI,CAAC2D,EAA3B,CAArB,CACA,GAAIrC,EAAC,CAAGwN,WAAW,CAAC7B,OAAZ,CAAoBy5B,EAApB,CAAR,CACA,GAAInlC,EAAC,CAAGuN,WAAW,CAAC1B,OAAZ,CAAoBs5B,EAApB,CAAR,CACA,GAAI7mC,EAAC,CAAG0B,CAAR,CAEA,GAAIwM,OAAM,CAAGe,WAAW,CAACtB,gBAAZ,CAA6Bk5B,EAA7B,CAAb,CAEA,GAAIjF,OAAM,CAAGoE,2BAAY,CAACt3B,KAAD,CAAQR,MAAR,CAAgB,KAAhB,CAAzB,CACA,GAAI+zB,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAwB,CAAEgF,SAAS,CAAE,IAAb,CAAxB,CAAd,CACA7E,OAAO,CAAC8E,SAAR,CAAoBJ,SAApB,CACA1E,OAAO,CAAC+E,WAAR,CAAsBL,SAAtB,CACA1E,OAAO,CAAC8E,SAAR,CAAoBH,SAApB,CACA3E,OAAO,CAAC3D,SAAR,CAAoBA,SAApB,CAEA2D,OAAO,CAACt3B,KAAR,CAAcA,KAAK,CAAC3K,CAApB,CAAuB2K,KAAK,CAACzK,CAA7B,EAEA,GAAImmC,MAAJ,CAAY,CACVxB,mBAAmB,CAAC5C,OAAD,CAAUjiC,CAAV,CAAa,CAAb,CAAgB6mC,EAAhB,CAAoB,IAApB,CAA0B,IAA1B,CAAgC,IAAhC,CAAnB,CACAhC,mBAAmB,CAAC5C,OAAD,CAAUjiC,CAAC,CAAG,CAAd,CAAiB,CAAjB,CAAoB6mC,EAApB,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,IAApC,CAAnB,CACD,CAEDhC,mBAAmB,CAAC5C,OAAD,CAAUjiC,CAAC,CAAG,CAAd,CAAiB6mC,EAAE,CAAGplC,CAAtB,CAAyBolC,EAAzB,CAA6B,IAA7B,CAAmC,IAAnC,CAAyC,IAAzC,CAAnB,CAEA,GAAIR,MAAJ,CAAY,CACVxB,mBAAmB,CAAC5C,OAAD,CAAUjiC,CAAV,CAAa6mC,EAAE,CAAG,CAAlB,CAAqBA,EAArB,CAAyB,IAAzB,CAA+B,IAA/B,CAAqC,IAArC,CAAnB,CACAhC,mBAAmB,CAAC5C,OAAD,CAAUjiC,CAAC,CAAG,CAAd,CAAiB6mC,EAAE,CAAG,CAAtB,CAAyBA,EAAzB,CAA6B,IAA7B,CAAmC,IAAnC,CAAyC,IAAzC,CAAnB,CACD,CAED,GAAII,QAAO,CAAGjB,2BAAY,CAACt3B,KAAD,CAAQA,KAAR,CAAe,KAAf,CAA1B,CAEAu4B,OAAO,CACJnF,UADH,CACc,IADd,CACoB,CAAEgF,SAAS,CAAE,IAAb,CADpB,EAEGtB,SAFH,CAEa5D,MAFb,CAEqB,CAFrB,CAEwB,CAFxB,CAE2BlzB,KAF3B,CAEkCR,MAFlC,CAE0C,CAF1C,CAE6C,CAF7C,CAEgDQ,KAFhD,CAEuDA,KAFvD,EAIA,MAAOu4B,QAAP,CACD,CAtCD,CAwCA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CACxBR,UADwB,CAExBR,SAFwB,CAGxBC,UAHwB,CAIxBQ,SAJwB,CAKxBC,SALwB,CAMxBtI,SANwB,CAOrB,CACH,MAAOF,0BAAU,CACfqI,4BAAa,CAACC,UAAD,CAAaC,SAAb,CAAwBC,SAAxB,CAAmCtI,SAAnC,CAA8C,IAA9C,CADE,CAEf4H,SAFe,CAGfC,UAHe,CAAjB,CAKD,CAbD,CAeA,GAAMgB,cAAa,CAAG,QAAhBA,cAAgB,CAACT,UAAD,CAAaC,SAAb,CAAwBC,SAAxB,CAAmCtI,SAAnC,CAAiD,CACrE,MAAOF,0BAAU,CACfqI,4BAAa,CAACC,UAAD,CAAaC,SAAb,CAAwBC,SAAxB,CAAmCtI,SAAnC,CADE,CAEf,CAFe,CAGf,CAHe,CAAjB,CAKD,CAND,CAQe,oDACbmI,aAAa,CAAbA,4BADa,CAEbS,iBAAiB,CAAjBA,iBAFa,CAGbC,aAAa,CAAbA,aAHa,CAAf,E;;AC9FA,GAAMC,aAAY,CAAG,GAArB,CACA,GAAIC,QAAO,CAAG,IAAd,CAEA,GAAMC,4BAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAM1F,OAAM,CAAG2F,cAAc,CAACd,aAAf,CACbW,YADa,CAEbI,cAAc,EAFD,CAGbC,YAAY,EAHC,CAIb,EAJa,CAAf,CAOA,GAAMC,IAAG,CAAG,GAAIr+B,wBAAJ,CAAkBu4B,MAAlB,CAAZ,CACA8F,GAAG,CAAC9H,WAAJ,CAAkB,IAAlB,CACAyH,OAAO,CAAGK,GAAV,CACD,CAXD,CAaA,GAAMF,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,MAAO,wBAAP,CACD,CAFD,CAIA,GAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,MAAO,wBAAP,CACD,CAFD,C,GAIME,4B,2FACJ,uBAAYt/B,QAAZ,CAAwC,cAAlBzH,EAAkB,2DAAd,CAAc,IAAX+J,MAAW,2DAAH,CAAG,+DACtC,mIACE,IADF,CAEE,CACE+D,KAAK,CAAEO,WAAW,CAACrB,eAAZ,GAAgCjD,KADzC,CAEEuD,MAAM,CAAEe,WAAW,CAACtB,gBAAZ,GAAiChD,KAF3C,CAFF,CAME/J,CANF,GASA,GAAI,CAACymC,OAAL,CAAc,CACZC,2BAAa,GACd,CAED,MAAK5I,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8Bk0B,OAA9B,CAEA,MAAKtzB,WAAL,CAAiB1L,QAAjB,EAhBsC,aAiBvC,C,uBAlByB24B,a,EAqBb2G,oFAAf,E;;AC7CA,GAAMP,0BAAY,CAAG,IAArB,CAEA,GAAMQ,YAAW,CAAG,QAAdA,YAAc,CAACC,GAAD,CAAS,CAC3B,GAAIA,GAAG,GAAK,CAAZ,CAAe,CACb,MAAO,EAAP,CACD,CAED,MAAOA,IAAG,CAAG,CAAN,CAAU,CAAjB,CACD,CAND,CAQA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACh0B,OAAD,CAAa,CACnC,GAAIA,OAAO,GAAK,CAAhB,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,MAAOA,QAAO,CAAG,CAAV,CAAc,CAArB,CACD,CAND,CAQA,GAAMi0B,aAAY,CAAG,QAAfA,aAAe,CAACC,IAAD,CAAU,CAC7B,GAAIA,IAAI,GAAK,CAAb,CAAgB,CACd,MAAO,EAAP,CACD,CAED,MAAOA,KAAI,CAAG,CAAP,CAAW,CAAlB,CACD,CAND,CAQA,GAAMC,qBAAO,CAAG,QAAVA,QAAU,CAAChG,OAAD,CAAU4F,GAAV,CAAeK,MAAf,CAA0B,CACxC,GAAI,CAACL,GAAL,CAAU,CACR,OACD,CAED,GAAIpmC,EAAC,CAAG,GAAR,CAEA,GAAIomC,GAAG,CAAG,CAAV,CAAa,CACXpmC,CAAC,CAAG,GAAJ,CACD,CAEDwgC,OAAO,CAAC+E,WAAR,CAAsB,wBAAtB,CACA/E,OAAO,CAAC3D,SAAR,CAAoBsJ,WAAW,CAACC,GAAD,CAA/B,CAZwC,oBAcrBM,cAAc,CAACN,GAAD,CAAMK,MAAN,CAdO,CAchCjE,EAdgC,iBAchCA,EAdgC,CAc5BX,EAd4B,iBAc5BA,EAd4B,CAexCY,0BAAiB,CAACjC,OAAD,CAAUmF,yBAAY,CAAG,CAAzB,CAA4BA,yBAAY,CAAG,CAA3C,CAA8CnD,EAA9C,CAAkDX,EAAlD,CAAjB,CACD,CAhBD,CAkBA,GAAM6E,eAAc,CAAG,QAAjBA,eAAiB,CAACN,GAAD,CAAMK,MAAN,CAAiB,CACtC,MAAO,CACLjE,EAAE,CAAGmD,yBAAY,CAAG,GAAf,CAAqBc,MAAM,CAACloC,CAA7B,CAAkC,CAAlC,CAAsC4nC,WAAW,CAACC,GAAD,CADhD,CAELvE,EAAE,CAAG8D,yBAAY,CAAG,GAAf,CAAqBc,MAAM,CAAChoC,CAA7B,CAAkC,CAAlC,CAAsC0nC,WAAW,CAACC,GAAD,CAFhD,CAAP,CAID,CALD,CAOA,GAAMO,gBAAe,CAAG,QAAlBA,gBAAkB,CAACP,GAAD,CAAM/zB,OAAN,CAAek0B,IAAf,CAAqBE,MAArB,CAAgC,sBACnCC,cAAc,CAACN,GAAD,CAAMK,MAAN,CADqB,CAC9CjE,EAD8C,kBAC9CA,EAD8C,CAC1CX,EAD0C,kBAC1CA,EAD0C,CAGtD,MAAO,CACLW,EAAE,CACAA,EAAE,CACF2D,WAAW,CAACC,GAAD,CAAX,CAAmB,CADnB,CAEA,EAFA,CAGAC,eAAe,CAACh0B,OAAD,CAAf,CAA2B,CAH3B,CAIA,EAJA,CAKAi0B,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAPlB,CAQL1E,EAAE,CACAA,EAAE,CACFsE,WAAW,CAACC,GAAD,CAAX,CAAmB,CADnB,CAEA,EAFA,CAGAC,eAAe,CAACh0B,OAAD,CAAf,CAA2B,CAH3B,CAIA,EAJA,CAKAi0B,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAdlB,CAAP,CAgBD,CAnBD,CAqBA,GAAMK,mBAAkB,CAAG,QAArBA,mBAAqB,CAACR,GAAD,CAAM/zB,OAAN,CAAeo0B,MAAf,CAA0B,sBAChCC,cAAc,CAACN,GAAD,CAAMK,MAAN,CADkB,CAC3CjE,EAD2C,kBAC3CA,EAD2C,CACvCX,EADuC,kBACvCA,EADuC,CAGnD,MAAO,CACLW,EAAE,CAAEA,EAAE,CAAG2D,WAAW,CAACC,GAAD,CAAX,CAAmB,CAAxB,CAA4B,EAA5B,CAAiCC,eAAe,CAACh0B,OAAD,CAAf,CAA2B,CAD3D,CAELwvB,EAAE,CAAEA,EAAE,CAAGsE,WAAW,CAACC,GAAD,CAAX,CAAmB,CAAxB,CAA4B,EAA5B,CAAiCC,eAAe,CAACh0B,OAAD,CAAf,CAA2B,CAF3D,CAAP,CAID,CAPD,CASA,GAAMw0B,yBAAW,CAAG,QAAdA,YAAc,CAACrG,OAAD,CAAU4F,GAAV,CAAe/zB,OAAf,CAAwBo0B,MAAxB,CAAmC,CACrD,GAAI,CAACp0B,OAAL,CAAc,CACZ,OACD,CAED,GAAIrS,EAAC,CAAG,GAAR,CAEA,GAAIqS,OAAO,CAAG,CAAd,CAAiB,CACfrS,CAAC,CAAG,GAAJ,CACD,CAEDwgC,OAAO,CAAC+E,WAAR,CAAsB,uBAAtB,CACA/E,OAAO,CAAC3D,SAAR,CAAoBwJ,eAAe,CAACh0B,OAAD,CAAnC,CACAmuB,OAAO,CAACsG,WAAR,CAAoB,CAAC,EAAD,CAAK,CAAL,CAApB,EAbqD,wBAelCF,kBAAkB,CAACR,GAAD,CAAM/zB,OAAN,CAAeo0B,MAAf,CAfgB,CAe7CjE,EAf6C,qBAe7CA,EAf6C,CAezCX,EAfyC,qBAezCA,EAfyC,CAgBrDY,0BAAiB,CAACjC,OAAD,CAAUmF,yBAAY,CAAG,CAAzB,CAA4BA,yBAAY,CAAG,CAA3C,CAA8CnD,EAA9C,CAAkDX,EAAlD,CAAjB,CAEArB,OAAO,CAACsG,WAAR,CAAoB,EAApB,EACD,CAnBD,CAqBA,GAAMC,sBAAQ,CAAG,QAAXA,SAAW,CAACvG,OAAD,CAAU4F,GAAV,CAAe/zB,OAAf,CAAwBk0B,IAAxB,CAA8BE,MAA9B,CAAyC,CACxD,GAAI,CAACF,IAAL,CAAW,CACT,OACD,CAED,GAAIvmC,EAAC,CAAG,GAAR,CAEA,GAAIumC,IAAI,CAAG,CAAX,CAAc,CACZvmC,CAAC,CAAG,GAAJ,CACD,CAEDwgC,OAAO,CAAC+E,WAAR,CAAsB,sBAAtB,CACA/E,OAAO,CAAC3D,SAAR,CAAoByJ,YAAY,CAACC,IAAD,CAAhC,CACA/F,OAAO,CAACsG,WAAR,CAAoB,CAAC,EAAD,CAAK,CAAL,CAApB,EAbwD,qBAerCH,eAAe,CAACP,GAAD,CAAM/zB,OAAN,CAAek0B,IAAf,CAAqBE,MAArB,CAfsB,CAehDjE,EAfgD,kBAehDA,EAfgD,CAe5CX,EAf4C,kBAe5CA,EAf4C,CAgBxDY,0BAAiB,CAACjC,OAAD,CAAUmF,yBAAY,CAAG,CAAzB,CAA4BA,yBAAY,CAAG,CAA3C,CAA8CnD,EAA9C,CAAkDX,EAAlD,CAAjB,CAEArB,OAAO,CAACsG,WAAR,CAAoB,EAApB,EACD,CAnBD,C,GAqBME,0B,0FACJ,sBAAYxI,IAAZ,CAAkBr/B,CAAlB,CAAqB8nC,UAArB,CAAiC,wEAC/B,kIAAM,IAAN,CAAYzI,IAAZ,CAAkBr/B,CAAlB,GACA,MAAKinC,GAAL,CAAW,CAAX,CACA,MAAKG,IAAL,CAAY,CAAZ,CACA,MAAKU,UAAL,CAAkBA,UAAlB,CAJ+B,aAKhC,C,wHAEuB,CACtB,GAAMp8B,IAAG,CACP,KAAKo8B,UAAL,CAAgB1oC,CAAhB,CAAoB,KAAK0oC,UAAL,CAAgBxoC,CAApC,CACI,KAAKwoC,UAAL,CAAgB1oC,CADpB,CAEI,KAAK0oC,UAAL,CAAgBxoC,CAHtB,CAKA,GAAMgoC,OAAM,CAAG,CACbloC,CAAC,CAAE,KAAK0oC,UAAL,CAAgB1oC,CAAhB,CAAoBsM,GADV,CAEbpM,CAAC,CAAE,KAAKwoC,UAAL,CAAgBxoC,CAAhB,CAAoBoM,GAFV,CAAf,CAKA,MAAO47B,OAAP,CACD,C,sCAEML,G,CAAKG,I,CAAMl0B,O,CAAS,CACzB,GAAI,KAAK+zB,GAAL,GAAaA,GAAb,EAAoB,KAAKG,IAAL,GAAcA,IAAlC,EAA0C,KAAKl0B,OAAL,GAAiBA,OAA/D,CAAwE,CACtE,OACD,CAED,KAAK+zB,GAAL,CAAWA,GAAX,CACA,KAAKG,IAAL,CAAYA,IAAZ,CACA,KAAKl0B,OAAL,CAAeA,OAAf,CAEA,GAAM8tB,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsB6H,yBAAtB,CAAoCA,yBAApC,CAAf,CACA,GAAMnF,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CACAmG,oBAAO,CAAChG,OAAD,CAAU4F,GAAV,CAAe,KAAKc,qBAAL,EAAf,CAAP,CACAL,wBAAW,CAACrG,OAAD,CAAU4F,GAAV,CAAe/zB,OAAf,CAAwB,KAAK60B,qBAAL,EAAxB,CAAX,CACAH,qBAAQ,CAACvG,OAAD,CAAU4F,GAAV,CAAe/zB,OAAf,CAAwBk0B,IAAxB,CAA8B,KAAKW,qBAAL,EAA9B,CAAR,CAEA,GAAMzH,QAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAhB,CACAV,OAAO,CAACtB,WAAR,CAAsB,IAAtB,CACA,KAAKlB,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B+tB,OAA9B,CACD,C,0BAxCwBF,a,EA2CZyH,iFAAf,E;;ACtKA,GAAIvH,yBAAO,CAAG,IAAd,CACA,GAAMkG,8BAAY,CAAG,GAArB,CAEA,GAAME,+BAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAIpG,wBAAJ,CAAa,CACX,OACD,CAED,GAAMU,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsB6H,6BAAtB,CAAoCA,6BAApC,CAAf,CACA,GAAMnF,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CACAG,OAAO,CAAC+E,WAAR,CAAsB,mBAAtB,CACA/E,OAAO,CAAC8E,SAAR,CAAoB,mBAApB,CAEA1C,kBAAS,CACPpC,OADO,CAEPmF,6BAAY,CAAG,CAFR,CAGPA,6BAAY,CAAG,CAHR,CAIP,CAJO,CAKPA,6BAAY,CAAG,CALR,CAMP,CANO,CAAT,CASAlG,wBAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAV,CACAV,wBAAO,CAACtB,WAAR,CAAsB,IAAtB,CACD,CArBD,C,GAuBMgJ,kC,8FACJ,0BAAY3I,IAAZ,CAAkBr/B,CAAlB,CAAqB69B,OAArB,CAA8B,4EAC5B,sIAAM,IAAN,CAAYwB,IAAZ,CAAkBr/B,CAAlB,GAEA,MAAKioC,UAAL,CAAgBpK,OAAhB,EAEA6I,8BAAa,GACb,MAAK5I,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B+tB,wBAA9B,CAN4B,aAO7B,C,0BAR4BF,a,EAWhB4H,6FAAf,E;;ACrCA,GAAI1H,2BAAO,CAAG,IAAd,CACA,GAAMkG,gCAAY,CAAG,GAArB,CAEA,GAAME,iCAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAIpG,0BAAJ,CAAa,CACX,OACD,CAED,GAAMU,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsB6H,+BAAtB,CAAoCA,+BAApC,CAAf,CACA,GAAMnF,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CACAG,OAAO,CAAC+E,WAAR,CAAsB,qBAAtB,CACA/E,OAAO,CAAC8E,SAAR,CAAoB,qBAApB,CAEApD,yBAAgB,CACd1B,OADc,CAEdmF,+BAAY,CAAG,CAFD,CAGdA,+BAAY,CAAG,CAHD,CAIdA,+BAAY,CAAG,GAJD,CAKdA,+BAAY,CAAG,GALD,CAMd,EANc,CAOd,GAPc,CAAhB,CAUAlG,0BAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAV,CACAV,0BAAO,CAACtB,WAAR,CAAsB,IAAtB,CACD,CAtBD,C,GAwBMkJ,sC,gGACJ,4BAAY7I,IAAZ,CAAkBr/B,CAAlB,CAAqB69B,OAArB,CAA8B,8EAC5B,wIAAM,IAAN,CAAYwB,IAAZ,CAAkBr/B,CAAlB,GAEA,MAAKioC,UAAL,CAAgBpK,OAAhB,EAEA6I,gCAAa,GACb,MAAK5I,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B+tB,0BAA9B,CAN4B,aAO7B,C,4BAR8BF,a,EAWlB8H,mGAAf,E;;ACxCA,GAAM1B,wBAAY,CAAG,GAArB,C,GAEM2B,sB,yBACJ,oBAAYC,IAAZ,CAAkBxK,KAAlB,CAAyB59B,CAAzB,CAA4BukB,IAA5B,CAAkC,CAAC,2DACjC,GAAI,CAACA,IAAL,CAAW,CACTA,IAAI,CAAG,EAAP,CACD,CAED,KAAKvkB,CAAL,CAASA,CAAC,EAAI,CAAd,CAEA,GAAMq/B,KAAI,CAAG9a,IAAI,CAAC8a,IAAL,EAAamH,uBAA1B,CAEA,KAAK5I,KAAL,CAAaA,KAAK,EAAI,qBAAtB,CAEA,KAAKyK,QAAL,CAAgB9jB,IAAI,CAAC8jB,QAAL,EAAiB,MAAjC,CACA,KAAKC,IAAL,CAAY/jB,IAAI,CAAC+jB,IAAL,EAAa,aAAzB,CAEA,GAAItH,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsBU,IAAtB,CAA4BA,IAA5B,CAAb,CACA,GAAIgC,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAd,CACAG,OAAO,CAACqD,IAAR,GACArD,OAAO,CAAC8E,SAAR,CAAoB,KAAKvI,KAAzB,CACAyD,OAAO,CAACiH,IAAR,CAAe,KAAKD,QAAL,CAAgB,GAAhB,CAAsB,KAAKC,IAA1C,CACAjH,OAAO,CAACkH,SAAR,CAAoB,QAApB,CACAlH,OAAO,CAACmH,YAAR,CAAuB,QAAvB,CACAnH,OAAO,CAACoH,aAAR,CAAwB,CAAxB,CACApH,OAAO,CAACqH,aAAR,CAAwB,CAAxB,CAEArH,OAAO,CAACsH,WAAR,CAAsB,eAAtB,CAEAtH,OAAO,CAACuH,UAAR,CAAqB,CAArB,CACAvH,OAAO,CAACwH,QAAR,CAAiBT,IAAjB,CAAuB7oC,IAAI,CAAC6D,KAAL,CAAWi8B,IAAI,CAAG,CAAlB,CAAvB,CAA6C9/B,IAAI,CAAC6D,KAAL,CAAWi8B,IAAI,CAAG,CAAlB,CAA7C,EACAgC,OAAO,CAACwD,OAAR,GAEA,GAAIzF,SAAQ,CAAG,GAAI32B,8BAAJ,CAAwB42B,IAAxB,CAA8BA,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAAf,CAEA,GAAIiB,QAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAd,CACAV,OAAO,CAACtB,WAAR,CAAsB,IAAtB,CAEA,KAAKnC,QAAL,CAAgB,GAAIp0B,kCAAJ,CAA4B,CAC1C4B,GAAG,CAAEi2B,OADqC,CAE1ClC,WAAW,CAAE,IAF6B,CAG1CE,SAAS,CAAE,KAH+B,CAI1CD,UAAU,CAAE,KAJ8B,CAA5B,CAAhB,CAOA,KAAKV,IAAL,CAAY,GAAIl1B,qBAAJ,CAAe22B,QAAf,CAAyB,KAAKvC,QAA9B,CAAZ,CACD,C,2FAEQ/uB,K,CAAOR,M,CAAQ,CACtB,KAAKqwB,IAAL,CAAU5zB,KAAV,CAAgB4F,GAAhB,CAAoB7B,KAApB,CAA2BR,MAA3B,CAAmC,CAAnC,EACD,C,mCAEM,CACL,KAAKqwB,IAAL,CAAUmC,OAAV,CAAoB,KAApB,CACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKnC,IAAL,CAAUmC,OAAV,CAAoB,IAApB,CACA,MAAO,KAAP,CACD,C,8CAEUjC,O,CAAS,CAClB,KAAKhB,QAAL,CAAcgB,OAAd,CAAwBA,OAAxB,CACD,C,gDAEWhvB,G,CAAK,CACf,KAAK8uB,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,CAAuByP,GAAG,CAACzP,CAA3B,CACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,CAAuBuP,GAAG,CAACvP,CAA3B,CACA,KAAKq+B,IAAL,CAAUl2B,QAAV,CAAmBzH,CAAnB,CAAuB,KAAKA,CAA5B,CACA,MAAO,KAAP,CACD,C,yCAES,CACR,KAAK29B,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,GACD,C,0BAGYmI,2EAAf,E;;AC5EA,GAAI7H,qBAAO,CAAG,IAAd,CACA,GAAMkG,0BAAY,CAAG,GAArB,CAEA,GAAME,2BAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAIpG,oBAAJ,CAAa,CACX,OACD,CAED,GAAMU,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsB6H,yBAAtB,CAAoCA,yBAApC,CAAf,CACA,GAAMnF,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CACAG,OAAO,CAAC+E,WAAR,CAAsB,uBAAtB,CACA/E,OAAO,CAAC8E,SAAR,CAAoB,uBAApB,CAEA5C,iBAAiB,CACflC,OADe,CAEfmF,yBAAY,CAAG,CAFA,CAGfA,yBAAY,CAAG,CAHA,CAIfA,yBAAY,CAAG,GAJA,CAKf,CALe,CAAjB,CAQAlG,oBAAO,CAAG,GAAI73B,wBAAJ,CAAkBu4B,MAAlB,CAAV,CACAV,oBAAO,CAACtB,WAAR,CAAsB,IAAtB,CACD,CApBD,C,GAsBM8J,0B,0FACJ,sBAAYrhC,QAAZ,CAAsB43B,IAAtB,CAA4Br/B,CAA5B,CAA+B69B,OAA/B,CAAwC,wEACtC,kIAAM,IAAN,CAAYwB,IAAZ,CAAkBr/B,CAAlB,GAEA,MAAKioC,UAAL,CAAgBpK,OAAhB,EAEA6I,0BAAa,GAEb,MAAK5I,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B+tB,oBAA9B,CACA,MAAKntB,WAAL,CAAiB1L,QAAjB,EARsC,aASvC,C,sBAVwB24B,a,EAaZ0I,iFAAf,E;;ACrCA,GAAM3I,2BAAY,CAAG,GAAI13B,+BAAJ,CAAyB,CAC5Cg2B,YAAY,CAAE/D,yBAD8B,CAE5CgE,cAAc,CAAEjE,2BAF4B,CAG5C2D,WAAW,CAAE,IAH+B,CAI5CC,UAAU,CAAE,KACZ;AAL4C,CAAzB,CAArB,CAQA,GAAIiC,sBAAO,CAAG,GAAI73B,8BAAJ,GAA0B60B,IAA1B,CAA+B,sBAA/B,CAAd,CACA,GAAIyL,sBAAqB,CAAG,GAAItgC,8BAAJ,GAA0B60B,IAA1B,CAC1B,oCAD0B,CAA5B,C,GAIM0L,4B,2FACJ,uBAAYvhC,QAAZ,CAAsB43B,IAAtB,CAA4Br/B,CAA5B,CAA+B69B,OAA/B,CAAgE,cAAxBoL,eAAwB,2DAAP,KAAO,+DAC9D,mIAAM,IAAN,CAAY5J,IAAZ,CAAkBr/B,CAAlB,GAEA,MAAKioC,UAAL,CAAgBpK,OAAhB,EAEA,GAAIoL,cAAJ,CAAoB,CAClB,MAAKnL,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8Bw2B,qBAA9B,CACD,CAFD,IAEO,CACL,MAAKjL,QAAL,CAAcwC,OAAd,CAAsB/tB,KAAtB,CAA8B+tB,qBAA9B,CACD,CACD,MAAKntB,WAAL,CAAiB1L,QAAjB,EAV8D,aAW/D,C,qGAEa,CACZ,MAAO04B,2BAAP,CACD,C,2BAhByBC,a,EAmBb4I,oFAAf,E;;;;AChCA,GAAIE,YAAW,CAAG,IAAlB,CAEA,GAAM/I,kBAAY,CAAG,GAAI13B,+BAAJ,CAAyB,CAC5Cg2B,YAAY,CAAE7D,uBAD8B,CAE5C8D,cAAc,CAAE/D,yBAF4B,CAG5CyD,WAAW,CAAE,IAH+B,CAI5CC,UAAU,CAAE,KAJgC,CAK5C;AACAE,IAAI,CAAE91B,0BANsC,CAO5C+1B,QAAQ,CAAE/1B,gCAPkC,CAAzB,CAArB,CAUA,GAAMq1B,cAAQ,CAAG,CACfC,IAAI,CAAE,CAAEptB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CADS,CAAjB,CAIA4tB,iBAAY,CAACrC,QAAb,CAAwBA,aAAxB,CACA;;;;EAMA,GAAMe,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,GAAMC,IAAG,CAAGC,IAAI,CAACD,GAAL,EAAZ,CACAqB,iBAAY,CAACrC,QAAb,CAAsBC,IAAtB,CAA2BxrB,KAA3B,CAAoCusB,GAAG,CAAG,IAAP,CAAe,KAAlD,CACAqB,iBAAY,CAACnB,WAAb,CAA2B,IAA3B,CACAC,qBAAqB,CAACJ,OAAD,CAArB,CACD,CALD,CAOA,GAAMsK,cAAa,CAAG,EAAtB,CAEAtK,OAAO,G,GAEDuK,U,yBACJ,cAAYn7B,KAAZ,CAA8B,mBAAXsW,KAAW,2DAAJ,EAAI,sDAC5B,GAAI,CAACA,IAAL,CAAW,CACTA,IAAI,CAAG,EAAP,CACD,CAED,KAAKtW,KAAL,CAAaA,KAAb,CACA,KAAK0vB,IAAL,CAAY,IAAZ,CACA,KAAKn8B,KAAL,CAAa+iB,IAAI,CAAC/iB,KAAlB,CACA,KAAKC,GAAL,CAAW8iB,IAAI,CAAC9iB,GAAhB,CACA,KAAKqM,KAAL,CAAayW,IAAI,CAACzW,KAAL,EAAc,EAA3B,CACA,KAAKowB,WAAL,CAAmB3Z,IAAI,CAAC2Z,WAAL,EAAoB,CAAvC,CACA,KAAKC,UAAL,CAAkB5Z,IAAI,CAAC4Z,UAAL,EAAmB,CAArC,CACA,KAAKkL,QAAL,CAAgB9kB,IAAI,CAAC8kB,QAAL,EAAiB,CAAjC,CACA,KAAK7oC,MAAL,CAAc,GAAIiI,wBAAJ,GAAoB6gC,UAApB,CAA+B,KAAK9nC,KAApC,CAA2C,KAAKC,GAAhD,EAAqDjB,MAArD,EAAd,CACA,KAAKmQ,IAAL,CAAY4T,IAAI,CAAC5T,IAAL,EAAa,OAAzB,CAEA,KAAK44B,KAAL,CAAa,GAAIpM,QAAJ,CAAY,SAAAC,OAAO,CAAI,CAClC,KAAI,CAACoM,YAAL,CAAoBpM,OAApB,CACD,CAFY,CAAb,CAIA,KAAKQ,KAAL,CAAarZ,IAAI,CAACqZ,KAAlB,CACA,KAAKC,OAAL,CAAetZ,IAAI,CAACsZ,OAApB,CAEA,KAAK4L,qBAAL,CAA6B,IAA7B,CAEA,KAAK9K,MAAL,CAAY,KAAKn9B,KAAjB,CAAwB,KAAKC,GAA7B,CAAkC,KAAKqM,KAAvC,EACD,C,yUAGMo7B,W,+CACkBnM,WAAU,CAAC,0BAAD,C,QAAzB3tB,M,eACN85B,WAAW,CAAG95B,MAAM,CAACnB,KAAP,CAAaiB,QAAb,CAAsB,CAAtB,CAAd,CACAg6B,WAAW,CAACtI,QAAZ,CAAqBjxB,GAArB,CACEu5B,WAAW,CAACtI,QAAZ,CAAqBxhC,CAArB,CAAyBqE,cAAc,CAAC,EAAD,CADzC,CAEEylC,WAAW,CAACtI,QAAZ,CAAqBthC,CAFvB,CAGE4pC,WAAW,CAACtI,QAAZ,CAAqB5gC,CAHvB,EAKAkpC,WAAW,CAACrM,QAAZ,CAAuBsD,iBAAvB,C,uCAGK+I,W,8SAGQp7B,K,CAAOR,M,wJACL,MAAKo8B,WAAL,E,QAAb/L,I,gBACJA,IAAI,CAAGA,IAAI,CAAC90B,KAAL,EAAP,CACA80B,IAAI,CAACyB,QAAL,CAAgBzB,IAAI,CAACyB,QAAL,CAAcv2B,KAAd,EAAhB,CACA;AACA80B,IAAI,CAAC5zB,KAAL,CAAW4F,GAAX,CAAe7B,KAAf,CAAsBA,KAAtB,CAA6BR,MAA7B,E,iCAEOqwB,I,sNAGS,CAChB,OAAQ,KAAKhtB,IAAb,EACE,IAAK,UAAL,CACE,MAAO,GAAP,CACF,IAAK,OAAL,CACE,MAAO,GAAP,CAJJ,CAMD,C,0CAEQtD,M,CAAmB,IAAXs8B,MAAW,2DAAH,CAAG,CAC1B,KAAKzL,WAAL,CAAmB7wB,MAAnB,CACA,KAAK8wB,UAAL,CAAkBwL,KAAlB,CAEA,GAAI,CAAC,KAAKC,cAAV,CAA0B,CACxB,GAAMC,OAAM,CAAG,EAAf,CACA,IAAK,GAAIvpC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,CAAC,EAA7C,CAAiD,CAC/CupC,MAAM,CAAClgC,IAAP,CAAY,KAAKu0B,WAAjB,CAA8B,KAAKC,UAAnC,EACD,CACD,KAAKyL,cAAL,CAAsB,GAAInhC,gCAAJ,CACpB,GAAIshC,aAAJ,CAAiBF,MAAjB,CADoB,CAEpB,CAFoB,EAGpBG,UAHoB,CAGT,IAHS,CAAtB,CAIA,KAAKrM,IAAL,CAAUyB,QAAV,CAAmB6K,YAAnB,CAAgC,OAAhC,CAAyC,KAAKL,cAA9C,EACD,CAVD,IAUO,CACL,IAAK,GAAItpC,GAAC,CAAG,CAAb,CAAgBA,EAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,EAAC,EAA7C,CAAiD,CAC/C,KAAKspC,cAAL,CAAoBM,KAApB,CAA0B5pC,EAA1B,CAA6B,KAAK49B,WAAlC,CAA+C,KAAKC,UAApD,EACD,CACF,CAED,KAAKgM,aAAL,CAAmBnL,WAAnB,CAAiC,IAAjC,CACD,C,4CAESqK,Q,CAAU,CAClB,KAAKe,SAAL,CAAiBf,QAAQ,CAAG,KAAK7oC,MAAjC,CAEA,GAAI,CAAC,KAAK2pC,aAAV,CAAyB,CACvB,GAAME,OAAM,CAAG,EAAf,CACA,IAAK,GAAI/pC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,CAAC,EAA7C,CAAiD,CAC/C+pC,MAAM,CAAC1gC,IAAP,CAAY,KAAKygC,SAAjB,EACD,CACD,KAAKD,aAAL,CAAqB,GAAI1hC,gCAAJ,CACnB,GAAIshC,aAAJ,CAAiBM,MAAjB,CADmB,CAEnB,CAFmB,EAGnBL,UAHmB,CAGR,IAHQ,CAArB,CAIA,KAAKrM,IAAL,CAAUyB,QAAV,CAAmB6K,YAAnB,CAAgC,WAAhC,CAA6C,KAAKE,aAAlD,EACD,CAVD,IAUO,CACL,IAAK,GAAI7pC,IAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,GAAC,EAA7C,CAAiD,CAC/C,KAAK6pC,aAAL,CAAmBvK,IAAnB,CAAwBt/B,GAAxB,CAA2B,KAAK6pC,aAAhC,EACD,CACF,CAED,KAAKA,aAAL,CAAmBnL,WAAnB,CAAiC,IAAjC,CACD,C,4DAEiBpB,K,CAAO,CACvB,GAAM0M,OAAM,CAAG,EAAf,CACA,IAAK,GAAIhqC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,CAAC,EAA7C,CAAiD,CAC/CgqC,MAAM,CAAC3gC,IAAP,CAAYi0B,KAAK,CAAC18B,CAAlB,CAAqB08B,KAAK,CAAC+C,CAA3B,CAA8B/C,KAAK,CAAC98B,CAApC,EACD,CACD,KAAKypC,cAAL,CAAsB,GAAI9hC,gCAAJ,CACpB,GAAIshC,aAAJ,CAAiBO,MAAjB,CADoB,CAEpB,CAFoB,EAGpBN,UAHoB,CAGT,IAHS,CAAtB,CAIA,KAAKrM,IAAL,CAAUyB,QAAV,CAAmB6K,YAAnB,CAAgC,OAAhC,CAAyC,KAAKM,cAA9C,EAEA,KAAKA,cAAL,CAAoBvL,WAApB,CAAkC,IAAlC,CACD,C,uJAEcpB,K,qJACP,MAAK2L,K,QACX,KAAK3L,KAAL,CAAaA,KAAb,CACA,IAASt9B,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,CAAC,EAA7C,CAAiD,CAC/C,KAAKiqC,cAAL,CAAoBC,MAApB,CAA2BlqC,CAA3B,CAA8B,KAAKs9B,KAAL,CAAW18B,CAAzC,CAA4C,KAAK08B,KAAL,CAAW+C,CAAvD,CAA0D,KAAK/C,KAAL,CAAW98B,CAArE,EACD,CAED,KAAKypC,cAAL,CAAoBvL,WAApB,CAAkC,IAAlC,C,gMAGSnB,O,CAAS,CAClB,KAAKA,OAAL,CAAeA,OAAf,CACA,GAAI,CAAC,KAAK4M,gBAAV,CAA4B,CAC1B,GAAMC,SAAQ,CAAG,EAAjB,CACA,IAAK,GAAIpqC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,CAAC,EAA7C,CAAiD,CAC/CoqC,QAAQ,CAAC/gC,IAAT,CAAck0B,OAAd,EACD,CACD,KAAK4M,gBAAL,CAAwB,GAAIhiC,gCAAJ,CACtB,GAAIshC,aAAJ,CAAiBW,QAAjB,CADsB,CAEtB,CAFsB,EAGtBV,UAHsB,CAGX,IAHW,CAAxB,CAIA,KAAKrM,IAAL,CAAUyB,QAAV,CAAmB6K,YAAnB,CAAgC,SAAhC,CAA2C,KAAKQ,gBAAhD,EACD,CAVD,IAUO,CACL,IAAK,GAAInqC,IAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,KAAKwpC,eAAL,EAApB,CAA4CxpC,GAAC,EAA7C,CAAiD,CAC/C,KAAKmqC,gBAAL,CAAsB7K,IAAtB,CAA2Bt/B,GAA3B,CAA8B,KAAKu9B,OAAnC,EACD,CACF,CAED,KAAK4M,gBAAL,CAAsBzL,WAAtB,CAAoC,IAApC,CACD,C,sDAEc2L,M,CAAQC,M,CAAQ,CAC7B,GAAMC,YAAW,CAAG,GAAIpiC,wBAAJ,EAApB,CACAoiC,WAAW,CAACC,MAAZ,CAAmBH,MAAnB,CAA2BC,MAA3B,CAAmC,GAAIniC,yBAAJ,GAAqBsiC,EAAxD,EACAF,WAAW,CAACG,QAAZ,CACE,GAAIviC,wBAAJ,GAAoBkH,GAApB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,CAAjC,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,CAA1C,CAA6C,CAA7C,CAAgD,CAAhD,CAAmD,CAAC,CAApD,CAAuD,CAAvD,CAA0D,CAA1D,CAA6D,CAA7D,CAAgE,CAAhE,CAAmE,CAAnE,CAAsE,CAAtE,CADF,EAIA,MAAOk7B,YAAP,CACD,C,mJAEYF,M,CAAQC,M,CAAQlN,S,oKACR,MAAKuN,UAAL,CAAgBvN,SAAhB,CAA2B,KAAKl9B,MAAhC,C,QAAbm9B,I,gBACAkN,W,CAAc,KAAKK,cAAL,CAAoBP,MAApB,CAA4BC,MAA5B,C,CAEpBjN,IAAI,CAACwN,WAAL,CAAiBN,WAAjB,EACA,KAAKpB,qBAAL,CAA6BoB,WAA7B,CAEAlN,IAAI,CAACl2B,QAAL,CAAcrI,CAAd,CAAkB,CAACwrC,MAAM,CAACxrC,CAAP,CAAWurC,MAAM,CAACvrC,CAAnB,EAAwB,CAA1C,CACAu+B,IAAI,CAACl2B,QAAL,CAAcnI,CAAd,CAAkB,CAACsrC,MAAM,CAACtrC,CAAP,CAAWqrC,MAAM,CAACrrC,CAAnB,EAAwB,CAA1C,CACAq+B,IAAI,CAACl2B,QAAL,CAAczH,CAAd,CAAkB,CAAC4qC,MAAM,CAAC5qC,CAAP,CAAW2qC,MAAM,CAAC3qC,CAAnB,EAAwB,CAA1C,CAEA,KAAKiO,KAAL,CAAW5M,GAAX,CAAes8B,IAAf,EACA,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAK6L,YAAL,CAAkB,IAAlB,EACA,KAAK4B,iBAAL,CAAuB,KAAKxN,KAA5B,EACA,KAAKqK,UAAL,CAAgB,KAAKpK,OAArB,EACA,KAAKwN,SAAL,CAAe,KAAKhC,QAApB,EACA,KAAKiC,QAAL,CAAc,KAAKpN,WAAnB,CAAgC,KAAKC,UAArC,E,oMAGW,CACX,GAAM0M,YAAW,CAAG,KAAKK,cAAL,CAAoB,KAAK1pC,KAAzB,CAAgC,KAAKC,GAArC,CAApB,CAEA,KAAKk8B,IAAL,CAAUwN,WAAV,CACE,GAAI1iC,wBAAJ,GAAoB8iC,UAApB,CAA+B,KAAK9B,qBAApC,CADF,EAIA,KAAK9L,IAAL,CAAU5zB,KAAV,CAAgB4F,GAAhB,CAAoB,KAAK7B,KAAzB,CAAgC,KAAKA,KAArC,CAA4C,KAAKtN,MAAjD,EAEA,KAAKm9B,IAAL,CAAUwN,WAAV,CAAsBN,WAAtB,EACA,KAAKpB,qBAAL,CAA6BoB,WAA7B,CACA,KAAKlN,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,CAAuB,CAAC,KAAKqC,GAAL,CAASrC,CAAT,CAAa,KAAKoC,KAAL,CAAWpC,CAAzB,EAA8B,CAArD,CACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,CAAuB,CAAC,KAAKmC,GAAL,CAASnC,CAAT,CAAa,KAAKkC,KAAL,CAAWlC,CAAzB,EAA8B,CAArD,CACA,KAAKq+B,IAAL,CAAUl2B,QAAV,CAAmBzH,CAAnB,CAAuB,CAAC,KAAKyB,GAAL,CAASzB,CAAT,CAAa,KAAKwB,KAAL,CAAWxB,CAAzB,EAA8B,CAArD,CACD,C,mJAEYwB,K,CAAOC,G,CAAKi8B,S,+IACjB,MAAK6L,K,QACX,KAAKz7B,KAAL,CAAa4vB,SAAb,CACA,KAAKl8B,KAAL,CAAaA,KAAb,CACA,KAAKC,GAAL,CAAWA,GAAX,CACA,KAAKjB,MAAL,CAAc,GAAIiI,wBAAJ,GAAoB6gC,UAApB,CAA+B,KAAK9nC,KAApC,CAA2C,KAAKC,GAAhD,EAAqDjB,MAArD,EAAd,CACA,KAAKgrC,UAAL,G,0LAGK/pC,G,CAAK,CACV,KAAKm9B,MAAL,CAAY,KAAKp9B,KAAjB,CAAwBC,GAAxB,CAA6B,KAAKqM,KAAlC,EACD,C,kDAEY4vB,S,CAAW,CACtB,KAAK5vB,KAAL,CAAa4vB,SAAb,CAEA,KAAKC,IAAL,CAAU5zB,KAAV,CAAgB4F,GAAhB,CAAoB,KAAK7B,KAAzB,CAAgC,KAAKA,KAArC,CAA4C,KAAKtN,MAAjD,EACD,C,wDAEeigC,C,CAAG,CACjB,KAAKwH,UAAL,CAAgB,KAAKpK,OAAL,CAAe4C,CAA/B,EACD,C,8RAGO,MAAK8I,K,QACX,KAAK5L,IAAL,CAAUmC,OAAV,CAAoB,KAApB,C,iCACO,I,maAID,MAAKyJ,K,QACX,KAAK5L,IAAL,CAAUmC,OAAV,CAAoB,IAApB,C,iCACO,I,yaAID,MAAKyJ,K,QACX,KAAKt7B,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,E,gKAIWyL,2DAAf,E;;GCtRMqC,wB,yBACJ,qBAAY/9B,IAAZ,CAAkB,CAAC,4DACjB,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAK2xB,IAAL,CAAY,CAAEvxB,KAAK,CAAE,EAAT,CAAaR,MAAM,CAAE,EAArB,CAAZ,CAEA,KAAKo+B,YAAL,CAAoB,GAAI1C,qBAAJ,CAClB,CAAE5pC,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAjB,CADkB,CAElB,KAAKq/B,IAFa,CAGlB,CAHkB,CAIlB,CAJkB,CAApB,CAMA,KAAKsM,oBAAL,CAA4B,GAAI3C,qBAAJ,CAC1B,CAAE5pC,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAjB,CAD0B,CAE1B,CAAE8N,KAAK,CAAE,EAAT,CAAaR,MAAM,CAAE,EAArB,CAF0B,CAG1B,CAH0B,CAI1B,CAJ0B,CAK1B,IAL0B,CAA5B,CAQA,KAAKs+B,MAAL,CAAc,KAAKF,YAAnB,CACA,KAAKE,MAAL,CAAYjO,IAAZ,CAAiBlwB,QAAjB,CAA4B,CAAEC,IAAI,CAAJA,IAAF,CAA5B,CACA,KAAKk+B,MAAL,CAAYC,IAAZ,GACA,KAAKH,YAAL,CAAkBG,IAAlB,GACA,KAAKF,oBAAL,CAA0BE,IAA1B,GAEA,KAAK59B,KAAL,CAAa,IAAb,CACD,C,+GAEmB,CAClB,KAAKA,KAAL,CAAW8xB,MAAX,CAAkB,KAAK6L,MAAL,CAAYjO,IAA9B,EACA,KAAKiO,MAAL,CAAc,KAAKD,oBAAnB,CACA,KAAK19B,KAAL,CAAW5M,GAAX,CAAe,KAAKuqC,MAAL,CAAYjO,IAA3B,EACA,MAAO,KAAP,CACD,C,kDAEYC,K,CAAO,CAClB,KAAKgO,MAAL,CAAYE,YAAZ,CAAyBlO,KAAzB,EACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,KAAKgO,MAAL,CAAYG,WAAZ,CAAwB,KAAKnO,KAA7B,EACA,MAAO,KAAP,CACD,C,oCAEK3vB,K,CAAO,CACX,KAAKA,KAAL,CAAaA,KAAb,CACAA,KAAK,CAAC5M,GAAN,CAAU,KAAKuqC,MAAL,CAAYjO,IAAtB,EACD,C,0CAEQ5zB,K,CAAO,CACd,KAAK6hC,MAAL,CAAYI,QAAZ,CAAqBjiC,KAArB,CAA4BA,KAA5B,EACA,MAAO,KAAP,CACD,C,gDAEW62B,Q,CAAU,CACpB,KAAK8K,YAAL,CAAkBO,SAAlB,CAA4BrL,QAA5B,EACA,KAAK+K,oBAAL,CAA0BM,SAA1B,CAAoCrL,QAApC,EACA,MAAO,KAAP,CACD,C,wDAEehD,K,CAAO,CACrB,KAAKgO,MAAL,CAAYM,eAAZ,CAA4BtO,KAA5B,EACA,MAAO,KAAP,CACD,C,kEAEoB8C,K,CAAO,CAC1B,KAAKkL,MAAL,CAAYO,oBAAZ,CAAiCzL,KAAjC,EACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKkL,MAAL,CAAYQ,IAAZ,GACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKR,MAAL,CAAYC,IAAZ,GACA,MAAO,KAAP,CACD,C,2BAGYJ,6EAAf,E;;GCnFMY,oB,yBACJ,mBAAYC,SAAZ,CAAuB,CAAC,0DACtB,KAAKA,SAAL,CAAiBA,SAAS,EAAI/sC,IAAI,CAAC6E,MAAnC,CACA,KAAKmoC,MAAL,CAAc,KAAd,CACA,KAAKC,OAAL,CAAe,KAAf,CACA,KAAKC,IAAL,CAAY,KAAZ,CACD,C,qFAEO,CACN,KAAKF,MAAL,CAAc,IAAd,CACD,C,mCAEM,CACL,KAAKA,MAAL,CAAc,KAAd,CACD,C,4CAESE,I,CAAM,CACd,KAAKA,IAAL,CAAYA,IAAZ,CACA,MAAO,KAAP,CACD,C,0DAEgB3P,Q,CAAU,CACzB,KAAK4P,aAAL,CAAqB5P,QAArB,CACA,MAAO,KAAP,CACD,C,wDAEeA,Q,CAAU,CACxB,KAAK6P,YAAL,CAAoB7P,QAApB,CACA,MAAO,KAAP,CACD,C,4DAEiBrrB,K,CAAO,CACvB,GAAI,CAAC,KAAK+6B,OAAN,EAAiB/6B,KAAK,CAAG,KAAKssB,IAAlC,CAAwC,CACtC,KAAK2O,aAAL,EAAsB,KAAKA,aAAL,EAAtB,CACA,KAAKF,OAAL,CAAe,IAAf,CACD,CACF,C,0DAEgB/6B,K,CAAO,CACtB,GAAIA,KAAK,CAAG,KAAKssB,IAAL,CAAY,KAAK1gB,QAAzB,EAAqC,CAAC,KAAKovB,IAA/C,CAAqD,CACnD,KAAKE,YAAL,EAAqB,KAAKA,YAAL,EAArB,CACA,KAAKF,IAAL,CAAY,IAAZ,CACD,CACF,C,iDAEa,CACZ,MAAO,EAAP,CACD,C,+CAEY,CAAE,C,qCAEP,CAAE,C,yCAEA,CAAE,C,sCAELpa,Q,CAAU,CAAE,C,sCAEZyM,G,CAAKrtB,K,CAAOm7B,I,CAAMxmC,K,CAAOymC,S,CAAW,CAAE,C,4DAE3B9tC,Q,CAAU,CAC1B,MAAO,IAAI6P,aAAJ,CACL,KAAK09B,SAAL,GAAmBvtC,QAAnB,CAA8BA,QAAQ,CAAG,GADpC,CAEL,KAAKutC,SAAL,GAAmBvtC,QAAnB,CAA8BA,QAAQ,CAAG,GAFpC,CAGL,KAAKutC,SAAL,GAAmBvtC,QAAnB,CAA8BA,QAAQ,CAAG,GAHpC,CAAP,CAKD,C,yBAGYstC,2EAAf,E;;AClEA,GAAMS,gBAAe,CAAG,QAAlBA,gBAAkB,CAAC1N,QAAD,CAAWzzB,KAAX,CAAkBuG,GAAlB,CAAuB66B,MAAvB,CAAkC,CACxDA,MAAM,CAAG,GAAG9gC,MAAH,CAAU8gC,MAAV,CAAT,CAEA,GAAInpC,OAAM,CAAGw7B,QAAQ,CAAC4N,UAAT,CAAoB96B,GAApB,EAAyB+6B,KAAtC,CAEAF,MAAM,CAACtjC,OAAP,CAAe,SAAU8I,KAAV,CAAiBjS,CAAjB,CAAoB,CACjCsD,MAAM,CAAC+H,KAAK,CAAGohC,MAAM,CAACvsC,MAAf,CAAwBF,CAAzB,CAAN,CAAoCiS,KAApC,CACD,CAFD,EAIA6sB,QAAQ,CAAC4N,UAAT,CAAoB96B,GAApB,EAAyB8sB,WAAzB,CAAuC,IAAvC,CACD,CAVD,CAYO,GAAMkO,YAAW,CAAG,CAApB,CACA,GAAMC,aAAY,CAAG,CAArB,CACA,GAAMC,aAAY,CAAG,CAArB,CACA,GAAMC,aAAY,CAAG,CAArB,CACA,GAAMC,iBAAgB,CAAG,CAAzB,C,GAEDC,0B,yBACJ,sBAAY1Q,QAAZ,CAAsBuC,QAAtB,CAAgC,CAAC,6DAC/B,KAAKvC,QAAL,CAAgBA,QAAhB,CACA,KAAKuC,QAAL,CAAgBA,QAAhB,CACA,KAAKzzB,KAAL,CAAa,CAAb,CACA,KAAK6hC,OAAL,CAAe,IAAf,CAEA,KAAKlN,OAAL,CAAe,CACbmN,GAAG,CAAEP,WADQ,CAEbQ,IAAI,CAAEP,YAFO,CAGbQ,IAAI,CAAEP,YAHO,CAIbhjC,IAAI,CAAEijC,YAJO,CAKbO,QAAQ,CAAEN,gBALG,CAAf,CAOD,C,yFAEM3hC,K,CAAO6hC,O,CAAS,CACrB,KAAK7hC,KAAL,CAAaA,KAAb,CACA,KAAK6hC,OAAL,CAAeA,OAAf,CACA,KAAKK,gBAAL,GACA,MAAO,KAAP,CACD,C,sCAEMliC,K,CAAO6hC,O,CAAS,CACrB,KAAK7hC,KAAL,CAAaA,KAAb,CACA,KAAK6hC,OAAL,CAAeA,OAAf,CACA,MAAO,KAAP,CACD,C,2DAEkB,CACjB,KAAKr6B,WAAL,CAAiB,CAAE/T,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAjB,CAAjB,EACA,KAAK8tC,QAAL,CAAc,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAd,EACA,KAAKw/B,UAAL,CAAgB,GAAhB,EACA,KAAK8F,SAAL,CAAe,GAAf,CAAoB,GAApB,EACA,KAAKC,UAAL,CAAgB,GAAhB,CAAqB,GAArB,EACA,KAAKC,OAAL,CAAa,GAAb,EACA,KAAKC,aAAL,CAAmB,GAAnB,EACA,KAAKC,QAAL,CAAc,GAAd,CAAmB,GAAnB,EACA,KAAKC,iBAAL,CAAuB,GAAvB,EACA,KAAKh7B,WAAL,CAAiB,GAAI3K,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAAjB,EACA,KAAK4lC,eAAL,CAAqB,GAAI5lC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAArB,EACA,KAAK6lC,UAAL,CAAgB,KAAKhO,OAAL,CAAaqN,IAA7B,EACA,KAAKY,SAAL,CAAe,CAAf,EAEA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACL5iC,KAAK,CAAE,KAAKA,KADP,CAEL6hC,OAAO,CAAE,KAAKA,OAFT,CAGL3P,OAAO,CAAE,KAAKuB,QAAL,CAAc4N,UAAd,CAAyB,SAAzB,EAAoCC,KAApC,CAA0C,KAAKthC,KAA/C,CAHJ,CAAP,CAKD,C,2CAEU,CACT,MAAO,MAAKA,KAAZ,CACD,C,4CAES85B,M,CAAQ,CAChBqH,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,QAA5B,CAAsC85B,MAAtC,CAAf,CACA,MAAO,KAAP,CACD,C,wCAEO+I,S,CAAWC,S,CAAW,CAC5B,GAAMl8B,MAAK,CAAGhT,IAAI,CAACuC,KAAL,CAAW0sC,SAAX,EAAwBC,SAAtC,CACA3B,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,MAA5B,CAAoC4G,KAApC,CAAf,CACA,MAAO,KAAP,CACD,C,8CAEUu0B,G,CAAK,CACdgG,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,eAA5B,CAA6Cm7B,GAA7C,CAAf,CAEA,MAAO,KAAP,CACD,C,wCAEOzH,I,CAAM,CACZyN,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,MAA5B,CAAoC0zB,IAApC,CAAf,CACA,MAAO,KAAP,CACD,C,oDAEaA,I,CAAM,CAClByN,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,YAA5B,CAA0C0zB,IAA1C,CAAf,CACA,MAAO,KAAP,CACD,C,0CAEQzB,K,CAAO,CACdkP,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,OAA5B,CAAqC,CAClDiyB,KAAK,CAAC18B,CAD4C,CAElD08B,KAAK,CAAC+C,CAF4C,CAGlD/C,KAAK,CAAC98B,CAH4C,CAArC,CAAf,CAKA,MAAO,KAAP,CACD,C,8CAEU+8B,O,CAAS,CAClBiP,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,SAA5B,CAAuCkyB,OAAvC,CAAf,CACA,MAAO,KAAP,CACD,C,4CAESE,I,CAAoB,IAAd4L,MAAc,2DAAN,IAAM,CAC5BmD,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,YAA5B,CAA0CoyB,IAA1C,CAAf,CACA+O,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,aAA5B,CAA2Cg+B,KAA3C,CAAf,CACA,MAAO,KAAP,CACD,C,8CAEU5L,I,CAAoB,IAAd4L,MAAc,2DAAN,IAAM,CAC7BmD,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,aAA5B,CAA2CoyB,IAA3C,CAAf,CACA+O,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,cAA5B,CAA4Cg+B,KAA5C,CAAf,CACA,MAAO,KAAP,CACD,C,gDAEW96B,G,CAAK,CACfi+B,eAAe,CACb,KAAK1N,QADQ,CAEb,KAAKzzB,KAFQ,CAGb,UAHa,CAIb,CAACkD,GAAG,CAACzP,CAAL,CAAQyP,GAAG,CAACvP,CAAZ,CAAeuP,GAAG,CAAC7O,CAAnB,CAJa,CAKb,IALa,CAAf,CAOA,MAAO,KAAP,CACD,C,0CAEQwD,K,CAAmB,IAAZqe,OAAY,2DAAH,CAAG,CAC1B,GAAMtP,MAAK,CACThT,IAAI,CAACuC,KAAL,CAAW2B,cAAc,CAACD,KAAD,CAAd,CAAwB,IAAnC,EACAjE,IAAI,CAACuC,KAAL,CAAW2B,cAAc,CAACoe,MAAD,CAAd,CAAyB,IAApC,EAA4C,KAF9C,CAIAirB,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,OAA5B,CAAqC4G,KAArC,CAAf,CACA,MAAO,KAAP,CACD,C,gDAEWO,Q,CAAU,CACpBg6B,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,UAA5B,CAAwC,CACrDmH,QAAQ,CAAC1T,CAD4C,CAErD0T,QAAQ,CAACxT,CAF4C,CAGrDwT,QAAQ,CAAC9S,CAH4C,CAAxC,CAAf,CAKA,MAAO,KAAP,CACD,C,wDAEe0uC,Y,CAAc,CAC5B5B,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,cAA5B,CAA4C,CACzD+iC,YAAY,CAACtvC,CAD4C,CAEzDsvC,YAAY,CAACpvC,CAF4C,CAGzDovC,YAAY,CAAC1uC,CAH4C,CAA5C,CAAf,CAKA,MAAO,KAAP,CACD,C,+CAEY,CACX,KAAK6tC,gBAAL,GACA,MAAO,KAAP,CACD,C,4DAEiBc,Q,CAAU,CAC1B7B,eAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,oBAA5B,CAAkDgjC,QAAlD,CAAf,CACA,MAAO,KAAP,CACD,C,4BAGYpB,mFAAf,E;;AC/KA,GAAMjN,wBAAO,CAAG,GAAI73B,8BAAJ,GAA0B60B,IAA1B,CACd,oCADc,CAAhB,C,GAIMsR,gC,mGACJ,yBAAY3gC,KAAZ,CAAmB4gC,aAAnB,CAA6C,cAAXtqB,KAAW,2DAAJ,EAAI,iEAC3C,uIAEA,GAAIia,SAAQ,CAAGja,IAAI,CAACia,QAAL,EAAiB/1B,gCAAhC,CAEA,GAAI,CAAComC,aAAL,CAAoB,CAClBA,aAAa,CAAG,IAAhB,CACD,CAED,MAAK5gC,KAAL,CAAaA,KAAb,CAEA,MAAKiL,IAAL,CAAY,EAAZ,CACA,IAAK,GAAI5Y,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGuuC,aAApB,CAAmCvuC,CAAC,EAApC,CAAwC,CACtC,MAAK4Y,IAAL,CAAUvP,IAAV,CAAerJ,CAAf,EACD,CAED,MAAKwuC,OAAL,CAAe,CAAf,CAEA,GAAIhR,SAAQ,CAAG,CACb6Q,QAAQ,CAAE,CAAEh+B,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CADG,CAEbw8B,SAAS,CAAE,CAAEp+B,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAFE,CAGb+tB,OAAO,CAAE,CAAE3vB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE+tB,uBAApB,CAHI,CAAf,CAMA,MAAK0O,gBAAL,CAAwB,GAAIvmC,+BAAJ,EAAxB,CAEA,MAAKumC,gBAAL,CAAsB/E,YAAtB,CACE,UADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,MADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,YADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,OADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,SADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,YADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,aADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,aADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,cADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,oBADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,UADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,cADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,eADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,OADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,MADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAQA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,QADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAQA,MAAKgF,gBAAL,CAAsBC,OAAtB,CAAgC,IAAhC,CAEA,MAAKD,gBAAL,CAAsBE,YAAtB,CAAmC,CAAnC,CAAsCL,aAAtC,EAEA,MAAKM,gBAAL,CAAwB,GAAI1mC,+BAAJ,CAAyB,CAC/Cq1B,QAAQ,CAAEA,QADqC,CAE/CW,YAAY,CAAElE,yBAFiC,CAG/CmE,cAAc,CAAElE,2BAH+B,CAI/C4D,WAAW,CAAE,IAJkC,CAK/CI,QAAQ,CAAEA,QALqC,CAM/CH,UAAU,CAAE,KANmC,CAO/CC,SAAS,CAAE,KAPoC,CAAzB,CAAxB,CAUA;;;;;;UAQA,MAAK8Q,WAAL,CAAmB,GAAI7B,sBAAJ,CACjB,MAAK4B,gBADY,CAEjB,MAAKH,gBAFY,CAAnB,CAKA,MAAOH,aAAa,EAApB,CAAwB,CACtB,MAAKO,WAAL,CAAiBzQ,MAAjB,CAAwBkQ,aAAxB,EAAuChB,gBAAvC,GACD,CAED,MAAKlQ,IAAL,CAAY,GAAIl1B,uBAAJ,CAAiB,MAAKumC,gBAAtB,CAAwC,MAAKG,gBAA7C,CAAZ,CACA,MAAKxR,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,EACA,MAAKguB,IAAL,CAAU0R,aAAV,CAA0B,KAA1B,CACA,MAAKrQ,WAAL,CAAmB,KAAnB,CAEA,MAAK/wB,KAAL,CAAW5M,GAAX,CAAe,MAAKs8B,IAApB,EAhL2C,aAiL5C,C,2GAEwB,IAAXv+B,EAAW,MAAXA,CAAW,CAARE,CAAQ,MAARA,CAAQ,CAALU,CAAK,MAALA,CAAK,CACvB,KAAK29B,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuBvQ,CAAvB,CAA0BE,CAA1B,CAA6BU,CAA7B,EACA,KAAKg/B,WAAL,CAAmB,IAAnB,CACD,C,yCAES,CACR,KAAKrB,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,GACA,KAAK/xB,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACD,C,4CAEuB,IAAflsB,MAAe,OAAfA,KAAe,CAAR1D,IAAQ,OAARA,IAAQ,CACtB,KAAKohC,gBAAL,CAAsBrR,QAAtB,CAA+B6Q,QAA/B,CAAwCp8B,KAAxC,CAAgDd,KAAhD,CACA,KAAK09B,gBAAL,CAAsBrR,QAAtB,CAA+BiR,SAA/B,CAAyCx8B,KAAzC,CAAiD,EAAIxE,IAArD,CACA,KAAK4vB,IAAL,CAAUd,QAAV,CAAmBmC,WAAnB,CAAiC,IAAjC,CACD,C,yCAES,CACR,MAAO,MAAK9lB,IAAL,CAAU1Y,MAAV,CAAmB,CAA1B,CACD,C,iDAEa,CACZ,GAAI,KAAK0Y,IAAL,CAAU1Y,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,MAAO,MAAP,CACD,CAED,GAAIF,EAAC,CAAG,KAAK4Y,IAAL,CAAUnD,GAAV,EAAR,CAEA,MAAO,MAAKq5B,WAAL,CAAiBzQ,MAAjB,CAAwBr+B,CAAxB,CAA2B,IAA3B,CAAP,CACD,C,8CAEUqL,K,CAAO,CAChB,MAAO,MAAKyjC,WAAL,CAAiBE,MAAjB,CAAwB3jC,KAAxB,CAA+B,IAA/B,CAAP,CACD,C,oDAEa4jC,e,CAAiB,CAC7BA,eAAe,CAAG,GAAGtjC,MAAH,CAAUsjC,eAAV,CAAlB,CAEAA,eAAe,CAAC9lC,OAAhB,CAAwB,SAAUnJ,CAAV,CAAa,CACnC,KAAK8uC,WAAL,CAAiBzQ,MAAjB,CAAwBr+B,CAAxB,EAA2ButC,gBAA3B,GACD,CAFD,CAEG,IAFH,EAGA,KAAK30B,IAAL,CAAY,KAAKA,IAAL,CAAUjN,MAAV,CAAiBsjC,eAAjB,CAAZ,CACD,C,6BA7N2BlD,mB,EAgOfuC,4FAAf,E;;GCxOMY,0B,yBACJ,sBAAYC,aAAZ,CAA2B,CAAC,6DAC1B,KAAKA,aAAL,CAAqBA,aAArB,CACA,KAAK9jC,KAAL,CAAa,IAAb,CACA,KAAK6hC,OAAL,CAAe,IAAf,CACD,C,gGAEW,CACV,MAAO,CACL7hC,KAAK,CAAE,KAAKA,KADP,CAEL6hC,OAAO,CAAE,KAAKA,OAFT,CAAP,CAID,C,0CAEQ7hC,K,CAAO,CACd,KAAKA,KAAL,CAAaA,KAAb,CACA,MAAO,KAAP,CACD,C,8CAEU6hC,O,CAAS,CAClB,KAAKA,OAAL,CAAeA,OAAf,CACA,MAAO,KAAP,CACD,C,8CAEU3P,O,CAAS,CAClB,KAAK4R,aAAL,CAAmBxH,UAAnB,CAA8B,KAAKt8B,KAAnC,CAA0CkyB,OAA1C,EACA,MAAO,KAAP,CACD,C,gDAEWp2B,Q,CAAU,CACpB,KAAKgoC,aAAL,CAAmBt8B,WAAnB,CAA+B,KAAKxH,KAApC,CAA2ClE,QAA3C,EACA,MAAO,KAAP,CACD,C,2CAE+B,IAAvBjH,OAAuB,2DAAd,CAAc,IAAXsN,MAAW,2DAAH,CAAG,CAC9B,KAAK2hC,aAAL,CAAmBzD,QAAnB,CAA4B,KAAKrgC,KAAjC,CAAwC,CAAEvM,CAAC,CAAEoB,MAAL,CAAalB,CAAC,CAAEwO,KAAhB,CAAuB9N,CAAC,CAAE8N,KAA1B,CAAxC,EACA,MAAO,KAAP,CACD,C,gDAEW8yB,Q,CAAU,CACpB,GAAMlB,WAAU,CAAG,GAAIj3B,2BAAJ,EAAnB,CACAi3B,UAAU,CAACC,kBAAX,CACE,GAAIl3B,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EAA2BoC,SAA3B,EADF,CAEE,GAAI+D,aAAJ,CAAWgyB,QAAX,EAAqB/1B,SAArB,EAFF,EAKA,KAAK4kC,aAAL,CAAmBC,aAAnB,CAAiC,KAAK/jC,KAAtC,CAA6C+zB,UAA7C,EACA,MAAO,KAAP,CACD,C,mDAEc,CACb,KAAK+P,aAAL,CAAmBnB,UAAnB,CAA8B,KAAK3iC,KAAnC,CAA0C,CAAC,CAA3C,EACA,MAAO,KAAP,CACD,C,qDAEe,CACd,KAAK8jC,aAAL,CAAmBnB,UAAnB,CAA8B,KAAK3iC,KAAnC,CAA0C,CAA1C,EACA,MAAO,KAAP,CACD,C,uDAEgB,CACf,KAAK8jC,aAAL,CAAmBnB,UAAnB,CAA8B,KAAK3iC,KAAnC,CAA0C,CAA1C,EACA,MAAO,KAAP,CACD,C,uDAEgB,CACf,KAAK8jC,aAAL,CAAmBnB,UAAnB,CAA8B,KAAK3iC,KAAnC,CAA0C,CAA1C,EACA,MAAO,KAAP,CACD,C,qDAEe,CACd,KAAK8jC,aAAL,CAAmBnB,UAAnB,CAA8B,KAAK3iC,KAAnC,CAA0C,CAA1C,EACA,MAAO,KAAP,CACD,C,0CAEQiyB,K,CAAO,CACd,KAAK6R,aAAL,CAAmB3B,QAAnB,CAA4B,KAAKniC,KAAjC,CAAwCiyB,KAAxC,EACA,MAAO,KAAP,CACD,C,gDAEW9qB,Q,CAAU,CACpB,KAAK28B,aAAL,CAAmBr8B,WAAnB,CAA+B,KAAKzH,KAApC,CAA2CmH,QAA3C,EACA,MAAO,KAAP,CACD,C,4DAEiBirB,I,CAAM,CACtB,KAAK0R,aAAL,CAAmBrB,iBAAnB,CAAqC,KAAKziC,KAA1C,CAAiDoyB,IAAjD,EACA,MAAO,KAAP,CACD,C,gEAEmBA,I,CAAM4R,I,CAAM,CAC9B,KAAKF,aAAL,CAAmBG,mBAAnB,CAAuC,KAAKjkC,KAA5C,CAAmDoyB,IAAnD,CAAyD4R,IAAzD,EACA,MAAO,KAAP,CACD,C,4CAESlK,M,CAAQ,CAChB,KAAKgK,aAAL,CAAmBlB,SAAnB,CAA6B,KAAK5iC,KAAlC,CAAyC85B,MAAzC,EACA,MAAO,KAAP,CACD,C,4BAGY+J,8FAAf,E;;GCvGMK,4B,yBACJ,uBACEC,eADF,CAEErF,gBAFF,CAGEsF,sBAHF,CAIEC,cAJF,CAKEC,mBALF,CAME1F,cANF,CAOE2F,iBAPF,CAQEC,2BARF,CASEC,6BATF,CAUEC,yBAVF,CAWEC,eAXF,CAYEjjC,MAZF,CAaEswB,IAbF,CAcE1vB,KAdF,CAeEsiC,aAfF,CAgBE,CAAC,8DACD,KAAKljC,MAAL,CAAcA,MAAd,CACA,KAAKyiC,eAAL,CAAuBA,eAAvB,CACA,KAAKrF,gBAAL,CAAwBA,gBAAxB,CACA,KAAKsF,sBAAL,CAA8BA,sBAA9B,CACA,KAAKC,cAAL,CAAsBA,cAAtB,CACA,KAAKC,mBAAL,CAA2BA,mBAA3B,CACA,KAAK1F,cAAL,CAAsBA,cAAtB,CACA,KAAK2F,iBAAL,CAAyBA,iBAAzB,CACA,KAAKC,2BAAL,CAAmCA,2BAAnC,CACA,KAAKC,6BAAL,CAAqCA,6BAArC,CACA,KAAKC,yBAAL,CAAiCA,yBAAjC,CACA,KAAKC,eAAL,CAAuBA,eAAvB,CACA,KAAK3S,IAAL,CAAYA,IAAZ,CACA,KAAK1vB,KAAL,CAAaA,KAAb,CACA,KAAKsiC,aAAL,CAAqBA,aAArB,CAEA,KAAKr3B,IAAL,CAAY,EAAZ,CACA,IAAK,GAAI5Y,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAK+M,MAAzB,CAAiC/M,CAAC,EAAlC,CAAsC,CACpC,KAAK4Y,IAAL,CAAUvP,IAAV,CAAerJ,CAAf,EACD,CAED,KAAKkwC,OAAL,CAAe,GAAIhB,iCAAJ,CAAiB,IAAjB,CAAf,CACD,C,0GAEczV,K,CAAO,CACpB;AACA;AACA;AACD,C,yCAES,CACR,MAAO,MAAK7gB,IAAL,CAAU1Y,MAAV,CAAmB,CAA1B,CACD,C,yCAES,CACR,KAAKyN,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACD,C,+CAEY,CACX,KAAK8S,IAAL,CAAY,CAAZ,CACD,C,+DAEoB,CACnB,GAAM/F,SAAQ,CAAG,EAAjB,CAEA,IAAK,GAAIpqC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAK+M,MAAzB,CAAiC/M,CAAC,EAAlC,CAAsC,CACpCoqC,QAAQ,CAAC/gC,IAAT,CAAc,CAAd,EACD,CAED,KAAK8gC,gBAAL,CAAsBiG,QAAtB,CAA+BhG,QAA/B,EACA,KAAKD,gBAAL,CAAsBzL,WAAtB,CAAoC,IAApC,CAEA,KAAKyR,IAAL,CAAY,CAAZ,CACD,C,oDAEalB,e,CAAiB,gBAC7BA,eAAe,CAAG,GAAGtjC,MAAH,CAAUsjC,eAAV,CAAlB,CAEAA,eAAe,CAAGA,eAAe,CAACp9B,MAAhB,CAChB,SAACxG,KAAD,QAAW,CAAC,KAAI,CAACuN,IAAL,CAAU1J,QAAV,CAAmB7D,KAAnB,CAAZ,EADgB,CAAlB,CAIA4jC,eAAe,CAAC9lC,OAAhB,CAAwB,SAAUnJ,CAAV,CAAa,CACnC,KAAKmqC,gBAAL,CAAsB7K,IAAtB,CAA2Bt/B,CAA3B,CAA8B,CAA9B,EACD,CAFD,CAEG,IAFH,EAIA,KAAKmqC,gBAAL,CAAsBzL,WAAtB,CAAoC,IAApC,CAEA,KAAK9lB,IAAL,CAAY,KAAKA,IAAL,CAAUjN,MAAV,CAAiBsjC,eAAjB,CAAZ,CACD,C,iDAEa,CACZ,GAAI,KAAKr2B,IAAL,CAAU1Y,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,KAAM,IAAIiL,MAAJ,CAAU,mBAAV,CAAN,CACD,CAED,MAAO,MAAK+kC,OAAL,CAAaG,QAAb,CAAsB,KAAKz3B,IAAL,CAAUnD,GAAV,EAAtB,EAAuC66B,UAAvC,CAAkD,IAAlD,CAAP,CACD,C,8CAEUjlC,K,CAAOkyB,O,CAAS,CACzB,KAAK4M,gBAAL,CAAsB7K,IAAtB,CAA2Bj0B,KAA3B,CAAkCkyB,OAAlC,EACA,KAAK4M,gBAAL,CAAsBzL,WAAtB,CAAoC,IAApC,CACD,C,gDAEWrzB,K,CAAOlE,Q,CAAU,CAC3B,KAAKqoC,eAAL,CAAqBtF,MAArB,CAA4B7+B,KAA5B,CAAmClE,QAAQ,CAACrI,CAA5C,CAA+CqI,QAAQ,CAACnI,CAAxD,CAA2DmI,QAAQ,CAACzH,CAApE,EACA,KAAK8vC,eAAL,CAAqB9Q,WAArB,CAAmC,IAAnC,CACD,C,iEAE8B,IAAX5/B,EAAW,MAAXA,CAAW,CAARE,CAAQ,MAARA,CAAQ,CAALU,CAAK,MAALA,CAAK,CAC7B,KAAK29B,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuBvQ,CAAvB,CAA0BE,CAA1B,CAA6BU,CAA7B,EACD,C,0CAEQ2L,K,CAAO5B,K,CAAO,CACrB,KAAKimC,cAAL,CAAoBxF,MAApB,CAA2B7+B,KAA3B,CAAkC5B,KAAK,CAAC3K,CAAxC,CAA2C2K,KAAK,CAACzK,CAAjD,CAAoDyK,KAAK,CAAC/J,CAA1D,EACA,KAAKgwC,cAAL,CAAoBhR,WAApB,CAAkC,IAAlC,CACD,C,oDAEarzB,K,CAAO+zB,U,CAAY,CAC/B,KAAKuQ,mBAAL,CAAyBY,OAAzB,CACEllC,KADF,CAEE+zB,UAAU,CAACtgC,CAFb,CAGEsgC,UAAU,CAACpgC,CAHb,CAIEogC,UAAU,CAAC1/B,CAJb,CAKE0/B,UAAU,CAACkC,CALb,EAQA,KAAKqO,mBAAL,CAAyBjR,WAAzB,CAAuC,IAAvC,CACD,C,8CAEUrzB,K,CAAO20B,O,CAAS,CACzB,KAAKyP,sBAAL,CAA4BnQ,IAA5B,CAAiCj0B,KAAjC,CAAwC20B,OAAxC,EACA,KAAKyP,sBAAL,CAA4B/Q,WAA5B,CAA0C,IAA1C,CACD,C,0CAEQrzB,K,CAAOiyB,K,CAAO,CACrB,KAAK2M,cAAL,CAAoBC,MAApB,CAA2B7+B,KAA3B,CAAkCiyB,KAAK,CAAC18B,CAAxC,CAA2C08B,KAAK,CAAC+C,CAAjD,CAAoD/C,KAAK,CAAC98B,CAA1D,EACA,KAAKypC,cAAL,CAAoBvL,WAApB,CAAkC,IAAlC,CACD,C,gDAEWrzB,K,CAAOmH,Q,CAAU,CAC3B,KAAKo9B,iBAAL,CAAuB1F,MAAvB,CAA8B7+B,KAA9B,CAAqCmH,QAAQ,CAAC1T,CAA9C,CAAiD0T,QAAQ,CAACxT,CAA1D,CAA6DwT,QAAQ,CAAC9S,CAAtE,EACA,KAAKkwC,iBAAL,CAAuBlR,WAAvB,CAAqC,IAArC,CACD,C,4DAEiBrzB,K,CAAOoyB,I,CAAM,CAC7B,KAAKoS,2BAAL,CAAiCvQ,IAAjC,CAAsCj0B,KAAtC,CAA6CoyB,IAA7C,EACA,KAAKoS,2BAAL,CAAiCnR,WAAjC,CAA+C,IAA/C,CACD,C,gEAEmBrzB,K,CAAOoyB,I,CAAgB,IAAV4R,KAAU,2DAAH,CAAG,CACzC,KAAKS,6BAAL,CAAmCxQ,IAAnC,CAAwCj0B,KAAxC,CAA+CoyB,IAA/C,EACA,KAAKsS,yBAAL,CAA+BzQ,IAA/B,CAAoCj0B,KAApC,CAA2CgkC,IAA3C,EACA,KAAKS,6BAAL,CAAmCpR,WAAnC,CAAiD,IAAjD,CACA,KAAKqR,yBAAL,CAA+BrR,WAA/B,CAA6C,IAA7C,CACD,C,4CAESrzB,K,CAAO85B,M,CAAQ,CACvB,KAAK6K,eAAL,CAAqB1Q,IAArB,CAA0Bj0B,KAA1B,CAAiC85B,MAAjC,EACA,KAAK6K,eAAL,CAAqBtR,WAArB,CAAmC,IAAnC,CACD,C,6BAGY6Q,iGAAf,E;;AC7JA,GAAIiB,WAAU,CAAG,IAAjB,CACA,GAAIP,kCAAa,CAAG,CAApB,C,GAEMQ,wC,yBACJ,6BAAY9iC,KAAZ,CAAmB,oFACjB,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKs7B,KAAL,CAAa,GAAIpM,QAAJ,sHAAY,iBAAOC,OAAP,uHAClB0T,UADkB,+CAEF,MAAI,CAACE,QAAL,EAFE,QAErBF,UAFqB,sBAKvB1T,OAAO,CAAC,IAAD,CAAP,CALuB,sDAAZ,+DAAb,CAQA,GAAMkD,QAAO,CAAG,GAAI73B,8BAAJ,GAA0B60B,IAA1B,CACd;AACA,oCAFc,CAAhB,CAKA;AAEA;;;;;;;EASA,KAAKT,QAAL,CAAgB,GAAIp0B,kCAAJ,CAA4B,CAC1Cq1B,QAAQ,CAAE,CACRzzB,GAAG,CAAE,CAAEkI,KAAK,CAAE+tB,OAAT,CADG,CAERqO,QAAQ,CAAE,CAAEh+B,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAFF,CAGRw8B,SAAS,CAAE,CAAEp+B,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CAHH,CADgC,CAM1C6rB,WAAW,CAAE,IAN6B,CAO1CC,UAAU,CAAE,KAP8B,CAQ1CC,SAAS,CAAE,KAR+B,CAS1CC,IAAI,CAAE91B,0BAToC,CAU1C+1B,QAAQ,CAAE/1B,gCAVgC,CAW1Cg2B,YAAY,CAAE5D,uBAX4B,CAY1C6D,cAAc,CAAE5D,yBAChB;AAb0C,CAA5B,CAAhB,CAgBA,KAAKt5B,KAAL,CAAau9B,IAAI,CAACD,GAAL,GAAa,IAA1B,CACD,C,sGAEuB,IAAfrtB,MAAe,OAAfA,KAAe,CAAR1D,IAAQ,OAARA,IAAQ,CACtB,KAAK8uB,QAAL,CAAciB,QAAd,CAAuB6Q,QAAvB,CAAgCp8B,KAAhC,CAAwCd,KAAxC,CACA,KAAKorB,QAAL,CAAciB,QAAd,CAAuBiR,SAAvB,CAAiCx8B,KAAjC,CAAyC,EAAIxE,IAA7C,CACA,KAAK8uB,QAAL,CAAcmC,WAAd,CAA4B,IAA5B,CACD,C,uCAEmB,IAAbK,KAAa,2DAAN,IAAM,CAClB,MAAO,MAAK4R,aAAL,CAAmBH,UAAnB,CAA+BzR,IAA/B,CAAP,CACD,C,ySAGKyR,U,2DACKA,U,gCAGU/T,WAAU,CAAC,gCAAD,C,QAAvBzyB,I,gBACA4mC,Y,CAAe5mC,IAAI,CAAC2D,KAAL,CAAWiB,QAAX,CAAoB,CAApB,EAAuBkwB,Q,CAC5C;AACA;AAEA0R,UAAU,CAAGI,YAAb,C,iCACOJ,U,gMAGKK,Q,CAAU9jC,M,CAAQ,CAC9B8jC,QAAQ,CAAGA,QAAQ,CAACtoC,KAAT,EAAX,CAEA,GAAIinC,gBAAJ,CACErF,gBADF,CAEEsF,sBAFF,CAGEC,cAHF,CAIEC,mBAJF,CAKE1F,cALF,CAME2F,iBANF,CAOEC,2BAPF,CAQEC,6BARF,CASEC,yBATF,CAUEC,eAVF,CAYA,GAAMlR,SAAQ,CAAG,GAAI32B,wCAAJ,EAAjB,CACA22B,QAAQ,CAACzzB,KAAT,CAAiBwlC,QAAQ,CAACxlC,KAA1B,CACAyzB,QAAQ,CAAC4N,UAAT,CAAoBvlC,QAApB,CAA+B0pC,QAAQ,CAACnE,UAAT,CAAoBvlC,QAAnD,CACA23B,QAAQ,CAAC4N,UAAT,CAAoBoE,EAApB,CAAyBD,QAAQ,CAACnE,UAAT,CAAoBoE,EAA7C,CAEA,GAAMC,QAAO,CAAG,EAAhB,CACA,GAAM3G,SAAQ,CAAG,EAAjB,CACA,GAAM4G,eAAc,CAAG,EAAvB,CACA,GAAMC,OAAM,CAAG,EAAf,CACA,GAAMC,YAAW,CAAG,EAApB,CACA,GAAMlH,OAAM,CAAG,EAAf,CACA,GAAMmH,UAAS,CAAG,EAAlB,CACA,GAAMC,YAAW,CAAG,EAApB,CACA,GAAMC,cAAa,CAAG,EAAtB,CACA,GAAMC,MAAK,CAAG,EAAd,CACA,GAAMC,QAAO,CAAG,EAAhB,CAEA,IAAK,GAAIvxC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG+M,MAApB,CAA4B/M,CAAC,EAA7B,CAAiC,CAC/B+wC,OAAO,CAAC1nC,IAAR,CAAa,CAAb,CAAgB,CAAhB,CAAmB,GAAnB,EACA+gC,QAAQ,CAAC/gC,IAAT,CAAc,CAAd,EACA2nC,cAAc,CAAC3nC,IAAf,CAAoB,CAAC,CAArB,EACA4nC,MAAM,CAAC5nC,IAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EACA6nC,WAAW,CAAC7nC,IAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,EACA2gC,MAAM,CAAC3gC,IAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EACA8nC,SAAS,CAAC9nC,IAAV,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACA+nC,WAAW,CAAC/nC,IAAZ,CAAiB,CAAjB,EACAgoC,aAAa,CAAChoC,IAAd,CAAmB,CAAnB,EACAioC,KAAK,CAACjoC,IAAN,CAAW,CAAX,EACAkoC,OAAO,CAACloC,IAAR,CAAa,CAAb,EACD,CAEDmmC,eAAe,CAAG,GAAIrnC,yCAAJ,CAChB,GAAIshC,aAAJ,CAAiBsH,OAAjB,CADgB,CAEhB,CAFgB,EAGhBrH,UAHgB,CAGL,IAHK,CAAlB,CAKAS,gBAAgB,CAAG,GAAIhiC,yCAAJ,CACjB,GAAIshC,aAAJ,CAAiBW,QAAjB,CADiB,CAEjB,CAFiB,EAGjBV,UAHiB,CAGN,IAHM,CAAnB,CAKA+F,sBAAsB,CAAG,GAAItnC,yCAAJ,CACvB,GAAIshC,aAAJ,CAAiBuH,cAAjB,CADuB,CAEvB,CAFuB,EAGvBtH,UAHuB,CAGZ,IAHY,CAAzB,CAKAgG,cAAc,CAAG,GAAIvnC,yCAAJ,CACf,GAAIshC,aAAJ,CAAiBwH,MAAjB,CADe,CAEf,CAFe,EAGfvH,UAHe,CAGJ,IAHI,CAAjB,CAKAiG,mBAAmB,CAAG,GAAIxnC,yCAAJ,CACpB,GAAIshC,aAAJ,CAAiByH,WAAjB,CADoB,CAEpB,CAFoB,EAGpBxH,UAHoB,CAGT,IAHS,CAAtB,CAKAO,cAAc,CAAG,GAAI9hC,yCAAJ,CACf,GAAIshC,aAAJ,CAAiBO,MAAjB,CADe,CAEf,CAFe,EAGfN,UAHe,CAGJ,IAHI,CAAjB,CAKAkG,iBAAiB,CAAG,GAAIznC,yCAAJ,CAClB,GAAIshC,aAAJ,CAAiB0H,SAAjB,CADkB,CAElB,CAFkB,EAGlBzH,UAHkB,CAGP,IAHO,CAApB,CAKAmG,2BAA2B,CAAG,GAAI1nC,yCAAJ,CAC5B,GAAIshC,aAAJ,CAAiB2H,WAAjB,CAD4B,CAE5B,CAF4B,EAG5B1H,UAH4B,CAGjB,IAHiB,CAA9B,CAKAoG,6BAA6B,CAAG,GAAI3nC,yCAAJ,CAC9B,GAAIshC,aAAJ,CAAiB4H,aAAjB,CAD8B,CAE9B,CAF8B,EAG9B3H,UAH8B,CAGnB,IAHmB,CAAhC,CAKAqG,yBAAyB,CAAG,GAAI5nC,yCAAJ,CAC1B,GAAIshC,aAAJ,CAAiB6H,KAAjB,CAD0B,CAE1B,CAF0B,EAG1B5H,UAH0B,CAGf,IAHe,CAA5B,CAKAsG,eAAe,CAAG,GAAI7nC,yCAAJ,CAChB,GAAIshC,aAAJ,CAAiB8H,OAAjB,CADgB,CAEhB,CAFgB,EAGhB7H,UAHgB,CAGL,IAHK,CAAlB,CAKA5K,QAAQ,CAAC6K,YAAT,CAAsB,QAAtB,CAAgC6F,eAAhC,EACA1Q,QAAQ,CAAC6K,YAAT,CAAsB,SAAtB,CAAiCQ,gBAAjC,EACArL,QAAQ,CAAC6K,YAAT,CAAsB,eAAtB,CAAuC8F,sBAAvC,EACA3Q,QAAQ,CAAC6K,YAAT,CAAsB,OAAtB,CAA+B+F,cAA/B,EACA5Q,QAAQ,CAAC6K,YAAT,CAAsB,YAAtB,CAAoCgG,mBAApC,EACA7Q,QAAQ,CAAC6K,YAAT,CAAsB,OAAtB,CAA+BM,cAA/B,EACAnL,QAAQ,CAAC6K,YAAT,CAAsB,UAAtB,CAAkCiG,iBAAlC,EACA9Q,QAAQ,CAAC6K,YAAT,CAAsB,oBAAtB,CAA4CkG,2BAA5C,EACA/Q,QAAQ,CAAC6K,YAAT,CACE,sBADF,CAEEmG,6BAFF,EAIAhR,QAAQ,CAAC6K,YAAT,CAAsB,kBAAtB,CAA0CoG,yBAA1C,EACAjR,QAAQ,CAAC6K,YAAT,CAAsB,QAAtB,CAAgCqG,eAAhC,EAEA,GAAM3S,KAAI,CAAG,GAAIl1B,qBAAJ,CAAe22B,QAAf,CAAyB,KAAKvC,QAA9B,CAAb,CACAc,IAAI,CAAC0R,aAAL,CAAqB,KAArB,CAEA,KAAKphC,KAAL,CAAW5M,GAAX,CAAes8B,IAAf,EAEA4S,iCAAa,GAEb,MAAO,IAAIV,kCAAJ,CACLC,eADK,CAELrF,gBAFK,CAGLsF,sBAHK,CAILC,cAJK,CAKLC,mBALK,CAML1F,cANK,CAOL2F,iBAPK,CAQLC,2BARK,CASLC,6BATK,CAULC,yBAVK,CAWLC,eAXK,CAYLjjC,MAZK,CAaLswB,IAbK,CAcL,KAAK1vB,KAdA,CAeLsiC,iCAfK,CAAP,CAiBD,C,mCAGYQ,mHAAf,E;;GCxNMe,kD,yBACJ,kCAAY7jC,KAAZ,CAAmB8jC,qBAAnB,CAA0C,yFACxC,KAAK9jC,KAAL,CAAaA,KAAb,CACA,KAAK8jC,qBAAL,CAA6BA,qBAA7B,CAEA,KAAKC,mBAAL,CAA2B,GAAIjB,wCAAJ,CAAwB,KAAK9iC,KAA7B,CAA3B,CAEA,KAAKgkC,YAAL,CAAoB,EAApB,CAEA,KAAKC,QAAL,CAAgB,CACdC,IAAI,CAAE,EADQ,CAEdzE,IAAI,CAAE,EAFQ,CAGd0E,MAAM,CAAE,EAHM,CAIdC,MAAM,CAAE,EAJM,CAAhB,CAOA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAKC,YAAL,CAAoB,GAAIpV,QAAJ,sHAAY,iBAAOC,OAAP,0IACxB,MAAI,CAAC4U,mBAAL,CAAyBzI,KADD,QAE9B,KAAI,CAAC+I,QAAL,CAAgB,IAAhB,CACAlV,OAAO,CAAC,IAAD,CAAP,CAH8B,sDAAZ,+DAApB,CAMA,KAAK31B,QAAL,CAAgB,GAAImH,aAAJ,EAAhB,CACD,C,oGAEO,CACN,MAAO,MAAK2jC,YAAZ,CACD,C,yCAES,CACR,MAAO,MAAKD,QAAZ,CACD,C,oEAEqB3hC,I,CAAM,CAC1B,OAAQA,IAAR,EACE,IAAK,MAAL,CACE,MAAO,MAAK6hC,yBAAL,EAAP,CACF,IAAK,MAAL,CACE,MAAO,MAAKC,yBAAL,EAAP,CACF,IAAK,QAAL,CACE,MAAO,MAAKC,2BAAL,EAAP,CACF,IAAK,QAAL,CACA,QACE,MAAO,MAAKC,2BAAL,EAAP,CATJ,CAWD,C,6EAE2B,CAC1B,GAAMnF,QAAO,CAAG,GAAIoF,6BAAJ,CACd,KAAK3kC,KADS,CAEd,KAAK8jC,qBAFS,CAAhB,CAIAvE,OAAO,CAACr6B,WAAR,CAAoB,KAAK1L,QAAzB,EACA,MAAO+lC,QAAP,CACD,C,iFAE6B,CAC5B,GAAMA,QAAO,CAAG,GAAIoB,yBAAJ,CAAoB,KAAK3gC,KAAzB,CAAgC,KAAK8jC,qBAArC,CAAhB,CACAvE,OAAO,CAACr6B,WAAR,CAAoB,KAAK1L,QAAzB,EACA,MAAO+lC,QAAP,CACD,C,iFAE6B,CAC5B,GAAMA,QAAO,CAAG,GAAIoB,yBAAJ,CACd,KAAK3gC,KADS,CAEd,KAAK8jC,qBAFS,CAGd,CAAEvT,QAAQ,CAAE/1B,8BAAZ,CAHc,CAAhB,CAKA+kC,OAAO,CAACr6B,WAAR,CAAoB,KAAK1L,QAAzB,EACA,MAAO+lC,QAAP,CACD,C,6EAE2B,CAC1B,GAAMA,QAAO,CAAG,KAAKwE,mBAAL,CAAyBrT,MAAzB,CAAgC,KAAKoT,qBAArC,CAAhB,CACAvE,OAAO,CAACqF,iBAAR,CAA0B,KAAKprC,QAA/B,EACA,MAAO+lC,QAAP,CACD,C,gDAEWsF,Q,CAA2B,IAAjBniC,KAAiB,2DAAV,QAAU,CACrC,GAAI68B,QAAO,CAAG,KAAK0E,QAAL,CAAcvhC,IAAd,EAAoBkO,IAApB,CAAyB,SAAC2uB,OAAD,QAAaA,QAAO,CAACuF,OAAR,EAAb,EAAzB,CAAd,CAEA,GAAI,CAACvF,OAAL,CAAc,CACZA,OAAO,CAAG,KAAKwF,qBAAL,CAA2BriC,IAA3B,CAAV,CACA,KAAKuhC,QAAL,CAAcvhC,IAAd,EAAoBhH,IAApB,CAAyB6jC,OAAzB,EACD,CAED,GAAMyF,SAAQ,CAAGzF,OAAO,CAAC0F,WAAR,EAAjB,CAEA,KAAKjB,YAAL,CAAkBtoC,IAAlB,CAAuB,CAAEmpC,QAAQ,CAARA,QAAF,CAAYtF,OAAO,CAAPA,OAAZ,CAAqB7hC,KAAK,CAAEsnC,QAAQ,CAACtnC,KAArC,CAAvB,EAEA,MAAOsnC,SAAP,CACD,C,wDAEeH,Q,CAAU,CACxB,MAAO,MAAKI,WAAL,CAAiBJ,QAAjB,CAA2B,MAA3B,CAAP,CACD,C,wDAEeA,Q,CAAU,CACxB,MAAO,MAAKI,WAAL,CAAiBJ,QAAjB,CAA2B,MAA3B,CAAP,CACD,C,4DAEiBA,Q,CAAU,CAC1B,MAAO,MAAKI,WAAL,CAAiBJ,QAAjB,CAA2B,QAA3B,CAAP,CACD,C,4DAEiBA,Q,CAAU,CAC1B,MAAO,MAAKI,WAAL,CAAiBJ,QAAjB,CAA2B,QAA3B,CAAP,CACD,C,gDAEWrrC,Q,CAAU,CACpB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKyqC,QAAL,CAAcxE,IAAd,CAAmBjkC,OAAnB,CAA2B,SAAC+jC,OAAD,QACzBA,QAAO,CAACqF,iBAAR,CAA0BprC,QAA1B,CADyB,EAA3B,EAGA,KAAKyqC,QAAL,CAAcC,IAAd,CAAmB1oC,OAAnB,CAA2B,SAAC+jC,OAAD,QAAaA,QAAO,CAACr6B,WAAR,CAAoB1L,QAApB,CAAb,EAA3B,EACA,KAAKyqC,QAAL,CAAcE,MAAd,CAAqB3oC,OAArB,CAA6B,SAAC+jC,OAAD,QAAaA,QAAO,CAACr6B,WAAR,CAAoB1L,QAApB,CAAb,EAA7B,EACA,KAAKyqC,QAAL,CAAcG,MAAd,CAAqB5oC,OAArB,CAA6B,SAAC+jC,OAAD,QAAaA,QAAO,CAACr6B,WAAR,CAAoB1L,QAApB,CAAb,EAA7B,EACD,C,yCAES,CACR,KAAKyqC,QAAL,CAAcC,IAAd,CAAmB1oC,OAAnB,CAA2B,SAAC+jC,OAAD,CAAa,CACtCA,OAAO,CAAC2F,OAAR,GACD,CAFD,EAIA,KAAKjB,QAAL,CAAcxE,IAAd,CAAmBjkC,OAAnB,CAA2B,SAAC+jC,OAAD,CAAa,CACtCA,OAAO,CAAC2F,OAAR,GACD,CAFD,EAIA,KAAKjB,QAAL,CAAcE,MAAd,CAAqB3oC,OAArB,CAA6B,SAAC+jC,OAAD,CAAa,CACxCA,OAAO,CAAC2F,OAAR,GACD,CAFD,EAIA,KAAKjB,QAAL,CAAcG,MAAd,CAAqB5oC,OAArB,CAA6B,SAAC+jC,OAAD,CAAa,CACxCA,OAAO,CAAC2F,OAAR,GACD,CAFD,EAIA,KAAKjB,QAAL,CAAgB,CACdC,IAAI,CAAE,EADQ,CAEdzE,IAAI,CAAE,EAFQ,CAGd0E,MAAM,CAAE,EAHM,CAIdC,MAAM,CAAE,EAJM,CAAhB,CAMD,C,wCAEOS,Q,CAAU,CAChB,KAAKb,YAAL,CAAkBxoC,OAAlB,CAA0B,SAAC2pC,WAAD,CAAiB,CACzC,GAAIA,WAAW,CAACN,QAAZ,GAAyBA,QAA7B,CAAuC,CACrCM,WAAW,CAAC5F,OAAZ,CAAoB6F,aAApB,CAAkCD,WAAW,CAACznC,KAA9C,EACD,CACF,CAJD,EAKD,C,sCAEM6N,O,CAAS,CACd,KAAK04B,QAAL,CAAcC,IAAd,CAAmB1oC,OAAnB,CAA2B,SAAC+jC,OAAD,CAAa,CACtCA,OAAO,CAAC8F,MAAR,CAAe95B,OAAf,EACD,CAFD,EAIA,KAAK04B,QAAL,CAAcE,MAAd,CAAqB3oC,OAArB,CAA6B,SAAC+jC,OAAD,CAAa,CACxCA,OAAO,CAAC8F,MAAR,CAAe95B,OAAf,EACD,CAFD,EAIA,KAAK04B,QAAL,CAAcG,MAAd,CAAqB5oC,OAArB,CAA6B,SAAC+jC,OAAD,CAAa,CACxCA,OAAO,CAAC8F,MAAR,CAAe95B,OAAf,EACD,CAFD,EAIA,KAAKw4B,mBAAL,CAAyBsB,MAAzB,CAAgC95B,OAAhC,EACD,C,wCAGYs4B,uHAAf,E;;AC7KA,GAAMhF,6BAAe,CAAG,QAAlBA,gBAAkB,CAAC1N,QAAD,CAAWzzB,KAAX,CAAkBuG,GAAlB,CAAuB66B,MAAvB,CAAkC,CACxDA,MAAM,CAAG,GAAG9gC,MAAH,CAAU8gC,MAAV,CAAT,CAEA,GAAInpC,OAAM,CAAGw7B,QAAQ,CAAC4N,UAAT,CAAoB96B,GAApB,EAAyB+6B,KAAtC,CAEAF,MAAM,CAACtjC,OAAP,CAAe,SAAU8I,KAAV,CAAiBjS,CAAjB,CAAoB,CACjCsD,MAAM,CAAC+H,KAAK,CAAGohC,MAAM,CAACvsC,MAAf,CAAwBF,CAAzB,CAAN,CAAoCiS,KAApC,CACD,CAFD,EAIA6sB,QAAQ,CAAC4N,UAAT,CAAoB96B,GAApB,EAAyB8sB,WAAzB,CAAuC,IAAvC,CACD,CAVD,C,GAYMuU,0B,yBACJ,sBAAY1W,QAAZ,CAAsBuC,QAAtB,CAAgC,CAAC,6DAC/B,KAAKvC,QAAL,CAAgBA,QAAhB,CACA,KAAKuC,QAAL,CAAgBA,QAAhB,CACA,KAAKzzB,KAAL,CAAa,CAAb,CACA,KAAK6hC,OAAL,CAAe,IAAf,CAEA,KAAKlN,OAAL,CAAe,CACbmN,GAAG,CAAE,CADQ,CAEbC,IAAI,CAAE,CAFO,CAGbC,IAAI,CAAE,CAHO,CAIbvjC,IAAI,CAAE,CAJO,CAKbwjC,QAAQ,CAAE,CALG,CAAf,CAOD,C,yFAEMjiC,K,CAAO6hC,O,CAAS,CACrB,KAAK7hC,KAAL,CAAaA,KAAb,CACA,KAAK6hC,OAAL,CAAeA,OAAf,CACA,MAAO,KAAP,CACD,C,2DAEkB,CACjB,KAAKr6B,WAAL,CAAiB,CAAE/T,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAjB,EACA,KAAKwuC,QAAL,CAAc,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAd,EACA,KAAKw/B,UAAL,CAAgB,GAAhB,EACA,KAAKgG,OAAL,CAAa,GAAb,EACA,KAAKC,aAAL,CAAmB,GAAnB,EACA,KAAKC,QAAL,CAAc,GAAd,EACA,KAAKqF,cAAL,CAAoB,GAApB,EACA,KAAKpF,iBAAL,CAAuB,GAAvB,EACA,KAAKE,UAAL,CAAgB,KAAKhO,OAAL,CAAaqN,IAA7B,EACA,KAAK8F,iBAAL,CAAuB,GAAvB,EACA,KAAKC,gBAAL,CAAsB,GAAtB,EACA,KAAKC,gBAAL,CAAsB,CAAtB,EAEA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACLhoC,KAAK,CAAE,KAAKA,KADP,CAEL6hC,OAAO,CAAE,KAAKA,OAFT,CAAP,CAID,C,8CAEU1G,G,CAAK,CACdgG,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,eAA5B,CAA6Cm7B,GAA7C,CAAf,CAEA,MAAO,KAAP,CACD,C,4DAEiB8M,c,CAAgB,CAChC9G,4BAAe,CACb,KAAK1N,QADQ,CAEb,KAAKzzB,KAFQ,CAGb,gBAHa,CAIb,CAAC,GAAD,CAAOioC,cAJM,CAAf,CAMA,MAAO,KAAP,CACD,C,0DAEgBC,a,CAAe,CAC9B/G,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,eAA5B,CAA6CkoC,aAA7C,CAAf,CACA,MAAO,KAAP,CACD,C,0DAEgBC,a,CAAe,CAC9BhH,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,eAA5B,CAA6CmoC,aAA7C,CAAf,CACA,MAAO,KAAP,CACD,C,wCAEOzU,I,CAAM,CACZyN,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,MAA5B,CAAoC0zB,IAApC,CAAf,CACA,MAAO,KAAP,CACD,C,oDAEaA,I,CAAM,CAClByN,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,YAA5B,CAA0C0zB,IAA1C,CAAf,CACA,MAAO,KAAP,CACD,C,0CAEQzB,K,CAAO,CACdkP,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,OAA5B,CAAqC,CAClDiyB,KAAK,CAAC18B,CAD4C,CAElD08B,KAAK,CAAC+C,CAF4C,CAGlD/C,KAAK,CAAC98B,CAH4C,CAArC,CAAf,CAKA,MAAO,KAAP,CACD,C,8CAEU+8B,O,CAAS,CAClBiP,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,SAA5B,CAAuCkyB,OAAvC,CAAf,CACA,MAAO,KAAP,CACD,C,gDAEWhvB,G,CAAK,CACfi+B,4BAAe,CACb,KAAK1N,QADQ,CAEb,KAAKzzB,KAFQ,CAGb,UAHa,CAIb,CAACkD,GAAG,CAACzP,CAAL,CAAQyP,GAAG,CAACvP,CAAZ,CAAeuP,GAAG,CAAC7O,CAAJ,EAAS,CAAxB,CAJa,CAKb,IALa,CAAf,CAOA,MAAO,KAAP,CACD,C,0CAEQwD,K,CAAO,CACdspC,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,OAA5B,CAAqClI,cAAc,CAACD,KAAD,CAAnD,CAAf,CACA,MAAO,KAAP,CACD,C,sDAEcA,K,CAAO,CACpBspC,4BAAe,CACb,KAAK1N,QADQ,CAEb,KAAKzzB,KAFQ,CAGb,aAHa,CAIblI,cAAc,CAACD,KAAD,CAJD,CAAf,CAMA,MAAO,KAAP,CACD,C,+CAEY,CACX,KAAKqqC,gBAAL,GACA,MAAO,KAAP,CACD,C,4DAEiBc,Q,CAAU,CAC1B7B,4BAAe,CAAC,KAAK1N,QAAN,CAAgB,KAAKzzB,KAArB,CAA4B,oBAA5B,CAAkDgjC,QAAlD,CAAf,CACA,MAAO,KAAP,CACD,C,4BAGY4E,mFAAf,E;;AC/IA,GAAMjT,4BAAO,CAAG,GAAI73B,8BAAJ,GAA0B60B,IAA1B,CACd,oCADc,CAAhB,C,GAIMsV,wC,uGACJ,6BAAY3kC,KAAZ,CAAmB4gC,aAAnB,CAAkCtqB,IAAlC,CAAwC,+EACtC,2IAEA,GAAI,CAACA,IAAL,CAAW,CACTA,IAAI,CAAG,EAAP,CACD,CAED,GAAIia,SAAQ,CAAGja,IAAI,CAACia,QAAL,EAAiB/1B,gCAAhC,CAEA,GAAI,CAAComC,aAAL,CAAoB,CAClBA,aAAa,CAAG,IAAhB,CACD,CAED,MAAK5gC,KAAL,CAAaA,KAAb,CAEA,MAAKiL,IAAL,CAAY,EAAZ,CACA,IAAK,GAAI5Y,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGuuC,aAApB,CAAmCvuC,CAAC,EAApC,CAAwC,CACtC,MAAK4Y,IAAL,CAAUvP,IAAV,CAAerJ,CAAf,EACD,CAED,MAAKwuC,OAAL,CAAe,CAAf,CAEA,GAAIhR,SAAQ,CAAG,CACb6Q,QAAQ,CAAE,CAAEh+B,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CADG,CAEb+tB,OAAO,CAAE,CAAE3vB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE+tB,2BAApB,CAFI,CAAf,CAKA,MAAK0O,gBAAL,CAAwB,GAAIvmC,+BAAJ,EAAxB,CAEA,MAAKumC,gBAAL,CAAsB/E,YAAtB,CACE,UADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,MADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,YADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,OADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAa,CAAG,CAAjC,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,SADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,oBADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,eADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,OADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,aADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,gBADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,eADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAOA,MAAKgF,gBAAL,CAAsB/E,YAAtB,CACE,eADF,CAEE,GAAIxhC,uCAAJ,CACE,GAAIshC,aAAJ,CAAiB8E,aAAjB,CADF,CAEE,CAFF,EAGE7E,UAHF,CAGa,IAHb,CAFF,EAQA,MAAKgF,gBAAL,CAAsBC,OAAtB,CAAgC,IAAhC,CAEA,MAAKD,gBAAL,CAAsBE,YAAtB,CAAmC,CAAnC,CAAsCL,aAAtC,EAEA,MAAKM,gBAAL,CAAwB,GAAI1mC,+BAAJ,CAAyB,CAC/Cq1B,QAAQ,CAAEA,QADqC,CAE/CW,YAAY,CAAEpE,uBAFiC,CAG/CqE,cAAc,CAAEpE,yBAH+B,CAI/C8D,WAAW,CAAE,IAJkC,CAK/CI,QAAQ,CAAEA,QALqC,CAM/CH,UAAU,CAAE,KAAO;AAN4B,CAAzB,CAAxB,CASA;;;;;;UAQA,MAAK+Q,WAAL,CAAmB,GAAImE,sBAAJ,CACjB,MAAKpE,gBADY,CAEjB,MAAKH,gBAFY,CAAnB,CAKA,MAAOH,aAAa,EAApB,CAAwB,CACtB,MAAKO,WAAL,CAAiBzQ,MAAjB,CAAwBkQ,aAAxB,EAAuChB,gBAAvC,GACD,CAED,MAAKlQ,IAAL,CAAY,GAAIl1B,uBAAJ,CAAiB,MAAKumC,gBAAtB,CAAwC,MAAKG,gBAA7C,CAAZ,CACA,MAAKxR,IAAL,CAAU0R,aAAV,CAA0B,KAA1B,CACA;AACA,MAAK1R,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B4U,IAAI,CAACvkB,CAAL,EAAU,CAAC,EAAxC,EAEA,MAAKg/B,WAAL,CAAmB,KAAnB,CAEA,MAAK/wB,KAAL,CAAW5M,GAAX,CAAe,MAAKs8B,IAApB,EAvJsC,aAwJvC,C,+GAEwB,IAAXv+B,EAAW,MAAXA,CAAW,CAARE,CAAQ,MAARA,CAAQ,CAALU,CAAK,MAALA,CAAK,CACvB,KAAK29B,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuBvQ,CAAvB,CAA0BE,CAA1B,CAA6BU,CAA7B,EACA,KAAKg/B,WAAL,CAAmB,IAAnB,CACD,C,yCAES,CACR,KAAKrB,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,GACA,KAAK/xB,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACD,C,4CAEiB,IAATlsB,MAAS,OAATA,KAAS,CAChB,KAAK09B,gBAAL,CAAsBrR,QAAtB,CAA+B6Q,QAA/B,CAAwCp8B,KAAxC,CAAgDd,KAAhD,CACA,KAAKksB,IAAL,CAAUd,QAAV,CAAmBmC,WAAnB,CAAiC,IAAjC,CACD,C,yCAES,CACR,MAAO,MAAK9lB,IAAL,CAAU1Y,MAAV,CAAmB,CAA1B,CACD,C,iDAEa,CACZ,GAAI,KAAK0Y,IAAL,CAAU1Y,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,MAAO,MAAP,CACD,CAED,GAAIF,EAAC,CAAG,KAAK4Y,IAAL,CAAUnD,GAAV,EAAR,CAEA,MAAO,MAAKq5B,WAAL,CAAiBzQ,MAAjB,CAAwBr+B,CAAxB,CAAP,CACD,C,oDAEaivC,e,CAAiB,CAC7BA,eAAe,CAAG,GAAGtjC,MAAH,CAAUsjC,eAAV,CAAlB,CAEAA,eAAe,CAAC9lC,OAAhB,CAAwB,SAAUnJ,CAAV,CAAa,CACnC,KAAK8uC,WAAL,CAAiBzQ,MAAjB,CAAwBr+B,CAAxB,EAA2ButC,gBAA3B,GACD,CAFD,CAEG,IAFH,EAGA,KAAK30B,IAAL,CAAY,KAAKA,IAAL,CAAUjN,MAAV,CAAiBsjC,eAAjB,CAAZ,CACD,C,iCA/L+BlD,mB,EAkMnBuG,wGAAf,E;;;;GChMMmB,4C,yBACJ,+BAAYxjC,IAAZ,CAAkB,CAAC,sEACjB,KAAKA,IAAL,CAAYA,IAAZ,CACD,C,8FAEIu3B,U,CAAY,CACf,KAAKA,UAAL,CAAkBA,UAAlB,CACD,C,iFAE6B,CAC5B,GAAIz6B,OAAM,CAAG,CAAb,CAEA,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BiqB,4BAA3B,EAAJ,CAA+D,CAC7D3mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BkqB,0BAA3B,EAAJ,CAA6D,CAC3D5mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,C,oFAE6B4c,O,CAAS,CACrC,GAAI5c,OAAM,CAAG,CAAb,CAEA,GAAI4c,OAAO,WAAY8F,2BAAvB,CAAqC,CACnC,GAAI,KAAKxf,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BmqB,qCAA3B,EAAJ,CAAwE,CACtE7mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BoqB,gCAA3B,EAAJ,CAAmE,CACjE9mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CAVD,IAUO,IAAI4c,OAAO,WAAY4F,6BAAvB,CAAuC,CAC5C,MAAO,EAAP,CACD,CAFM,IAEA,IAAI5F,OAAO,WAAY6F,yBAAvB,CAAmC,CACxC,GAAI,KAAKvf,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BqqB,mCAA3B,EAAJ,CAAsE,CACpE/mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BsqB,8BAA3B,EAAJ,CAAiE,CAC/DhnC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CAVM,IAUA,IAAI4c,OAAO,WAAYgG,+BAAvB,CAAyC,CAC9C,GAAI,KAAK1f,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BmqB,qCAA3B,EAAJ,CAAwE,CACtE7mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BiqB,4BAA3B,EAAJ,CAA+D,CAC7D3mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CAVM,IAUA,IAAI4c,OAAO,WAAYiG,oCAAvB,CAA8C,CACnD,GAAI,KAAK3f,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BoqB,gCAA3B,EAAJ,CAAmE,CACjE9mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BiqB,4BAA3B,EAAJ,CAA+D,CAC7D3mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CAVM,IAUA,IAAI4c,OAAO,WAAY+F,6BAAvB,CAAuC,CAC5C,GAAI,KAAKzf,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BqqB,mCAA3B,EAAJ,CAAsE,CACpE/mC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BkqB,0BAA3B,EAAJ,CAA6D,CAC3D5mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CAVM,IAUA,IAAI4c,OAAO,WAAYkG,kCAAvB,CAA4C,CACjD,GAAI,KAAK5f,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BsqB,8BAA3B,EAAJ,CAAiE,CAC/DhnC,MAAM,GACP,CAED,GAAI,KAAKkD,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BkqB,0BAA3B,EAAJ,CAA6D,CAC3D5mC,MAAM,GACP,CAED,MAAOA,OAAP,CACD,CACF,C,oGAEqC4c,O,CAAS,gBACR,KAAKqqB,IAAL,CAAUrqB,OAAV,CAAmB,IAAnB,CADQ,CAC9BsqB,MAD8B,YACrC/yC,KADqC,CACjBgzC,IADiB,YACtB/yC,GADsB,gBAER,KAAKgzC,IAAL,CAAUxqB,OAAV,CAAmB,IAAnB,CAFQ,CAE9ByqB,MAF8B,YAErClzC,KAFqC,CAEjBmzC,IAFiB,YAEtBlzC,GAFsB,CAG7C,MAAO,CACLD,KAAK,CAAE,GAAIoN,aAAJ,CAAW2lC,MAAX,CAAmBG,MAAnB,CAA2B,CAAC,KAAK5M,UAAL,CAAgB9nC,CAAjB,CAAqB,CAAhD,CADF,CAELyB,GAAG,CAAE,GAAImN,aAAJ,CAAW4lC,IAAX,CAAiBG,IAAjB,CAAuB,KAAK7M,UAAL,CAAgB9nC,CAAhB,CAAoB,CAA3C,CAFA,CAAP,CAID,C,gEAEmBiqB,O,CAAS,iBACU,KAAKqqB,IAAL,CAAUrqB,OAAV,CADV,CACZsqB,MADY,aACnB/yC,KADmB,CACCgzC,IADD,aACJ/yC,GADI,iBAEU,KAAKgzC,IAAL,CAAUxqB,OAAV,CAFV,CAEZyqB,MAFY,aAEnBlzC,KAFmB,CAECmzC,IAFD,aAEJlzC,GAFI,CAG3B,MAAO,CACLD,KAAK,CAAE,GAAIoN,aAAJ,CAAW2lC,MAAX,CAAmBG,MAAnB,CAA2B,CAAC,KAAK5M,UAAL,CAAgB9nC,CAAjB,CAAqB,CAAhD,CADF,CAELyB,GAAG,CAAE,GAAImN,aAAJ,CAAW4lC,IAAX,CAAiBG,IAAjB,CAAuB,KAAK7M,UAAL,CAAgB9nC,CAAhB,CAAoB,CAA3C,CAFA,CAAP,CAID,C,kCAEIiqB,O,CAAqC,IAA5B2qB,mBAA4B,2DAAP,KAAO,CACxC,GAAMC,WAAU,CAAGD,kBAAkB,CACjC,CADiC,CAEjC,KAAKE,6BAAL,CAAmC7qB,OAAnC,CAFJ,CAGA,GAAIA,OAAO,WAAY8F,2BAAnB,EAAmC9F,OAAO,WAAY6F,yBAA1D,CAAsE,CACpE,MAAO,CACLtuB,KAAK,CAAE,CAAC,KAAKsmC,UAAL,CAAgBxoC,CAAjB,CAAqBu1C,UAArB,CAAkC,CADpC,CAELpzC,GAAG,CAAE,KAAKqmC,UAAL,CAAgBxoC,CAAhB,CAAoBu1C,UAApB,CAAiC,CAFjC,CAAP,CAID,CALD,IAKO,IACL5qB,OAAO,WAAYiG,oCAAnB,EACAjG,OAAO,WAAYkG,kCAFd,CAGL,CACA,MAAO,CACL3uB,KAAK,CAAE,CAAC,KAAKsmC,UAAL,CAAgBxoC,CAAjB,CAAqB,CADvB,CAC0B;AAC/BmC,GAAG,CAAE,CAAC,KAAKqmC,UAAL,CAAgBxoC,CAAjB,CAAqB,CAArB,CAAyB,KAAKwoC,UAAL,CAAgBxoC,CAAhB,CAAoBu1C,UAAY;AAFzD,CAAP,CAID,CARM,IAQA,IACL5qB,OAAO,WAAYgG,+BAAnB,EACAhG,OAAO,WAAY+F,6BAFd,CAGL,CACA,MAAO,CACLxuB,KAAK,CAAE,KAAKsmC,UAAL,CAAgBxoC,CAAhB,CAAoB,CAApB,CAAwB,KAAKwoC,UAAL,CAAgBxoC,CAAhB,CAAoBu1C,UAD9C,CAC0D;AAC/DpzC,GAAG,CAAE,KAAKqmC,UAAL,CAAgBxoC,CAAhB,CAAoB,CAAG;AAFvB,CAAP,CAID,CARM,IAQA,IAAI2qB,OAAO,WAAY4F,6BAAvB,CAAuC,CAC5C,MAAO,CACLruB,KAAK,CAAE,CAAC,KAAKsmC,UAAL,CAAgBxoC,CAAjB,CAAqB,CADvB,CAELmC,GAAG,CAAE,KAAKqmC,UAAL,CAAgBxoC,CAAhB,CAAoB,CAFpB,CAAP,CAID,CACF,C,kCAEI2qB,O,CAAqC,IAA5B2qB,mBAA4B,2DAAP,KAAO,CACxC,GAAMG,SAAQ,CAAGH,kBAAkB,CAC/B,CAD+B,CAE/B,KAAKI,2BAAL,EAFJ,CAGA,GACE/qB,OAAO,WAAY8F,2BAAnB,EACA9F,OAAO,WAAYiG,oCADnB,EAEAjG,OAAO,WAAYgG,+BAHrB,CAIE,CACA,MAAO,CACLzuB,KAAK,CAAE,KAAKsmC,UAAL,CAAgB1oC,CAAhB,CAAoB,CAApB,CAAwB,KAAK0oC,UAAL,CAAgB1oC,CAAhB,CAAoB21C,QAD9C,CACwD;AAC7DtzC,GAAG,CAAE,KAAKqmC,UAAL,CAAgB1oC,CAAhB,CAAoB,CAAG;AAFvB,CAAP,CAID,CATD,IASO,IAAI6qB,OAAO,WAAY4F,6BAAvB,CAAuC,CAC5C,MAAO,CACLruB,KAAK,CAAE,CAAC,KAAKsmC,UAAL,CAAgB1oC,CAAjB,CAAqB21C,QAArB,CAAgC,CADlC,CAELtzC,GAAG,CAAE,KAAKqmC,UAAL,CAAgB1oC,CAAhB,CAAoB21C,QAApB,CAA+B,CAF/B,CAAP,CAID,CALM,IAKA,IACL9qB,OAAO,WAAY6F,yBAAnB,EACA7F,OAAO,WAAYkG,kCADnB,EAEAlG,OAAO,WAAY+F,6BAHd,CAIL,CACA,MAAO,CACLxuB,KAAK,CAAE,CAAC,KAAKsmC,UAAL,CAAgB1oC,CAAjB,CAAqB,CADvB,CAC0B;AAC/BqC,GAAG,CAAE,CAAC,KAAKqmC,UAAL,CAAgB1oC,CAAjB,CAAqB,CAArB,CAAyB,KAAK0oC,UAAL,CAAgB1oC,CAAhB,CAAoB21C,QAAU;AAFvD,CAAP,CAID,CACF,C,8EAE0Br+B,M,CAAiC,IAAzB41B,UAAyB,2DAAb/sC,IAAI,CAAC6E,MAAQ,CAC1D,GAAM6lB,QAAO,CAAG,KAAK1Z,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CAA2BC,kBAA3B,CAA8CtT,MAA9C,CAAhB,CACA,GAAMu+B,OAAM,CAAG,KAAKC,qCAAL,CAA2CjrB,OAA3C,CAAf,CACA,GAAMkrB,UAAS,CAAG,GAAIvmC,aAAJ,CAChBrP,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWrC,CAAX,CAAe61C,MAAM,CAACzzC,KAAP,CAAapC,CAArC,CADgB,CAEhBG,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWnC,CAAX,CAAe21C,MAAM,CAACzzC,KAAP,CAAalC,CAArC,CAFgB,CAGhBC,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWzB,CAAX,CAAei1C,MAAM,CAACzzC,KAAP,CAAaxB,CAArC,CAHgB,CAAlB,CAMA,GAAM+E,OAAM,CAAG,GAAI6J,aAAJ,CACbumC,SAAS,CAAC/1C,CAAV,CAAcktC,SAAS,EADV,CAEb6I,SAAS,CAAC71C,CAAV,CAAcgtC,SAAS,EAFV,CAGb6I,SAAS,CAACn1C,CAAV,CAAcssC,SAAS,EAHV,CAAf,CAMA,MAAO2I,OAAM,CAACzzC,KAAP,CAAaH,GAAb,CAAiB0D,MAAjB,EAAyBqwC,IAAzB,CAA8B,CAA9B,CAAP,CACD,C,yEAEgD,IAAzB9I,UAAyB,2DAAb/sC,IAAI,CAAC6E,MAAQ,CAC/C,MAAO,IAAIwK,aAAJ,CACL09B,SAAS,GAAK,KAAKxE,UAAL,CAAgB1oC,CAA9B,CAAkC,KAAK0oC,UAAL,CAAgB1oC,CAAhB,CAAoB,CADjD,CAELktC,SAAS,GAAK,KAAKxE,UAAL,CAAgBxoC,CAA9B,CAAkC,KAAKwoC,UAAL,CAAgBxoC,CAAhB,CAAoB,CAFjD,CAAP,CAID,C,qCAGYy0C,2GAAf,E;;GC9MMsB,sB,kMAEFC,S,CACAC,a,CACAC,W,CACA7L,K,CACAgG,I,CACAtyB,Q,CACAkH,I,CACA+nB,S,CACAmJ,wB,CACApU,O,CACA,CACA,KAAKoU,wBAAL,CAAgCA,wBAAhC,CAEA,GAAM3iC,SAAQ,CAAG,GAAIlE,aAAJ,CAAW4mC,WAAX,EACdvlC,GADc,CACVslC,aADU,EAEd1qC,SAFc,GAGd/B,cAHc,CAGC6gC,KAHD,CAAjB,CAKA,KAAKtsB,QAAL,CAAgB,KAAKq4B,UAAL,CACdJ,SADc,CAEdC,aAFc,CAGdC,WAHc,CAIdn4B,QAJc,CAKdvK,QALc,CAMd62B,KANc,CAOdgG,IAPc,CAQdprB,IARc,CASdkxB,wBATc,CAUdnJ,SAVc,CAWdjL,OAXc,CAAhB,CAaD,C,8CAGCiU,S,CACAC,a,CACAC,W,CACAn4B,Q,CACAvK,Q,CACA62B,K,CACAgG,I,CACAprB,I,CACAkxB,wB,CACAnJ,S,CACAjL,O,CACA,CACA,GAAMhC,KAAI,CAAG9a,IAAI,CAAC8a,IAAL,EAAa,EAA1B,CACA,GAAMsW,gBAAe,CAAGH,WAAW,CAACvlC,GAAZ,CAAgBslC,aAAhB,EAA+B1qC,SAA/B,EAAxB,CACA,GAAM+yB,MAAK,CAAGrZ,IAAI,CAACqZ,KAAL,CACV,GAAIn1B,sBAAJ,CAAgB8b,IAAI,CAACqZ,KAAL,CAAW,CAAX,CAAhB,CAA+BrZ,IAAI,CAACqZ,KAAL,CAAW,CAAX,CAA/B,CAA8CrZ,IAAI,CAACqZ,KAAL,CAAW,CAAX,CAA9C,CADU,CAEV,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAFJ,CAIA,GAAMmtC,WAAU,CAAGrxB,IAAI,CAAC/jB,MAAL,CAAc+jB,IAAI,CAAC/jB,MAAnB,CAA4B6+B,IAAI,CAAG,CAAtD,CAEA,GAAMoG,OAAM,CAAGlhB,IAAI,CAACkhB,MAAL,EAAe,CAA9B,CAEAgQ,wBAAwB,CACrBI,eADH,CACmBxU,OADnB,EAEG2K,QAFH,CAEY4J,UAFZ,CAEwBvW,IAFxB,EAGG4I,UAHH,CAGc,GAHd,EAIG90B,WAJH,CAIeoiC,aAJf,EAKGO,cALH,GAMGC,WANH,CAMeJ,eANf,EAOG7H,QAPH,CAOYlQ,KAPZ,EAQGxqB,WARH,CAQeN,QARf,EASGs7B,iBATH,CASqBkH,SATrB,EAUG1F,mBAVH,CAUuB0F,SAAS,CAAGj4B,QAVnC,CAU6CsyB,IAV7C,EAWGpB,SAXH,CAWa9I,MAXb,EAaA,GAAMuQ,WAAU,CAAG,CAACzxB,IAAI,CAAC/jB,MAAL,CAAc+jB,IAAI,CAAC/jB,MAAnB,CAA4B6+B,IAAI,CAAG,CAApC,EAAyC,GAA5D,CAEA,GAAM4W,aAAY,CAAGD,UAAU,CAAG,GAAlC,CACA,GAAME,SAAQ,CAAGD,YAAY,CAAGtM,KAAhC,CAEA,GAAMwM,YAAW,CAAG5xB,IAAI,CAAC4xB,WAAL,EAAoB,GAAxC,CAEAV,wBAAwB,CACrBI,eADH,CACmBxU,OADnB,CAEE;AAFF,CAGG2K,QAHH,CAGYgK,UAHZ,CAGwB3W,IAAI,CAAG,GAH/B,EAIG4I,UAJH,CAIckO,WAJd,EAKGhjC,WALH,CAKeoiC,aALf,EAMGO,cANH,GAOGC,WAPH,CAOeJ,eAPf,CAQE;AARF,CASG7H,QATH,CASY,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CATZ,EAUG2K,WAVH,CAUeN,QAVf,EAWGs7B,iBAXH,CAWqBkH,SAAS,CAAGY,QAXjC,EAYGtG,mBAZH,CAYuB0F,SAAS,CAAGj4B,QAAZ,CAAuB64B,QAZ9C,CAYwDvG,IAZxD,EAaGpB,SAbH,CAaa9I,MAbb,EAeA,MAAOpoB,SAAQ,CAAG64B,QAAlB,CACD,C,0BAGYb,2EAAf,E;;ACvFA,GAAMe,2BAAU,CAAG,GAAIf,kBAAJ,EAAnB,C,GAEMgB,gC,mGACJ,yBAAYC,gBAAZ,CAA8BhK,SAA9B,CAA6D,cAApB/nB,KAAoB,2DAAb,EAAa,IAAT8c,QAAS,2GAC3D,qIAAMiL,SAAN,GAD2D,MAmY7DiK,cAnY6D,CAmY5C,UAAY,CAC3B,GAAI,KAAK3Y,KAAT,CAAgB,CACd,MAAO,MAAKA,KAAZ,CACD,CAED,MAAO,IAAIn1B,sBAAJ,GAAkB+tC,MAAlB,CACL,CADK,CAEL,CAAC,IAAMj3C,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,CAAP,EAAyC,GAFpC,CAGL7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,EAAkC,GAH7B,CAAP,CAKD,CA7Y4D,OA+Y7DqyC,aA/Y6D,CA+Y7C,UAAY,CAC1B,GAAI11C,EAAC,CAAG,CAACxB,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAAtB,EAA4B,GAApC,CACA,MAAO,IAAIqE,sBAAJ,GAAkB+tC,MAAlB,CAAyBz1C,CAAzB,CAA4BA,CAA5B,CAA+BA,CAAC,CAAG,IAAnC,CAAP,CACD,CAlZ4D,CAG3D,MAAKu1C,gBAAL,CAAwBA,gBAAxB,CACA,MAAK7uC,QAAL,CAAgB8c,IAAI,CAAC9c,QAAL,EAAiB,GAAImH,aAAJ,EAAjC,CACA,MAAKmvB,IAAL,CAAYxZ,IAAI,CAACwZ,IAAL,EAAa,CAAzB,CACA,MAAKptB,IAAL,CAAY4T,IAAI,CAAC5T,IAAL,EAAa,KAAzB,CACA,MAAK0uB,IAAL,CAAY9a,IAAI,CAAC8a,IAAL,EAAa,EAAzB,CACA,MAAKsK,KAAL,CAAaplB,IAAI,CAAColB,KAAL,EAAc,CAA3B,CACA,MAAKv/B,IAAL,CAAYma,IAAI,CAACna,IAAL,EAAa,KAAzB,CACA,MAAKiT,QAAL,CAAgBkH,IAAI,CAAClH,QAArB,CACA,MAAKugB,KAAL,CAAarZ,IAAI,CAACqZ,KAAlB,CACA,MAAKC,OAAL,CAAetZ,IAAI,CAACsZ,OAAL,EAAgB,CAA/B,CACA,MAAK4H,MAAL,CAAclhB,IAAI,CAACkhB,MAAL,EAAe,CAA7B,CAEA,MAAKjzB,QAAL,CAAgB+R,IAAI,CAACzR,QAAL,EAAiB,GAAIlE,aAAJ,EAAjC,CAEA,MAAKyyB,OAAL,CAAeA,OAAf,CACA,MAAK1C,MAAL,GAlB2D,aAmB5D,C,6FAEQ,CACP,OAAQ,KAAKhuB,IAAb,EACE,IAAK,KAAL,CACE,KAAK+lC,SAAL,GACA,MAEF,IAAK,MAAL,CACE,KAAKC,UAAL,GACA,MAEF,IAAK,KAAL,CACE,KAAKC,SAAL,GACA,MAEF,IAAK,QAAL,CACE,KAAKC,YAAL,GACA,MACF,QACE,KAAKH,SAAL,GACA,MAlBJ,CAoBD,C,+CAEY,CACX,GAAIrpC,OAAM,CAAG,CAAb,CAEA,KAAKypC,cAAL,CAAoBzpC,MAApB,CAA4B,KAAKgyB,IAAjC,EACA,KAAK0X,UAAL,CAAgB,KAAK1X,IAArB,CAA2B+N,YAA3B,EACA,KAAK4J,iBAAL,CAAuB,KAAK3X,IAAL,CAAY,CAAnC,CAAsC,GAAtC,EACD,C,6CAEW,CACV,GAAIhyB,OAAM,CAAG9N,IAAI,CAAC+nB,IAAL,CAAU,KAAK+X,IAAL,CAAY,CAAtB,CAAb,CACA,GAAIhyB,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,GAAI4pC,UAAS,CAAG13C,IAAI,CAAC+nB,IAAL,CAAU/nB,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAA/B,CAAhB,CAEA,KAAK8yC,eAAL,CAAqBD,SAArB,CAAgC,KAAK5X,IAArC,EACA,KAAKyX,cAAL,CAAoB,CAApB,CAAuB,KAAKzX,IAA5B,EACA,KAAK0X,UAAL,CAAgB,KAAK1X,IAArB,CAA2B+N,YAA3B,EACA,KAAK+J,UAAL,CAAgB9pC,MAAhB,CAAwB,KAAKgyB,IAA7B,EACA,KAAK2X,iBAAL,CAAuB,KAAK3X,IAAL,CAAY,CAAnC,CAAsC,GAAtC,EACD,C,mDAEc,CACb;AACA;AAEA,GAAIhyB,OAAM,CAAG9N,IAAI,CAAC+nB,IAAL,CAAU,KAAK+X,IAAL,CAAY,CAAtB,CAAb,CACA,GAAIhyB,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,GAAI4pC,UAAS,CAAG13C,IAAI,CAAC+nB,IAAL,CAAU/nB,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAA/B,CAAhB,CAEA,KAAKgzC,aAAL,CAAmBH,SAAnB,CAA8B,KAAK5X,IAAnC,EACA,KAAKyX,cAAL,CAAoBv3C,IAAI,CAAC+nB,IAAL,CAAUja,MAAM,CAAG,CAAnB,CAApB,CAA2C,KAAKgyB,IAAhD,EACD,C,6CAEW,CACV;AACA;AAEA,GAAIhyB,OAAM,CAAG9N,IAAI,CAAC+nB,IAAL,CAAU,KAAK+X,IAAL,CAAY,CAAtB,CAAb,CACA,GAAIhyB,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,KAAKgqC,aAAL,CAAmB93C,IAAI,CAAC+nB,IAAL,CAAUja,MAAM,CAAG,CAAnB,CAAnB,CAA0C,KAAKgyB,IAA/C,EACA,KAAK2X,iBAAL,CAAuB,KAAK3X,IAAL,CAAY,CAAnC,CAAsC,GAAtC,EACA,KAAKiY,aAAL,CAAmB,KAAKjY,IAAxB,CAA8B6N,WAA9B,EACD,C,4DAEiB7N,I,CAAMxB,O,CAAS,CAC/B,GAAI,CAACA,OAAL,CAAc,CACZA,OAAO,CAAG,GAAV,CACD,CAED,GAAI0Z,WAAU,CAAG,KAAKxZ,IAAtB,CACA,GAAIyZ,YAAW,CAAG,GAAlB,CACA,GAAIC,UAAS,CAAGF,UAAU,CAAGC,WAA7B,CACA;AAEA,KAAKlB,gBAAL,CACGpD,WADH,CACe,KAAK7R,OADpB,EAEG4M,OAFH,CAEW5O,IAAI,CAAG,CAFlB,CAGE;AAHF,CAIG4I,UAJH,CAIcpK,OAAO,CAAG,KAAKA,OAJ7B,EAKGkQ,SALH,CAKawJ,UALb,CAKyBC,WALzB,EAMGxJ,UANH,CAMcyJ,SANd,CAMyB,GANzB,EAOG3J,QAPH,CAOY,CAAE5sC,CAAC,CAAE,CAAL,CAAQy/B,CAAC,CAAE,CAAX,CAAc7/B,CAAC,CAAE,CAAjB,CAPZ,EAQGqS,WARH,CAQe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CAEXE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAGXU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqBmJ,UAdrB,EAeGhJ,SAfH,CAea,KAAK9I,MAflB,EAgBGryB,WAhBH,CAgBe,KAAKu2B,KAhBpB,EAiBD,C,wDAEet8B,M,CAAQlD,M,CAAQoa,I,CAAM,CACpC,MAAOlX,MAAM,EAAb,CAAiB,CACf,KAAKqqC,cAAL,CAAoBvtC,MAApB,CAA4Boa,IAA5B,EACD,CACF,C,sDAEcpa,M,CAAQoa,I,CAAM,CAC3B,GAAI,CAACA,IAAL,CAAW,CACTA,IAAI,CAAG,EAAP,CACD,CAED,GAAMolB,MAAK,CAAG,CAACpqC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAAvB,EAA8B,KAAKulC,KAAnC,CAA2C,KAAKtK,IAAhD,CAAuD,IAArE,CAEA,GAAMkW,cAAa,CAAGhxB,IAAI,CAAC9c,QAAL,EAAiB,KAAKA,QAA5C,CACA,GAAM+tC,YAAW,CACfjxB,IAAI,CAAC3gB,MAAL,EACA,GAAIgL,aAAJ,CAAWrP,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,CAAgC7E,IAAI,CAAC6E,MAAL,GAAgB,GAAhD,CAAqD7E,IAAI,CAAC6E,MAAL,GAAgB,GAArE,EACGyG,SADH,GAEG/B,cAFH,CAEkB,CAACvJ,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,CAAtB,EAA2B,KAAKi7B,IAFlD,EAGGh+B,GAHH,CAGOk0C,aAHP,CAFF,CAOA,GAAM3X,MAAK,CAAG,KAAK2Y,cAAL,EAAd,CACAH,0BAAU,CAACzX,MAAX,CACE,KAAKZ,IAAL,CAAYx+B,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,EAAjB,CAAuB,KAAKulC,KAAvC,CADd,CAEE,GAAI/6B,aAAJ,CAAW2mC,aAAX,CAFF,CAGE,GAAI3mC,aAAJ,CAAW4mC,WAAX,CAHF,CAIE7L,KAAK,CAAG,GAJV,CAKEplB,IAAI,CAACozB,YAAL,EAAqBp4C,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAL7C,CAME7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAAjC,EAAwC,KAAKulC,KAN/C,CAOE,CACEtK,IAAI,CAAEl1B,MAAM,CAAG,CADjB,CAEEyzB,KAAK,CAAE,CAACA,KAAK,CAAC18B,CAAP,CAAU08B,KAAK,CAAC+C,CAAhB,CAAmB/C,KAAK,CAAC98B,CAAzB,CAFT,CAGEq1C,WAAW,CAAE,GAHf,CAIE1Q,MAAM,CAAE,KAAKA,MAJf,CAPF,CAaE,KAAK6G,SAbP,CAcE,KAAKgK,gBAdP,CAeE,KAAKjV,OAfP,EAiBD,C,oDAEah0B,M,CAAQlD,M,CAAQ,CAC5B,GAAIk1B,KAAI,CAAGl1B,MAAX,CACA;AACA,MAAOkD,MAAM,EAAb,CAAiB,CACf,GAAI4lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAChB,KAAK7Z,IAAL,CAAYx+B,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,EAAjB,CAAuB,KAAKulC,KAAvC,CADd,CAEA,GAAI8N,UAAS,CACXG,cAAc,CAAGr4C,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,EAAjB,CAAuB,KAAKulC,KAAvC,CADnB,CAGA,GAAInmC,MAAK,CAAGjE,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,CAAZ,CACA,GAAIR,OAAM,CAAGd,mBAAmB,CAAC,GAAD,CAAM,CAACU,KAAP,CAAc,CAAd,CAAiB,CAAjB,CAAhC,CAEAyvC,QAAQ,CACLhF,OADH,CACW1uC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgBi7B,IAA3B,EAAmCA,IAAI,CAAG,CADrD,EAEG4I,UAFH,CAEc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAFpC,EAGG2pC,SAHH,CAGa6J,cAHb,CAG6Br4C,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAHlD,EAIG4pC,UAJH,CAKIyJ,SALJ,CAMKl4C,IAAI,CAAC6E,MAAL,GAAgB,GAAjB,CAAwB,KAAKulC,KAA7B,CAAqC,IAAM,KAAKA,KANpD,EAQGmE,QARH,CAQY+J,8BAAc,EAR1B,EASG1kC,WATH,CASe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CAEXE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAGXU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CATf,EAcGoT,WAdH,CAcexP,MAdf,EAeGuqC,QAfH,CAeY3qC,KAfZ,EAgBG8qC,UAhBH,CAgBcnB,YAhBd,EAiBGiB,iBAjBH,CAiBqBwJ,cAjBrB,EAkBGrJ,SAlBH,CAkBa,KAAK9I,MAlBlB,EAoBA,KAAKiS,cAAL,CAAoBvtC,MAApB,CAA4B,CAC1B3G,KAAK,CAAEA,KADmB,CAE1Bo0C,cAAc,CAAEA,cAFU,CAA5B,EAID,CACF,C,8CAEUztC,M,CAAQm2B,O,CAAS,CAC1B,GAAIjB,KAAI,CAAGl1B,MAAX,CAEA,GAAI8oC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAAG,KAAK7Z,IAAL,CAAax+B,IAAI,CAAC6E,MAAL,GAAgB,KAAjB,CAA0B,KAAKulC,KAAhE,CACA,GAAI8N,UAAS,CACXG,cAAc,CAAIr4C,IAAI,CAAC6E,MAAL,GAAgB,IAAjB,CAAyB,KAAKulC,KAA/C,CAAuD,KAAO,KAAKA,KADrE,CAGAsJ,QAAQ,CACLhF,OADH,CACW1uC,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgBi7B,IAAjB,CAAyB,CAApC,EAAyCA,IADpD,EAEG4I,UAFH,CAEc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAFpC,EAGG2pC,SAHH,CAGa6J,cAHb,CAG6Br4C,IAAI,CAAC6E,MAAL,GAAgB,KAAhB,CAAwB,MAHrD,EAIG4pC,UAJH,CAKIyJ,SALJ,CAMKl4C,IAAI,CAAC6E,MAAL,GAAgB,IAAjB,CAAyB,KAAKulC,KAA9B,CAAsC,MAAQ,KAAKA,KANvD,EAQG1B,UARH,CAQc,KAAKpK,OAAL,CAAe,GAR7B,EASGiQ,QATH,CASYgK,4BAAY,EATxB,EAUG3kC,WAVH,CAUe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CACS;AACpBE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAES;AACpBU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CAVf,EAeGmuC,QAfH,CAeY,EAfZ,EAgBGG,UAhBH,CAgBchO,OAhBd,EAiBGltB,WAjBH,CAiBe,KAAKZ,QAjBpB,EAkBG27B,QAlBH,CAmBI5uC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,CAnBJ,CAoBI7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,KAAKulC,KAArC,EAA8C,GAAK,KAAKA,KApB5D,EAuBGyE,iBAvBH,CAuBqBwJ,cAvBrB,EAwBGrJ,SAxBH,CAwBa,KAAK9I,MAxBlB,EAyBD,C,oDAEap4B,M,CAAQlD,M,CAAQ,CAC5B,GAAIk1B,KAAI,CAAGl1B,MAAM,CAAG,CAApB,CACA,MAAOkD,MAAM,EAAb,CAAiB,CACf,GAAI4lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAAG,KAAK7Z,IAA1B,CACA,GAAI0Z,UAAS,CAAGG,cAAhB,CAEA3E,QAAQ,CACLhF,OADH,CACW5O,IADX,EAEG6O,aAFH,CAEiB,MAAQ,KAAK7O,IAF9B,EAGG4I,UAHH,CAGc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAHpC,EAIG2pC,SAJH,CAIa6J,cAJb,CAI6Br4C,IAAI,CAAC6E,MAAL,GAAgB,KAAhB,CAAwB,MAJrD,EAKG4pC,UALH,CAKcyJ,SALd,CAKyB,CAACl4C,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAAvB,EAA8B,KAAKulC,KAL5D,EAMGmE,QANH,CAMY,CAAE5sC,CAAC,CAAE,IAAM,GAAX,CAAgBy/B,CAAC,CAAE,IAAM,GAAzB,CAA8B7/B,CAAC,CAAE,IAAM,GAAvC,CANZ,EAOGsS,WAPH,CAOe,KAAKZ,QAPpB,EAQGW,WARH,CAQe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CAEXE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAGXU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqBwJ,cAdrB,EAeGrJ,SAfH,CAea,KAAK9I,MAflB,EAgBD,CACF,C,oDAEat7B,M,CAAQm2B,O,CAAS,CAC7B,GAAIjB,KAAI,CAAGl1B,MAAX,CAEA,GAAI8oC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAAG,KAAK7Z,IAA1B,CACA,GAAI0Z,UAAS,CAAGG,cAAhB,CAEA3E,QAAQ,CACLhF,OADH,CACW5O,IAAI,CAAG,GADlB,EAEG6O,aAFH,CAEiB,OAAS,KAAK7O,IAF/B,EAGG4I,UAHH,CAGc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAHpC,EAIG2pC,SAJH,CAIa6J,cAJb,CAI6B,GAJ7B,EAKG5J,UALH,CAKcyJ,SALd,CAKyB,CAACl4C,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAAvB,EAA8B,KAAKulC,KAL5D,EAMGmE,QANH,CAMYgK,4BAAY,EANxB,EAOG3kC,WAPH,CAOe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CACS;AACpBE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAES;AACpBU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CAPf,EAYGmuC,QAZH,CAYY,EAZZ,EAaGG,UAbH,CAachO,OAbd,EAcGltB,WAdH,CAce,KAAKZ,QAdpB,EAeG27B,QAfH,CAeY5uC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,CAfZ,CAe6C,EAAI,KAAKulC,KAftD,EAgBGyE,iBAhBH,CAgBqBwJ,cAhBrB,EAiBGrJ,SAjBH,CAiBa,KAAK9I,MAjBlB,EAkBD,C,8CAEUp4B,M,CAAQlD,M,CAAQ,CACzB,GAAIk1B,KAAI,CAAGl1B,MAAX,CAEA,KAAKmsC,gBAAL,CACGyB,iBADH,CACqB,KAAK1W,OAD1B,EAEG4M,OAFH,CAEW,KAAK5O,IAFhB,EAGG4I,UAHH,CAGc,CAHd,EAIG+F,UAJH,CAIc,KAAKjQ,IAAL,CAAY,GAJ1B,EAKG+P,QALH,CAKYgK,4BAAY,EALxB,EAMG3kC,WANH,CAMe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CAAd,CAAkB,CAACG,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAD1D,CAEX7K,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAAd,CAAkB,CAACC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAF1D,CAGXnK,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAAd,CAAkB,CAACT,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAH1D,CANf,EAWGmkC,UAXH,CAWclB,YAXd,EAYGgB,iBAZH,CAYqB,KAAKrQ,IAZ1B,EAcA,KAAKuY,gBAAL,CACGyB,iBADH,CACqB,KAAK1W,OAD1B,EAEG4M,OAFH,CAEW,KAAK5O,IAAL,CAAY,CAFvB,EAGG4I,UAHH,CAGc,GAHd,EAIG+F,UAJH,CAIc,KAAKjQ,IAAL,CAAY,GAJ1B,EAKG+P,QALH,CAKY+J,8BAAc,EAL1B,EAMG1kC,WANH,CAMe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CAAd,CAAkB,CAACG,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAD1D,CAEX7K,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAAd,CAAkB,CAACC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAF1D,CAGXnK,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAAd,CAAkB,CAACT,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAH1D,CANf,EAWGmkC,UAXH,CAWclB,YAXd,EAYGgB,iBAZH,CAYqB,KAAKrQ,IAZ1B,EAcA,MAAO1wB,MAAM,EAAb,CAAiB,CACf,GAAI4lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAChB,KAAK7Z,IAAL,CAAYx+B,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,GAAjB,CAAwB,KAAKulC,KAAxC,CADd,CAEA,GAAI8N,UAAS,CACXG,cAAc,CAAGr4C,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,GAAjB,CAAwB,KAAKulC,KAAxC,CADnB,CAGAsJ,QAAQ,CACLhF,OADH,CACW1uC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgBi7B,IAA3B,EAAmCA,IAAI,CAAG,CADrD,EAEG6O,aAFH,CAEiB,KAAK7O,IAAL,CAAY,KAF7B,EAGG4I,UAHH,CAGc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,IAHpC,EAIG2pC,SAJH,CAIa6J,cAJb,CAI6Br4C,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAJlD,EAKG4pC,UALH,CAMIyJ,SANJ,CAOKl4C,IAAI,CAAC6E,MAAL,GAAgB,GAAjB,CAAwB,KAAKulC,KAA7B,CAAqC,IAAM,KAAKA,KAPpD,EASGmE,QATH,CASY,KAAKyI,cAAL,EATZ,EAUGpjC,WAVH,CAUe,CACX/T,CAAC,CACC,KAAKqI,QAAL,CAAcrI,CAAd,CAAkB,CAACG,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAFzD,CAGX7K,CAAC,CACC,KAAKmI,QAAL,CAAcnI,CAAd,CAAkB,CAACC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CAJzD,CAKXnK,CAAC,CACC,KAAKyH,QAAL,CAAczH,CAAd,CAAkB,CAACT,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB+F,MAA3B,EAAqCA,MAAtC,EAAgD,CANzD,CAVf,EAkBGiJ,WAlBH,CAkBe,KAAKZ,QAlBpB,EAmBG27B,QAnBH,CAmBY5uC,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,CAnBZ,EAoBGgqC,iBApBH,CAoBqBwJ,cApBrB,EAqBGtJ,UArBH,CAqBcpB,WArBd,EAsBGqB,SAtBH,CAsBa,KAAK9I,MAtBlB,EAuBD,CACF,C,sDAEcp4B,M,CAAQlD,M,CAAQ,CAC7B,GAAIk1B,KAAI,CAAGl1B,MAAM,CAAG,CAApB,CACA,MAAOkD,MAAM,EAAb,CAAiB,CACf,GAAI4lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsBpD,WAAtB,CAAkC,KAAK7R,OAAvC,CAAf,CACA,GAAIuW,eAAc,CAChB,KAAK7Z,IAAL,CAAYx+B,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,IAAjB,CAAyB,KAAKulC,KAAzC,CADd,CAEA,GAAI8N,UAAS,CAAG,KAAKp6B,QAAL,CACZu6B,cAAc,CAAG,KAAKv6B,QADV,CAEZu6B,cAAc,CAAGr4C,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgB,IAAjB,CAAyB,KAAKulC,KAAzC,CAFrB,CAIAsJ,QAAQ,CACLhF,OADH,CACW1uC,IAAI,CAACuC,KAAL,CAAYvC,IAAI,CAAC6E,MAAL,GAAgBi7B,IAAjB,CAAyB,CAApC,EAAyCA,IADpD,EAEG4I,UAFH,CAEc1oC,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAFpC,EAGG2pC,SAHH,CAGa6J,cAHb,CAG6Br4C,IAAI,CAAC6E,MAAL,GAAgB,KAAhB,CAAwB,MAHrD,EAIG4pC,UAJH,CAIcyJ,SAJd,CAIyB,CAACl4C,IAAI,CAAC6E,MAAL,GAAgB,GAAhB,CAAsB,GAAvB,EAA8B,KAAKulC,KAJ5D,EAKGmE,QALH,CAKY,KAAKyI,cAAL,EALZ,EAMGnjC,WANH,CAMe,KAAKZ,QANpB,EAOGy1B,UAPH,CAOc,KAAKpK,OAPnB,EAQG1qB,WARH,CAQe,CACX/T,CAAC,CAAE,KAAKqI,QAAL,CAAcrI,CADN,CAEXE,CAAC,CAAE,KAAKmI,QAAL,CAAcnI,CAFN,CAGXU,CAAC,CAAE,KAAKyH,QAAL,CAAczH,CAHN,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqBwJ,cAdrB,EAeGrJ,SAfH,CAea,KAAK9I,MAflB,EAgBD,CACF,C,+CAmBY,CACX,KAAK6Q,gBAAL,CAAsB0B,OAAtB,CAA8B,IAA9B,EACD,C,6BAvZ2B3L,mB,EA0Z9B,GAAMyL,6BAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,MAAO,IAAIrvC,sBAAJ,GAAkB+tC,MAAlB,CAAyB,GAAzB,CAA8B,GAA9B,CAAmC,GAAnC,CAAP,CACD,CAFD,CAIA,GAAMqB,+BAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,MAAO,IAAIpvC,sBAAJ,GAAkB+tC,MAAlB,CACL,CADK,CAEL,CAACj3C,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,EAAiC,GAAlC,EAAyC,GAFpC,CAGL,CAAC7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,EAAiC,GAAlC,EAAyC,GAHpC,CAAP,CAKD,CAND,CAQeiyC,0FAAf,E;;GCzaM4B,4D,yBACJ,uCAAY1nC,IAAZ,CAAkB,CAAC,8EACjB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAK2nC,WAAL,CAAmB,EAAnB,CACA,KAAKC,aAAL,CAAqB,CAArB,CACA,KAAKC,MAAL,CAAc,IAAd,CACA,KAAKnqC,KAAL,CAAa,IAAb,CACD,C,sGAEIoqC,W,CAAaC,iB,CAAmBC,K,CAAOH,M,CAAQnqC,K,CAAO,CACzD,KAAKoqC,WAAL,CAAmBA,WAAnB,CACA,KAAKC,iBAAL,CAAyBA,iBAAzB,CACA,KAAKC,KAAL,CAAaA,KAAb,CACA,KAAKH,MAAL,CAAcA,MAAd,CAEA,KAAKE,iBAAL,CAAuBnlC,WAAvB,6CACK,KAAKilC,MADV,EAEEp4C,CAAC,CAAE,KAAKo4C,MAAL,CAAYp4C,CAAZ,CAAgB,KAAKu4C,KAF1B,IAIA,KAAKtqC,KAAL,CAAaA,KAAb,CACD,C,mDAEc,CACb,KAAKuqC,YAAL,GACA,KAAKjoC,IAAL,CAAUiG,OAAV,CAAkBuT,QAAlB,CACG0uB,wBADH,GAEGtmC,MAFH,CAEU,SAAC8X,OAAD,QAAaA,QAAO,CAACE,YAAR,GAAuBjQ,WAAvB,EAAb,EAFV,EAGGzQ,OAHH,CAGW,KAAKivC,sBAAL,CAA4BxxC,IAA5B,CAAiC,IAAjC,CAHX,EAID,C,wEAEuB6iB,Q,CAAU,CAChC,KAAKyuB,YAAL,GACAzuB,QAAQ,CAACtgB,OAAT,CAAiB,KAAKivC,sBAAL,CAA4BxxC,IAA5B,CAAiC,IAAjC,CAAjB,EACD,C,mDAEc,CACb,KAAKgxC,WAAL,CAAiBzuC,OAAjB,CAAyB,kBAAGkvC,UAAH,MAAGA,SAAH,OACvBA,UAAS,CAAClvC,OAAV,CAAkB,mBAAGkC,MAAH,OAAGA,KAAH,CAAU6hC,OAAV,OAAUA,OAAV,OAChBA,QAAO,CAACoL,UAAR,CAAmBjtC,KAAnB,EAA0Bs8B,UAA1B,CAAqC,CAArC,CADgB,EAAlB,CADuB,EAAzB,EAKD,C,0CAEQsQ,K,CAAO,CACd,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKD,iBAAL,CAAuBnlC,WAAvB,6CACK,KAAKilC,MADV,EAEEp4C,CAAC,CAAE,KAAKo4C,MAAL,CAAYp4C,CAAZ,CAAgB,KAAKu4C,KAF1B,IAID,C,4DAEiBtuB,O,CAAS,CACzB,GAAMgT,OAAM,CAAG,KAAKib,WAAL,CAAiBr5B,IAAjB,CACb,mBAAG8Q,SAAH,OAAGA,QAAH,OAAkB1F,QAAO,CAAC0F,QAAR,GAAqBA,QAAvC,EADa,CAAf,CAIA,GAAI,CAACsN,MAAL,CAAa,CACX,MAAO,MAAP,CACD,CAEDA,MAAM,CAAC0b,SAAP,CAAiBlvC,OAAjB,CAAyB,mBAAGkC,MAAH,OAAGA,KAAH,CAAU6hC,OAAV,OAAUA,OAAV,CAAmB3P,OAAnB,OAAmBA,OAAnB,OACvB2P,QAAO,CAACoL,UAAR,CAAmBjtC,KAAnB,EAA0Bs8B,UAA1B,CAAqCpK,OAArC,CADuB,EAAzB,EAIA,MAAO,KAAP,CACD,C,sEAEsB5T,O,CAAS,gBAC9B,GAAI,KAAK4uB,iBAAL,CAAuB5uB,OAAvB,CAAJ,CAAqC,CACnC,OACD,CAED,GAAMqiB,UAAS,CAAGpsC,wBAAwB,CAAC,KAAKqQ,IAAL,CAAUyB,EAAV,CAAeiY,OAAO,CAAC0F,QAAxB,CAA1C,CACA,GAAMslB,OAAM,CAAG,KAAKoD,WAAL,CAAiBS,mBAAjB,CAAqC7uB,OAArC,CAAf,CAEA,GAAI0uB,UAAS,CAAG,EAAhB,CAEA,GAAMI,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/B,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,OAAQ/uB,OAAO,CAAC0F,QAAhB,EACE,IAAK,EAAL,CACE,MAAO,SAAP,CACF,IAAK,EAAL,CACE,MAAO,SAAP,CACF,IAAK,EAAL,CACE,MAAO,SAAP,CACF,IAAK,GAAL,CACE,MAAO,SAAP,CACF,IAAK,GAAL,CACE,MAAO,SAAP,CACF,IAAK,GAAL,CACE,MAAO,SAAP,CACF,IAAK,GAAL,CACE,MAAO,SAAP,CAdJ,CAgBD,CAjBD,CAmBA,GAAMrlB,KAAI,CAAG,GAAI7B,qBAAJ,CACX,GAAIA,4BAAJ,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,CADW,CAEX,GAAIA,kCAAJ,CAA4B,CAC1Bm1B,KAAK,CAAEob,QAAQ,EADW,CAE1BC,SAAS,CAAE,IAFe,CAA5B,CAFW,CAAb,CAQA,GAAMl4C,EAAC,CAAGk0C,MAAM,CAACzzC,KAAP,CACPH,GADO,CACH4zC,MAAM,CAACxzC,GADJ,EAEPqH,cAFO,CAEQ,GAFR,EAGPzH,GAHO,CAGH,KAAI,CAAC+2C,MAHF,CAAV,CAKA9tC,IAAI,CAACP,KAAL,CAAW4F,GAAX,CACEpQ,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWrC,CAAX,CAAe61C,MAAM,CAACzzC,KAAP,CAAapC,CAArC,CADF,CAEEG,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWnC,CAAX,CAAe21C,MAAM,CAACzzC,KAAP,CAAalC,CAArC,CAFF,CAGEC,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWzB,CAAX,CAAei1C,MAAM,CAACzzC,KAAP,CAAaxB,CAArC,CAHF,EAKAsK,IAAI,CAAC7C,QAAL,CAAckI,GAAd,CAAkB5O,CAAC,CAAC3B,CAApB,CAAuB2B,CAAC,CAACzB,CAAzB,CAA4ByB,CAAC,CAACf,CAAF,CAAM,KAAI,CAACu4C,KAAvC,EACA,KAAI,CAACtqC,KAAL,CAAW5M,GAAX,CAAeiJ,IAAf,EACD,CAxCD,CA0CA;AAEA,GAAM6qC,UAAS,CAAG,GAAIvmC,aAAJ,CAChBrP,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWrC,CAAX,CAAe61C,MAAM,CAACzzC,KAAP,CAAapC,CAArC,CADgB,CAEhBG,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWnC,CAAX,CAAe21C,MAAM,CAACzzC,KAAP,CAAalC,CAArC,CAFgB,CAGhBC,IAAI,CAACwE,GAAL,CAASkxC,MAAM,CAACxzC,GAAP,CAAWzB,CAAX,CAAei1C,MAAM,CAACzzC,KAAP,CAAaxB,CAArC,CAHgB,CAAlB,CAMA,GAAIk5C,MAAK,CACP35C,IAAI,CAAC+nB,IAAL,CAAW6tB,SAAS,CAAC/1C,CAAV,CAAc+1C,SAAS,CAAC71C,CAAzB,CAA8B,GAAxC,EACAC,IAAI,CAACuC,KAAL,CAAWwqC,SAAS,GAAK,CAAzB,CAFF,CAIA,MAAO4M,KAAK,EAAZ,CAAgB,CACd,GAAMn0C,OAAM,CAAG,GAAI6J,aAAJ,CACbumC,SAAS,CAAC/1C,CAAV,CAAcktC,SAAS,EADV,CAEb6I,SAAS,CAAC71C,CAAV,CAAcgtC,SAAS,EAFV,CAGb6I,SAAS,CAACn1C,CAAV,CAAcssC,SAAS,EAHV,CAAf,CAMA,GAAMjN,KAAI,CAAGiN,SAAS,GAAK,GAAd,CAAoB,GAAjC,CAEA,GAAM7kC,SAAQ,CAAGwtC,MAAM,CAACzzC,KAAP,CAAaH,GAAb,CAAiB0D,MAAjB,EAAyBqwC,IAAzB,CAA8B,CAA9B,CAAjB,CAEA,GAAMhxC,OAAM,CAAGkoC,SAAS,EAAxB,CACAqM,SAAS,wDACJA,SADI,+CAEJhC,wCAAU,CAAClvC,QAAD,CAAW43B,IAAX,CAAiB,KAAKiZ,iBAAtB,CAAyChM,SAAzC,CAAoD,IAApD,CAFN,EAAT,CAKAqM,SAAS,wDACJA,SADI,+CAEJQ,yCAAW,CAAC1xC,QAAD,CAAW43B,IAAX,CAAiB,KAAKiZ,iBAAtB,CAAyChM,SAAzC,CAAoD,IAApD,CAFP,EAAT,CAKA,GAAIloC,MAAM,CAAG,GAAb,CAAkB,CAChB,GAAIg1C,WAAU,CAAG75C,IAAI,CAACuC,KAAL,CAAWwqC,SAAS,GAAK,EAAzB,EAA+B,CAAhD,CAEA,MAAO8M,UAAU,EAAjB,CAAqB,CACnBT,SAAS,wDACJA,SADI,+CAEJU,yCAAW,CAAC5xC,QAAD,CAAW,KAAK6wC,iBAAhB,CAAmChM,SAAnC,CAA8C,IAA9C,CAFP,EAAT,CAID,CACF,CACF,CAED,KAAK4L,WAAL,CAAiBvuC,IAAjB,CAAsB,CACpBgmB,QAAQ,CAAE1F,OAAO,CAAC0F,QADE,CAEpBgpB,SAAS,CAATA,SAFoB,CAAtB,EAID,C,sCAEMn/B,O,CAAS,CACd,KAAK2+B,aAAL,EAAsB3+B,OAAO,CAACpT,KAA9B,CACA,KAAKkyC,iBAAL,CAAuBhF,MAAvB,6CAAmC95B,OAAnC,EAA4C/H,KAAK,CAAE,KAAK0mC,aAAxD,IACD,C,6CAGH,GAAMgB,0CAAW,CAAG,QAAdA,YAAc,CAAC1xC,QAAD,CAAW43B,IAAX,CAAiBiZ,iBAAjB,CAAoChM,SAApC,CAA+CjL,OAA/C,CAA2D,CAC7E,GAAIkW,WAAU,CAAG,CAAjB,CAEA,GAAI2B,MAAK,CAAG35C,IAAI,CAACuC,KAAL,CAAWwqC,SAAS,GAAK,CAAzB,EAA8B,CAA1C,CACA,GAAIqM,UAAS,CAAG,EAAhB,CAEAA,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdP,iBADH,CACqB1W,OADrB,EAEG4M,OAFH,CAEW,CAAC3B,SAAS,GAAK,CAAd,CAAkB,EAAnB,EAAyBjN,IAFpC,EAGG4I,UAHH,CAGc,GAHd,EAIG6F,QAJH,CAIY,CAAE5sC,CAAC,CAAE,CAAL,CAAQy/B,CAAC,CAAE,CAAX,CAAc7/B,CAAC,CAAE,CAAjB,CAJZ,EAKGqS,WALH,CAKe1L,QAAQ,CAAC6xC,QAAT,EALf,EAMGhL,UANH,CAMclB,YANd,EAOGe,QAPH,CAOY7B,SAAS,GAAK,GAP1B,CAO+B,CAACA,SAAS,GAAK,GAAf,EAAsB,IAPrD,EAQG8B,iBARH,CAQqBmJ,UARrB,EASGjkC,SATH,EAFO,EAAT,CAcA,MAAO4lC,KAAK,EAAZ,CAAgB,CACd,GAAM1B,YAAW,CAAGlL,SAAS,GAAK,IAAd,CAAqB,IAAzC,CACA,GAAMmL,UAAS,CAAGF,UAAU,CAAGC,WAA/B,CACA,GAAMG,aAAY,CAAGrL,SAAS,GAAK,IAAd,CAAqB,IAA1C,CAEA,GAAM7G,OAAM,CAAGgS,SAAS,CAAGE,YAA3B,CAEAgB,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdP,iBADH,CACqB1W,OADrB,EAEG4M,OAFH,CAEW,CAAC3B,SAAS,GAAK,EAAd,CAAmB,CAApB,EAAyBjN,IAFpC,EAGG6O,aAHH,CAGiB5B,SAAS,GAAK,KAAd,CAAsB,KAHvC,EAIGrE,UAJH,CAIc,CAJd,EAKG8F,SALH,CAKawJ,UALb,CAKyBC,WALzB,EAMGxJ,UANH,CAMcyJ,SANd,CAMyBE,YANzB,EAOG7J,QAPH,CAOY2I,2CAAa,EAPzB,EAQGtjC,WARH,CAQe1L,QAAQ,CAAC6xC,QAAT,EARf,EASGhL,UATH,CAScpB,WATd,EAUGiB,QAVH,CAUY7B,SAAS,GAAK,GAV1B,CAU+B,CAACA,SAAS,GAAK,GAAf,EAAsB,KAAtB,CAA8B,KAV7D,EAWG8B,iBAXH,CAWqBmJ,UAXrB,EAYGhJ,SAZH,CAYa9I,MAZb,EAaGnyB,SAbH,EAFO,EAAT,CAkBAikC,UAAU,EAAIjL,SAAS,GAAK,IAA5B,CACD,CAED,MAAOqM,UAAP,CACD,CAjDD,CAmDA,GAAMhC,yCAAU,CAAG,QAAbA,WAAa,CAAClvC,QAAD,CAAW43B,IAAX,CAAiBiZ,iBAAjB,CAAoChM,SAApC,CAA+CjL,OAA/C,CAA2D,CAC5E,GAAIkW,WAAU,CAAG,CAAjB,CAEA,GAAI2B,MAAK,CAAG35C,IAAI,CAACuC,KAAL,CAAWwqC,SAAS,GAAK,CAAzB,EAA8B,CAA1C,CACA,GAAIqM,UAAS,CAAG,EAAhB,CAEAA,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdP,iBADH,CACqB1W,OADrB,EAEG4M,OAFH,CAEW,CAAC3B,SAAS,GAAK,CAAd,CAAkB,EAAnB,EAAyBjN,IAFpC,EAGG4I,UAHH,CAGc,GAHd,EAIG6F,QAJH,CAIYyL,kDAAoB,EAJhC,EAKGpmC,WALH,CAKe1L,QAAQ,CAAC6xC,QAAT,EALf,EAMGhL,UANH,CAMclB,YANd,EAOGgB,iBAPH,CAOqBmJ,UAPrB,EAQGjkC,SARH,EAFO,EAAT,CAaAqlC,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdpF,WADH,CACe7R,OADf,EAEG4M,OAFH,CAEW,CAAC3B,SAAS,GAAK,CAAd,CAAkB,CAAnB,EAAwBjN,IAFnC,EAGG4I,UAHH,CAGc,GAHd,EAIG6F,QAJH,CAIY,CAAE5sC,CAAC,CAAE,CAAL,CAAQy/B,CAAC,CAAE,CAAX,CAAc7/B,CAAC,CAAE,CAAjB,CAJZ,EAKGqS,WALH,CAKe1L,QAAQ,CAAC6xC,QAAT,EALf,EAMGhL,UANH,CAMclB,YANd,EAOGgB,iBAPH,CAOqBmJ,UAPrB,EAQGjkC,SARH,EAFO,EAAT,CAaA,MAAO4lC,KAAK,EAAZ,CAAgB,CACd,GAAM1B,YAAW,CAAGlL,SAAS,GAAK,GAAlC,CACA,GAAMmL,UAAS,CAAGF,UAAU,CAAGC,WAA/B,CACA,GAAMG,aAAY,CAAGrL,SAAS,GAAK,IAAd,CAAqB,GAA1C,CAEA,GAAM7G,OAAM,CAAGgS,SAAS,CAAGE,YAA3B,CAEA,GAAM6B,YAAW,CAAG/xC,QAAQ,CAACpG,GAAT,CAClB,GAAIuN,aAAJ,CAAW09B,SAAS,GAAK,GAAzB,CAA8BA,SAAS,GAAK,GAA5C,CAAiDA,SAAS,GAAK,GAA/D,EACGzhC,SADH,GAEG/B,cAFH,CAEkBwjC,SAAS,GAAK,CAAd,CAAkBjN,IAFpC,CADkB,CAApB,CAMAsZ,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdpF,WADH,CACe7R,OADf,EAEG4M,OAFH,CAEW,CAAC3B,SAAS,GAAK,EAAd,CAAmB,CAApB,EAAyBjN,IAFpC,EAGG6O,aAHH,CAGiB,CAAC,KAHlB,EAIGjG,UAJH,CAIc,GAJd,EAKG8F,SALH,CAKawJ,UALb,CAKyBC,WALzB,EAMGxJ,UANH,CAMcyJ,SANd,CAMyBE,YANzB,EAOG7J,QAPH,CAOYyL,kDAAoB,EAPhC,EAQGpmC,WARH,CAQeqmC,WAAW,CAACF,QAAZ,EARf,EASGhL,UATH,CASclB,YATd,EAUGe,QAVH,CAUY7B,SAAS,GAAK,GAV1B,CAU+B,CAACA,SAAS,GAAK,GAAf,EAAsB,GAVrD,EAWG8B,iBAXH,CAWqBmJ,UAXrB,EAYGhJ,SAZH,CAYa9I,MAZb,EAaGnyB,SAbH,EAFO,EAAT,CAkBAikC,UAAU,EAAIjL,SAAS,GAAK,IAA5B,CACD,CAED,MAAOqM,UAAP,CACD,CAnED,CAqEA,GAAMU,0CAAW,CAAG,QAAdA,YAAc,CAAC5xC,QAAD,CAAW6wC,iBAAX,CAA8BhM,SAA9B,CAAyCjL,OAAzC,CAAqD,CACvE,GAAMkW,WAAU,CAAG,CAAnB,CACA,GAAMC,YAAW,CAAG,GAApB,CACA,GAAMC,UAAS,CAAGF,UAAU,CAAGC,WAA/B,CACA,GAAMG,aAAY,CAAGrL,SAAS,GAAK,IAAd,CAAqB,GAA1C,CACA,GAAIqM,UAAS,CAAG,EAAhB,CAEA,GAAM7lC,SAAQ,CAAG,GAAIlE,aAAJ,CACf09B,SAAS,GAAK,GADC,CAEfA,SAAS,GAAK,GAFC,CAGfA,SAAS,GAAK,GAHC,EAKdzhC,SALc,GAMd/B,cANc,CAMC,MAAQwjC,SAAS,GAAK,KANvB,CAAjB,CAQA,GAAM7G,OAAM,CAAGgS,SAAS,CAAGE,YAA3B,CAEAgB,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdpF,WADH,CACe7R,OADf,EAEG4M,OAFH,CAEW,CAFX,EAGGC,aAHH,CAGiB,CAAC,KAHlB,EAIGjG,UAJH,CAIc,GAJd,EAKG8F,SALH,CAKawJ,UALb,CAKyBC,WALzB,EAMGxJ,UANH,CAMcyJ,SANd,CAMyBE,YANzB,EAOG7J,QAPH,CAOYyL,kDAAoB,EAPhC,EAQGpmC,WARH,CAQe1L,QAAQ,CAAC6xC,QAAT,EARf,EASGhL,UATH,CASclB,YATd,EAUGgB,iBAVH,CAUqBmJ,UAVrB,EAWGhJ,SAXH,CAWa9I,MAXb,EAYGryB,WAZH,CAYeN,QAZf,EAaGQ,SAbH,EAFO,EAAT,CAkBAqlC,SAAS,wDACJA,SADI,GAEPL,iBAAiB,CACdpF,WADH,CACe7R,OADf,EAEG4M,OAFH,CAEW,CAFX,EAGGC,aAHH,CAGiB,CAAC,KAHlB,EAIGjG,UAJH,CAIc,CAJd,EAKG8F,SALH,CAKawJ,UALb,CAKyBC,WALzB,EAMGxJ,UANH,CAMcyJ,SANd,CAMyBE,YANzB,EAOG7J,QAPH,CAOY,CAAE5sC,CAAC,CAAE,CAAL,CAAQy/B,CAAC,CAAE,CAAX,CAAc7/B,CAAC,CAAE,CAAjB,CAPZ,EAQGqS,WARH,CAQe1L,QAAQ,CAAC6xC,QAAT,EARf,EASGhL,UATH,CASclB,YATd,EAUGgB,iBAVH,CAUqBmJ,UAVrB,EAWGhJ,SAXH,CAWa9I,MAXb,EAYGryB,WAZH,CAYeN,QAZf,EAaGQ,SAbH,EAFO,EAAT,CAkBA,MAAOqlC,UAAP,CACD,CAtDD,CAwDA,GAAMY,mDAAoB,CAAG,QAAvBA,qBAAuB,EAAM,CACjC,MAAO,IAAI9wC,sBAAJ,GAAkB+tC,MAAlB,CACL,CADK,CAEL,CAAC,IAAMj3C,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,CAAP,EAAyC,GAFpC,CAGL7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,EAAiC,GAH5B,CAAP,CAKD,CAND,CAQA,GAAMmyC,6CAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,MAAO,IAAI9tC,sBAAJ,GAAkB+tC,MAAlB,CACL,CADK,CAEL,CAAC,IAAMj3C,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,EAA3B,CAAP,EAAyC,GAFpC,CAGL7E,IAAI,CAACuC,KAAL,CAAWvC,IAAI,CAAC6E,MAAL,GAAgB,GAA3B,EAAkC,GAH7B,CAAP,CAKD,CAND,CAQA,GAAMqyC,4CAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAI11C,EAAC,CAAG,CAACxB,IAAI,CAAC6E,MAAL,GAAgB,EAAhB,CAAqB,EAAtB,EAA4B,GAApC,CACA,MAAO,IAAIqE,sBAAJ,GAAkB+tC,MAAlB,CAAyBz1C,CAAzB,CAA4BA,CAA5B,CAA+BA,CAAC,CAAG,IAAnC,CAAP,CACD,CAHD,CAKek3C,mIAAf,E;;GClXMwB,sB,yBACJ,oBAAYlpC,IAAZ,CAAkBtC,KAAlB,CAAyB,2EACvB,KAAKyrC,MAAL,CAAcnpC,IAAI,CAACyB,EAAnB,CACA,KAAKzB,IAAL,CAAYA,IAAZ,CACA,KAAKopC,eAAL,CAAuB,EAAvB,CAEA,KAAKC,OAAL,CAAe,IAAf,CAEA,KAAK3rC,KAAL,CAAaA,KAAb,CACA,KAAK0vB,IAAL,CAAY,GAAIl1B,yBAAJ,EAAZ,CACA;AACA;AACA,KAAKoxC,UAAL,CAAkB,IAAlB,CACA,KAAKC,aAAL,CAAqB,EAArB,CAEA,KAAKC,uBAAL,CAA+B,IAA/B,CACA,KAAKC,kBAAL,CAA0B,GAAI7c,QAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACzD,KAAI,CAAC0c,uBAAL,CAA+B3c,OAA/B,CACD,CAFyB,CAA1B,CAIA,KAAK6c,OAAL,CAAe,IAAf,CACA,KAAKC,UAAL,CAAkB,EAAlB,CACA,KAAKC,kBAAL,CAA0B,GAAI1xC,yBAAJ,EAA1B,CACA,KAAK2xC,eAAL,CAAuB,IAAvB,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAKC,YAAL,CAAoB,IAApB,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CACA,KAAKC,IAAL,CAAY,IAAZ,CAEA,KAAKC,aAAL,CAAqB,EAArB,CACA,KAAKC,cAAL,CAAsB,GAAtB,CACA,KAAKjzC,QAAL,CAAgB,CAAErI,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAjB,CAAhB,CACA,KAAKu4C,KAAL,CAAa,IAAb,CAEA,KAAKoC,MAAL,CAAc,KAAd,CAEA,KAAKC,gBAAL,CAAwB,EAAxB,CAEA,KAAKC,KAAL,CAAa,KAAb,CACA,KAAKC,mBAAL,CAA2B,IAA3B,CACA,KAAKjd,OAAL,CAAe,CAAf,CAEA,KAAK+C,QAAL,CAAgB,CAAhB,CACA,KAAKnsB,IAAL,CAAY,CAAZ,CACA,KAAKqzB,UAAL,CAAkB,CAAE1oC,CAAC,CAAE,GAAL,CAAUE,CAAC,CAAE,GAAb,CAAlB,CACA,KAAK84C,MAAL,CAAc,CAAEh5C,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAd,CACA,KAAKy7C,kBAAL,CAA0B,IAA1B,CAEA,KAAKC,qBAAL,CAA6B,GAAIjH,4BAAJ,CAA0BxjC,IAA1B,CAA7B,CACA,KAAK0qC,6BAAL,CAAqC,GAAIhD,oCAAJ,CACnC1nC,IADmC,CAArC,CAIA,KAAK2qC,eAAL,CAAqB,KAAK3qC,IAA1B,EACD,C,qGAEanB,M,CAAQ,iBACpB,KAAKyqC,UAAL,CAAkBzqC,MAAlB,CAEA,GAAI,KAAKwqC,OAAT,CAAkB,CAChBxqC,MAAM,CAACnB,KAAP,CAAaiB,QAAb,CAAsBzF,OAAtB,CAA8B,SAACk0B,IAAD,CAAU,CACtCA,IAAI,CAACd,QAAL,CAAc+c,OAAd,CAAwB,MAAI,CAACA,OAA7B,CACAjc,IAAI,CAACd,QAAL,CAAcse,SAAd,CAA0B,GAA1B,CACAxd,IAAI,CAACd,QAAL,CAAc+c,OAAd,CAAsBwB,KAAtB,CAA8B,KAA9B,CACAzd,IAAI,CAACd,QAAL,CAAcmC,WAAd,CAA4B,IAA5B,CACD,CALD,EAMD,CAED,KAAK6a,UAAL,CAAgB7d,QAAhB,CAAyB,SAACqf,KAAD,CAAW,CAClCA,KAAK,CAAC5tC,QAAN,CAAiB,CAAEC,IAAI,CAAE,MAAR,CAAjB,CACD,CAFD,EAIA0B,MAAM,CAACksC,KAAP,CAAa,KAAK3d,IAAlB,EACA,KAAKoc,uBAAL,CAA6B,IAA7B,EACD,C,qCAEO,CACN,MAAO,IAAIwB,sBAAW,CAAC,KAAKhrC,IAAL,CAAU0nB,SAAX,CAAf,CAAqC,KAAK1nB,IAA1C,CAAgD,KAAKtC,KAArD,CAAP,CACD,C,wDAEesC,I,CAAM,CACpB,KAAKA,IAAL,CAAYA,IAAZ,CACD,C,+CAEY,iBACX,GAAI,KAAKgoC,KAAL,GAAe,IAAnB,CAAyB,CACvB,KAAKA,KAAL,CAAa,KAAKkC,aAAlB,CACD,CAED,GAAM5c,QAAO,CAAG,GAAhB,CAEA,KAAK2c,IAAL,CAAY,GAAIpR,cAAJ,CAAS,KAAKzL,IAAd,CAAoB,CAC9Bn8B,KAAK,CAAE,CAAEpC,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,CAAjB,CADuB,CAE9ByB,GAAG,CAAE,CAAErC,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAcU,CAAC,CAAE,KAAKy6C,aAAtB,CAFyB,CAG9B3sC,KAAK,CAAE,CAHuB,CAI9B8vB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAJuB,CAK9Bo1B,OAAO,CAAE,GALqB,CAApB,CAAZ,CAOA,KAAK2c,IAAL,CAAU3O,IAAV,GAEA,KAAK0O,kBAAL,CAA0B,GAAIrS,0BAAJ,CACxB,CAAEp6B,KAAK,CAAE,KAAK0tC,iBAAd,CAAiCluC,MAAM,CAAE,KAAKkuC,iBAA9C,CADwB,CAExB,KAAKf,aAFmB,CAGxB5c,OAHwB,CAA1B,CAMA;AACA,GAAM+N,OAAM,CAAG,GAAI7E,qBAAJ,CAAkB,GAAIn4B,aAAJ,CAAW,CAAX,CAAc,CAAd,CAAlB,EACZq5B,UADY,CACD,GADC,EAEZkE,oBAFY,CAES,CAFT,CAAf,CAGA,KAAK+N,UAAL,CAAgBvwC,IAAhB,CAAqBiiC,MAArB,EACA,KAAKuO,kBAAL,CAAwB94C,GAAxB,CAA4BuqC,MAAM,CAACjO,IAAnC,EACA;AAEA,KAAKwc,kBAAL,CAAwBra,OAAxB,CAAkC,KAAlC,CAEA,KAAKma,OAAL,CAAe,GAAIxO,kBAAJ,CAAgB,IAAhB,CAAf,CACA,KAAKwO,OAAL,CAAaqB,KAAb,CAAmB,KAAK3d,IAAxB,EAEA,KAAKA,IAAL,CAAUt8B,GAAV,CAAc,KAAK84C,kBAAnB,EACA;;;;;MApCW,CA2CX;;;;;;;MA3CW,CAoDX;AACA;AAEA,GAAMpB,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/B,GAAMzuC,KAAI,CAAG,GAAI7B,qBAAJ,CACX,GAAIA,4BAAJ,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,CADW,CAEX,GAAIA,kCAAJ,CAA4B,CAC1Bm1B,KAAK,CAAE,QADmB,CAE1Bqb,SAAS,CAAE,IAFe,CAA5B,CAFW,CAAb,CAQA3uC,IAAI,CAACP,KAAL,CAAW4F,GAAX,CAAe,MAAI,CAACm4B,UAAL,CAAgB1oC,CAA/B,CAAkC,MAAI,CAAC0oC,UAAL,CAAgBxoC,CAAlD,CAAqD,MAAI,CAACwoC,UAAL,CAAgB9nC,CAArE,EACAsK,IAAI,CAAC7C,QAAL,CAAckI,GAAd,CACE,MAAI,CAACyoC,MAAL,CAAYh5C,CADd,CAEE,MAAI,CAACg5C,MAAL,CAAY94C,CAFd,CAGE,MAAI,CAAC84C,MAAL,CAAYp4C,CAAZ,CAAgB,MAAI,CAACu4C,KAHvB,EAKA,MAAI,CAAC4B,kBAAL,CAAwB94C,GAAxB,CAA4BiJ,IAA5B,EACD,CAhBD,CAkBA;AAEA,GAAMguC,kBAAiB,CAAG,GAAIxG,kCAAJ,CACxB,KAAKqI,kBADmB,CAExB,IAFwB,CAA1B,CAKA,KAAKa,qBAAL,CAA2Bt2B,IAA3B,CAAgC,KAAKojB,UAArC,EACA,KAAKmT,6BAAL,CAAmCv2B,IAAnC,CACE,KAAKs2B,qBADP,CAEE1C,iBAFF,CAGE,KAAKC,KAHP,CAIE,KAAKH,MAJP,CAKE,KAAK+B,kBALP,EAOA,KAAKlsC,KAAL,CAAW5M,GAAX,CAAe,KAAKs8B,IAApB,EACA,KAAKkO,IAAL,GACD,C,8JAEkBtY,G,CAAKC,I,CAAMtgB,O,6JACtB,MAAK8mC,kB,QAEX,GAAI,CAAC,KAAKM,YAAV,CAAwB,CAChBxS,UADgB,CACH,KAAKiT,kBAAL,EAA2B,KAAKjT,UAD7B,CAEhBp8B,GAFgB,CAEVo8B,UAAU,CAAC1oC,CAAX,CAAe0oC,UAAU,CAACxoC,CAA1B,CAA8BwoC,UAAU,CAAC1oC,CAAzC,CAA6C0oC,UAAU,CAACxoC,CAF9C,CAItB,KAAKg7C,YAAL,CAAoB,GAAIzS,oBAAJ,CAClB,CAAE/5B,KAAK,CAAEpC,GAAG,CAAG,GAAf,CAAoB4B,MAAM,CAAE5B,GAAG,CAAG,GAAlC,CADkB,CAElB,KAAK6sC,KAFa,CAGlBzQ,UAHkB,CAApB,CAKA,KAAKwS,YAAL,CAAkBnnC,WAAlB,CAA8B,KAAKilC,MAAnC,EACA,KAAK+B,kBAAL,CAAwB94C,GAAxB,CAA4B,KAAKi5C,YAAL,CAAkB3c,IAA9C,EACA,KAAK2c,YAAL,CAAkBzO,IAAlB,GACD,CAED,KAAKyO,YAAL,CAAkB1b,MAAlB,CAAyBrL,GAAzB,CAA8BC,IAA9B,CAAoCtgB,OAApC,EACA,KAAKonC,YAAL,CAAkBlO,IAAlB,G,idAIM,MAAK4N,kB,QACX,KAAKM,YAAL,CAAkBzO,IAAlB,G,kMAGO,CACP,KAAKZ,UAAL,GACD,C,6JAEiB7rC,C,CAAGE,C,wHACnB,GAAI,MAAOF,EAAP,GAAa,QAAjB,CAA2B,CACzBE,CAAC,CAAGF,CAAC,CAACE,CAAN,CACAF,CAAC,CAAGA,CAAC,CAACA,CAAN,CACD,CAED,KAAKqI,QAAL,CAAgB,CAAErI,CAAC,CAADA,CAAF,CAAKE,CAAC,CAADA,CAAL,CAAQU,CAAC,CAAE,CAAX,CAAhB,CAEA,GAAI,KAAK29B,IAAT,CAAe,CACb,KAAKA,IAAL,CAAUl2B,QAAV,CAAmBkI,GAAnB,CAAuBvQ,CAAvB,CAA0BE,CAA1B,CAA6B,CAA7B,EACD,C,uBAEK,MAAK06C,kB,QACX,KAAKH,UAAL,CAAgBzqC,MAAhB,CAAuB3H,QAAvB,CAAgCkI,GAAhC,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,KAAK4oC,KAA/C,E,yMAGOv4C,C,CAAG,CACV,KAAKu4C,KAAL,CAAav4C,CAAb,CACA,KAAKmT,WAAL,CAAiB,KAAK1L,QAAtB,EACA,KAAKwzC,6BAAL,CAAmCQ,QAAnC,CAA4Cz7C,CAA5C,EACD,C,iDAEa,CACZ,MAAO,IAAI4O,aAAJ,CAAW,KAAKnH,QAAhB,CAAP,CACD,C,8TAGO,MAAKuyC,kB,QAEX,KAAKH,UAAL,CAAgBzqC,MAAhB,CAAuBswB,UAAvB,CAAkCgc,gBAAlC,CACE,GAAIjzC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CADF,CAEEhF,cAAc,CAAC,KAAKm9B,QAAN,CAFhB,EAKM+a,a,CAAgB,GAAIlzC,2BAAJ,E,CACtBkzC,aAAa,CACVD,gBADH,CAEI,GAAIjzC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EAA2BoC,SAA3B,EAFJ,CAGIpH,cAAc,CAAC,KAAKgR,IAAN,CAHlB,EAKG5J,SALH,GAOA,KAAKgvC,UAAL,CAAgBzqC,MAAhB,CAAuBswB,UAAvB,CAAkCsL,QAAlC,CAA2C2Q,aAA3C,EACA,KAAKxB,kBAAL,CAAwBvZ,QAAxB,CAAiC5gC,CAAjC,CAAqCyD,cAAc,CAAC,KAAKm9B,QAAN,CAAnD,CACA,KAAKqZ,OAAL,CAAalE,WAAb,CAAyB,KAAKnV,QAA9B,E,iTAGcA,Q,6HACV,KAAKA,QAAL,GAAkBA,Q,oEAItB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKmV,WAAL,G,kMAGU,CACV,MAAO,CAAC,KAAKnV,QAAb,CACD,C,qJAEansB,I,6HACR,KAAKA,IAAL,GAAcA,I,oEAIlB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKshC,WAAL,G,wLAGQ,CACR,MAAO,MAAKthC,IAAZ,CACD,C,2JAEgBopB,O,+IACT,MAAKmc,kB,QACX,KAAKnc,OAAL,CAAeA,OAAf,CACA,KAAK+d,cAAL,CAAoB/d,OAApB,E,mMAGS,CACT,GAAI,CAAC,KAAKgc,UAAV,CAAsB,CACpB,OACD,CAED,KAAKA,UAAL,CAAgBzqC,MAAhB,CAAuB0wB,OAAvB,CAAiC,KAAjC,CACD,C,2CAEU,CACT,GAAI,CAAC,KAAK+Z,UAAV,CAAsB,CACpB,OACD,CAED,KAAKA,UAAL,CAAgBzqC,MAAhB,CAAuB0wB,OAAvB,CAAiC,IAAjC,CACD,C,mCAEM,CACL,GAAI,KAAK6a,MAAT,CAAiB,CACf,OACD,CAED,KAAK1sC,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACA,KAAKgd,MAAL,CAAc,IAAd,CACD,C,mCAEM,CACL,GAAI,CAAC,KAAKA,MAAV,CAAkB,CAChB,OACD,CAED,KAAK1sC,KAAL,CAAW5M,GAAX,CAAe,KAAKs8B,IAApB,EACA,KAAKgd,MAAL,CAAc,KAAd,CACD,C,kEAEoBja,K,CAAO,CAAE,CAE9B;;;;;;4CAQS5yB,K,CAAOR,M,CAAQ,CAAE,C,sDAEXiF,K,CAAO,CAAE,C,sDAETA,K,CAAO,CAAE,C,kEAEHsrB,O,CAAS,CAAE,CAEhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+KAkC0Bge,K,CAAO3e,M,wIAC/B2e,KAAK,CAAG,GAAG5vC,MAAH,CAAU4vC,KAAV,CAAR,C,uBAEM,MAAK7B,kB,QAEX6B,KAAK,CAACpyC,OAAN,CAAc,cAAkB,IAAf4F,KAAe,MAAfA,IAAe,CAAT2C,EAAS,MAATA,EAAS,CAC9B,GAAM8pC,KAAI,CAAG,MAAI,CAACjC,UAAL,CAAgB5rC,KAAhB,CAAsBiB,QAAtB,CAA+B2P,IAA/B,CAAoC,SAACw8B,KAAD,CAAW,CAC1D,GAAI,CAACA,KAAK,CAAChsC,IAAX,CAAiB,CACf,MAAO,MAAP,CACD,CAED,GAAIgsC,KAAK,CAAChsC,IAAN,GAAeA,IAAnB,CAAyB,CACvB,MAAO,KAAP,CACD,CACF,CARY,CAAb,CAUA,GAAI,CAACysC,IAAL,CAAW,CACT,OACD,CAED,GAAI,CAAC5e,MAAL,CAAa,CACX,MAAI,CAAC2c,UAAL,CAAgB5rC,KAAhB,CAAsB8xB,MAAtB,CAA6B+b,IAA7B,EACA,OACD,CAED,GAAMC,UAAS,CAAG7e,MAAM,CAACr0B,KAAP,GAAemzC,KAAf,CAAqBhqC,EAArB,CAAlB,CACA+pC,SAAS,CAAC3sC,MAAV,CAAiB3H,QAAjB,CAA0Bi1B,IAA1B,CAA+Bof,IAAI,CAACr0C,QAApC,EACAs0C,SAAS,CAAC3sC,MAAV,CAAiBwxB,QAAjB,CAA0BlE,IAA1B,CAA+Bof,IAAI,CAAClb,QAApC,EACAmb,SAAS,CAAC3sC,MAAV,CAAiBswB,UAAjB,CAA4BhD,IAA5B,CAAiCof,IAAI,CAACpc,UAAtC,EACA,MAAI,CAACma,UAAL,CAAgB5rC,KAAhB,CAAsB8xB,MAAtB,CAA6B+b,IAA7B,EACAC,SAAS,CAACT,KAAV,CAAgB,MAAI,CAACzB,UAAL,CAAgBzqC,MAAhC,EAEA,MAAI,CAAC0qC,aAAL,CAAmBnwC,IAAnB,CAAwBoyC,SAAxB,EACA,MAAI,CAACpC,eAAL,CAAqB3nC,EAArB,EAA2B8pC,IAAI,CAACr0C,QAAhC,CACD,CA7BD,E,2VAgCmBo2B,O,+IACb,MAAKmc,kB,QAEX,KAAKH,UAAL,CAAgB7d,QAAhB,CAAyB,SAACqf,KAAD,CAAW,CAClCA,KAAK,CAACxe,QAAN,CAAeuB,WAAf,CAA6B,IAA7B,CACAid,KAAK,CAACxe,QAAN,CAAegB,OAAf,CAAyBA,OAAzB,CACAwd,KAAK,CAACxe,QAAN,CAAemC,WAAf,CAA6B,IAA7B,CACD,CAJD,E,2eAQM,MAAKgb,kB,QAEX,KAAKH,UAAL,CAAgB7d,QAAhB,CAAyB,SAACqf,KAAD,CAAW,CAClCA,KAAK,CAACxe,QAAN,CAAegB,OAAf,CAAyB,MAAI,CAACA,OAA9B,CACAwd,KAAK,CAACxe,QAAN,CAAemC,WAAf,CAA6B,IAA7B,CACD,CAHD,E,oNAMYpB,K,CAAO,CACnB,KAAKkd,mBAAL,CAA2Bld,KAA3B,CACA,KAAKqe,eAAL,CAAqBre,KAArB,EACA,KAAKgd,gBAAL,CAAwB,EAAxB,CACD,C,sKAEqBhd,K,oKACd,MAAKoc,kB,QAEX,KAAKH,UAAL,CAAgB7d,QAAhB,CAAyB,SAACqf,KAAD,CAAW,CAClC,GAAMa,YAAW,CAAG,MAAI,CAACtB,gBAAL,CAAsB/7B,IAAtB,CAClB,SAACq9B,WAAD,QAAiBA,YAAW,CAAC9sC,MAAZ,GAAuBisC,KAAxC,EADkB,CAApB,CAIA,GAAI,CAACa,WAAL,CAAkB,CAChB,MAAI,CAACtB,gBAAL,CAAsBjxC,IAAtB,CAA2B,CACzByF,MAAM,CAAEisC,KADiB,CAEzBzd,KAAK,CAAEyd,KAAK,CAACxe,QAAN,CAAesf,QAFG,CAGzB9xC,GAAG,CAAEgxC,KAAK,CAACxe,QAAN,CAAeuf,WAHK,CAA3B,EAKD,CAEDf,KAAK,CAACxe,QAAN,CAAeuf,WAAf,CAA6B,IAA7B,CACAf,KAAK,CAACxe,QAAN,CAAesf,QAAf,CAA0Bve,KAA1B,CACAyd,KAAK,CAACxe,QAAN,CAAemC,WAAf,CAA6B,IAA7B,CACD,CAhBD,E,kfAoBM,MAAKgb,kB,QACX,KAAKH,UAAL,CAAgB7d,QAAhB,CAAyB,SAACqf,KAAD,CAAW,CAClC,GAAMa,YAAW,CAAG,MAAI,CAACtB,gBAAL,CAAsB/7B,IAAtB,CAClB,SAACq9B,WAAD,QAAiBA,YAAW,CAAC9sC,MAAZ,GAAuBisC,KAAxC,EADkB,CAApB,CAIA,GAAI,MAAI,CAACP,mBAAT,CAA8B,CAC5BO,KAAK,CAACxe,QAAN,CAAeuf,WAAf,CAA6B,IAA7B,CACAf,KAAK,CAACxe,QAAN,CAAesf,QAAf,CAA0B,MAAI,CAACrB,mBAA/B,CACAO,KAAK,CAACxe,QAAN,CAAemC,WAAf,CAA6B,IAA7B,CACD,CAJD,IAIO,IAAIkd,WAAJ,CAAiB,CACtBb,KAAK,CAACxe,QAAN,CAAeuf,WAAf,CAA6BF,WAAW,CAAC7xC,GAAzC,CACAgxC,KAAK,CAACxe,QAAN,CAAesf,QAAf,CAA0BD,WAAW,CAACte,KAAtC,CACAyd,KAAK,CAACxe,QAAN,CAAemC,WAAf,CAA6B,IAA7B,CACD,CACF,CAdD,E,qNAiBWvM,I,CAAM,CACjB,KAAKooB,KAAL,CAAa,IAAb,CACA;AACA;AACD,C,gLAE0Bjd,K,oJACnB,MAAKoc,kB,QAEX,KAAKqC,aAAL,CAAmBze,KAAnB,EACA,KAAKsc,UAAL,CAAgBzwC,OAAhB,CAAwB,SAAC6yC,SAAD,QACtBA,UAAS,CAACpQ,eAAV,CAA0B,GAAIzjC,sBAAJ,CAAgBm1B,KAAhB,CAA1B,CADsB,EAAxB,E,yOAKUA,K,CAAO,CACjB,KAAKqc,OAAL,CAAa/N,eAAb,CAA6BtO,KAA7B,EAAoCuO,oBAApC,CAAyD,CAAzD,EAA4DC,IAA5D,GACA,KAAKmQ,QAAL,GACD,C,iDAEa,CACZ,KAAKtC,OAAL,CAAapO,IAAb,GACA,KAAK2Q,QAAL,GACD,C,iDAEa,CACZ,MAAO,MAAK3B,KAAZ,CACD,C,sCAEM4B,a,CAAe,CACpB,KAAK3C,aAAL,CAAmBrwC,OAAnB,CAA2B,SAAC2F,MAAD,QAAYA,OAAM,CAACkkC,MAAP,CAAcmJ,aAAd,CAAZ,EAA3B,EACA,KAAKxB,6BAAL,CAAmC3H,MAAnC,CAA0CmJ,aAA1C,EACD,C,gEAEmB/lC,M,CAAQrH,I,CAAM,CAChC,GAAMD,OAAM,CAAG,KAAK0qC,aAAL,CAAmBj7B,IAAnB,CAAwB,SAACzP,MAAD,QAAYA,OAAM,CAAC4C,EAAP,GAAc0E,MAAM,CAAC1E,EAAjC,EAAxB,CAAf,CAEA,GAAI,CAAC5C,MAAL,CAAa,CACX,OACD,CAED;AACAA,MAAM,CAACstC,aAAP,CAAqBrtC,IAArB,EACD,C,8DAEkBqH,M,CAAQrH,I,CAAM0uB,I,CAAM,CACrC,GAAM3uB,OAAM,CAAG,KAAK0qC,aAAL,CAAmBj7B,IAAnB,CAAwB,SAACzP,MAAD,QAAYA,OAAM,CAAC4C,EAAP,GAAc0E,MAAM,CAAC1E,EAAjC,EAAxB,CAAf,CAEA,GAAI,CAAC5C,MAAL,CAAa,CACX,OACD,CAED;AACAA,MAAM,CAACutC,YAAP,CAAoBttC,IAApB,CAA0B0uB,IAA1B,EACD,C,sEAEsBrnB,M,CAAQrH,I,CAAM,CACnC,GAAMD,OAAM,CAAG,KAAK0qC,aAAL,CAAmBj7B,IAAnB,CAAwB,SAACzP,MAAD,QAAYA,OAAM,CAAC4C,EAAP,GAAc0E,MAAM,CAAC1E,EAAjC,EAAxB,CAAf,CAEA,GAAI,CAAC5C,MAAL,CAAa,CACX,OACD,CAED;AACAA,MAAM,CAACwtC,gBAAP,CAAwBvtC,IAAxB,EACD,C,mDAEc,CACb,GAAMwtC,aAAY,CAAG,KAAK1zB,WAAL,EAArB,CACA,GAAM2zB,WAAU,CAAG,KAAKrrB,SAAL,EAAnB,CACA,GAAM8G,UAAS,CAAGt0B,gBAAgB,CAAC64C,UAAD,CAAlC,CAEA,MAAO,MAAKvsC,IAAL,CACJwsC,YADI,CACSxkB,SADT,EAEJluB,GAFI,CAEA,SAACwB,GAAD,QAASpB,0BAAmB,CAACC,aAApB,CAAkCmB,GAAlC,EAAuCxK,GAAvC,CAA2Cw7C,YAA3C,CAAT,EAFA,CAAP,CAGD,C,6CAEW,CACV,GAAMG,MAAK,CAAG,KAAKC,YAAL,EAAd,CAEA,GAAMC,OAAM,CAAG,GAAItuC,aAAJ,EAAf,CACA,GAAMuuC,QAAO,CAAG,GAAIvuC,aAAJ,EAAhB,CAEAouC,KAAK,CAACvzC,OAAN,CAAc,SAAChC,QAAD,CAAc,CAC1B,GAAIA,QAAQ,CAACrI,CAAT,CAAa89C,MAAM,CAAC99C,CAAxB,CAA2B,CACzB89C,MAAM,CAAC99C,CAAP,CAAWqI,QAAQ,CAACrI,CAApB,CACD,CAED,GAAIqI,QAAQ,CAACnI,CAAT,CAAa49C,MAAM,CAAC59C,CAAxB,CAA2B,CACzB49C,MAAM,CAAC59C,CAAP,CAAWmI,QAAQ,CAACnI,CAApB,CACD,CAED,GAAImI,QAAQ,CAACrI,CAAT,CAAa+9C,OAAO,CAAC/9C,CAAzB,CAA4B,CAC1B+9C,OAAO,CAAC/9C,CAAR,CAAYqI,QAAQ,CAACrI,CAArB,CACD,CAED,GAAIqI,QAAQ,CAACnI,CAAT,CAAa69C,OAAO,CAAC79C,CAAzB,CAA4B,CAC1B69C,OAAO,CAAC79C,CAAR,CAAYmI,QAAQ,CAACnI,CAArB,CACD,CACF,CAhBD,EAkBA,MAAO49C,OAAM,CAAC77C,GAAP,CAAW87C,OAAX,EAAoBr0C,cAApB,CAAmC,GAAnC,CAAP,CACD,C,0BAGY2wC,0EAAf,E;;ACllBA;GAEM2D,gB,6FACJ,iBAAY7sC,IAAZ,CAAkBtC,KAAlB,CAAyB,mEACvB,6HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAK/b,MAAL,GAJuB,aAKxB,C,qFAEQ,iBACP,sHAEAv5B,MAAM,CAACi4C,MAAP,CAActgB,UAAd,CAAyB,4BAAzB,CAAuD,SAAA3tB,MAAM,CAAI,CAC/DhK,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,2BAJF,EAOA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,yBAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,yBAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,yBAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,yBAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,IAHF,CAIE,yBAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,4BAHF,CAIE,2BAJF,EAMA9J,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,EAFF,CAGE,4BAHF,CAIE,2BAJF,EAOAE,MAAM,CAACrF,KAAP,CAAa4F,GAAb,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACA,MAAI,CAAC4tC,aAAL,CAAqB,CAAEn+C,CAAC,CAAE,EAAL,CAASE,CAAC,CAAE,EAAZ,CAAgBU,CAAC,CAAE,CAAnB,CAArB,CACA,MAAI,CAAC65C,UAAL,CAAkBzqC,MAAlB,CACA,MAAI,CAAC2mC,WAAL,CAAiB,MAAI,CAACnV,QAAL,CAAcxhC,CAA/B,CAAkC,MAAI,CAACwhC,QAAL,CAActhC,CAAhD,CAAmD,MAAI,CAACshC,QAAL,CAAc5gC,CAAjE,EACA,MAAI,CAAC29B,IAAL,CAAUt8B,GAAV,CAAc,MAAI,CAACw4C,UAAnB,EACAzqC,MAAM,CAAC3H,QAAP,CAAgBkI,GAAhB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,MAAI,CAAC4oC,KAA/B,EACD,CAzDD,EA0DD,C,qBArEmBkB,gB,EAwEP2D,8DAAf,E;;GCvEMI,Y,2FACJ,eAAYjtC,IAAZ,CAAkBtC,KAAlB,CAAyB,iEACvB,2HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK7c,MAAL,GALuB,aAMxB,C,8VAGC,oH,sBAEqB5B,WAAU,CAAC,4BAAD,C,QAAzB3tB,M,eACN;AACA,KAAKmuC,aAAL,CAAqB,CAAEn+C,CAAC,CAAE,EAAL,CAASE,CAAC,CAAE,EAAZ,CAAgBU,CAAC,CAAE,CAAnB,CAArB,CAEA,KAAK65C,UAAL,CAAkBzqC,MAAlB,CACA,KAAK2mC,WAAL,CAAiB,KAAKnV,QAAL,CAAcxhC,CAA/B,CAAkC,KAAKwhC,QAAL,CAActhC,CAAhD,CAAmD,KAAKshC,QAAL,CAAc5gC,CAAjE,EACA,KAAK29B,IAAL,CAAUt8B,GAAV,CAAc,KAAKw4C,UAAnB,EACAzqC,MAAM,CAAC3H,QAAP,CAAgBkI,GAAhB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,KAAK4oC,KAA/B,E,uBAEuBxb,WAAU,CAAC,6BAAD,C,SAA3B9N,Q,sCACmB8N,WAAU,CACjC,gEADiC,C,SAA7B0gB,U,eAIN,gIACE,CACE,wBADF,CAEE,yBAFF,CAGE,0BAHF,CADF,CAMExuB,QANF,EASA,gIACE,CACE,kBADF,CAEE,mBAFF,CAGE,oBAHF,CAIE,6BAJF,CAKE,0BALF,CAME,8BANF,CAOE,2BAPF,CADF,CAUEwuB,UAVF,E,+JAcE,CACE,kBADF,CAEE,eAFF,CAGE,2BAHF,CAIE,4BAJF,C,wBAMM1gB,WAAU,CACd,yDADc,C,yQAMhB,CAAC,cAAD,CAAiB,gBAAjB,CAAmC,eAAnC,C,wBACMA,WAAU,CAAC,iDAAD,C,0GAGZ2gB,Y,CAAe,KAAK7D,UAAL,CAAgB3qC,QAAhB,CAAyB,CAAzB,EAA4B2tB,Q,CAEjD6gB,YAAY,CAACvB,QAAb,CAAwB,GAAI1zC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAxB,CACAi1C,YAAY,CAACtB,WAAb,CAA2B,GAAI3zC,8BAAJ,GAA0B60B,IAA1B,CACzB,iCADyB,CAA3B,CAGAogB,YAAY,CAACtB,WAAb,CAAyBhB,KAAzB,CAAiC,KAAjC,CAEA;;;;;;;;;;;;;qLAgBO,CACP,oHAEA,GAAI,KAAKvB,UAAT,CAAqB,CACnB,KAAKA,UAAL,CAAgBjZ,QAAhB,CAAyBthC,CAAzB,EAA8B,KAA9B,CACD,CACF,C,mBA/FiBm6C,gB,EAkGL+D,wDAAf,E;;GCnGMG,gB,6FACJ,iBAAYptC,IAAZ,CAAkBtC,KAAlB,CAAyB,mEACvB,6HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAK/b,MAAL,GAJuB,aAKxB,C,qFAEQ,iBACP,sHAEAv5B,MAAM,CAACi4C,MAAP,CAActgB,UAAd,CAAyB,4BAAzB,CAAuD,SAAA3tB,MAAM,CAAI,CAC/DhK,MAAM,CAACi4C,MAAP,CAAcC,qBAAd,CACEluC,MAAM,CAACF,QAAP,CAAgB,CAAhB,CADF,CAEE,CACE0uC,WAAW,CAAE,GAAIn1C,wBAAJ,CAAkB,GAAlB,CAAuB,GAAvB,CADf,CAEEo1C,SAAS,CAAE,EAFb,CAGEjgB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAHT,CAFF,CAOE,4BAPF,CAQE,+BARF,EAWA2G,MAAM,CAACrF,KAAP,CAAa4F,GAAb,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACA,MAAI,CAAC4tC,aAAL,CAAqB,CAAEn+C,CAAC,CAAE,EAAL,CAASE,CAAC,CAAE,EAAZ,CAAgBU,CAAC,CAAE,CAAnB,CAArB,CACA,MAAI,CAAC65C,UAAL,CAAkBzqC,MAAlB,CACA,MAAI,CAAC2mC,WAAL,CAAiB,MAAI,CAACnV,QAAL,CAAcxhC,CAA/B,CAAkC,MAAI,CAACwhC,QAAL,CAActhC,CAAhD,CAAmD,MAAI,CAACshC,QAAL,CAAc5gC,CAAjE,EACA,MAAI,CAAC29B,IAAL,CAAUt8B,GAAV,CAAc,MAAI,CAACw4C,UAAnB,EACAzqC,MAAM,CAAC3H,QAAP,CAAgBkI,GAAhB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,MAAI,CAAC4oC,KAA/B,EACD,CAlBD,EAmBD,C,qBA9BmBkB,gB,EAiCPkE,8DAAf,E;;ACjCO,GAAMG,aAAY,sHAAG,iBAAM9gB,GAAN,qJACLD,WAAU,CAACC,GAAD,CADL,QACpB5tB,MADoB,+CAEnB,GAAI2uC,kBAAJ,CAAa3uC,MAAM,CAACnB,KAApB,CAA2BmB,MAAM,CAACwsB,UAAlC,CAFmB,wDAAH,kBAAZkiB,aAAY,4CAAlB,C,GAKDC,kB,yBACJ,kBAAY9vC,KAAZ,CAAmB2tB,UAAnB,CAA+B,CAAC,yDAC9B,KAAK5pB,EAAL,CAAU,IAAV,CAEA,KAAK5C,MAAL,CAAc,GAAI3G,yBAAJ,EAAd,CACA,KAAKwF,KAAL,CAAaA,KAAb,CACA,KAAK2tB,UAAL,CAAkBA,UAAlB,CACA,KAAKoiB,OAAL,CAAe,EAAf,CAEA,KAAK5uC,MAAL,CAAY/N,GAAZ,CAAgB,KAAK4M,KAArB,EAEA,KAAKgwC,cAAL,CAAsB,GAAIx1C,+BAAJ,CAAyB,KAAKwF,KAA9B,CAAtB,CACA,KAAKiwC,aAAL,CAAmB,SAAnB,EACD,C,yFAEQC,Q,CAAU,CACjB,KAAK/uC,MAAL,CAAY4sB,QAAZ,CAAqB,SAAAqf,KAAK,CAAI,CAC5B,GAAIA,KAAK,CAACze,MAAV,CAAkB,CAChBuhB,QAAQ,CAAC9C,KAAD,CAAR,CACD,CAED,GAAIA,KAAK,WAAY0C,SAArB,CAA+B,CAC7B1C,KAAK,CAACrf,QAAN,CAAemiB,QAAf,EACD,CACF,CARD,EASD,C,0DAEgB9uC,I,CAAM,CACrB,GAAM+uC,KAAI,CAAG31C,6BAAA,CAAoB41C,UAApB,CAA+B,KAAKziB,UAApC,CAAgDvsB,IAAhD,CAAb,CAEA,GAAI,CAAC+uC,IAAL,CAAW,CACT,OACD,CAED,GAAME,OAAM,CAAG,KAAKL,cAAL,CAAoBM,UAApB,CAA+BH,IAA/B,CAAf,CACAE,MAAM,CAACE,KAAP,GACAF,MAAM,CAACG,MAAP,CAAgB,CAAhB,CACAH,MAAM,CAACI,MAAP,CAAgB,IAAhB,CACD,C,oDAEarvC,I,CAAM,CAClB,GAAM+uC,KAAI,CAAG31C,6BAAA,CAAoB41C,UAApB,CAA+B,KAAKziB,UAApC,CAAgDvsB,IAAhD,CAAb,CAEA,GAAI,CAAC+uC,IAAL,CAAW,CACT,OACD,CACD,GAAME,OAAM,CAAG,KAAKL,cAAL,CAAoBM,UAApB,CAA+BH,IAA/B,CAAf,CACAE,MAAM,CAACE,KAAP,GACAF,MAAM,CAACG,MAAP,CAAgB,CAAhB,CACAH,MAAM,CAACK,iBAAP,CAA2B,IAA3B,CACAL,MAAM,CAACM,IAAP,CAAcn2C,wBAAd,CACA61C,MAAM,CAACvgB,IAAP,CAAc,CAAd,CACAugB,MAAM,CAACI,MAAP,CAAgB,KAAhB,CACAJ,MAAM,CAACO,IAAP,GACD,C,oDAEaxvC,I,CAAM,CAClB,GAAM+uC,KAAI,CAAG31C,6BAAA,CAAoB41C,UAApB,CAA+B,KAAKziB,UAApC,CAAgDvsB,IAAhD,CAAb,CAEA,GAAI,CAAC+uC,IAAL,CAAW,CACT,OACD,CACD,GAAME,OAAM,CAAG,KAAKL,cAAL,CAAoBM,UAApB,CAA+BH,IAA/B,CAAf,CACAE,MAAM,CAACE,KAAP,GACAF,MAAM,CAACG,MAAP,CAAgB,CAAhB,CACAH,MAAM,CAACK,iBAAP,CAA2B,IAA3B,CACAL,MAAM,CAACM,IAAP,CAAcn2C,0BAAd,CACA61C,MAAM,CAACvgB,IAAP,CAAc,CAAd,CACAugB,MAAM,CAACI,MAAP,CAAgB,KAAhB,CACAJ,MAAM,CAACO,IAAP,GACD,C,kDAEYxvC,I,CAAM0uB,I,CAAM,CACvB,GAAMqgB,KAAI,CAAG31C,6BAAA,CAAoB41C,UAApB,CAA+B,KAAKziB,UAApC,CAAgDvsB,IAAhD,CAAb,CAEA,GAAI,CAAC+uC,IAAL,CAAW,CACT,OACD,CACD,GAAME,OAAM,CAAG,KAAKL,cAAL,CAAoBM,UAApB,CAA+BH,IAA/B,CAAf,CACAE,MAAM,CAACE,KAAP,GACAF,MAAM,CAACG,MAAP,CAAgB,CAAhB,CACAH,MAAM,CAACK,iBAAP,CAA2B,IAA3B,CACAL,MAAM,CAACM,IAAP,CAAcn2C,wBAAd,CACA61C,MAAM,CAACvgB,IAAP,CAAcA,IAAd,CACAugB,MAAM,CAACI,MAAP,CAAgB,IAAhB,CACAJ,MAAM,CAACO,IAAP,GACD,C,oCAEK5wC,K,CAAO,CACXA,KAAK,CAAC5M,GAAN,CAAU,KAAK+N,MAAf,EACD,C,8CAEUnB,K,CAAO,CAChBA,KAAK,CAAC8xB,MAAN,CAAa,KAAK3wB,MAAlB,EACD,C,qCAEO,CACN,GAAMvG,MAAK,CAAGyyB,WAAW,CAAC,IAAD,CAAzB,CACA,GAAMlsB,OAAM,CAAG,GAAI2uC,SAAJ,CAAal1C,KAAK,CAACoF,KAAnB,CAA0BpF,KAAK,CAAC+yB,UAAhC,CAAf,CACAxsB,MAAM,CAAC4sC,KAAP,CAAa,KAAKhqC,EAAlB,EACA,MAAO5C,OAAP,CACD,C,oCAEK4C,E,CAAI,CACR,KAAKA,EAAL,CAAUA,EAAV,CACA,MAAO,KAAP,CACD,C,4CAEiB,IAAT5L,MAAS,OAATA,KAAS,CAChB,KAAK63C,cAAL,CAAoBrf,MAApB,CAA2Bx4B,KAAK,CAAG,KAAnC,EACD,C,wBAGY23C,uEAAf,E;;ACpHA,GAAM9d,mBAAa,CAAG,GAAIx3B,8BAAJ,EAAtB,C,GAEMq2C,U,0FACJ,cAAYvuC,IAAZ,CAAkBtC,KAAlB,CAAyB,gEACvB,0HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK1T,UAAL,CAAkB,GAAIl5B,aAAJ,CAAW,GAAX,CAAgB,EAAhB,CAAoB,EAApB,CAAlB,CACA,MAAKwpC,MAAL,CAAc,GAAIxpC,aAAJ,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAd,CACA,MAAKmsC,kBAAL,CAA0B,GAAInsC,aAAJ,CAAW,GAAX,CAAgB,EAAhB,CAA1B,CAEA,MAAK+vB,MAAL,GATuB,aAUxB,C,4TAGC,mH,sBACqBmf,aAAY,CAAC,kCAAD,C,QAA3B1uC,M,qCAEe6wB,mBAAa,CAAC3C,IAAd,CACnB,qCADmB,C,QAArB,KAAKsc,O,6KAKH,CACE,CAAEvqC,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CADF,CAEE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAFF,C,wBAIM8rC,aAAY,CAChB,gEADgB,C,wQAMlB,CAAC,CAAEzuC,IAAI,CAAE,4BAAR,CAAsC2C,EAAE,CAAE,GAA1C,CAAD,C,wBACM8rC,aAAY,CAChB,iEADgB,C,yQAMlB,CACE,CAAEzuC,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CADF,CAEE,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CAFF,CAGE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAHF,CAIE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAJF,C,wBAMM8rC,aAAY,CAChB,+DADgB,C,8QAMlB,CACE,CAAEzuC,IAAI,CAAE,iBAAR,CAA2B2C,EAAE,CAAE,GAA/B,CADF,CAEE,CAAE3C,IAAI,CAAE,iBAAR,CAA2B2C,EAAE,CAAE,GAA/B,CAFF,CAGE,CAAE3C,IAAI,CAAE,iBAAR,CAA2B2C,EAAE,CAAE,GAA/B,CAHF,CAIE,CAAE3C,IAAI,CAAE,iBAAR,CAA2B2C,EAAE,CAAE,GAA/B,CAJF,C,wBAMM8rC,aAAY,CAAC,kDAAD,C,iRAIlB,CACE,CAAEzuC,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CADF,CAEE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CAFF,CAGE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CAHF,CAIE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CAJF,CAKE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CALF,CAME,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CANF,CAOE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CAPF,CAQE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CARF,CASE,CAAE3C,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CATF,CAUE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAVF,CAWE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAXF,CAYE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAZF,CAaE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAbF,CAcE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAdF,CAeE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAfF,CAgBE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAhBF,CAiBE,CAAE3C,IAAI,CAAE,qBAAR,CAA+B2C,EAAE,CAAE,GAAnC,CAjBF,CAkBE,CAAE3C,IAAI,CAAE,qBAAR,CAA+B2C,EAAE,CAAE,GAAnC,CAlBF,CAmBE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAnBF,CAoBE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CApBF,C,wBAsBM8rC,aAAY,CAChB,yDADgB,C,iRAMlB,CACE,CAAEzuC,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CADF,CAEE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAFF,CAGE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAHF,CAIE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAJF,C,wBAMM8rC,aAAY,CAAC,4CAAD,C,gHAGpB,+HACE,CACE,CAAEzuC,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CADF,CAEE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAFF,CAGE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAHF,CAIE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAJF,CADF,CAOE,IAPF,EAUA;;;;;;;;;;;;QAcA,KAAK+sC,aAAL,CAAmB3vC,MAAnB,E,0JA1HeqqC,gB,EA8HJqF,qDAAf,E;;AChIA,GAAM7e,sBAAa,CAAG,GAAIx3B,8BAAJ,EAAtB,C,GAEMu2C,gB,6FACJ,iBAAYzuC,IAAZ,CAAkBtC,KAAlB,CAAyB,mEACvB,6HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK1T,UAAL,CAAkB,GAAIl5B,aAAJ,CAAW,EAAX,CAAe,EAAf,CAAmB,CAAnB,CAAlB,CACA,MAAKwpC,MAAL,CAAc,GAAIxpC,aAAJ,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAd,CACA,MAAKmsC,kBAAL,CAA0B,GAAInsC,aAAJ,CAAW,EAAX,CAAe,EAAf,CAA1B,CACA,MAAK+vB,MAAL,GARuB,aASxB,C,mVAGC,sH,sBACqBmf,aAAY,CAAC,4BAAD,C,QAA3B1uC,M,qCACe6wB,sBAAa,CAAC3C,IAAd,CAAmB,+BAAnB,C,QAArB,KAAKsc,O,eAELxqC,MAAM,CAACA,MAAP,CAAc3H,QAAd,CAAuBkI,GAAvB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,KAAK8qC,aAAtC,E,uBAEuBqD,aAAY,CAAC,6BAAD,C,SAA7B7uB,Q,sCACmB6uB,aAAY,CACnC,gEADmC,C,SAA/BL,U,eAIN,kIACE,CACE,CAAEpuC,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CADF,CAEE,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CAFF,CAGE,CAAE3C,IAAI,CAAE,0BAAR,CAAoC2C,EAAE,CAAE,GAAxC,CAHF,CADF,CAMEid,QANF,EASA,kIACE,CACE,CAAE5f,IAAI,CAAE,kBAAR,CAA4B2C,EAAE,CAAE,GAAhC,CADF,CAEE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAFF,CAGE,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAHF,CADF,CAMEyrC,UANF,EASA,kIACE,CACE,CAAEpuC,IAAI,CAAE,6BAAR,CAAuC2C,EAAE,CAAE,GAA3C,CADF,CAEE,CAAE3C,IAAI,CAAE,0BAAR,CAAoC2C,EAAE,CAAE,GAAxC,CAFF,CAGE,CAAE3C,IAAI,CAAE,8BAAR,CAAwC2C,EAAE,CAAE,GAA5C,CAHF,CAIE,CAAE3C,IAAI,CAAE,2BAAR,CAAqC2C,EAAE,CAAE,GAAzC,CAJF,CADF,CAOEyrC,UAPF,E,iKAWE,CACE,CAAEpuC,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CADF,CAEE,CAAE3C,IAAI,CAAE,sBAAR,CAAgC2C,EAAE,CAAE,GAApC,CAFF,C,wBAIM8rC,aAAY,CAChB,iEADgB,C,2QAMlB,CACE,CAAEzuC,IAAI,CAAE,kBAAR,CAA4B2C,EAAE,CAAE,GAAhC,CADF,CAEE,CAAE3C,IAAI,CAAE,eAAR,CAAyB2C,EAAE,CAAE,GAA7B,CAFF,CAGE,CAAE3C,IAAI,CAAE,2BAAR,CAAqC2C,EAAE,CAAE,GAAzC,CAHF,CAIE,CAAE3C,IAAI,CAAE,4BAAR,CAAsC2C,EAAE,CAAE,GAA1C,CAJF,C,wBAMM8rC,aAAY,CAChB,yDADgB,C,4QAMlB,CACE,CAAEzuC,IAAI,CAAE,cAAR,CAAwB2C,EAAE,CAAE,GAA5B,CADF,CAEE,CAAE3C,IAAI,CAAE,gBAAR,CAA0B2C,EAAE,CAAE,GAA9B,CAFF,CAGE,CAAE3C,IAAI,CAAE,eAAR,CAAyB2C,EAAE,CAAE,GAA7B,CAHF,C,wBAKM8rC,aAAY,CAAC,iDAAD,C,6GAGpB,KAAKiB,aAAL,CAAmB3vC,MAAnB,EAEA;;;;;;;;GASA;;;;;;;;;;;;;mKA9FkBqqC,gB,EA+GPuF,wEAAf,E;;ACjHA,GAAM/e,sBAAa,CAAG,GAAIx3B,8BAAJ,EAAtB,C,GAEMw2C,gB,6FACJ,iBAAY1uC,IAAZ,CAAkBtC,KAAlB,CAAyB,mEACvB,6HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,GAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK1T,UAAL,CAAkB,GAAIl5B,aAAJ,CAAW,EAAX,CAAe,EAAf,CAAmB,EAAnB,CAAlB,CACA,MAAKwpC,MAAL,CAAc,GAAIxpC,aAAJ,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAd,CACA,MAAKmsC,kBAAL,CAA0B,GAAInsC,aAAJ,CAAW,EAAX,CAAe,EAAf,CAA1B,CACA,MAAK+vB,MAAL,GARuB,aASxB,C,+TAGC,sH,sBACqBmf,aAAY,CAC/B,+CAD+B,C,QAA3B1uC,M,qCAGe6wB,sBAAa,CAAC3C,IAAd,CACnB,kDADmB,C,QAArB,KAAKsc,O,eAILxqC,MAAM,CAACA,MAAP,CAAc3H,QAAd,CAAuBkI,GAAvB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,KAAK8qC,aAAtC,E,iKAGE,CACE,CAAEprC,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CADF,CAEE,CAAE3C,IAAI,CAAE,0BAAR,CAAoC2C,EAAE,CAAE,GAAxC,CAFF,CAGE,CAAE3C,IAAI,CAAE,2BAAR,CAAqC2C,EAAE,CAAE,GAAzC,CAHF,C,wBAKM8rC,aAAY,CAAC,gDAAD,C,2QAIlB,CAAC,CAAEzuC,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CAAD,C,wBACM8rC,aAAY,CAChB,6DADgB,C,4QAMlB,CACE,CAAEzuC,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,EAArC,CADF,CAEE,CAAE3C,IAAI,CAAE,qBAAR,CAA+B2C,EAAE,CAAE,EAAnC,CAFF,CAGE,CAAE3C,IAAI,CAAE,sBAAR,CAAgC2C,EAAE,CAAE,EAApC,CAHF,CAIE,CAAE3C,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAJF,CAKE,CAAE3C,IAAI,CAAE,qBAAR,CAA+B2C,EAAE,CAAE,GAAnC,CALF,CAME,CAAE3C,IAAI,CAAE,oBAAR,CAA8B2C,EAAE,CAAE,GAAlC,CANF,C,wBAQM8rC,aAAY,CAChB,yDADgB,C,iRAMlB,CAAC,CAAEzuC,IAAI,CAAE,UAAR,CAAoB2C,EAAE,CAAE,GAAxB,CAAD,C,wBACM8rC,aAAY,CAAC,iDAAD,C,gHAGpB,KAAKiB,aAAL,CAAmB3vC,MAAnB,E,6JA1DkBqqC,gB,EA8DPwF,wEAAf,E;;GCjEMC,c,4FACJ,gBAAY3uC,IAAZ,CAAkBtC,KAAlB,CAAyB,kEACvB,4HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK7c,MAAL,GALuB,aAMxB,C,8TAGC,qH,sBACqBmf,aAAY,CAC/B,8CAD+B,C,QAA3B1uC,M,eAIN;AAEA,KAAK2mC,WAAL,CAAiB,KAAKnV,QAAL,CAAcxhC,CAA/B,CAAkC,KAAKwhC,QAAL,CAActhC,CAAhD,CAAmD,KAAKshC,QAAL,CAAc5gC,CAAjE,EAEAoP,MAAM,CAACA,MAAP,CAAc3H,QAAd,CAAuBkI,GAAvB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,KAAK8qC,aAAtC,E,gKAGE,CACE,CAAEprC,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CADF,CAEE,CAAE3C,IAAI,CAAE,0BAAR,CAAoC2C,EAAE,CAAE,GAAxC,CAFF,CAGE,CAAE3C,IAAI,CAAE,2BAAR,CAAqC2C,EAAE,CAAE,GAAzC,CAHF,C,wBAKM8rC,aAAY,CAChB,gEACA;AAFgB,C,0QAOlB,CACE,CAAEzuC,IAAI,CAAE,uBAAR,CAAiC2C,EAAE,CAAE,GAArC,CADF,CAEE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAFF,CAGE,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CAHF,C,wBAKM8rC,aAAY,CAChB,mEADgB,C,2QAMlB,CACE,CAAEzuC,IAAI,CAAE,4BAAR,CAAsC2C,EAAE,CAAE,GAA1C,CADF,EAGE,CAAE3C,IAAI,CAAE,2BAAR,CAAqC2C,EAAE,CAAE,GAAzC,CAHF,C,wBAKM8rC,aAAY,CAChB,gEADgB,C,gRAMlB,CACE,CAAEzuC,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CADF,CAEE,CAAE3C,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CAFF,CAGE,CAAE3C,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CAHF,CAIE,CAAE3C,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CAJF,CAKE,CAAE3C,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CALF,CAME,CAAE3C,IAAI,CAAE,YAAR,CAAsB2C,EAAE,CAAE,GAA1B,CANF,C,wBAQM8rC,aAAY,CAAC,iDAAD,C,gHAGpB,KAAKiB,aAAL,CAAmB3vC,MAAnB,E,4JAnEiBqqC,gB,EAuENyF,qEAAf,E;;GCvEMC,kB,8FACJ,kBAAY5uC,IAAZ,CAAkBtC,KAAlB,CAAyB,oEACvB,8HAAMsC,IAAN,CAAYtC,KAAZ,GACA,MAAKwsC,aAAL,CAAqB,EAArB,CACA,MAAKC,cAAL,CAAsB,EAAtB,CACA,MAAKc,iBAAL,CAAyB,EAAzB,CACA,MAAK7c,MAAL,GALuB,aAMxB,C,gUAGC,uH,sBACqBmf,aAAY,CAC/B,8CAD+B,C,QAA3B1uC,M,eAIN;AACA,KAAKmuC,aAAL,CAAqB,CAAEn+C,CAAC,CAAE,EAAL,CAASE,CAAC,CAAE,EAAZ,CAAgBU,CAAC,CAAE,CAAnB,CAArB,CAEA,KAAK+1C,WAAL,CAAiB,KAAKnV,QAAL,CAAcxhC,CAA/B,CAAkC,KAAKwhC,QAAL,CAActhC,CAAhD,CAAmD,KAAKshC,QAAL,CAAc5gC,CAAjE,EAEAoP,MAAM,CAACA,MAAP,CAAc3H,QAAd,CAAuBkI,GAAvB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,KAAK8qC,aAAtC,EACA;;;;;;;;;;;;;;;;;;;;;;;;;;wKA6BE,CACE,CAAEprC,IAAI,CAAE,gBAAR,CAA0B2C,EAAE,CAAE,GAA9B,CADF,CAEE,CAAE3C,IAAI,CAAE,gBAAR,CAA0B2C,EAAE,CAAE,GAA9B,CAFF,CAGE,CAAE3C,IAAI,CAAE,gBAAR,CAA0B2C,EAAE,CAAE,GAA9B,CAHF,CAIE,CAAE3C,IAAI,CAAE,gBAAR,CAA0B2C,EAAE,CAAE,GAA9B,CAJF,C,wBAMM8rC,aAAY,CAAC,kDAAD,C,4QAIlB,CACE,CAAEzuC,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CADF,CAEE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAFF,CAGE,CAAE3C,IAAI,CAAE,wBAAR,CAAkC2C,EAAE,CAAE,GAAtC,CAHF,CAIE,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CAJF,CAKE,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CALF,CAME,CAAE3C,IAAI,CAAE,yBAAR,CAAmC2C,EAAE,CAAE,GAAvC,CANF,C,wBAQM8rC,aAAY,CAChB,2DADgB,C,6QAMlB,CAAC,CAAEzuC,IAAI,CAAE,mBAAR,CAA6B2C,EAAE,CAAE,GAAjC,CAAD,C,wBACM8rC,aAAY,CAChB,gEADgB,C,kRAMlB,CACE,CAAEzuC,IAAI,CAAE,4BAAR,CAAsC2C,EAAE,CAAE,GAA1C,CADF,CAEE,CAAE3C,IAAI,CAAE,+BAAR,CAAyC2C,EAAE,CAAE,GAA7C,CAFF,CAGE,CAAE3C,IAAI,CAAE,0BAAR,CAAoC2C,EAAE,CAAE,GAAxC,CAHF,CAIE,CAAE3C,IAAI,CAAE,6BAAR,CAAuC2C,EAAE,CAAE,GAA3C,CAJF,C,wBAMM8rC,aAAY,CAChB,qEADgB,C,qRAMlB,CACE,CAAEzuC,IAAI,CAAE,4BAAR,CAAsC2C,EAAE,CAAE,GAA1C,CADF,CAEE,CAAE3C,IAAI,CAAE,+BAAR,CAAyC2C,EAAE,CAAE,GAA7C,CAFF,C,wBAIM8rC,aAAY,CAChB,gEADgB,C,gHAKpB,KAAKiB,aAAL,CAAmB3vC,MAAnB,E,8JAtGmBqqC,gB,EA0GR0F,yEAAf,E;;;;AC3GA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAAAC,aAAa,CAAI,CACtC,MAAO/tC,OAAM,CAACC,IAAP,CAAY8tC,aAAZ,EAA2Bh1C,GAA3B,CAA+B,SAAA6H,GAAG,QAAImtC,cAAa,CAACntC,GAAD,CAAjB,EAAlC,CAAP,CACD,CAFD,CAIA,GAAMotC,6BAAU,CAAG,QAAbA,WAAa,CAAC/uC,IAAD,CAAOtC,KAAP,CAAiB,CAClC,MAAO,IAAIstC,sBAAW,CAAChrC,IAAI,CAAC0nB,SAAN,CAAf,CAAgC1nB,IAAhC,CAAsCtC,KAAtC,CAAP,CACD,CAFD,CAIA,GAAMsxC,sCAAmB,CAAG,QAAtBA,oBAAsB,CAAChvC,IAAD,CAAOtC,KAAP,CAAcuxC,WAAd,CAA8B,CACxD,GAAM9xC,KAAI,CAAG,GAAI6tC,sBAAW,CAAChrC,IAAI,CAAC0nB,SAAN,CAAf,CAAgC1nB,IAAhC,CAAsCtC,KAAtC,CAAb,CACAP,IAAI,CAAC+xC,YAAL,CAAkBlvC,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAlB,EACA9xC,IAAI,CAACm+B,IAAL,GAEA,MAAOn+B,KAAP,CACD,CAND,C,GAQMiyC,oC,yBACJ,2BAAY1xC,KAAZ,CAAmBuxC,WAAnB,CAAgC,CAAC,kEAC/B,KAAKH,aAAL,CAAqB,EAArB,CACA,KAAKO,YAAL,CAAoB,EAApB,CACA,KAAK3xC,KAAL,CAAaA,KAAb,CACA,KAAKuxC,WAAL,CAAmBA,WAAnB,CAEA,KAAKK,cAAL,CAAsB,EAAtB,CACD,C,yGAEa,CACZ,MAAO1iB,QAAO,CAAC1lB,GAAR,CAAY,KAAKmoC,YAAL,CAAkBv1C,GAAlB,CAAsB,SAAAqD,IAAI,QAAIA,KAAI,CAACssC,kBAAT,EAA1B,CAAZ,CAAP,CACD,C,sEAEsBzpC,I,CAAM,CAC3B,GAAI7C,KAAI,CAAG,KAAKmyC,cAAL,CAAoBhhC,IAApB,CAAyB,SAAAnR,IAAI,QAAIA,KAAI,CAAC6C,IAAL,GAAcA,IAAlB,EAA7B,CAAX,CAEA,GAAI,CAAC7C,IAAL,CAAW,CACTA,IAAI,CAAG6xC,qCAAmB,CAAChvC,IAAD,CAAO,KAAKtC,KAAZ,CAAmB,KAAKuxC,WAAxB,CAA1B,CACA,KAAKK,cAAL,CAAoBl2C,IAApB,CAAyB+D,IAAzB,EACD,CAED,MAAOA,KAAP,CACD,C,sCAEMkM,Q,CAAU,gBACfA,QAAQ,CAACI,KAAT,CAAe4f,QAAf,GAA0BnwB,OAA1B,CAAkC,SAAA8G,IAAI,CAAI,CACxC,GAAI,CAAC,KAAI,CAACuvC,OAAL,CAAavvC,IAAI,CAACyB,EAAlB,CAAL,CAA4B,CAC1B,KAAI,CAACqtC,aAAL,CAAmB9uC,IAAI,CAACyB,EAAxB,EAA8BstC,4BAAU,CAAC/uC,IAAD,CAAO,KAAI,CAACtC,KAAZ,CAAxC,CACD,CAFD,IAEO,CACL,KAAI,CAACoxC,aAAL,CAAmB9uC,IAAI,CAACyB,EAAxB,EAA4BkpC,eAA5B,CAA4C3qC,IAA5C,EACD,CAED,GAAMsqC,MAAK,CAAG,KAAI,CAACgF,cAAL,CAAoBhhC,IAApB,CAAyB,SAAAnR,IAAI,QAAIA,KAAI,CAAC6C,IAAL,CAAUyB,EAAV,GAAiBzB,IAAI,CAACyB,EAA1B,EAA7B,CAAd,CACA,GAAI6oC,KAAJ,CAAW,CACTA,KAAK,CAACK,eAAN,CAAsB3qC,IAAtB,EACD,CACF,CAXD,EAaA,KAAKqvC,YAAL,CAAoBR,cAAc,CAAC,KAAKC,aAAN,CAAlC,CACD,C,4CAES9uC,I,CAAM,CACd,MAAO,MAAK8uC,aAAL,CAAmB9uC,IAAI,CAACyB,EAAxB,CAAP,CACD,C,wCAEOA,E,CAAI,CACV,MAAO,MAAKqtC,aAAL,CAAmBrtC,EAAnB,CAAP,CACD,C,wCAEO3C,I,CAAMmK,O,CAAS,CACrB,GAAI5V,OAAM,CAAG,KAAK,KAAOyL,IAAZ,CAAb,CACA,GAAIzL,MAAM,EAAI,MAAOA,OAAP,GAAkB,UAAhC,CAA4C,CAC1CA,MAAM,CAACm8C,IAAP,CAAY,IAAZ,CAAkBvmC,OAAlB,EACD,CACF,C,gDAEWA,O,CAAS,CACnB,GAAIzL,KAAI,CAAGyL,OAAO,CAACzL,IAAnB,CAEA,GAAI2yB,MAAK,CAAG3yB,IAAI,CAAG,CAAP,CAAWA,IAAI,CAAG,CAAlB,CAAsB,CAAlC,CACA,GAAI2yB,KAAK,CAAG,CAAZ,CAAe,CACbA,KAAK,CAAG,CAAR,CACD,CACD,KAAKkf,YAAL,CAAkBn2C,OAAlB,CAA0B,SAASiE,IAAT,CAAe,CACvCA,IAAI,CAACy+B,oBAAL,CAA0BzL,KAA1B,EACD,CAFD,EAGD,C,2CAEU,CACT,MAAO,MAAKkf,YAAZ,CACD,C,wCAEOlG,M,CAAQ,CACd,MAAOp6B,QAAO,CAAC,KAAK+/B,aAAL,CAAmB3F,MAAnB,CAAD,CAAd,CACD,C,gDAEWA,M,CAAQ,CAClB,MAAO,MAAK2F,aAAL,CAAmB3F,MAAnB,CAAP,CACD,C,gEAEmBlgC,O,CAAS,CAC3B,GAAIwmC,UAAS,CAAG,KAAKv1C,mBAAL,CAAyBw1C,oBAAzB,EAAhB,CACA,GAAIC,gBAAe,CAAGF,SAAS,CAAG,EAAlC,CAEA,GAAIG,MAAK,CAAG,EAAZ,CAEA,GAAID,eAAe,CAAG,EAAtB,CAA0B,CACxBC,KAAK,CAAG,KAAKC,iBAAL,CAAuB5mC,OAAO,CAAC3N,GAA/B,CAAR,CACD,CAFD,IAEO,CACL,GAAIw0C,QAAO,CAAG,IAAd,CACA,GAAIC,gBAAe,CAAG,IAAtB,CAEA,KAAKV,YAAL,CAAkBn2C,OAAlB,CAA0B,SAAS82C,QAAT,CAAmB,CAC3C,GAAIL,gBAAe,CAAGnhD,aAAQ,CAACwhD,QAAQ,CAACp3B,WAAT,EAAD,CAAyB3P,OAAO,CAACrT,IAAjC,CAA9B,CAEA,GACE+5C,eAAe,CAAG,EAAlB,GACC,CAACG,OAAD,EAAYH,eAAe,CAAGI,eAD/B,CADF,CAGE,CACAD,OAAO,CAAGE,QAAV,CACAD,eAAe,CAAGJ,eAAlB,CACD,CACF,CAVD,CAUG,IAVH,EAYA,GAAIG,OAAJ,CAAaF,KAAK,CAACx2C,IAAN,CAAW02C,OAAX,EACd,CAED,MAAOF,MAAP,CACD,C,4DAEiBt0C,G,CAAK,CACrB,MAAO,MAAK+zC,YAAL,CAAkBztC,MAAlB,CAAyB,SAASouC,QAAT,CAAmB,CACjD,MAAO,MAAK91C,mBAAL,CACJ4F,aADI,CACUkwC,QAAQ,CAACp3B,WAAT,EADV,EAEJrd,MAFI,CAEGD,GAFH,CAAP,CAGD,CAJM,CAIJ,IAJI,CAAP,CAKD,C,4EAEyBA,G,CAAK,CAC7B,MAAO,MAAK+zC,YAAL,CAAkBztC,MAAlB,CAAyB,SAASouC,QAAT,CAAmB,CACjD,MACE,CAACA,QAAQ,CAAChwC,IAAT,CAAc2J,WAAd,EAAD,EACAqmC,QAAQ,CAACC,eAAT,GAA2B/4C,QAA3B,CAAoCqE,MAApC,CAA2CD,GAA3C,CAFF,CAID,CALM,CAKJ,IALI,CAAP,CAMD,C,sCAEM4wC,a,CAAe,CACpB,KAAKmD,YAAL,CAAkBn2C,OAAlB,CAA0B,SAAAiE,IAAI,QAAIA,KAAI,CAAC4lC,MAAL,CAAYmJ,aAAZ,CAAJ,EAA9B,EACD,C,iCAGYkD,8FAAf,E;;GC/IMc,0B,yBACJ,sBACEF,QADF,CAEEG,UAFF,CAGEC,WAHF,CAIEC,SAJF,CAKEvzC,MALF,CAMEolB,IANF,CAOExkB,KAPF,CAQE,CAAC,6DACD,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKsyC,QAAL,CAAgBA,QAAhB,CACA,KAAKG,UAAL,CAAkBA,UAAlB,CACA,KAAKC,WAAL,CAAmBA,WAAnB,CACA,KAAKC,SAAL,CAAiBA,SAAjB,CACA,KAAKvzC,MAAL,CAAcA,MAAd,CACA,KAAKolB,IAAL,CAAYA,IAAZ,CAEA,KAAKqN,OAAL,CAAe,KAAf,CAEA,KAAK+gB,cAAL,CACE,CAAC,KAAKF,WAAN,EAAqB,KAAKA,WAAL,CAAiBhG,MAAtC,CACI+F,UAAU,CAACv3B,WAAX,EADJ,CAEIw3B,WAAW,CAACx3B,WAAZ,EAHN,CAKA,KAAKkH,YAAL,CACE,CAAC,KAAKuwB,SAAN,EAAmB,KAAKA,SAAL,CAAejG,MAAlC,CACI,KAAK4F,QAAL,CAAcp3B,WAAd,EADJ,CAEI,KAAKy3B,SAAL,CAAez3B,WAAf,EAHN,CAKA,KAAKqxB,IAAL,CAAY,KAAKsG,UAAL,EAAZ,CACD,C,kGAEY,CACX,GAAMtG,KAAI,CAAG,GAAI/c,kBAAJ,CACX,KAAK8iB,QAAL,CAAcp3B,WAAd,GAA4BisB,IAA5B,CAAiC,KAAK2L,IAAL,EAAjC,CADW,CAEX,KAAKF,cAAL,CAAoBzL,IAApB,CAAyB,KAAK2L,IAAL,EAAzB,CAFW,CAGX,KAAK1zC,MAAL,CAAc,CAAd,CAAkB,CAHP,CAIX,CACEuwB,KAAK,CAAE,KAAKnL,IAAL,CAAYzpB,kBAAZ,CAAiCC,eAD1C,CAEE40B,OAAO,CAAE,GAFX,CAGEltB,IAAI,CAAE,eAHR,CAIE2uB,WAAW,CAAE,KAAKjyB,MAAL,CAAc,CAAd,CAAkB,CAJjC,CAKE;AACA6wB,WAAW,CAAE,CANf,CAJW,CAAb,CAcAsc,IAAI,CAACc,KAAL,CAAW,KAAKrtC,KAAhB,EAEA,MAAOusC,KAAP,CACD,C,mCAEM,CACL,MAAO,EAAP,CACD,C,uCAEQ,CACP,KAAKA,IAAL,CAAUwG,OAAV,GACD,C,sCAEMjzC,I,CAAM,CACX,GAAI,CAAC,KAAK+xB,OAAV,CAAmB,CACjB,OACD,CAED;AAEA,GAAMmhB,kBAAiB,CACrB,CAAC,KAAKN,WAAN,EAAqB,KAAKA,WAAL,CAAiBhG,MAAtC,CACI,KAAK+F,UAAL,CAAgBv3B,WAAhB,EADJ,CAEI,KAAKw3B,WAAL,CAAiBx3B,WAAjB,EAHN,CAKA,GAAM+3B,gBAAe,CACnB,CAAC,KAAKN,SAAN,EAAmB,KAAKA,SAAL,CAAejG,MAAlC,CACI,KAAK4F,QAAL,CAAcp3B,WAAd,EADJ,CAEI,KAAKy3B,SAAL,CAAez3B,WAAf,EAHN,CAKA,GACE,CAAC,KAAKkH,YAAL,CAAkBvkB,MAAlB,CAAyBo1C,eAAzB,CAAD,EACA,CAAC,KAAKL,cAAL,CAAoB/0C,MAApB,CAA2Bm1C,iBAA3B,CAFH,CAGE,CACA,KAAK5wB,YAAL,CAAoB6wB,eAApB,CACA,KAAKL,cAAL,CAAsBI,iBAAtB,CACA,KAAKzG,IAAL,CAAU5b,MAAV,CACE,KAAKvO,YAAL,CAAkB+kB,IAAlB,CAAuB,KAAK2L,IAAL,EAAvB,CADF,CAEE,KAAKF,cAAL,CAAoBzL,IAApB,CAAyB,KAAK2L,IAAL,EAAzB,CAFF,CAGE,KAAK1zC,MAAL,CAAc,CAAd,CAAkB,CAHpB,EAMA,GAAI,KAAKmtC,IAAL,EAAa,KAAKA,IAAL,CAAU2G,iBAA3B,CAA8C,CAC5C,KAAK3G,IAAL,CAAU2G,iBAAV,CAA4B,KAAK9zC,MAAL,CAAc,CAAd,CAAkB,CAA9C,EACD,CACF,CACF,C,sCAEMkD,I,CAAMlD,M,CAAQ,CACnB,KAAKkD,IAAL,CAAYA,IAAZ,CAEA,GAAI,KAAKlD,MAAL,GAAgBA,MAApB,CAA4B,CAC1B,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKmtC,IAAL,CAAU5b,MAAV,CACE,KAAKvO,YAAL,CAAkB+kB,IAAlB,CAAuB,KAAK2L,IAAL,EAAvB,CADF,CAEE,KAAKF,cAAL,CAAoBzL,IAApB,CAAyB,KAAK2L,IAAL,EAAzB,CAFF,CAGE,KAAK1zC,MAAL,CAAc,CAAd,CAAkB,CAHpB,EAMA,GAAI,KAAKmtC,IAAL,EAAa,KAAKA,IAAL,CAAU2G,iBAA3B,CAA8C,CAC5C,KAAK3G,IAAL,CAAU2G,iBAAV,CAA4B,KAAK9zC,MAAL,CAAc,CAAd,CAAkB,CAA9C,EACD,CACF,CAED,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKyyB,OAAL,CAAe,IAAf,CACA,KAAK0a,IAAL,CAAUpO,IAAV,GACD,C,mCAEM,CACL,KAAKtM,OAAL,CAAe,KAAf,CACA,KAAK0a,IAAL,CAAU3O,IAAV,GACD,C,4BAGY4U,4FAAf,E;;GCrIMW,kC,yBACJ,0BAAY7wC,IAAZ,CAAkB8wC,iBAAlB,CAAqC7B,WAArC,CAAkDvxC,KAAlD,CAAyD,CAAC,iEACxD,KAAKsC,IAAL,CAAYA,IAAZ,CACA,KAAK7C,IAAL,CAAY2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAZ,CACA,KAAK8wC,iBAAL,CAAyBA,iBAAzB,CACA,KAAK7B,WAAL,CAAmBA,WAAnB,CACA,KAAKvxC,KAAL,CAAaA,KAAb,CACA,KAAKszC,GAAL,CAAW,EAAX,CAEA,KAAK3iB,MAAL,CAAY,KAAKruB,IAAjB,EACD,C,6FAEMA,I,CAAMixC,Q,CAAU,CACrB,KAAKjxC,IAAL,CAAYA,IAAZ,CACA,KAAKkxC,SAAL,CAAeD,QAAf,EAEA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKD,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAACnV,IAAJ,EAAT,EAAjB,EACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKmV,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAAC1V,IAAJ,EAAT,EAAjB,EACA,MAAO,KAAP,CACD,C,sCAEMt7B,I,CAAM,CACX,MAAO,MAAKA,IAAL,CAAUyB,EAAV,GAAiBzB,IAAI,CAACyB,EAA7B,CACD,C,sCAEMjE,I,CAAM,CACX,KAAKwzC,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAACjO,MAAJ,CAAWvlC,IAAX,CAAT,EAAjB,EACD,C,gUAGO,MAAKszC,iBAAL,CAAuBK,WAAvB,E,QACA3iC,G,CAAM,KAAKwiC,G,CACXI,M,CAAS,KAAKpxC,IAAL,CAAUqoB,iBAAV,CAA4BgpB,SAA5B,GAAwCv3C,GAAxC,CAA4C,SAACw3C,OAAD,CAAa,CACtE,GAAMnB,WAAU,CAAG,KAAI,CAACW,iBAAL,CAAuBS,OAAvB,CAA+BD,OAAO,CAACzuB,YAAvC,CAAnB,CACA,GAAMutB,YAAW,CAAG,KAAI,CAACU,iBAAL,CAAuBU,sBAAvB,CAClBrB,UAAU,CAACnwC,IADO,CAApB,CAGA,GAAMqwC,UAAS,CAAG,KAAI,CAACS,iBAAL,CAAuBU,sBAAvB,CAChB,KAAI,CAACr0C,IAAL,CAAU6C,IADM,CAAlB,CAIA,GAAIyxC,UAAS,CAAG,KAAI,CAACT,GAAL,CAAS1iC,IAAT,CAAc,SAAC0iC,GAAD,QAASA,IAAG,CAACb,UAAJ,GAAmBA,UAA5B,EAAd,CAAhB,CAEA,GAAI,CAACsB,SAAL,CAAgB,CACdA,SAAS,CAAG,GAAIvB,+BAAJ,CACV,KAAI,CAAC/yC,IADK,CAEVgzC,UAFU,CAGVC,WAHU,CAIVC,SAJU,CAKViB,OAAO,CAACx0C,MALE,CAMV,KAAI,CAACkD,IAAL,CAAUooB,MAAV,CAAiB+mB,EAAjB,CAAoB,KAAI,CAACF,WAAzB,CANU,CAOV,KAAI,CAACvxC,KAPK,CAAZ,CASD,CAED,MAAO+zC,UAAS,CAACpjB,MAAV,CAAiB,KAAI,CAACruB,IAAtB,CAA4BsxC,OAAO,CAACx0C,MAApC,CAAP,CACD,CAxBc,C,CA0Bf0R,GAAG,CACA5M,MADH,CACU,SAAC6vC,SAAD,QACNL,OAAM,CAAC/vC,KAAP,CAAa,SAACqwC,YAAD,QAAkBA,aAAY,GAAKD,SAAnC,EAAb,CADM,EADV,EAIGv4C,OAJH,CAIW,SAACu4C,SAAD,QAAeA,UAAS,CAACjiB,MAAV,EAAf,EAJX,EAMA,KAAKwhB,GAAL,CAAWI,MAAX,C,gLAIWP,wGAAf,E;;AC1EA,GAAMp4C,uCAAkB,CAAG,GAAIP,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,IAAM,GAA3C,CAA3B,CACA,GAAMQ,oCAAe,CAAG,GAAIR,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,GAAK,GAA1C,CAAxB,C,GAEMy5C,wC,6GACJ,6BAAY3B,QAAZ,CAAsBG,UAAtB,CAAkCrzC,MAAlC,CAA0ColB,IAA1C,CAAgDxkB,KAAhD,CAAuD,CAAC,8MAChDsyC,QAD+C,CACrCG,UADqC,CACzB,IADyB,CACnB,IADmB,CACbrzC,MADa,CACLolB,IADK,CACCxkB,KADD,GAEtD,C,yGAEY,CACX,MAAO,IAAIm7B,cAAJ,CAAS,KAAKn7B,KAAd,CAAqB,CAC1BzM,KAAK,CAAC,4CAAM,KAAK++C,QAAL,CAAcp3B,WAAd,EAAP,EAAoCnpB,CAAC,CAAE,KAAK+gD,IAAL,EAAvC,EADqB,CAE1Bt/C,GAAG,CAAC,4CAAM,KAAKo/C,cAAZ,EAA4B7gD,CAAC,CAAE,KAAK+gD,IAAL,EAA/B,EAFuB,CAG1BjzC,KAAK,CAAE,KAAKT,MAAL,CAAc,CAAd,CAAkB,CAHC,CAI1BuwB,KAAK,CAAE,KAAKnL,IAAL,CAAYzpB,sCAAZ,CAAiCC,mCAJd,CAK1B40B,OAAO,CAAE,GALiB,CAM1BK,WAAW,CAAE,CANa,CAO1BmL,QAAQ,CAAE,CAPgB,CAArB,CAAP,CASD,C,mCAEM,CACL,MAAO,EAAP,CACA,MAAO,MAAK5W,IAAL,CAAY,EAAZ,CAAiB,EAAxB,CACD,C,iCApB+BguB,8B,EAuBnByB,iHAAf,E;;GC5BMC,gD,yBACJ,iCAAY5xC,IAAZ,CAAkB8wC,iBAAlB,CAAqC7B,WAArC,CAAkDvxC,KAAlD,CAAyD,CAAC,wEACxD,KAAKsC,IAAL,CAAYA,IAAZ,CACA,KAAK7C,IAAL,CAAY2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAZ,CACA,KAAK8wC,iBAAL,CAAyBA,iBAAzB,CACA,KAAK7B,WAAL,CAAmBA,WAAnB,CACA,KAAKvxC,KAAL,CAAaA,KAAb,CACA,KAAKszC,GAAL,CAAW,EAAX,CAEA,KAAK3iB,MAAL,CAAY,KAAKruB,IAAjB,EACD,C,oGAEMA,I,CAAM,CACX,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKgxC,GAAL,CAAW,KAAKE,SAAL,EAAX,CAEA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKF,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAACnV,IAAJ,EAAT,EAAjB,EACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKmV,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAAC1V,IAAJ,EAAT,EAAjB,EACA,MAAO,KAAP,CACD,C,sCAEMt7B,I,CAAM,CACX,MAAO,MAAKA,IAAL,CAAUyB,EAAV,GAAiBzB,IAAI,CAACyB,EAA7B,CACD,C,sCAEMjE,I,CAAM,CACX,KAAKwzC,GAAL,CAAS93C,OAAT,CAAiB,SAAC83C,GAAD,QAASA,IAAG,CAACjO,MAAJ,CAAWvlC,IAAX,CAAT,EAAjB,EACD,C,6CAEW,gBACV,GAAMgR,IAAG,CAAG,KAAKwiC,GAAjB,CACA,GAAMI,OAAM,CAAG,KAAKpxC,IAAL,CAAUqoB,iBAAV,CAA4BzE,QAA5B,CACZytB,SADY,GAEZv3C,GAFY,CAER,SAACw3C,OAAD,CAAa,CAChB,GAAMnB,WAAU,CAAG,KAAI,CAACW,iBAAL,CAAuBS,OAAvB,CAA+BD,OAAO,CAACzuB,YAAvC,CAAnB,CAEA,GAAI4uB,UAAS,CAAG,KAAI,CAACT,GAAL,CAAS1iC,IAAT,CAAc,SAAC0iC,GAAD,QAASA,IAAG,CAACb,UAAJ,GAAmBA,UAA5B,EAAd,CAAhB,CAEA,GAAI,CAACsB,SAAL,CAAgB,CACdA,SAAS,CAAG,GAAIE,sCAAJ,CACV,KAAI,CAACx0C,IADK,CAEVgzC,UAFU,CAGVmB,OAAO,CAACx0C,MAHE,CAIV,KAAI,CAACkD,IAAL,CAAUooB,MAAV,CAAiB+mB,EAAjB,CAAoB,KAAI,CAACF,WAAzB,CAJU,CAKV,KAAI,CAACvxC,KALK,CAAZ,CAOD,CAED,MAAO+zC,UAAS,CAACpjB,MAAV,CAAiB,KAAI,CAACruB,IAAtB,CAA4BsxC,OAAO,CAACx0C,MAApC,CAAP,CACD,CAlBY,CAAf,CAoBA0R,GAAG,CACA5M,MADH,CACU,SAAC6vC,SAAD,QACNL,OAAM,CAAC/vC,KAAP,CAAa,SAACqwC,YAAD,QAAkBA,aAAY,GAAKD,SAAnC,EAAb,CADM,EADV,EAIGv4C,OAJH,CAIW,SAACu4C,SAAD,QAAeA,UAAS,CAACjiB,MAAV,EAAf,EAJX,EAMA,MAAO4hB,OAAP,CACD,C,uCAGYQ,6HAAf,E;;ACnEA,GAAMC,eAAc,CAAG,GAAI35C,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,EAAI,GAA1C,CAAvB,CACA,GAAM45C,WAAU,CAAG,GAAI55C,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,IAAM,GAA5C,CAAnB,CACA,GAAM65C,eAAc,CAAG,GAAI75C,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAvB,C,GAEM85C,oE,yBACJ,2CAAYt0C,KAAZ,CAAmBu0C,aAAnB,CAAkChD,WAAlC,CAA+C,CAAC,kFAC9C,KAAKvxC,KAAL,CAAaA,KAAb,CACA,KAAKozC,iBAAL,CAAyBmB,aAAzB,CACA,KAAKhD,WAAL,CAAmBA,WAAnB,CAEA,KAAKiD,UAAL,CAAkB,EAAlB,CACA,KAAKC,iBAAL,CAAyB,EAAzB,CACD,C,0IAEoBnyC,I,CAAM,CACzB,GAAIyxC,UAAS,CAAG,KAAKU,iBAAL,CAAuB7jC,IAAvB,CAA4B,SAAAmjC,SAAS,QACnDA,UAAS,CAACW,MAAV,CAAiBpyC,IAAjB,CADmD,EAArC,CAAhB,CAIA,GAAI,CAACyxC,SAAL,CAAgB,CACdA,SAAS,CAAG,GAAIG,0CAAJ,CACV5xC,IADU,CAEV,KAAK8wC,iBAFK,CAGV,KAAK7B,WAHK,CAIV,KAAKvxC,KAJK,CAAZ,CAOA,KAAKy0C,iBAAL,CAAuB/4C,IAAvB,CAA4Bq4C,SAA5B,EACD,CAED,MAAOA,UAAP,CACD,C,oDAEazxC,I,CAAM,CAClB,GAAIyxC,UAAS,CAAG,KAAKS,UAAL,CAAgB5jC,IAAhB,CAAqB,SAAAmjC,SAAS,QAAIA,UAAS,CAACW,MAAV,CAAiBpyC,IAAjB,CAAJ,EAA9B,CAAhB,CAEA,GAAI,CAACyxC,SAAL,CAAgB,CACdA,SAAS,CAAG,GAAIZ,mCAAJ,CACV7wC,IADU,CAEV,KAAK8wC,iBAFK,CAGV,KAAK7B,WAHK,CAIV,KAAKvxC,KAJK,CAAZ,CAOA,KAAKw0C,UAAL,CAAgB94C,IAAhB,CAAqBq4C,SAArB,EACD,CAED,MAAOA,UAAP,CACD,C,sCAEMj0C,I,CAAM,CACX,KAAK00C,UAAL,CAAgBh5C,OAAhB,CAAwB,SAAAu4C,SAAS,QAAIA,UAAS,CAAC1O,MAAV,CAAiBvlC,IAAjB,CAAJ,EAAjC,EACA,KAAK20C,iBAAL,CAAuBj5C,OAAvB,CAA+B,SAAAu4C,SAAS,QAAIA,UAAS,CAAC1O,MAAV,CAAiBvlC,IAAjB,CAAJ,EAAxC,EACD,C,8DAEkBwC,I,CAAM,CACvB,KAAKqyC,oBAAL,CAA0BryC,IAA1B,EACGquB,MADH,CACUruB,IADV,EAEG67B,IAFH,GAGD,C,8DAEkB77B,I,CAAM,CACvB,KAAKqyC,oBAAL,CAA0BryC,IAA1B,EACGquB,MADH,CACUruB,IADV,EAEGs7B,IAFH,GAGD,C,gDAEWt7B,I,CAAM,CAChB,KAAKsyC,aAAL,CAAmBtyC,IAAnB,EACGquB,MADH,CACUruB,IADV,EAEG67B,IAFH,GAGD,C,gDAEW77B,I,CAAM,CAChB,KAAKsyC,aAAL,CAAmBtyC,IAAnB,EACGquB,MADH,CACUruB,IADV,EAEGs7B,IAFH,GAGD,C,yCAES,CACR,KAAK4W,UAAL,CAAgBh5C,OAAhB,CAAwB,SAAAg5C,UAAU,QAAIA,WAAU,CAAC5W,IAAX,EAAJ,EAAlC,EACD,C,uDAEgB,CACf,KAAK6W,iBAAL,CAAuBj5C,OAAvB,CAA+B,SAAAg5C,UAAU,QAAIA,WAAU,CAAC5W,IAAX,EAAJ,EAAzC,EACD,C,iDAGY0W,2JAAf,E;;GCvFMO,gC,yBACJ,yBAAY70C,KAAZ,CAAmB,CAAC,gEAClB,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKkM,OAAL,CAAe,IAAf,CACA,KAAK4oC,cAAL,CAAsB,EAAtB,CACD,C,yFAEM,CAAE,C,sCAEF5oC,O,CAAS,gBACd;AACA,OAEA,KAAKA,OAAL,CAAeA,OAAf,CAEA,KAAK4oC,cAAL,CAAsB,KAAK5oC,OAAL,CAAa6oC,WAAb,GAA2Bv5C,OAA3B,CAAmC,SAAAyzB,MAAM,QAAK,CAClEA,MAAM,CAANA,MADkE,CAElE9tB,MAAM,CAAE,KAAI,CAAC6zC,YAAL,CAAkB/lB,MAAlB,CAF0D,CAAL,EAAzC,CAAtB,CAID,C,8JAEkBA,M,oKACIH,WAAU,CAAC,2BAAD,C,QAAzB3tB,M,eAEAytB,Q,CAAWztB,MAAM,CAACF,QAAP,CAAgB,CAAhB,EAAmB2tB,Q,CAEpCA,QAAQ,CAACsf,QAAT,CAAoB,GAAI1zC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAApB,CAEA2G,MAAM,CAAC3H,QAAP,CAAgBkI,GAAhB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,EACM5F,K,CAAQsE,WAAW,CAACxB,WAAZ,GAA4BqwB,MAAM,CAACgmB,Q,CACjD9zC,MAAM,CAACrF,KAAP,CAAa4F,GAAb,CAAiB5F,KAAjB,CAAwBA,KAAxB,CAA+BA,KAA/B,EACA,KAAKkE,KAAL,CAAW5M,GAAX,CAAe+N,MAAf,E,kMAGO,CAAE,C,+BAGE0zC,4FAAf,E;;GC1CMK,oC,yBACJ,2BAAYC,OAAZ,CAAqBnvC,eAArB,CAAsC,CAAC,kEACrC,KAAKmvC,OAAL,CAAeA,OAAf,CACA,KAAKnvC,eAAL,CAAuBA,eAAvB,CACA,KAAK+F,KAAL,CAAa,EAAb,CACD,C,0FAEIzJ,I,CAAM,CACT,KAAKyJ,KAAL,CAAa,KAAKA,KAAL,CAAW7H,MAAX,CAAkB,SAAS4kB,SAAT,CAAoB,CACjD,MAAOA,UAAS,CAAC4B,MAAV,CAAiBnG,IAAjB,GAA0BjiB,IAAI,CAACooB,MAAL,CAAYnG,IAA7C,CACD,CAFY,CAAb,CAIA,GAAI,CAAC,KAAKxY,KAAL,CAAWxK,QAAX,CAAoBe,IAApB,CAAL,CAAgC,CAC9B,KAAKyJ,KAAL,CAAWrQ,IAAX,CAAgB4G,IAAhB,EACD,CAED,KAAK6yC,OAAL,CAAaC,cAAb,CAA4B,CAC1BrpC,KAAK,CAAE,KAAKA,KADc,CAE1B/F,eAAe,CAAE,KAAKA,eAFI,CAA5B,EAID,C,oCAEK1D,I,CAAM,CACV,KAAKyJ,KAAL,CAAa,KAAKA,KAAL,CAAW7H,MAAX,CAAkB,SAASmxC,QAAT,CAAmB,CAChD,MAAOA,SAAQ,GAAK/yC,IAApB,CACD,CAFY,CAAb,CAIA,KAAK6yC,OAAL,CAAaC,cAAb,CAA4B,CAC1BrpC,KAAK,CAAE,KAAKA,KADc,CAE1B/F,eAAe,CAAE,KAAKA,eAFI,CAA5B,EAID,C,2CAEU,CACT,KAAK+F,KAAL,CAAa,EAAb,CAEA,KAAKopC,OAAL,CAAaC,cAAb,CAA4B,CAC1BrpC,KAAK,CAAE,KAAKA,KADc,CAE1B/F,eAAe,CAAE,KAAKA,eAFI,CAA5B,EAID,C,uCAEQ,CACP,KAAKmvC,OAAL,CAAaC,cAAb,CAA4B,CAC1BrpC,KAAK,CAAE,KAAKA,KADc,CAE1B/F,eAAe,CAAE,KAAKA,eAFI,CAA5B,EAID,C,iCAGYkvC,oGAAf,E;;GCpCMI,0B,yBACJ,sBAAYhzC,IAAZ,CAAkBtC,KAAlB,CAAyBkM,OAAzB,CAAkC0gC,KAAlC,CAAyCpoB,IAAzC,CAA+C,CAAC,6DAC9C,KAAKliB,IAAL,CAAYA,IAAZ,CACA,KAAKtC,KAAL,CAAaA,KAAb,CACA,KAAKkM,OAAL,CAAeA,OAAf,CACA,KAAK0gC,KAAL,CAAaA,KAAb,CAEA,KAAKjd,KAAL,CAAanL,IAAI,CAAGjqB,cAAH,CAAoBG,WAArC,CAEA;AAEA,KAAK66C,OAAL,CAAe,EAAf,CAEA,KAAKvvC,eAAL,CAAuB,GAAI0F,yBAAJ,EAAvB,CAEA,KAAKglB,MAAL,GACD,C,0FAEQ,gBACP,KAAK6kB,OAAL,CAAa/5C,OAAb,CAAqB,SAAC+D,QAAD,CAAc,CACjC,KAAI,CAACS,KAAL,CAAW8xB,MAAX,CAAkBvyB,QAAQ,CAACmwB,IAA3B,EACAnwB,QAAQ,CAACwzC,OAAT,GACD,CAHD,EAIA,KAAKnG,KAAL,CAAWhP,IAAX,GACD,C,uCAEQ,CACP;;;;;MAOA,GAAMzxB,UAAS,CAAG,KAAK7J,IAAL,CAAUiC,QAAV,CAAmBqC,yBAAnB,EAAlB,CACA,GAAMrT,MAAK,CAAG4Y,SAAS,CAAC3S,QAAxB,CACA,GAAMmN,QAAO,CAAG,KAAKX,eAAL,CAAqBwvC,aAArB,CAAmC,KAAKlzC,IAAxC,CAA8C,KAAK4J,OAAnD,CAAhB,CACA,GAAM1Y,IAAG,CAAGmT,OAAO,CAACnN,QAApB,CAEA,GAAM+yC,KAAI,CAAGkJ,+BAAkB,CAC7B,KAAKz1C,KADwB,CAE7BzM,KAF6B,CAG7BC,GAH6B,CAI7B,KAAKm8B,KAJwB,CAK7B,GAL6B,CAM7B,KAAKid,KAAL,CAAWtC,KANkB,CAA/B,CASA,KAAKiL,OAAL,CAAa75C,IAAb,CAAkB6wC,IAAlB,EAEAmJ,iCAAoB,CAAC,KAAK9I,KAAN,CAAajmC,OAAO,CAAC/R,MAArB,CAA6BpB,GAA7B,CAAkC,KAAKm8B,KAAvC,CAApB,CACD,C,4BAGH,GAAM8lB,gCAAkB,CAAG,QAArBA,mBAAqB,CACzBz1C,KADyB,CAEzBxG,QAFyB,CAGzB7D,MAHyB,CAIzBg6B,KAJyB,CAOtB,IAFHC,QAEG,2DAFO,GAEP,IADH79B,EACG,2CACH,GAAMw6C,KAAI,CAAG,GAAI/c,kBAAJ,CACX,GAAI7uB,aAAJ,CAAW,CAAExP,CAAC,CAAEqI,QAAQ,CAACrI,CAAd,CAAiBE,CAAC,CAAEmI,QAAQ,CAACnI,CAA7B,CAAgCU,CAAC,CAADA,CAAhC,CAAX,CADW,CAEX,GAAI4O,aAAJ,CAAW,CAAExP,CAAC,CAAEwE,MAAM,CAACxE,CAAZ,CAAeE,CAAC,CAAEsE,MAAM,CAACtE,CAAzB,CAA4BU,CAAC,CAADA,CAA5B,CAAX,CAFW,CAGX,EAHW,CAIX,CACE49B,KAAK,CAALA,KADF,CAEEC,OAAO,CAAPA,OAFF,CAGEltB,IAAI,CAAE,cAHR,CAIE2uB,WAAW,CAAE,EAJf,CAKEpB,WAAW,CAAE,CALf,CAMEqB,mBAAmB,CAAE,IANvB,CAJW,CAAb,CAcAib,IAAI,CAACc,KAAL,CAAWrtC,KAAX,EAEA,MAAOusC,KAAP,CACD,CAzBD,CA2BA,GAAMmJ,kCAAoB,CAAG,QAAvBA,qBAAuB,CAAC9I,KAAD,CAAQh4C,MAAR,CAAgBe,MAAhB,CAAwBg6B,KAAxB,CAAkC,CAC7Did,KAAK,CAACzO,IAAN,GACAyO,KAAK,CAAC1nC,WAAN,CAAkBvP,MAAlB,EACAi3C,KAAK,CAAC5O,SAAN,CAAgB,CAACjoC,gBAAgB,CAACnB,MAAD,CAAjC,EACAg4C,KAAK,CAAC+I,oBAAN,CAA2BhmB,KAA3B,EACAid,KAAK,CAAC5S,UAAN,CAAiB,GAAjB,EAEA4S,KAAK,CAACZ,OAAN,CACG4J,iBADH,GAEG/X,YAFH,CAEgBlO,KAFhB,EAGGuO,oBAHH,CAGwB,CAHxB,EAIGC,IAJH,GAKA;;;;;;;;;;;;;;IAeD,CA3BD,CA+BemX,mFAAf,E;;GC5HMO,wC,yBACJ,6BAAY71C,KAAZ,CAAmBozC,iBAAnB,CAAsC7B,WAAtC,CAAmD,CAAC,oEAClD,KAAKvxC,KAAL,CAAaA,KAAb,CACA,KAAKozC,iBAAL,CAAyBA,iBAAzB,CACA,KAAKlnC,OAAL,CAAe,IAAf,CACA,KAAKqlC,WAAL,CAAmBA,WAAnB,CAEA,KAAKuE,KAAL,CAAa,EAAb,CACD,C,kGAEOxzC,I,CAAM,CACZ,MAAO,MAAKwzC,KAAL,CAAWllC,IAAX,CAAgB,SAAAmlC,IAAI,QAAIA,KAAI,CAACzzC,IAAL,CAAUyB,EAAV,GAAiBzB,IAAI,CAACyB,EAA1B,EAApB,CAAP,CACD,C,sCAEMqgB,Q,CAAU,CACf,KAAKlY,OAAL,CAAekY,QAAQ,CAAClY,OAAxB,CACD,C,mEAEsB,gBACrB,KAAK4pC,KAAL,CAAWt6C,OAAX,CAAmB,SAAAu6C,IAAI,QAAIA,KAAI,CAACC,YAAL,CAAkBlkB,MAAlB,CAAyB,KAAI,CAAC9xB,KAA9B,CAAJ,EAAvB,EACA,KAAK81C,KAAL,CAAa,EAAb,CACD,C,0DAEgBxzC,I,CAAM,CACrB,GAAMyzC,KAAI,CAAG,KAAKE,OAAL,CAAa3zC,IAAb,CAAb,CACA,GAAI,CAACyzC,IAAL,CAAW,CACT,OACD,CAEDA,IAAI,CAACC,YAAL,CAAkBlkB,MAAlB,CAAyB,KAAK9xB,KAA9B,EACA,KAAK81C,KAAL,CAAa,KAAKA,KAAL,CAAW5xC,MAAX,CAAkB,SAAA6xC,IAAI,QAAIA,KAAI,CAACzzC,IAAL,GAAcA,IAAlB,EAAtB,CAAb,CACD,C,0DAEgBA,I,CAAM,CACrB,GAAIyzC,KAAI,CAAG,KAAKE,OAAL,CAAa3zC,IAAb,CAAX,CAEA,GAAI,CAACyzC,IAAL,CAAW,CACTA,IAAI,CAAG,CACLzzC,IAAI,CAAJA,IADK,CAELsqC,KAAK,CAAE,KAAKwG,iBAAL,CAAuBU,sBAAvB,CAA8CxxC,IAA9C,CAFF,CAGL0zC,YAAY,CAAE,IAHT,CAAP,CAKA,KAAKF,KAAL,CAAWp6C,IAAX,CAAgBq6C,IAAhB,EACD,CAED,GAAIA,IAAI,CAACC,YAAT,CAAuB,CACrB;AACAD,IAAI,CAACC,YAAL,CAAkBlkB,MAAlB,CAAyB,KAAK9xB,KAA9B,EACD,CAED+1C,IAAI,CAACzzC,IAAL,CAAYA,IAAZ,CAEAyzC,IAAI,CAACC,YAAL,CAAoB,GAAIV,sBAAJ,CAClBhzC,IADkB,CAElB,KAAKtC,KAFa,CAGlB,KAAKkM,OAHa,CAIlB6pC,IAAI,CAACnJ,KAJa,CAKlBtqC,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAe,KAAKF,WAApB,CALkB,CAApB,CAOD,C,mCAGYsE,wGAAf,E;;AChEO,GAAMK,MAAK,CAAG,OAAd,CACA,GAAMC,OAAM,CAAG,QAAf,CACA,GAAMC,SAAQ,CAAG,UAAjB,CACA,GAAMC,UAAS,CAAG,WAAlB,C;;ACHA,GAAMC,WAAU,CAAG,YAAnB,CACA,GAAMC,KAAI,CAAG,MAAb,C;;ACDP,GAAMC,8BAA6B,CAAG,QAAhCA,8BAAgC,CAACjrC,OAAD,CAAU6nC,iBAAV,CAAgC,CACpE,GAAMqD,YAAW,CAAGlrC,OAAO,CAAC6hB,QAAR,CAAiBlpB,MAAjB,CAClB,SAAC+qB,MAAD,QACEA,OAAM,WAAY93B,OAAM,CAACq0C,UAAzB,EAAuC,CAACvc,MAAM,CAAC3sB,IAAP,CAAY2J,WAAZ,EAD1C,EADkB,CAApB,CAKA,GAAIwqC,WAAW,CAAClkD,MAAZ,CAAqB,CAAzB,CAA4B,CAC1B,MAAOkkD,YAAP,CACD,CAED,MAAOrD,kBAAiB,CACrBsD,mBADI,CACgBnrC,OADhB,EAEJrH,MAFI,CAEG,SAACzE,IAAD,QAAU,CAACA,IAAI,CAAC6C,IAAL,CAAU2J,WAAV,EAAX,EAFH,CAAP,CAGD,CAbD,C,GAeM0qC,4B,yBACJ,uBAAYC,QAAZ,CAAsB,CAAC,8DACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKrgC,UAAL,CAAkB,EAAlB,CACA,KAAKsgC,QAAL,CAAgB,IAAhB,CAEA,KAAKzyB,QAAL,CAAgB,IAAhB,CAEA,KAAK0yB,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,KAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CACA,KAAKC,mBAAL,CAA2B,IAA3B,CACD,C,4FAEOj2C,I,CAAMmK,O,CAAS,CACrB,KAAK+rC,cAAL,CAAoBl2C,IAApB,CAA0BmK,OAA1B,EACD,C,0DAEgBI,Q,CAAU,CACzB,KAAK4K,UAAL,CAAgB/a,OAAhB,CAAwB,SAACgb,QAAD,QAAcA,SAAQ,CAACma,MAAT,CAAgBhlB,QAAhB,CAAd,EAAxB,EACD,C,+DAEoB,gBACnB,KAAK4K,UAAL,CAAgB/a,OAAhB,CAAwB,SAACgb,QAAD,QAAcA,SAAQ,CAAC+gC,QAAT,CAAkB,KAAI,CAACX,QAAvB,CAAd,EAAxB,EACD,C,sDAEcY,Y,CAAcjsC,O,CAAS,CACpC,KAAKgL,UAAL,CAAgB/a,OAAhB,CAAwB,SAACgb,QAAD,CAAc,CACpC,GAAIA,QAAQ,CAACghC,YAAD,CAAR,GAA2B,CAACjsC,OAAD,EAAY,CAACA,OAAO,CAACksC,OAAhD,CAAJ,CAA8D,CAC5DjhC,QAAQ,CAACghC,YAAD,CAAR,CAAuBjsC,OAAvB,EACD,CACF,CAJD,EAKD,C,sCAEM/O,mB,CAAqBwD,K,CAAOF,I,CAAM,CACvC,KAAK43C,eAAL,CAAqB,KAAKZ,eAA1B,EACA,KAAKa,wBAAL,CAA8B,KAAKb,eAAnC,EAFuC,mBAIa,KAAKF,QAJlB,CAI/BxD,iBAJ+B,gBAI/BA,iBAJ+B,CAIZwE,oBAJY,gBAIZA,oBAJY,CAMvC,GAAMpJ,cAAa,CAAG,CACpBr2C,KAAK,CAAE,KAAK6+C,gBADQ,CAEpBxzC,KAAK,CAAE,KAAK0zC,kBAFQ,CAGpBvY,IAAI,CAAE,KAAKwY,iBAHS,CAIpBr3C,IAAI,CAAJA,IAJoB,CAAtB,CAMA,KAAKw3C,cAAL,CAAoB,QAApB,CAA8B9I,aAA9B,EACA4E,iBAAiB,EAAIA,iBAAiB,CAAC/N,MAAlB,CAAyBmJ,aAAzB,CAArB,CACAoJ,oBAAoB,EAAIA,oBAAoB,CAACvS,MAArB,CAA4BmJ,aAA5B,CAAxB,CACA,MAAOA,cAAP,CACD,C,oDAEaj7C,K,CAAOC,G,CAAK,CACxB,KAAKyjD,kBAAL,CAA0B1jD,KAA1B,CACA,KAAK2jD,kBAAL,CAA0B3jD,KAA1B,CACA,KAAKwjD,iBAAL,CAAyB,KAAzB,CACA,KAAKI,iBAAL,CAAyB,IAAzB,CACA,KAAKH,gBAAL,CAAwB,CAAxB,CACA,KAAKI,gBAAL,CAAwB5jD,GAAxB,CACA,KAAKsjD,eAAL,CAAuB,KAAvB,CACD,C,uDAEgB,CACf,KAAKA,eAAL,CAAuB,IAAvB,CACD,C,2DAEkB,CACjB,KAAKC,iBAAL,CAAyB,KAAzB,CACA,KAAKD,eAAL,CAAuB,KAAvB,CACD,C,6EAE2B,CAC1B,KAAKC,iBAAL,CAAyB,IAAzB,CACA,KAAKD,eAAL,CAAuB,KAAvB,CACD,C,0DAEgBhnB,I,CAAM,CACrB,KAAKonB,kBAAL,CAA0BpnB,IAA1B,CACA,KAAKqnB,iBAAL,CAAyB,IAAzB,CACA,KAAKH,gBAAL,CAAwB,CAAxB,CACD,C,2EAE0B,CACzB,GAAI,KAAKF,eAAT,CAA0B,CACxB,OACD,CAED,GAAI,KAAKC,iBAAT,CAA4B,CAC1B,KAAKG,kBAAL,EAA2B,KAAKF,gBAAhC,CACA,GAAI,KAAKE,kBAAL,CAA0B,KAAKD,kBAAnC,CAAuD,CACrD,KAAKC,kBAAL,CAA0B,KAAKD,kBAA/B,CACA,KAAKH,eAAL,CAAuB,IAAvB,CACD,CACF,CAND,IAMO,CACL,KAAKI,kBAAL,EAA2B,KAAKF,gBAAhC,CACA,GACE,KAAKI,gBAAL,EACA,KAAKF,kBAAL,EAA2B,KAAKE,gBAFlC,CAGE,CACA,KAAKF,kBAAL,CAA0B,KAAKE,gBAA/B,CACA,KAAKN,eAAL,CAAuB,IAAvB,CACD,CACF,CACF,C,yDAEiB,CAChB,GAAMjmB,IAAG,CAAGC,IAAI,CAACD,GAAL,EAAZ,CAEA,GAAI,CAAC,KAAKsmB,iBAAV,CAA6B,CAC3B,KAAKA,iBAAL,CAAyBtmB,GAAzB,CACA,KAAKmmB,gBAAL,CAAwB,CAAxB,CACD,CAED,KAAKA,gBAAL,CAAwBnmB,GAAG,CAAG,KAAKsmB,iBAAnC,CAEA,KAAKA,iBAAL,CAAyBtmB,GAAzB,CACD,C,sCAEMllB,Q,CAAU,IACPwpC,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAGf,KAAK/wB,QAAL,CAAgBzY,QAAhB,CACAwpC,OAAO,CAAC0C,WAAR,CAAoBlsC,QAApB,EACA,KAAKmsC,gBAAL,CAAsBnsC,QAAtB,EAEA,MAAO,KAAP,CACD,C,2CAEU,CACT,KAAKkrC,QAAL,CAAgB,KAAhB,CACA,KAAKkB,kBAAL,GACA,MAAO,KAAP,CACD,C,+CAEY,CACX,KAAKlB,QAAL,CAAgB,IAAhB,CACA,KAAKS,cAAL,CAAoB,YAApB,EAEA,MAAO,KAAP,CACD,C,kDAEYl2C,I,CAAMmK,O,CAAS,CAC1B,KAAK+rC,cAAL,CAAoBl2C,IAApB,CAA0BmK,OAA1B,EACD,C,oDAEaA,O,CAAS,CACrB,KAAK+rC,cAAL,CAAoB,UAApB,CAAgC/rC,OAAhC,EACD,C,gDAEWA,O,CAAS,CACnB,KAAK+rC,cAAL,CAAoB,QAApB,CAA8B/rC,OAA9B,EACD,C,+CAEY,CACX,MAAO,KAAP,CACD,C,8CAEUysC,a,CAAe,CAAE,C,6BAGfrB,2FAAf,E;;GCjLMsB,sC,qcACGtsC,Q,CAAU,CACf,gIAAaA,QAAb,EADe,GAEPwpC,QAFO,CAEK,KAAKyB,QAFV,CAEPzB,OAFO,CAGfA,OAAO,CAAC+C,QAAR,CAAiB,IAAjB,EAEA,MAAO,KAAP,CACD,C,wCAEO92C,I,CAAMmK,O,CAAS,CACrB,OAAQnK,IAAR,EACE,IAAK,UAAL,CACE,MAAO,MAAKw1C,QAAL,CAAcoB,aAAd,CAA4BG,QAA5B,CAAqC5sC,OAAO,CAACxH,EAA7C,CAAP,CACF,IAAK,WAAL,CACE,MAAO,MAAK6yC,QAAL,CAAcoB,aAAd,CAA4BI,SAA5B,CAAsC7sC,OAAO,CAACxH,EAA9C,CAAP,CACF,IAAK,UAAL,CACE,MAAO,MAAK6yC,QAAL,CAAcoB,aAAd,CAA4BK,QAA5B,CACL9sC,OAAO,CAACsiC,IAAR,CAAa9pC,EADR,CAELwH,OAAO,CAACQ,KAFH,CAAP,CAIF,QACE,OAAO,iIAAc3K,IAArB,CAA2BmK,OAA3B,EAXJ,CAaD,C,+CAEY,CACX,qIADW,GAEH4pC,QAFG,CAES,KAAKyB,QAFd,CAEHzB,OAFG,CAGXA,OAAO,CAAC+C,QAAR,CAAiB,KAAjB,EAEA,MAAO,KAAP,CACD,C,gCA/B8BvB,2B,EAkClBsB,0GAAf,E;;GCpCMK,sB,yBACJ,qBAAc,CAAC,2DACb,KAAK1B,QAAL,CAAgB,IAAhB,CACA,KAAKxyB,QAAL,CAAgB,IAAhB,CACD,C,gGAEY,CAAE,C,0CAENwyB,Q,CAAU,CACjB,KAAKA,QAAL,CAAgBA,QAAhB,CACD,C,sCAEMxyB,Q,CAAU,CACf,KAAKA,QAAL,CAAgBA,QAAhB,CACD,C,4CAES7Y,O,CAAS,CACjBA,OAAO,CAACksC,OAAR,CAAkB,IAAlB,CACD,C,0BAGYa,+EAAf,E;;GCnBMC,sD,gfACS,IACHC,oBADG,CACqB,KAAK5B,QAD1B,CACH4B,mBADG,CAEXA,mBAAmB,CAACC,oBAApB,GACD,C,oDAEaltC,O,CAAS,IACbitC,oBADa,CACW,KAAK5B,QADhB,CACb4B,mBADa,CAErBA,mBAAmB,CAACC,oBAApB,GACAD,mBAAmB,CAACE,gBAApB,CAAqCntC,OAAO,CAAC0jB,MAAR,CAAe3sB,IAApD,EACD,C,mDAEc,IACLk2C,oBADK,CACmB,KAAK5B,QADxB,CACL4B,mBADK,CAEbA,mBAAmB,CAACC,oBAApB,GACD,C,wCAfsCH,qB,EAkB1BC,+HAAf,E;;AClBA,GAAME,qBAAoB,CAAG,QAAvBA,qBAAuB,CAAArF,iBAAiB,CAAI,CAChDA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAASiE,IAAT,CAAe,CAClDA,IAAI,CAACm5C,gBAAL,GACD,CAFD,EAGD,CAJD,C,GAMMC,kD,seACS,IACHzF,kBADG,CACmB,KAAKwD,QADxB,CACHxD,iBADG,CAEXqF,oBAAoB,CAACrF,iBAAD,CAApB,CACD,C,sCAEMhvB,Q,CAAU,IACP+wB,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAEf,sIAAa/wB,QAAb,EAEA,GAAM9hB,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CACA,GAAIx2C,IAAJ,CAAU,CACR,KAAKiE,gBAAL,CAAsBjE,IAAtB,EACD,CACF,C,0DAEgBA,I,CAAM,oBACkB,KAAKs0C,QADvB,CACbxD,iBADa,gBACbA,iBADa,CACM+B,OADN,gBACMA,OADN,CAGrB,GAAIA,OAAO,CAAC2D,eAAR,KAA8Bx2C,IAA9B,EAAsC,CAAC,KAAK8hB,QAAhD,CAA0D,CACxD,OACD,CAEDq0B,oBAAoB,CAACrF,iBAAD,CAApB,CACAA,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,EAAkCo2C,gBAAlC,CAAmD,KAAKt0B,QAAL,CAAclY,OAAjE,EACD,C,kDAEY5J,I,CAAM,IACT8wC,kBADS,CACa,KAAKwD,QADlB,CACTxD,iBADS,CAEjB,GAAI,CAAC,KAAKhvB,QAAV,CAAoB,CAClB,OACD,CAEDq0B,oBAAoB,CAACrF,iBAAD,CAApB,CACAA,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,EAAkCo2C,gBAAlC,CAAmD,KAAKt0B,QAAL,CAAclY,OAAjE,EACD,C,kDAEYX,O,CAAS,IACZ4pC,QADY,CACA,KAAKyB,QADL,CACZzB,OADY,CAEpB,GAAM7yC,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CACA,GAAIx2C,IAAJ,CAAU,CACR,KAAKiE,gBAAL,CAAsBjE,IAAtB,EACD,CACF,C,uDAEgB,IACP8wC,kBADO,CACe,KAAKwD,QADpB,CACPxD,iBADO,CAEfqF,oBAAoB,CAACrF,iBAAD,CAApB,CACD,C,sCAhDoCkF,qB,EAmDxBO,yHAAf,E;;GClDME,4C,2GACJ,gCAAc,iFACZ,6IAEA,MAAKza,MAAL,CAAc,KAAd,CACA,MAAK0a,UAAL,CAAkB,CAAlB,CACA,MAAKv5C,IAAL,CAAY,IAAZ,CACA;AANY,aAOb,C,+FAEM,IACG2zC,kBADH,CACyB,KAAKwD,QAD9B,CACGxD,iBADH,CAEL,GAAI,KAAK3zC,IAAT,CAAe,CACb,KAAKA,IAAL,CAAUw5C,cAAV,GACA,KAAKx5C,IAAL,CAAUusC,OAAV,CAAkBlO,WAAlB,GACA,KAAKr+B,IAAL,CAAUwsC,UAAV,CAAqBzwC,OAArB,CAA6B,SAAAmiC,MAAM,QAAIA,OAAM,CAACG,WAAP,EAAJ,EAAnC,EACA,GAAM8O,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyC,KAAKr0C,IAAL,CAAU6C,IAAnD,CAAd,CACAsqC,KAAK,CAACsM,aAAN,GACAtM,KAAK,CAACZ,OAAN,CAAc4J,iBAAd,GACAhJ,KAAK,CAACZ,OAAN,CAAclO,WAAd,GACD,CAED,KAAKr+B,IAAL,CAAY,IAAZ,CACD,C,+CAEY,CACX,KAAKm+B,IAAL,GACD,C,kDAEYt7B,I,CAAM,IACT8wC,kBADS,CACa,KAAKwD,QADlB,CACTxD,iBADS,CAEjB,KAAK9U,MAAL,CAAc,IAAd,CACA,KAAK0a,UAAL,CAAkB,CAAlB,CACA,KAAKv5C,IAAL,CAAY2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAZ,CACD,C,sDAEcA,I,CAAM,IACX8wC,kBADW,CACW,KAAKwD,QADhB,CACXxD,iBADW,CAEnB,KAAK9U,MAAL,CAAc,IAAd,CACA,KAAK0a,UAAL,CAAkB,CAAlB,CAEA,KAAKpb,IAAL,GACD,C,2CAEiB,IAATzlC,MAAS,MAATA,KAAS,IACRi7C,kBADQ,CACc,KAAKwD,QADnB,CACRxD,iBADQ,CAGhB,GAAI,CAAC,KAAK9U,MAAV,CAAkB,CAChB,OACD,CAED,GAAMuH,cAAa,CAAG,CAAtB,CACA,GAAMD,cAAa,CAAG,GAAtB,CAEA,GAAIhW,QAAO,CACT,IAAMt+B,IAAI,CAAC4D,GAAL,CAAS,KAAK8jD,UAAL,CAAkBpT,aAA3B,CAAN,CAAkDC,aAAa,CAAG,GADpE,CAEAjW,OAAO,CAAG,IAAM,IAAMA,OAAtB,CAEA,GAAMgd,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyC,KAAKr0C,IAAL,CAAU6C,IAAnD,CAAd,CAEA;AAEA,GAAMqtB,MAAK,CAAGh1B,wBAAwB,CAACC,KAAzB,GAAiCC,cAAjC,CAAgD+0B,OAAhD,CAAd,CAEA,KAAKnwB,IAAL,CAAUuuC,eAAV,CAA0Bre,KAA1B,EAEAid,KAAK,CAAC+I,oBAAN,CAA2BhmB,KAA3B,EACAid,KAAK,CAACe,cAAN,CAAqB/d,OAArB,EACAgd,KAAK,CAACZ,OAAN,CACG4J,iBADH,GAEG/X,YAFH,CAEgBlO,KAFhB,EAGGuO,oBAHH,CAGwB,CAHxB,EAIA,KAAKz+B,IAAL,CAAUwsC,UAAV,CAAqBzwC,OAArB,CAA6B,SAAAmiC,MAAM,QAAIA,OAAM,CAACE,YAAP,CAAoBlO,KAAK,CAAC/0B,KAAN,EAApB,CAAJ,EAAnC,EACA,KAAK6E,IAAL,CAAUusC,OAAV,CAAkBnO,YAAlB,CAA+BlO,KAA/B,EACA,KAAKqpB,UAAL,EAAmB7gD,KAAnB,CACD,C,mCA3EiCmgD,qB,EA8ErBS,gHAAf,E;;GCrFMI,8C,4dACS,IACHhE,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACiE,gBAAR,GACD,C,sCAEMh1B,Q,CAAU,CACf,oIAAaA,QAAb,EACA,KAAK7d,gBAAL,GACD,C,2DAEkB,IACT4uC,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAM7yC,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CAEA,GAAIx2C,IAAJ,CAAU,CACR6yC,OAAO,CAACkE,gBAAR,CAAyB/2C,IAAzB,CAA+B,IAA/B,EACD,CACF,C,kDAEYA,I,CAAM,IACT6yC,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjBA,OAAO,CAACkE,gBAAR,CAAyB/2C,IAAzB,CAA+B,IAA/B,EACD,C,uDAEgB,IACP6yC,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAEfA,OAAO,CAACiE,gBAAR,GACD,C,oCA5BkCd,qB,EA+BtBa,iHAAf,E;;GC7BMG,wC,yGACJ,8BAAc,+EACZ,2IAEA,MAAKC,KAAL,CAAa,EAAb,CAHY,aAIb,C,yGAEY,IACHv5C,MADG,CACO,KAAK42C,QADZ,CACH52C,KADG,CAEX,KAAKu5C,KAAL,CAAW/9C,OAAX,CAAmB,SAAAg+C,IAAI,CAAI,CACzBA,IAAI,CAACC,OAAL,CAAaj+C,OAAb,CAAqB,SAAAmiC,MAAM,CAAI,CAC7B39B,KAAK,CAAC8xB,MAAN,CAAa6L,MAAM,CAACjO,IAApB,EACAiO,MAAM,CAACoV,OAAP,GACD,CAHD,EAID,CALD,EAMD,C,sCAEM3uB,Q,CAAU,CACf,iIAAaA,QAAb,EADe,mBAEqC,KAAKwyB,QAF1C,CAEP52C,KAFO,gBAEPA,KAFO,CAEAxD,mBAFA,gBAEAA,mBAFA,CAEqB+0C,WAFrB,gBAEqBA,WAFrB,CAIf,KAAKgI,KAAL,CAAan1B,QAAQ,CAACs1B,KAAT,CAAeC,QAAf,GAA0Bv9C,GAA1B,CAA8B,SAAAyxC,IAAI,CAAI,CACjD,GAAMlW,SAAQ,CAAGkW,IAAI,CAAC+L,kBAAL,CAAwBt9C,MAAxB,CAA+BuxC,IAAI,CAACgM,gBAApC,CAAjB,CAEA,GAAIlqB,MAAK,CAAG,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAZ,CACA,GAAIqzC,IAAI,CAACiM,OAAL,CAAavI,WAAb,CAAJ,CAA+B,CAC7B5hB,KAAK,CAAG,GAAIn1B,sBAAJ,CAAgB,GAAK,GAArB,CAA0B,IAAM,GAAhC,CAAqC,GAAK,GAA1C,CAAR,CACD,CAFD,IAEO,IAAI,CAAC4pB,QAAQ,CAACs1B,KAAT,CAAeK,eAAf,CAA+BlM,IAA/B,CAAqC0D,WAArC,CAAL,CAAwD,CAC7D5hB,KAAK,CAAG,GAAIn1B,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,GAAK,GAA1C,CAAR,CACD,CAED,MAAO,CACLqzC,IAAI,CAAJA,IADK,CAEL4L,OAAO,CAAE9hB,QAAQ,CAACv7B,GAAT,CAAa,SAAAwB,GAAG,CAAI,CAC3B,GAAM+/B,OAAM,CAAG,GAAI7E,qBAAJ,CACbt8B,mBAAmB,CAACC,aAApB,CAAkCmB,GAAlC,CADa,CAAf,CAIA+/B,MAAM,CAAC3D,UAAP,CAAkB,GAAlB,EACA2D,MAAM,CAACM,eAAP,CAAuBtO,KAAvB,EACAgO,MAAM,CAACO,oBAAP,CAA4B,GAA5B,EAEAl+B,KAAK,CAAC5M,GAAN,CAAUuqC,MAAM,CAACjO,IAAjB,EAEA,MAAOiO,OAAP,CACD,CAZQ,CAFJ,CAAP,CAgBD,CA1BY,CAAb,CA2BD,C,8CAEUr7B,I,CAAM,CAAE,C,iCAlDag2C,qB,EAqDnBgB,0GAAf,E;;;;;ACtDA,GAAMU,0CAAiB,CAAG,QAApBA,kBAAoB,CAACC,WAAD,CAAc5b,SAAd,QAA6B,CACrDltC,CAAC,CAAEktC,SAAS,GAAK4b,WAAd,CAA4BA,WAAW,CAAG,CADQ,CAErD5oD,CAAC,CAAEgtC,SAAS,GAAK4b,WAAd,CAA4BA,WAAW,CAAG,CAFQ,CAA7B,EAA1B,CAKA,GAAMC,4CAAmB,CAAG,QAAtBA,oBAAsB,CAAAC,YAAY,CAAI,CAC1C,MAAO,IAAI3/C,iCAAJ,CACL,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADK,CAEL,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAFK,CAGL,GAAIA,wBAAJ,CAAkB2/C,YAAY,CAAChpD,CAAb,CAAiB,CAAC,CAApC,CAAuCgpD,YAAY,CAAC9oD,CAAb,CAAiB,CAAC,CAAzD,CAHK,CAIL,GAAImJ,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAJK,CAAP,CAMD,CAPD,CASA,GAAM4/C,8CAAqB,CAAG,QAAxBA,sBAAwB,CAACC,eAAD,CAAkBF,YAAlB,CAAmC,CAC/D,MAAO,IAAI3/C,iCAAJ,CACL,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADK,CAEL,GAAIA,wBAAJ,CAAkB6/C,eAAe,CAAClpD,CAAlC,CAAqCkpD,eAAe,CAAChpD,CAArD,CAFK,CAGL,GAAImJ,wBAAJ,CAAkB2/C,YAAY,CAAChpD,CAAb,CAAiB,CAAC,CAApC,CAAuCgpD,YAAY,CAAC9oD,CAAb,CAAiB,CAAC,CAAzD,CAHK,CAIL,GAAImJ,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAJK,CAAP,CAMD,CAPD,CASA,GAAM8/C,uBAAsB,CAAG,QAAzBA,uBAAyB,CAACr1C,OAAD,CAAUg1C,WAAV,CAAuB5b,SAAvB,CAAqC,CAClE,GAAMkc,OAAM,CAAG,EAAf,CAEA,GAAIt1C,OAAO,GAAK,CAAhB,CAAmB,CACjB,MAAO,EAAP,CACD,CAED,GAAMu1C,UAAS,CAAG,GAAIC,MAAJ,CAAUx1C,OAAO,CAAG,CAApB,EACfkvB,IADe,CACV,CADU,EAEf/3B,GAFe,CAEX,SAAA/J,CAAC,QAAI2nD,0CAAiB,CAACC,WAAD,CAAc5b,SAAd,CAArB,EAFU,CAAlB,CAIA,IAAK,GAAIhsC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGmoD,SAAS,CAACjoD,MAA9B,CAAsCF,CAAC,EAAvC,CAA2C,CACzC,GAAMmH,SAAQ,CAAGghD,SAAS,CAACnoD,CAAD,CAA1B,CACA,GAAM8nD,aAAY,CAChB9nD,CAAC,GAAKmoD,SAAS,CAACjoD,MAAV,CAAmB,CAAzB,CAA6B,CAAEpB,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAA7B,CAA8CmpD,SAAS,CAACnoD,CAAC,CAAG,CAAL,CADzD,CAGA,GAAIA,CAAC,GAAK,CAAV,CAAa,CACXkoD,MAAM,CAAC7+C,IAAP,CAAYw+C,2CAAmB,CAACC,YAAD,CAA/B,EACD,CAFD,IAEO,CACLI,MAAM,CAAC7+C,IAAP,CAAY0+C,6CAAqB,CAAC5gD,QAAD,CAAW2gD,YAAX,CAAjC,EACD,CACF,CAED,MAAOI,OAAP,CACD,CAxBD,C,GA0BMG,gD,yBACJ,iCAAYxoD,IAAZ,CAAkB+S,OAAlB,CAA2B,CAAC,wEAC1B,KAAKA,OAAL,CAAeA,OAAf,CAEA,KAAKs1C,MAAL,CAAcD,sBAAsB,CAClC,KAAKr1C,OAD6B,CAElC,IAAM,KAAKA,OAFuB,CAGlChT,wBAAwB,CAACC,IAAD,CAHU,CAApC,CAKD,C,0GAESyoD,O,CAAS,CACjB,GAAI,KAAK11C,OAAL,GAAiB,CAArB,CAAwB,CACtB,MAAO,CAAE9T,CAAC,CAAE,CAAL,CAAQE,CAAC,CAAE,CAAX,CAAP,CACD,CAED,GAAMgQ,MAAK,CAAG,CAAC,KAAKk5C,MAAL,CAAYhoD,MAAZ,CAAqB,CAAtB,EAA2BooD,OAAzC,CACA,GAAMC,YAAW,CAAGtpD,IAAI,CAACuC,KAAL,CAAWwN,KAAX,CAApB,CACA,GAAMw5C,QAAO,CAAGx5C,KAAK,CAAG/P,IAAI,CAACuC,KAAL,CAAWwN,KAAX,CAAxB,CAEA,GAAMy5C,MAAK,CAAG,KAAKP,MAAL,CAAYK,WAAZ,CAAd,CACA,MAAOE,MAAK,CAACC,QAAN,CAAeF,OAAf,CAAP,CACD,C,uCAGYH,iIAAf,E;;ACxEA,GAAMM,aAAY,CAAG,QAAfA,aAAe,CACnBC,aADmB,CAEnBC,aAFmB,CAGnBC,OAHmB,CAInBC,YAJmB,CAKnB74C,IALmB,CAMhB,CACH,GAAI,CAAC44C,OAAO,CAACC,YAAY,CAAG,CAAhB,CAAZ,CAAgC,CAC9B,GAAI,CAACH,aAAa,CAACC,aAAa,CAAG,CAAjB,CAAlB,CAAuC,CACrC,MAAO,KAAP,CACD,CAFD,IAEO,CACL,GAAMG,YAAW,CAAGJ,aAAa,CAACC,aAAa,CAAG,CAAjB,CAAb,CAAiCC,OAArD,CACA,GAAMxzC,SAAQ,CAAG0zC,WAAW,CAACA,WAAW,CAAC9oD,MAAZ,CAAqB,CAAtB,CAA5B,CACA,GAAI,CAACoV,QAAQ,CAAC/B,OAAT,EAAD,EAAuB+B,QAAQ,CAACrD,KAAT,GAAmB/B,IAAI,CAAC+B,KAAnD,CAA0D,CACxD,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CACF,CAZD,IAYO,CACL,GAAMqD,UAAQ,CAAGwzC,OAAO,CAACC,YAAY,CAAG,CAAhB,CAAxB,CACA,GAAI,CAACzzC,SAAQ,CAAC/B,OAAT,EAAD,EAAuB+B,SAAQ,CAACrD,KAAT,GAAmB/B,IAAI,CAAC+B,KAAnD,CAA0D,CACxD,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CACF,CA3BD,CA6BA,GAAMg3C,cAAa,CAAG,QAAhBA,cAAgB,CACpBL,aADoB,CAEpBC,aAFoB,CAGpBC,OAHoB,CAIpBC,YAJoB,CAKpB74C,IALoB,CAMjB,CACH,GAAI,CAAC44C,OAAO,CAACC,YAAY,CAAG,CAAhB,CAAZ,CAAgC,CAC9B,GAAI,CAACH,aAAa,CAACC,aAAa,CAAG,CAAjB,CAAlB,CAAuC,CACrC,MAAO,KAAP,CACD,CAFD,IAEO,CACL,GAAMK,YAAW,CAAGN,aAAa,CAACC,aAAa,CAAG,CAAjB,CAAb,CAAiCC,OAArD,CACA,GAAMK,SAAQ,CAAGD,WAAW,CAAC,CAAD,CAA5B,CACA,GAAI,CAACC,QAAQ,CAAC51C,OAAT,EAAD,EAAuB41C,QAAQ,CAACl3C,KAAT,GAAmB/B,IAAI,CAAC+B,KAAnD,CAA0D,CACxD,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CACF,CAZD,IAYO,CACL,GAAMk3C,UAAQ,CAAGL,OAAO,CAACC,YAAY,CAAG,CAAhB,CAAxB,CACA,GAAI,CAACI,SAAQ,CAAC51C,OAAT,EAAD,EAAuB41C,SAAQ,CAACl3C,KAAT,GAAmB/B,IAAI,CAAC+B,KAAnD,CAA0D,CACxD,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CACF,CA3BD,CA6BA,GAAMm3C,WAAU,CAAG,QAAbA,WAAa,CACjBR,aADiB,CAEjBC,aAFiB,CAGjBC,OAHiB,CAIjBC,YAJiB,CAKjB74C,IALiB,CAMd,CACH,GAAI,CAACA,IAAI,CAACqD,OAAL,EAAL,CAAqB,CACnB,MAAO,KAAP,CACD,CAED,MAAO,CACL8B,KAAK,CAAEnF,IAAI,CAAC+B,KAAL,GAAe,CAAf,CAAmB,EAAnB,CAAwB,CAAC,EAD3B,CAELo3C,MAAM,CAAEV,YAAY,CAClBC,aADkB,CAElBC,aAFkB,CAGlBC,OAHkB,CAIlBC,YAJkB,CAKlB74C,IALkB,CAFf,CASLo5C,OAAO,CAAEL,aAAa,CACpBL,aADoB,CAEpBC,aAFoB,CAGpBC,OAHoB,CAIpBC,YAJoB,CAKpB74C,IALoB,CATjB,CAAP,CAiBD,CA5BD,CA8BA,GAAMq5C,gCAAoB,CAAG,QAAvBA,qBAAuB,CAAAX,aAAa,CAAI,CAC5C,MAAOA,cAAa,CAAC7+C,GAAd,CAAkB,cAA0B8+C,aAA1B,CAA4C,IAAzC3nD,MAAyC,MAAzCA,KAAyC,CAAlCC,GAAkC,MAAlCA,GAAkC,CAA7B2nD,OAA6B,MAA7BA,OAA6B,CACnE,MAAO,CACLU,WAAW,CAAE9lD,gBAAgB,CAACxC,KAAK,CAACqB,MAAP,CADxB,CAELknD,SAAS,CAAE/lD,gBAAgB,CAACvC,GAAG,CAACoB,MAAL,CAFtB,CAGLmH,KAAK,CAAEo/C,OAAO,CAAC/+C,GAAR,CAAY,SAACmG,IAAD,CAAOlQ,CAAP,CAAa,CAC9B,MAAOopD,WAAU,CAACR,aAAD,CAAgBC,aAAhB,CAA+BC,OAA/B,CAAwC9oD,CAAxC,CAA2CkQ,IAA3C,CAAjB,CACD,CAFM,CAHF,CAAP,CAOD,CARM,CAAP,CASD,CAVD,CAYA,GAAMw5C,2BAAe,CAAG,QAAlBA,gBAAkB,CAAAhG,IAAI,CAAI,CAC9B,MAAOA,KAAI,CAAC35C,GAAL,CAAS,eAAuC,IAApCy/C,YAAoC,OAApCA,WAAoC,CAAvBC,SAAuB,OAAvBA,SAAuB,CAAZ//C,KAAY,OAAZA,KAAY,CACrD,MAAO,CACL8/C,WAAW,CAAXA,WADK,CAELC,SAAS,CAATA,SAFK,CAGL//C,KAAK,CAAEA,KAAK,CAACK,GAAN,CAAU,SAAAgL,IAAI,CAAI,CACvB,GAAIA,IAAI,GAAK,IAAb,CAAmB,CACjB,MAAO,CAAExS,MAAM,CAAEinD,WAAV,CAAP,CACD,CAED,GAAMG,QAAO,6CACR50C,IADQ,EAEXy0C,WAAW,CAAXA,WAFW,EAAb,CAKAA,WAAW,CAAG3oD,cAAc,CAAC2oD,WAAD,CAAcz0C,IAAI,CAACM,KAAnB,CAA5B,CACA,MAAOs0C,QAAP,CACD,CAZM,CAHF,CAAP,CAiBD,CAlBM,CAAP,CAmBD,CApBD,CAsBA,GAAMC,wBAAY,CAAG,QAAfA,aAAe,CAAAv0B,KAAK,CAAI,CAC5B,GAAMuzB,cAAa,CAAG,EAAtB,CACA,GAAIE,QAAO,CAAG,EAAd,CACA,GAAI5nD,MAAK,CAAG,IAAZ,CAEAm0B,KAAK,CAAClsB,OAAN,CAAc,SAAA+G,IAAI,CAAI,CACpB,GAAIA,IAAI,CAACwlB,QAAL,EAAJ,CAAqB,CACnBx0B,KAAK,CAAGgP,IAAR,CACD,CAFD,IAEO,IAAIA,IAAI,CAACulB,KAAL,IAAgB,CAACv0B,KAArB,CAA4B,CACjCA,KAAK,CAAGgP,IAAR,CACD,CAFM,IAEA,IAAIA,IAAI,CAACulB,KAAL,EAAJ,CAAkB,CACvBmzB,aAAa,CAACv/C,IAAd,CAAmB,CACjBnI,KAAK,CAAEA,KADU,CAEjB4nD,OAAO,CAAC,6CAAKA,OAAN,CAFU,CAGjB3nD,GAAG,CAAE+O,IAHY,CAAnB,EAMAhP,KAAK,CAAGgP,IAAR,CACA44C,OAAO,CAAG,EAAV,CACD,CATM,IASA,IAAI5nD,KAAK,EAAIgP,IAAI,CAACqD,OAAL,EAAb,CAA6B,CAClCu1C,OAAO,CAACz/C,IAAR,CAAa6G,IAAb,EACD,CAFM,IAEA,IAAIhP,KAAK,EAAIgP,IAAI,CAACoD,OAAL,EAAb,CAA6B,CAClCw1C,OAAO,CAACz/C,IAAR,CAAa6G,IAAb,EACD,CACF,CAnBD,EAqBA,MAAOw5C,2BAAe,CAACH,+BAAoB,CAACX,aAAD,CAArB,CAAtB,CACD,CA3BD,C,GA6BMiB,qB,yBACJ,mBAAYx0B,KAAZ,CAAmB,CAAC,0DAClB,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKquB,IAAL,CAAYkG,uBAAY,CAACv0B,KAAD,CAAxB,CACD,C,4FAES3iB,I,CAAMo3C,W,CAAa,CAC3B,GAAMpgD,MAAK,CAAG,KAAKg6C,IAAL,CAAUhxC,IAAV,GAAmB,KAAKgxC,IAAL,CAAU,KAAKA,IAAL,CAAUxjD,MAAV,CAAmB,CAA7B,CAAjC,CACA,GAAMA,OAAM,CAAGwJ,KAAK,CAACA,KAAN,CAAYxJ,MAA3B,CAEA,GAAIA,MAAM,GAAK,CAAf,CAAkB,CAChB,MAAOwJ,MAAK,CAAC+/C,SAAb,CACD,CAFD,IAEO,CACL,GAAMM,UAAS,CAAG,KAAKrG,IAAL,CAAUhxC,IAAV,EACdzT,IAAI,CAACuC,KAAL,CAAWtB,MAAM,CAAG4pD,WAApB,CADc,CAEd5pD,MAAM,CAAG,CAFb,CAGA,GAAM8pD,SAAQ,CAAG,KAAKtG,IAAL,CAAUhxC,IAAV,EAAmBxS,MAAM,CAAG4pD,WAAV,CAAyB,CAA3C,CAA+C,CAAhE,CAEA,GAAM/0C,KAAI,CAAGrL,KAAK,CAACA,KAAN,CAAYqgD,SAAZ,CAAb,CACA,GAAIh1C,IAAI,CAACxS,MAAL,GAAgBxD,SAApB,CAA+B,CAC7B,MAAOgW,KAAI,CAACxS,MAAZ,CACD,CACD,MAAO1B,eAAc,CAACkU,IAAI,CAACy0C,WAAN,CAAmBz0C,IAAI,CAACM,KAAL,CAAa20C,QAAhC,CAArB,CACD,CACF,C,yBAGYH,mEAAf,E;;GC/KMI,4C,yGACJ,+BAAYhK,QAAZ,CAAsB5qB,KAAtB,CAA6Bn0B,KAA7B,CAAoCC,GAApC,CAAyC,iFACvC,6IAEA,MAAK8+C,QAAL,CAAgBA,QAAhB,CACA,MAAK5qB,KAAL,CAAaA,KAAb,CAEA,MAAKgX,YAAL,CAAoB,IAApB,CAEA,MAAKnrC,KAAL,CAAaA,KAAb,CACA,MAAKC,GAAL,CAAWA,GAAX,CAEA,MAAK4b,QAAL,CAAgB5b,GAAG,CAAGD,KAAtB,CAEA,MAAKgpD,cAAL,CAAsB,MAAKC,aAAL,CAAmB90B,KAAnB,CAAtB,CACA,MAAK+0B,UAAL,CAAkB,GAAIC,WAAJ,CAAeh1B,KAAf,CAAlB,CAEA,MAAKi1B,SAAL,CAAiBj1B,KAAK,CAAC,CAAD,CAAL,CAAS5iB,MAAT,CAAkB,GAAlB,CAAwB,CAAzC,CACA,MAAK83C,OAAL,CACEl1B,KAAK,CAAC,CAAD,CAAL,CAAS5iB,MAAT,GAAoB4iB,KAAK,CAACA,KAAK,CAACn1B,MAAN,CAAe,CAAhB,CAAL,CAAwBuS,MAA5C,CACI,MAAK63C,SADT,CAEI,MAAKA,SAAL,CAAiB,GAHvB,CAKA,MAAKE,SAAL,CAAiB,GAAIriD,iCAAJ,CACf,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADe,CAEf,GAAIA,wBAAJ,CAAkB,IAAlB,CAAwB,CAAxB,CAFe,CAGf,GAAIA,wBAAJ,CAAkB,IAAlB,CAAwB,CAAxB,CAHe,CAIf,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAJe,CAAjB,CAOA;;;;;;;;;;;;;;;;;MAmBA4jC,mBAAS,CAAC0T,IAAV,0DAhDuC,aAiDxC,C,uGAEU,CACT,MAAO,CAAC,GAAInxC,aAAJ,CAAW,KAAK47C,cAAL,CAAoB,CAApB,EAAuBxB,QAAvB,CAAgC,CAAhC,CAAX,EAA+Cl9C,MAA/C,CACN,GAAI8C,aAAJ,CAAW,KAAK47C,cAAL,CAAoB,CAApB,EAAuBxB,QAAvB,CAAgC,CAAhC,CAAX,CADM,CAAR,CAGD,C,+CAEY,CAAE,C,sCAER32B,Q,CAAU,CAAE,C,yCAET,CAAE,C,uDAEK,CACf,MAAO,MAAK04B,oBAAL,CAA0B,CAA1B,CAA6B,CAA7B,CAAP,CACD,C,oDAEahtB,I,CAAM,CAClB,GAAMitB,SAAQ,CAAG,KAAKC,mBAAL,CAAyB,CAAEx5C,KAAK,CAAEssB,IAAT,CAAzB,CAAjB,CAEA,GAAM/qB,KAAI,CAAGzT,IAAI,CAACuC,KAAL,CAAWkpD,QAAX,CAAb,CACA,GAAMZ,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CAEA,MAAO,MAAKD,oBAAL,CAA0B/3C,IAA1B,CAAgCo3C,WAAhC,CAAP,CACD,C,qEAE8B,IAAT34C,MAAS,MAATA,KAAS,CAC7B,GAAIA,KAAK,CAAG,KAAKjQ,KAAjB,CAAwB,CACtB,MAAO,EAAP,CACD,CAED,GAAIiQ,KAAK,CAAG,KAAKhQ,GAAjB,CAAsB,CACpB,MAAO,EAAP,CACD,CAED,GAAMs8B,KAAI,CAAGtsB,KAAK,CAAG,KAAKjQ,KAA1B,CACA,MAAOu8B,KAAI,CAAG,KAAK1gB,QAAnB,CACD,C,sDAEc2tC,Q,CAAU,CACvB,GAAM5B,QAAO,CAAG,CAAC7mD,eAAe,CAAC,KAAKqoD,SAAN,CAAiB,KAAKC,OAAtB,CAAhC,CACA,GAAIzB,OAAO,GAAK,CAAhB,CAAmB,CACjB,MAAO,MAAKyB,OAAZ,CACD,CAED,MAAO1pD,eAAc,CACnB,KAAKypD,SADc,CAEnBxB,OAAO,CAAG,KAAK0B,SAAL,CAAe9B,QAAf,CAAwBgC,QAAxB,EAAkC1rD,CAFzB,CAArB,CAID,C,sCAEMka,O,CAAS,CACd,GACE,KAAK+mC,QAAL,CAAchwC,IAAd,CAAmB2J,WAAnB,IACA,CAAC,KAAKqmC,QAAL,CAAchwC,IAAd,CAAmB26C,mBAAnB,EAFH,CAGE,CACA,KAAK3K,QAAL,CAAc1U,IAAd,GACA,OACD,CAED,GAAMmf,SAAQ,CAAG,KAAKC,mBAAL,CAAyBzxC,OAAzB,CAAjB,CAEA,GAAMxG,KAAI,CAAGzT,IAAI,CAACuC,KAAL,CAAWkpD,QAAX,CAAb,CACA,GAAMZ,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CAZc,0BAce,KAAKD,oBAAL,CAA0B/3C,IAA1B,CAAgCo3C,WAAhC,CAdf,CAcN3iD,QAdM,uBAcNA,QAdM,CAcI5E,MAdJ,uBAcIA,MAdJ,CAgBd,GAAM4R,KAAI,CAAG,KAAK02C,cAAL,CAAoBH,QAApB,CAAb,CACA,KAAKzK,QAAL,CAAcptC,WAAd,CAA0B1L,QAA1B,EACA,KAAK84C,QAAL,CAActU,SAAd,CAAwB,CAACppC,MAAzB,EACA,KAAK09C,QAAL,CAAc6K,OAAd,CAAsB32C,IAAtB,EACD,C,kEAEoBzB,I,CAAMo3C,W,CAAa,CACtC,GAAM3iD,SAAQ,CAAG,KAAK+iD,cAAL,CAAoBx3C,IAApB,EACb,KAAKw3C,cAAL,CAAoBx3C,IAApB,EAA0Bg2C,QAA1B,CAAmCoB,WAAnC,CADa,CAEb,KAAKI,cAAL,CAAoB,KAAKA,cAAL,CAAoBhqD,MAApB,CAA6B,CAAjD,EAAoDwoD,QAApD,CAA6D,CAA7D,CAFJ,CAIA,GAAMnmD,OAAM,CAAG,KAAK6nD,UAAL,CAAgBj5B,SAAhB,CAA0Bze,IAA1B,CAAgCo3C,WAAhC,CAAf,CAEA,MAAO,CAAE3iD,QAAQ,CAARA,QAAF,CAAY5E,MAAM,CAANA,MAAZ,CAAP,CACD,C,oDAEa8yB,K,CAAO,iBACnB,GAAMuzB,cAAa,CAAG,EAAtB,CACA,GAAI1nD,MAAK,CAAG,IAAZ,CAEAm0B,KAAK,CAAClsB,OAAN,CAAc,SAAC+G,IAAD,CAAU,CACtB,GAAIA,IAAI,CAACwlB,QAAL,EAAJ,CAAqB,CACnBx0B,KAAK,CAAGgP,IAAR,CACD,CAFD,IAEO,IAAIA,IAAI,CAACulB,KAAL,IAAgB,CAACv0B,KAArB,CAA4B,CACjCA,KAAK,CAAGgP,IAAR,CACD,CAFM,IAEA,IAAIA,IAAI,CAACulB,KAAL,EAAJ,CAAkB,CACvBmzB,aAAa,CAACv/C,IAAd,CAAmB,CACjBnI,KAAK,CAAEA,KADU,CAEjBC,GAAG,CAAE+O,IAFY,CAAnB,EAKAhP,KAAK,CAAGgP,IAAR,CACD,CACF,CAbD,EAeA,GAAMg4C,OAAM,CAAGU,aAAa,CAAC7+C,GAAd,CAAkB,mBAAG7I,MAAH,OAAGA,KAAH,CAAUC,GAAV,OAAUA,GAAV,OAC/B,OAAI,CAAC4pD,kBAAL,CAAwB7pD,KAAxB,CAA+BC,GAA/B,CAD+B,EAAlB,CAAf,CAIA,MAAO+mD,OAAP,CACD,C,8DAEkBhnD,K,CAAOC,G,CAAK,CAC7B,GAAM8zC,cAAa,CAAG/zC,KAAK,CAACiG,QAA5B,CAEA,GAAM6jD,OAAM,CAAG/V,aAAa,CAAC/hC,gBAAd,EAAf,CACA,GAAM+3C,SAAQ,CAAGhW,aAAa,CAAC/hC,gBAAd,EAAjB,CACA,GAAMg4C,SAAQ,CAAG/pD,GAAG,CAACgG,QAAJ,CAAa+L,gBAAb,EAAjB,CACA,GAAMi4C,OAAM,CAAGhqD,GAAG,CAACgG,QAAJ,CAAa+L,gBAAb,EAAf,CAEA;;;;;MAR6B,CAe7B;;;;;;MAQA,MAAO,IAAI/K,kCAAJ,CACL,GAAIA,wBAAJ,CAAkB6iD,MAAM,CAAClsD,CAAzB,CAA4BksD,MAAM,CAAChsD,CAAnC,CAAsCgsD,MAAM,CAACtrD,CAA7C,CADK,CAEL,GAAIyI,wBAAJ,CAAkB8iD,QAAQ,CAACnsD,CAA3B,CAA8BmsD,QAAQ,CAACjsD,CAAvC,CAA0CisD,QAAQ,CAACvrD,CAAnD,CAFK,CAGL,GAAIyI,wBAAJ,CAAkB+iD,QAAQ,CAACpsD,CAA3B,CAA8BosD,QAAQ,CAAClsD,CAAvC,CAA0CksD,QAAQ,CAACxrD,CAAnD,CAHK,CAIL,GAAIyI,wBAAJ,CAAkBgjD,MAAM,CAACrsD,CAAzB,CAA4BqsD,MAAM,CAACnsD,CAAnC,CAAsCmsD,MAAM,CAACzrD,CAA7C,CAJK,CAAP,CAMD,C,mCA7LiCqsC,mB,EAgMrBke,qIAAf,E;;ACtMeA,yHAAf,E;;GCGMmB,oD,6GACJ,mCAAYnL,QAAZ,CAAsBoL,WAAtB,CAAmC,qFACjC,iJAEA,MAAKA,WAAL,CAAmBA,WAAnB,CAEA,MAAKpL,QAAL,CAAgBA,QAAhB,CACA,MAAKhwC,IAAL,CAAYgwC,QAAQ,CAAChwC,IAArB,CAEA,MAAK8M,QAAL,CAAgB,CAAhB,CACA,MAAKpJ,eAAL,CAAuB,GAAI0F,yBAAJ,EAAvB,CAEA,MAAKlS,QAAL,CAAgB,MAAK0hB,WAAL,EAAhB,CACA,MAAKtmB,MAAL,CAAc,MAAK4uB,SAAL,EAAd,CACA,MAAKhd,IAAL,CAAY,MAAKm3C,OAAL,EAAZ,CAbiC,aAclC,C,uGAEQ,CACP,KAAKnkD,QAAL,CAAgB,KAAK0hB,WAAL,EAAhB,CACA,KAAKtmB,MAAL,CAAc,KAAK4uB,SAAL,EAAd,CACA,KAAKhd,IAAL,CAAY,KAAKm3C,OAAL,EAAZ,CACD,C,+CAEY,CAAE,C,sCAER9sB,G,CAAKrtB,K,CAAOm7B,I,CAAMxmC,K,CAAO2H,I,CAAM89C,I,CAAMnN,M,CAAQ,CAClD,KAAK6B,QAAL,CAAcptC,WAAd,CAA0B,KAAK1L,QAA/B,EACA,KAAK84C,QAAL,CAActU,SAAd,CAAwB,CAAC,KAAKppC,MAA9B,EACA,KAAK09C,QAAL,CAActU,SAAd,CAAwB,CAAC,KAAKppC,MAA9B,EACA,KAAK09C,QAAL,CAAc6K,OAAd,CAAsB,KAAK32C,IAA3B,EACD,C,yCAES,CACR,GAAMA,KAAI,CAAG,KAAK8rC,QAAL,CAAchwC,IAAd,CAAmBiC,QAAnB,CAA4BC,QAA5B,GAAyC,GAAzC,CAA+C,CAA5D,CAEA,GAAI,KAAK8tC,QAAL,CAAchwC,IAAd,CAAmBiC,QAAnB,CAA4Bs5C,SAA5B,EAAJ,CAA6C,CAC3C,MAAOr3C,KAAI,CAAG,EAAd,CACD,CAED,MAAOA,KAAP,CACD,C,iDAEa,CACZ,GAAMhT,IAAG,CAAG,KAAK8O,IAAL,CAAUiC,QAAV,CAAmBqC,yBAAnB,EAAZ,CACA,MAAOpT,IAAG,CAACgG,QAAX,CACD,C,6CAEW,CACV,MAAOzD,iBAAgB,CACrB,KAAKuM,IAAL,CAAUiC,QAAV,CAAmBqC,yBAAnB,GAA+ChS,MAD1B,CAAvB,CAGD,C,uCAnDqCwpC,mB,EAsDzBqf,2HAAf,E;;GCzDMK,wC,uGACJ,6BAAYr+C,IAAZ,CAAkB6C,IAAlB,CAAwB,+EACtB,2IACA,MAAK7C,IAAL,CAAYA,IAAZ,CACA,MAAK6C,IAAL,CAAYA,IAAI,EAAI7C,IAAI,CAAC6C,IAAzB,CAEA,MAAKy7C,SAAL,GALsB,aAMvB,C,uGAEW,iBACV,KAAKz7C,IAAL,CAAUiG,OAAV,CACGC,UADH,GAEGhN,OAFH,CAEW,SAACiN,MAAD,QAAY,OAAI,CAACu1C,YAAL,CAAkBv1C,MAAlB,CAAZ,EAFX,EAGD,C,kDAEYA,M,CAAQ,CACnB,GAAIA,MAAM,CAACkF,KAAP,CAAaU,cAAb,EAAJ,CAAmC,CACjC,KAAK5O,IAAL,CAAUw+C,sBAAV,CAAiCx1C,MAAjC,CAAyC,QAAzC,EACA,KAAKhJ,IAAL,CAAUy+C,mBAAV,CAA8Bz1C,MAA9B,CAAsC,SAAtC,EACD,CAHD,IAGO,IAAIA,MAAM,CAACkF,KAAP,CAAaa,aAAb,EAAJ,CAAkC,CACvC,KAAK/O,IAAL,CAAUw+C,sBAAV,CAAiCx1C,MAAjC,CAAyC,SAAzC,EACA,KAAKhJ,IAAL,CAAUy+C,mBAAV,CAA8Bz1C,MAA9B,CAAsC,QAAtC,EACD,CAHM,IAGA,IAAIA,MAAM,CAACE,UAAP,EAAJ,CAAyB,CAC9B,KAAKlJ,IAAL,CAAUw+C,sBAAV,CAAiCx1C,MAAjC,CAAyC,QAAzC,EACA,KAAKhJ,IAAL,CAAU0+C,kBAAV,CAA6B11C,MAA7B,CAAqC,SAArC,CAAgD,GAAhD,EACD,CAHM,IAGA,IAAIA,MAAM,CAACkF,KAAP,CAAaE,SAAb,EAAJ,CAA8B,CACnC,KAAKpO,IAAL,CAAUw+C,sBAAV,CAAiCx1C,MAAjC,CAAyC,QAAzC,EACA,KAAKhJ,IAAL,CAAU0+C,kBAAV,CAA6B11C,MAA7B,CAAqC,SAArC,CAAgD,GAAhD,EACD,CAHM,IAGA,IAAIA,MAAM,CAACkF,KAAP,CAAaW,QAAb,EAAJ,CAA6B,CAClC,KAAK7O,IAAL,CAAUw+C,sBAAV,CAAiCx1C,MAAjC,CAAyC,SAAzC,EACA,KAAKhJ,IAAL,CAAU0+C,kBAAV,CAA6B11C,MAA7B,CAAqC,QAArC,CAA+C,GAA/C,EACD,CAED,MAAO,KAAP,CACD,C,iCAlC+B21B,mB,EAqCnB0f,yGAAf,E;;GCjCMM,wC,uGACJ,6BAAYxmD,KAAZ,CAAmB,+EACjB,yIAAMA,KAAK,CAACymC,SAAZ,GACA,MAAKmJ,wBAAL,CAAgC5vC,KAAK,CAAC4vC,wBAAtC,CACA,MAAK5vC,KAAL,CAAaA,KAAb,CAHiB,aAIlB,C,sHAEiB8pB,Q,CAAUjiB,I,CAAM7K,M,CAAQ4R,I,CAAM,CAC9C,GAAMrF,OAAM,CAAG,GAAI3G,yBAAJ,EAAf,CACA2G,MAAM,CAACswB,UAAP,CAAkBgc,gBAAlB,CACE,GAAIjzC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CADF,CAEEhF,cAAc,CAAC,CAACO,gBAAgB,CAACnB,MAAD,CAAlB,CAFhB,EAKA,GAAM84C,cAAa,CAAG,GAAIlzC,2BAAJ,EAAtB,CACAkzC,aAAa,CACVD,gBADH,CAEI,GAAIjzC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EAA2BoC,SAA3B,EAFJ,CAGIpH,cAAc,CAACgR,IAAD,CAHlB,EAKG5J,SALH,GAOAuE,MAAM,CAACswB,UAAP,CAAkBsL,QAAlB,CAA2B2Q,aAA3B,EAEA,GAAMrvC,OAAM,CAAGqjB,QAAQ,CAAC9mB,KAAT,EAAf,CACAyD,MAAM,CAACggD,eAAP,CAAuBl9C,MAAM,CAACswB,UAA9B,EACApzB,MAAM,CAACtM,CAAP,EAAY0N,IAAI,CAAC6qC,KAAjB,CACA,MAAOjsC,OAAP,CACD,C,oHAGCoK,M,CACAhJ,I,CACA7K,M,CAEA,IADA4R,KACA,2DADO,CACP,CACA,GAAIA,IAAI,GAAK,CAAb,CAAgB,CACd,KAAM,IAAIhJ,MAAJ,CAAU,6BAAV,CAAN,CACD,CAED,GAAIkkB,SAAQ,CAAG,KAAK48B,oBAAL,CAA0B71C,MAA1B,CAAkChJ,IAAlC,CAAwC7K,MAAxC,CAAiD4R,IAAI,CAAG,CAAxD,CAAf,CACA,GAAI,CAACkb,QAAQ,CAAC7jB,MAAT,CAAgB,GAAI8C,aAAJ,EAAhB,CAAL,CAAoC,CAClC,MAAO+gB,SAAP,CACD,CAEDA,QAAQ,CAAGjiB,IAAI,CAACstC,qBAAL,CAA2BwR,0BAA3B,CACT91C,MADS,CAET,KAAK41B,SAFI,CAAX,CAKA,MAAO,MAAKmgB,iBAAL,CAAuB98B,QAAQ,CAAC+8B,OAAT,EAAvB,CAA2Ch/C,IAA3C,CAAiD7K,MAAjD,CAAyD4R,IAAzD,CAAP,CACD,C,wEAEuB/G,I,CAAM7K,M,CAAkB,IAAV4R,KAAU,2DAAH,CAAG,CAC9C,GAAMkb,SAAQ,CAAGjiB,IAAI,CAACstC,qBAAL,CAA2B2R,uBAA3B,CACf,KAAKrgB,SADU,CAAjB,CAIA,GAAI73B,IAAI,GAAK,CAAb,CAAgB,CACd,KAAM,IAAIhJ,MAAJ,CAAU,6BAAV,CAAN,CACD,CAED,GAAI,CAACkkB,QAAL,CAAe,CACb,MAAO,IAAI/gB,aAAJ,EAAP,CACD,CAED,MAAO,MAAK69C,iBAAL,CAAuB98B,QAAQ,CAAC+8B,OAAT,EAAvB,CAA2Ch/C,IAA3C,CAAiD7K,MAAjD,CAAyD4R,IAAzD,CAAP,CACD,C,kEAEoBiC,M,CAAQhJ,I,CAAM7K,M,CAAkB,IAAV4R,KAAU,2DAAH,CAAG,CACnD,GAAMkb,SAAQ,CAAGjiB,IAAI,CAACisC,eAAL,CAAqBjjC,MAAM,CAAC1E,EAA5B,CAAjB,CAEA,GAAIyC,IAAI,GAAK,CAAb,CAAgB,CACd,KAAM,IAAIhJ,MAAJ,CAAU,6BAAV,CAAN,CACD,CAED,GAAI,CAACkkB,QAAL,CAAe,CACb,MAAO,IAAI/gB,aAAJ,EAAP,CACD,CAED,MAAO,MAAK69C,iBAAL,CAAuB98B,QAAvB,CAAiCjiB,IAAjC,CAAuC7K,MAAvC,CAA+C4R,IAA/C,CAAP,CACD,C,iCAjF+B43B,mB,EAoFnBggB,6HAAf,E;;GCpFMO,gD,+HACJ,iCACE7uB,IADF,CAEEnV,cAFF,CAGED,SAHF,CAIEsR,MAJF,CAKE4yB,WALF,CAMEnM,UANF,CAOEv3B,WAPF,CAQEmjB,SARF,CASEmJ,wBATF,CAUElxB,IAVF,CAWEuoC,sBAXF,CAYE,mFACA,6IAAMxgB,SAAN,GAEA,GAAMxjB,IAAG,CAAGxJ,OAAO,CAACsJ,cAAc,CAACmkC,QAAhB,CAAnB,CAEA,MAAKtX,wBAAL,CAAgCA,wBAAhC,CAEA,MAAKuX,SAAL,CAAiB1gB,SAAS,GAAK,IAA/B,CACA,GAAIgJ,UAAS,CAAGvX,IAAI,CAAG,MAAKivB,SAA5B,CACA,GAAMrjB,MAAK,CAAGplB,IAAI,CAAColB,KAAL,EAAc,CAA5B,CAEA,GAAM4L,cAAa,CAAGpsB,WAAW,CAAC0jC,WAAD,CAAcvX,SAAd,CAAX,CAAoC7tC,QAApC,CAA6CpG,GAA7C,CACpB,MAAKkrD,oBAAL,CACEtyB,MADF,CAEE4yB,WAFF,CAGE1jC,WAAW,CAAC0jC,WAAD,CAAcvX,SAAd,CAAX,CAAoCzyC,MAHtC,CADoB,CAAtB,CAOA0yC,aAAa,CAACv1C,CAAd,EAAmB6sD,WAAW,CAACtU,KAA/B,CAEA,GAAM/C,YAAW,CAAGrsB,WAAW,CAACu3B,UAAD,CAAapL,SAAb,CAAX,CAAmC7tC,QAAnC,CAA4CpG,GAA5C,CAClB,MAAK4mD,iBAAL,CAAuB,EAAvB,CADkB,CAApB,CAGAzS,WAAW,CAACx1C,CAAZ,EAAiB0gD,UAAU,CAACnI,KAA5B,CAEA,GAAMx5C,SAAQ,CAAGw2C,aAAa,CAACjzC,UAAd,CAAyBkzC,WAAzB,CAAjB,CACA,MAAKn4B,QAAL,CAAgBte,QAAQ,CAAG4qC,KAA3B,CAEA,GAAIgG,KAAI,CAAG,CAAX,CAEA,GAAI,CAAC7mB,GAAL,CAAU,CACR,GAAMhH,MAAK,CAAGwqB,SAAS,GAAK,GAAd,CAAoB,GAAlC,CACA,MAAKjvB,QAAL,EAAiByE,KAAjB,CACA6tB,IAAI,CAAG7tB,KAAK,CAAG,GAAf,CACD,CAED,MAAK8Z,UAAL,CAAkB,EAAlB,CAEA,MAAKA,UAAL,CAAgBjyB,IAAhB,CACEmjD,sBAAsB,CAACG,aAAvB,CACE3X,SADF,CAEEC,aAFF,CAGEC,WAAW,CAAC3sC,KAAZ,EAHF,CAIE8gC,KAJF,CAKEgG,IALF,CAME,MAAKtyB,QANP,CAOEkH,IAPF,yDADF,EAaA,MAAK2oC,SAAL,CAAiB,IAAjB,CAEA,GAAI,CAACtkC,cAAc,CAACukC,YAAf,EAAL,CAAoC,CAClC,mEACD,CAED,GAAIrkC,GAAJ,CAAS,CACPgkC,sBAAsB,CAACM,kBAAvB,CACE7oC,IAAI,CAACyC,aADP,CAEEwuB,WAFF,CAGEF,SAAS,CAAG,MAAKj4B,QAHnB,0DAOA,MAAKA,QAAL,EAAiB,IAAjB,CACD,CAlED,aAmED,C,+GAEa,CACZ,MAAO,MAAKA,QAAL,CAAgB,KAAK2vC,SAA5B,CACD,C,+CAEY,CACX,KAAKvX,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EACD,C,qCAxFmCqU,iD,EA2FvBO,+HAAf,E;;GC3FMS,0D,oIACJ,sCACEtvB,IADF,CAEEnV,cAFF,CAGED,SAHF,CAIEsR,MAJF,CAKE4yB,WALF,CAMEnM,UANF,CAOEv3B,WAPF,CAQEmjB,SARF,CASEmJ,wBATF,CAUElxB,IAVF,CAWEuoC,sBAXF,CAYE,wFACA,kJAAMxgB,SAAN,GACA,MAAK1Q,UAAL,CAAkB,EAAlB,CACA,MAAK6Z,wBAAL,CAAgCA,wBAAhC,CAEA,GAAM6X,YAAW,CAAG,MAAKhhB,SAAL,GAAmB,GAAvC,CACA,GAAM3C,MAAK,CAAGplB,IAAI,CAAColB,KAAL,EAAc,CAA5B,CAEA,MAAKqjB,SAAL,CAAiB1gB,SAAS,GAAK,IAA/B,CACA,GAAIgJ,UAAS,CAAGvX,IAAI,CAAG,MAAKivB,SAA5B,CAEA,GAAMzX,cAAa,CAAGpsB,WAAW,CAAC0jC,WAAD,CAAcvX,SAAd,CAAX,CAAoC7tC,QAApC,CAA6CpG,GAA7C,CACpB,MAAKkrD,oBAAL,CACEtyB,MADF,CAEE4yB,WAFF,CAGE1jC,WAAW,CAAC0jC,WAAD,CAAcvX,SAAd,CAAX,CAAoCzyC,MAHtC,CADoB,CAAtB,CAOA0yC,aAAa,CAACv1C,CAAd,EAAmB6sD,WAAW,CAACtU,KAA/B,CAEA,GAAI/C,YAAW,CAAGrsB,WAAW,CAACu3B,UAAD,CAAapL,SAAb,CAAX,CAAmC7tC,QAAnC,CAA4CpG,GAA5C,CAChB,MAAK4mD,iBAAL,CAAuB,EAAvB,CADgB,CAAlB,CAGAzS,WAAW,CAACx1C,CAAZ,EAAiB0gD,UAAU,CAACnI,KAA5B,CAEA,GAAMx5C,SAAQ,CAAGw2C,aAAa,CAACjzC,UAAd,CAAyBkzC,WAAzB,CAAjB,CACA,MAAKn4B,QAAL,CAAgBte,QAAQ,CAAG4qC,KAA3B,CAEA,GAAI4jB,aAAY,CAAG,MAAKtF,iBAAL,CAAuB,CAAvB,CAAnB,CAEA,GAAMuF,UAAS,CAAGlhB,SAAS,GAAK,GAAd,CAAoB,GAAtC,CACA,GAAMmhB,SAAQ,CAAGD,SAAS,CAAG,GAA7B,CAEA,GAAME,WAAU,CAAG9kC,cAAc,CAAC8kC,UAAlC,CACA,GAAMX,SAAQ,CAAGnkC,cAAc,CAACmkC,QAAhC,CAEA,MAAKY,UAAL,CAAkB,CAAlB,CACA,IAAK,GAAIC,WAAU,CAAG,CAAtB,CAAyBA,UAAU,EAAIF,UAAvC,CAAmDE,UAAU,EAA7D,CAAiE,CAC/D,MAAKD,UAAL,CAAmB,GAAKhkB,KAAN,CAAeikB,UAAjC,CAEA,GACGN,WAAW,EAAIM,UAAU,EAAIF,UAAU,CAAGX,QAA3C,EACC,CAACO,WAAD,EAAgBM,UAAU,CAAGb,QAFhC,CAGE,CACA,MAAKnxB,UAAL,CAAgBjyB,IAAhB,CACEmjD,sBAAsB,CAACG,aAAvB,CACE,MAAKU,UAAL,CAAkBrY,SADpB,CAEEC,aAFF,CAGEC,WAAW,CAAC3sC,KAAZ,EAHF,CAIE8gC,KAJF,CAKE8jB,QALF,CAME,MAAKpwC,QAAL,CAAgBmwC,SANlB,CAOEjpC,IAPF,yDADF,EAYD,CAhBD,IAgBO,CACL,MAAKqX,UAAL,CAAgBjyB,IAAhB,CACEmjD,sBAAsB,CAACG,aAAvB,CACE,MAAKU,UAAL,CAAkBrY,SADpB,CAEEC,aAFF,CAGEC,WAAW,CAAC3sC,KAAZ,EAHF,CAIE8gC,KAJF,CAKE,CALF,CAME,MAAKtsB,QANP,CAOEkH,IAPF,yDADF,EAaAuoC,sBAAsB,CAACM,kBAAvB,CACE7oC,IAAI,CAACyC,aADP,CAEEwuB,WAFF,CAGE,MAAKmY,UAAL,CAAkBrY,SAAlB,CAA8B,MAAKj4B,QAHrC,0DAMD,CAEDm4B,WAAW,CAAGA,WAAW,CAACn0C,GAAZ,CAAgBksD,YAAhB,CAAd,CACD,CA/ED,aAgFD,C,oHAEa,CACZ,MAAO,MAAKlwC,QAAL,CAAgB,KAAK2vC,SAArB,CAAiC,KAAKW,UAAtC,CAAmD,IAA1D,CACD,C,+CAEY,CACX,KAAKlY,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EACD,C,0CArGwCqU,iD,EAwG5BgB,8IAAf,E;;GCxGMQ,kE,wIACJ,0CAAYhoD,KAAZ,CAAmB,4FACjB,sJAAMA,KAAN,GADiB,GAET0e,KAFS,CAE0C1e,KAF1C,CAET0e,IAFS,CAEHuoC,sBAFG,CAE0CjnD,KAF1C,CAEHinD,sBAFG,CAEqBgB,gBAFrB,CAE0CjoD,KAF1C,CAEqBioD,gBAFrB,CAIjB,MAAKlyB,UAAL,CAAkB,EAAlB,CACA,MAAK+N,KAAL,CAAaplB,IAAI,CAAColB,KAAL,EAAc,CAA3B,CACA,MAAKtsB,QAAL,CAAgB,CAAhB,CACA,MAAK0L,QAAL,GACA,MAAKglC,gBAAL,GACA,MAAKC,cAAL,GACA,MAAKC,YAAL,GAEA,GAAMT,UAAS,CAAG,MAAKlhB,SAAL,GAAmB,GAAnB,CAAyB,GAA3C,CACA,GAAMmhB,SAAQ,CAAGD,SAAS,CAAG,GAA7B,CAEA,MAAK9hC,KAAL,CAAWjiB,OAAX,CAAmB,SAACykD,IAAD,CAAU,CAC3B,GAAM7wC,SAAQ,CACZ,MAAKk4B,aAAL,CAAmBjzC,UAAnB,CAA8B,MAAKkzC,WAAL,CAAiBn0C,GAAjB,CAAqB6sD,IAAI,CAACnpD,MAA1B,CAA9B,EACA,MAAK4kC,KAFP,CAIA,MAAK/N,UAAL,CAAgBjyB,IAAhB,CACEmjD,sBAAsB,CAACG,aAAvB,CACE,MAAK3X,SAAL,CAAiB4Y,IAAI,CAACP,UADxB,CAEE,MAAKpY,aAAL,CAAmB1sC,KAAnB,EAFF,CAGE,MAAK2sC,WAAL,CAAiB3sC,KAAjB,EAHF,CAIE,MAAK8gC,KAJP,CAKEukB,IAAI,CAACplC,GAAL,CAAW,CAAX,CAAe2kC,QALjB,CAMES,IAAI,CAACplC,GAAL,CAAWzL,QAAX,CAAsBA,QAAQ,CAAGmwC,SANnC,CAOE3nD,KAAK,CAAC0e,IAPR,yDADF,EAaA,GAAI2pC,IAAI,CAACplC,GAAL,EAAY,CAACglC,gBAAjB,CAAmC,CACjC,MAAKlyB,UAAL,CAAgBjyB,IAAhB,CACEmjD,sBAAsB,CAACM,kBAAvB,CACEvnD,KAAK,CAAC0e,IAAN,CAAWyC,aADb,CAEEnhB,KAAK,CAAC0e,IAAN,CAAWwC,aAFb,CAGE,MAAKyuB,WAAL,CAAiBn0C,GAAjB,CAAqB6sD,IAAI,CAACnpD,MAA1B,CAHF,CAIE,MAAKuwC,SAAL,CAAiB4Y,IAAI,CAACP,UAAtB,CAAmCtwC,QAJrC,yDADF,EASD,CACF,CA7BD,EAfiB,aA6ClB,C,kHAEU,iBAC8B,KAAKxX,KADnC,CACD6nD,UADC,aACDA,UADC,CACWX,QADX,aACWA,QADX,CACqBxoC,IADrB,aACqBA,IADrB,CAGT,GAAIopC,WAAU,CAAG,CAAjB,CACA,KAAKjiC,KAAL,CAAa,EAAb,CACA,GAAMyiC,UAAS,CAAG5uD,IAAI,CAACuC,KAAL,CAAW,KAAKwqC,SAAL,IAAoBohB,UAAU,CAAGX,QAAjC,CAAX,CAAlB,CAEA,GAAMQ,aAAY,CAAG,KAAKtF,iBAAL,CAAuB1jC,IAAI,CAAC8a,IAA5B,CAArB,CAEA,GAAM7+B,OAAM,CAAG+jB,IAAI,CAAC/jB,MAAL,EAAe,EAA9B,CAEA,IAAK,GAAI4tD,YAAW,CAAG,CAAvB,CAA0BA,WAAW,CAAGV,UAAxC,CAAoDU,WAAW,EAA/D,CAAmE,CACjE,GAAMtlC,IAAG,CACPslC,WAAW,EAAID,SAAf,EAA4BC,WAAW,CAAGD,SAAS,CAAGpB,QADxD,CAGAY,UAAU,CAAK,EAAIntD,MAAL,CAAe,KAAKmpC,KAArB,CAA8BykB,WAA3C,CAEA,GAAM/hD,EAAC,CAAG+hD,WAAW,CAAGD,SAAxB,CAEA,GAAIppD,OAAM,CAAG,GAAI6J,aAAJ,EAAb,CACA,GAAIvC,CAAC,CAAG,CAAR,CAAW,CACTtH,MAAM,CAAGA,MAAM,CAACkL,GAAP,CAAWs9C,YAAY,CAACzkD,cAAb,CAA4BvJ,IAAI,CAACwE,GAAL,CAASsI,CAAT,CAA5B,CAAX,CAAT,CACD,CAFD,IAEO,IAAIA,CAAC,CAAG,CAAR,CAAW,CAChBtH,MAAM,CAAGA,MAAM,CAAC1D,GAAP,CAAWksD,YAAY,CAACzkD,cAAb,CAA4BvJ,IAAI,CAACwE,GAAL,CAASsI,CAAT,CAA5B,CAAX,CAAT,CACD,CAED,KAAKqf,KAAL,CAAW/hB,IAAX,CAAgB,CACdgkD,UAAU,CAAEA,UADE,CAEd7kC,GAAG,CAAHA,GAFc,CAGd/jB,MAAM,CAANA,MAHc,CAAhB,EAKD,CACF,C,iDAEa,CACZ,MAAO,MAAK2mB,KAAL,CAAW7M,IAAX,CAAgB,SAACqvC,IAAD,QAAUA,KAAI,CAACplC,GAAf,EAAhB,CAAP,CACD,C,uDAEgB,kBAOX,KAAKjjB,KAPM,CAEb66C,UAFa,cAEbA,UAFa,CAGb2N,cAHa,cAGbA,cAHa,CAIbllC,WAJa,cAIbA,WAJa,CAKb4jC,QALa,cAKbA,QALa,CAMbuB,SANa,cAMbA,SANa,CASf,GAAID,cAAJ,CAAoB,CAClB,GAAItB,QAAQ,GAAK,CAAjB,CAAoB,CAClB,KAAKvX,WAAL,CAAmB6Y,cAAc,CAAChtD,GAAf,CAAmB,KAAK4mD,iBAAL,CAAuB,EAAvB,CAAnB,CAAnB,CACD,CAFD,IAEO,CACL,KAAKzS,WAAL,CAAmB6Y,cAAnB,CACD,CACF,CAND,IAMO,kBACwBllC,WAAW,CAACu3B,UAAU,CAACnwC,IAAZ,CADnC,CACG9I,QADH,cACGA,QADH,CACa5E,MADb,cACaA,MADb,CAEL,GAAIkqD,QAAQ,GAAK,CAAjB,CAAoB,CAClB,KAAKvX,WAAL,CAAmB,KAAK+Y,uBAAL,CAA6B7N,UAA7B,CAAyC79C,MAAzC,EAChBxB,GADgB,CACZoG,QADY,EAEhBpG,GAFgB,CAEZ,KAAK4mD,iBAAL,CAAuB,EAAvB,CAFY,CAAnB,CAGD,CAJD,IAIO,CACL,GAAMrpC,OAAM,CACV0vC,SAAS,CAACE,OAAV,CAAkBhuD,MAAlB,CAA2B,CAA3B,CACI8tD,SAAS,CAACE,OAAV,CACEjvD,IAAI,CAACuC,KAAL,CAAW,KAAKwqC,SAAL,GAAmBgiB,SAAS,CAACE,OAAV,CAAkBhuD,MAAhD,CADF,CADJ,CAII,IALN,CAOA,GAAMmjB,YAAW,CACf/E,MAAM,EAAIA,MAAM,CAACF,OAAP,CAAele,MAAf,CAAwB,CAAlC,CACIoe,MAAM,CAACF,OAAP,CACEnf,IAAI,CAACuC,KAAL,CAAW,KAAKwqC,SAAL,GAAmB1tB,MAAM,CAACF,OAAP,CAAele,MAA7C,CADF,CADJ,CAII,IALN,CAOA,GAAImjB,WAAJ,CAAiB,CACf,GAAMjN,OAAM,CAAGgqC,UAAU,CAACnwC,IAAX,CAAgBiG,OAAhB,CAAwB6F,aAAxB,CACbsH,WAAW,CAACmE,QADC,CAAf,CAIA,KAAK0tB,WAAL,CAAmB,KAAKiZ,6CAAL,CACjB/3C,MADiB,CAEjBgqC,UAFiB,CAGjB79C,MAHiB,EAIjBxB,GAJiB,CAIboG,QAJa,CAAnB,CAKD,CAVD,IAUO,CACL,KAAK+tC,WAAL,CAAmBrsB,WAAW,CAACu3B,UAAU,CAACnwC,IAAZ,CAAX,CAA6B9I,QAA7B,CAAsCpG,GAAtC,CACjB,KAAK4mD,iBAAL,CAAuB,EAAvB,CADiB,CAAnB,CAGA,KAAKzS,WAAL,CAAiBx1C,CAAjB,EAAsB0gD,UAAU,CAACnI,KAAjC,CACD,CACF,CACF,CACF,C,mDAEc,kBAC8B,KAAK1yC,KADnC,CACLq/C,kBADK,cACLA,kBADK,CACewJ,UADf,cACeA,UADf,CAGb,GAAIA,UAAJ,CAAgB,CACd,KAAKC,SAAL,CAAiB,CAAjB,CACA,GAAMC,SAAQ,CAAG,KAAKC,WAAL,EAAjB,CACA,GAAMlB,WAAU,CAAGiB,QAAQ,CAAGA,QAAQ,CAACjB,UAAZ,CAAyB,CAApD,CAEA,GAAM5uD,SAAQ,CAAG,KAAKw2C,aAAL,CAAmBjzC,UAAnB,CAA8B,KAAKkzC,WAAnC,CAAjB,CACA,KAAKn4B,QAAL,CAAgBte,QAAQ,CAAG,KAAK4qC,KAAhC,CACA,KAAK2L,SAAL,CAAiBoZ,UAAU,EAAIf,UAAU,CAAG,KAAKtwC,QAAtB,CAA3B,CACD,CARD,IAQO,CACL,KAAKsxC,SAAL,CAAiB,KAAKriB,SAAL,GAAmB,IAApC,CACA,KAAKgJ,SAAL,CAAiB4P,kBAAkB,CAAG,KAAKyJ,SAA3C,CACA,GAAM5vD,UAAQ,CAAG,KAAKw2C,aAAL,CAAmBjzC,UAAnB,CAA8B,KAAKkzC,WAAnC,CAAjB,CACA,KAAKn4B,QAAL,CAAgBte,SAAQ,CAAG,KAAK4qC,KAAhC,CACD,CACF,C,2DAEkB,kBAC4B,KAAK9jC,KADjC,CACTgnD,WADS,cACTA,WADS,CACI5yB,MADJ,cACIA,MADJ,CACY9Q,WADZ,cACYA,WADZ,CAGjB,KAAKosB,aAAL,CAAqBpsB,WAAW,CAAC0jC,WAAW,CAACt8C,IAAb,CAAX,CAA8B9I,QAA9B,CAAuCpG,GAAvC,CACnB,KAAKkrD,oBAAL,CACEtyB,MADF,CAEE4yB,WAFF,CAGE1jC,WAAW,CAAC0jC,WAAW,CAACt8C,IAAb,CAAX,CAA8B1N,MAHhC,CADmB,CAArB,CAOD,C,iDAEa,CACZ,MAAO,MAAKwa,QAAL,CAAgB,KAAKsxC,SAArB,CAAiC,IAAxC,CACD,C,+CAEY,CACX,KAAKlZ,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EACD,C,8CAnL4CqU,iD,EAsLhCwB,0JAAf,E;;ACvLe,mEACbxB,mBAAmB,CAAnBA,iDADa,CAEbO,uBAAuB,CAAvBA,2CAFa,CAGbS,4BAA4B,CAA5BA,gDAHa,CAIbQ,gCAAgC,CAAhCA,oDAJa,CAAf,E;;;;GCHMiB,wC,yGACJ,8BAAc,+EACZ,2IACA,MAAKlzB,UAAL,CAAkB,EAAlB,CAFY,aAGb,C,yGAEY,CACX,KAAKmzB,mBAAL,GACA,sIACD,C,sCAEMv1C,O,CAAS,CACd,KAAKoiB,UAAL,CAAgBnyB,OAAhB,CAAwB,SAAAulD,SAAS,QAAIA,UAAS,CAAC1b,MAAV,CAAiB95B,OAAjB,CAAJ,EAAjC,EACD,C,iEAEqB,CACpB,KAAKoiB,UAAL,CAAgBnyB,OAAhB,CAAwB,SAAAulD,SAAS,QAAIA,UAAS,CAACC,UAAV,EAAJ,EAAjC,EACA,KAAKrzB,UAAL,CAAkB,EAAlB,CACD,C,wDAEeszB,Q,CAAU,CACxB,KAAKtzB,UAAL,CAAkB,KAAKA,UAAL,CAAgBzpB,MAAhB,CAAuB,SAAS68C,SAAT,CAAoB,CAC3D,MAAOA,UAAS,GAAKA,SAArB,CACD,CAFiB,CAAlB,CAIAE,QAAQ,CAACD,UAAT,GACD,C,iCA1B+B1I,qB,EA6BnBuI,0GAAf,E;;GC7BMK,wC,uGACJ,6BAAYzhD,IAAZ,CAAkBqc,QAAlB,CAAmD,cAAvBvoB,MAAuB,2DAAf,CAAe,IAAZC,IAAY,2DAAN,IAAM,qEACjD,2IACA,MAAKiM,IAAL,CAAYA,IAAZ,CACA,MAAKqc,QAAL,CAAgBA,QAAhB,CACA,MAAKvoB,KAAL,CAAaA,KAAb,CACA,MAAKC,GAAL,CAAWA,GAAX,CAEA,MAAK8qC,MAAL,CAAc,KAAd,CAPiD,aAQlD,C,qGAEiB,IAAT96B,MAAS,MAATA,KAAS,CAChB,GAAI,KAAKhQ,GAAL,EAAYgQ,KAAK,EAAI,KAAKhQ,GAA1B,EAAiC,CAAC,KAAK8qC,MAA3C,CAAmD,CACjD,OACD,CAED,GAAI,KAAK9qC,GAAL,EAAYgQ,KAAK,EAAI,KAAKhQ,GAA1B,EAAiC,KAAK8qC,MAA1C,CAAkD,CAChD,KAAK0iB,UAAL,GACA,OACD,CAED,GAAI,KAAK1iB,MAAL,EAAe96B,KAAK,CAAG,KAAKjQ,KAAhC,CAAuC,CACrC,KAAKytD,UAAL,GACA,OACD,CAED,GAAI,CAAC,KAAK1iB,MAAN,EAAgB96B,KAAK,EAAI,KAAKjQ,KAAlC,CAAyC,CACvC,KAAKgkD,QAAL,GACD,CACF,C,0QAGC,KAAKjZ,MAAL,CAAc,IAAd,C,sBACM,MAAK7+B,IAAL,CAAUssC,kB,QAChB,GAAI,KAAKjwB,QAAT,CAAmB,CACjB,KAAKrc,IAAL,CAAUutC,6BAAV,CAAwCmU,uBAAxC,CACE,KAAKrlC,QADP,EAGD,CAJD,IAIO,CACL,KAAKrc,IAAL,CAAUutC,6BAAV,CAAwCoU,YAAxC,GACD,C,gaAID,KAAK9iB,MAAL,CAAc,KAAd,C,uBACM,MAAK7+B,IAAL,CAAUssC,kB,QAChB,KAAKtsC,IAAL,CAAUutC,6BAAV,CAAwCzC,YAAxC,G,sLA9C8BnM,mB,EAkDnB8iB,yGAAf,E;;GC5CMG,gC,uHACJ,0BAAc,CAAC,wMAEd,C,wMAEY11C,Q,yJACX,6HAAaA,QAAb,EACQynC,iB,CAAsB,KAAKwD,Q,CAA3BxD,iB,uBAEFA,kBAAiB,CAACK,WAAlB,E,QAENL,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAACiE,IAAD,CAAU,CAC7C,GAAM6C,KAAI,CAAG7C,IAAI,CAAC6C,IAAlB,CAEA,GAAIA,IAAI,CAAC2J,WAAL,EAAJ,CAAwB,CACtBxM,IAAI,CAACm+B,IAAL,GACD,CAFD,IAEO,CACLn+B,IAAI,CAAC0+B,IAAL,GACA,KAAI,CAACxQ,UAAL,CAAgBjyB,IAAhB,CACE,GAAI+hD,oCAAJ,CAA8Bh+C,IAA9B,CAAoCkM,QAAQ,CAACO,OAA7C,CADF,EAGA,KAAI,CAACyhB,UAAL,CAAgBjyB,IAAhB,CAAqB,GAAIoiD,8BAAJ,CAAwBr+C,IAAxB,CAArB,EACA,KAAI,CAACkuB,UAAL,CAAgBjyB,IAAhB,CAAqB,GAAIwlD,8BAAJ,CAAwBzhD,IAAxB,CAArB,EACD,CACD,MAAO,MAAP,CACD,CAdD,E,mMAiBe6C,I,CAAM,CACrB,KAAKqrB,UAAL,CACGzpB,MADH,CACU,SAAC68C,SAAD,QAAeA,UAAS,CAACz+C,IAAV,GAAmBA,IAAlC,EADV,EAEG9G,OAFH,CAEW,SAACulD,SAAD,CAAe,CACtBA,SAAS,CAACpwB,MAAV,GACD,CAJH,EAKD,C,2EAEwC,IAAhBruB,KAAgB,MAAhBA,IAAgB,CAAVmG,MAAU,MAAVA,MAAU,CACvC,KAAKklB,UAAL,CACGzpB,MADH,CACU,SAAC68C,SAAD,QAAeA,UAAS,CAACz+C,IAAV,GAAmBA,IAAlC,EADV,EAEG9G,OAFH,CAEW,SAACulD,SAAD,CAAe,CACtB,GAAIA,SAAS,CAAC/C,YAAd,CAA4B,CAC1B+C,SAAS,CAAC/C,YAAV,CAAuBv1C,MAAvB,EACD,CACF,CANH,EAOD,C,+CAEY,IACH2qC,kBADG,CACmB,KAAKwD,QADxB,CACHxD,iBADG,CAEXA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAACiE,IAAD,CAAU,CAC7CA,IAAI,CAACm+B,IAAL,GACD,CAFD,CAEG,IAFH,EAIA,OAAO,kIACR,C,6BArD2BijB,8B,EAwDfQ,8FAAf,E;;GC9DMC,oD,sfACa/1C,O,CAAS,IAChB4pC,QADgB,CACJ,KAAKyB,QADD,CAChBzB,OADgB,CAExB;AACD,C,uCAJqCmD,qB,EAOzBgJ,4HAAf,E;;GCPMC,oD,+GACJ,oCAAc,qFACZ,iJAEA,MAAKC,WAAL,CAAmB,IAAnB,CACA,MAAKC,YAAL,CAAoB,IAApB,CACA,MAAKC,eAAL,CAAuB,IAAvB,CALY,aAMb,C,4HAEiBp/C,I,CAAM,CACtB,GAAI,KAAKk/C,WAAL,GAAqBl/C,IAAzB,CAA+B,CAC7B,KAAKk/C,WAAL,CAAmB,IAAnB,CACD,CAED,GAAI,KAAKC,YAAL,GAAsBn/C,IAA1B,CAAgC,CAC9B,KAAKm/C,YAAL,CAAoB,IAApB,CACD,CACF,C,0DAEgBn/C,I,CAAM,oBAC+B,KAAKs0C,QADpC,CACbzB,OADa,gBACbA,OADa,CACJ/B,iBADI,gBACJA,iBADI,CACe7B,WADf,gBACeA,WADf,CAGrB,GAAMoQ,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CAEA,GAAI,KAAKiQ,WAAL,GAAqBl/C,IAAzB,CAA+B,CAC7B6yC,OAAO,CAACyM,eAAR,CAAwBt/C,IAAxB,CAA8B,IAA9B,CAAoCq/C,MAApC,EACD,CACD,GAAI,KAAKF,YAAL,GAAsBn/C,IAA1B,CAAgC,CAC9B6yC,OAAO,CAACyM,eAAR,CAAwBt/C,IAAxB,CAA8B,IAA9B,CAAoCq/C,MAApC,EACD,CACF,C,+CAEY,IACHxM,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEX,GAAI,KAAKqM,WAAT,CAAsB,CACpBrM,OAAO,CAAC0M,eAAR,CAAwB,KAAKL,WAA7B,EACD,CAED,GAAI,KAAKC,YAAT,CAAuB,CACrBtM,OAAO,CAAC0M,eAAR,CAAwB,KAAKJ,YAA7B,EACD,CACF,C,gDAEWl2C,O,CAAS,qBACc,KAAKqrC,QADnB,CACXzB,OADW,iBACXA,OADW,CACF5D,WADE,iBACFA,WADE,CAGnB,GAAMjvC,KAAI,CAAGiJ,OAAO,CAAC0jB,MAAR,CAAe3sB,IAA5B,CACA,GAAMq/C,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CAEA,GAAIoQ,MAAM,EAAI,KAAKH,WAAnB,CAAgC,CAC9BrM,OAAO,CAAC0M,eAAR,CAAwB,KAAKL,WAA7B,EACD,CAED,GAAI,CAACG,MAAD,EAAW,KAAKF,YAApB,CAAkC,CAChCtM,OAAO,CAAC0M,eAAR,CAAwB,KAAKJ,YAA7B,EACD,CAEDtM,OAAO,CAACyM,eAAR,CAAwBr2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAvC,CAA6C,IAA7C,CAAmDq/C,MAAnD,EACA,GAAIA,MAAJ,CAAY,CACV,KAAKH,WAAL,CAAmBl/C,IAAnB,CACD,CAFD,IAEO,CACL,KAAKm/C,YAAL,CAAoBn/C,IAApB,CACD,CAED,GACE,KAAKo/C,eAAL,GAAyB,KAAKF,WAA9B,EACA,KAAKE,eAAL,GAAyB,KAAKD,YAFhC,CAGE,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACD,CACF,CACD;;;;;;;;;;;;;;;;;;wDAoBcn2C,O,CAAS,qBACY,KAAKqrC,QADjB,CACbzB,OADa,iBACbA,OADa,CACJ5D,WADI,iBACJA,WADI,CAGrB,GAAMjvC,KAAI,CAAGiJ,OAAO,CAAC0jB,MAAR,CAAe3sB,IAA5B,CACA,GAAMq/C,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CAEA,GAAIoQ,MAAM,EAAI,KAAKH,WAAL,GAAqBl/C,IAAnC,CAAyC,CACvC,OACD,CAED,GAAI,CAACq/C,MAAD,EAAW,KAAKF,YAAL,GAAsBn/C,IAArC,CAA2C,CACzC,OACD,CAED,GAAI,KAAKo/C,eAAT,CAA0B,CACxBvM,OAAO,CAAC0M,eAAR,CAAwB,KAAKH,eAA7B,EACD,CAED,GAAIC,MAAM,EAAI,KAAKH,WAAnB,CAAgC,CAC9BrM,OAAO,CAAC0M,eAAR,CAAwB,KAAKL,WAA7B,EACD,CAED,GAAI,CAACG,MAAD,EAAW,KAAKF,YAApB,CAAkC,CAChCtM,OAAO,CAAC0M,eAAR,CAAwB,KAAKJ,YAA7B,EACD,CAEDtM,OAAO,CAACyM,eAAR,CAAwBr2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAvC,CAA6C,KAA7C,CAAoDq/C,MAApD,EACA,KAAKD,eAAL,CAAuBn2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAtC,CACD,C,kDAEYiJ,O,CAAS,qBACuB,KAAKqrC,QAD5B,CACZxD,iBADY,iBACZA,iBADY,CACO7B,WADP,iBACOA,WADP,CAGpB,GAAMjvC,KAAI,CAAGiJ,OAAO,CAAC0jB,MAAR,CAAe3sB,IAA5B,CACA,GAAMq/C,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CAEA,GAAIoQ,MAAM,EAAI,KAAKH,WAAL,GAAqBj2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAlD,CAAwD,CACtD,OACD,CAED,GAAI,CAACq/C,MAAD,EAAW,KAAKF,YAAL,GAAsBl2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAApD,CAA0D,CACxD,OACD,CAZmB,GAcZ6yC,QAdY,CAcA,KAAKyB,QAdL,CAcZzB,OAdY,CAepBA,OAAO,CAAC0M,eAAR,CAAwBt2C,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAvC,EACA,KAAKo/C,eAAL,CAAuB,IAAvB,CAEA,GAAIC,MAAM,EAAI,KAAKH,WAAnB,CAAgC,CAC9BrM,OAAO,CAACyM,eAAR,CAAwB,KAAKJ,WAA7B,CAA0C,IAA1C,CAAgDG,MAAhD,EACD,CAED,GAAI,CAACA,MAAD,EAAW,KAAKF,YAApB,CAAkC,CAChCtM,OAAO,CAACyM,eAAR,CAAwB,KAAKH,YAA7B,CAA2C,IAA3C,CAAiDE,MAAjD,EACD,CACF,C,uCAlJqCrJ,qB,EAqJzBiJ,4HAAf,E;;GC/IMO,gD,geACOv2C,O,CAAS,CAClB,KAAKqyB,IAAL,GACD,C,kCAEIryB,O,CAAS,IACJgmC,YADI,CACY,KAAKqF,QADjB,CACJrF,WADI,CAEZ,GAAIhmC,OAAO,CAAC0jB,MAAR,CAAe3sB,IAAf,CAAoBooB,MAApB,CAA2BovB,OAA3B,CAAmCvI,WAAnC,CAAJ,CAAqD,CACnDhmC,OAAO,CAAC0jB,MAAR,CAAe+e,eAAf,CAA+BzzC,cAA/B,EACD,CAFD,IAEO,CACLgR,OAAO,CAAC0jB,MAAR,CAAe+e,eAAf,CAA+BtzC,WAA/B,EACD,CACF,C,mCAEM,IACG04C,kBADH,CACyB,KAAKwD,QAD9B,CACGxD,iBADH,CAELA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3CA,IAAI,CAACw5C,cAAL,GACD,CAFD,EAGD,C,oDAEa1tC,O,CAAS,CACrB,KAAK4yB,IAAL,CAAU5yB,OAAV,EACD,C,kDAEYA,O,CAAS,CACpB,KAAKqyB,IAAL,GACD,C,2CAEU,CACT,KAAKA,IAAL,GACD,C,qCA/BmC0a,qB,EAkCvBwJ,sHAAf,E;;GCxCMC,0C,ycACG39B,Q,CAAU,oBACkB,KAAKwyB,QADvB,CACPzB,OADO,gBACPA,OADO,CACE5D,WADF,gBACEA,WADF,CAGf,GAAI4D,OAAO,CAAC2D,eAAR,EAAJ,CAA+B,CAC7B,OACD,CAED,GAAM/sC,MAAK,CAAGqY,QAAQ,CAAC49B,eAAT,CAAyBzQ,WAAzB,CAAd,CACA,GAAIjvC,KAAI,CAAGyJ,KAAK,CAAC6E,IAAN,CAAW,SAAA+jB,CAAC,QAAIA,EAAC,CAACpwB,QAAF,CAAWkI,aAAX,EAAJ,EAAZ,CAAX,CAEA,GAAI,CAACnK,IAAL,CAAW,CACTA,IAAI,CAAGyJ,KAAK,CAAC,CAAD,CAAZ,CACD,CAED,GAAI,CAACzJ,IAAL,CAAW,CACT,OACD,CAED6yC,OAAO,CAAC8M,UAAR,CAAmB3/C,IAAnB,EACD,C,kCApBgCg2C,qB,EAuBpByJ,6GAAf,E;;GCvBMG,0C,sdACgB,IAAPtkD,IAAO,MAAPA,GAAO,oBACmB,KAAKg5C,QADxB,CACVzB,OADU,gBACVA,OADU,CACDnvC,eADC,gBACDA,eADC,CAElB,GAAM1D,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CAEA,GAAI,CAACx2C,IAAD,EAAS,CAAC,KAAK8hB,QAAnB,CAA6B,CAC3B,OACD,CAED,GAAMypB,KAAI,CAAG,KAAKzpB,QAAL,CAAcs1B,KAAd,CAAoByI,aAApB,CAAkC7/C,IAAlC,CAAb,CAEA,GAAI,CAACurC,IAAI,CAACuU,qBAAL,CAA2B9/C,IAA3B,CAAiC1E,GAAjC,CAAL,CAA4C,CAC1C,OACD,CAED,GACE,KAAKwmB,QAAL,CAAcrY,KAAd,CACG4f,QADH,GAEG/a,IAFH,CAGI,SAAAkY,SAAS,QACPA,UAAS,GAAKxmB,IAAd,EAAsBwmB,SAAS,CAAC10B,cAAV,GAA2ByJ,MAA3B,CAAkCD,GAAlC,CADf,EAHb,CADF,CAOE,CACA,OACD,CACDoI,eAAe,CAACiiB,MAAhB,CAAuB3lB,IAAvB,CAA6B1E,GAA7B,EACAu3C,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,C,kCA3BgCg2C,qB,EA8BpB4J,6GAAf,E;;GC9BMG,oE,mhBACS,IACHlN,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACmN,YAAR,CAAqB,KAArB,EACD,C,sCAEMl+B,Q,CAAU,CACf,+IAAaA,QAAb,EACA,KAAKm+B,eAAL,GACD,C,2DAEkB,CACjB,KAAKA,eAAL,GACD,C,yDAEiB,mCACiB,KAAK3L,QADtB,CACRrF,WADQ,gBACRA,WADQ,CACK4D,OADL,gBACKA,OADL,CAEhB,GAAM92C,OAAM,CAAG,KAAK+lB,QAAL,CAAcrY,KAAd,CAAoB4f,QAApB,GAA+BhoB,KAA/B,CAAqC,SAAArB,IAAI,CAAI,CAC1D,GAAI,CAACA,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAL,CAAuC,CACrC,MAAO,KAAP,CACD,CAED,GAAM1D,KAAI,CAAG,KAAI,CAACzpB,QAAL,CAAcs1B,KAAd,CAAoByI,aAApB,CAAkC7/C,IAAlC,CAAb,CAEA,GAAIurC,IAAI,CAACuU,qBAAL,CAA2B9/C,IAA3B,CAAiCA,IAAI,CAAClO,cAAL,EAAjC,CAAJ,CAA6D,CAC3D,MAAO,KAAP,CACD,CAED,MAAO,MAAP,CACD,CAZc,CAAf,CAcA+gD,OAAO,CAACmN,YAAR,CAAqBjkD,MAArB,EACD,C,+CAhC6Ci6C,qB,EAmCjC+J,oJAAf,E;;GCjCMG,4D,mHACJ,wCAAc,yFACZ,qJAEA,MAAK/I,OAAL,CAAe,EAAf,CAHY,aAIb,C,sHAEY77C,G,CAAK,oBACgC,KAAKg5C,QADrC,CACRzB,OADQ,gBACRA,OADQ,CACC34C,mBADD,gBACCA,mBADD,CACsBwD,KADtB,gBACsBA,KADtB,CAEhB,GAAMsC,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CACA,GAAI,CAACx2C,IAAL,CAAW,CACT,OACD,CAED,GAAMk4C,UAAS,CAAG58C,GAAG,CAAClB,QAAJ,CAAa4F,IAAI,CAAClO,cAAL,EAAb,CAAoC,CAApC,CAAlB,CAEA,KAAKqlD,OAAL,CAAee,SAAS,CAACp+C,GAAV,CAAc,SAAA5C,QAAQ,CAAI,CACvC,GAAMmkC,OAAM,CAAG,GAAI7E,qBAAJ,CACbt8B,mBAAmB,CAACC,aAApB,CAAkCjD,QAAlC,CADa,CAAf,CAGAwG,KAAK,CAAC5M,GAAN,CAAUuqC,MAAM,CAACjO,IAAjB,EACA,MAAOiO,OAAP,CACD,CANc,CAAf,CAOD,C,gDAEW//B,G,CAAK,IACPoC,MADO,CACG,KAAK42C,QADR,CACP52C,KADO,CAEf,KAAKy5C,OAAL,CAAaj+C,OAAb,CAAqB,SAAAmiC,MAAM,CAAI,CAC7B39B,KAAK,CAAC8xB,MAAN,CAAa6L,MAAM,CAACjO,IAApB,EACAiO,MAAM,CAACoV,OAAP,GACD,CAHD,EAIA,KAAK0G,OAAL,CAAe,EAAf,CACD,C,2CAhCyCnB,qB,EAmC7BkK,wIAAf,E;;GCpCMC,kD,yBACJ,kCAAYv2C,OAAZ,CAAqB1S,QAArB,CAA+BqL,QAA/B,CAAyCqR,KAAzC,CAAgD1Z,mBAAhD,CAAqEwD,KAArE,CAA4E,CAAC,yEAC3E,KAAKkM,OAAL,CAAeA,OAAf,CACA,KAAK1S,QAAL,CAAgBA,QAAhB,CACA,KAAKqL,QAAL,CAAgBA,QAAhB,CACA,KAAKqR,KAAL,CAAaA,KAAb,CACA,KAAK1Z,mBAAL,CAA2BA,mBAA3B,CACA,KAAKwD,KAAL,CAAaA,KAAb,CAEA,KAAKu1C,OAAL,CAAe,EAAf,CAEA,KAAK7kB,MAAL,GACD,C,sGAEQ,gBACP,KAAK6kB,OAAL,CAAa/5C,OAAb,CAAqB,SAAC+D,QAAD,CAAc,CACjC,KAAI,CAACS,KAAL,CAAW8xB,MAAX,CAAkBvyB,QAAQ,CAACmwB,IAA3B,EACAnwB,QAAQ,CAACwzC,OAAT,GACD,CAHD,EAID,C,uCAEQ,CACP,GAAI78B,MAAK,CAAG,IAAZ,CACA,GAAM3iB,MAAK,CAAGmvD,WAAW,CAAC7xB,GAAZ,EAAd,CACA,GAAIr3B,SAAQ,CAAG,KAAKA,QAApB,CACA,GAAIqL,SAAQ,CAAG,KAAKA,QAApB,CAEA,MAAOqR,KAAK,EAAZ,CAAgB,2BAMV,KAAKhK,OAAL,CAAaG,uBAAb,CAAqC7S,QAArC,CAA+CqL,QAA/C,CAAyD,CAAzD,CANU,CAEF89C,WAFE,uBAEZnpD,QAFY,CAGFopD,WAHE,uBAGZ/9C,QAHY,CAIZ21C,SAJY,uBAIZA,SAJY,CAKZqI,SALY,uBAKZA,SALY,CAQdh+C,QAAQ,CAAG+9C,WAAX,CACAppD,QAAQ,CAAGmpD,WAAX,CACA;AAEA,GAAIE,SAAJ,CAAe,CACb,MACD,CACF,CAEDxnD,OAAO,CAACya,GAAR,CAAY,oBAAZ,CAAkC4sC,WAAW,CAAC7xB,GAAZ,GAAoBt9B,KAAtD,CAA6D,IAA7D,EACD,C,8CAEUinD,S,CAAW,iBACpB;AAEA,GAAIjnD,MAAK,CAAGinD,SAAS,CAACtzB,KAAV,EAAZ,CAEAszB,SAAS,CAACh/C,OAAV,CAAkB,SAAChI,GAAD,CAAS,CACzB,GAAM+4C,KAAI,CAAG,GAAI/c,kBAAJ,CACXj8B,KADW,CAEXC,GAFW,CAGX,CAHW,CAIX,GAAIgH,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,IAAM,GAA5C,CAJW,CAKX,GALW,CAAb,CAQA,MAAI,CAACwF,KAAL,CAAW5M,GAAX,CAAem5C,IAAI,CAAC7c,IAApB,EACA,MAAI,CAAC6lB,OAAL,CAAa75C,IAAb,CAAkB6wC,IAAlB,EAEAh5C,KAAK,CAAGC,GAAR,CACD,CAbD,EAcD,C,wCAGYivD,uHAAf,E;;GCrEMK,sD,gHACJ,qCAAc,sFACZ,kJAEA,MAAKxgD,IAAL,CAAY,IAAZ,CACA,MAAKyzC,IAAL,CAAY,IAAZ,CAJY,aAKb,C,gHAEY,CACX,GAAI,KAAKA,IAAT,CAAe,CACb,KAAKA,IAAL,CAAUjkB,MAAV,GACD,CACF,C,sCAEM1N,Q,CAAU,IACP+wB,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAEf,wIAAa/wB,QAAb,EACA,KAAK+Z,IAAL,CAAUgX,OAAO,CAAC2D,eAAR,EAAV,EACD,C,2DAEkB,CACjB,GAAI,KAAKx2C,IAAT,CAAe,CACb,GAAI,KAAKyzC,IAAT,CAAe,CACb,KAAKA,IAAL,CAAUjkB,MAAV,GACD,CAED,KAAKqM,IAAL,CAAU,KAAK77B,IAAf,EACD,CACF,C,kDAEYA,I,CAAM,CACjB,KAAK67B,IAAL,CAAU77B,IAAV,EACD,C,kCAEIA,I,CAAM,CACT,GAAI,CAAC,KAAK8hB,QAAV,CAAoB,CAClB,OACD,CAHQ,mBAK8B,KAAKwyB,QALnC,CAKDp6C,mBALC,gBAKDA,mBALC,CAKoBwD,KALpB,gBAKoBA,KALpB,CAOT,GAAI,CAACsC,IAAL,CAAW,CACT,OACD,CAED,KAAKA,IAAL,CAAYA,IAAZ,CAEA,GAAMC,KAAI,CAAGD,IAAI,CAACiC,QAAL,CAAcqC,yBAAd,EAAb,CACA,KAAKmvC,IAAL,CAAY,GAAI0M,kCAAJ,CACV,KAAKr+B,QAAL,CAAclY,OADJ,CAEV3J,IAAI,CAAC/I,QAFK,CAGV+I,IAAI,CAACsC,QAHK,CAIV,GAJU,CAKVrI,mBALU,CAMVwD,KANU,CAAZ,CAQD,C,sDAEcsC,I,CAAM,CACnB,GAAI,KAAKyzC,IAAT,CAAe,CACb,KAAKA,IAAL,CAAUjkB,MAAV,GACD,CACF,C,wCA9DsCwmB,qB,EAiE1BwK,+HAAf,E;;GClEMC,kE,8gBACS,IACH5N,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACiE,gBAAR,GACD,C,2DAEkB,IACTjE,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAM7yC,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CAEA,GAAIx2C,IAAJ,CAAU,CACR6yC,OAAO,CAAC6N,0BAAR,CAAmC1gD,IAAnC,CAAyC,IAAzC,EACD,CACF,C,kDAEYA,I,CAAM,IACT6yC,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjBA,OAAO,CAAC6N,0BAAR,CAAmC1gD,IAAnC,CAAyC,IAAzC,EACD,C,uDAEgB,IACP6yC,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAEfA,OAAO,CAACiE,gBAAR,GACD,C,8CAvB4Cd,qB,EA0BhCyK,iJAAf,E;;GC1BME,oC,8bACKrM,Q,CAAU,CACjB,iIAAeA,QAAf,EADiB,GAETzB,QAFS,CAEG,KAAKyB,QAFR,CAETzB,OAFS,CAGjBA,OAAO,CAAC+N,UAAR,CAAmB,IAAnB,EACD,C,+CAEY,IACH/N,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAAC+N,UAAR,CAAmB,KAAnB,EACD,C,+BAV6B5K,qB,EAajB2K,oGAAf,E;;GCbME,4C,0jBACS/+B,Q,iOAMP,KAAKwyB,Q,CAJPzB,O,gBAAAA,O,CACA5D,W,gBAAAA,W,CACA6R,U,gBAAAA,U,CACAhQ,iB,gBAAAA,iB,MAIA+B,OAAO,CAAC2D,eAAR,IACA10B,QAAQ,CAACi/B,WAAT,CAAqBC,QAArB,CAA8BnO,OAAO,CAAC2D,eAAR,EAA9B,C,0BAEMyK,O,CAAUpO,OAAO,CAAC2D,eAAR,E,CACV0K,O,CAAUp/B,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BF,OAAO,CAACx/C,EAAnC,C,CAChB,GAAIw/C,OAAO,GAAKC,OAAhB,CAAyB,CACvBrO,OAAO,CAAC8M,UAAR,CAAmBuB,OAAnB,EACD,C,wCAIGlhD,I,CAAO8hB,QAAQ,CAACs/B,qBAAT,CAA+BnS,WAA/B,EAA4CzpC,GAA5C,E,KAETxF,I,0BACF6yC,OAAO,CAAC8M,UAAR,CAAmB3/C,IAAnB,E,uBACM8wC,kBAAiB,CAACK,WAAlB,E,SACAh0C,I,CAAO2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,C,CACb8gD,UAAU,CAACO,mBAAX,CAA+BlkD,IAAI,CAACyb,WAAL,EAA/B,E,6KA3B8Bo9B,qB,EAgCrB6K,gHAAf,E;;AClCO,GAAMS,QAAO,CAAG,SAAhB,CACA,GAAMC,cAAa,CAAG,eAAtB,CACA,GAAMC,SAAQ,CAAG,UAAjB,CACA,GAAMC,GAAE,CAAG,IAAX,C;;GCADC,4C,udACS,IACHxL,oBADG,CACqB,KAAK5B,QAD1B,CACH4B,mBADG,CAEXA,mBAAmB,CAACC,oBAApB,GACD,C,sCAEMr0B,Q,CAAU,CACf,mIAAaA,QAAb,EACA,KAAK+Z,IAAL,GACD,C,uDAEgB,CACf,GAAI,CAAC,KAAK/Z,QAAV,CAAoB,CAClB,OACD,CAED,KAAK+Z,IAAL,GACD,C,0DAEgB77B,I,CAAM,oBACoB,KAAKs0C,QADzB,CACb4B,mBADa,gBACbA,mBADa,CACQrD,OADR,gBACQA,OADR,CAErB,GAAI,CAAC,KAAK/wB,QAAV,CAAoB,CAClB,OACD,CAED,GACE,CAAC+wB,OAAO,CAAC8O,aAAR,CAAsBC,QAAtB,CAAD,EACA/O,OAAO,CAAC2D,eAAR,KAA8Bx2C,IAFhC,CAGE,CACA,OACD,CAEDk2C,mBAAmB,CAACE,gBAApB,CAAqCp2C,IAArC,EACD,C,mDAEc,CACb,KAAK67B,IAAL,GACD,C,mCAEM,qBACoC,KAAKyY,QADzC,CACG4B,mBADH,iBACGA,mBADH,CACwBrD,OADxB,iBACwBA,OADxB,CAGL,GAAIA,OAAO,CAAC8O,aAAR,CAAsBC,QAAtB,CAAJ,CAAiD,CAC/C,GAAMn4C,MAAK,CAAG,KAAKqY,QAAL,CAAcrY,KAAd,CAAoBo4C,aAApB,EAAd,CACAp4C,KAAK,CAACvQ,OAAN,CAAc,SAAA8G,IAAI,QAAIk2C,oBAAmB,CAACE,gBAApB,CAAqCp2C,IAArC,CAAJ,EAAlB,EACD,CAHD,IAGO,CACLk2C,mBAAmB,CAACC,oBAApB,GAEA;;;;;QAMD,CACF,C,mCAvDiCH,qB,EA0DrB0L,gHAAf,E;;GC3DMI,gE,ygBACS,IACHjP,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACmN,YAAR,CAAqB,KAArB,EACD,C,sCAEMl+B,Q,CAAU,CACf,6IAAaA,QAAb,EADe,GAGP+wB,QAHO,CAGK,KAAKyB,QAHV,CAGPzB,OAHO,CAIfA,OAAO,CAACmN,YAAR,CAAqB,IAArB,EACD,C,6CAX2ChK,qB,EAc/B8L,8IAAf,E;;GCdMC,gC,qGACJ,yBAAYC,aAAZ,CAA2BC,aAA3B,CAA0C,2EACxC,uIACA,MAAKD,aAAL,CAAqBA,aAArB,CACA,MAAKC,aAAL,CAAqBA,aAArB,CAHwC,aAIzC,C,0MAEaC,S,0JACJpR,iB,CAAsB,KAAKwD,Q,CAA3BxD,iB,uBAEFA,kBAAiB,CAACK,WAAlB,E,QAENgR,UAAU,CAAC,UAAM,CACf,MAAI,CAACH,aAAL,CAAmBI,aAAnB,CAAiC,CAAjC,EACD,CAFS,CAEP,GAFO,CAAV,C,uLAKuB,IAAhBvsD,MAAgB,MAAhBA,KAAgB,CAATqL,KAAS,MAATA,KAAS,CACvB,GAAIA,KAAK,EAAI,KAAK+gD,aAAL,CAAmBI,aAAnB,GAAqC,IAAlD,CAAwD,IAC9CxP,QAD8C,CAClC,KAAKyB,QAD6B,CAC9CzB,OAD8C,CAEtDA,OAAO,CAACyP,WAAR,GACD,CACF,C,6BAtB2BtM,qB,EAyBf+L,0FAAf,E;;GCzBMQ,0B,kGACJ,sBAAYN,aAAZ,CAA2B,wEACzB,oIACA,MAAKA,aAAL,CAAqBA,aAArB,CAFyB,aAG1B,C,6FAEQ3N,Q,CAAU,CACjB,4HAAeA,QAAf,EADiB,GAETzB,QAFS,CAEG,KAAKyB,QAFR,CAETzB,OAFS,CAGjBA,OAAO,CAAC2P,YAAR,CAAqB,KAAKP,aAA1B,EACD,C,+CAEY,IACHpP,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAAC2P,YAAR,CAAqB,KAArB,EACD,C,0BAfwBxM,qB,EAkBZuM,iFAAf,E;;ACpBA,GAAME,KAAI,CAAG,SAAb,CACA,GAAMC,SAAQ,CAAG,SAAjB,CACA,GAAMhuB,OAAM,CAAG,SAAf,CACA,GAAMiuB,WAAU,CAAG,SAAnB,CACA,GAAM9qB,YAAI,CAAG,SAAb,CACA,GAAM+qB,WAAU,CAAG,SAAnB,CACA,GAAMC,UAAS,CAAG,SAAlB,CACA,GAAMC,IAAG,CAAG,SAAZ,CACA,GAAMC,mBAAkB,CAAG,SAA3B,CACA,GAAMC,0BAAyB,CAAG,SAAlC,CACA,GAAMC,aAAY,CAAG,SAArB,CACA,GAAMC,mBAAkB,CAAG,SAA3B,CACA,GAAMC,WAAU,CAAG,SAAnB,CACA,GAAMv0C,UAAS,CAAG,SAAlB,CACA,GAAMw0C,kBAAiB,CAAG,SAA1B,CACA,GAAM58C,YAAI,CAAG,SAAb,C;;GCbM68C,Y,yYACK,sBACkB,KAAK/tD,KADvB,CACCw5B,IADD,CACCA,IADD,2BACQ,KADR,kBAGP,MACE,+BACE,EAAE,CAAC,OADL,CAEE,KAAK,CAAC,4BAFR,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,CAKE,OAAO,CAAC,iBALV,EAOE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,iVAFJ,EAPF,CADF,CAcD,C,mBAlBiB34B,kB,EAqBLktD,0DAAf,E;;GCrBMC,sB,kaACK,iBACmC,KAAKhuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,+BACE,KAAK,CAAC,4BADR,CAEE,EAAE,CAAC,QAFL,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,CAKE,OAAO,CAAC,qBALV,EAOE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,k8BAFJ,CAGE,IAAI,CAAEzB,KAHR,EAPF,CADF,CAeD,C,wBAnBsBl3B,kB,EAsBVmtD,yEAAf,E;;GCtBMC,U,oYACK,iBACmC,KAAKjuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,+BACE,EAAE,CAAC,MADL,CAEE,KAAK,CAAC,4BAFR,CAGE,OAAO,CAAC,qBAHV,CAIE,KAAK,CAAEA,IAJT,CAKE,MAAM,CAAEA,IALV,EAOE,4BAAG,IAAI,CAAC,SAAR,EACE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,k4DAFJ,CAGE,IAAI,CAAEzB,KAHR,EADF,CAME,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,wzDAFJ,CAGE,IAAI,CAAEA,KAHR,EANF,CAPF,CADF,CAsBD,C,kBA1BgBl3B,kB,EA6BJotD,uDAAf,E;;GC7BMC,I,qXACK,iBACkC,KAAKluD,KADvC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,KADxB,kBAGP,MACE,+BACE,KAAK,CAAC,4BADR,CAEE,EAAE,CAAC,QAFL,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,CAKE,OAAO,CAAC,qBALV,EAOE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,mhBAFJ,CAGE,IAAI,CAAEzB,KAHR,EAPF,CADF,CAeD,C,eAnBal3B,kB,EAsBDqtD,8CAAf,E;;GCtBMC,Y,yYACK,iBACmC,KAAKnuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,+BACE,KAAK,CAAC,4BADR,CAEE,OAAO,CAAC,aAFV,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,EAME,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,ibAFJ,CAGE,IAAI,CAAEzB,KAHR,EANF,CADF,CAcD,C,mBAlBiBl3B,kB,EAqBLstD,0DAAf,EAEA;;;;;;;;GCvBMC,Y,yYACK,iBACmC,KAAKpuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,+BACE,EAAE,CAAC,OADL,CAEE,KAAK,CAAC,4BAFR,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,CAKE,OAAO,CAAC,qBALV,EAOE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,weAFJ,CAGE,IAAI,CAAEzB,KAHR,EAPF,CADF,CAeD,C,mBAnBiBl3B,kB,EAsBLutD,0DAAf,E;;GCtBMC,c,8YACK,iBACkC,KAAKruD,KADvC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,KADxB,kBAGP,MACE,+BACE,KAAK,CAAC,4BADR,CAEE,EAAE,CAAC,QAFL,CAGE,OAAO,CAAC,aAHV,CAIE,KAAK,CAAEA,IAJT,CAKE,MAAM,CAAEA,IALV,EAOE,+BACE,EAAE,CAAC,UADL,CAEE,CAAC,CAAC,mZAFJ,CAGE,IAAI,CAAEzB,KAHR,EAPF,CADF,CAeD,C,oBAnBkBl3B,kB,EAsBNwtD,6DAAf,E;;GCtBMC,oB,6ZACK,iBACkC,KAAKtuD,KADvC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,KADxB,kBAGP,MACE,+BACE,EAAE,CAAC,WADL,CAEE,KAAK,CAAC,4BAFR,CAGE,KAAK,CAAEA,IAHT,CAIE,MAAM,CAAEA,IAJV,CAKE,OAAO,CAAC,qBALV,EAOE,+BACE,CAAC,CAAC,0fADJ,CAEE,IAAI,CAAEzB,KAFR,EAPF,CADF,CAcD,C,uBAlBqBl3B,kB,EAqBTytD,sEAAf,E;;GCrBMC,U,4YACK,iBACmC,KAAKvuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,sCACE,KAAK,CAAC,4BADR,CAEE,KAAK,CAAEA,IAFT,CAGE,MAAM,CAAEA,IAHV,CAIE,OAAO,CAAC,qBAJV,EAME,sCACE,CAAC,CAAC,qQADJ,CAEE,IAAI,CAAEzB,KAFR,EANF,CADF,CAaD,C,kBAjBgBl3B,eAAK,CAAC2tD,a,EAoBVD,uDAAf,E;;GCpBME,Y,iZACK,iBACmC,KAAKzuD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,sCACE,KAAK,CAAC,4BADR,CAEE,KAAK,CAAEA,IAFT,CAGE,MAAM,CAAEA,IAHV,CAIE,OAAO,CAAC,aAJV,EAME,sCACE,CAAC,CAAC,4XADJ,CAEE,IAAI,CAAEzB,KAFR,EANF,CADF,CAaD,C,mBAjBiBl3B,eAAK,CAAC2tD,a,EAoBXC,0DAAf,E;;GCpBMC,c,sZACK,iBACmC,KAAK1uD,KADxC,+BACC+3B,KADD,CACCA,KADD,4BACS,MADT,gDACiByB,IADjB,CACiBA,IADjB,2BACwB,MADxB,kBAGP,MACE,sCACE,KAAK,CAAC,4BADR,CAEE,KAAK,CAAEA,IAFT,CAGE,MAAM,CAAEA,IAHV,CAIE,OAAO,CAAC,qBAJV,EAME,sCACE,CAAC,CAAC,2kBADJ,CAEE,IAAI,CAAEzB,KAFR,EANF,CADF,CAaD,C,oBAjBkBl3B,eAAK,CAAC2tD,a,EAoBZE,6DAAf,E;;;;8dCpBA,GAAMC,aAAY,CAAGlwD,gDAAM,CAACC,GAAV,+BAOI,SAAAsB,KAAK,sBAAWA,KAAK,CAAC4uD,UAAjB,OAPT,CAAlB,CAgBeD,oEAAf,E;;6oFCfA,GAAME,UAAS,CAAGpwD,gDAAM,CAACC,GAAV,4BAAf,CAcA,GAAMowD,SAAQ,CAAGrwD,gDAAM,CAACC,GAAV,6BAAd,CAUA,GAAMqwD,4BAA2B,CAAGtwD,wDAAM,CAACowD,SAAD,CAAT,oBAAjC,CAKA,GAAMG,iBAAgB,CAAGvwD,wDAAM,CAACowD,SAAD,CAAT,oBAAtB,CAKA,GAAMI,0BAAyB,CAAGxwD,wDAAM,CAACowD,SAAD,CAAT,oBAA/B,CAKA,GAAMK,eAAc,CAAGC,oDAAH,oBAApB,CAIA,GAAMC,aAAY,CAAGD,oDAAH,oBAAlB,CAIA,GAAME,cAAa,CAAG5wD,wDAAM,CAACowD,SAAD,CAAT,oBACfK,cADe,CAEG9B,QAFH,CAAnB,CAKA,GAAMkC,QAAO,CAAG7wD,gDAAM,CAACC,GAAV,oBAAb,CAOA,GAAM6wD,aAAY,CAAG9wD,wDAAM,CAAC6wD,OAAD,CAAT,qBAAlB,CAKA,GAAME,OAAM,CAAG/wD,gDAAM,CAACC,GAAV,qBAAZ,C;;qtBChEA,GAAM+wD,UAAS,CAAGhxD,gDAAM,CAACg+B,CAAV,uBAAf,CAOA,GAAMizB,MAAK,CAAGjxD,gDAAM,CAACkxD,IAAV,wBAAX,CAMA,GAAMC,MAAK,CAAGnxD,gDAAM,CAACkxD,IAAV,wBACApC,SADA,CAAX,C;;yfCdA,GAAMsC,MAAK,CAAGpxD,gDAAM,CAACkxD,IAAV,wBAAX,CASA,GAAMG,SAAQ,CAAGrxD,wDAAM,CAACoxD,KAAD,CAAT,yBAAd,C;;gTCTA,GAAME,UAAS,CAAGZ,oDAAH,4BACX,SAAAnvD,KAAK,QAAI,CAACA,KAAK,CAACgwD,QAAP,EAAmB,kBAAvB,EADM,CAMT,SAAAhwD,KAAK,QAAIA,MAAK,CAACgwD,QAAN,EAAkB,eAAtB,EANI,CAAf,C;;8QCCA,GAAMpqD,YAAK,CAAGnH,wDAAM,CAAC6wD,OAAD,CAAT,wBACA7qB,sBAAM,CAAC6oB,UADP,CAAX,C;;o1CCCM2C,4B,ibACK,iBAWH,KAAKjwD,KAXF,CAELmM,EAFK,aAELA,EAFK,CAGL+jD,KAHK,aAGLA,KAHK,CAILplD,IAJK,aAILA,IAJK,CAKL4B,KALK,aAKLA,KALK,CAMLyjD,WANK,aAMLA,WANK,CAOL/uD,SAPK,aAOLA,SAPK,CAQLgvD,QARK,aAQLA,QARK,CASLC,KATK,aASLA,KATK,CAUFC,IAVE,4IAaP,MACE,wBAAC,uBAAD,MACE,uBAAC,YAAD,MACGJ,KAAK,EAAI,uBAAC,mBAAD,EAAO,OAAO,CAAE/jD,EAAhB,EAAqB+jD,KAArB,CADZ,CAEE,uBAAC,KAAD,gBACE,EAAE,CAAE/jD,EADN,CAEE,IAAI,CAAErB,IAAI,EAAI,MAFhB,CAGE,KAAK,CAAE4B,KAHT,CAIE,WAAW,CAAEyjD,WAJf,CAKE,SAAS,CAAE/uD,SALb,CAME,QAAQ,CAAEgvD,QANZ,CAOE,QAAQ,CAAC,GAPX,EAQME,IARN,EAFF,CADF,CAcE,uBAAC,WAAD,MAAQD,KAAR,CAdF,CADF,CAkBD,C,2BAhCyBxvD,kB,EAmC5B,GAAMguD,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,gCAAf,CAQA,GAAM6xD,aAAY,CAAG9xD,gDAAM,CAACC,GAAV,iCAAlB,CAUA,GAAMgxD,oBAAK,CAAGjxD,gDAAM,CAACC,GAAV,iCAAX,CAQA,GAAM8xD,MAAK,CAAG/xD,gDAAM,CAACgyD,KAAV,iCAAX,C;;ooKC5DA,GAAMC,iBAAgB,CAAGjyD,gDAAM,CAACC,GAAV,0BAAtB,CAgBA,GAAMiyD,QAAO,CAAGlyD,wDAAM,CAACiyD,gBAAD,CAAT,2BAAb,CAKA,GAAME,yBAAwB,CAAGnyD,wDAAM,CAACkyD,OAAD,CAAT,2BAG1B,SAAC3wD,KAAD,QACAyL,OAAM,CAACC,IAAP,CAAY1L,KAAK,CAAC4B,QAAlB,EAA4B+J,MAA5B,CAAmC,SAACuzB,KAAD,CAAQ7yB,GAAR,CAAgB,CACjD,MAAO6yB,MAAK,CAAG,IAAR,CAAe7yB,GAAf,CAAqB,GAArB,CAA2BrM,KAAK,CAAC4B,QAAN,CAAeyK,GAAf,CAA3B,CAAiD,KAAxD,CACD,CAFD,CAEG,EAFH,CADA,EAH0B,CAA9B,CAWA,GAAMwkD,aAAY,CAAGpyD,gDAAM,CAACC,GAAV,2BACP+lC,sBAAM,CAAC8oB,SADA,CAAlB,CAIO,GAAMuD,wBAAb,2bACW,iBACgC,KAAK9wD,KADrC,CACClB,OADD,aACCA,OADD,CACUuK,QADV,aACUA,QADV,CACuBinD,IADvB,wFAGP,GAAMhtC,YAAW,CAAG,QAAdA,YAAc,CAACxkB,OAAD,CAAa,CAC/B,GAAM0zC,YAAW,CAAG1zC,OAAO,CAACiyD,qBAAR,CAChBjyD,OAAO,CAACiyD,qBAAR,EADgB,CAEhBjyD,OAAO,CAAC03B,GAAR,CAAY,CAAZ,EAAeu6B,qBAAf,EAFJ,CAIA,GAAMnvD,SAAQ,CAAG,EAAjB,CAEA,GAAI4wC,WAAW,CAACnzC,GAAZ,CAAkBE,MAAM,CAACG,WAAP,CAAqB,CAA3C,CAA8C,CAC5CkC,QAAQ,CAACovD,MAAT,CAAkB,EAAlB,CACD,CAFD,IAEO,CACLpvD,QAAQ,CAACvC,GAAT,CAAe,EAAf,CACD,CAED,GAAImzC,WAAW,CAACrzC,IAAZ,CAAmBI,MAAM,CAACC,UAAP,CAAoB,CAA3C,CAA8C,CAC5CoC,QAAQ,CAAC/E,KAAT,CAAiB,CAAjB,CACD,CAFD,IAEO,CACL+E,QAAQ,CAACzC,IAAT,CAAgB,CAAhB,CACD,CAED,MAAOyC,SAAP,CACD,CApBD,CAsBA,MACE,wBAAC,wBAAD,gBAA0B,QAAQ,CAAE0hB,WAAW,CAACxkB,OAAD,CAA/C,EAA8DwxD,IAA9D,EACGjnD,QADH,CADF,CAKD,CA/BH,6BAAqCxI,kBAArC,EAkCA,GAAMowD,cAAa,CAAGxyD,gDAAM,CAACC,GAAV,2BAAnB,CAWA,GAAMwyD,iBAAgB,CAAGzyD,gDAAM,CAACC,GAAV,2BAAtB,CAUA,GAAMyyD,mBAAkB,CAAG1yD,gDAAM,CAACC,GAAV,2BAAxB,CAKA,GAAM0yD,aAAY,CAAG3yD,gDAAM,CAACC,GAAV,2BAKd,SAACsB,KAAD,QAAWA,MAAK,CAACqxD,QAAN,EAAkB,YAA7B,EALc,CAMD,SAACrxD,KAAD,QAAYA,MAAK,CAACsxD,SAAN,CAAkB,MAAlB,CAA2B,SAAvC,EANC,CAOH,SAACtxD,KAAD,QAAYA,MAAK,CAACsxD,SAAN,CAAkB,MAAlB,CAA2B,MAAvC,EAPG,CAQd,SAACtxD,KAAD,QAAWA,MAAK,CAAC4nB,KAAN,EAAe,kBAA1B,EARc,CAad,SAAC5nB,KAAD,QACAA,MAAK,CAACuxD,SAAN,EACApC,oDADA,2BAIsBvB,kBAJtB,CADA,EAbc,CAuBZ,SAAC5tD,KAAD,QACAA,MAAK,CAACuxD,SAAN,EACApC,oDADA,4BADA,EAvBY,CAAlB,CA+BA,GAAMqC,qBAAoB,CAAG/yD,wDAAM,CAAC2yD,YAAD,CAAT,4BAEtBD,kBAFsB,CAA1B,CAOA,GAAMM,mBAAkB,CAAGhzD,gDAAM,CAACC,GAAV,qBAAxB,CAOA,GAAMgzD,YAAW,CAAGjzD,gDAAM,CAACC,GAAV,qBAAjB,CAKA,GAAMizD,sBAAqB,CAAGxC,oDAAH,qBAA3B,CAKA,GAAMyC,sBAAqB,CAAGzC,oDAAH,qBAA3B,CAIA,GAAM0C,mBAAkB,CAAG1C,oDAAH,qBAAxB,CAKA,GAAM2C,cAAa,CAAGrzD,gDAAM,CAACiD,MAAV,qBAOG,SAAC1B,KAAD,QAAWA,MAAK,CAAC4+B,GAAN,gBAAoB5+B,KAAK,CAAC4+B,GAA1B,KAAX,EAPH,CAYf,SAAC5+B,KAAD,QAAWA,MAAK,CAAC+xD,QAAN,EAAkB,CAAC/xD,KAAK,CAACgwD,QAAzB,EAAqC2B,qBAAhD,EAZe,CAcf,SAAC3xD,KAAD,QAAWA,MAAK,CAACgwD,QAAN,EAAkB4B,qBAA7B,EAde,CAiBb,SAAC5xD,KAAD,QAAW,CAACA,KAAK,CAACgwD,QAAP,EAAmB6B,kBAA9B,EAjBa,CA0Bb,SAAC7xD,KAAD,QAAWA,MAAK,CAACgwD,QAAN,EAAkB,eAA7B,EA1Ba,CAAnB,CA8BA,GAAMgC,4BAAmB,CAAG,QAAtBA,oBAAsB,CAC1Bn5C,OAD0B,CAKvB,IAHHo5C,iBAGG,2DAHgB,IAGhB,IAFHC,OAEG,2DAFM,EAEN,IADHb,SACG,2DADQ,KACR,CACH,MAAOx4C,QAAO,CACX3G,IADI,CACC,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAI,CAACD,CAAC,CAACkX,IAAH,EAAWjX,CAAC,CAACiX,IAAjB,CAAuB,CACrB,MAAO,EAAP,CACD,CAED,GAAIlX,CAAC,CAACkX,IAAF,EAAU,CAACjX,CAAC,CAACiX,IAAjB,CAAuB,CACrB,MAAO,CAAC,CAAR,CACD,CAED,GAAIlX,CAAC,CAACkX,IAAF,CAASjX,CAAC,CAACiX,IAAf,CAAqB,CACnB,MAAO,EAAP,CACD,CAED,GAAIlX,CAAC,CAACkX,IAAF,CAASjX,CAAC,CAACiX,IAAf,CAAqB,CACnB,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAnBI,EAoBJ1N,GApBI,CAoBA,cAAsCsB,KAAtC,CAAgD,IAA7C4G,MAA6C,MAA7CA,KAA6C,CAAtCyS,MAAsC,MAAtCA,MAAsC,CAA9BH,SAA8B,MAA9BA,SAA8B,CAAnBhf,KAAmB,MAAnBA,KAAmB,CACnD,GAAMmyD,QAAO,CAAG,QAAVA,QAAU,CAACzlD,KAAD,QAAWA,MAAK,GAAKlT,SAAV,EAAuBkT,KAAK,GAAK,IAA5C,EAAhB,CACA,GAAIA,KAAK,EAAIA,KAAK,CAAC0lD,OAAnB,CAA4B,CAC1B1lD,KAAK,CAAGA,KAAK,CAAC0lD,OAAN,CAAc,QAAd,CAAwB,IAAxB,CAAR,CACD,CAED,GAAIpzC,SAAS,EAAIizC,gBAAjB,CAAmC,CACjC,MAAOA,iBAAgB,CACrBjzC,SADqB,CAErBhf,KAFqB,wBAGL8F,KAHK,aAGIosD,MAHJ,EAAvB,CAKD,CAED,MACE,wBAAC,YAAD,EACE,QAAQ,CAAEA,MAAM,GAAK,EAAX,EAAiBb,QAD7B,CAEE,GAAG,wBAAkBvrD,KAAlB,aAA2BosD,MAA3B,CAFL,EAIG/yC,MAAM,EAAI,uBAAC,kBAAD,MAAqBA,MAArB,MAJb,CAKGgzC,OAAO,CAACzlD,KAAD,CAAP,EAAkBm2C,KAAK,CAACwP,OAAN,CAAc3lD,KAAd,CAAlB,EACC,uBAAC,kBAAD,MACGslD,mBAAmB,CAClBtlD,KADkB,CAElBulD,gBAFkB,CAGlBC,MAAM,CAAG,GAAT,CAAepsD,KAHG,CADtB,CANJ,CAcGqsD,OAAO,CAACzlD,KAAD,CAAP,EAAkB,CAACm2C,KAAK,CAACwP,OAAN,CAAc3lD,KAAd,CAAnB,EACC,uBAAC,YAAD,MAAeA,KAAf,CAfJ,CADF,CAoBD,CAtDI,CAAP,CAuDD,CA7DD,CA+DA,GAAM4lD,cAAa,CAAG7zD,wDAAM,CAACkyD,OAAD,CAAT,qBAGf,SAAC3wD,KAAD,QAAYA,MAAK,CAACnD,KAAN,CAAc,eAAd,CAAgC,cAA5C,EAHe,CAOf,SAACmD,KAAD,QAAWA,MAAK,CAACuyD,GAAN,EAAa,eAAxB,EAPe,CAAnB,CAYA,GAAMC,gCAAuB,CAAG,QAA1BA,wBAA0B,OAAqC,IAAlCC,SAAkC,OAAlCA,QAAkC,CAAxBppD,QAAwB,OAAxBA,QAAwB,CAAXinD,IAAW,mFACnE,GAAImC,QAAJ,CAAc,CACZ,MAAO,wBAAC,uBAAD,CAAqBnC,IAArB,CAA4BjnD,QAA5B,CAAP,CACD,CAED,MAAO,wBAAC,aAAD,CAAmBinD,IAAnB,CAA0BjnD,QAA1B,CAAP,CACD,CAND,C;;4tFCzQA,GAAMk5B,YAAI,CAAG4sB,oDAAH,yBAAV,CAcA,GAAMuD,WAAU,CAAGvD,oDAAH,0BAAhB,CA2BA,GAAMwD,UAAS,CAAGxD,oDAAH,0BAAf,CAcA,GAAMztD,cAAM,CAAGytD,oDAAH,0BAAZ,CAsBA,GAAMyD,cAAa,CAAGn0D,gDAAM,CAACC,GAAV,0BAAnB,CAKA,GAAMm0D,gBAAe,CAAGp0D,gDAAM,CAACiD,MAAV,0BAMjB,SAAC1B,KAAD,CAAW,CACX,GAAIA,KAAK,CAAC6H,IAAV,CAAgB,CACd,MAAO8qD,UAAP,CACD,CACD,OAAQ3yD,KAAK,CAAC8yD,WAAd,EACE,IAAK,MAAL,CACE,MAAOvwB,YAAP,CACF,IAAK,aAAL,CACE,MAAOmwB,WAAP,CACF,QACE,MAAOhxD,cAAP,CANJ,CAQD,CAlBkB,CAArB,CAqBO,GAAMqxD,cAAM,CAAG,QAATA,OAAS,CAAC/yD,KAAD,QACpB,+BAAC,eAAD,CAAqBA,KAArB,CACGA,KAAK,CAAC6H,IAAN,EACC,8BAAC,aAAD,MACE,8BAAC,KAAD,CAAO,IAAP,EAAY,KAAK,CAAC,SAAlB,EADF,CAFJ,CAMG7H,KAAK,CAACqJ,QANT,CADoB,EAAf,CAWP,GAAM2pD,qBAAoB,CAAGv0D,wDAAM,CAACqzD,aAAD,CAAT,0BAA1B,CAYO,GAAMmB,mBAAW,CAAG,QAAdA,YAAc,CAACjzD,KAAD,CAAW,CACpC,MACE,+BAAC,oBAAD,CAA0BA,KAA1B,CACE,8BAAC,MAAD,MADF,CADF,CAKD,CANM,C;;kcChIA,GAAMkzD,KAAI,CAAGz0D,wDAAM,CAAC00D,gCAAD,CAAT,uBAAV,CAMA,GAAMC,WAAU,CAAG30D,wDAAM,CAAC00D,gCAAD,CAAT,wBAAhB,C;;;;wkCCLP,GAAMtE,qBAAS,CAAGpwD,gDAAM,CAACC,GAAV,6BAAf,CAKA,GAAM20D,KAAI,CAAGlE,oDAAH,8BAAV,CASA,GAAMmE,SAAQ,CAAG70D,gDAAM,CAACC,GAAV,8BACV20D,IADU,CAAd,CAOA,GAAME,OAAM,CAAG90D,gDAAM,CAACC,GAAV,8BACR20D,IADQ,CAAZ,C,GASMG,sB,0aACK,iBACsC,KAAKxzD,KAD3C,CACCwJ,IADD,aACCA,IADD,CACOkB,IADP,aACOA,IADP,CACa3M,MADb,aACaA,MADb,CACqBw/C,OADrB,aACqBA,OADrB,CAC8B7B,GAD9B,aAC8BA,GAD9B,CAGP,MACE,wBAAC,oBAAD,MACGlyC,IAAI,EAAI,uBAAC,QAAD,MAAWA,IAAX,CADX,CAEE,uBAAC,aAAD,EACE,GAAG,CAAC,oBADN,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIkB,IAAI,CAACqoB,iBAAL,CAAuB0gC,oBAAvB,CAA4C11D,MAA5C,CAAoD,CAAC,CAArD,CAAJ,CAA6D,CAC3D2M,IAAI,CAACqoB,iBAAL,CAAuB2gC,iBAAvB,CAAyC31D,MAAzC,CAAiD,CAAC,CAAlD,EACAw/C,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CACF,CAPH,EAFF,CAWE,uBAAC,MAAD,MAASgxC,GAAT,CAXF,CAYE,uBAAC,aAAD,EACE,GAAG,CAAC,iBADN,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIhxC,IAAI,CAACqoB,iBAAL,CAAuB0gC,oBAAvB,CAA4C11D,MAA5C,CAAoD,CAApD,CAAJ,CAA4D,CAC1D2M,IAAI,CAACqoB,iBAAL,CAAuB2gC,iBAAvB,CAAyC31D,MAAzC,CAAiD,CAAjD,EACAw/C,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CACF,CAPH,EAZF,CADF,CAwBD,C,wBA5BsB7J,sB,EA+BV2yD,sFAAf,E;;+PC9DA,GAAM3E,gCAAS,CAAGpwD,gDAAM,CAACC,GAAV,wCAAf,C,GAMMi1D,4C,qHACJ,+BAAY3zD,KAAZ,CAAmB,iFACjB,2IAAMA,KAAN,GAEA,MAAK4zD,YAAL,CAAoB/yD,kBAAA,EAApB,CACA,MAAKgzD,cAAL,CAAsB,MAAKC,YAAL,CAAkBzyD,IAAlB,yDAAtB,CACA,MAAKO,QAAL,CAAgB,IAAhB,CACA,MAAK2yB,KAAL,CAAa,CACX3yB,QAAQ,CAAE,IADC,CAAb,CANiB,aASlB,C,+GAEc,iBAC0C,KAAK5B,KAD/C,CACLsjB,WADK,aACLA,WADK,mCACQywC,SADR,CACQA,SADR,gCACoB,CADpB,yDACuBC,UADvB,CACuBA,UADvB,gCACoC,CADpC,uBAGb,GAAI,CAAC,KAAKJ,YAAL,CAAkBr4D,OAAvB,CAAgC,CAC9B,OACD,CAED,GAAMwvD,YAAW,CAAGznC,WAAW,EAA/B,CAEA,GACE,CAAC,KAAK1hB,QAAN,EACA,KAAKA,QAAL,CAAcrI,CAAd,GAAoBwxD,WAAW,CAACxxD,CADhC,EAEA,KAAKqI,QAAL,CAAcnI,CAAd,GAAoBsxD,WAAW,CAACtxD,CAHlC,CAIE,CACA,KAAKmI,QAAL,CAAgBmpD,WAAhB,CAEA,KAAK6I,YAAL,CAAkBr4D,OAAlB,CAA0B2jC,KAA1B,CAAgC//B,IAAhC,WAA0C4rD,WAAW,CAACxxD,CAAZ,CAAgBy6D,UAA1D,OACA,KAAKJ,YAAL,CAAkBr4D,OAAlB,CAA0B2jC,KAA1B,CAAgC7/B,GAAhC,WAAyC0rD,WAAW,CAACtxD,CAAZ,CAAgBs6D,SAAzD,OACD,CACF,C,6DAEmB,IACVxW,QADU,CACE,KAAKv9C,KADP,CACVu9C,OADU,CAGlBA,OAAO,CAAC0W,iBAAR,CAA0B,KAAKJ,cAA/B,EACD,C,mEAEsB,IACbtW,QADa,CACD,KAAKv9C,KADJ,CACbu9C,OADa,CAGrBA,OAAO,CAAC2W,qBAAR,CAA8B,KAAKL,cAAnC,EACD,C,uCAEQ,IACCxqD,SADD,CACc,KAAKrJ,KADnB,CACCqJ,QADD,CAGP;;;;;UAOA,MAAO,wBAAC,+BAAD,EAAW,GAAG,CAAE,KAAKuqD,YAArB,EAAoCvqD,QAApC,CAAP,CACD,C,mCAxDiCxI,kB,EA2DrB8yD,wGAAf,E;;2yCC3DA,GAAMQ,WAAU,CAAG11D,wDAAM,CAACwyD,aAAD,CAAT,4CAAhB,CAIA,GAAMmD,kBAAiB,CAAG31D,wDAAM,CAACkyD,OAAD,CAAT,6CAGnB,SAAC3wD,KAAD,QACAyL,OAAM,CAACC,IAAP,CAAY1L,KAAK,CAAC4B,QAAlB,EAA4B+J,MAA5B,CAAmC,SAACuzB,KAAD,CAAQ7yB,GAAR,CAAgB,CACjD,MAAO6yB,MAAK,CAAG,IAAR,CAAe7yB,GAAf,CAAqB,GAArB,CAA2BrM,KAAK,CAAC4B,QAAN,CAAeyK,GAAf,CAA3B,CAAiD,KAAxD,CACD,CAFD,CAEG,EAFH,CADA,EAHmB,CAOZ,SAACrM,KAAD,QAAYA,MAAK,CAAC0K,IAAN,CAAa,OAAb,CAAuB,OAAnC,EAPY,CAAvB,CAYO,GAAM2pD,MAAK,CAAG51D,wDAAM,CAAC2yD,YAAD,CAAT,6CAAX,CAOA,GAAMkD,OAAM,CAAG71D,gDAAM,CAACkxD,IAAV,6CAAZ,CAIP,GAAM4E,UAAS,CAAG91D,gDAAM,CAACkxD,IAAV,6CACJlrB,sBAAM,CAAC8oB,SADH,CAAf,C,GAIMiH,oD,6eACK,iBAC8C,KAAKx0D,KADnD,CACC0K,IADD,aACCA,IADD,CACOmG,MADP,aACOA,MADP,CACe0sC,OADf,aACeA,OADf,CACwBx/C,MADxB,aACwBA,MADxB,CACgC+nB,SADhC,aACgCA,SADhC,CAGP,MACE,+CACE,uBAAC,UAAD,iBAAqB/nB,MAAM,CAACyL,IAA5B,CADF,CAEE,uBAAC,KAAD,MACE,uBAAC,MAAD,0BADF,CAEE,uBAAC,SAAD,MAAYsc,SAAS,CAAC2uC,SAAtB,KAFF,CAFF,CAME,uBAAC,KAAD,MACE,uBAAC,MAAD,uBADF,CAEE,uBAAC,SAAD,UAAa3uC,SAAS,CAAC4uC,WAAvB,WAFF,CANF,CAUE,uBAAC,KAAD,MACE,uBAAC,MAAD,mBADF,CAEE,uBAAC,SAAD,MACG5uC,SAAS,CAAC5sB,QADb,WAC8B,GAD9B,CAEG4sB,SAAS,CAAC6uC,UAAV,0BAEMj7D,IAAI,CAAC6D,KAAL,CAAWuoB,SAAS,CAACL,aAArB,CAFN,WAFH,CAFF,CAVF,CAmBE,uBAAC,KAAD,MACE,uBAAC,MAAD,kBADF,CAEE,uBAAC,SAAD,iBAAgBK,SAAS,CAACzY,OAAV,CAAoB,EAApC,6BAA0D3T,IAAI,CAAC6D,KAAL,CACxDuoB,SAAS,CAAC8uC,cAD8C,CAA1D,MAFF,CAnBF,CAyBE,uBAAC,KAAD,MACE,uBAAC,MAAD,cADF,CAEE,uBAAC,SAAD,UAAa9uC,SAAS,CAAC41B,GAAV,CAAgB,CAA7B,WAFF,CAzBF,CA6BE,uBAAC,KAAD,MACE,uBAAC,MAAD,cADF,CAEE,uBAAC,SAAD,UAAa51B,SAAS,CAAC4H,GAAV,CAAgB,CAA7B,WAFF,CA7BF,CAiCE,uBAAC,KAAD,MACE,uBAAC,MAAD,uBADF,CAEE,uBAAC,SAAD,gBAAe5H,SAAS,CAAC+uC,iBAAzB,YAFF,CAjCF,CAqCG/uC,SAAS,CAACgvC,aAAV,GAA4B,CAA5B,EACC,uBAAC,KAAD,MACE,uBAAC,MAAD,4BADF,CAEE,uBAAC,SAAD,gBAAehvC,SAAS,CAACgvC,aAAzB,YAFF,CAtCJ,CA4CE,uBAAC,KAAD,MACE,uBAAC,MAAD,2BADF,CAEE,uBAAC,SAAD,MAAYhvC,SAAS,CAACrf,MAAtB,KAFF,CA5CF,CADF,CAmDD,C,uCAvDqC5F,kB,EA0DzB2zD,wHAAf,E;;4MCvFA,GAAMO,sBAAqB,CAAGt2D,wDAAM,CAAC+zD,+BAAD,CAAT,+BAA3B,C,GAIMwC,0B,4aACK,iBACwD,KAAKh1D,KAD7D,CACClB,OADD,aACCA,OADD,CACU+oB,KADV,aACUA,KADV,CACiBotC,iBADjB,aACiBA,iBADjB,CACoCC,eADpC,aACoCA,eADpC,CAGP,MACE,+BAAC,qBAAD,EACE,QAAQ,CAAE,CAACA,eADb,CAEE,KAAK,CAAEA,eAAe,GAAK,OAF7B,CAGE,OAAO,CAAEp2D,OAHX,EAKE,8BAAC,aAAD,MAAgB+oB,KAAK,CAACstC,cAAN,EAAhB,CALF,CAMGttC,KAAK,CAACutC,YAAN,GAAqB5wD,GAArB,CAAyB6wD,qBAAzB,CANH,CAOGJ,iBAPH,CADF,CAWD,C,0BAfwBp0D,eAAK,CAACy0D,S,EAkBjC,GAAMD,sBAAQ,CAAG,QAAXA,SAAW,MAAoB56D,CAApB,CAA0B,IAAvB0kB,OAAuB,MAAvBA,MAAuB,CAAfzS,KAAe,MAAfA,KAAe,CACzC,GAAIA,KAAK,CAAC0lD,OAAV,CAAmB,CACjB1lD,KAAK,CAAGA,KAAK,CAAC0lD,OAAN,CAAc,QAAd,CAAwB,IAAxB,CAAR,CACD,CAED,MACE,+BAAC,YAAD,EAAc,GAAG,6BAAuBjzC,MAAvB,aAAiC1kB,CAAjC,CAAjB,EACG0kB,MAAM,EAAI,8BAAC,kBAAD,MAAqBA,MAArB,MADb,CAEGzS,KAAK,EAAI,8BAAC,YAAD,MAAeA,KAAf,CAFZ,CADF,CAMD,CAXD,CAaesoD,gFAAf,E;;gPCzCA,GAAMnG,oBAAS,CAAGpwD,gDAAM,CAACC,GAAV,4BAIX,SAAAsB,KAAK,QAAIA,MAAK,CAACu1D,OAAN,EAAiB,kBAArB,EAJM,CAAf,C,GAOMC,oB,yGACJ,mBAAYx1D,KAAZ,CAAmB,qEACjB,+HAAMA,KAAN,GAEA,MAAKlB,OAAL,CAAe+B,eAAK,CAAC40D,SAAN,EAAf,CACA,MAAKlhC,KAAL,CAAa,CACXmhC,gBAAgB,CAAE,IADP,CAAb,CAJiB,aAOlB,C,0GAEgB72D,K,CAAO,2BACiB,KAAKmB,KADtB,CACd21D,eADc,CACdA,eADc,gCACI,UAAM,CAAE,CADZ,uBAEtB92D,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GACA,KAAKy1D,QAAL,CAAc,CAAEF,gBAAgB,CAAE,KAAK52D,OAAzB,CAAd,EACA62D,eAAe,GAChB,C,wDAEe92D,K,CAAO,4BACiB,KAAKmB,KADtB,CACb61D,cADa,CACbA,cADa,iCACI,UAAM,CAAE,CADZ,wBAErBh3D,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GACA,KAAKy1D,QAAL,CAAc,CAAEF,gBAAgB,CAAE,IAApB,CAAd,EACAG,cAAc,GACf,C,uCAEQ,iCASH,KAAK71D,KATF,CAEL6nB,KAFK,aAELA,KAFK,CAGLrgB,MAHK,aAGLA,MAHK,mCAILsuD,aAJK,CAILA,aAJK,gCAIW,UAAM,CAAE,CAJnB,uBAKLC,wBALK,aAKLA,wBALK,CAMLxzB,IANK,aAMLA,IANK,CAOL2yB,eAPK,aAOLA,eAPK,CAQF5E,IARE,2JAUCoF,iBAVD,CAUsB,KAAKnhC,KAV3B,CAUCmhC,gBAVD,CAYP,MACE,6DACGR,eAAe,EAAIQ,gBAAnB,EACC,8BAAC,kBAAD,EACE,eAAe,CAAER,eADnB,CAEE,OAAO,CAAEQ,gBAFX,CAGE,KAAK,CAAE7tC,KAHT,CAIE,iBAAiB,CAAEkuC,wBAJrB,EAFJ,CASE,8BAAC,mBAAD,gBACE,OAAO,CAAED,aADX,CAEE,WAAW,CAAE,KAAKE,gBAAL,CAAsB30D,IAAtB,CAA2B,IAA3B,CAFf,CAGE,UAAU,CAAE,KAAK40D,eAAL,CAAqB50D,IAArB,CAA0B,IAA1B,CAHd,EAIMivD,IAJN,EAMG,CAAC4E,eAAD,EAAoBQ,gBAApB,EACC,8BAAC,kBAAD,EACE,eAAe,CAAER,eADnB,CAEE,OAAO,CAAEQ,gBAFX,CAGE,KAAK,CAAE7tC,KAHT,CAIE,iBAAiB,CAAEkuC,wBAJrB,EAPJ,CAcE,8BAAC,mBAAD,EACE,GAAG,CAAE,aAAA76D,CAAC,QAAK,OAAI,CAAC4D,OAAL,CAAe5D,CAApB,EADR,CAEE,UAAU,CAAE2sB,KAAK,CAACquC,kBAAN,EAFd,EAIG3zB,IAAI,CAAGA,IAAH,CAAU/6B,MAJjB,CAdF,CATF,CADF,CAiCD,C,uBAvEqB3G,eAAK,CAACy0D,S,EA0EfE,uEAAf,E;;2NCjFA,GAAMW,mBAAkB,CAAG13D,gDAAM,CAACC,GAAV,4BAAxB,C,GAKM03D,oB,kbACcv3D,K,CAAO,CACvBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFuB,gBAIS,KAAKH,KAJd,CAIjBu9C,OAJiB,aAIjBA,OAJiB,CAIR1sC,MAJQ,aAIRA,MAJQ,CAIAnG,IAJA,aAIAA,IAJA,CAMvB6yC,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,CAAuC,CACrC3rD,IAAI,CAAJA,IADqC,CAErCmG,MAAM,CAANA,MAFqC,CAGrC/R,OAAO,CAAE,KAAKA,OAHuB,CAAvC,EAMA,KAAK82D,QAAL,CAAc,CAAEU,iBAAiB,CAAE,KAAKx3D,OAA1B,CAAd,EACD,C,0DAEgBD,K,CAAO,CACtBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFsB,GAIhBo9C,QAJgB,CAIJ,KAAKv9C,KAJD,CAIhBu9C,OAJgB,CAMtBA,OAAO,CAAC8Y,WAAR,CAAoB,gBAApB,EAEA,KAAKT,QAAL,CAAc,CAAEU,iBAAiB,CAAE,IAArB,CAAd,EACD,C,uCAEQ,IACCxuC,KADD,CACU,KAAK9nB,KADf,CACC8nB,IADD,CAGP,MACE,6DACE,8BAAC,gBAAD,sBADF,CAEE,8BAAC,kBAAD,MACGA,IAAI,CAACtjB,GAAL,CAAS,cAAqB/J,CAArB,KAAG8O,OAAH,MAAGA,MAAH,CAAW/B,MAAX,MAAWA,MAAX,OACR,+BAAC,eAAD,EAAW,GAAG,sBAAgB/M,CAAhB,CAAd,CAAmC,KAAK,CAAE8O,MAA1C,CAAkD,MAAM,CAAE/B,MAA1D,EADQ,EAAT,CADH,CAFF,CADF,CAUD,C,uBAxCqB3G,eAAK,CAACy0D,S,EA2Cfc,uEAAf,E;;kcCtCA,GAAMG,YAAW,CAAG93D,gDAAM,CAACC,GAAV,kCAAjB,CAKA,GAAM83D,iBAAgB,CAAG/3D,wDAAM,CAAC+2D,eAAD,CAAT,mCAClB7G,mBADkB,CAEhB,SAAA3uD,KAAK,CAAI,IACDjC,OADC,CACUiC,KADV,CACDjC,MADC,CAGT,GAAIA,MAAJ,CAAY,CACV,MAAO,sDAAP,CACD,CACF,CARiB,CAAtB,C,GAYM04D,gC,geACkB/rD,I,CAAMmG,M,CAAQ,CAClC,GACEnG,IAAI,CAACyB,EAAL,GAAY,KAAKnM,KAAL,CAAW0K,IAAX,CAAgByB,EAA5B,EACA0E,MAAM,CAAC1E,EAAP,GAAc,KAAKnM,KAAL,CAAW02D,QAAX,CAAoB7lD,MAApB,CAA2B1E,EAF3C,CAGE,CACA,KAAKwqD,WAAL,GACD,CACF,C,6DAEmB,IACVpZ,QADU,CACE,KAAKv9C,KADP,CACVu9C,OADU,CAElB,KAAKqZ,6BAAL,CAAqC,KAAKC,qBAAL,CAA2Bx1D,IAA3B,CAAgC,IAAhC,CAArC,CACAk8C,OAAO,CAACuZ,uBAAR,CAAgC,KAAKF,6BAArC,EACD,C,mEAEsB,IACbrZ,QADa,CACD,KAAKv9C,KADJ,CACbu9C,OADa,CAErBA,OAAO,CAACwZ,2BAAR,CAAoC,KAAKH,6BAAzC,EACD,C,+CAEY,gBACX,MAAO,UAAA10D,CAAC,CAAI,CACVA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAFU,gBAGyC,KAAI,CAACF,KAH9C,CAGF0K,IAHE,aAGFA,IAHE,CAGIgsD,QAHJ,aAGIA,QAHJ,CAGcnZ,OAHd,aAGcA,OAHd,CAGuByZ,aAHvB,aAGuBA,aAHvB,CAKVN,QAAQ,CAACO,UAAT,CAAoB,CAAED,aAAa,CAAbA,aAAF,CAApB,EACAzZ,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCgsD,QAAQ,CAAC7lD,MAA9C,EACD,CAPD,CAQD,C,gDAEWsmD,O,CAAS,iBACnB,MAAO,UAAAj1D,CAAC,CAAI,CACVA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAFU,iBAGyC,MAAI,CAACF,KAH9C,CAGF0K,IAHE,cAGFA,IAHE,CAGIgsD,QAHJ,cAGIA,QAHJ,CAGcnZ,OAHd,cAGcA,OAHd,CAGuByZ,aAHvB,cAGuBA,aAHvB,CAKVN,QAAQ,CAACU,QAAT,CAAkB,CAAE30C,IAAI,CAAE00C,OAAR,CAAiBH,aAAa,CAAbA,aAAjB,CAAlB,EACAzZ,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCgsD,QAAQ,CAAC7lD,MAA9C,EACD,CAPD,CAQD,C,wDAEenG,I,CAAMysD,O,CAAS,iBAC7B,MAAO,WAAM,IACH5Z,QADG,CACS,MAAI,CAACv9C,KADd,CACHu9C,OADG,CAGXA,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,CAAuC,CACrC3rD,IAAI,CAAJA,IADqC,CAErCysD,OAAO,CAAPA,OAFqC,CAAvC,EAID,CAPD,CAQD,C,0DAEgBzsD,I,CAAMysD,O,CAAS,iBAC9B,MAAO,WAAM,IACH5Z,QADG,CACS,MAAI,CAACv9C,KADd,CACHu9C,OADG,CAGXA,OAAO,CAAC8Y,WAAR,CAAoB,kBAApB,CAAwC,CACtC3rD,IAAI,CAAJA,IADsC,CAEtCysD,OAAO,CAAPA,OAFsC,CAGtCp5D,MAAM,CAAE,MAAI,CAACs5D,sBAAL,EAH8B,CAAxC,EAKD,CARD,CASD,C,uEAEwB,kBACsB,KAAKr3D,KAD3B,CACfs3D,aADe,cACfA,aADe,CACAZ,QADA,cACAA,QADA,CACUnZ,OADV,cACUA,OADV,CAGvB,GAAI,CAAC+Z,aAAL,CAAoB,CAClB,MAAO,KAAP,CACD,CAED,GAAM5jC,SAAQ,CAAGgjC,QAAQ,CAACa,YAA1B,CAEA,GAAI,CAAC7jC,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAXsB,GAaflH,SAbe,CAaF+wB,OAbE,CAaf/wB,QAbe,CAevB,MAAOA,SAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2Bn4B,QAA3B,CAAP,CACD,C,uCAEQ,kCAOH,KAAK1zB,KAPF,CAELg3D,aAFK,cAELA,aAFK,CAGLM,aAHK,cAGLA,aAHK,CAILE,WAJK,cAILA,WAJK,CAKLC,WALK,cAKLA,WALK,CAMLf,QANK,cAMLA,QANK,CASP,MACE,6DACE,8BAAC,aAAD,sBAA6BM,aAA7B,CADF,CAEE,8BAAC,kBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,kBAAD,kBADF,CAEE,8BAAC,YAAD,gBAAkBS,WAAlB,aAAiCD,WAAjC,EAFF,CADF,CAME,8BAAC,kBAAD,MACE,8BAAC,kBAAD,wBADF,CAEE,8BAAC,gBAAD,EACE,KAAK,CAAEF,aAAa,CAAGA,aAAH,CAAmB,GAAIhwC,8BAAJ,EADzC,CAEE,MAAM,CAAE,IAFV,CAGE,MAAM,CAAE,KAAK+vC,sBAAL,EAHV,CAIE,eAAe,CAAE,KAAKK,gBAAL,CACfhB,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADb,CAEf4sD,aAFe,EAGfj2D,IAHe,CAGV,IAHU,CAJnB,CAQE,cAAc,CAAE,KAAKs2D,eAAL,CACdjB,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADd,CAEd4sD,aAFc,EAGdj2D,IAHc,CAGT,IAHS,CARlB,EAFF,CANF,CAFF,CA0BE,8BAAC,YAAD,MACE,8BAAC,kBAAD,iCADF,CA1BF,CA8BE,8BAAC,WAAD,MACGq1D,QAAQ,CAACkB,yBAAT,GAAqCpzD,GAArC,CAAyC,cAAqB/J,CAArB,KAAG8O,OAAH,MAAGA,MAAH,CAAW/B,MAAX,MAAWA,MAAX,OACxC,+BAAC,eAAD,EACE,aAAa,CAAE,MAAI,CAACqwD,WAAL,CAAiBtuD,MAAjB,EAAyBlI,IAAzB,CAA8B,MAA9B,CADjB,CAEE,GAAG,2BAAqB5G,CAArB,8BAA2C8O,MAAM,CAACsO,WAAP,CAAmBrO,IAA9D,CAFL,CAGE,KAAK,CAAED,MAHT,CAIE,MAAM,CAAE/B,MAJV,CAKE,eAAe,CAAE,MAAI,CAACkwD,gBAAL,CACfhB,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADb,CAEfnB,MAFe,EAGflI,IAHe,CAGV,MAHU,CALnB,CASE,cAAc,CAAE,MAAI,CAACs2D,eAAL,CACdjB,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADd,CAEdnB,MAFc,EAGdlI,IAHc,CAGT,MAHS,CATlB,EADwC,EAAzC,CADH,CAiBGi2D,aAAa,EACZ,8BAAC,eAAD,EACE,aAAa,CAAE,KAAKL,UAAL,GAAkB51D,IAAlB,CAAuB,IAAvB,CADjB,CAEE,GAAG,yBAFL,CAGE,KAAK,CAAE,GAAIimB,8BAAJ,EAHT,CAIE,MAAM,CAAE,IAJV,EAlBJ,CA9BF,CADF,CA2DD,C,6BAxJ2BzmB,eAAK,CAAC2tD,a,EA2JrBiI,2FAAf,E;;w2BC1KA,GAAMqB,YAAW,CAAGr5D,gDAAM,CAACC,GAAV,uBAAjB,CAMA,GAAMq5D,mBAAkB,CAAGt5D,gDAAM,CAACC,GAAV,wBAAxB,CAKA,GAAMs5D,qBAAoB,CAAGv5D,wDAAM,CAACgzD,kBAAD,CAAT,wBAA1B,CAIA,GAAMwG,cAAa,CAAGx5D,wDAAM,CAACqzD,aAAD,CAAT,wBAAnB,C,GAKMhrC,e,oGACJ,cAAY9mB,KAAZ,CAAmB,gEACjB,0HAAMA,KAAN,GAEA,MAAKu0B,KAAL,CAAa,CAAE2jC,WAAW,CAAE,KAAf,CAAb,CAHiB,aAIlB,C,+GAEqBxtD,I,CAAMmG,M,CAAQ,CAClC,GACEnG,IAAI,CAACyB,EAAL,GAAY,KAAKnM,KAAL,CAAW0K,IAAX,CAAgByB,EAA5B,EACA0E,MAAM,CAAC1E,EAAP,GAAc,KAAKnM,KAAL,CAAWm4D,YAAX,CAAwBtnD,MAAxB,CAA+B1E,EAF/C,CAGE,CACA,KAAKwqD,WAAL,GACD,CACF,C,6DAEmB,IACVpZ,QADU,CACE,KAAKv9C,KADP,CACVu9C,OADU,CAElB,KAAKqZ,6BAAL,CAAqC,KAAKC,qBAAL,CAA2Bx1D,IAA3B,CAAgC,IAAhC,CAArC,CACAk8C,OAAO,CAACuZ,uBAAR,CAAgC,KAAKF,6BAArC,EACD,C,mEAEsB,IACbrZ,QADa,CACD,KAAKv9C,KADJ,CACbu9C,OADa,CAErBA,OAAO,CAACwZ,2BAAR,CAAoC,KAAKH,6BAAzC,EACD,C,mEAEsB,iCACmB,KAAK52D,KADxB,CACbm4D,YADa,aACbA,YADa,CACC5a,OADD,aACCA,OADD,CACU7yC,IADV,aACUA,IADV,CAGrB,GAAM0tD,cAAa,CAAGD,YAAY,CAACE,gBAAb,EAAtB,CACAF,YAAY,CAACG,iBAAb,CACGhsD,MADH,CAEI,SAAAoL,SAAS,QACP,CAAC0gD,aAAa,CAACp/C,IAAd,CAAmB,SAAA5M,KAAK,QAAIA,MAAK,CAAC7C,MAAN,WAAwBmO,UAA5B,EAAxB,CADM,EAFb,EAKG9T,OALH,CAKW,SAAA20D,QAAQ,CAAI,CACnBH,aAAa,CAACt0D,IAAd,CAAmB,CACjByF,MAAM,CAAE,GAAIgvD,SAAJ,EADS,CAEjB/wD,MAAM,CAAE,CAFS,CAAnB,EAID,CAVH,EAYA4wD,aAAa,CAAClmD,IAAd,CAAmB,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CAC3B,GAAID,CAAC,CAACuO,MAAF,CAASsO,WAAT,CAAqBrO,IAArB,CAA4BvO,CAAC,CAACsO,MAAF,CAASsO,WAAT,CAAqBrO,IAArD,CAA2D,CACzD,MAAO,EAAP,CACD,CAED,GAAIxO,CAAC,CAACuO,MAAF,CAASsO,WAAT,CAAqBrO,IAArB,CAA4BvO,CAAC,CAACsO,MAAF,CAASsO,WAAT,CAAqBrO,IAArD,CAA2D,CACzD,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAVD,EAYA,MACE,+BAAC,WAAD,MACG4uD,aAAa,CAAC5zD,GAAd,CAAkB,cAAqB/J,CAArB,KAAG8O,OAAH,MAAGA,MAAH,CAAW/B,MAAX,MAAWA,MAAX,OACjB,+BAAC,kBAAD,EAAoB,GAAG,uBAAiB/M,CAAjB,CAAvB,EACE,8BAAC,aAAD,EACE,GAAG,CAAC,gBADN,CAEE,OAAO,CAAE,iBAAAyH,CAAC,CAAI,CACZA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEAi4D,YAAY,CAACK,YAAb,CAA0B,CAAEjvD,MAAM,CAANA,MAAF,CAAU/B,MAAM,CAAE,CAAC,CAAnB,CAA1B,EACA,MAAI,CAACmvD,WAAL,GACD,CARH,EADF,CAWE,8BAAC,eAAD,EACE,GAAG,2BAAqBl8D,CAArB,8BAA2C8O,MAAM,CAACsO,WAAP,CAAmBrO,IAA9D,CADL,CAEE,KAAK,CAAED,MAFT,CAGE,MAAM,CAAE/B,MAHV,EAXF,CAgBE,8BAAC,aAAD,EACE,GAAG,CAAC,eADN,CAEE,OAAO,CAAE,iBAAAtF,CAAC,CAAI,CACZA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEAi4D,YAAY,CAACK,YAAb,CAA0B,CAAEjvD,MAAM,CAANA,MAAF,CAAU/B,MAAM,CAAE,CAAlB,CAA1B,EACA,MAAI,CAACmvD,WAAL,GACD,CARH,EAhBF,CADiB,EAAlB,CADH,CADF,CAiCD,C,uCAEQ,kCACiC,KAAK32D,KADtC,CACCm4D,YADD,cACCA,YADD,CACe5a,OADf,cACeA,OADf,CACwB7yC,IADxB,cACwBA,IADxB,IAECwtD,YAFD,CAEiB,KAAK3jC,KAFtB,CAEC2jC,WAFD,CAIP,GAAI,CAACxtD,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoB3E,OAAO,CAACyB,QAAR,CAAiBrF,WAArC,CAAL,CAAwD,CACtD,MAAO,KAAP,CACD,CAED,MACE,6DACG,CAACue,WAAD,EACC,4DACE,8BAAC,aAAD,sBADF,CAEE,8BAAC,YAAD,MACE,8BAAC,kBAAD,4BADF,CAEE,8BAAC,YAAD,MAAeC,YAAY,CAACM,gBAA5B,CAFF,CAFF,CAME,8BAAC,oBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,kBAAD,uBADF,CAEE,8BAAC,YAAD,MACGN,YAAY,CAACO,eAAb,GAA+BC,mBAA/B,EADH,CAFF,CADF,CANF,CAcE,8BAAC,oBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,kBAAD,2BADF,CADF,CAKGR,YAAY,CAACS,iBAAb,GAAiCp0D,GAAjC,CAAqC,eAAqB/J,CAArB,KAAG8O,OAAH,OAAGA,MAAH,CAAW/B,MAAX,OAAWA,MAAX,OACpC,+BAAC,eAAD,EACE,GAAG,2BAAqB/M,CAArB,8BAA2C8O,MAAM,CAACsO,WAAP,CAAmBrO,IAA9D,CADL,CAEE,KAAK,CAAED,MAFT,CAGE,MAAM,CAAE/B,MAHV,EADoC,EAArC,CALH,CAdF,CA4BE,8BAAC,YAAD,MACE,8BAAC,YAAD,6CADF,CA5BF,CAgCE,8BAAC,oBAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,iBAAAtF,CAAC,CAAI,CACZA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACA,MAAI,CAAC01D,QAAL,CAAc,CAAEsC,WAAW,CAAE,IAAf,CAAd,EACD,CANH,EAQE,8BAAC,kBAAD,+BARF,CAhCF,CAFJ,CA+CGA,WAAW,EACV,4DACE,8BAAC,aAAD,oBADF,CAEE,8BAAC,YAAD,MACE,8BAAC,YAAD,6CADF,CAFF,CAKE,8BAAC,YAAD,MACE,8BAAC,kBAAD,iCADF,CAEE,8BAAC,YAAD,MACGC,YAAY,CAACU,iBADhB,YAFF,CALF,CAWE,8BAAC,YAAD,MACE,8BAAC,kBAAD,uBADF,CAEE,8BAAC,YAAD,MAAeV,YAAY,CAACW,YAA5B,YAFF,CAXF,CAeE,8BAAC,YAAD,MACE,8BAAC,kBAAD,gCADF,CAEE,8BAAC,YAAD,MAAeX,YAAY,CAACY,YAA5B,CAFF,CAfF,CAmBE,8BAAC,YAAD,MACE,8BAAC,kBAAD,2BADF,CAEE,8BAAC,YAAD,gBACMZ,YAAY,CAACa,sBAAb,EADN,aAEIb,YAAY,CAACrmD,QAFjB,EAFF,CAnBF,CA4BG,KAAKmnD,oBAAL,EA5BH,CA6BE,8BAAC,oBAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,iBAAA/2D,CAAC,CAAI,CACZA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACA,MAAI,CAAC01D,QAAL,CAAc,CAAEsC,WAAW,CAAE,KAAf,CAAd,EACD,CANH,EAQE,8BAAC,kBAAD,cARF,CA7BF,CAuCE,8BAAC,oBAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,iBAAAh2D,CAAC,CAAI,CACZA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEAwK,IAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAGI,SAAAuE,MAAM,QACJA,OAAM,CAACgH,WAAP,GAAuBsgD,YAAY,CAACtnD,MAAb,CAAoBgH,WADvC,EAHV,EAMGjU,OANH,CAMW,SAAAiN,MAAM,QACbA,OAAM,CAACC,WAAP,CACE,qBADF,CAEEqnD,YAAY,CAACE,gBAAb,EAFF,CADa,EANjB,EAYA,MAAI,CAACzC,QAAL,CAAc,CAAEsC,WAAW,CAAE,KAAf,CAAd,EACD,CAnBH,EAqBE,8BAAC,kBAAD,6BArBF,CAvCF,CAhDJ,CADF,CAmHD,C,kBArNgBr3D,eAAK,CAACy0D,S,EAwNVxuC,4DAAf,E;;ohCC3OA,GAAMoyC,eAAc,CAAGz6D,gDAAM,CAACC,GAAV,+BAApB,CAQA,GAAMy6D,sBAAqB,CAAG16D,gDAAM,CAACC,GAAV,gCAA3B,CAOA,GAAM06D,UAAS,CAAG36D,gDAAM,CAACC,GAAV,gCAIW,SAAAsB,KAAK,kBAAOA,KAAK,CAACyH,MAAb,OAJhB,CAAf,C,GAeM4xD,0B,qZACJ;;;;;;;;;;;;;;;;;;;;;;;;;yBA0BS,IACCC,cADD,CACmB,KAAKt5D,KADxB,CACCs5D,aADD,CAGP,GAAM9pD,KAAI,CAAG+pD,WAAW,CAACD,aAAD,CAAX,CAA6B,GAA1C,CACA,GAAMn1D,MAAK,CAAG,EAAd,CACA,IAAK,GAAI1J,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,GAApB,CAAyBA,CAAC,EAA1B,CAA8B,CAC5B,GAAMsqB,aAAY,CAAGu0C,aAAa,CAACE,gBAAd,CAA+B,CAClDtgE,QAAQ,CAAEuB,CAAC,CAAG+U,IADoC,CAA/B,CAArB,CAIArL,KAAK,CAACL,IAAN,CAAW,CACT21D,KAAK,CAAEh/D,CADE,CAETsqB,YAAY,CAAZA,YAFS,CAGTtd,MAAM,CAAE/N,IAAI,CAACwE,GAAL,CAAS6mB,YAAY,CAAG,GAAxB,EAA+B,GAH9B,CAAX,EAKD,CAED,MACE,6DACE,8BAAC,YAAD,MACE,8BAAC,kBAAD,uBADF,CADF,CAIE,8BAAC,cAAD,MACG5gB,KAAK,CAACK,GAAN,CAAU,SAAC4H,KAAD,CAAQ3R,CAAR,QACT,+BAAC,SAAD,EAAW,GAAG,qBAAeA,CAAf,CAAd,CAAkC,MAAM,CAAE2R,KAAK,CAAC3E,MAAhD,EADS,EAAV,CADH,CAJF,CASE,8BAAC,qBAAD,MACE,8BAAC,YAAD,UADF,CAEE,8BAAC,YAAD,iBAFF,CAGE,8BAAC,YAAD,MAAe8xD,WAAW,CAACD,aAAD,CAA1B,CAHF,CATF,CADF,CAiBD,C,0BA7DwBz4D,eAAK,CAACy0D,S,EAgEjC,GAAMiE,YAAW,CAAG,QAAdA,YAAc,CAAAD,aAAa,CAAI,CACnC,GAAMI,OAAM,CAAGJ,aAAa,CAACK,kBAA7B,CACA,MAAOD,OAAM,CAACA,MAAM,CAAC/+D,MAAP,CAAgB,CAAjB,CAAN,CAA0B8+D,KAAjC,CACD,CAHD,CAKeJ,gFAAf,E;;0yCCxGA,GAAMxK,cAAS,CAAGpwD,gDAAM,CAACC,GAAV,sBAAf,CAKA,GAAMk7D,aAAY,CAAGn7D,gDAAM,CAACC,GAAV,uBAEMgvD,yBAFN,CAAlB,CAQA,GAAMmM,IAAG,CAAGp7D,gDAAM,CAACC,GAAV,uBAGE,kBAAGqkD,QAAH,MAAGA,OAAH,sBAAyBA,OAAO,CAAG,GAAnC,eAHF,CAIa,mBAAGhrB,MAAH,OAAGA,KAAH,OAAeA,MAAf,EAJb,CAAT,CAYA,GAAM+hC,UAAS,CAAGr7D,wDAAM,CAACo7D,GAAD,CAAT,uBACO,mBAAGE,KAAH,OAAGA,IAAH,CAASC,gBAAT,OAASA,gBAAT,CAA2BC,gBAA3B,OAA2BA,gBAA3B,OAClBF,KAAI,CAAGE,gBAAH,CAAsBD,gBADR,EADP,CAGF,mBAAGD,KAAH,OAAGA,IAAH,OAAeA,KAAI,CAAG,CAAH,CAAO,CAA1B,EAHE,CAIX,mBAAGA,KAAH,OAAGA,IAAH,CAASG,UAAT,OAASA,UAAT,CAAqBnX,OAArB,OAAqBA,OAArB,OACA,CAACgX,IAAD,uBACc,CAACG,UAAU,CAAGnX,OAAd,EAAyB,GADvC,gCAEEA,OAAO,CAAG,GAFZ,aADA,EAJW,CAAf,CAWA,GAAMoX,WAAU,CAAG17D,wDAAM,CAACo7D,GAAD,CAAT,uBAAhB,CAQA,GAAMO,YAAO,CAAG,QAAVA,QAAU,OAOV,IANJrX,QAMI,OANJA,OAMI,CALJsX,UAKI,OALJA,UAKI,qBAJJC,OAII,CAJJA,OAII,wBAJM,IAIN,oCAHJC,QAGI,CAHJA,QAGI,yBAHOzM,iBAGP,4CAFJkM,gBAEI,CAFJA,gBAEI,gCAFe1gD,SAEf,mDADJ2gD,gBACI,CADJA,gBACI,gCADezM,GACf,uBACJ,GAAIzK,OAAO,CAAG,CAAd,CAAiB,CACfA,OAAO,CAAG,CAAV,CACD,CAED,GAAIsX,UAAU,CAAG,CAAjB,CAAoB,CAClBA,UAAU,CAAG,CAAb,CACD,CAED,GAAIA,UAAU,CAAG,CAAjB,CAAoB,CAClBA,UAAU,CAAG,CAAb,CACD,CAED,MACE,+BAAC,aAAD,MACE,8BAAC,YAAD,MACE,8BAAC,GAAD,EAAK,OAAO,CAAEtX,OAAd,CAAuB,KAAK,CAAEwX,QAA9B,EADF,CAEGF,UAAU,GAAK7gE,SAAf,EACC,8BAAC,SAAD,EACE,OAAO,CAAE6gE,UADX,CAEE,UAAU,CAAEtX,OAFd,CAGE,IAAI,CAAEsX,UAAU,CAAGtX,OAHrB,CAIE,gBAAgB,CAAEiX,gBAJpB,CAKE,gBAAgB,CAAEC,gBALpB,EAHJ,CAWGxgD,OAAO,CAAC6gD,OAAD,CAAP,EAAoB,8BAAC,UAAD,EAAY,OAAO,CAAEA,OAArB,EAXvB,CADF,CADF,CAiBD,CArCD,CAuCA,GAAME,YAAO,CAAG,QAAVA,QAAU,CAACx6D,KAAD,CAAW,CACzB,MACE,+BAAC,WAAD,kBACMA,KADN,EAEE,QAAQ,CAAEkR,WAFZ,CAGE,gBAAgB,CAAEoI,SAHpB,CAIE,gBAAgB,CAAEk0C,GAJpB,GADF,CAQD,CATD,C;;8ZClFA,GAAMqB,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,gCACX0yD,YADW,CAAf,CAMA,GAAMqJ,iBAAgB,CAAGh8D,gDAAM,CAACC,GAAV,iCAAtB,CAEA,GAAMg8D,4BAAa,CAAG,QAAhBA,cAAgB,MAAwD,IAArDhjD,UAAqD,MAArDA,SAAqD,CAA1C7G,MAA0C,MAA1CA,MAA0C,CAAlCoO,eAAkC,MAAlCA,eAAkC,CAAjBC,UAAiB,MAAjBA,UAAiB,eAC9Cy7C,yBAAQ,CAAC,KAAD,CADsC,kEACrEC,OADqE,eAC5DC,UAD4D,kBAI1EzgD,SAJ0E,CAWxE8E,UAXwE,CAI1E9E,QAJ0E,CAK1E9H,kBAL0E,CAWxE4M,UAXwE,CAK1E5M,kBAL0E,CAM1E6I,OAN0E,CAWxE+D,UAXwE,CAM1E/D,OAN0E,CAO1EC,iBAP0E,CAWxE8D,UAXwE,CAO1E9D,iBAP0E,CAQ1EF,OAR0E,CAWxEgE,UAXwE,CAQ1EhE,OAR0E,CAS1EG,gCAT0E,CAWxE6D,UAXwE,CAS1E7D,gCAT0E,CAU1ES,UAV0E,CAWxEoD,UAXwE,CAU1EpD,UAV0E,CAa5E,GAAMK,SAAQ,CAAG2+C,wBAAO,CACtB,iBACEF,QAAO,CACH,CACE,CACEz7C,MAAM,CAAE,mBADV,CAEEzS,KAAK,WAAKhT,IAAI,CAAC6D,KAAL,CAAW4d,OAAX,CAAL,aAA4BzhB,IAAI,CAAC6D,KAAL,CAAWue,UAAX,CAA5B,CAFP,CADF,CAKE,CACEqD,MAAM,CAAE,2BADV,CAEEzS,KAAK,CAAEhT,IAAI,CAAC6D,KAAL,CAAW2d,OAAX,CAFT,CALF,CASE,CACEiE,MAAM,CAAE,oBADV,CAEEzS,KAAK,WAAKhT,IAAI,CAAC6D,KAAL,CAAW6c,QAAX,CAAL,cAA8B1gB,IAAI,CAAC6D,KAAL,CACjC+U,kBAAkB,CAAG,GADY,CAA9B,MAFP,CATF,CAeE,CACE6M,MAAM,CAAE,0BADV,CAEEzS,KAAK,WAAKhT,IAAI,CAAC6D,KAAL,CAAW8d,gCAAgC,CAAG,GAA9C,CAAL,KAFP,CAfF,CADG,CAqBH,EAtBN,EADsB,CAwBtB,CAACu/C,OAAD,CAAU17C,UAAV,CAxBsB,CAAxB,CA2BA,MACE,+BAAC,uBAAD,MACE,8BAAC,kBAAD,MACE,8BAAC,YAAD,EAAc,QAAQ,KAAtB,EACE,8BAAC,kBAAD,mBADF,CAEE,8BAAC,YAAD,gBACM9C,YAAY,CAACvL,MAAM,CAAC+C,IAAP,CAAYxB,WAAZ,EAAD,CADlB,aACiDgK,YAAY,CACzDhB,iBADyD,CAD7D,cAGQ1hB,IAAI,CAAC6D,KAAL,CAAWsT,MAAM,CAAC+C,IAAP,CAAY6E,qBAAZ,GAAsC,GAAjD,CAHR,OAFF,CADF,CASE,8BAAC,YAAD,EAAc,QAAQ,KAAtB,EACE,8BAAC,cAAD,EAAgB,OAAO,CAAE,yBAAMoiD,WAAU,CAAC,CAACD,OAAF,CAAhB,EAAzB,CAAqD,MAAM,CAAEA,OAA7D,MADF,CATF,CADF,CAgBE,8BAAC,gBAAD,MACE,8BAAC,WAAD,EACE,SAAS,CAAEljD,SADb,CAEE,OAAO,CAAEuH,eAAe,CAAG,GAF7B,CAGE,UAAU,CAAE3M,kBAAkB,CAAG,GAHnC,CAIE,OAAO,CAAE,GAJX,EADF,CAhBF,CAwBG0/C,2BAAmB,CAAC71C,QAAD,CAAW,IAAX,CAAiB,EAAjB,CAxBtB,CADF,CA4BD,CApED,CAsEeu+C,qFAAf,E;;klBC9EA,GAAM7L,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,gCAMX0yD,YANW,CAAf,CAcA,GAAM2J,iBAAgB,CAAGt8D,gDAAM,CAACC,GAAV,iCAAtB,CAKA,GAAMs8D,4BAAa,CAAG,QAAhBA,cAAgB,MAAqB,IAAlBpzC,MAAkB,MAAlBA,KAAkB,CAAX1W,IAAW,MAAXA,IAAW,CACzC,GAAM6xC,QAAO,CAAG7xC,IAAI,CAAG0W,KAAvB,CAEA,MACE,+BAAC,uBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,kBAAD,eADF,CAEE,8BAAC,YAAD,gBAAkB1W,IAAlB,aAA0B0W,KAA1B,EAFF,CADF,CAKE,8BAAC,gBAAD,MACE,8BAAC,WAAD,EAAS,OAAO,CAAEm7B,OAAlB,EADF,CALF,CADF,CAWD,CAdD,CAgBeiY,qFAAf,E;;ACzCA,GAAMC,oDAAyB,CAAG,QAA5BA,0BAA4B,MAAwB,IAArBzxD,KAAqB,MAArBA,IAAqB,CAAZxJ,KAAY,mEACxD,OAAQwJ,IAAR,EACE,IAAK,cAAL,CACE,MAAO,+BAAC,kBAAD,CAAkBxJ,KAAlB,CAAP,CACF,IAAK,MAAL,CACE,MAAO,+BAAC,SAAD,CAAUA,KAAV,CAAP,CACF,IAAK,WAAL,CACE,MAAO,+BAAC,eAAD,CAAeA,KAAf,CAAP,CACF,IAAK,iBAAL,CACE,MAAO,+BAAC,uBAAD,CAAqBA,KAArB,CAAP,CACF,IAAK,eAAL,CACE,MAAO,+BAAC,qBAAD,CAAmBA,KAAnB,CAAP,CACF,IAAK,eAAL,CACE,MAAO,+BAAC,qBAAD,CAAmBA,KAAnB,CAAP,CACF,QACE,KAAM4F,MAAK,+BAAuB4D,IAAvB,iBAAX,CAdJ,CAgBD,CAjBD,CAmBeyxD,kIAAf,E;;GCpBMC,kC,gcACK,iBAC2B,KAAKl7D,KADhC,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,CACgB1sC,MADhB,aACgBA,MADhB,IAEC8oC,YAFD,CAEiB4D,OAAO,CAACyB,QAFzB,CAECrF,WAFD,CAIP,GAAMwhB,OAAM,CAAGzwD,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CAEA,MAAO9oC,OAAM,CACVC,WADI,CACQ,iBADR,CAC2B,CAAEqqD,MAAM,CAANA,MAAF,CAD3B,CACuC,EADvC,EAEJ32D,GAFI,CAEA,cAAkB/J,CAAlB,KAAG+O,KAAH,MAAGA,IAAH,CAASxJ,KAAT,MAASA,KAAT,OACH,+BAAC,0CAAD,gBACE,GAAG,0BAAoBwJ,IAApB,aAA4BqH,MAAM,CAAC1E,EAAnC,aAAyC1R,CAAzC,CADL,CAEE,OAAO,CAAE8iD,OAFX,CAGE,IAAI,CAAE7yC,IAHR,CAIE,MAAM,CAAEmG,MAJV,CAKE,IAAI,CAAErH,IALR,EAMMxJ,KANN,EADG,EAFA,CAAP,CAYD,C,8BAnB4Ba,eAAK,CAACy0D,S,EAsBtB4F,6FAAf,E;;yoDCdA,GAAMxK,4BAAgB,CAAGjyD,wDAAM,CAAC+zD,+BAAD,CAAT,6BAAtB,CAIA,GAAM4I,QAAO,CAAG38D,gDAAM,CAACC,GAAV,8BACF+lC,sBAAM,CAAC6oB,UADL,CAAb,CAaA,GAAM+N,WAAU,CAAG58D,gDAAM,CAACC,GAAV,8BAAhB,CAOO,GAAM48D,eAAc,CAAG78D,gDAAM,CAACC,GAAV,8BAMvB,SAACsB,KAAD,QAAWA,MAAK,CAAC0mC,MAAN,iBAAX,EANuB,CAApB,CAeP,GAAM60B,mCAAkC,CAAG98D,gDAAM,CAACC,GAAV,8BAAxC,CAKA,GAAM88D,aAAY,CAAG/8D,gDAAM,CAACC,GAAV,8BAAlB,C,GASM+8D,sB,0GACJ,oBAAYz7D,KAAZ,CAAmB,sEACjB,gIAAMA,KAAN,GAEA,MAAKu0B,KAAL,CAAa,CACXg+B,GAAG,CAAE,IADM,CAAb,CAHiB,aAMlB,C,qHAEqB7nD,I,CAAMmG,M,CAAQ,CAClC,GAAInG,IAAI,CAACyB,EAAL,GAAY,KAAKnM,KAAL,CAAW0K,IAAX,CAAgByB,EAA5B,EAAkC0E,MAAM,CAAC1E,EAAP,GAAc,KAAKnM,KAAL,CAAW6Q,MAAX,CAAkB1E,EAAtE,CAA0E,CACxE,KAAKwqD,WAAL,GACD,CACF,C,6DAEmB,IACVpZ,QADU,CACE,KAAKv9C,KADP,CACVu9C,OADU,CAElB,KAAKqZ,6BAAL,CAAqC,KAAKC,qBAAL,CAA2Bx1D,IAA3B,CAAgC,IAAhC,CAArC,CACAk8C,OAAO,CAACuZ,uBAAR,CAAgC,KAAKF,6BAArC,EACD,C,mEAEsB,IACbrZ,QADa,CACD,KAAKv9C,KADJ,CACbu9C,OADa,CAErBA,OAAO,CAACwZ,2BAAR,CAAoC,KAAKH,6BAAzC,EACD,C,iDAEa,IACJ/lD,OADI,CACO,KAAK7Q,KADZ,CACJ6Q,MADI,CAEZ,GAAM6qD,SAAQ,CAAG,EAAjB,CACA,GAAI7qD,MAAM,CAACwD,WAAP,EAAJ,CAA0B,CACxBqnD,QAAQ,CAAC53D,IAAT,CAAc,WAAd,EACD,CACD,GAAI+M,MAAM,CAACkF,KAAP,CAAaE,SAAb,EAAJ,CAA8B,CAC5BylD,QAAQ,CAAC53D,IAAT,CAAc,SAAd,EACD,CAED,GAAMgV,UAAS,CAAGjI,MAAM,CAACkI,MAAP,CACf4iD,YADe,GAEfn3D,GAFe,CAEX,SAACoT,QAAD,QAAcA,SAAQ,CAACyG,UAAT,EAAd,EAFW,CAAlB,CAIA,MAAO,UAAIq9C,QAAJ,8CAAiB5iD,SAAjB,GAA4B4J,IAA5B,CAAiC,IAAjC,CAAP,CACD,C,iEAEqB,iBACc,KAAK1iB,KADnB,CACZ6Q,MADY,aACZA,MADY,CACJ0sC,OADI,aACJA,OADI,CACK7yC,IADL,aACKA,IADL,CAGpB,MAAO,UAACsU,SAAD,CAAYhf,KAAZ,CAAmBqM,GAAnB,QACL,wBAAC,kCAAD,EAAoC,GAAG,CAAEA,GAAzC,EACE,uBAAC,0CAAD,gBACE,IAAI,CAAE2S,SADR,CAEE,MAAM,CAAEnO,MAFV,CAGE,OAAO,CAAE0sC,OAHX,CAIE,IAAI,CAAE7yC,IAJR,EAKM1K,KALN,EADF,CADK,EAAP,CAWD,C,+CAEY,IACH6Q,OADG,CACQ,KAAK7Q,KADb,CACH6Q,MADG,CAGX,MAAOmhD,4BAAmB,CAAC,CACzB,CACEtlD,KAAK,CAAEmE,MAAM,CAAC+qD,oBAAP,EADT,CADyB,CAAD,CAA1B,CAKD,C,6CAEW,IACF/qD,OADE,CACS,KAAK7Q,KADd,CACF6Q,MADE,CAGV,GAAMsL,SAAQ,CAAGtL,MAAM,CAACqN,GAAP,CAAW29C,YAAX,EAAjB,CAEA,MAAO1/C,SAAQ,CAAC0U,OAAT,GAAmBrsB,GAAnB,CAAuB,cAAqBsB,KAArB,KAAGqH,KAAH,MAAGA,IAAH,CAASgP,QAAT,MAASA,QAAT,OAC5B,wBAAC,YAAD,EAAc,GAAG,0BAAoBhP,IAApB,aAA4BrH,KAA5B,CAAjB,EACE,uBAAC,gBAAD,0BAAgCqH,IAAhC,EADF,CAEGgP,QAAQ,CAAC3X,GAAT,CAAa,SAACsO,OAAD,CAAUgpD,YAAV,QACZ,wBAAC,YAAD,EAAc,GAAG,sBAAgB3uD,IAAhB,aAAwBrH,KAAxB,aAAiCg2D,YAAjC,CAAjB,EACE,uBAAC,YAAD,MAAehpD,OAAf,CADF,CADY,EAAb,CAFH,CAD4B,EAAvB,CAAP,CAUD,C,qDAEe,kBAOV,KAAK9S,KAPK,CAEZ0K,IAFY,cAEZA,IAFY,CAGZmG,MAHY,cAGZA,MAHY,CAIZkrD,sBAJY,cAIZA,sBAJY,CAKZxe,OALY,cAKZA,OALY,CAMZye,eANY,cAMZA,eANY,CASd,GAAMC,KAAI,CAAGF,sBAAsB,CAAGA,sBAAsB,EAAzB,CAA8B,IAAjE,CAEA,GAAML,SAAQ,CAAG,KAAKQ,WAAL,EAAjB,CAEA,MACE,+CACGD,IAAI,EAAI,uBAAC,IAAD,EAAM,OAAO,CAAE1e,OAAf,CAAwB,IAAI,CAAE7yC,IAA9B,CAAoC,MAAM,CAAEmG,MAA5C,EADX,CAGG6qD,QAAQ,EACP,uBAAC,YAAD,MACE,uBAAC,OAAD,MAAUA,QAAV,CADF,CAJJ,CASG1J,2BAAmB,CAClBnhD,MAAM,CAACsrD,aAAP,CAAqBzxD,IAArB,CADkB,CAElB,KAAK0xD,mBAAL,EAFkB,CATtB,CAaE,uBAAC,uBAAD,EAAkB,IAAI,CAAE1xD,IAAxB,CAA8B,MAAM,CAAEmG,MAAtC,CAA8C,OAAO,CAAE0sC,OAAvD,EAbF,CAcGye,eAAe,EACd,uBAAC,gCAAD,EACE,OAAO,CAAEze,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,MAAM,CAAEmG,MAHV,CAIE,MAAM,CAAEmrD,eAAe,CAACj+D,MAJ1B,CAKE,SAAS,CAAEi+D,eAAe,CAACl2C,SAL7B,EAfJ,CADF,CA0BD,C,uCACQ,kCACiC,KAAK9lB,KADtC,CACC6Q,MADD,cACCA,MADD,CACS/R,OADT,cACSA,OADT,CACkBu9D,GADlB,cACkBA,GADlB,CACuBx/D,KADvB,cACuBA,KADvB,IAGC01D,IAHD,CAGS,KAAKh+B,KAHd,CAGCg+B,GAHD,CAKP,MACE,wBAAC,2BAAD,EACE,QAAQ,CAAE,CAAC8J,GADb,CAEE,OAAO,CAAEv9D,OAFX,CAGE,KAAK,CAAEjC,KAHT,CAIE,OAAO,CAAE,iBAACqF,CAAD,CAAO,CACdA,CAAC,CAAChC,eAAF,GACAgC,CAAC,CAAC/B,cAAF,GACD,CAPH,EASE,uBAAC,aAAD,MACG0Q,MAAM,CAACskD,cAAP,EADH,CAEE,uBAAC,UAAD,MACE,uBAAC,cAAD,EACE,MAAM,CAAE5C,GAAG,GAAK,KADlB,CAEE,OAAO,CAAE,iBAACrwD,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACA,MAAI,CAAC01D,QAAL,CAAc,CAAErD,GAAG,CAAE,KAAP,CAAd,EACD,CANH,MADF,CAWE,uBAAC,cAAD,EACE,MAAM,CAAEA,GAAG,GAAK,MADlB,CAEE,OAAO,CAAE,iBAACrwD,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACA,MAAI,CAAC01D,QAAL,CAAc,CAAErD,GAAG,CAAE,MAAP,CAAd,EACD,CANH,MAXF,CAsBE,uBAAC,cAAD,EACE,MAAM,CAAE,CAACA,GADX,CAEE,OAAO,CAAE,iBAACrwD,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACA,MAAI,CAAC01D,QAAL,CAAc,CAAErD,GAAG,CAAE,IAAP,CAAd,EACD,CANH,MAtBF,CAFF,CATF,CA8CG,CAACA,GAAD,EAAQ,KAAK+J,aAAL,EA9CX,CA+CG/J,GAAG,GAAK,KAAR,EAAiB,KAAKgK,SAAL,EA/CpB,CAgDGhK,GAAG,GAAK,MAAR,EAAkB,KAAKiK,UAAL,EAhDrB,CADF,CAoDD,C,wBAvLsB37D,kB,EA0LV46D,2EAAf,E;;oqECxPA,GAAMgB,UAAS,CAAGh+D,gDAAM,CAACC,GAAV,6BASX,SAACsB,KAAD,QAAWA,MAAK,CAAC08D,SAAN,EAAmB,gBAA9B,EATW,CAeF,SAAC18D,KAAD,kBAAcA,KAAK,CAAC28D,MAApB,OAfE,CAmBS,SAAC38D,KAAD,QAClBA,MAAK,CAAC8Y,SAAN,CAAkB2rB,sBAAM,CAACqpB,iBAAzB,CAA6CrpB,sBAAM,CAACnrB,SADlC,EAnBT,CAAf,CAwBA,GAAMsjD,WAAU,CAAGn+D,gDAAM,CAACC,GAAV,8BASZ,SAACsB,KAAD,QAAWA,MAAK,CAAC08D,SAAN,EAAmB,gBAA9B,EATY,CAAhB,CAeA,GAAMG,OAAM,CAAGp+D,gDAAM,CAACC,GAAV,8BAOU,SAACsB,KAAD,sBAAkBA,KAAK,CAAC4uD,UAAxB,OAPV,CASA,SAAC5uD,KAAD,CAAW,CACnB,GAAIA,KAAK,CAAC88D,SAAV,CAAqB,CACnB,MAAO,6CAAP,CACD,CAFD,IAEO,IAAI98D,KAAK,CAAC+8D,QAAV,CAAoB,CACzB,MAAO,+CAAP,CACD,CAFM,IAEA,IAAI/8D,KAAK,CAACg9D,MAAV,CAAkB,CACvB,MAAO,6CAAP,CAAsD;AACvD,CAFM,IAEA,IAAIh9D,KAAK,CAAC08D,SAAV,CAAqB,CAC1B,MAAO,2BAAP,CACD,CAFM,IAEA,CACL,MAAO,MAAP,CACD,CACF,CArBS,CAwBRE,UAxBQ,CAyBG,SAAC58D,KAAD,QAAYA,MAAK,CAACi9D,OAAN,CAAgB,MAAhB,CAAyB,MAArC,EAzBH,CA4BR,kBAAGC,QAAH,MAAGA,OAAH,OACAA,QAAO,yLADP,EA5BQ,CA6CG,SAACl9D,KAAD,CAAW,CACpB,GAAIA,KAAK,CAAC08D,SAAN,EAAmB18D,KAAK,CAACi9D,OAAzB,EAAoCj9D,KAAK,CAACm9D,OAA9C,CAAuD,CACrD,MAAO,KAAP,CACD,CAED,MAAO,GAAP,CACD,CAnDO,CAuDY,SAACn9D,KAAD,CAAW,CAC7B,GAAIA,KAAK,CAACi9D,OAAV,CAAmB,CACjB,MAAO,uBAAP,CACD,CAED,MAAO,MAAP,CACD,CA7DO,CAAZ,CAiEA,GAAMG,SAAQ,CAAG3+D,gDAAM,CAACC,GAAV,8BAOV,mBAAG0b,SAAH,OAAGA,QAAH,OACAA,SAAQ,EAAI,CAAZ,oIADA,EAPU,CAAd,CAoBA,GAAMy0C,qBAAS,CAAGpwD,gDAAM,CAACC,GAAV,8BAAf,C,GAOM2+D,sB,0GACJ,oBAAYr9D,KAAZ,CAAmB,sEACjB,gIAAMA,KAAN,GAEA,MAAKlB,OAAL,CAAe+B,kBAAA,EAAf,CACA,MAAK0zB,KAAL,CAAa,CACX+hC,iBAAiB,CAAE,IADR,CAEXgH,aAAa,CAAE,IAFJ,CAAb,CAJiB,aAQlB,C,iGAEWz+D,K,CAAO,CACjBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFiB,gBAIsB,KAAKH,KAJ3B,CAITu9C,OAJS,aAITA,OAJS,CAIA1sC,MAJA,aAIAA,MAJA,CAIQnG,IAJR,aAIQA,IAJR,CAIc2xD,GAJd,aAIcA,GAJd,CAMjB9e,OAAO,CAAC8Y,WAAR,CAAoB,eAApB,CAAqC,CACnC3rD,IAAI,CAAJA,IADmC,CAEnCmG,MAAM,CAANA,MAFmC,CAGnC/R,OAAO,CAAE,KAAKA,OAHqB,CAInCu9D,GAAG,CAAHA,GAJmC,CAArC,EAMD,C,4DAEiBx9D,K,CAAO,CACvBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFuB,iBAIiB,KAAKH,KAJtB,CAIjBu9C,OAJiB,cAIjBA,OAJiB,CAIR1sC,MAJQ,cAIRA,MAJQ,CAIAnG,IAJA,cAIAA,IAJA,CAIM3M,MAJN,cAIMA,MAJN,IAMfw/D,kBANe,CAMOhgB,OAAO,CAACyB,QANf,CAMfue,iBANe,IAOf/wC,SAPe,CAOF+wB,OAPE,CAOf/wB,QAPe,CASvB,GAAI,CAACzuB,MAAL,CAAa,CACX,GAAM21B,SAAQ,CAAG6pC,iBAAiB,CAACC,0BAAlB,CAA6C3sD,MAA7C,CAAjB,CACA,GAAI6iB,QAAJ,CAAc,CACZ31B,MAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2Bn4B,QAA3B,CAAT,CACD,CACF,CAED6pB,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,CAAuC,CACrC3rD,IAAI,CAAJA,IADqC,CAErCmG,MAAM,CAANA,MAFqC,CAGrC/R,OAAO,CAAE,KAAKA,OAHuB,CAIrCf,MAAM,CAANA,MAJqC,CAAvC,EAOA,KAAK63D,QAAL,CAAc,CAAEU,iBAAiB,CAAE,KAAKx3D,OAA1B,CAAd,EACD,C,0DAEgBD,K,CAAO,CACtBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFsB,GAIhBo9C,QAJgB,CAIJ,KAAKv9C,KAJD,CAIhBu9C,OAJgB,CAMtBA,OAAO,CAAC8Y,WAAR,CAAoB,gBAApB,EAEA,KAAKT,QAAL,CAAc,CAAEU,iBAAiB,CAAE,IAArB,CAAd,EACD,C,oDAEap0D,C,CAAG,CACfA,CAAC,CAAChC,eAAF,GACAgC,CAAC,CAAC/B,cAAF,GAFe,iBAIiB,KAAKH,KAJtB,CAITu9C,OAJS,cAITA,OAJS,CAIA1sC,MAJA,cAIAA,MAJA,CAIQnG,IAJR,cAIQA,IAJR,CAMf6yC,OAAO,CAAC8Y,WAAR,CAAoB,oBAApB,CAA0C,CAAExlD,MAAM,CAANA,MAAF,CAAUnG,IAAI,CAAJA,IAAV,CAA1C,EACD,C,uCAEQ,kCAqBH,KAAK1K,KArBF,CAELu9C,OAFK,cAELA,OAFK,CAGL1sC,MAHK,cAGLA,MAHK,CAILnG,IAJK,cAILA,IAJK,CAKL2xD,GALK,cAKLA,GALK,CAMLK,SANK,cAMLA,SANK,oCAOLe,UAPK,sDAWD,CACF1B,sBAAsB,CAAE,IADtB,CAEF2B,YAAY,CAAE,IAFZ,CAGFC,mBAAmB,CAAE,IAHnB,CAXC,0BAQH5B,uBARG,uBAQHA,sBARG,CASH2B,YATG,uBASHA,YATG,CAUHC,mBAVG,uBAUHA,mBAVG,oCAgBLC,eAhBK,CAgBLA,eAhBK,gCAgBa,KAAKC,WAhBlB,0DAiBL9L,QAjBK,CAiBLA,QAjBK,gCAiBM,KAjBN,sDAkBLxvB,IAlBK,CAkBLA,IAlBK,4BAkBE,IAlBF,oDAmBLxkC,MAnBK,CAmBLA,MAnBK,8BAmBI,IAnBJ,qBAoBFuyD,IApBE,6KAsBCgG,kBAtBD,CAsBuB,KAAK/hC,KAtB5B,CAsBC+hC,iBAtBD,IAuBCiH,kBAvBD,CAuBuBhgB,OAAO,CAACyB,QAvB/B,CAuBCue,iBAvBD,CAyBP,GAAI,CAACh7B,IAAL,CAAW,CACTA,IAAI,CAAG1xB,MAAM,CAACitD,WAAP,EAAP,CACD,CAED,GAAMC,KAAI,CAAGL,YAAY,CAAG3B,sBAAH,CAA4B,IAArD,CAEA,GAAMiC,YAAW,CAAGvkD,OAAO,CACxB,CAACikD,YAAD,EAAiBpH,iBAAlB,EACGoH,YAAY,EACXA,YAAY,GAAK7sD,MADlB,EAEC8sD,mBAAmB,GAAK,KAAK7+D,OAJR,CAA3B,CAOA,GAAMk+D,OAAM,CAAGO,iBAAiB,CAACU,kBAAlB,CAAqCptD,MAArC,CAAf,CACA,GAAMksD,SAAQ,CACZh/D,MAAM,EACNw/D,iBAAiB,CAACU,kBAAlB,CAAqCptD,MAArC,CADA,EAEA,CAAC0sD,iBAAiB,CAACW,6BAAlB,CAAgDrtD,MAAhD,CAAwD9S,MAAxD,CAHH,CAIA,GAAM++D,UAAS,CACb/+D,MAAM,EAAIw/D,iBAAiB,CAACW,6BAAlB,CAAgDrtD,MAAhD,CAAwD9S,MAAxD,CADZ,CAGA,GAAMiyD,SAAQ,CAAGn/C,MAAM,CAACE,UAAP,EAAjB,CACA,GAAMotD,YAAW,CAAGttD,MAAM,CAAC+C,IAAP,CAAY6E,qBAAZ,EAApB,CA/CO,0BAgDqC5H,MAAM,CAAC+C,IAAP,CAAYC,iBAAZ,EAhDrC,CAgDqBuqD,WAhDrB,uBAgDC9rD,kBAhDD,CAkDP,GAAM8H,SAAQ,CAAGgkD,WAAW,CAAGD,WAAd,CAA4BC,WAA5B,CAA0CD,WAA3D,CAEA,MACE,+CACGH,WAAW,EAAI3B,GAAf,EACC,uBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,OAAO,CAAE9e,OAFX,CAGE,IAAI,CAAE7yC,IAHR,CAIE,MAAM,CAAEmG,MAJV,CAKE,sBAAsB,CAAEktD,IAL1B,CAME,OAAO,CAAEzH,iBAAiB,EAAIqH,mBANhC,CAOE,MAAM,CAAE5/D,MAPV,EAQMuyD,IARN,EAFJ,CAaE,uBAAC,oBAAD,EACE,OAAO,CAAEsN,eAAe,CAACv8D,IAAhB,CAAqB,IAArB,CADX,CAEE,WAAW,CAAE,KAAKg9D,iBAAL,CAAuBh9D,IAAvB,CAA4B,IAA5B,CAFf,CAGE,UAAU,CAAE,KAAKi9D,gBAAL,CAAsBj9D,IAAtB,CAA2B,IAA3B,CAHd,CAIE,aAAa,CAAE,KAAKk9D,aAAL,CAAmBl9D,IAAnB,CAAwB,IAAxB,CAJjB,CAKE,GAAG,KALL,EAOG28D,WAAW,EAAI,CAAC3B,GAAhB,EACC,uBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,OAAO,CAAE9e,OAFX,CAGE,IAAI,CAAE7yC,IAHR,CAIE,MAAM,CAAEmG,MAJV,CAKE,sBAAsB,CAAEktD,IAL1B,CAME,OAAO,CAAEzH,iBAAiB,EAAIqH,mBANhC,CAOE,MAAM,CAAE5/D,MAPV,EAQMuyD,IARN,EARJ,CAmBE,uBAAC,MAAD,EACE,GAAG,CAAE,aAACp1D,CAAD,QAAQ,OAAI,CAAC4D,OAAL,CAAe5D,CAAvB,EADP,CAEE,GAAG,CAAEmhE,GAFP,CAGE,UAAU,CAAExrD,MAAM,CAACqlD,kBAAP,EAHd,CAIE,OAAO,CAAEjgD,SAAS,CAACvL,IAAD,CAAOmG,MAAP,CAJpB,CAKE,OAAO,CAAE2tD,SAAS,CAAC3tD,MAAD,CALpB,CAME,QAAQ,CAAEkhD,QANZ,CAOE,MAAM,CAAEiL,MAPV,CAQE,SAAS,CAAEF,SARb,CASE,QAAQ,CAAEC,QATZ,CAUE,SAAS,CAAElsD,MAAM,CAACwD,WAAP,EAVb,CAWE,OAAO,CAAExD,MAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAA/B,CAAkC,KAAlC,CAXX,EAaGsJ,QAAQ,CAAG,IAAX,EAAmBX,OAAO,CAAC,CAACu2C,QAAF,CAA1B,EACC,uBAAC,QAAD,EAAU,QAAQ,CAAE51C,QAApB,EAdJ,CAnBF,CAqCE,uBAAC,UAAD,EAAY,SAAS,CAAEvJ,MAAM,CAACwD,WAAP,EAAvB,CAA6C,QAAQ,CAAE09C,QAAvD,EACGxvB,IADH,CArCF,CAwCE,uBAAC,SAAD,EACE,SAAS,CAAE1xB,MAAM,CAACwD,WAAP,EADb,CAEE,SAAS,CAAExD,MAAM,CAACkP,cAAP,EAFb,CAGE,MAAM,CAAE0+C,gBAAgB,CAAC5tD,MAAD,CAH1B,EAxCF,CAbF,CADF,CA8DD,C,wBAzLsBhQ,kB,EA4LzB,GAAM29D,UAAS,CAAG,QAAZA,UAAY,CAAC3tD,MAAD,QAAYrX,UAAZ,EAAlB,CAAyC;AAEzC,GAAMyc,UAAS,CAAG,QAAZA,UAAY,CAACvL,IAAD,CAAOmG,MAAP,QAAkBA,OAAM,CAACkF,KAAP,CAAaE,SAAb,EAAlB,EAAlB,CAEA,GAAMwoD,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAC5tD,MAAD,QACtB,CAACA,MAAM,CAACyI,SAAP,CAAmBzI,MAAM,CAAC0I,cAAP,EAApB,EAA+C1I,MAAM,CAACyI,SAAvD,CAAoE,GAD7C,EAAzB,CAGe+jD,2EAAf,E;;mxFCtUA,GAAMZ,wBAAS,CAAGh+D,gDAAM,CAACC,GAAV,gCAcF,SAAAsB,KAAK,kBAAOA,KAAK,CAAC28D,MAAb,OAdH,CAkBS,SAAA38D,KAAK,QAAKA,MAAK,CAAC8Y,SAAN,CAAkB,SAAlB,CAA8B,SAAnC,EAlBd,CAAf,CAsBA,GAAM8jD,yBAAU,CAAGn+D,gDAAM,CAACC,GAAV,iCAAhB,CAcA,GAAMm+D,qBAAM,CAAGp+D,gDAAM,CAACC,GAAV,iCAOU,SAAAsB,KAAK,sBAAWA,KAAK,CAAC4uD,UAAjB,OAPf,CASA,SAAA5uD,KAAK,CAAI,CACjB,GAAIA,KAAK,CAAC88D,SAAV,CAAqB,CACnB,MAAO,6CAAP,CACD,CAFD,IAEO,IAAI98D,KAAK,CAAC+8D,QAAV,CAAoB,CACzB,MAAO,+CAAP,CACD,CAFM,IAEA,IAAI/8D,KAAK,CAACg9D,MAAV,CAAkB,CACvB,MAAO,6CAAP,CAAsD;AACvD,CAFM,IAEA,IAAIh9D,KAAK,CAAC08D,SAAV,CAAqB,CAC1B,MAAO,WAAP,CACD,CAFM,IAEA,CACL,MAAO,MAAP,CACD,CACF,CArBS,CAwBRE,wBAxBQ,CAyBG,SAAA58D,KAAK,QAAKA,MAAK,CAACi9D,OAAN,CAAgB,MAAhB,CAAyB,MAA9B,EAzBR,CAiCG,SAAAj9D,KAAK,CAAI,CAClB,GAAIA,KAAK,CAAC08D,SAAN,EAAmB18D,KAAK,CAACi9D,OAAzB,EAAoCj9D,KAAK,CAACm9D,OAA9C,CAAuD,CACrD,MAAO,KAAP,CACD,CAED,MAAO,GAAP,CACD,CAvCO,CAyCY,SAAAn9D,KAAK,CAAI,CAC3B,GAAIA,KAAK,CAAC08D,SAAN,EAAmB18D,KAAK,CAACi9D,OAA7B,CAAsC,CACpC,MAAO,OAAP,CACD,CAFD,IAEO,IAAIj9D,KAAK,CAACm9D,OAAV,CAAmB,CACxB,MAAO,QAAP,CACD,CAED,MAAO,aAAP,CACD,CAjDO,CAmDY,SAAAn9D,KAAK,CAAI,CAC3B,GAAIA,KAAK,CAACi9D,OAAV,CAAmB,CACjB,MAAO,uBAAP,CACD,CAED,MAAO,MAAP,CACD,CAzDO,CAAZ,CA6DA,GAAMpO,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,iCAAf,CAMA,GAAMggE,cAAa,CAAGjgE,gDAAM,CAACC,GAAV,iCAAnB,CAIA,GAAMigE,mBAAkB,CAAGlgE,gDAAM,CAACC,GAAV,iCASb,SAAAsB,KAAK,QAAKA,MAAK,CAAC28D,MAAN,GAAiB,CAAjB,CAAqB,aAArB,CAAqC,OAA1C,EATQ,CAcZ,SAAA38D,KAAK,QAAKA,MAAK,CAAC28D,MAAN,GAAiB,CAAjB,CAAqB,WAArB,CAAmC,MAAxC,EAdO,CAqBX,SAAA38D,KAAK,kBAAOA,KAAK,CAAC28D,MAAb,OArBM,CA0BA,SAAA38D,KAAK,QAAKA,MAAK,CAAC8Y,SAAN,CAAkB,SAAlB,CAA8B,SAAnC,EA1BL,CAAxB,C,GA8BM8lD,4B,6GACJ,uBAAY5+D,KAAZ,CAAmB,yEACjB,mIAAMA,KAAN,GAEA,MAAKlB,OAAL,CAAe+B,kBAAA,EAAf,CACA,MAAK0zB,KAAL,CAAa,CACX+hC,iBAAiB,CAAE,IADR,CAEXgH,aAAa,CAAE,IAFJ,CAAb,CAJiB,aAQlB,C,oGAEWz+D,K,CAAO,CACjBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFiB,gBAIiB,KAAKH,KAJtB,CAITu9C,OAJS,aAITA,OAJS,CAIA1sC,MAJA,aAIAA,MAJA,CAIQnG,IAJR,aAIQA,IAJR,CAMjB6yC,OAAO,CAAC8Y,WAAR,CAAoB,eAApB,CAAqC,CACnC3rD,IAAI,CAAJA,IADmC,CAEnCmG,MAAM,CAANA,MAFmC,CAGnC/R,OAAO,CAAE,KAAKA,OAHqB,CAInCu9D,GAAG,CAAE,IAJ8B,CAArC,EAMD,C,4DAEiBx9D,K,CAAO,CACvBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFuB,iBAIS,KAAKH,KAJd,CAIjBu9C,OAJiB,cAIjBA,OAJiB,CAIR1sC,MAJQ,cAIRA,MAJQ,CAIAnG,IAJA,cAIAA,IAJA,CAMvB6yC,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,CAAuC,CACrC3rD,IAAI,CAAJA,IADqC,CAErCmG,MAAM,CAANA,MAFqC,CAGrC/R,OAAO,CAAE,KAAKA,OAHuB,CAAvC,EAMA,KAAK82D,QAAL,CAAc,CAAEU,iBAAiB,CAAE,KAAKx3D,OAA1B,CAAd,EACD,C,0DAEgBD,K,CAAO,CACtBA,KAAK,CAACqB,eAAN,GACArB,KAAK,CAACsB,cAAN,GAFsB,GAIhBo9C,QAJgB,CAIJ,KAAKv9C,KAJD,CAIhBu9C,OAJgB,CAMtBA,OAAO,CAAC8Y,WAAR,CAAoB,gBAApB,EAEA,KAAKT,QAAL,CAAc,CAAEU,iBAAiB,CAAE,IAArB,CAAd,EACD,C,oDAEap0D,C,CAAG,CACfA,CAAC,CAAChC,eAAF,GACAgC,CAAC,CAAC/B,cAAF,GAFe,iBAIiB,KAAKH,KAJtB,CAITu9C,OAJS,cAITA,OAJS,CAIA1sC,MAJA,cAIAA,MAJA,CAIQnG,IAJR,cAIQA,IAJR,CAMf6yC,OAAO,CAAC8Y,WAAR,CAAoB,oBAApB,CAA0C,CAAExlD,MAAM,CAANA,MAAF,CAAUnG,IAAI,CAAJA,IAAV,CAA1C,EACD,C,uCAEQ,kCAqBH,KAAK1K,KArBF,CAELu9C,OAFK,cAELA,OAFK,CAGL1sC,MAHK,cAGLA,MAHK,CAILnG,IAJK,cAILA,IAJK,CAKL2xD,GALK,cAKLA,GALK,CAMLK,SANK,cAMLA,SANK,oCAOLe,UAPK,sDAWD,CACF1B,sBAAsB,CAAE,IADtB,CAEF2B,YAAY,CAAE,IAFZ,CAGFC,mBAAmB,CAAE,IAHnB,CAXC,0BAQH5B,uBARG,uBAQHA,sBARG,CASH2B,YATG,uBASHA,YATG,CAUHC,mBAVG,uBAUHA,mBAVG,oCAgBLC,eAhBK,CAgBLA,eAhBK,gCAgBa,KAAKC,WAhBlB,0DAiBL9L,QAjBK,CAiBLA,QAjBK,gCAiBM,KAjBN,sDAkBLxvB,IAlBK,CAkBLA,IAlBK,4BAkBE,IAlBF,oDAmBLxkC,MAnBK,CAmBLA,MAnBK,8BAmBI,IAnBJ,qBAoBFuyD,IApBE,6KAsBCgG,kBAtBD,CAsBuB,KAAK/hC,KAtB5B,CAsBC+hC,iBAtBD,CAwBP,GAAMyH,KAAI,CAAGL,YAAY,CAAG3B,sBAAH,CAA4B,IAArD,CAEA,GAAMiC,YAAW,CAAGvkD,OAAO,CACxB,CAACikD,YAAD,EAAiBpH,iBAAlB,EACGoH,YAAY,EACXA,YAAY,GAAK7sD,MADlB,EAEC8sD,mBAAmB,GAAK,KAAK7+D,OAJR,CAA3B,CAOA,MACE,+CACGk/D,WAAW,EACV,uBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,OAAO,CAAEzgB,OAFX,CAGE,IAAI,CAAE7yC,IAHR,CAIE,MAAM,CAAEmG,MAJV,CAKE,sBAAsB,CAAEktD,IAL1B,CAME,OAAO,CAAEzH,iBAAiB,EAAIqH,mBANhC,CAOE,MAAM,CAAE5/D,MAPV,EAQMuyD,IARN,EAFJ,CAaE,uBAAC,kBAAD,EACE,GAAG,CAAE,aAAAp1D,CAAC,QAAK,OAAI,CAAC4D,OAAL,CAAe5D,CAApB,EADR,CAEE,OAAO,CAAE0iE,eAAe,CAACv8D,IAAhB,CAAqB,IAArB,CAFX,CAGE,WAAW,CAAE,KAAKg9D,iBAAL,CAAuBh9D,IAAvB,CAA4B,IAA5B,CAHf,CAIE,UAAU,CAAE,KAAKi9D,gBAAL,CAAsBj9D,IAAtB,CAA2B,IAA3B,CAJd,CAKE,aAAa,CAAE,KAAKk9D,aAAL,CAAmBl9D,IAAnB,CAAwB,IAAxB,CALjB,CAME,MAAM,CAAEo9D,8BAAgB,CAAC5tD,MAAD,CAN1B,CAOE,SAAS,CAAEA,MAAM,CAACkP,cAAP,EAPb,EASE,uBAAC,aAAD,MACGlP,MAAM,CAACuO,qBAAP,EADH,OACsCvO,MAAM,CAACyI,SAD7C,MAC0D,GAD1D,CAEGzI,MAAM,CAACwO,QAAP,EAFH,CATF,CAbF,CADF,CA8BD,C,2BA3HyBxe,kB,EA8H5B,GAAM49D,+BAAgB,CAAG,QAAnBA,iBAAmB,CAAA5tD,MAAM,QAC5B,CAACA,MAAM,CAACyI,SAAP,CAAmBzI,MAAM,CAAC0I,cAAP,EAApB,EAA+C1I,MAAM,CAACyI,SAAvD,CAAoE,GADvC,EAA/B,CAGeslD,oFAAf,E;;m0CCzQA,GAAMC,qBAAoB,CAAGpgE,gDAAM,CAACC,GAAV,8BAUd,SAAAsB,KAAK,CAAI,CACjB,OAAQA,KAAK,CAAC8pB,QAAd,EACE,IAAK,EAAL,CACE,0BAAoB2a,sBAAM,CAACipB,yBAA3B,EACF,QACE,2BAAqBjpB,sBAAM,CAACgpB,kBAA5B,EAJJ,CAMD,CAjBuB,CAA1B,CAoBA,GAAMiR,0BAAa,CAAGjgE,gDAAM,CAACC,GAAV,+BAAnB,CAIA,GAAMigE,+BAAkB,CAAGlgE,gDAAM,CAACC,GAAV,+BASb,SAAAsB,KAAK,QAAKA,MAAK,CAAC28D,MAAN,GAAiB,CAAjB,CAAqB,aAArB,CAAqC,OAA1C,EATQ,CAcZ,SAAA38D,KAAK,QAAKA,MAAK,CAAC28D,MAAN,GAAiB,CAAjB,CAAqB,WAArB,CAAmC,MAAxC,EAdO,CAqBX,SAAA38D,KAAK,kBAAOA,KAAK,CAAC28D,MAAb,OArBM,CA0BA,SAAA38D,KAAK,QAAKA,MAAK,CAAC8Y,SAAN,CAAkB,SAAlB,CAA8B,SAAnC,EA1BL,CAAxB,C,GA8BMgmD,wB,uaACK,iBACqC,KAAK9+D,KAD1C,CACC0K,IADD,aACCA,IADD,CACO0Z,OADP,aACOA,OADP,CACgBm5B,OADhB,aACgBA,OADhB,CAC4B+S,IAD5B,8FAEP,GAAMxmC,SAAQ,CAAG1F,OAAO,CAAC0F,QAAzB,CACA,GAAMzF,UAAS,CAAGD,OAAO,CAACE,YAAR,EAAlB,CAEA,MACE,wBAAC,oBAAD,EAAsB,QAAQ,CAAEwF,QAAhC,EACG1F,OAAO,CAAC26C,sBAAR,GAAiCv6D,GAAjC,CAAqC,SAAAqM,MAAM,QAC1C,wBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,OAAO,CAAE0sC,OAFX,CAGE,GAAG,sBAAgBzzB,QAAhB,aAA4Bpf,IAAI,CAACyB,EAAjC,aAAuC0E,MAAM,CAAC1E,EAA9C,CAHL,CAIE,MAAM,CAAE0E,MAJV,CAKE,IAAI,CAAEnG,IALR,CAME,QAAQ,CAAE6yC,OAAO,CAACyhB,gBAAR,CAAyBnuD,MAAzB,CANZ,EAOMy/C,IAPN,EAD0C,EAA3C,CADH,CAaGjsC,SAAS,EACR,uBAAC,oBAAD,gBACE,OAAO,CAAEk5B,OADX,CAEE,MAAM,CAAEl5B,SAFV,CAGE,IAAI,CAAE3Z,IAHR,CAIE,QAAQ,CAAE6yC,OAAO,CAACyhB,gBAAR,CAAyB36C,SAAzB,CAJZ,EAKMisC,IALN,EAdJ,CADF,CAyBD,C,yBA/BuBzvD,kB,EAkCXi+D,kFAAf,E;;8+BC1FA,GAAMG,oBAAmB,CAAGxgE,gDAAM,CAACC,GAAV,6BAAzB,CAoBA,GAAMwgE,OAAM,CAAGzgE,gDAAM,CAACC,GAAV,8BAAZ,CAQA,GAAMygE,aAAY,CAAG1gE,wDAAM,CAACygE,MAAD,CAAT,8BAAlB,CAIA,GAAME,sBAAU,CAAG,QAAbA,WAAa,MAAgC,IAA7B10D,KAA6B,MAA7BA,IAA6B,CAAvB6yC,OAAuB,MAAvBA,OAAuB,CAAX+S,IAAW,6EACjD,GAAM+O,kBAAiB,CAAGC,4BAAW,CAAC,UAAM,CAC1C/hB,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,EACD,CAFoC,CAElC,EAFkC,CAArC,CAIA,MACE,+BAAC,mBAAD,EACE,OAAO,CAAEgJ,iBADX,CAEE,aAAa,CAAE,uBAACn9D,CAAD,CAAO,CACpBA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACD,CALH,CAME,IAAI,CAAEwK,IAAI,CAAC60D,IANb,EAQE,8BAAC,MAAD,MACE,8BAAC,sBAAD,gBACE,OAAO,CAAEhiB,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBkI,mBAAtB,EAHX,EAIMkkC,IAJN,EADF,CAOE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBmI,iBAAtB,EAHX,EAIMikC,IAJN,EAPF,CARF,CAuBE,8BAAC,YAAD,MACE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,OAAO,CAAE7yC,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsB8H,eAAtB,EAFX,CAGE,IAAI,CAAEthB,IAHR,EAIM4lD,IAJN,EADF,CAOE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBwH,iBAAtB,EAHX,EAIM4kC,IAJN,EAPF,CAaE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsB+H,aAAtB,EAHX,EAIMqkC,IAJN,EAbF,CAvBF,CA4CE,8BAAC,MAAD,MACE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBgI,wBAAtB,EAHX,EAIMokC,IAJN,EADF,CAOE,8BAAC,sBAAD,gBACE,OAAO,CAAE/S,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,OAAO,CAAEA,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAAsBiI,sBAAtB,EAHX,EAIMmkC,IAJN,EAPF,CA5CF,CADF,CA6DD,CAlED,CAoEe8O,+EAAf,E;;mNCrGA,GAAMvQ,0BAAS,CAAGpwD,gDAAM,CAACC,GAAV,kCAAf,C,GAIM8gE,gC,2bACK,iBAC4C,KAAKx/D,KADjD,CACCu9C,OADD,aACCA,OADD,CACU7yC,IADV,aACUA,IADV,CACgB3M,MADhB,aACgBA,MADhB,CACwB8S,MADxB,aACwBA,MADxB,CACmCy/C,IADnC,yGAECiN,kBAFD,CAEuBhgB,OAAO,CAACyB,QAF/B,CAECue,iBAFD,CAIP,GAAI,CAACA,iBAAiB,CAAClpC,OAAlB,CAA0B3pB,IAA1B,CAAgC3M,MAAhC,CAAwC8S,MAAxC,CAAL,CAAsD,CACpD,MAAO,KAAP,CACD,CAED,GAAMiV,UAAS,CAAGjV,MAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,CACnDuS,OAAO,CAAE3Y,IAD0C,CAEnD3M,MAAM,CAANA,MAFmD,CAAnC,CAAlB,CAKA,MACE,wBAAC,yBAAD,MACE,uBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,SAAS,KAFX,CAGE,OAAO,CAAEw/C,OAHX,CAIE,GAAG,kCAA4B7yC,IAAI,CAACyB,EAAjC,aAAuC0E,MAAM,CAAC1E,EAA9C,CAJL,CAKE,MAAM,CAAE0E,MALV,CAME,IAAI,CAAEnG,IANR,CAOE,QAAQ,CAAE,KAPZ,CAQE,MAAM,CAAE3M,MARV,CASE,eAAe,CAAE,CACfA,MAAM,CAAEA,MADO,CAEf+nB,SAAS,CAAEA,SAFI,CATnB,CAaE,IAAI,CAAEA,SAAS,CAACrf,MAAV,CAAmB,GAb3B,EAcM6pD,IAdN,EADF,CADF,CAoBD,C,6BAlC2BzvD,kB,EAqCf2+D,+FAAf,E;;GCxCMC,4B,yBACJ,uBAAYtI,OAAZ,CAAqBzjC,QAArB,CAA+BD,SAA/B,CAA0CE,QAA1C,CAAoDqjC,aAApD,CAAmE,CAAC,8DAClE,KAAK7qD,EAAL,CAAUiL,EAAM,EAAhB,CACA,KAAK+/C,OAAL,CAAeA,OAAf,CACA,KAAKzjC,QAAL,CAAgBA,QAAhB,CACA,KAAKD,SAAL,CAAiBA,SAAjB,CACA,KAAKE,QAAL,CAAgBA,QAAhB,CACA,KAAKqjC,aAAL,CAAqBA,aAArB,CACA,KAAKxwC,cAAL,CAAsB,GAAIzd,aAAJ,EAAtB,CACA,KAAKyc,cAAL,CAAsB,GAAIzc,aAAJ,EAAtB,CACA,KAAK22D,WAAL,CAAmB,KAAnB,CACA,KAAK94B,IAAL,CAAY,KAAZ,CACD,C,6FAES,CACR,KAAKA,IAAL,CAAY,IAAZ,CACD,C,uCAEQ,CACP,MAAO,MAAKA,IAAZ,CACD,C,uDAEgB,CACf,KAAK84B,WAAL,CAAmB,IAAnB,CACD,C,4DAEiB3hE,M,CAAQ,CACxB,MAAO,MAAKo5D,OAAL,CAAa/xC,iBAAb,CAA+B,IAA/B,CAAqCrnB,MAArC,CAAP,CACD,C,4DAEiB6D,Q,CAAU,CAC1B,KAAK4jB,cAAL,CAAsB5jB,QAAtB,CACA,MAAO,KAAP,CACD,C,4DAEiBA,Q,CAAU,CAC1B,KAAK4kB,cAAL,CAAsB5kB,QAAtB,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACLuK,EAAE,CAAE,KAAKA,EADJ,CAELgrD,OAAO,CAAE,KAAKA,OAAL,CAAat/C,WAAb,CAAyBrO,IAF7B,CAGLkqB,QAAQ,CAAE,KAAKA,QAHV,CAILlO,cAAc,CAAE,KAAKA,cAJhB,CAKLiO,SAAS,CAAE,KAAKA,SALX,CAMLE,QAAQ,CAAE,KAAKA,QANV,CAOLqjC,aAAa,CAAE,KAAKA,aAPf,CAQL0I,WAAW,CAAE,KAAKA,WARb,CASLl5C,cAAc,CAAE,KAAKA,cAThB,CAAP,CAWD,C,gDAEWhb,I,CAAM,CAChB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAf,CACA,KAAKgrD,OAAL,CAAe,GAAIzvC,aAAY,CAAClc,IAAI,CAAC2rD,OAAN,CAAhB,EAAf,CACA,KAAKzjC,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAKlO,cAAL,CAAsB,GAAIzc,aAAJ,CAAWyC,IAAI,CAACga,cAAhB,CAAtB,CACA,KAAKgB,cAAL,CAAsB,GAAIzd,aAAJ,CAAWyC,IAAI,CAACgb,cAAhB,CAAtB,CACA,KAAKiN,SAAL,CAAiBjoB,IAAI,CAACioB,SAAtB,CACA,KAAKE,QAAL,CAAgBnoB,IAAI,CAACmoB,QAArB,CACA,KAAKqjC,aAAL,CAAqBxrD,IAAI,CAACwrD,aAA1B,CACA,KAAK0I,WAAL,CAAmBl0D,IAAI,CAACk0D,WAAL,EAAoB,KAAvC,CAEA,MAAO,KAAP,CACD,C,qCAEO,CACN,MAAO,IAAID,cAAJ,GAAoB/xD,WAApB,CAAgC,KAAKD,SAAL,EAAhC,CAAP,CACD,C,6BAGYgyD,kFAAf,E;;GCzEME,gD,6HACJ,iCAAY3I,aAAZ,CAA2BM,aAA3B,CAA0CsI,YAA1C,CAAwDpI,WAAxD,CAAqE,mFACnE,+IACA,MAAKA,WAAL,CAAmBA,WAAnB,CACA,MAAKR,aAAL,CAAqBA,aAArB,CACA,MAAKM,aAAL,CAAqBA,aAArB,CACA,MAAKuI,gBAAL,CAAwB,IAAxB,CACA,MAAKD,YAAL,CAAoBA,YAApB,CACA,MAAKnI,WAAL,CAAmBD,WAAnB,CAEA,MAAKsI,UAAL,CAAkB,IAAlB,CACA,MAAKC,eAAL,CAAuB,IAAvB,CACA,MAAKxI,YAAL,CAAoB,IAApB,CAXmE,aAYpE,C,sHAEe5jD,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC9C,6DACKA,gBADL,GAEE,CACEhX,IAAI,CAAE,iBADR,CAEExJ,KAAK,CAAE,CACLg3D,aAAa,CAAE,KAAKA,aADf,CAELM,aAAa,CAAE,KAAKA,aAFf,CAGLE,WAAW,CAAE,KAAKA,WAHb,CAILC,WAAW,CACT,KAAKA,WAAL,CAAmB,KAAKD,WAAxB,CACI,KAAKA,WADT,CAEI,KAAKC,WAPN,CAQLmI,YAAY,CAAE,KAAKA,YARd,CASLrI,YAAY,CAAE,KAAKA,YATd,CAULb,QAAQ,CAAE,IAVL,CAFT,CAFF,GAkBD,C,4CAES/iD,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,GAAMP,SAAQ,6CACTO,gBADS,CAAd,CAIAP,QAAQ,kCAA2B,KAAK+2C,aAAhC,EAAR,CAA2D,CACzDS,WAAW,CAAE,KAAKA,WADuC,CAEzDH,aAAa,CAAE,KAAKA,aAAL,CACX,KAAKA,aAAL,CAAmBz/C,WAAnB,CAA+BrO,IADpB,CAEX,IAJqD,CAKzDs2D,UAAU,CAAE,KAAKA,UALwC,CAMzDvI,YAAY,CAAE,KAAKA,YANsC,CAA3D,CASA,MAAOt3C,SAAP,CACD,C,iDAEsB,IAAXzU,KAAW,2DAAJ,EAAI,CACrB,GAAMw0D,aAAY,CAChBx0D,IAAI,kCAA2B,KAAKwrD,aAAhC,EAAJ,EAAwD,EAD1D,CAGA,KAAKS,WAAL,CAAmBuI,YAAY,CAACvI,WAAb,EAA4B,CAA/C,CACA,KAAKH,aAAL,CAAqB0I,YAAY,CAAC1I,aAAb,CACjB,GAAI5vC,aAAY,CAACs4C,YAAY,CAAC1I,aAAd,CAAhB,EADiB,CAEjB,IAFJ,CAIA,KAAKwI,UAAL,CAAkBE,YAAY,CAACF,UAAb,EAA2B,IAA7C,CACA,KAAKvI,YAAL,CAAoByI,YAAY,CAACzI,YAAb,EAA6B,IAAjD,CAEA,MAAO,KAAP,CACD,C,6DAEwC,IAAvB90C,KAAuB,MAAvBA,IAAuB,CAAjBu0C,aAAiB,MAAjBA,aAAiB,CACvC,GACEA,aAAa,GAAK,KAAKA,aAAvB,EACC,KAAKM,aAAL,EACC,KAAKA,aAAL,CAAmBz/C,WAAnB,CAA+BrO,IAA/B,GAAwCiZ,IAAI,CAAC5K,WAAL,CAAiBrO,IAH7D,CAIE,CACA,OACD,CAED,KAAK8tD,aAAL,CAAqB70C,IAArB,CACA,KAAKg1C,WAAL,CAAmB,KAAKD,WAAxB,CACD,C,oDAE6B,IAAjBR,cAAiB,OAAjBA,aAAiB,CAC5B,GAAIA,aAAa,GAAK,KAAKA,aAA3B,CAA0C,CACxC,OACD,CAED;AACD,C,gEAE4B,IAAVj5D,OAAU,OAAVA,MAAU,CAC3B,GAAI,KAAK05D,WAAL,CAAmB,KAAKD,WAAxB,EAAuC,CAAC,KAAKF,aAAjD,CAAgE,CAC9D,MAAO,MAAP,CACD,CAED,GAAMp+D,SAAQ,CAAG,KAAK2X,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6Bu1D,aAA7B,CAA2CliE,MAA3C,CAAjB,CAEA,GACE,KAAKu5D,aAAL,CAAmB12C,QAAnB,CAA8B1nB,QAA9B,EACA,KAAKo+D,aAAL,CAAmBz2C,QAAnB,CAA8B3nB,QAFhC,CAGE,CACA,MAAO,MAAP,CACD,CAED,MAAO,KAAP,CACD,C,wDAEe26C,M,CAAQ,CACtB,GAAI,KAAK4jB,WAAL,CAAmB,KAAKD,WAAxB,EAAuC,CAAC,KAAKF,aAAjD,CAAgE,CAC9D,OACD,CAED,KAAKC,YAAL,CAAoB1jB,MAApB,CACD,C,oDAEalgC,O,CAAS6M,gB,CAAkB,iBACvC,GACE,KAAKi3C,WAAL,CAAmB,KAAKD,WAAxB,EACA,CAAC,KAAKF,aADN,EAEA,CAAC,KAAKC,YAHR,CAIE,CACA,MAAO/2C,iBAAP,CACD,CAED,GAAM/Z,OAAM,CAAG,GAAIg5D,mBAAJ,CACb,KAAKnI,aADQ,CAEb,KAAKC,YAFQ,CAGb,KAAK1mD,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6ByB,EAHhB,CAIb,KAAK0E,MAAL,CAAY1E,EAJC,CAKb,KAAK6qD,aALQ,CAAf,CAQA,GAAMkJ,oBAAmB,CAAG,KAAKtI,yBAAL,EAA5B,CACA,GAAIuI,QAAO,CAAG,IAAd,CAEA,GAAMC,KAAI,CAAGF,mBAAmB,CAAClnD,IAApB,CACX,SAACm+C,OAAD,QAAaA,QAAO,CAAC5tD,MAAR,CAAesO,WAAf,GAA+B,MAAI,CAACy/C,aAAL,CAAmBz/C,WAA/D,EADW,CAAb,CAIA,GAAIuoD,IAAJ,CAAU,CACR,GAAMC,SAAQ,CAAG,KAAKxvD,MAAL,CAAYgF,WAAZ,CACdjF,UADc,GAEdoI,IAFc,CAET,SAACnI,MAAD,QACJA,OAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAAEvH,MAAM,CAAE62D,IAAI,CAAC72D,MAAf,CAA/B,CAAwD,KAAxD,CADI,EAFS,CAAjB,CAKA42D,OAAO,CAAG,CACR19C,IAAI,CAAE29C,IAAI,CAAC72D,MAAL,CAAYsO,WAAZ,CAAwBrO,IADtB,CAER82D,IAAI,CAAED,QAAQ,CAACl0D,EAFP,CAAV,CAID,CAVD,IAUO,IAAI+zD,mBAAmB,CAACvlE,MAApB,CAA6B,CAAjC,CAAoC,CACzC,GAAM4lE,WAAU,CAAGL,mBAAmB,CAAChwD,GAApB,GAA0B3G,MAA7C,CACA,GAAM82D,UAAQ,CAAG,KAAKxvD,MAAL,CAAYgF,WAAZ,CACdjF,UADc,GAEdoI,IAFc,CAET,SAACnI,MAAD,QACJA,OAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAAEvH,MAAM,CAAEg3D,UAAV,CAA/B,CAAuD,KAAvD,CADI,EAFS,CAAjB,CAKAJ,OAAO,CAAG,CACR19C,IAAI,CAAE89C,UAAU,CAAC1oD,WAAX,CAAuBrO,IADrB,CAER82D,IAAI,CAAED,SAAQ,CAACl0D,EAFP,CAAV,CAID,CAED,KAAKmrD,aAAL,CAAqB,IAArB,CACA,KAAKG,WAAL,CAAmB,CAAnB,CAEA,GAAI0I,OAAJ,CAAa,CACX,KAAKK,iBAAL,CAAuBL,OAAvB,EACD,CAED,6DAAW3/C,gBAAX,GAA6B/Z,MAA7B,GACD,C,gDAEiC,IAAvBgc,KAAuB,OAAvBA,IAAuB,CAAjBu0C,aAAiB,OAAjBA,aAAiB,CAChC,GACEA,aAAa,GAAK,KAAKA,aAAvB,EACC,KAAKM,aAAL,EACC,KAAKA,aAAL,CAAmBz/C,WAAnB,CAA+BrO,IAA/B,GAAwCiZ,IAAI,CAAC5K,WAAL,CAAiBrO,IAH7D,CAIE,CACA,OACD,CAED,GAAMqH,OAAM,CAAG,KAAKA,MAAL,CAAYgF,WAAZ,CACZjF,UADY,GAEZoI,IAFY,CAEP,SAACnI,MAAD,QACJA,OAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAAEvH,MAAM,CAAEkZ,IAAV,CAA/B,CAAiD,KAAjD,CADI,EAFO,CAAf,CAMA5R,MAAM,CAACC,WAAP,CAAmB,aAAnB,CAAkC,CAAEvH,MAAM,CAAEkZ,IAAV,CAAlC,EAEA,GAAI,KAAK60C,aAAT,CAAwB,CACtBzmD,MAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAAEvH,MAAM,CAAE,KAAK+tD,aAAf,CAA/B,EACD,CAED,GACE,KAAKyI,eAAL,EACA,KAAKA,eAAL,CAAqBloD,WAArB,CAAiCrO,IAAjC,GAA0CiZ,IAAI,CAAC5K,WAAL,CAAiBrO,IAF7D,CAGE,CACA,KAAK8tD,aAAL,CAAqB,KAAKyI,eAA1B,CACA,KAAKtI,WAAL,CAAmB,KAAKgJ,mBAAxB,CACA,KAAKX,UAAL,CAAkB,IAAlB,CACD,CAPD,IAOO,CACL,GAAI,CAAC,KAAKC,eAAV,CAA2B,CACzB,KAAKA,eAAL,CAAuB,KAAKzI,aAA5B,CACA,KAAKmJ,mBAAL,CAA2B,KAAKhJ,WAAhC,CACD,CAED,KAAKA,WAAL,CAAmB,CAAnB,CACA,KAAKqI,UAAL,CAAkB,CAChBr9C,IAAI,CAAEA,IAAI,CAAC5K,WAAL,CAAiBrO,IADP,CAEhB82D,IAAI,CAAEzvD,MAAM,CAAC1E,EAFG,CAAlB,CAIA,KAAKmrD,aAAL,CAAqB70C,IAArB,CACD,CAED,KAAK80C,YAAL,CAAoB,IAApB,CACD,C,8DAEkB5jD,O,CAAS6M,gB,CAAkB,CAC5C,GAAI,KAAKi3C,WAAL,EAAoB,KAAKD,WAAzB,EAAwC,KAAKF,aAAjD,CAAgE,CAC9D,6DAAW92C,gBAAX,GAA6B,IAA7B,GACD,CAED,MAAOA,iBAAP,CACD,C,4DAEiBs/C,U,CAAY,CAC5B,GAAMr9C,KAAI,CAAG,GAAIiF,aAAY,CAACo4C,UAAU,CAACr9C,IAAZ,CAAhB,EAAb,CAEA,GAAM49C,SAAQ,CAAG,KAAKxvD,MAAL,CAAYgF,WAAZ,CAAwBW,aAAxB,CAAsCspD,UAAU,CAACQ,IAAjD,CAAjB,CACA,GAAI,CAACD,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAAEvH,MAAM,CAAEkZ,IAAV,CAAjC,CAAL,CAAyD,CACvD,KAAM,IAAI7c,MAAJ,qCACyBy6D,QAAQ,CAACl0D,EADlC,qCAAN,CAGD,CAEDk0D,QAAQ,CAACvvD,WAAT,CAAqB,aAArB,CAAoC,CAAEvH,MAAM,CAAEkZ,IAAV,CAApC,EAEA,GAAI,KAAK60C,aAAT,CAAwB,CACtB+I,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAAEvH,MAAM,CAAE,KAAK+tD,aAAf,CAAjC,EACD,CAED,KAAKA,aAAL,CAAqB70C,IAArB,CACA,KAAKg1C,WAAL,CAAmB,CAAnB,CACD,C,kEAEoD,IAAjC/qC,aAAiC,OAAjCA,YAAiC,CAAnBF,QAAmB,OAAnBA,QAAmB,CAATC,KAAS,OAATA,KAAS,CACnD,GAAIA,KAAK,GAAK,CAAd,CAAiB,CACf,OACD,CAED,GAAI,CAACC,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,KAAK7b,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,OACD,CAED,GAAM2vD,eAAc,CAAGC,eAAe,CAACj0C,YAAD,CAAe,KAAKsqC,aAApB,CAAtC,CACA,GAAM8I,WAAU,CAAGY,cAAc,CAACZ,UAAlC,CAEA,GAAIA,UAAJ,CAAgB,CACd,KAAKU,iBAAL,CAAuBV,UAAvB,EACD,CAED,GAAIY,cAAc,CAACnJ,YAAnB,CAAiC,CAC/B,GAAMx5D,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B6U,cAAc,CAACnJ,YAA1C,CAAf,CAEA,GAAI,CAACx5D,MAAL,CAAa,CACX,KAAM,IAAI6H,MAAJ,+CACmC86D,cAAc,CAACnJ,YADlD,MAAN,CAGD,CAED,GAAI,CAAC,KAAKqJ,gBAAL,CAAsB,CAAE7iE,MAAM,CAANA,MAAF,CAAtB,CAAL,CAAwC,CACtC,KAAM,IAAI6H,MAAJ,0BAAN,CACD,CAED,KAAK2xD,YAAL,CAAoBmJ,cAAc,CAACnJ,YAAnC,CACD,CACF,C,6EAE2B,iBAC1B,GAAM90C,KAAI,CAAG,EAAb,CACA,KAAK5R,MAAL,CAAYgF,WAAZ,CAAwBjF,UAAxB,GAAqChN,OAArC,CAA6C,SAACiN,MAAD,CAAY,CACvD,GAAMgwD,aAAY,CAAGhwD,MAAM,CAACC,WAAP,CACnB,uBADmB,CAEnB,MAAI,CAAC8uD,YAFc,CAGnB,EAHmB,CAArB,CAMAiB,YAAY,CAACj9D,OAAb,CAAqB,SAACikB,KAAD,CAAW,CAC9B,GAAMzb,MAAK,CAAGqW,IAAI,CAACzJ,IAAL,CACZ,SAAC8nD,SAAD,QACEA,UAAS,CAACv3D,MAAV,CAAiBsO,WAAjB,CAA6BrO,IAA7B,GAAsCqe,KAAK,CAACte,MAAN,CAAasO,WAAb,CAAyBrO,IADjE,EADY,CAAd,CAKA,GAAI4C,KAAJ,CAAW,CACTA,KAAK,CAAC5E,MAAN,EAAgBqgB,KAAK,CAACrgB,MAAtB,CACD,CAFD,IAEO,CACLib,IAAI,CAAC3e,IAAL,CAAU,CACRyF,MAAM,CAAEse,KAAK,CAACte,MADN,CAER/B,MAAM,CAAEqgB,KAAK,CAACrgB,MAFN,CAAV,EAID,CACF,CAdD,EAeD,CAtBD,EAwBA,MAAOib,KAAP,CACD,C,iDAEa,CACZ,KAAKq9C,UAAL,CAAkB,IAAlB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACA,KAAKxI,YAAL,CAAoB,IAApB,CAEA,GAAI,KAAK1mD,MAAL,CAAYE,UAAZ,IAA4B,CAAC,KAAKumD,aAAtC,CAAqD,CACnD,KAAKG,WAAL,CAAmB,CAAnB,CACA,OACD,CAED,KAAKA,WAAL,GACD,C,qCAjUmCr3C,2B,EAoUtC,GAAMugD,gBAAe,CAAG,QAAlBA,gBAAkB,CAAC9vD,MAAD,CAASmmD,aAAT,CAA2B,CACjD,MAAOnmD,OAAM,CAAC8N,UAAP,CAAkB3F,IAAlB,CACL,SAAC4F,QAAD,QACEA,SAAQ,WAAY+gD,gDAApB,EACA/gD,QAAQ,CAACo4C,aAAT,GAA2BA,aAF7B,EADK,CAAP,CAKD,CAND,CAQe2I,kHAAf,E;;GCjVMoB,0C,gOACGv0C,Q,CAAU,CACf,KAAKA,QAAL,CAAgBA,QAAhB,CACA,MAAO,KAAP,CACD,C,wEAEuB9hB,I,CAAM2a,a,CAAe,CAC3C,MAAO3a,KAAI,CAACiG,OAAL,CACJC,UADI,GAEJtE,MAFI,CAEG,SAAAuE,MAAM,QAAI,CAACA,MAAM,CAACE,UAAP,EAAL,EAFT,EAGJzE,MAHI,CAGG,SAAAuE,MAAM,QAAIA,OAAM,CAACC,WAAP,CAAmB,cAAnB,CAAJ,EAHT,EAIJxE,MAJI,CAIG,SAAA8nB,MAAM,CAAI,CAChB;AACA,MAAOA,OAAM,CAACtjB,WAAP,CACL,iBADK,CAEL,CAAEkqC,cAAc,CAAE31B,aAAa,CAACG,cAAhC,CAFK,CAGL,IAHK,CAAP,CAKD,CAXI,EAYJlZ,MAZI,CAYG,SAAA8nB,MAAM,CAAI,CAChB,GAAMD,WAAU,CAAGC,MAAM,CAACtjB,WAAP,CAAmB,eAAnB,CAAoC,IAApC,CAA0C,EAA1C,CAAnB,CAEA,MAAOqjB,WAAU,CAACx5B,MAAX,GAAsB,CAA7B,CACD,CAhBI,CAAP,CAiBD,C,wEAEuB+P,I,CAAM3M,M,CAAQ,CACpC,GAAIijE,aAAY,CAAG,EAAnB,CAEAt2D,IAAI,CAACiG,OAAL,CAAaC,UAAb,GAA0BhN,OAA1B,CAAkC,SAAAiN,MAAM,CAAI,CAC1C,GAAMowD,UAAS,CAAGpwD,MAAM,CACrBC,WADe,CACH,oBADG,CACmB,IADnB,CACyB,EADzB,EAEfxE,MAFe,CAER,SAAAoqD,QAAQ,QAAIA,SAAQ,CAACkK,gBAAT,CAA0B,CAAE7iE,MAAM,CAANA,MAAF,CAA1B,CAAJ,EAFA,CAAlB,CAIA,GAAIkjE,SAAS,CAACtmE,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,OACD,CAEDqmE,YAAY,wDAAOA,YAAP,+CAAwBC,SAAxB,EAAZ,CACD,CAVD,EAYA,MAAOD,aAAP,CACD,C,gEAEmBrnB,W,CAAa57C,M,CAAQ,gBACvC,GAAMmjE,mBAAkB,CAAG,EAA3B,CAEA,GAAInjE,MAAM,CAAC+0B,MAAP,CAAcovB,OAAd,CAAsBvI,WAAtB,CAAJ,CAAwC,CACtC,MAAO,EAAP,CACD,CAED,KAAKntB,QAAL,CAAcrY,KAAd,CACG4f,QADH,GAEGznB,MAFH,CAEU,SAAA5B,IAAI,QAAIA,KAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAJ,EAFd,EAGG/1C,OAHH,CAGW,SAAA8G,IAAI,CAAI,CACfA,IAAI,CAACiG,OAAL,CAAaC,UAAb,GAA0BhN,OAA1B,CAAkC,SAAAiN,MAAM,CAAI,CAC1C,GAAMowD,UAAS,CAAGpwD,MAAM,CAACC,WAAP,CAAmB,oBAAnB,CAAyC,IAAzC,CAA+C,EAA/C,CAAlB,CAEA,GAAImwD,SAAS,CAACtmE,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,OACD,CAED,GAAIyR,MAAK,CAAG80D,kBAAkB,CAACloD,IAAnB,CAAwB,SAAAmoD,MAAM,QAAIA,OAAM,CAACz2D,IAAP,GAAgBA,IAApB,EAA9B,CAAZ,CAEA,GAAI0B,KAAJ,CAAW,CACTA,KAAK,CAAC60D,SAAN,wDAAsB70D,KAAK,CAAC60D,SAA5B,+CAA0CA,SAA1C,GACD,CAFD,IAEO,CACLC,kBAAkB,CAACp9D,IAAnB,CAAwB,CACtB4G,IAAI,CAAJA,IADsB,CAEtBu2D,SAAS,CAAEA,SAFW,CAGtB/nE,QAAQ,CAAE,KAAI,CAAC6E,MAAL,CACPvB,cADO,GAEPC,UAFO,CAEIiO,IAAI,CAAClO,cAAL,EAFJ,CAHY,CAMtB4kE,aAAa,CAAEC,eAAe,CAAC,KAAI,CAACtjE,MAAN,CAAc2M,IAAd,CANR,CAAxB,EAQD,CACF,CArBD,EAsBD,CA1BH,EA4BAw2D,kBAAkB,CAAChvD,IAAnB,CAAwB,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CAChC,GAAID,CAAC,CAAC9B,QAAF,CAAa+B,CAAC,CAAC/B,QAAnB,CAA6B,CAC3B,MAAO,EAAP,CACD,CAED,GAAI8B,CAAC,CAAC9B,QAAF,CAAa+B,CAAC,CAAC/B,QAAnB,CAA6B,CAC3B,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAVD,EAYA,MAAOgoE,mBAAP,CACD,C,oCAGH,GAAMG,gBAAe,CAAG,QAAlBA,gBAAkB,CAACrmE,CAAD,CAAIC,CAAJ,CAAU,CAChC,GAAM/B,SAAQ,CAAG8B,CAAC,CAACwB,cAAF,GAAmBC,UAAnB,CAA8BxB,CAAC,CAACuB,cAAF,EAA9B,CAAjB,CACA,GAAM8kE,UAAS,CAAGtmE,CAAC,CAAC2R,QAAF,CAAWqD,WAAX,EAAlB,CACA,GAAMuxD,UAAS,CAAGtmE,CAAC,CAAC0R,QAAF,CAAWqD,WAAX,EAAlB,CAEA,GAAI,CAACsxD,SAAD,EAAc,CAACC,SAAnB,CAA8B,CAC5B,MAAO,EAAP,CACD,CAED,GAAMC,UAAS,CAAGxmE,CAAC,CAACwB,cAAF,GAAmBhB,GAAnB,CAAuB8lE,SAAS,CAAChxD,cAAV,EAAvB,CAAlB,CACA,GAAMmxD,UAAS,CAAGxmE,CAAC,CAACuB,cAAF,GAAmBhB,GAAnB,CAAuB+lE,SAAS,CAACjxD,cAAV,EAAvB,CAAlB,CAEA,GAAMoxD,YAAW,CAAGF,SAAS,CAAC/kE,UAAV,CAAqBglE,SAArB,CAApB,CAEA,MAAOC,YAAW,CAAGxoE,QAArB,CACD,CAfD,CAiBe6nE,yGAAf,E;;ACtGA,GAAMY,kBAAiB,CAAG,QAApBA,kBAAoB,CAACt+C,OAAD,CAAUtlB,MAAV,CAAkBo5D,OAAlB,CAA2ByK,gBAA3B,CAAgD,CACxE,GAAIA,gBAAJ,CAAsB,CACpB,GAAM/oD,QAAO,CAAG,CACd,CACEnM,KAAK,CACH,kHAFJ,CADc,CAKd,CACEyS,MAAM,YADR,CAEEzS,KAAK,YAAMhT,IAAI,CAACuC,KAAL,CAAW2lE,gBAAgB,CAACC,UAA5B,CAAN,UAFP,CALc,CASd,CACE1iD,MAAM,CAAE,mBADV,CAEEzS,KAAK,WAAKk1D,gBAAgB,CAACE,cAAtB,QAFP,CAIA;;;;;;;;;;;QAbc,CAAhB,CA2BA,GAAIF,gBAAgB,CAAC7/C,IAArB,CAA2B,CACzBlJ,OAAO,CAAC/U,IAAR,CAAa,CACX4I,KAAK,CAAEk1D,gBAAgB,CAAC7/C,IADb,CAAb,EAGD,CAED,MAAOlJ,QAAP,CACD,CAED,MAAO,EAAP,CACD,CAvCD,C,GAyCMkpD,0C,odACK,iBAC8B,KAAK/hE,KADnC,CACCqjB,OADD,aACCA,OADD,CACUtlB,MADV,aACUA,MADV,CACkBo5D,OADlB,aACkBA,OADlB,CAGP,MACE,6DACE,8BAAC,aAAD,iBAAwBp5D,MAAM,CAACyL,IAA/B,CADF,CAEGm4D,iBAAiB,CAACt+C,OAAD,CAAUtlB,MAAV,CAAkBo5D,OAAlB,CAAjB,CAA4C3yD,GAA5C,CAAgD6wD,6BAAhD,CAFH,CADF,CAMD,C,kCAVgCx0D,eAAK,CAACy0D,S,EAazC,GAAMD,8BAAQ,CAAG,QAAXA,SAAW,MAAoB56D,CAApB,CAA0B,IAAvB0kB,OAAuB,MAAvBA,MAAuB,CAAfzS,KAAe,MAAfA,KAAe,CACzC,GAAIA,KAAK,CAAC0lD,OAAV,CAAmB,CACjB1lD,KAAK,CAAGA,KAAK,CAAC0lD,OAAN,CAAc,QAAd,CAAwB,IAAxB,CAAR,CACD,CAED,MACE,+BAAC,YAAD,EAAc,GAAG,6BAAuBjzC,MAAvB,aAAiC1kB,CAAjC,CAAjB,EACG0kB,MAAM,EAAI,8BAAC,kBAAD,MAAqBA,MAArB,MADb,CAEGzS,KAAK,EAAI,8BAAC,YAAD,MAAeA,KAAf,CAFZ,CADF,CAMD,CAXD,CAaeq1D,8GAAf,E;;8NCvEA,GAAMvL,oCAAgB,CAAG/3D,wDAAM,CAAC+2D,eAAD,CAAT,qCAClB7G,mBADkB,CAEhB,SAAA3uD,KAAK,CAAI,IACD02D,SADC,CACoB12D,KADpB,CACD02D,QADC,CACS34D,MADT,CACoBiC,KADpB,CACSjC,MADT,CAGT,GAAI24D,QAAQ,CAACa,YAAT,GAA0Bx5D,MAAM,CAACoO,EAArC,CAAyC,CACvC,MAAO,sDAAP,CACD,CAFD,IAEO,IACLuqD,QAAQ,CAACa,YAAT,GAA0B,IAA1B,EACAb,QAAQ,CAACa,YAAT,GAA0Bx5D,MAAM,CAACoO,EAF5B,CAGL,CACA,MAAO,wDAAP,CACD,CACF,CAbiB,CAAtB,C,GAiBM61D,sC,4dACc,iBACsB,KAAKhiE,KAD3B,CACRu9C,OADQ,aACRA,OADQ,CACCmZ,QADD,aACCA,QADD,CACW34D,MADX,aACWA,MADX,CAGhBw/C,OAAO,CAAC8Y,WAAR,CAAoB,iBAApB,CAAuC,CACrC3rD,IAAI,CAAEgsD,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADG,CAErCysD,OAAO,CAAET,QAAQ,CAACY,aAFmB,CAGrCv5D,MAAM,CAANA,MAHqC,CAAvC,EAKD,C,2DAEkB,kBACqB,KAAKiC,KAD1B,CACTu9C,OADS,cACTA,OADS,CACAmZ,QADA,cACAA,QADA,CACU34D,MADV,cACUA,MADV,CAGjBw/C,OAAO,CAAC8Y,WAAR,CAAoB,kBAApB,CAAwC,CACtC3rD,IAAI,CAAEgsD,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADI,CAEtCysD,OAAO,CAAET,QAAQ,CAACY,aAFoB,CAGtCv5D,MAAM,CAANA,MAHsC,CAAxC,EAKD,C,qDAEe,kBAC2C,KAAKiC,KADhD,CACNjC,MADM,cACNA,MADM,CACE24D,QADF,cACEA,QADF,oCACYuL,eADZ,CACYA,eADZ,gCAC8B,UAAM,CAAE,CADtC,uBAGd,GAAIvL,QAAQ,CAACa,YAAT,GAA0B,IAA1B,EAAkCb,QAAQ,CAACa,YAAT,GAA0Bx5D,MAAM,CAACoO,EAAvE,CAA2E,CACzEuqD,QAAQ,CAACwL,eAAT,CAAyBnkE,MAAM,CAACoO,EAAhC,EACD,CAFD,IAEO,IAAIuqD,QAAQ,CAACa,YAAT,EAAyBb,QAAQ,CAACa,YAAT,GAA0Bx5D,MAAM,CAACoO,EAA9D,CAAkE,CACvEuqD,QAAQ,CAACwL,eAAT,CAAyB,IAAzB,EACD,CAED,KAAKvL,WAAL,GACAsL,eAAe,GAChB,C,uCAEQ,kBACuC,KAAKjiE,KAD5C,CACCjC,MADD,cACCA,MADD,CACS24D,QADT,cACSA,QADT,CACmBxB,eADnB,cACmBA,eADnB,CAGP,MACE,+BAAC,mCAAD,EACE,QAAQ,CAAEwB,QADZ,CAEE,MAAM,CAAE34D,MAFV,CAGE,IAAI,CAAE24D,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IAHpC,CAIE,aAAa,CAAE,KAAKy3D,aAAL,CAAmB9gE,IAAnB,CAAwB,IAAxB,CAJjB,CAKE,eAAe,CAAE,KAAKq2D,gBAAL,CAAsBr2D,IAAtB,CAA2B,IAA3B,CALnB,CAME,cAAc,CAAE,KAAKs2D,eAAL,CAAqBt2D,IAArB,CAA0B,IAA1B,CANlB,CAOE,KAAK,CAAEq1D,QAAQ,CAACY,aAPlB,CAQE,MAAM,CAAE,IARV,CASE,IAAI,GATN,CAUE,eAAe,CAAEpC,eAVnB,CAWE,wBAAwB,CACtB,8BAAC,gCAAD,EACE,OAAO,CAAEwB,QAAQ,CAAC7lD,MAAT,CAAgBgF,WAAhB,CAA4BnL,IADvC,CAEE,MAAM,CAAE3M,MAFV,CAGE,OAAO,CAAE24D,QAAQ,CAACY,aAHpB,EAZJ,EADF,CAqBD,C,gCA1D8Bz2D,eAAK,CAACy0D,S,EA6DxB0M,wGAAf,E;;ugBCtEA,GAAM7N,+BAAU,CAAG11D,wDAAM,CAACwyD,aAAD,CAAT,sCAAhB,CAMA,GAAMpC,8BAAS,CAAGpwD,gDAAM,CAACC,GAAV,uCAAf,C,GAMM0jE,wC,mHACJ,6BAAYpiE,KAAZ,CAAmB,+EACjB,yIAAMA,KAAN,GAEA,MAAKqiE,oBAAL,CAA4B,GAAItB,4BAAJ,EAA5B,CAHiB,aAIlB,C,gHAEcpwD,O,CAAS4sD,iB,CAAmBhgB,O,CAASl6B,O,CAAS3Y,I,CAAM4lD,I,CAAM,iBACvE,MAAO3/C,QAAO,CAACnM,GAAR,CAAY,SAACqM,MAAD,CAASpW,CAAT,CAAe,CAChC,GAAIoW,MAAM,WAAY8uD,+BAAtB,CAA+C,CAC7C,MACE,wBAAC,8BAAD,EACE,GAAG,mCAA6BllE,CAA7B,CADL,CAEE,MAAM,CAAEiQ,IAFV,CAGE,QAAQ,CAAEmG,MAHZ,CAIE,OAAO,CAAE0sC,OAJX,CAKE,eAAe,CAAC,OALlB,EADF,CASD,CACD,MACE,wBAAC,2BAAD,gBACE,GAAG,2BAAqB1sC,MAAM,CAAC1E,EAA5B,CADL,CAEE,OAAO,CAAEoxC,OAFX,CAGE,MAAM,CAAE1sC,MAHV,CAIE,MAAM,CAAEnG,IAJV,CAKE,IAAI,CAAE2Y,OALR,CAME,eAAe,CACb,CAACk6C,iBAAiB,CAACW,6BAAlB,CAAgDrtD,MAAhD,CAAwDnG,IAAxD,CAAD,CACI,MAAI,CAAC43D,UAAL,CAAgBzxD,MAAhB,CAAwBwS,OAAxB,CAAiC3Y,IAAjC,CAAuC6yC,OAAvC,CADJ,CAEI,MAAI,CAACglB,YAAL,CAAkB1xD,MAAlB,CAA0BwS,OAA1B,CAAmC3Y,IAAnC,CAAyC6yC,OAAzC,CATR,EAWM+S,IAXN,EADF,CAeD,CA3BM,CAAP,CA4BD,C,8CAEUz/C,M,CAAQnG,I,CAAM3M,M,CAAQw/C,O,CAAS,IAChCggB,kBADgC,CACVhgB,OAAO,CAACyB,QADE,CAChCue,iBADgC,CAGxC,MAAO,WAAM,CACXA,iBAAiB,CAACiF,gBAAlB,CAAmC93D,IAAnC,CAAyCmG,MAAzC,EACA0sD,iBAAiB,CAACkF,YAAlB,CAA+B/3D,IAA/B,CAAqC3M,MAArC,CAA6C8S,MAA7C,EAEA0sC,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCmG,MAArC,EACA0sC,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CAND,CAOD,C,kDAEYmG,M,CAAQnG,I,CAAM3M,M,CAAQw/C,O,CAAS,IAClCggB,kBADkC,CACZhgB,OAAO,CAACyB,QADI,CAClCue,iBADkC,CAG1C,MAAO,WAAM,CACXA,iBAAiB,CAACiF,gBAAlB,CAAmC93D,IAAnC,CAAyCmG,MAAzC,EACA0sC,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCmG,MAArC,EACA0sC,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CAJD,CAKD,C,uCAEQ,iBAC4B,KAAK1K,KADjC,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,CACmB+S,IADnB,uFAEDjtC,QAFC,CAEW,KAAKrjB,KAFhB,CAEDqjB,OAFC,IAGCk6C,kBAHD,CAGuBhgB,OAAO,CAACyB,QAH/B,CAGCue,iBAHD,CAKP,GAAI,CAACl6C,OAAL,CAAc,CACZA,OAAO,CAAGk6B,OAAO,CAAC2D,eAAR,EAAV,CACD,CAED,GAAI,CAAC79B,OAAD,EAAYk6B,OAAO,CAAC/wB,QAAR,CAAiBrY,KAAjB,CAAuBuuD,UAAvB,CAAkCh4D,IAAlC,CAAwC2Y,OAAxC,CAAhB,CAAkE,CAChE,MAAO,KAAP,CACD,CAED,GAAM1S,QAAO,wDACR0S,OAAO,CAAC1S,OAAR,CAAgBC,UAAhB,GAA6BtE,MAA7B,CACD,SAAAuE,MAAM,QACJ0sD,kBAAiB,CAAClpC,OAAlB,CAA0BhR,OAA1B,CAAmC3Y,IAAnC,CAAyCmG,MAAzC,GACAA,MAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,CACjCuS,OAAO,CAAPA,OADiC,CAEjCtlB,MAAM,CAAE2M,IAFyB,CAAnC,EAGGjE,MAHH,CAGY,CALR,EADL,CADQ,+CASR,KAAK47D,oBAAL,CACAM,uBADA,CACwBt/C,OADxB,CACiC3Y,IADjC,EAEAwH,IAFA,CAEK,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAACs8D,aAAF,CAAgBz2C,QAAhB,CAA2B5lB,CAAC,CAACq8D,aAAF,CAAgBz2C,QAA/C,CAAyD,CACvD,MAAO,EAAP,CACD,CAED,GAAI7lB,CAAC,CAACs8D,aAAF,CAAgBz2C,QAAhB,CAA2B5lB,CAAC,CAACq8D,aAAF,CAAgBz2C,QAA/C,CAAyD,CACvD,MAAO,CAAC,CAAR,CACD,CAED,GACE7lB,CAAC,CAACs8D,aAAF,CAAgBv2C,cAAhB,CAA+BlJ,WAA/B,CAA2CrO,IAA3C,CACAvO,CAAC,CAACq8D,aAAF,CAAgBv2C,cAAhB,CAA+BlJ,WAA/B,CAA2CrO,IAF7C,CAGE,CACA,MAAO,EAAP,CACD,CAED,GACExO,CAAC,CAACs8D,aAAF,CAAgBv2C,cAAhB,CAA+BlJ,WAA/B,CAA2CrO,IAA3C,CACAvO,CAAC,CAACq8D,aAAF,CAAgBv2C,cAAhB,CAA+BlJ,WAA/B,CAA2CrO,IAF7C,CAGE,CACA,MAAO,CAAC,CAAR,CACD,CAED,GACExO,CAAC,CAACs8D,aAAF,CAAgBnC,cAAhB,GAAmCl6D,CAAC,CAACq8D,aAAF,CAAgBnC,cAAhB,EADrC,CAEE,CACA,MAAO,EAAP,CACD,CAED,GACEn6D,CAAC,CAACs8D,aAAF,CAAgBnC,cAAhB,GAAmCl6D,CAAC,CAACq8D,aAAF,CAAgBnC,cAAhB,EADrC,CAEE,CACA,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAtCA,CATQ,EAAb,CAkDA,GAAIxkD,OAAO,CAAChW,MAAR,GAAmB,CAAvB,CAA0B,CACxB,MAAO,KAAP,CACD,CAED,GAAM2/C,MAAK,CAAG,KAAKsoB,cAAL,CACZjyD,OADY,CAEZ4sD,iBAFY,CAGZhgB,OAHY,CAIZl6B,OAJY,CAKZ3Y,IALY,CAMZ4lD,IANY,CAAd,CASA,MACE,+CACE,uBAAC,aAAD,MACG5lD,IAAI,CAAClB,IADR,KACc,uBAAC,YAAD,0BADd,CADF,CAIE,uBAAC,6BAAD,MAAY8wC,KAAZ,CAJF,CADF,CAQD,C,iCAhJ+Bz5C,kB,EAmJnBuhE,2GAAf,E;;GCvKMS,8C,oQACkBzhD,M,CAAQrjB,M,CAAQ,uBACb,KAAK+kE,WAAL,CACrB1hD,MAAM,CAACxf,QADc,CAErBwf,MAAM,CAACnU,QAFc,CAGrBlP,MAAM,CAACulB,WAAP,EAHqB,CAIrBvlB,MAAM,CAACyW,WAAP,EAJqB,CAKrB4M,MAAM,CAAC2hD,2BAAP,EALqB,CADa,CAC5BlB,UAD4B,mBAC5BA,UAD4B,CASpC,MAAOA,WAAU,CAAG,CAApB,CACD,C,gDAEWzgD,M,CAAQrjB,M,CAAQ,wBACc,KAAK+kE,WAAL,CACtC1hD,MAAM,CAACxf,QAD+B,CAEtCwf,MAAM,CAACnU,QAF+B,CAGtClP,MAAM,CAACulB,WAAP,GAAqBlZ,GAArB,CAAyBrM,MAAM,CAACyW,WAAP,EAAzB,CAHsC,CAItCzW,MAAM,CAACyW,WAAP,EAJsC,CAKtC4M,MAAM,CAAC2hD,2BAAP,EALsC,CADd,CAClBC,kBADkB,oBAClBA,kBADkB,CACK1S,IADL,+FAS1BlvC,MAAM,CAACxf,QAAP,CAAkBwf,MAAM,CAACxf,QAAP,CACfpG,GADe,CACX4lB,MAAM,CAACnU,QADI,EAEfzR,GAFe,CAGdwnE,kBAAkB,CAAC//D,cAAnB,CACE,IAAMme,MAAM,CAAC2hD,2BAAP,EADR,CAHc,CAAlB,CAQA3hD,MAAM,CAACnU,QAAP,CAAkBmU,MAAM,CAACnU,QAAP,CAAgBzR,GAAhB,CAChBwnE,kBAAkB,CAAC//D,cAAnB,CAAkCme,MAAM,CAAC2hD,2BAAP,EAAlC,CADgB,CAAlB,CAGD,C,0DAEgB3hD,M,CAAQ3a,M,CAAQ,CAC/B,GAAMw8D,qBAAoB,CAAG7hD,MAAM,CAAC+1C,OAAP,CAAe8L,oBAA5C,CAEA,GAAIh2D,SAAQ,CAAGxG,MAAM,CAACq7D,cAAP,CAAwBt5D,WAAW,CAACxB,WAAZ,EAAvC,CAEA,GAAIiG,QAAQ,CAAGg2D,oBAAf,CAAqC,CACnCh2D,QAAQ,CAAGg2D,oBAAX,CACD,CAED,GAAIC,cAAa,CAAGj2D,QAAQ,CAAGg2D,oBAA/B,CACA,GAAInhD,MAAK,CAAG,EAAZ,CAEA,GACEpoB,IAAI,CAACuC,KAAL,CAAWwK,MAAM,CAACo7D,UAAlB,EAAgCzgD,MAAM,CAAC+hD,WAAvC,CACA/hD,MAAM,CAAC+1C,OAAP,CAAeiM,UAFjB,CAGE,CACAF,aAAa,CAAG,CAAhB,CACAphD,KAAK,CAAG,kCAAR,CACD,CAED,GACEpoB,IAAI,CAACuC,KAAL,CAAWwK,MAAM,CAACo7D,UAAlB,EAAgCzgD,MAAM,CAAC+hD,WAAvC,CACA/hD,MAAM,CAAC+1C,OAAP,CAAekM,WAFjB,CAGE,CACAH,aAAa,CAAG,CAAhB,CACAphD,KAAK,CAAG,cAAR,CACD,CAED,OAAO,4CACFrb,MADL,EAEEqb,KAAK,CAALA,KAFF,CAGEggD,cAAc,CAAEpoE,IAAI,CAAC6D,KAAL,CACdkJ,MAAM,CAACq7D,cAAP,CAAwBt5D,WAAW,CAACxB,WAAZ,EADV,CAHlB,CAMEk8D,aAAa,CAAbA,aANF,GAQD,C,oHAE6C9hD,M,CAAQrjB,M,CAAQ,CAC5D,GAAM0I,OAAM,CAAG,KAAKq8D,WAAL,CACb1hD,MAAM,CAACxf,QADM,CAEbwf,MAAM,CAACnU,QAFM,CAGblP,MAAM,CAACulB,WAAP,GAAqBlZ,GAArB,CAAyBrM,MAAM,CAACyW,WAAP,EAAzB,CAHa,CAIbzW,MAAM,CAACyW,WAAP,EAJa,CAKb4M,MAAM,CAAC2hD,2BAAP,EALa,CAAf,CAQA,MAAO,MAAKO,gBAAL,CAAsBliD,MAAtB,CAA8B3a,MAA9B,CAAP,CACD,C,0FAEgC2a,M,CAAQrjB,M,CAAQ,CAC/C,GAAM0I,OAAM,CAAG,KAAKq8D,WAAL,CACb1hD,MAAM,CAACxf,QADM,CAEbwf,MAAM,CAACnU,QAFM,CAGblP,MAAM,CAACulB,WAAP,EAHa,CAIbvlB,MAAM,CAACyW,WAAP,EAJa,CAKb4M,MAAM,CAAC2hD,2BAAP,EALa,CAAf,CAQA,MAAO,MAAKO,gBAAL,CAAsBliD,MAAtB,CAA8B3a,MAA9B,CAAP,CACD,C,gDAGC2c,e,CACAmgD,e,CACAvoB,c,CACAwoB,c,CACA,CACA,GAAMC,KAAI,CAAGzoB,cAAc,CAAC5wC,GAAf,CAAmBgZ,eAAnB,CAAb,CACA,GAAMsgD,EAAC,CAAGhqE,IAAI,CAACuE,KAAL,CAAWwlE,IAAI,CAAChqE,CAAhB,CAAmBgqE,IAAI,CAAClqE,CAAxB,CAAV,CACA,GAAMoqE,eAAc,CAAG,GAAI/gE,MAAK,CAACghE,OAAV,GAAoBC,aAApB,CAAkC,CAACH,CAAnC,CAAvB,CACA,GAAMtoB,kBAAiB,CAAGqoB,IAAI,CAACl5D,YAAL,CAAkBo5D,cAAlB,CAA1B,CACA,GAAMG,mBAAkB,CAAGP,eAAe,CACvCn5D,GADwB,CACpBo5D,cADoB,EAExBj5D,YAFwB,CAEXo5D,cAFW,CAA3B,CAIA,MAAO,CACLvoB,iBAAiB,CAAjBA,iBADK,CAEL0oB,kBAAkB,CAAlBA,kBAFK,CAGLJ,CAAC,CAADA,CAHK,CAAP,CAKD,C,gDAGCtgD,e,CACAmgD,e,CACAvoB,c,CACAwoB,c,CACAO,mB,CACA,CACA,GAAIA,mBAAmB,EAAI,CAA3B,CAA8B,CAC5B,KAAM,IAAIn+D,MAAJ,CAAU,6BAAV,CAAN,CACD,CAED,GAAIwd,eAAe,CAACnd,MAAhB,CAAuB+0C,cAAvB,CAAJ,CAA4C,CAC1C,KAAM,IAAIp1C,MAAJ,CAAU,8CAAV,CAAN,CACD,CAPD,sBASqD,KAAKo+D,WAAL,CACnD5gD,eADmD,CAEnDmgD,eAFmD,CAGnDvoB,cAHmD,CAInDwoB,cAJmD,CATrD,CASQpoB,iBATR,mBASQA,iBATR,CAS2B0oB,kBAT3B,mBAS2BA,kBAT3B,CAS+CJ,CAT/C,mBAS+CA,CAT/C,CAgBA,GAAMnqE,EAAC,CAAG6hD,iBAAiB,CAAC7hD,CAA5B,CAEA,GAAIkN,OAAM,CAAG,IAAb,CAEA,GACE/M,IAAI,CAACE,GAAL,CAASkqE,kBAAkB,CAACrqE,CAA5B,CAA+B,CAA/B,GAAqCsqE,mBAAmB,CAAGxqE,CAA3D,EACAG,IAAI,CAACE,GAAL,CAAS,EAAT,CAAa,CAAC,CAAd,CAFF,CAGE,CACA,GAAMioE,WAAU,CACd,CAAC,CAACiC,kBAAkB,CAACvqE,CAApB,CACCG,IAAI,CAACC,IAAL,CACED,IAAI,CAACE,GAAL,CAASkqE,kBAAkB,CAACvqE,CAA5B,CAA+B,CAA/B,EAAoC,EAAIwqE,mBAAJ,CAA0BxqE,CADhE,CADF,EAIAwqE,mBALF,CAOAt9D,MAAM,CAAG,CACPw9D,iBAAiB,CAAEP,CADZ,CAEP7B,UAAU,CAAVA,UAFO,CAAT,CAID,CAfD,IAeO,IAAIiC,kBAAkB,CAACrqE,CAAnB,CAAuB,CAA3B,CAA8B,CACnC,GAAMyqE,EAAC,CAAG,KAAKC,QAAL,CACR/oB,iBAAiB,CAAC7hD,CADV,CAERuqE,kBAAkB,CAACvqE,CAFX,CAGRuqE,kBAAkB,CAACrqE,CAHX,CAIRsqE,mBAJQ,CAAV,CAOA,GAAMlC,YAAU,CACd,EAAE,EAAIiC,kBAAkB,CAACrqE,CAAzB,GAA+BsqE,mBAAmB,CAAGrqE,IAAI,CAAC4D,GAAL,CAAS4mE,CAAT,CAArD,CADF,CAGAz9D,MAAM,CAAG,CACPw9D,iBAAiB,CAAEC,CAAC,CAAGR,CADhB,CAEP7B,UAAU,CAAVA,WAFO,CAAT,CAID,CAfM,IAeA,CACL,GAAMqC,EAAC,CAAG,KAAKC,QAAL,CACR/oB,iBAAiB,CAAC7hD,CADV,CAERuqE,kBAAkB,CAACvqE,CAFX,CAGR,CAACuqE,kBAAkB,CAACrqE,CAHZ,CAIRsqE,mBAJQ,CAAV,CAOA,GAAMlC,aAAU,CACb,EAAIiC,kBAAkB,CAACrqE,CAAxB,EAA8BsqE,mBAAmB,CAAGrqE,IAAI,CAAC4D,GAAL,CAAS4mE,CAAT,CAApD,CADF,CAGAz9D,MAAM,CAAG,CACPw9D,iBAAiB,CAAE,EAAIvqE,IAAI,CAAC2D,EAAT,CAAc6mE,CAAd,CAAkBR,CAD9B,CAEP7B,UAAU,CAAVA,YAFO,CAAT,CAID,CAED,GAAMC,eAAc,CAAGpoE,IAAI,CAACC,IAAL,CACrBD,IAAI,CAACE,GAAL,CACE,CAACkqE,kBAAkB,CAACvqE,CAApB,CACEiqE,cAAc,CAACjqE,CADjB,CAEEwqE,mBAAmB,CACjBt9D,MAAM,CAACo7D,UADT,CAEEnoE,IAAI,CAAC0D,GAAL,CAASqJ,MAAM,CAACw9D,iBAAhB,CALN,CAME,CANF,EAQEvqE,IAAI,CAACE,GAAL,CACE,CAACkqE,kBAAkB,CAACrqE,CAApB,CACE+pE,cAAc,CAAC/pE,CADjB,CAEEsqE,mBAAmB,CACjBt9D,MAAM,CAACo7D,UADT,CAEEnoE,IAAI,CAAC4D,GAAL,CAASmJ,MAAM,CAACw9D,iBAAhB,CALN,CAME,CANF,CATmB,CAAvB,CAmBA,GAAMjB,mBAAkB,CAAG,GAAIj6D,aAAJ,CACzBrP,IAAI,CAAC0D,GAAL,CAASqJ,MAAM,CAACw9D,iBAAhB,CADyB,CAEzBvqE,IAAI,CAAC4D,GAAL,CAASmJ,MAAM,CAACw9D,iBAAhB,CAFyB,EAGzBj/D,SAHyB,EAA3B,CAKA,GACEiS,MAAM,CAACE,KAAP,CAAa1Q,MAAM,CAACw9D,iBAApB,GACAhtD,MAAM,CAACE,KAAP,CAAa1Q,MAAM,CAACo7D,UAApB,CADA,EAEA5qD,MAAM,CAACE,KAAP,CAAa6rD,kBAAb,CAFA,EAGA/rD,MAAM,CAACE,KAAP,CAAa2qD,cAAb,CAJF,CAKE,CACA,KAAM,IAAIl8D,MAAJ,qDACyCwd,eAAe,CAACghD,QAAhB,EADzC,eACyEb,eAAe,CAACa,QAAhB,EADzE,eACyGppB,cAAc,CAACopB,QAAf,EADzG,eACwIZ,cAAc,CAACY,QAAf,EADxI,cACsKL,mBADtK,MAAN,CAGD,CAED,GAAMvb,eAAc,CAAGplC,eAAe,CACnC5nB,GADoB,CAChB+nE,eAAe,CAACtgE,cAAhB,CAA+BwD,MAAM,CAACo7D,UAAtC,CADgB,EAEpBrmE,GAFoB,CAGnBwnE,kBAAkB,CAAC//D,cAAnB,CACE,IAAM8gE,mBAAN,CAA4BrqE,IAAI,CAACE,GAAL,CAAS6M,MAAM,CAACo7D,UAAhB,CAA4B,CAA5B,CAD9B,CAHmB,CAAvB,CAQA,OAAO,4CAAKp7D,MAAZ,EAAoBu8D,kBAAkB,CAAlBA,kBAApB,CAAwClB,cAAc,CAAdA,cAAxC,CAAwDtZ,cAAc,CAAdA,cAAxD,GACD,C,0CAEQjvD,C,CAAG8qE,E,CAAIC,E,CAAItpE,C,CAAG,CACrB,GAAIqpE,EAAE,CAAGC,EAAL,CAAWtpE,CAAC,CAAGzB,CAAL,EAAW,EAAIG,IAAI,CAACE,GAAL,CAAS0qE,EAAT,CAAa,CAAb,CAAJ,CAAsB,CAAjC,CAAd,CAAmD,CACjD,MAAO,MAAKC,SAAL,CACLhrE,CADK,CAEL8qE,EAFK,CAGLC,EAHK,CAILtpE,CAJK,CAKJ,EAAItB,IAAI,CAAC2D,EAAV,CAAgB,CALX,CAML,KAAKmnE,cAAL,CAAoBjrE,CAApB,CAAuB8qE,EAAvB,CAA2BC,EAA3B,CAA+BtpE,CAA/B,CANK,CAAP,CAQD,CAED,MAAO,MAAKupE,SAAL,CACLhrE,CADK,CAEL8qE,EAFK,CAGLC,EAHK,CAILtpE,CAJK,CAKL,KAAKypE,cAAL,CAAoBlrE,CAApB,CAAuB8qE,EAAvB,CAA2BC,EAA3B,CAA+BtpE,CAA/B,CALK,CAMJ,EAAItB,IAAI,CAAC2D,EAAV,CAAgB,CANX,CAAP,CAQD,C,4BAEC9D,C,CAAG8qE,E,CAAIC,E,CAAItpE,C,CAAGkpE,C,CAAG,CACjB,MACExqE,KAAI,CAAC0D,GAAL,CAAS8mE,CAAT,EAAcxqE,IAAI,CAACE,GAAL,CAASF,IAAI,CAAC4D,GAAL,CAAS4mE,CAAT,CAAT,CAAsB,CAAtB,CAAd,CACAG,EAAE,EAAIC,EAAE,CAAG5qE,IAAI,CAAC4D,GAAL,CAAS4mE,CAAT,CAAT,CADF,CAEClpE,CAAC,CAAGzB,CAAL,EAAW,EAAIG,IAAI,CAACE,GAAL,CAAS0qE,EAAT,CAAa,CAAb,CAAf,CAHF,CAKD,C,4CAES/qE,C,CAAG8qE,E,CAAIC,E,CAAItpE,C,CAAG0pE,E,CAAIC,E,CAAI,CAC9B,GAAIC,KAAI,CAAGF,EAAX,CACA,GAAIG,MAAK,CAAGF,EAAZ,CACA,GAAIG,KAAI,CAAG,CAAX,CAEA,MAAOD,KAAK,CAAGD,IAAR,CAAelrE,IAAI,CAACE,GAAL,CAAS,EAAT,CAAa,CAAC,CAAd,CAAtB,CAAwC,CACtCkrE,IAAI,CAAG,CAACF,IAAI,CAAGC,KAAR,EAAiB,CAAxB,CACA,GAAI,KAAKE,CAAL,CAAOxrE,CAAP,CAAU8qE,EAAV,CAAcC,EAAd,CAAkBtpE,CAAlB,CAAqB8pE,IAArB,EAA6B,CAAjC,CAAoC,CAClCD,KAAK,CAAGC,IAAR,CACD,CAFD,IAEO,CACLF,IAAI,CAAGE,IAAP,CACD,CACF,CAED,MAAO,CAACF,IAAI,CAAGC,KAAR,EAAiB,CAAxB,CACD,C,sDAEctrE,C,CAAG8qE,E,CAAIC,E,CAAItpE,C,CAAG,CAC3B,GAAIP,EAAC,CAAG,CAAR,CAEA,MAAO,IAAP,CAAa,CACX,GAAMuqE,SAAQ,CAAG,EAAItrE,IAAI,CAAC2D,EAAT,CAAc3D,IAAI,CAAC2D,EAAL,CAAU3D,IAAI,CAACE,GAAL,CAAS,CAAT,CAAYa,CAAZ,CAAzC,CACA,GAAMgM,OAAM,CAAG,KAAKs+D,CAAL,CAAOxrE,CAAP,CAAU8qE,EAAV,CAAcC,EAAd,CAAkBtpE,CAAlB,CAAqBgqE,QAArB,CAAf,CAEA,GAAIv+D,MAAM,CAAG,CAAb,CAAgB,CACd,MAAOu+D,SAAP,CACD,CACDvqE,CAAC,GACF,CACF,C,sDAEclB,C,CAAG8qE,E,CAAIC,E,CAAItpE,C,CAAG,CAC3B,GAAIP,EAAC,CAAG,CAAR,CAEA,MAAO,IAAP,CAAa,CACX,GAAMuqE,SAAQ,CAAGtrE,IAAI,CAAC2D,EAAL,CAAU3D,IAAI,CAAC2D,EAAL,CAAU3D,IAAI,CAACE,GAAL,CAAS,CAAT,CAAYa,CAAZ,CAArC,CACA,GAAMgM,OAAM,CAAG,KAAKs+D,CAAL,CAAOxrE,CAAP,CAAU8qE,EAAV,CAAcC,EAAd,CAAkBtpE,CAAlB,CAAqBgqE,QAArB,CAAf,CAEA,GAAIv+D,MAAM,CAAG,CAAb,CAAgB,CACd,MAAOu+D,SAAP,CACD,CACDvqE,CAAC,GACF,CACF,C,sCAGYooE,iHAAf,E;;qzBC9SA,GAAMhU,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,gCAAf,CAIA,GAAMumE,KAAI,CAAGxmE,gDAAM,CAACC,GAAV,iCAAV,CAgBA,GAAM63D,0BAAW,CAAG93D,gDAAM,CAACC,GAAV,iCAAjB,C,GAKMwmE,4B,ibACK,iBAC2B,KAAKllE,KADhC,CACCu9C,OADD,aACCA,OADD,CACgBx/C,MADhB,aACU2M,IADV,CAGP,GAAM8hB,SAAQ,CAAG+wB,OAAO,CAAC/wB,QAAzB,CAEA,GAAMrY,MAAK,CAAGqY,QAAQ,CAACrY,KAAT,CACX4f,QADW,GAEXznB,MAFW,CAEJ,SAAA4kB,SAAS,QAAI,CAAC1E,QAAQ,CAACrY,KAAT,CAAeuuD,UAAf,CAA0B3kE,MAA1B,CAAkCmzB,SAAlC,CAAL,EAFL,EAGXhf,IAHW,CAGN,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAACyB,UAAF,CAAasB,MAAb,EAAuB9C,CAAC,CAACwB,UAAF,CAAasB,MAAb,CAA3B,CAAiD,CAC/C,MAAO,EAAP,CACD,CAED,GAAI/C,CAAC,CAACyB,UAAF,CAAasB,MAAb,EAAuB9C,CAAC,CAACwB,UAAF,CAAasB,MAAb,CAA3B,CAAiD,CAC/C,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAbW,CAAd,CAeA,MACE,+BAAC,uBAAD,MACGoW,KAAK,CAAC3P,GAAN,CAAU,SAAA6e,OAAO,QAChB,+BAAC,+BAAD,EACE,OAAO,CAAEA,OADX,CAEE,OAAO,CAAEk6B,OAFX,CAGE,IAAI,CAAEx/C,MAHR,CAIE,GAAG,+BAAyBslB,OAAO,CAAClX,EAAjC,CAJL,EADgB,EAAjB,CADH,CADF,CAYD,C,2BAjCyBtL,eAAK,CAACy0D,S,EAoCnB4P,yFAAf,E;;wgBCjEA,GAAMrW,sBAAS,CAAGpwD,gDAAM,CAACC,GAAV,8BAGX0yD,YAHW,CAAf,CAYA,GAAMqJ,6BAAgB,CAAGh8D,gDAAM,CAACC,GAAV,+BAAtB,CAEA,GAAMymE,wBAAW,CAAG,QAAdA,YAAc,MAA6B,IAA1BpiB,QAA0B,MAA1BA,OAA0B,CAAjBsX,UAAiB,MAAjBA,UAAiB,CAC/C,MACE,+BAAC,qBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,YAAD,EAAc,QAAQ,KAAtB,EACE,8BAAC,kBAAD,eADF,CADF,CAIE,8BAAC,WAAD,EAAS,OAAO,CAAEtX,OAAlB,CAA2B,UAAU,CAAEsX,UAAvC,EAJF,CADF,CADF,CAUD,CAXD,CAae8K,+EAAf,E;;8UC3BA,GAAMtW,sBAAS,CAAGpwD,gDAAM,CAACC,GAAV,8BAGX0yD,YAHW,CAAf,CAYA,GAAMgU,wBAAW,CAAG,QAAdA,YAAc,MAA8B,IAA3Bl0D,KAA2B,MAA3BA,IAA2B,CAArB0W,KAAqB,MAArBA,KAAqB,CAAdy9C,OAAc,MAAdA,OAAc,CAChD,GAAMtiB,QAAO,CAAG7xC,IAAI,CAAG0W,KAAvB,CACA,GAAMyyC,WAAU,CAAGgL,OAAO,CAAGz9C,KAA7B,CACA,MACE,+BAAC,qBAAD,MACE,8BAAC,YAAD,MACE,8BAAC,YAAD,EAAc,QAAQ,KAAtB,EACE,8BAAC,kBAAD,eADF,CADF,CAIE,8BAAC,WAAD,EAAS,OAAO,CAAEm7B,OAAlB,CAA2B,UAAU,CAAEsX,UAAvC,EAJF,CADF,CADF,CAUD,CAbD,CAee+K,+EAAf,E;;otBC9BA,GAAME,IAAG,CAAG7mE,gDAAM,CAACC,GAAV,qCAAT,CAMA,GAAMmwD,6BAAS,CAAGpwD,gDAAM,CAACC,GAAV,sCAAf,CAIA,GAAM6mE,wBAAuB,CAAG9mE,wDAAM,CAAC2yD,YAAD,CAAT,sCAA7B,C,GAIMoU,sC,6cACKrmD,M,CAAQzS,K,CAAO,CACtB,MACE,wBAAC,uBAAD,MACGyS,MAAM,EAAI,uBAAC,kBAAD,MAAqBA,MAArB,MADb,CAEGzS,KAAK,EAAI,uBAAC,YAAD,MAAeA,KAAf,CAFZ,CADF,CAMD,C,uCACQ,iBACmB,KAAK1M,KADxB,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,IAGC5D,YAHD,CAGiB4D,OAAO,CAACyB,QAHzB,CAGCrF,WAHD,CAKP,GAAM8rB,YAAW,CACf/6D,IAAI,CAACiG,OAAL,CAAa+0D,kBAAb,GAAoCh7D,IAAI,CAACiG,OAAL,CAAag1D,mBAAb,EADtC,CAGA,GAAMC,WAAU,CAAGl7D,IAAI,CAACiG,OAAL,CAAak1D,oBAAb,EAAnB,CAEA,GAAMC,eAAc,CAClB,CAACp7D,IAAI,CAACiG,OAAL,CAAa+0D,kBAAb,GAAoCE,UAArC,EACAl7D,IAAI,CAACiG,OAAL,CAAag1D,mBAAb,EAFF,CAIA,GAAMl0C,SAAQ,CAAG/mB,IAAI,CAACiC,QAAL,CAAcwE,OAAd,EAAjB,CACA,GAAM40D,cAAa,CAAGr7D,IAAI,CAACiC,QAAL,CAAcq5D,YAAd,EAAtB,CACA,GAAMC,YAAW,CAAGx0C,QAAQ,CAAG/mB,IAAI,CAACiC,QAAL,CAAcglB,WAAd,EAA/B,CAEA,MACE,wBAAC,4BAAD,MACE,uBAAC,GAAD,MACG,KAAK0jC,QAAL,CACC,aADD,kBAEW3qD,IAAI,CAAC8nB,kBAAL,EAFX,oBAE+C9nB,IAAI,CAAC+nB,iBAAL,EAF/C,EADH,CAKG,KAAK4iC,QAAL,CACC,KADD,CAEC3qD,IAAI,CAACqoB,iBAAL,CAAuBzE,QAAvB,CAAgCC,cAAhC,EAFD,CALH,CASG,KAAK8mC,QAAL,CAAc,MAAd,CAAsB3qD,IAAI,CAACqoB,iBAAL,CAAuBzE,QAAvB,CAAgCE,OAAhC,EAAtB,CATH,CADF,CAYE,uBAAC,GAAD,MACG,KAAK6mC,QAAL,CACC,gBADD,gBAES3qD,IAAI,CAACqC,SAFd,qBAEmCrC,IAAI,CAACmC,SAFxC,uBAE+DnC,IAAI,CAAC+B,WAFpE,oBAE0F/B,IAAI,CAAC8B,QAF/F,EADH,CAZF,CAkBE,uBAAC,GAAD,MACG9B,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GACC,KAAK0b,QAAL,CACE,iBADF,CAEE3qD,IAAI,CAACiG,OAAL,CAAaoF,KAAb,CAAmBK,uBAAnB,EAFF,CAFJ,CAOG1L,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GACC,KAAK0b,QAAL,CACE,aADF,CAEE3qD,IAAI,CAACqoB,iBAAL,CAAuBxE,cAAvB,EAFF,CARJ,CAaG7jB,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GACC,KAAK0b,QAAL,CAAc,cAAd,CAA8B3qD,IAAI,CAACqoB,iBAAL,CAAuBvE,OAAvB,EAA9B,CAdJ,CAlBF,CAmCE,uBAAC,GAAD,MACE,uBAAC,mBAAD,EAAa,OAAO,CAAEi3C,WAAtB,CAAmC,UAAU,CAAEK,cAA/C,EADF,CAnCF,CAsCE,uBAAC,GAAD,MACE,uBAAC,mBAAD,EACE,IAAI,CAAEr0C,QADR,CAEE,KAAK,CAAEs0C,aAFT,CAGE,OAAO,CAAEE,WAHX,EADF,CAtCF,CADF,CAgDD,C,gCA3E8BplE,kB,EA8ElB2kE,wGAAf,E;;kdCjGA,GAAMU,gBAAe,CAAGznE,wDAAM,CAACizD,WAAD,CAAT,0CAArB,CAEA,GAAMyU,cAAa,CAAG1nE,wDAAM,CAACqzD,aAAD,CAAT,2CAAnB,C,GAKMsU,gD,2eACK,IACCC,iBADD,CACsB,KAAKrmE,KAD3B,CACCqmE,gBADD,CAGP,MACE,wBAAC,eAAD,MACE,uBAAC,aAAD,EAAe,OAAO,CAAE,yBAAMA,iBAAgB,CAAC,IAAD,CAAtB,EAAxB,EACE,uBAAC,SAAD,MADF,CADF,CADF,CAOD,C,qCAXmCxlE,sB,EAcvBulE,uHAAf,E;;ACjBA,GAAME,2CAAoB,CAAG,QAAvBA,qBAAuB,CAACjjD,OAAD,CAAUtlB,MAAV,CAAkBsnB,aAAlB,CAAoC,CAC/D,6DACKA,aAAa,CAAC8xC,OAAd,CAAsBp2C,cAAtB,CAAqCulD,oBAArC,CAA0D,CAC3DjjD,OAAO,CAAPA,OAD2D,CAE3DtlB,MAAM,CAANA,MAF2D,CAG3DsnB,aAAa,CAAbA,aAH2D,CAA1D,CADL,GAME,CACElG,MAAM,CAAE,MADV,CAEEzS,KAAK,CAAE2W,OAAO,CAAC0P,iBAAR,CAA0BvE,OAA1B,EAFT,CANF,GAWD,CAZD,CAcA,GAAM+3C,gBAAe,CAAG,QAAlBA,gBAAkB,CAACljD,OAAD,CAAUtlB,MAAV,CAAkBsnB,aAAlB,CAAiCk4B,OAAjC,CAA6C,CACnE,GAAMipB,aAAY,CAAGjpB,OAAO,CAACyB,QAAR,CAAiBqjB,oBAAjB,CAAsCoE,uBAAtC,CACnBpjD,OADmB,CAEnBgC,aAFmB,CAArB,CAKA,GAAMqhD,gBAAe,CAAGF,YAAY,CACjChiE,GADqB,CACjB,SAACmiE,WAAD,QAAkB,CACrBA,WAAW,CAAEA,WADQ,CAErBD,eAAe,CAAEC,WAAW,CAAC71D,WAAZ,CAAwB,oBAAxB,CAA8C,CAC7D/S,MAAM,CAANA,MAD6D,CAE7DsnB,aAAa,CAAbA,aAF6D,CAA9C,CAFI,CAAlB,EADiB,EAQrBnT,IARqB,CAQhB,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAAC0rE,eAAF,CAAkBjgE,MAAlB,CAA2BxL,CAAC,CAACyrE,eAAF,CAAkBjgE,MAAjD,CAAyD,CACvD,MAAO,EAAP,CACD,CAED,GAAIzL,CAAC,CAAC0rE,eAAF,CAAkBjgE,MAAlB,CAA2BxL,CAAC,CAACyrE,eAAF,CAAkBjgE,MAAjD,CAAyD,CACvD,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAlBqB,CAAxB,CAoBA,GAAMmgE,kBAAiB,CAAG,EAA1B,CAEAF,eAAe,CAAC9iE,OAAhB,CAAwB,SAACijE,SAAD,CAAe,CACrC,GAAIz6D,MAAK,CAAGw6D,iBAAiB,CAAC5tD,IAAlB,CACV,SAAC8tD,KAAD,QAAWA,MAAK,CAACt9D,IAAN,GAAeq9D,SAAS,CAACF,WAAV,CAAsBxR,cAAtB,EAA1B,EADU,CAAZ,CAIA,GAAI,CAAC/oD,KAAL,CAAY,CACVA,KAAK,CAAG,CACN5C,IAAI,CAAEq9D,SAAS,CAACF,WAAV,CAAsBxR,cAAtB,EADA,CAEN4R,UAAU,CAAEF,SAAS,CAACF,WAAV,CAAsB71D,WAAtB,CACV,uBADU,CAEV,IAFU,CAGV,CAHU,CAFN,CAONk2D,GAAG,CAAE,IAPC,CAQNnhE,GAAG,CAAE,IARC,CASN2B,MAAM,CAAE,CATF,CAAR,CAYAo/D,iBAAiB,CAAC9iE,IAAlB,CAAuBsI,KAAvB,EACD,CAED,GAAIy6D,SAAS,CAACH,eAAV,CAA0BjgE,MAA1B,CAAmC2F,KAAK,CAAC46D,GAAzC,EAAgD56D,KAAK,CAAC46D,GAAN,GAAc,IAAlE,CAAwE,CACtE56D,KAAK,CAAC46D,GAAN,CAAYH,SAAS,CAACH,eAAV,CAA0BjgE,MAAtC,CACD,CAED,GAAIogE,SAAS,CAACH,eAAV,CAA0BjgE,MAA1B,CAAmC2F,KAAK,CAACvG,GAAzC,EAAgDuG,KAAK,CAACvG,GAAN,GAAc,IAAlE,CAAwE,CACtEuG,KAAK,CAACvG,GAAN,CAAYghE,SAAS,CAACH,eAAV,CAA0BjgE,MAAtC,CACD,CAED2F,KAAK,CAAC5E,MAAN,GACD,CA9BD,EAgCA,GAAMy/D,kBAAiB,CAAG,QAApBA,kBAAoB,CAACD,GAAD,CAAMnhE,GAAN,CAAc,CACtC,GAAImhE,GAAG,CAAG,CAAV,CAAa,CACXA,GAAG,CAAG,CAAN,CACD,CAED,GAAInhE,GAAG,CAAG,CAAV,CAAa,CACXA,GAAG,CAAG,CAAN,CACD,CAED,GAAImhE,GAAG,GAAKnhE,GAAZ,CAAiB,CACf,gBAAUA,GAAV,MACD,CAED,gBAAUmhE,GAAV,gBAAoBnhE,GAApB,MACD,CAdD,CAgBA,MAAO+gE,kBAAiB,CAACpiE,GAAlB,CAAsB,SAACsiE,KAAD,CAAW,CACtC,MAAO,CACL3nD,MAAM,WAAK2nD,KAAK,CAACt/D,MAAN,CAAes/D,KAAK,CAACC,UAA1B,cAAyCD,KAAK,CAACt9D,IAA/C,CADD,CAELkD,KAAK,CAAEu6D,iBAAiB,CAACH,KAAK,CAACE,GAAP,CAAYF,KAAK,CAACjhE,GAAlB,CAFnB,CAAP,CAID,CALM,CAAP,CAMD,CAlFD,C,GAoFMqhE,4C,ydACK,iBAC6C,KAAKlnE,KADlD,CACCqjB,OADD,aACCA,OADD,CACUtlB,MADV,aACUA,MADV,CACkBsnB,aADlB,aACkBA,aADlB,CACiCk4B,OADjC,aACiCA,OADjC,CAGP,GAAM4pB,mBAAkB,CAAGnV,2BAAmB,CAC5CuU,eAAe,CAACljD,OAAD,CAAUtlB,MAAV,CAAkBsnB,aAAlB,CAAiCk4B,OAAjC,CAD6B,CAA9C,CAIA,MACE,6DACE,8BAAC,aAAD,wBADF,CAEGyU,2BAAmB,CAClBsU,0CAAoB,CAACjjD,OAAD,CAAUtlB,MAAV,CAAkBsnB,aAAlB,CADF,CAFtB,CAME,8BAAC,aAAD,qBANF,CAOG8hD,kBAAkB,CAACxsE,MAAnB,CAA4B,CAA5B,CACGwsE,kBADH,CAEG,2BATN,CADF,CAaD,C,mCArBiCtmE,eAAK,CAACy0D,S,EAwB3B4R,oHAAf,E;;0NC9HA,GAAM1Q,iCAAgB,CAAG/3D,wDAAM,CAAC+2D,eAAD,CAAT,kCAAtB,CAIe,QAAS4R,gBAAT,MAKZ,IAJD7pB,QAIC,MAJDA,OAIC,CAHDl4B,aAGC,MAHDA,aAGC,CAFD3a,IAEC,MAFDA,IAEC,CADD2Y,OACC,MADDA,OACC,CACD,GAAMs0C,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B;;;;;;MAOD,CARD,CAUA,GAAMD,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7B;;;;;;MAOD,CARD,CAUA,MACE,+BAAC,gCAAD,EACE,IAAI,CAAEhtD,IADR,CAEE,aAAa,CAAE,wBAAM,CAAE,CAFzB,CAGE,eAAe,CAAEgtD,gBAHnB,CAIE,cAAc,CAAEC,eAJlB,CAKE,KAAK,CAAEtyC,aAAa,CAAC8xC,OALvB,CAME,MAAM,CAAE,IANV,CAOE,IAAI,GAPN,CAQE,eAAe,CAAC,MARlB,CASE,wBAAwB,CACtB,8BAAC,oCAAD,EACE,OAAO,CAAE9zC,OADX,CAEE,MAAM,CAAE3Y,IAFV,CAGE,aAAa,CAAE2a,aAHjB,CAIE,OAAO,CAAEk4B,OAJX,EAVJ,EADF,CAoBD,C;;qOC1CD,GAAMgZ,2BAAW,CAAG93D,gDAAM,CAACC,GAAV,iCAAjB,CAKA,GAAM2oE,YAAW,CAAG,QAAdA,YAAc,CAACrsE,CAAD,CAAIC,CAAJ,CAAU,CAC5B,GAAID,CAAC,CAACm8D,OAAF,CAAUt2C,QAAV,CAAqB5lB,CAAC,CAACk8D,OAAF,CAAUt2C,QAAnC,CAA6C,CAC3C,MAAO,EAAP,CACD,CAED,GAAI7lB,CAAC,CAACm8D,OAAF,CAAUt2C,QAAV,CAAqB5lB,CAAC,CAACk8D,OAAF,CAAUt2C,QAAnC,CAA6C,CAC3C,MAAO,CAAC,CAAR,CACD,CAED,GACE7lB,CAAC,CAACm8D,OAAF,CAAUp2C,cAAV,CAAyBlJ,WAAzB,CAAqCrO,IAArC,CACAvO,CAAC,CAACk8D,OAAF,CAAUp2C,cAAV,CAAyBlJ,WAAzB,CAAqCrO,IAFvC,CAGE,CACA,MAAO,EAAP,CACD,CAED,GACExO,CAAC,CAACm8D,OAAF,CAAUp2C,cAAV,CAAyBlJ,WAAzB,CAAqCrO,IAArC,CACAvO,CAAC,CAACk8D,OAAF,CAAUp2C,cAAV,CAAyBlJ,WAAzB,CAAqCrO,IAFvC,CAGE,CACA,MAAO,CAAC,CAAR,CACD,CAED,GAAIxO,CAAC,CAACm8D,OAAF,CAAUhC,cAAV,GAA6Bl6D,CAAC,CAACk8D,OAAF,CAAUhC,cAAV,EAAjC,CAA6D,CAC3D,MAAO,EAAP,CACD,CAED,GAAIn6D,CAAC,CAACm8D,OAAF,CAAUhC,cAAV,GAA6Bl6D,CAAC,CAACk8D,OAAF,CAAUhC,cAAV,EAAjC,CAA6D,CAC3D,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAhCD,CAkCA,GAAMmS,2BAA0B,CAAG,QAA7BA,2BAA6B,CAAC58D,IAAD,CAAO8hB,QAAP,QACjCA,SAAQ,CAAC+6C,QAAT,CACGC,iBADH,GAEGl7D,MAFH,CAEU,SAAC8U,MAAD,QAAYA,OAAM,CAACsS,QAAP,GAAoBhpB,IAAI,CAACyB,EAArC,EAFV,EAGG+F,IAHH,CAGQm1D,WAHR,CADiC,EAAnC,CAMA,GAAMI,gCAA+B,CAAG,QAAlCA,gCAAkC,CACtC/8D,IADsC,CAEtC8hB,QAFsC,CAGtC61C,oBAHsC,CAInC,CACH,GAAMxpD,QAAO,CAAG,EAAhB,CACA2T,QAAQ,CAAC+6C,QAAT,CACGC,iBADH,GAEGl7D,MAFH,CAGI,SAAC8U,MAAD,QACEA,OAAM,CAACsS,QAAP,GAAoBhpB,IAAI,CAACyB,EAAzB,EACAqgB,QAAQ,CAACrY,KAAT,CAAeuuD,UAAf,CACEh4D,IADF,CAEE8hB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BzqC,MAAM,CAACsS,QAAlC,CAFF,CAFF,EAHJ,EAUG9vB,OAVH,CAUW,SAACwd,MAAD,CAAY,CACnB,GAAMrjB,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BzqC,MAAM,CAACsS,QAAlC,CAAf,CAEA,GAAItnB,MAAK,CAAGyM,OAAO,CAACG,IAAR,CACV,kBAAS0uD,UAAT,MAAGh9D,IAAH,OAAyBg9D,UAAS,CAACv7D,EAAV,GAAiBpO,MAAM,CAACoO,EAAjD,EADU,CAAZ,CAIA,GAAI,CAACC,KAAL,CAAY,CACVA,KAAK,CAAG,CACN1B,IAAI,CAAE3M,MADA,CAEN4pE,OAAO,CAAE,EAFH,CAAR,CAIA9uD,OAAO,CAAC/U,IAAR,CAAasI,KAAb,EACD,CAEDA,KAAK,CAACu7D,OAAN,CAAc7jE,IAAd,CAAmBsd,MAAnB,EACD,CA1BH,EA4BA,MAAOvI,QAAO,CACXvM,MADI,CACG,mBAASg2D,WAAT,OAAG53D,IAAH,CAAqBi9D,OAArB,OAAqBA,OAArB,OACNA,QAAO,CAAC5hE,IAAR,CAAa,SAACqb,MAAD,CAAY,CACvBihD,oBAAoB,CACjBoE,uBADH,CAC2B/7D,IAD3B,CACiC0W,MADjC,EAEGrb,IAFH,CAGI,SAAC4gE,WAAD,QACEA,YAAW,CAAC71D,WAAZ,CACE,oBADF,CAEE,CAAE/S,MAAM,CAAEukE,UAAV,CAAsBj9C,aAAa,CAAEjE,MAArC,CAFF,CAGE,CAHF,EAII,CALN,EAHJ,EAUD,CAXD,CADM,EADH,EAeJ5c,GAfI,CAeA,mBAAS89D,WAAT,OAAG53D,IAAH,CAAqBi9D,OAArB,OAAqBA,OAArB,OAAoC,CACvCj9D,IAAI,CAAE43D,UADiC,CAEvCqF,OAAO,CAAEA,OAAO,CAACz1D,IAAR,CAAam1D,WAAb,CAF8B,CAApC,EAfA,CAAP,CAmBD,CArDD,C,GAuDMO,8B,sbACK,iBACmB,KAAK5nE,KADxB,CACCu9C,OADD,aACCA,OADD,CACU7yC,IADV,aACUA,IADV,CAGP,GAAM8hB,SAAQ,CAAG+wB,OAAO,CAAC/wB,QAAzB,CACA,GAAM+6C,SAAQ,CAAGD,0BAA0B,CAAC58D,IAAD,CAAO8hB,QAAP,CAA3C,CAEA,GAAMq7C,gBAAe,CAAGJ,+BAA+B,CACrD/8D,IADqD,CAErD8hB,QAFqD,CAGrD+wB,OAAO,CAACyB,QAAR,CAAiBqjB,oBAHoC,CAAvD,CAKA5+D,OAAO,CAACya,GAAR,CAAY,iBAAZ,CAA+B2pD,eAA/B,EAEA,MACE,6DACE,8BAAC,aAAD,MACGn9D,IAAI,CAAClB,IADR,KACc,8BAAC,YAAD,kBADd,CADF,CAIE,yCACG+9D,QAAQ,CAAC/iE,GAAT,CAAa,SAAC4c,MAAD,QACZ,+BAAC,eAAD,EACE,GAAG,4BAAsBA,MAAM,CAACjV,EAA7B,CADL,CAEE,IAAI,CAAEzB,IAFR,CAGE,aAAa,CAAE0W,MAHjB,CAIE,OAAO,CAAE1W,IAJX,CAKE,OAAO,CAAE6yC,OALX,EADY,EAAb,CADH,CAJF,CAeE,yCACGsqB,eAAe,CAACrjE,GAAhB,CAAoB,mBAAS89D,WAAT,OAAG53D,IAAH,CAAqBi9D,OAArB,OAAqBA,OAArB,OACnB,sCACE,GAAG,6CAAuCj9D,IAAI,CAACyB,EAA5C,aAAkDm2D,UAAU,CAACn2D,EAA7D,CADL,EAGE,8BAAC,aAAD,MAAgBm2D,UAAU,CAAC94D,IAA3B,CAHF,CAIGm+D,OAAO,CAACnjE,GAAR,CAAY,SAAC4c,MAAD,QACX,+BAAC,eAAD,EACE,GAAG,qCAA+BA,MAAM,CAACjV,EAAtC,CADL,CAEE,IAAI,CAAEm2D,UAFR,CAGE,aAAa,CAAElhD,MAHjB,CAIE,OAAO,CAAE1W,IAJX,CAKE,OAAO,CAAE6yC,OALX,EADW,EAAZ,CAJH,CADmB,EAApB,CADH,CAfF,CADF,CAoCD,C,4BAlD0B18C,eAAK,CAACy0D,S,EAqDpBsS,2GAAf,E;;ACpKeA,wGAAf,E;;;;;;ACFA,GAAME,WAAU,CAAG,uBAAnB,CACA,GAAMC,qBAAoB,CAAG,2BAA7B,C;;ACEA,GAAMC,YAAW,CAAG,CAClBC,eAAe,CAAE,IADC,CAElBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFS,CAApB,CAOO,GAAMC,MAAK,sHAAG,iBAAOz4C,QAAP,CAAiB04C,QAAjB,0JAEJC,gBAAK,CAACC,IAAN,WACRR,UADQ,WAEX,CACEp4C,QAAQ,CAARA,QADF,CAEE04C,QAAQ,CAARA,QAFF,CAFW,CAMXJ,WANW,CAFI,oHAWX,aAAM/nD,QAXK,oEAAH,kBAALkoD,MAAK,gDAAX,CAeA,GAAMI,SAAQ,uHAAG,kBAAO74C,QAAP,CAAiB04C,QAAjB,gKAEPC,gBAAK,CAACC,IAAN,WACRR,UADQ,cAEX,CACEp4C,QAAQ,CAARA,QADF,CAEE04C,QAAQ,CAARA,QAFF,CAFW,CAMXJ,WANW,CAFO,yHAWd,cAAM/nD,QAXQ,sEAAH,kBAARsoD,SAAQ,kDAAd,CAeA,GAAMC,eAAc,uHAAG,kLAEbH,gBAAK,CAAC7xC,GAAN,WAAasxC,UAAb,UAAgCE,WAAhC,CAFa,yHAIpB,cAAM/nD,QAJc,sEAAH,kBAAduoD,eAAc,2CAApB,CAQA,GAAMC,OAAM,uHAAG,kLAELJ,gBAAK,CAAC7xC,GAAN,WAAasxC,UAAb,YAAkCE,WAAlC,CAFK,yHAIZ,cAAM/nD,QAJM,sEAAH,kBAANwoD,OAAM,2CAAZ,C;;AC7CP,GAAMT,iBAAW,CAAG,CAClBC,eAAe,CAAE,IADC,CAElBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFS,CAApB,CAOO,GAAMQ,gBAAU,sHAAG,iBAAOl8C,QAAP,oKAEf67C,eAAK,CAACC,IAAN,WAAcR,UAAd,UAAiCt7C,QAAQ,CAAC/e,SAAT,EAAjC,CAAuDu6D,gBAAvD,CAFe,+DAIhB,aAAM/nD,QAJU,oEAAH,kBAAVyoD,WAAU,4CAAhB,CAQA,GAAMC,mBAAkB,uHAAG,kBAAOn8C,QAAP,0KAEvB67C,eAAK,CAACC,IAAN,WAAcR,UAAd,cAAqC,EAArC,CAAyCE,gBAAzC,CAFuB,kEAIxB,cAAM/nD,QAJkB,sEAAH,kBAAlB0oD,mBAAkB,8CAAxB,C;;;;ACfP,GAAMC,YAAW,CAAG,CAClBC,gBAAgB,CAAE,kBADA,CAApB,CAIO,GAAML,uBAAc,sHAAG,iBAAMM,QAAN,sJACNn8C,qBAAI,CAAC67C,cAAL,EADM,QACtB70D,OADsB,eAE5Bm1D,QAAQ,CAAC,CACPh+D,IAAI,CAAE89D,WAAW,CAACC,gBADX,CAEPl1D,OAAO,CAAEA,OAFF,CAAD,CAAR,CAF4B,sDAAH,kBAAd60D,eAAc,4CAApB,CAQA,GAAMO,gBAAO,CAAG,QAAVA,QAAU,CAACx0C,KAAD,CAAQkkB,MAAR,CAAmB,CACxC,OAAQA,MAAM,CAAC3tC,IAAf,EACE,IAAK,kBAAL,CACE,GAAM6hB,MAAI,CAAG8rB,MAAM,CAAC9kC,OAAP,CAAenI,IAAf,CACT,GAAIikB,WAAJ,GAAW/hB,WAAX,CAAuB+qC,MAAM,CAAC9kC,OAAP,CAAenI,IAAtC,CADS,CAET,IAFJ,CAGA,OAAO,4CACF+oB,KADL,EAEEolB,WAAW,CAAEhtB,KAFf,GAIF,QACE,MAAO4H,MAAP,CAVJ,CAYD,CAbM,C;;ACZA,GAAMy0C,WAAU,CAAGnoE,eAAK,CAACooE,aAAN,CAAoB,EAApB,CAAnB,CACA,GAAMC,cAAa,CAAGroE,eAAK,CAACooE,aAAN,CAAoB,EAApB,CAAtB,CAEP,GAAME,aAAY,CAAG,CACnBxvB,WAAW,CAAEngD,SADM,CAArB,CAIA,GAAM4vE,4BAAa,CAAG,QAAhBA,cAAgB,MAAkB,IAAf//D,SAAe,MAAfA,QAAe,iBACZggE,2BAAU,CAACN,eAAD,CAAUI,YAAV,CADE,sEAC/B50C,KAD+B,iBACxBu0C,QADwB,iBAGtCQ,0BAAS,CAAC,UAAM,CACdd,sBAAc,CAACM,QAAD,CAAd,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,MACE,+BAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAEA,QAA/B,EACE,8BAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAEv0C,KAA5B,EAAoClrB,QAApC,CADF,CADF,CAKD,CAZD,CAce+/D,mFAAf,E;;kMCnBA,GAAMG,kBAAiB,CAAG9qE,gDAAM,CAACkxD,IAAV,2BACZ,SAAA3vD,KAAK,QAAKA,MAAK,CAAC+pD,MAAN,CAAetlB,sBAAM,CAAC8oB,SAAtB,CAAkC9oB,sBAAM,CAAC6oB,UAA9C,EADO,CAAvB,CAIe,QAASgG,kBAAT,MAA4B,IAAR5oD,KAAQ,MAARA,IAAQ,iBACjB8+D,2BAAU,CAACR,UAAD,CADO,CACjCrvB,WADiC,aACjCA,WADiC,CAGzC,GAAMoQ,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAf,CAEA,MACE,+BAAC,iBAAD,EAAmB,MAAM,CAAEoQ,MAA3B,EACGr/C,IAAI,CAAClB,IAAL,EAAa,cADhB,CADF,CAKD,C;;glCCfD,GAAMqlD,sBAAS,CAAGpwD,gDAAM,CAACC,GAAV,8BAAf,CAKA,GAAM20D,iBAAI,CAAGlE,oDAAH,+BAAV,CASA,GAAMmE,qBAAQ,CAAG70D,gDAAM,CAACC,GAAV,+BACV20D,gBADU,CAAd,CAOA,GAAME,mBAAM,CAAG90D,gDAAM,CAACC,GAAV,+BACR20D,gBADQ,CAAZ,C,GASMoW,wB,+aACK,iBACwC,KAAKzpE,KAD7C,CACCwJ,IADD,aACCA,IADD,CACOkB,IADP,aACOA,IADP,CACa6yC,OADb,aACaA,OADb,CACsB5vB,IADtB,aACsBA,IADtB,CAC+B2iC,IAD/B,kGAGP,MACE,wBAAC,qBAAD,CAAeA,IAAf,CACG9mD,IAAI,EAAI,uBAAC,oBAAD,MAAWA,IAAX,CADX,CAEE,uBAAC,aAAD,EACE,GAAG,CAAC,qBADN,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIkB,IAAI,CAACqoB,iBAAL,CAAuB22C,aAAvB,CAAqC,CAAC,CAAtC,CAAJ,CAA8C,CAC5Ch/D,IAAI,CAACqoB,iBAAL,CAAuB42C,UAAvB,CAAkC,CAAC,CAAnC,EACApsB,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CACF,CAPH,EAFF,CAWE,uBAAC,kBAAD,MAASijB,IAAT,CAXF,CAYE,uBAAC,aAAD,EACE,GAAG,CAAC,kBADN,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIjjB,IAAI,CAACqoB,iBAAL,CAAuB22C,aAAvB,CAAqC,CAArC,CAAJ,CAA6C,CAC3Ch/D,IAAI,CAACqoB,iBAAL,CAAuB42C,UAAvB,CAAkC,CAAlC,EACApsB,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACD,CACF,CAPH,EAZF,CADF,CAwBD,C,yBA5BuB7J,sB,EA+BX4oE,yFAAf,E;;0fC3DA,GAAMvD,kDAAe,CAAGznE,wDAAM,CAACizD,WAAD,CAAT,oDAArB,CAEA,GAAMyU,gDAAa,CAAG1nE,wDAAM,CAACqzD,aAAD,CAAT,qDAAnB,C,GAKM8X,oE,6hBACK,iBACqC,KAAK5pE,KAD1C,CACCqmE,gBADD,aACCA,gBADD,CACmB37D,IADnB,aACmBA,IADnB,CACyB6yC,OADzB,aACyBA,OADzB,CAGP,MACE,wBAAC,iDAAD,MACE,uBAAC,+CAAD,EAAe,OAAO,CAAE,yBAAM8oB,iBAAgB,CAAC,IAAD,CAAtB,EAAxB,EACE,uBAAC,SAAD,MADF,CADF,CAIE,uBAAC,6BAAD,EACE,IAAI,CAAE37D,IADR,CAEE,OAAO,CAAE6yC,OAFX,CAGE,IAAI,CAAE7yC,IAAI,CAACqoB,iBAAL,CAAuBvE,OAAvB,EAHR,EAJF,CADF,CAYD,C,+CAhB6C3tB,sB,EAmBjC+oE,qJAAf,E;;m/BCVA,GAAMzV,uBAAU,CAAG11D,wDAAM,CAACwyD,aAAD,CAAT,8BAAhB,CAKA,GAAM4Y,qBAAoB,CAAGprE,wDAAM,CAACkyD,OAAD,CAAT,+BAMtB,SAAC3wD,KAAD,QAAYA,MAAK,CAACnD,KAAN,CAAc,eAAd,CAAgC,cAA5C,EANsB,CAQtB,SAACmD,KAAD,QAAYA,MAAK,CAAC8pE,YAAN,CAAqB,aAArB,CAAqC,aAAjD,EARsB,CAA1B,CAWO,GAAMzV,kBAAK,CAAG51D,wDAAM,CAAC2yD,YAAD,CAAT,+BAAX,CAOA,GAAMkD,mBAAM,CAAG71D,gDAAM,CAACkxD,IAAV,+BAAZ,CAIA,GAAMoa,2BAA0B,CAAG,4BAAnC,CACA,GAAMC,4BAA2B,CAAG,6BAApC,C,GAEDC,wB,2GACJ,qBAAYjqE,KAAZ,CAAmB,uEACjB,iIAAMA,KAAN,GACA,MAAKu0B,KAAL,CAAa,CAAE21C,UAAU,CAAE,IAAd,CAAb,CAFiB,aAGlB,C,4GAEgB1gE,I,CAAM,CACrB,KAAKosD,QAAL,CAAc,CAAEsU,UAAU,CAAE1gE,IAAd,CAAd,EACD,C,yCAES,iBACgC,KAAKxJ,KADrC,CACAmqE,EADA,aACAA,EADA,CACIC,uBADJ,aACIA,uBADJ,CAGR,GAAMF,WAAU,CAAG,KAAKG,aAAL,EAAnB,CAEA,GAAI,CAACH,UAAL,CAAiB,CACf,GAAMjO,KAAI,CACRkO,EAAE,EAAIC,uBAAN,CAAgCA,uBAAuB,EAAvD,CAA4D,IAD9D,CAEA,MAAOnO,KAAP,CACD,CAED,GAAIiO,UAAU,EAAIC,EAAlB,CAAsB,CACpB,GAAID,UAAU,GAAKF,2BAAnB,CAAgD,CAC9C,MAAOJ,8CAAP,CACD,CACD,MAAOxD,oCAAP,CACD,CAED,MAAO,KAAP,CACD,C,mDAEc,IACL8D,WADK,CACU,KAAK31C,KADf,CACL21C,UADK,CAGb,OAAQA,UAAR,EACE,IAAKH,2BAAL,CACE,MAAO,mBAAP,CACF,IAAKC,4BAAL,CACE,MAAO,iBAAP,CACF,QACE,MAAO,cAAP,CANJ,CAQD,C,qDAEe,kBACY,KAAKhqE,KADjB,CACN0K,IADM,cACNA,IADM,CACA6yC,OADA,cACAA,OADA,IAEN2sB,WAFM,CAES,KAAK31C,KAFd,CAEN21C,UAFM,IAGNvwB,YAHM,CAGU4D,OAAO,CAACyB,QAHlB,CAGNrF,WAHM,CAKd,GAAMwhB,OAAM,CAAGzwD,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAf,CAEA,GAAIuwB,UAAU,GAAKH,0BAAf,EAA6C5O,MAAjD,CAAyD,CACvD,MAAO,KAAP,CACD,CAED,MAAO+O,WAAP,CACD,C,uCAEQ,kBASH,KAAKlqE,KATF,CAEL0K,IAFK,cAELA,IAFK,CAGL4Y,WAHK,cAGLA,WAHK,CAILi6B,OAJK,cAILA,OAJK,CAKL4sB,EALK,cAKLA,EALK,CAMLC,uBANK,cAMLA,uBANK,CAOL1yD,SAPK,cAOLA,SAPK,CAQF44C,IARE,8IAWP,GAAM4Z,WAAU,CAAG,KAAKG,aAAL,EAAnB,CAEA,GAAMpO,KAAI,CAAG,KAAKqO,OAAL,EAAb,CACA,GAAMR,aAAY,CAAGrwD,OAAO,CAACwiD,IAAD,CAAP,EAAiBiO,UAAtC,CAEA,MACE,wBAAC,oBAAD,EACE,KAAK,CAAE5Z,IAAI,CAACzzD,KADd,CAEE,SAAS,CAAE6a,SAFb,CAGE,YAAY,CAAEoyD,YAHhB,EAKE,uBAAC,sBAAD,MACE,kCACE,uBAAC,iBAAD,EAAU,IAAI,CAAEp/D,IAAhB,EADF,CADF,CAGS,GAHT,CAIE,kCACG,KAAK6/D,YAAL,EADH,CACwB,GADxB,CAEE,uBAAC,kBAAD,EACE,OAAO,CAAE,kBAAM,CACbhtB,OAAO,CAAC0M,eAAR,CAAwBv/C,IAAxB,EACA6yC,OAAO,CAAC8Y,WAAR,CAAoB,mBAApB,CAAyC3rD,IAAzC,EACD,CAJH,EAFF,CAJF,CALF,CAmBGuxD,IAAI,EACH,uBAAC,IAAD,gBACE,OAAO,CAAE1e,OADX,CAEE,IAAI,CAAE7yC,IAFR,CAGE,gBAAgB,CAAE,KAAK27D,gBAAL,CAAsBhlE,IAAtB,CAA2B,IAA3B,CAHpB,EAIMivD,IAJN,EApBJ,CA2BG,CAAC4Z,UAAD,EACC,8CACGjO,IAAI,EACH,uBAAC,+BAAD,gBAAqB,OAAO,CAAE1e,OAA9B,CAAuC,IAAI,CAAE7yC,IAA7C,EAAuD4lD,IAAvD,EAFJ,CAIE,uBAAC,8BAAD,EAAoB,IAAI,CAAE5lD,IAA1B,CAAgC,OAAO,CAAE6yC,OAAzC,EAJF,CAKE,uBAAC,qBAAD,gBAAY,IAAI,CAAE7yC,IAAlB,CAAwB,OAAO,CAAE6yC,OAAjC,EAA8C+S,IAA9C,EALF,CA5BJ,CAqCG4Z,UAAU,GAAKH,0BAAf,EACC,uBAAC,yBAAD,gBAAe,IAAI,CAAEr/D,IAArB,CAA2B,OAAO,CAAE6yC,OAApC,EAAiD+S,IAAjD,EAtCJ,CAyCG4Z,UAAU,GAAKF,2BAAf,EACC,uBAAC,0BAAD,gBAAgB,IAAI,CAAEt/D,IAAtB,CAA4B,OAAO,CAAE6yC,OAArC,EAAkD+S,IAAlD,EA1CJ,CADF,CA+CD,C,yBAzHuBzvD,kB,EA4HXopE,mFAAf,E;;ACvKA,GAAMO,gBAAe,CAAG,QAAlBA,gBAAkB,CAAC9/D,IAAD,CAAO6yC,OAAP,CAA+B,IAAfktB,GAAe,2DAAV,KAAU,CACrD//D,IAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,YAAnB,CAAiC,IAAjC,CAAuC,KAAvC,CAAZ,EAHV,EAIGxE,MAJH,CAIU,SAACuE,MAAD,CAAY,CAClB,GAAI45D,EAAJ,CAAQ,CACN,MAAO55D,OAAM,CAACkF,KAAP,CAAaO,YAAb,EAAP,CACD,CAFD,IAEO,CACL,MAAOzF,OAAM,CAACkF,KAAP,CAAaM,aAAb,EAAP,CACD,CACF,CAVH,EAWGzS,OAXH,CAWW,SAACiN,MAAD,CAAY,CACnB,GAAI45D,EAAJ,CAAQ,CACN55D,MAAM,CAACkF,KAAP,CAAac,SAAb,GACD,CAFD,IAEO,CACLhG,MAAM,CAACkF,KAAP,CAAaY,UAAb,GACD,CAED4mC,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCmG,MAArC,EACD,CAnBH,EAoBD,CArBD,CAuBA,GAAM65D,aAAY,CAAG,QAAfA,aAAe,CAAChgE,IAAD,QACnBA,KAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,YAAnB,CAAiC,IAAjC,CAAuC,KAAvC,CAAZ,EAHV,EAGqEnW,MAHrE,CAIA,CALmB,EAArB,CAOA,GAAMgwE,mBAAkB,CAAG,QAArBA,mBAAqB,CAACjgE,IAAD,QACzBA,KAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,YAAnB,CAAiC,IAAjC,CAAuC,KAAvC,CAAZ,EAHV,EAIGxE,MAJH,CAIU,SAACuE,MAAD,QAAYA,OAAM,CAACkF,KAAP,CAAaM,aAAb,EAAZ,EAJV,EAKG/J,MALH,CAKU,SAACuE,MAAD,QAAYA,OAAM,CAACkF,KAAP,CAAaW,QAAb,EAAZ,EALV,EAK+C/b,MAL/C,CAKwD,CAN/B,EAA3B,CAQA,GAAMiwE,mBAAkB,CAAG,QAArBA,mBAAqB,CAAClgE,IAAD,CAAO6yC,OAAP,CAA+B,IAAfktB,GAAe,2DAAV,KAAU,CACxD//D,IAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,IAAnC,CAAyC,KAAzC,CAAZ,EAHV,EAIGxE,MAJH,CAIU,SAACuE,MAAD,CAAY,CAClB,GAAI45D,EAAJ,CAAQ,CACN,MAAO55D,OAAM,CAACkF,KAAP,CAAaO,YAAb,EAAP,CACD,CAFD,IAEO,CACL,MAAOzF,OAAM,CAACkF,KAAP,CAAaM,aAAb,EAAP,CACD,CACF,CAVH,EAWGzS,OAXH,CAWW,SAACiN,MAAD,CAAY,CACnB,GAAI45D,EAAJ,CAAQ,CACN55D,MAAM,CAACkF,KAAP,CAAac,SAAb,GACD,CAFD,IAEO,CACLhG,MAAM,CAACkF,KAAP,CAAaY,UAAb,GACD,CAED4mC,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCmG,MAArC,EACD,CAnBH,EAoBD,CArBD,CAuBA,GAAMg6D,gBAAe,CAAG,QAAlBA,gBAAkB,CAACngE,IAAD,QACtBA,KAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,IAAnC,CAAyC,KAAzC,CAAZ,EAHV,EAIGnW,MAJH,CAIY,CALU,EAAxB,CAOA,GAAMmwE,sBAAqB,CAAG,QAAxBA,sBAAwB,CAACpgE,IAAD,QAC5BA,KAAI,CAACiG,OAAL,CACGC,UADH,GAEGtE,MAFH,CAEU,SAACuE,MAAD,QAAY,CAACA,MAAM,CAACwD,WAAP,EAAb,EAFV,EAGG/H,MAHH,CAGU,SAACuE,MAAD,QAAYA,OAAM,CAACC,WAAP,CAAmB,cAAnB,CAAmC,IAAnC,CAAyC,KAAzC,CAAZ,EAHV,EAIGxE,MAJH,CAIU,SAACuE,MAAD,QAAYA,OAAM,CAACkF,KAAP,CAAaM,aAAb,EAAZ,EAJV,EAKG/J,MALH,CAKU,SAACuE,MAAD,QAAYA,OAAM,CAACkF,KAAP,CAAaW,QAAb,EAAZ,EALV,EAK+C/b,MAL/C,CAKwD,CAN5B,EAA9B,C,GAQMowE,wC,udACK,gCACqC,KAAK/qE,KAD1C,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,CACgB8oB,gBADhB,aACgBA,gBADhB,IAEC1sB,YAFD,CAEiB4D,OAAO,CAACyB,QAFzB,CAECrF,WAFD,CAIP,GAAMqxB,aAAY,CAAGztB,OAAO,CAAC2D,eAAR,EAArB,CAEA,MACE,wBAAC,WAAD,MACGx2C,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GAAoC,CAAC4D,OAAO,CAAC0tB,UAAR,CAAmBvgE,IAAnB,CAArC,EACC,uBAAC,aAAD,EACE,GAAG,CAAC,qBADN,CAEE,OAAO,CAAE,yBAAM6yC,QAAO,CAAC8M,UAAR,CAAmB3/C,IAAnB,CAAN,EAFX,EAFJ,CAQGA,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GAAoCqxB,YAApC,EACC,uBAAC,6BAAD,EACE,IAAI,CAAEtgE,IADR,CAEE,OAAO,CAAE6yC,OAFX,CAGE,IAAI,CAAEytB,YAAY,CAACj4C,iBAAb,CAA+BvE,OAA/B,EAHR,EATJ,CAgBG,CAAC9jB,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAD,EAAqCqxB,YAArC,EACC,uBAAC,4BAAD,EACE,IAAI,CAAEA,YADR,CAEE,MAAM,CAAEtgE,IAFV,CAGE,OAAO,CAAE6yC,OAHX,CAIE,GAAG,CAAEytB,YAAY,CAACj4C,iBAAb,CAA+Bm4C,cAA/B,CAA8CxgE,IAA9C,CAJP,EAjBJ,CAyBGA,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GAAoC+wB,YAAY,CAAChgE,IAAD,CAAhD,EACC,uBAAC,aAAD,EACE,GAAG,CAAC,0BADN,CAEE,OAAO,CAAE,iBAACxI,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEAsqE,eAAe,CACb9/D,IADa,CAEb6yC,OAFa,CAGbotB,kBAAkB,CAACjgE,IAAD,CAAlB,CAA2B,KAA3B,CAAmC,IAHtB,CAAf,CAKA6yC,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACA,KAAI,CAACisD,WAAL,GACD,CAbH,EA1BJ,CA2CGjsD,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GAAoCkxB,eAAe,CAACngE,IAAD,CAAnD,EACC,uBAAC,aAAD,EACE,GAAG,CAAC,oCADN,CAEE,OAAO,CAAE,iBAACxI,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEA0qE,kBAAkB,CAChBlgE,IADgB,CAEhB6yC,OAFgB,CAGhButB,qBAAqB,CAACpgE,IAAD,CAArB,CAA8B,KAA9B,CAAsC,IAHtB,CAAlB,CAKA6yC,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACA,KAAI,CAACisD,WAAL,GACD,CAbH,EA5CJ,CA6DG,CAACjsD,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAD,EACC,uBAAC,aAAD,EACE,GAAG,CAAC,0BADN,CAEE,OAAO,CAAE,yBAAM0sB,iBAAgB,CAAC0D,0BAAD,CAAtB,EAFX,EA9DJ,CAoEGr/D,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GACC,uBAAC,aAAD,EACE,GAAG,CAAC,yBADN,CAEE,OAAO,CAAE,yBAAM0sB,iBAAgB,CAAC2D,2BAAD,CAAtB,EAFX,EArEJ,CADF,CA6ED,C,iCApF+BnpE,sB,EAuFnBkqE,2GAAf,E;;GCzKMI,wD,gfACKnsB,Q,CAAU,CACjB,2IAAeA,QAAf,EADiB,GAETzB,QAFS,CAEG,KAAKyB,QAFR,CAETzB,OAFS,CAIjBA,OAAO,CAAC6tB,sBAAR,CAA+B,KAAKC,mBAApC,EACD,C,+CAEY,CACX,8IADW,GAEH9tB,QAFG,CAES,KAAKyB,QAFd,CAEHzB,OAFG,CAIXA,OAAO,CAAC6tB,sBAAR,CAA+B,IAA/B,EACD,C,iEAEqB,CACpB,MAAOL,gCAAP,CACD,C,yCAjBuCrqB,qB,EAoB3ByqB,kIAAf,E;;GCrBMG,oC,8bACKtsB,Q,CAAU,CACjB,iIAAeA,QAAf,EADiB,GAETzB,QAFS,CAEG,KAAKyB,QAFR,CAETzB,OAFS,CAGjBA,OAAO,CAACguB,iBAAR,CAA0B,IAA1B,EACD,C,+CAEY,IACHhuB,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACguB,iBAAR,CAA0B,KAA1B,EACD,C,+BAV6B7qB,qB,EAajB4qB,oGAAf,E;;GCZME,wB,qaACS,IACHC,kCADG,CACmC,KAAKzsB,QADxC,CACHysB,iCADG,CAEXA,iCAAiC,CAACC,OAAlC,GACD,C,sCAEMl/C,Q,CAAU,CACf,yHAAaA,QAAb,EACA,KAAK+Z,IAAL,GACD,C,uDAEgB,CACf,GAAI,CAAC,KAAK/Z,QAAV,CAAoB,CAClB,OACD,CAED,KAAK+Z,IAAL,GACD,C,0DAEgB77B,I,CAAM,oBACkC,KAAKs0C,QADvC,CACbysB,iCADa,gBACbA,iCADa,CACsBluB,OADtB,gBACsBA,OADtB,CAErB,GAAI,CAAC,KAAK/wB,QAAV,CAAoB,CAClB,OACD,CAED,GACE,CAAC+wB,OAAO,CAAC8O,aAAR,CAAsBC,EAAtB,CAAD,EACA/O,OAAO,CAAC2D,eAAR,KAA8Bx2C,IAFhC,CAGE,CACA,OACD,CAED+gE,iCAAiC,CAACE,WAAlC,CAA8CjhE,IAA9C,EACD,C,mDAEc,CACb,KAAK67B,IAAL,GACD,C,mCAEM,qBAKD,KAAKyY,QALJ,CAEHysB,iCAFG,iBAEHA,iCAFG,CAGHluB,OAHG,iBAGHA,OAHG,CAIH5D,WAJG,iBAIHA,WAJG,CAOL8xB,iCAAiC,CAACC,OAAlC,GAEA,GAAInuB,OAAO,CAAC8O,aAAR,CAAsBC,EAAtB,CAAJ,CAA2C,CACzC,KAAK9/B,QAAL,CAAcrY,KAAd,CACGy3D,aADH,CACiBjyB,WADjB,EAEG/1C,OAFH,CAEW,SAAA8G,IAAI,QAAI+gE,kCAAiC,CAACE,WAAlC,CAA8CjhE,IAA9C,CAAJ,EAFf,EAGD,CAED,GACE,CAAC6yC,OAAO,CAAC8O,aAAR,CAAsB,CAACC,aAAD,CAA4BA,OAA5B,CAAtB,CADH,CAEE,CACA,GAAM5hD,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CACA,GAAIx2C,IAAJ,CAAU,CACR+gE,iCAAiC,CAACE,WAAlC,CAA8CjhE,IAA9C,EACD,CACF,CACF,C,yBA9DuBg2C,qB,EAiEX8qB,yFAAf,E;;GClEMK,gE,ygBACS,IACHJ,kCADG,CACmC,KAAKzsB,QADxC,CACHysB,iCADG,CAEXA,iCAAiC,CAACC,OAAlC,GACD,C,oDAEa/3D,O,CAAS,IACb83D,kCADa,CACyB,KAAKzsB,QAD9B,CACbysB,iCADa,CAErBA,iCAAiC,CAACC,OAAlC,GACAD,iCAAiC,CAACE,WAAlC,CAA8Ch4D,OAAO,CAAC0jB,MAAR,CAAe3sB,IAA7D,EACD,C,mDAEc,IACL+gE,kCADK,CACiC,KAAKzsB,QADtC,CACLysB,iCADK,CAEbA,iCAAiC,CAACC,OAAlC,GACD,C,6CAf2ChrB,qB,EAkB/BmrB,qJAAf,E;;GClBMC,0C,mdACQn4D,O,CAAS,oBACc,KAAKqrC,QADnB,CACXzB,OADW,gBACXA,OADW,CACF5D,WADE,gBACFA,WADE,CAEnB,GAAMjvC,KAAI,CAAGiJ,OAAO,CAAC0jB,MAAR,CAAe3sB,IAA5B,CAEA,GAAIA,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,GAAoC,CAAC4D,OAAO,CAAC0tB,UAAR,CAAmBvgE,IAAnB,CAAzC,CAAmE,CACjE6yC,OAAO,CAAC8M,UAAR,CAAmB3/C,IAAnB,EACD,CACF,C,kCARgCg2C,qB,EAWpBorB,6GAAf,E;;GCVMC,oB,2ZACS,IACHN,kCADG,CACmC,KAAKzsB,QADxC,CACHysB,iCADG,CAEXA,iCAAiC,CAACO,cAAlC,GACD,C,sCAEMx/C,Q,CAAU,CACf,uHAAaA,QAAb,EACA,KAAK+Z,IAAL,GACD,C,uDAEgB,CACf,GAAI,CAAC,KAAK/Z,QAAV,CAAoB,CAClB,OACD,CAED,KAAK+Z,IAAL,GACD,C,mDAEc,CACb,KAAKA,IAAL,GACD,C,mCAEM,oBAKD,KAAKyY,QALJ,CAEHysB,iCAFG,gBAEHA,iCAFG,CAGHluB,OAHG,gBAGHA,OAHG,CAIH5D,WAJG,gBAIHA,WAJG,CAOL8xB,iCAAiC,CAACO,cAAlC,GAEA,GAAIzuB,OAAO,CAAC8O,aAAR,CAAsBC,aAAtB,CAAJ,CAAsD,CACpD,KAAK9/B,QAAL,CAAcrY,KAAd,CACG83D,kBADH,CACsBtyB,WADtB,EAEG/1C,OAFH,CAEW,SAAA8G,IAAI,QACX+gE,kCAAiC,CAACS,kBAAlC,CAAqDxhE,IAArD,CADW,EAFf,EAKD,CAED,GAAI6yC,OAAO,CAAC8O,aAAR,CAAsBC,OAAtB,CAAJ,CAAgD,CAC9C,KAAK9/B,QAAL,CAAcrY,KAAd,CACGg4D,kBADH,CACsBxyB,WADtB,EAEG/1C,OAFH,CAEW,SAAA8G,IAAI,QACX+gE,kCAAiC,CAACS,kBAAlC,CAAqDxhE,IAArD,CADW,EAFf,EAKD,CACF,C,uBA/CqBg2C,qB,EAkDTqrB,mFAAf,E;;GC5CMK,wD,iHACJ,sCAAc,uFACZ,mJACA,MAAKC,UAAL,CAAkB,EAAlB,CAFY,aAGb,C,iHAEY,CACX,KAAKrmC,IAAL,GACD,C,6DAEiC,IAAhBt7B,KAAgB,MAAhBA,IAAgB,CAAVmG,MAAU,MAAVA,MAAU,CAChC,GAAI,CAACA,MAAM,CAACC,WAAP,CAAmB,SAAnB,CAAL,CAAoC,CAClC,OACD,CAED,KAAKy1B,IAAL,CAAU77B,IAAV,CAAgBmG,MAAhB,EACD,C,gEAEmC,IAAjBnG,KAAiB,OAAjBA,IAAiB,CAAXysD,OAAW,OAAXA,OAAW,oBACiB,KAAKnY,QADtB,CAC1Bp6C,mBAD0B,gBAC1BA,mBAD0B,CACL42C,iBADK,gBACLA,iBADK,CAElC,GAAM3zC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CAEA,GAAMmW,SAAQ,CAAGs2C,OAAO,CAACt2C,QAAzB,CACA,GAAM3nB,SAAQ,CAAG2nB,QAAQ,CAAGjc,mBAAmB,CAAC0nE,cAApB,EAA5B,CAEA,GAAMnxC,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsBjY,QAAQ,CAAG,CAAjC,CAAoC,CAApC,CAAf,CACA,GAAM2a,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CAEA,IAAK,GAAIo+B,MAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAI54C,QAA7B,CAAuC44C,KAAK,EAA5C,CAAgD,CAC9C,GAAMzhC,QAAO,CAAGyhC,KAAK,CAAGtC,OAAO,CAACv2C,QAAhB,CAA2B,CAA3B,CAA+B,GAA/C,CAEA4a,OAAO,CAAC8E,SAAR,CACE,QAAU,CAAV,CAAc,GAAd,CAAoB,EAApB,CAAyB,GAAzB,CAA+B,GAA/B,CAAqC,GAArC,CAA2CtI,OAA3C,CAAqD,GADvD,CAEAwD,OAAO,CAAC+wC,QAAR,CAAiB9S,KAAjB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EACD,CAED,GAAMh/B,QAAO,CAAG,GAAI73B,8BAAJ,CAAwBu4B,MAAxB,CAAhB,CAEA,GAAMnE,SAAQ,CAAG,GAAIp0B,kCAAJ,CAA4B,CAC3Cm1B,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,gBAAhB,CADoC,CAE3Co1B,OAAO,CAAE,CAFkC,CAG3CO,WAAW,CAAE,IAH8B,CAI3C/zB,GAAG,CAAEi2B,OAJsC,CAA5B,CAAjB,CAOA,GAAMlB,SAAQ,CAAG,GAAI32B,+BAAJ,CACf1J,QADe,CAEf,EAFe,CAGf0E,cAAc,CAAC,CAAD,CAHC,CAIfA,cAAc,CAAC,GAAD,CAJC,CAAjB,CAOA27B,QAAQ,CAACizC,aAAT,CAAyB,CACvBjzC,QAAQ,CAACizC,aAAT,CAAuB,CAAvB,EAA0BhoE,GAA1B,CAA8B,SAACioE,CAAD,QAAO,CACnC,GAAI7pE,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADmC,CAEnC,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAFmC,CAGnC,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAHmC,CAAP,EAA9B,CADuB,CAAzB,CAQA22B,QAAQ,CAACmzC,aAAT,CAAyB,IAAzB,CACA,GAAMC,OAAM,CAAG,GAAI/pE,qBAAJ,CAAe22B,QAAf,CAAyBvC,QAAzB,CAAf,CACA21C,MAAM,CAAC/qE,QAAP,CAAgBzH,CAAhB,CAAoB,CAAC,CAArB,CACA0N,IAAI,CAACiwB,IAAL,CAAUt8B,GAAV,CAAcmxE,MAAd,EACA,KAAKN,UAAL,CAAgBvoE,IAAhB,CAAqB,CAAEg0B,IAAI,CAAEjwB,IAAI,CAACiwB,IAAb,CAAmB60C,MAAM,CAANA,MAAnB,CAArB,EACD,C,yDAEiB,CAChB,KAAK3mC,IAAL,GACD,C,uDAEgB,CACf,KAAKA,IAAL,GACD,C,mCAEM,IACG59B,MADH,CACa,KAAK42C,QADlB,CACG52C,KADH,CAEL,KAAKikE,UAAL,CAAkB,KAAKA,UAAL,CAAgB//D,MAAhB,CAAuB,eAAsB,IAAnBwrB,KAAmB,OAAnBA,IAAmB,CAAb60C,MAAa,OAAbA,MAAa,CAC7D70C,IAAI,CAACoC,MAAL,CAAYyyC,MAAZ,EACD,CAFiB,CAAlB,CAGD,C,kCAEIjiE,I,CAAMmG,M,CAAQ,qCACkC,KAAKmuC,QADvC,CACTp6C,mBADS,iBACTA,mBADS,CACY42C,iBADZ,iBACYA,iBADZ,CAEjB,GAAM3zC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CAEA,GAAMmW,SAAQ,CAAGhQ,MAAM,CAACC,WAAP,CAAmB,aAAnB,CAAjB,CACA,GAAM5X,SAAQ,CAAG2nB,QAAQ,CAAGjc,mBAAmB,CAAC0nE,cAApB,EAA5B,CAEA,GAAMM,SAAQ,CAAG/7D,MAAM,CAACC,WAAP,CAAmB,SAAnB,CAA8B,CAC7C9T,MAAM,CAAE6K,IAAI,CAAC+jB,SAAL,EADqC,CAA9B,CAAjB,CAIA,GAAMuP,OAAM,CAAGqE,cAAc,CAAC1G,MAAf,CAAsBjY,QAAQ,CAAG,CAAjC,CAAoC,CAApC,CAAf,CACA,GAAM2a,QAAO,CAAGL,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB,CAEA,IAAK,GAAIo+B,MAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAI54C,QAA7B,CAAuC44C,KAAK,EAA5C,CAAgD,CAC9C,GAAM10C,aAAY,CAAGlU,MAAM,CAACC,WAAP,CAAmB,kBAAnB,CAAuC,CAC1D5X,QAAQ,CAAEugE,KADgD,CAAvC,CAArB,CAIA,GAAMzhC,QAAO,CAAG,CAAC,IAAMjT,YAAP,EAAuB,GAAvC,CAEA,GAAIiT,OAAO,CAAG,CAAd,CAAiB,CACfA,OAAO,CAAG,CAAV,CACD,CAEDwD,OAAO,CAAC8E,SAAR,CACE,QAAU,CAAV,CAAc,GAAd,CAAoB,EAApB,CAAyB,GAAzB,CAA+B,GAA/B,CAAqC,GAArC,CAA2CtI,OAA3C,CAAqD,GADvD,CAEAwD,OAAO,CAAC+wC,QAAR,CAAiB9S,KAAjB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EACD,CAED,GAAMh/B,QAAO,CAAG,GAAI73B,8BAAJ,CAAwBu4B,MAAxB,CAAhB,CAEA,GAAMnE,SAAQ,CAAG,GAAIp0B,kCAAJ,CAA4B,CAC3Cm1B,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,gBAAhB,CADoC,CAE3Co1B,OAAO,CAAE,CAFkC,CAG3CO,WAAW,CAAE,IAH8B,CAI3C/zB,GAAG,CAAEi2B,OAJsC,CAA5B,CAAjB,CAOAmyC,QAAQ,CAAChpE,OAAT,CAAiB,SAACk4B,IAAD,CAAU,CACzB,GAAM+wC,UAAS,CACb/wC,IAAI,CAACngC,KAAL,GAAemgC,IAAI,CAAClgC,GAApB,CAA0B,GAA1B,CAAgC4B,YAAY,CAACs+B,IAAI,CAACngC,KAAN,CAAamgC,IAAI,CAAClgC,GAAlB,CAD9C,CAGA,GAAM29B,SAAQ,CAAG,GAAI32B,+BAAJ,CACf1J,QADe,CAEf,EAFe,CAGf0E,cAAc,CAACtC,cAAc,CAAC,GAAD,CAAM,CAACwgC,IAAI,CAAClgC,GAAZ,CAAf,CAHC,CAIfgC,cAAc,CAACivE,SAAD,CAJC,CAAjB,CAOAtzC,QAAQ,CAACizC,aAAT,CAAyB,CACvBjzC,QAAQ,CAACizC,aAAT,CAAuB,CAAvB,EAA0BhoE,GAA1B,CAA8B,SAACsoE,MAAD,QAAY,CACxC,GAAIlqE,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADwC,CAExC,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAFwC,CAGxC,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAHwC,CAAZ,EAA9B,CADuB,CAAzB,CAQA22B,QAAQ,CAACmzC,aAAT,CAAyB,IAAzB,CACA,GAAMC,OAAM,CAAG,GAAI/pE,qBAAJ,CAAe22B,QAAf,CAAyBvC,QAAzB,CAAf,CACA21C,MAAM,CAAC/qE,QAAP,CAAgBzH,CAAhB,CAAoB,CAAC,CAArB,CACA0N,IAAI,CAACiwB,IAAL,CAAUt8B,GAAV,CAAcmxE,MAAd,EACA,MAAI,CAACN,UAAL,CAAgBvoE,IAAhB,CAAqB,CAAEg0B,IAAI,CAAEjwB,IAAI,CAACiwB,IAAb,CAAmB60C,MAAM,CAANA,MAAnB,CAArB,EACD,CAxBD,EAyBD,C,yCAlJuCjsB,qB,EAqJ3B0rB,8HAAf,E;;ACtJA,GAAMp1C,mCAAQ,CAAG,GAAIp0B,kCAAJ,CAA4B,CAC3Cm1B,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,gBAAhB,CADoC,CAE3Co1B,OAAO,CAAE,GAFkC,CAG3CO,WAAW,CAAE,IAH8B,CAA5B,CAAjB,C,GAMMw0C,oD,+GACJ,oCAAc,qFACZ,iJACA,MAAKV,UAAL,CAAkB,EAAlB,CAFY,aAGb,C,+GAEY,IACH9uB,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAGXA,OAAO,CAACyvB,kBAAR,GACD,C,yDAEoC,IAArBtiE,KAAqB,MAArBA,IAAqB,CAAfmG,MAAe,MAAfA,MAAe,CAAPwrD,GAAO,MAAPA,GAAO,oBACF,KAAKrd,QADH,CAC3BzB,OAD2B,gBAC3BA,OAD2B,CAClB5D,WADkB,gBAClBA,WADkB,CAGnC,GAAI0iB,GAAG,EAAI,CAACxrD,MAAM,CAACo8D,QAAP,EAAR,EAA6B,CAACviE,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAlC,CAA+D,CAC7D,OACD,CAED,GAAI4D,OAAO,CAACyhB,gBAAR,CAAyBnuD,MAAzB,CAAJ,CAAsC,CACpC0sC,OAAO,CAAC2vB,cAAR,CAAuBr8D,MAAvB,EACD,CAFD,IAEO,CACL0sC,OAAO,CAAC4vB,YAAR,CAAqBziE,IAArB,CAA2BmG,MAA3B,EACD,CAED0sC,OAAO,CAAC6vB,WAAR,GACD,C,uCA1BqC1sB,qB,EA6BzBqsB,wHAAf,E;;GCzCMM,8C,4dACS,IACH9vB,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAAC+vB,aAAR,CAAsB,EAAtB,EACD,C,sCAEM9gD,Q,CAAU,IACP+wB,QADO,CACK,KAAKyB,QADV,CACPzB,OADO,CAEf,oIAAa/wB,QAAb,EAEA,GAAM9hB,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CACA,GAAIx2C,IAAJ,CAAU,CACR6yC,OAAO,CAAC+vB,aAAR,CACE5iE,IAAI,CAACiG,OAAL,CAAaC,UAAb,GAA0BtE,MAA1B,CAAiC,SAAAuE,MAAM,QAAIA,OAAM,CAAC08D,gBAAP,EAAJ,EAAvC,CADF,EAGD,CACF,C,kDAEY7iE,I,CAAM,IACT6yC,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAI,CAAC,KAAK/wB,QAAV,CAAoB,CAClB,OACD,CAED+wB,OAAO,CAAC+vB,aAAR,CACE5iE,IAAI,CAACiG,OAAL,CAAaC,UAAb,GAA0BtE,MAA1B,CAAiC,SAAAuE,MAAM,QAAIA,OAAM,CAAC08D,gBAAP,EAAJ,EAAvC,CADF,EAGD,C,oCA3BkC7sB,qB,EA8BtB2sB,+GAAf,E;;GC7BMG,4C,ydACK,gCAC2B,KAAKxtE,KADhC,CACC0K,IADD,aACCA,IADD,CACOmG,MADP,aACOA,MADP,CACe0sC,OADf,aACeA,OADf,IAEC5D,YAFD,CAEiB4D,OAAO,CAACyB,QAFzB,CAECrF,WAFD,CAIP,GAAMwhB,OAAM,CAAGzwD,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeF,WAAf,CAAf,CACA,GAAMqxB,aAAY,CAAGztB,OAAO,CAAC2D,eAAR,EAArB,CAEA,GAAIrwC,MAAM,CAACwD,WAAP,EAAJ,CAA0B,CACxB,MAAO,KAAP,CACD,CAED,MACE,wBAAC,WAAD,MACGxD,MAAM,CACJC,WADF,CAEG,sBAFH,CAGG,CAAEysC,OAAO,CAAPA,OAAF,CAAW4d,MAAM,CAANA,MAAX,CAAmB6P,YAAY,CAAZA,YAAnB,CAHH,CAIG,EAJH,EAME94D,IANF,CAMO,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAACkX,IAAF,CAASjX,CAAC,CAACiX,IAAf,CAAqB,CACnB,MAAO,EAAP,CACD,CAED,GAAIlX,CAAC,CAACkX,IAAF,CAASjX,CAAC,CAACiX,IAAf,CAAqB,CACnB,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAhBF,EAiBE1N,GAjBF,CAiBM,cAA2C/J,CAA3C,KAAGmkC,IAAH,MAAGA,GAAH,CAAQ6uC,eAAR,MAAQA,eAAR,CAAyBC,cAAzB,MAAyBA,cAAzB,OACH,wBAAC,aAAD,EACE,GAAG,wCAAkCjzE,CAAlC,CADL,CAEE,GAAG,CAAEmkC,GAFP,CAGE,QAAQ,CAAE6uC,eAAe,CAAGA,eAAe,EAAlB,CAAuB,KAHlD,CAIE,OAAO,CAAE,iBAACvrE,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GACAwtE,cAAc,GACdnwB,OAAO,CAAC2Z,sBAAR,CAA+BxsD,IAA/B,CAAqCmG,MAArC,EACA0sC,OAAO,CAAC5uC,gBAAR,CAAyBjE,IAAzB,EACA,KAAI,CAACisD,WAAL,GACD,CAXH,EADG,EAjBN,CADH,CADF,CAoCD,C,mCAhDiC91D,kB,EAmDrB2sE,4GAAf,E;;GCnDMG,sD,2eACK3uB,Q,CAAU,CACjB,0IAAeA,QAAf,EADiB,GAETzB,QAFS,CAEG,KAAKyB,QAFR,CAETzB,OAFS,CAIjBA,OAAO,CAACqwB,yBAAR,CAAkC,KAAKvC,mBAAvC,EACD,C,+CAEY,CACX,6IADW,GAEH9tB,QAFG,CAES,KAAKyB,QAFd,CAEHzB,OAFG,CAIXA,OAAO,CAACqwB,yBAAR,CAAkC,IAAlC,EACD,C,iEAEqB,CACpB,MAAOJ,6BAAP,CACD,C,wCAjBsC9sB,qB,EAoB1BitB,+HAAf,E;;GCrBME,sD,gHACJ,qCAAc,sFACZ,kJAEA,MAAKvQ,aAAL,CAAqB,IAArB,CAHY,aAIb,C,4HAEkB,IACT/f,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAI,KAAK+f,aAAT,CAAwB,CACtB/f,OAAO,CAACuwB,yBAAR,CAAkC,KAAKxQ,aAAvC,CAAsD,KAAKx+D,OAA3D,EACD,CACF,C,yDAEiB,CAChB,KAAKknC,IAAL,GACD,C,+CAEY,IACHuX,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEX,GAAI,KAAKqM,WAAT,CAAsB,CACpBrM,OAAO,CAACuwB,yBAAR,CAAkC,IAAlC,CAAwC,IAAxC,EACD,CACF,C,yDAEuC,IAAxBj9D,OAAwB,MAAxBA,MAAwB,CAAhB/R,OAAgB,MAAhBA,OAAgB,CAAPu9D,GAAO,MAAPA,GAAO,IAC9B9e,QAD8B,CAClB,KAAKyB,QADa,CAC9BzB,OAD8B,CAGtC,GAAI,CAAC8e,GAAL,CAAU,CACR,OACD,CAED,KAAKiB,aAAL,CAAqBzsD,MAArB,CACA,KAAK/R,OAAL,CAAeA,OAAf,CACAy+C,OAAO,CAACuwB,yBAAR,CAAkC,KAAKxQ,aAAvC,CAAsD,KAAKx+D,OAA3D,EACD,C,+CAEY,CACX,KAAKknC,IAAL,GACD,C,oDAEaryB,O,CAAS,CACrB,KAAKqyB,IAAL,GACD,C,mDAEc,CACb,KAAKA,IAAL,GACD,C,mCAEM,CACL,GAAI,CAAC,KAAKs3B,aAAV,CAAyB,CACvB,OACD,CAHI,GAKG/f,QALH,CAKe,KAAKyB,QALpB,CAKGzB,OALH,CAMLA,OAAO,CAACuwB,yBAAR,CAAkC,IAAlC,CAAwC,IAAxC,EACA,KAAKxQ,aAAL,CAAqB,IAArB,CACA,KAAKx+D,OAAL,CAAe,IAAf,CACD,C,wCA1DsC4hD,qB,EA6D1BmtB,+HAAf,E;;GC7DME,sC,wcACS,IACHxwB,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEXA,OAAO,CAACywB,SAAR,CAAkB,EAAlB,EACD,C,2DAEkB,IACTzwB,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAM7yC,KAAI,CAAG6yC,OAAO,CAAC2D,eAAR,EAAb,CAEA3D,OAAO,CAACywB,SAAR,CAAkBtjE,IAAI,CAACqoB,iBAAL,CAAuBgpB,SAAvB,EAAlB,EACD,C,kDAEYrxC,I,CAAM,IACT6yC,QADS,CACG,KAAKyB,QADR,CACTzB,OADS,CAEjB,GAAI,CAAC,KAAK/wB,QAAV,CAAoB,CAClB,OACD,CAED+wB,OAAO,CAACywB,SAAR,CAAkBtjE,IAAI,CAACqoB,iBAAL,CAAuBgpB,SAAvB,EAAlB,EACD,C,gCApB8B2E,qB,EAuBlBqtB,8GAAf,E;;GClBME,kC,sGACJ,2BAAc,4EACZ,wIAEA,MAAKC,OAAL,CAAe,KAAf,CAHY,aAIb,C,0FAEM,oBACsC,KAAKlvB,QAD3C,CACGxD,iBADH,gBACGA,iBADH,CACsB7B,WADtB,gBACsBA,WADtB,CAEL6B,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3CA,IAAI,CAACysC,kBAAL,CAAwBra,OAAxB,CAAkC,IAAlC,CACA,GAAMlC,MAAK,CAAGlwB,IAAI,CAAC6C,IAAL,CAAUooB,MAAV,CAAiBovB,OAAjB,CAAyBvI,WAAzB,EACVh3C,cADU,CAEVG,WAFJ,CAIA+E,IAAI,CAACwsC,UAAL,CAAgBzwC,OAAhB,CAAwB,SAAAmiC,MAAM,QAAIA,OAAM,CAACM,eAAP,CAAuBtO,KAAvB,CAAJ,EAA9B,EACAlwB,IAAI,CAAC8sC,IAAL,CAAU1M,QAAV,CAAmBlQ,KAAnB,EACAlwB,IAAI,CAAC8sC,IAAL,CAAUpO,IAAV,GACD,CATD,EAWA,KAAK2nC,OAAL,CAAe,IAAf,CACD,C,mCAEM,IACG1yB,kBADH,CACyB,KAAKwD,QAD9B,CACGxD,iBADH,CAELA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3CA,IAAI,CAACysC,kBAAL,CAAwBra,OAAxB,CAAkC,KAAlC,CAEApyB,IAAI,CAAC8sC,IAAL,CAAU3O,IAAV,GACD,CAJD,EAMA,KAAKkoC,OAAL,CAAe,KAAf,CACD,C,sCAEM1hD,Q,CAAU,CACf,8HAAaA,QAAb,EACA,KAAK+Z,IAAL,GACD,C,2CAEgB,IAARr+B,KAAQ,MAARA,IAAQ,CACf,GAAIA,IAAI,CAAG3F,iBAAP,EAA4B,KAAK2rE,OAArC,CAA8C,CAC5C,KAAKloC,IAAL,GACD,CAED,GAAI99B,IAAI,EAAI3F,iBAAR,EAA6B,CAAC,KAAK2rE,OAAvC,CAAgD,CAC9C,KAAK3nC,IAAL,GACD,CACF,C,+CAEY,CACX,KAAKP,IAAL,GACD,C,8BAnD4B0a,qB,EAsDhButB,iGAAf,E;;GCnDME,0B,oHACJ,uBAAc,wEACZ,oIAEA,MAAKjmE,IAAL,CAAY,CAAZ,CACA,MAAKkmE,YAAL,CAAoB,KAApB,CAJY,aAKb,C,qGAEYvmE,I,CAAM,IACT8xC,YADS,CACO,KAAKqF,QADZ,CACTrF,WADS,CAEjB,GAAM5hB,MAAK,CAAGlwB,IAAI,CAAC6C,IAAL,CAAUooB,MAAV,CAAiBovB,OAAjB,CAAyBvI,WAAzB,EACV52C,wBADU,CAEVG,qBAFJ,CAIA2E,IAAI,CAACusC,OAAL,CAAanO,YAAb,CAA0BlO,KAA1B,EACD,C,mDAEc,oBAC8B,KAAKinB,QADnC,CACLxD,iBADK,gBACLA,iBADK,CACc7B,WADd,gBACcA,WADd,CAEb6B,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3C,GAAMmtC,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyCr0C,IAAI,CAAC6C,IAA9C,CAAd,CACAsqC,KAAK,CAACZ,OAAN,CAAclO,WAAd,GACAr+B,IAAI,CAACusC,OAAL,CAAalO,WAAb,GACD,CAJD,EAKD,C,oDAEavyB,O,CAAS,CACrB,GAAM9L,KAAI,CAAG8L,OAAO,CAAC0jB,MAArB,CACA,KAAKg3C,YAAL,CAAkBxmE,IAAlB,EACD,C,uDAEgB,CACf,KAAKymE,UAAL,CAAgB,KAAKpmE,IAArB,CAA2B,IAA3B,EACD,C,2DAEkB,CACjB,KAAKomE,UAAL,CAAgB,KAAKpmE,IAArB,CAA2B,IAA3B,EACD,C,mDAEc,CACb,KAAKqmE,YAAL,GACA,KAAKD,UAAL,CAAgB,KAAKpmE,IAArB,CAA2B,IAA3B,EACD,C,2CAEU,CACT,KAAKqmE,YAAL,GACD,C,6CAEW,CACV,KAAKC,WAAL,CAAiB,CAAjB,EADU,oBAE6C,KAAKxvB,QAFlD,CAEFxD,iBAFE,iBAEFA,iBAFE,CAEiB7B,WAFjB,iBAEiBA,WAFjB,CAE8B6R,UAF9B,iBAE8BA,UAF9B,CAGVhQ,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3C,GAAMkwB,MAAK,CAAGlwB,IAAI,CAAC6C,IAAL,CAAUooB,MAAV,CAAiBovB,OAAjB,CAAyBvI,WAAzB,EACVh3C,cADU,CAEVG,WAFJ,CAIA,GAAMkyC,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyCr0C,IAAI,CAAC6C,IAA9C,CAAd,CACAsqC,KAAK,CAACy5B,WAAN,CAAkB12C,KAAlB,EACAlwB,IAAI,CAAC4mE,WAAL,CAAiB12C,KAAjB,EACD,CARD,EASA,KAAKq2C,YAAL,CAAoB,IAApB,CACA5iB,UAAU,CAACkjB,eAAX,GACD,C,6CAEW,CACV,KAAKF,WAAL,CAAiB,CAAjB,EADU,oBAEgC,KAAKxvB,QAFrC,CAEFxD,iBAFE,iBAEFA,iBAFE,CAEiBgQ,UAFjB,iBAEiBA,UAFjB,CAGVhQ,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3CA,IAAI,CAAC8mE,WAAL,GACA,GAAM35B,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyCr0C,IAAI,CAAC6C,IAA9C,CAAd,CACAsqC,KAAK,CAAC25B,WAAN,GACD,CAJD,EAMA,KAAKP,YAAL,CAAoB,KAApB,CACA5iB,UAAU,CAACojB,iBAAX,GACD,C,gDAEW1qE,K,CAAO,IACTs3C,kBADS,CACa,KAAKwD,QADlB,CACTxD,iBADS,CAEjBA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAAiE,IAAI,CAAI,CAC3CA,IAAI,CAACusC,OAAL,CAAajO,QAAb,CAAsBjiC,KAAtB,EACA,GAAM8wC,MAAK,CAAGwG,iBAAiB,CAACU,sBAAlB,CAAyCr0C,IAAI,CAAC6C,IAA9C,CAAd,CACAsqC,KAAK,CAACZ,OAAN,CAAcjO,QAAd,CAAuBjiC,KAAvB,EACD,CAJD,EAKD,C,8CAEUgE,I,CAAqB,IAAfyxB,MAAe,2DAAP,KAAO,CAC9B,GAAI,CAAC,KAAKqlB,QAAV,CAAoB,CAClB,OACD,CAED,GAAI92C,IAAI,CAAG3F,iBAAP,GAA6Bo3B,KAAK,EAAI,CAAC,KAAKy0C,YAA5C,CAAJ,CAA+D,CAC7D,KAAKS,SAAL,GACD,CAED,GAAI3mE,IAAI,EAAI3F,iBAAR,GAA8Bo3B,KAAK,EAAI,KAAKy0C,YAA5C,CAAJ,CAA+D,CAC7D,KAAKU,SAAL,GACD,CAED,GAAI5mE,IAAI,CAAG3F,iBAAX,CAA8B,CAC5B;;;UAKA,GAAMwsE,WAAU,CAAG7mE,IAAnB,CAEA,KAAKsmE,WAAL,CAAiBO,UAAjB,EACD,CACF,C,2CAEgB,IAAR7mE,KAAQ,MAARA,IAAQ,CACf,GAAIA,IAAI,GAAK,KAAKA,IAAlB,CAAwB,CACtB,OACD,CAED,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAKomE,UAAL,CAAgBpmE,IAAhB,EACD,C,+CAEY,CACX,+HACA,KAAK4mE,SAAL,GACD,C,0BA5HwB7lB,8B,EA+HZklB,qFAAf,E;;GC/HMa,8B,sHACJ,yBAAc,0EACZ,sIAEA,MAAK9mE,IAAL,CAAY,CAAZ,CACA,MAAKgmE,OAAL,CAAe,KAAf,CACA,MAAKe,WAAL,CAAmB,KAAnB,CALY,aAMb,CAED;;;oHAKiBvkE,I,CAAM,CACrB,KAAK67B,IAAL,CAAU77B,IAAV,EACD,C,8CAEUA,I,CAAM,oBACwB,KAAKs0C,QAD7B,CACPxD,iBADO,gBACPA,iBADO,CACY+B,OADZ,gBACYA,OADZ,CAGf,GAAI7yC,IAAI,CAAC2J,WAAL,EAAJ,CAAwB,CACtB,OACD,CAED,GAAMxM,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CACA6yC,OAAO,CAAC2xB,aAAR,CAAsBrnE,IAAtB,EACD,CAED;;;;;sCAOKsnE,Q,CAAU,qBAC0B,KAAKnwB,QAD/B,CACLxD,iBADK,iBACLA,iBADK,CACc+B,OADd,iBACcA,OADd,CAGb/B,iBAAiB,CACduF,QADH,GAEGz0C,MAFH,CAEU,SAACzE,IAAD,QAAU,CAACA,IAAI,CAAC6C,IAAL,CAAU2J,WAAV,EAAX,EAFV,EAGGzQ,OAHH,CAGW,SAACiE,IAAD,CAAU,CACjB01C,OAAO,CAAC2xB,aAAR,CAAsBrnE,IAAtB,CAA4BsnE,QAA5B,EACD,CALH,EAMA,KAAKjB,OAAL,CAAe,IAAf,CACA,KAAKe,WAAL,CAAmBE,QAAnB,CACD,C,mCAEM,qBACkC,KAAKnwB,QADvC,CACGxD,iBADH,iBACGA,iBADH,CACsB+B,OADtB,iBACsBA,OADtB,CAEL/B,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAACiE,IAAD,CAAU,CAC7C01C,OAAO,CAAC6xB,aAAR,CAAsBvnE,IAAtB,EACD,CAFD,EAGA,KAAKqmE,OAAL,CAAe,KAAf,CACD,C,8CAEUhmE,I,CAAqB,IAAfyxB,MAAe,2DAAP,KAAO,CAC9B,GAAI,CAAC,KAAKqlB,QAAV,CAAoB,CAClB,OACD,CAED,GAAI92C,IAAI,CAAG1F,kBAAP,GAA8Bm3B,KAAK,EAAI,KAAKu0C,OAA5C,CAAJ,CAA0D,CACxD,KAAKloC,IAAL,GACD,CAED,GAAI99B,IAAI,EAAI1F,kBAAZ,CAAgC,CAC9B;AAEA,GAAI,sCAAuCm3B,KAAK,EAAI,CAAC,KAAKu0C,OAA1D,CAAmE,CACjE,KAAK3nC,IAAL,GACD,CACF,CACF,C,2CAEgB,IAARr+B,KAAQ,MAARA,IAAQ,CACf,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAKomE,UAAL,CAAgBpmE,IAAhB,EACD,C,+CAEY,qBAC4B,KAAK82C,QADjC,CACHxD,iBADG,iBACHA,iBADG,CACgB+B,OADhB,iBACgBA,OADhB,CAEX/B,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAACiE,IAAD,CAAU,CAC7C01C,OAAO,CAAC8xB,eAAR,CAAwBxnE,IAAxB,EACD,CAFD,EAGD,C,4BAtF0BohD,8B,EAyFd+lB,2FAAf,E;;ACtFA,GAAMpuC,2BAAO,CAAG,GAAIh+B,8BAAJ,GAA0B60B,IAA1B,CAA+B,wBAA/B,CAAhB,C,GAEM63C,sC,0HACJ,6BAAc,8EACZ,0IACA,MAAKlhE,eAAL,CAAuB,GAAI0F,yBAAJ,EAAvB,CACA,MAAKy7D,KAAL,CAAa,EAAb,CACA,MAAKC,KAAL,CAAa,EAAb,CACA,MAAKtnE,IAAL,CAAY,CAAZ,CALY,aAMb,C,qGAESskB,Q,CAAU,iBAClB,GAAMijD,aAAY,CAAG,EAArB,CADkB,mBAEa,KAAKzwB,QAFlB,CAEV52C,KAFU,gBAEVA,KAFU,CAEHuxC,WAFG,gBAEHA,WAFG,CAGlBntB,QAAQ,CAAC+6C,QAAT,CAAkBC,iBAAlB,GAAsC5jE,OAAtC,CAA8C,SAAAwd,MAAM,CAAI,CACtD,GAAMsuD,YAAW,CAAGtuD,MAAM,CAACoE,cAAP,CAAsBxhB,QAAtB,EAApB,CACA,GAAMjG,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BzqC,MAAM,CAACsS,QAAlC,CAAf,CACA,GAAMi8C,aAAY,CAAG9xE,wBAAwB,CAC3CujB,MAAM,CAACoE,cADoC,CAE3CznB,MAAM,CAAC4O,QAAP,CAAgBqC,yBAAhB,GAA4CpN,QAFD,CAA7C,CAKA,GACE,CAAC6tE,YAAY,CAACz2D,IAAb,CACC,kBAAGpX,SAAH,MAAGA,QAAH,CAAa7D,MAAb,MAAaA,MAAb,CAAqBf,MAArB,MAAqBA,MAArB,OACE4E,SAAQ,CAACqE,MAAT,CAAgBypE,WAAhB,GACA3xE,MAAM,GAAKA,MADX,EAEAf,MAAM,GAAK2yE,YAHb,EADD,CADH,CAOE,CACAF,YAAY,CAAC3rE,IAAb,CAAkB,CAChBlC,QAAQ,CAAE8tE,WADM,CAEhB3xE,MAAM,CAAEA,MAFQ,CAGhBf,MAAM,CAAE2yE,YAHQ,CAAlB,EAKD,CACF,CAtBD,EAwBAF,YAAY,CAAC7rE,OAAb,CAAqB,eAAkC,IAA/BhC,SAA+B,OAA/BA,QAA+B,CAArB7D,MAAqB,OAArBA,MAAqB,CAAbf,MAAa,OAAbA,MAAa,CACrD,GAAMgM,IAAG,CAAGpH,QAAQ,CAACguE,QAAT,EAAZ,CACA,GAAM73C,MAAK,CAAGvL,QAAQ,CAACs1B,KAAT,CAAe+tB,iBAAf,CAAiCl2B,WAAjC,CAA8C57C,MAA9C,EACV+E,WADU,CAEVH,cAFJ,CAIA,GACE,CAAC,MAAI,CAAC6sE,KAAL,CAAWx2D,IAAX,CACC,SAAAhT,GAAG,QAAIA,IAAG,CAAC8pE,UAAJ,CAAe9mE,GAAf,GAAuBhD,GAAG,CAAC+pE,cAAJ,CAAmBh4C,KAAnB,CAA3B,EADJ,CADH,CAIE,CACA,GAAMgO,OAAM,CAAG,GAAIxL,cAAJ,CACbqG,0BADa,CAEb,CACE34B,KAAK,CAAEO,WAAW,CAACrB,eAAZ,GAAgC,GADzC,CAEEM,MAAM,CAAEe,WAAW,CAACtB,gBAAZ,GAAiC,GAF3C,CAFa,CAMb,CANa,EAQZoG,WARY,CAQAtE,GARA,EASZo5B,UATY,CASD,GATC,EAUZkE,oBAVY,CAUS,CAVT,EAWZD,eAXY,CAWItO,KAXJ,EAYZqO,SAZY,CAYF,CAACppC,MAZC,EAaZupC,IAbY,EAAf,CAcA,MAAI,CAACipC,KAAL,CAAW1rE,IAAX,CAAgBiiC,MAAhB,EACA39B,KAAK,CAAC5M,GAAN,CAAUuqC,MAAM,CAACjO,IAAjB,EACD,CACF,CA5BD,EA8BA,KAAK03C,KAAL,CAAa,KAAKA,KAAL,CAAWljE,MAAX,CAAkB,SAAAy5B,MAAM,CAAI,CACvC,GACE,CAAC0pC,YAAY,CAACz2D,IAAb,CAAkB,mBAAGpX,SAAH,OAAGA,QAAH,OACjBmkC,OAAM,CAAC+pC,UAAP,CAAkBluE,QAAQ,CAACguE,QAAT,EAAlB,CADiB,EAAlB,CADH,CAIE,CACAxnE,KAAK,CAAC8xB,MAAN,CAAa6L,MAAM,CAACjO,IAApB,EACA,MAAO,MAAP,CACD,CAED,MAAO,KAAP,CACD,CAXY,CAAb,CAYD,C,sCAEMtL,Q,CAAU,iBACf,gIAAaA,QAAb,EAEAA,QAAQ,CAAC+6C,QAAT,CAAkBC,iBAAlB,GAAsC5jE,OAAtC,CAA8C,SAAAwd,MAAM,CAAI,CACtD,GAAMrjB,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BzqC,MAAM,CAACsS,QAAlC,CAAf,CACA,MAAI,CAACs8C,sBAAL,CAA4B5uD,MAA5B,CAAoCrjB,MAApC,EACD,CAHD,EAKA,KAAKkyE,SAAL,CAAezjD,QAAf,EACD,C,0DAEgB9hB,I,CAAM,iBACrB,GAAI,CAAC,KAAK8hB,QAAV,CAAoB,CAClB,OACD,CAED,KAAKA,QAAL,CAAc+6C,QAAd,CACGC,iBADH,GAEGl7D,MAFH,CAEU,SAAA8U,MAAM,QAAIA,OAAM,CAACsS,QAAP,GAAoBhpB,IAAI,CAACyB,EAA7B,EAFhB,EAGGvI,OAHH,CAGW,SAAAwd,MAAM,CAAI,CACjB,MAAI,CAAC4uD,sBAAL,CAA4B5uD,MAA5B,CAAoC1W,IAApC,EACD,CALH,EAOA,KAAKulE,SAAL,CAAe,KAAKzjD,QAApB,EACD,C,sEAEsBpL,M,CAAQrjB,M,CAAQ,qBACsB,KAAKihD,QAD3B,CAC7BgB,oBAD6B,iBAC7BA,oBAD6B,CACP53C,KADO,iBACPA,KADO,CACAozC,iBADA,iBACAA,iBADA,CAGrC,GAAM3zC,KAAI,CAAGm4C,oBAAoB,CAACkwB,sBAArB,CAA4C9uD,MAA5C,CAAb,CACA,GAAMqlB,UAAS,CAAGpsC,wBAAwB,CAACwN,IAAI,CAACwd,aAAL,CAAmBlZ,EAApB,CAA1C,CACA,GAAMgkE,SAAQ,CAAG,GAAIpnE,aAAJ,CACf09B,SAAS,GAAK,EAAd,CAAmB,IADJ,CAEfA,SAAS,GAAK,EAAd,CAAmB,IAFJ,CAGfA,SAAS,GAAK,EAAd,CAAmB,CAHJ,CAAjB,CAMA,GAAMuU,eAAc,CAAGj9C,MAAM,CAAC4O,QAAP,CAAgBqC,yBAAhB,GAA4CpN,QAAnE,CAEA,GAAMwuE,gBAAe,CAAGhvD,MAAM,CAACoE,cAAP,CACrB+pB,IADqB,CAChBiM,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,EAAoC20C,KADpB,EAErBl3C,GAFqB,CAEjB20E,QAFiB,CAAxB,CAIAtoE,IAAI,CAACyF,WAAL,CAAiB8iE,eAAjB,EACAvoE,IAAI,CAACu+B,SAAL,CAAe,CAACvoC,wBAAwB,CAACuyE,eAAD,CAAkBp1B,cAAlB,CAAxC,EAEA,GAAIrG,KAAI,CAAG,KAAK46B,KAAL,CAAWv2D,IAAX,CACT,mBAAGq3D,SAAH,OAAGA,QAAH,CAAa38C,QAAb,OAAaA,QAAb,OACE28C,SAAQ,GAAKjvD,MAAM,CAACjV,EAApB,EAA0BunB,QAAQ,GAAK31B,MAAM,CAACoO,EADhD,EADS,CAAX,CAKA,GAAI,CAACwoC,IAAL,CAAW,CACTA,IAAI,CAAG,GAAIpR,cAAJ,CAASn7B,KAAT,CAAgB,CACrBzM,KAAK,CAAEy0E,eADc,CAErBx0E,GAAG,CAAEo/C,cAAc,CAACzL,IAAf,CAAoBiM,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,EAAoC20C,KAAxD,CAFgB,CAGrBzqC,KAAK,CAAE,CAHc,CAIrB8vB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,GAAK,GAAhC,CAAqC,GAAK,GAA1C,CAJc,CAKrBo1B,OAAO,CAAE,IALY,CAMrBK,WAAW,CAAE,CANQ,CAAhB,CAAP,CAQAsc,IAAI,CAACpO,IAAL,GACA,KAAKgpC,KAAL,CAAWzrE,IAAX,CAAgB,CACd4vB,QAAQ,CAAE31B,MAAM,CAACoO,EADH,CAEdkkE,QAAQ,CAAEjvD,MAAM,CAACjV,EAFH,CAGdwoC,IAAI,CAAJA,IAHc,CAAhB,EAKD,CAfD,IAeO,CACLA,IAAI,CAACA,IAAL,CAAU5b,MAAV,CACEq3C,eADF,CAEEp1B,cAAc,CAACzL,IAAf,CAAoBiM,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,EAAoC20C,KAAxD,CAFF,CAGE,CAHF,EAKD,CAED7qC,IAAI,CAAC0+B,IAAL,GACD,C,+CAEY,qBAC6B,KAAKyY,QADlC,CACHgB,oBADG,iBACHA,oBADG,CACmB53C,KADnB,iBACmBA,KADnB,CAEX43C,oBAAoB,CAACe,QAArB,GAAgCn9C,OAAhC,CAAwC,SAAAiE,IAAI,CAAI,CAC9CA,IAAI,CAACm+B,IAAL,GACD,CAFD,CAEG,IAFH,EAIA,KAAKupC,KAAL,CAAW3rE,OAAX,CAAmB,SAAA+wC,IAAI,QAAIA,KAAI,CAACA,IAAL,CAAUwG,OAAV,EAAJ,EAAvB,EACA,KAAKq0B,KAAL,CAAW5rE,OAAX,CAAmB,SAAAmiC,MAAM,QAAI39B,MAAK,CAAC8xB,MAAN,CAAa6L,MAAM,CAACjO,IAApB,CAAJ,EAAzB,EACA,OAAO,qIACR,C,4CAEgB,IAAR5vB,KAAQ,OAARA,IAAQ,CACf,GAAIA,IAAI,GAAK,KAAKA,IAAlB,CAAwB,CACtB,OACD,CAED,KAAKA,IAAL,CAAYA,IAAZ,CAEA,GAAIA,IAAI,CAAG,CAAX,CAAc,CACZ,KAAKsnE,KAAL,CAAW5rE,OAAX,CAAmB,SAAAmiC,MAAM,CAAI,CAC3BA,MAAM,CAACI,QAAP,CAAgBj+B,IAAI,CAAG,GAAvB,CAA4BA,IAAI,CAAG,GAAnC,EACD,CAFD,EAGD,CAJD,IAIO,CACL,KAAKsnE,KAAL,CAAW5rE,OAAX,CAAmB,SAAAmiC,MAAM,CAAI,CAC3BA,MAAM,CAACI,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,CAFD,EAGD,CACF,C,gCAxL8B8iB,8B,EA2LlBqmB,uGAAf,E;;GCtMMgB,oE,uHACJ,4CAAc,6FACZ,yJAEA,MAAKf,KAAL,CAAa,EAAb,CAHY,aAIb,C,qIAEiC,IAAhB7kE,KAAgB,MAAhBA,IAAgB,CAAV3M,MAAU,MAAVA,MAAU,CAChC,KAAKwoC,IAAL,CAAU77B,IAAV,CAAgB3M,MAAhB,EACD,C,gEAEkC,IAAhB2M,KAAgB,OAAhBA,IAAgB,CAAV3M,MAAU,OAAVA,MAAU,CACjC,KAAKwoC,IAAL,CAAU77B,IAAV,CAAgB3M,MAAhB,EACD,C,uDAEgB,CACf,KAAKioC,IAAL,GACD,C,yDAEiB,CAChB,KAAKA,IAAL,GACD,C,mCAEM,CACL,KAAKupC,KAAL,CAAW3rE,OAAX,CAAmB,SAAA+wC,IAAI,QAAIA,KAAI,CAACwG,OAAL,EAAJ,EAAvB,EACA,KAAKo0B,KAAL,CAAa,EAAb,CACD,C,kCAEIlsD,O,CAAStlB,M,CAAQ,CACpB,GAAI,CAACA,MAAL,CAAa,CACX,OACD,CAHmB,mBAKiB,KAAKihD,QALtB,CAKZ52C,KALY,gBAKZA,KALY,CAKLozC,iBALK,gBAKLA,iBALK,CAOpB,GAAMwL,YAAW,CAAGxL,iBAAiB,CAACC,SAAlB,CAA4Bp4B,OAA5B,CAApB,CACA,GAAMw3B,WAAU,CAAGW,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,CAAnB,CAEA,GAAM42C,KAAI,CAAG,GAAIpR,cAAJ,CAASn7B,KAAT,CAAgB,CAC3BzM,KAAK,CAAC,4CAAMqrD,WAAW,CAAC1jC,WAAZ,EAAP,EAAkCnpB,CAAC,CAAE6sD,WAAW,CAACtU,KAAjD,EADsB,CAE3B92C,GAAG,CAAC,4CAAMi/C,UAAU,CAACv3B,WAAX,EAAP,EAAiCnpB,CAAC,CAAE0gD,UAAU,CAACnI,KAA/C,EAFwB,CAG3BzqC,KAAK,CAAE,EAHoB,CAI3B8vB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,GAAK,GAA3C,CAJoB,CAK3Bo1B,OAAO,CAAE,GALkB,CAM3BK,WAAW,CAAE,CANc,CAO3BmL,QAAQ,CAAE,CAPiB,CAAhB,CAAb,CAUA,KAAK+rC,KAAL,CAAWzrE,IAAX,CAAgB6wC,IAAhB,EACD,C,+CACY,IACH4I,QADG,CACS,KAAKyB,QADd,CACHzB,OADG,CAEX,GAAI,KAAKqM,WAAT,CAAsB,CACpBrM,OAAO,CAAC0M,eAAR,CAAwB,KAAKL,WAA7B,EACD,CAED,GAAI,KAAKC,YAAT,CAAuB,CACrBtM,OAAO,CAAC0M,eAAR,CAAwB,KAAKJ,YAA7B,EACD,CACF,C,+CA3D6CnJ,qB,EA8DjC4vB,gJAAf,E;;GChEMC,sC,wGACJ,6BAAc,CAAC,8MAEd,C,+FAEMx8D,Q,CAAU,gBACf,gIAAaA,QAAb,EADe,GAEPynC,kBAFO,CAEe,KAAKwD,QAFpB,CAEPxD,iBAFO,CAIfA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,sHAAqC,iBAAOiE,IAAP,mJAC7BA,KAAI,CAACssC,kBADwB,QAE7BzpC,IAF6B,CAEtB7C,IAAI,CAAC6C,IAFiB,CAGnC,KAAI,CAAC67B,IAAL,CAAU77B,IAAV,EAHmC,sDAArC,gEAKD,C,0DAEgBA,I,CAAM,CACrB,KAAK67B,IAAL,CAAU77B,IAAV,EACD,CAED;kCAEKA,I,CAAM,oBACkC,KAAKs0C,QADvC,CACDxD,iBADC,gBACDA,iBADC,CACkB7B,WADlB,gBACkBA,WADlB,CAET,GAAM9xC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CAEA,GAAIgjB,IAAJ,CAASC,IAAT,CAAetgB,OAAf,CAEA,GAAI3C,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAJ,CAAsC,CACpCjsB,GAAG,CAAGhjB,IAAI,CAACqoB,iBAAL,CAAuBxE,cAAvB,EAAN,CACAZ,IAAI,CAAGjjB,IAAI,CAACqoB,iBAAL,CAAuBvE,OAAvB,EAAP,CACAnhB,OAAO,CAAG3C,IAAI,CAACiC,QAAL,CAAcgI,UAAd,EAAV,CACD,CAJD,IAIO,CACL+Y,GAAG,CAAGhjB,IAAI,CAACqoB,iBAAL,CAAuBzE,QAAvB,CAAgCC,cAAhC,EAAN,CACAZ,IAAI,CAAGjjB,IAAI,CAACqoB,iBAAL,CAAuBzE,QAAvB,CAAgCE,OAAhC,EAAP,CACAnhB,OAAO,CAAG3C,IAAI,CAACiC,QAAL,CAAc6jE,gBAAd,EAAV,CACD,CAED3oE,IAAI,CAAC4oE,YAAL,CAAkB/iD,GAAlB,CAAuBC,IAAvB,CAA6BtgB,OAA7B,EACD,C,+CAEY,IACHmuC,kBADG,CACmB,KAAKwD,QADxB,CACHxD,iBADG,CAEXA,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAACiE,IAAD,CAAU,CAC7CA,IAAI,CAAC6oE,YAAL,GACD,CAFD,CAEG,IAFH,EAIA,OAAO,qIACR,C,gCAhD8BhwB,qB,EAmDlB6vB,uGAAf,E;;;;GCnCMI,gD,mHACJ,iCAAY3xB,QAAZ,CAAsB,mFACpB,6IAAMA,QAAN,GAEA,MAAKrgC,UAAL,CAAkB,CAChB,GAAImtD,gCAAJ,EADgB,CAEhB,GAAIpiB,qCAAJ,EAFgB,CAGhB,GAAIhI,+BAAJ,EAHgB,CAIhB,GAAIwI,mCAAJ,EAJgB,CAKhB,GAAIvJ,sCAAJ,EALgB,CAMhB,GAAI8I,2BAAJ,EANgB,CAOhB,GAAIE,qCAAJ,EAPgB,CAQhB,GAAIQ,gCAAJ,EARgB,CAShB,GAAIhJ,iCAAJ,EATgB,CAUhB,GAAImJ,gCAAJ,EAVgB,CAWhB,GAAIG,6CAAJ,EAXgB,CAYhB;AACA,GAAIU,4CAAJ,EAbgB,CAAlB,CAHoB,aAkBrB,C,4GAEU/K,a,CAAe,CACxBA,aAAa,CAACwwB,gBAAd,CAA+B,KAAKpkD,QAApC,EACD,C,qCAvBmCuyB,2B,EA0BvB4xB,yHAAf,E;;GC1CME,wC,uYAA4B9xB,2B,EAEnB8xB,6GAAf,E;;GCWMC,0C,gHACJ,8BAAY9xB,QAAZ,CAAsB,gFACpB,0IAAMA,QAAN,GAEA,MAAKrgC,UAAL,CAAkB,CAChB,GAAI0sC,6BAAJ,EADgB,CAEhB,GAAI3B,qCAAJ,EAFgB,CAGhB,GAAIQ,mCAAJ,EAHgB,CAIhB,GAAIvJ,sCAAJ,EAJgB,CAKhB,GAAI8I,2BAAJ,EALgB,CAMhB,GAAIE,qCAAJ,EANgB,CAOhB,GAAIkkB,sCAAJ,EAPgB,CAQhB,GAAIzB,mCAAJ,EARgB,CAShB,GAAI6B,4BAAJ,EATgB,CAUhB,GAAIE,wBAAJ,EAVgB,CAAlB,CAHoB,aAerB,C,8BAhBgCpvB,2B,EAmBpB+xB,gHAAf,E;;GCLMC,oC,6GACJ,2BAAY/xB,QAAZ,CAAsB,6EACpB,uIAAMA,QAAN,GAEA,MAAKrgC,UAAL,CAAkB,CAChB,GAAI2xD,yCAAJ,EADgB,CAEhB,GAAIxE,gCAAJ,EAFgB,CAGhB,GAAI5hB,mCAAJ,EAHgB,CAIhB,GAAIT,2BAAJ,EAJgB,CAKhB,GAAIE,qCAAJ,EALgB,CAMhB,GAAI4B,iCAAJ,EANgB,CAOhB,GAAIpK,iCAAJ,EAPgB,CAQhB,GAAII,gCAAJ,EARgB,CAShB,GAAI6K,iCAAJ,EATgB,CAUhB,GAAII,2CAAJ,EAVgB,CAWhB,GAAI2e,uCAAJ,EAXgB,CAYhB,GAAIG,6BAAJ,EAZgB,CAahB,GAAIE,8BAAJ,EAbgB,CAchB,GAAIO,4BAAJ,EAdgB,CAehB,GAAIK,mCAAJ,EAfgB,CAgBhB,GAAIW,iCAAJ,EAhBgB,CAiBhB,GAAIM,8BAAJ,EAjBgB,CAkBhB,GAAIM,sCAAJ,EAlBgB,CAmBhB,GAAIE,sCAAJ,EAnBgB,CAoBhB,GAAIE,qCAAJ,EApBgB,CAqBhB,GAAIE,4BAAJ,EArBgB,CAsBhB,GAAIE,wBAAJ,EAtBgB,CAuBhB,GAAIa,0BAAJ,EAvBgB,CAwBhB,GAAIM,8BAAJ,EAxBgB,CAyBhB,GAAIiB,8BAAJ,EAzBgB,CAAlB,CAHoB,aA8BrB,C,sGAEUnwB,a,CAAe,CACxBA,aAAa,CAAC4wB,UAAd,CAAyB,KAAKxkD,QAA9B,EACD,C,+BAnC6BuyB,2B,EAsCjBgyB,uGAAf,E;;GC/DME,4C,yGACJ,+BAAYv2B,QAAZ,CAAsB3rC,OAAtB,CAA+BpT,KAA/B,CAAsCC,GAAtC,CAA2C,iFACzC,6IAEA,MAAK8+C,QAAL,CAAgBA,QAAhB,CACA,MAAK3rC,OAAL,CAAeA,OAAf,CAEA,MAAKpT,KAAL,CAAaA,KAAb,CACA,MAAKC,GAAL,CAAWA,GAAX,CAEA,MAAK4b,QAAL,CAAgB5b,GAAG,CAAGD,KAAtB,CAEA,MAAKu1E,aAAL,CAAqB,MAAK1rB,kBAAL,CACnBz2C,OAAO,CAACnN,QADW,CAEnBmN,OAAO,CAACnN,QAAR,CAAiBpG,GAAjB,CAAqBuT,OAAO,CAAC9B,QAA7B,CAFmB,CAArB,CAKAu5B,mBAAS,CAAC0T,IAAV,0DAhByC,aAiB1C,C,2GAEY,CAAE,C,sCAER1tB,Q,CAAU,CAAE,C,yCAET,CAAE,C,oDAEE0L,I,CAAM,CAClB,GAAMitB,SAAQ,CAAG,KAAKC,mBAAL,CAAyB,CAAEx5C,KAAK,CAAEssB,IAAT,CAAzB,CAAjB,CAEA,GAAIitB,QAAQ,GAAK,CAAC,CAAlB,CAAqB,CACnB,KAAM,IAAIv/C,MAAJ,CAAU,iCAAV,CAAN,CACD,CAED,GAAM2+C,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CAEA,MAAO,CACLnoD,MAAM,CAAE,KAAK+R,OAAL,CAAa/R,MADhB,CAEL4E,QAAQ,CAAE,KAAKsvE,aAAL,CAAmB/tB,QAAnB,CAA4BoB,WAA5B,CAFL,CAAP,CAID,C,qEAE8B,IAAT34C,MAAS,MAATA,KAAS,CAC7B,GAAIA,KAAK,CAAG,KAAKjQ,KAAjB,CAAwB,CACtB,MAAO,CAAC,CAAR,CACD,CAED,GAAIiQ,KAAK,CAAG,KAAKhQ,GAAjB,CAAsB,CACpB,MAAO,EAAP,CACD,CACD,GAAMs8B,KAAI,CAAGtsB,KAAK,CAAG,KAAKjQ,KAA1B,CACA,MAAOu8B,KAAI,CAAG,KAAK1gB,QAAnB,CACD,C,sCAEM7D,O,CAAS,CACd,GAAMwxC,SAAQ,CAAG,KAAKC,mBAAL,CAAyBzxC,OAAzB,CAAjB,CAEA,GAAIwxC,QAAQ,GAAK,CAAC,CAAlB,CAAqB,CACnB,OACD,CAED,GAAMZ,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CACA,KAAKzK,QAAL,CAAcptC,WAAd,CAA0B,KAAK4jE,aAAL,CAAmB/tB,QAAnB,CAA4BoB,WAA5B,CAA1B,EACA,KAAK7J,QAAL,CAActU,SAAd,CAAwB,CAACjoC,gBAAgB,CAAC,KAAK4Q,OAAL,CAAa/R,MAAd,CAAzC,EACD,C,8DAEkBrB,K,CAAOC,G,CAAK,CAC7B,GAAM6pD,OAAM,CAAG9pD,KAAK,CAACgS,gBAAN,EAAf,CACA,GAAM+3C,SAAQ,CAAG/pD,KAAK,CAACgS,gBAAN,EAAjB,CACA,GAAMg4C,SAAQ,CAAG/pD,GAAG,CAAC+R,gBAAJ,EAAjB,CACA,GAAMi4C,OAAM,CAAGhqD,GAAG,CAAC+R,gBAAJ,EAAf,CAEA,MAAO,IAAI/K,kCAAJ,CACL,GAAIA,wBAAJ,CAAkB6iD,MAAM,CAAClsD,CAAzB,CAA4BksD,MAAM,CAAChsD,CAAnC,CAAsCgsD,MAAM,CAACtrD,CAA7C,CADK,CAEL,GAAIyI,wBAAJ,CAAkB8iD,QAAQ,CAACnsD,CAA3B,CAA8BmsD,QAAQ,CAACjsD,CAAvC,CAA0CisD,QAAQ,CAACvrD,CAAnD,CAFK,CAGL,GAAIyI,wBAAJ,CAAkB+iD,QAAQ,CAACpsD,CAA3B,CAA8BosD,QAAQ,CAAClsD,CAAvC,CAA0CksD,QAAQ,CAACxrD,CAAnD,CAHK,CAIL,GAAIyI,wBAAJ,CAAkBgjD,MAAM,CAACrsD,CAAzB,CAA4BqsD,MAAM,CAACnsD,CAAnC,CAAsCmsD,MAAM,CAACzrD,CAA7C,CAJK,CAAP,CAMD,C,mCA7EiCqsC,mB,EAgFrByqC,+GAAf,E;;GChFME,4B,yBACJ,uBAAYzkB,aAAZ,CAA2B,CAAC,8DAC1B,KAAK0kB,cAAL,CAAsB,CAAtB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CACA,KAAKC,qBAAL,CAA6B,CAA7B,CACA,KAAKC,sBAAL,CAA8B,CAA9B,CACA,KAAK7kB,aAAL,CAAqBA,aAArB,CACA,KAAK8kB,gBAAL,CAAwB,EAAxB,CACD,C,2HAEwB,CACvB,MACE,MAAKJ,cAAL,CACA,KAAKE,qBADL,CAEA,KAAKD,gBAFL,CAGA,KAAKE,sBAJP,CAMD,C,4EAEyB/5D,Q,CAAU,CAClC,KAAK+5D,sBAAL,EAA+B/5D,QAA/B,CACD,C,6EAE2B,CAC1B,MAAO,MAAK+5D,sBAAZ,CACD,C,2DAEkB,CACjB,MAAO,MAAKH,cAAL,CAAsB,KAAKE,qBAAlC,CACD,C,gEAEmB95D,Q,CAAU,CAC5B,KAAK65D,gBAAL,CAAwB75D,QAAxB,CACD,C,2DAEkB,CACjB,MAAO,MAAK45D,cAAZ,CACD,C,0EAEwB55D,Q,CAAU,CACjC,KAAK45D,cAAL,EAAuB55D,QAAvB,CACD,C,6EAE2B,CAC1B,MAAO,MAAK65D,gBAAL,CAAwB,KAAKD,cAApC,CACD,C,4FAEiC55D,Q,CAAU,CAC1C,KAAK85D,qBAAL,EAA8B95D,QAA9B,CACD,C,+DAEoB,CACnB,KAAKk1C,aAAL,CAAmB+kB,yBAAnB,GACD,C,iDAEa,CACZ,KAAK/kB,aAAL,CAAmBglB,cAAnB,GACD,C,mDAEc,CACb,KAAKhlB,aAAL,CAAmBilB,gBAAnB,GACD,C,uDAEgB,CACf,KAAKjlB,aAAL,CAAmBklB,gBAAnB,CACE,KAAKR,cAAL,CAAsB,KAAKE,qBAA3B,CAAmD,KAAKD,gBAD1D,EAGD,C,2DAEkB,CAAE,C,qDAEL,CACd,MACE,MAAKD,cAAL,CACA,KAAKE,qBADL,CAEA,KAAKD,gBAFL,CAGA,KAAKE,sBAJP,CAMD,C,gEAEmB7mE,I,CAAMwtB,I,CAAMvnB,O,CAAS,CACvC,KAAK6gE,gBAAL,CAAsB1tE,IAAtB,CAA2B,CAAE4G,IAAI,CAAJA,IAAF,CAAQwtB,IAAI,CAAJA,IAAR,CAAcvnB,OAAO,CAAPA,OAAd,CAA3B,EACD,C,kFAE4BjG,I,CAAM,CACjC,MAAO,MAAK8mE,gBAAL,CACJllE,MADI,CACG,kBAASulE,WAAT,MAAGnnE,IAAH,OAA0BA,KAAI,GAAKmnE,UAAnC,EADH,EAEJvlE,MAFI,CAEG,mBAAGqE,QAAH,OAAGA,OAAH,OACNA,QAAO,CAAC5K,IAAR,CAAa,SAAC8K,MAAD,QAAYA,OAAM,WAAYoY,oBAA9B,EAAb,CADM,EAFH,CAAP,CAKD,C,6BAGYkoD,0GAAf,E;;AC9FA,GAAM5gC,sCAAU,CAAG,GAAIf,kBAAJ,EAAnB,C,GAEMsiC,sD,yBACJ,oCAAYrrC,SAAZ,CAAuBmJ,wBAAvB,CAAiD,CAAC,2EAChD,KAAKnJ,SAAL,CAAiBA,SAAjB,CACA,KAAKmJ,wBAAL,CAAgCA,wBAAhC,CACD,C,qHAGCH,S,CACAC,a,CACAC,W,CACA7L,K,CACAgG,I,CACAtyB,Q,CACAkH,I,CACA8c,O,CACA,CACA,MAAO+U,sCAAU,CAACzX,MAAX,CACL2W,SADK,CAELC,aAFK,CAGLC,WAHK,CAIL7L,KAJK,CAKLgG,IALK,CAMLtyB,QANK,CAOLkH,IAPK,CAQL,KAAK+nB,SARA,CASL,KAAKmJ,wBATA,CAULpU,OAVK,CAAP,CAYD,C,8DAEkBhC,I,CAAsD,IAAhD1uB,KAAgD,2DAAzC,MAAyC,IAAjC6kC,YAAiC,8CAApBF,UAAoB,8CAATjU,QAAS,2CACvE,MAAO,IAAIgV,uBAAJ,CACL,KAAKZ,wBADA,CAEL,KAAKnJ,SAFA,CAGL,CACE7kC,QAAQ,CAAE+tC,WAAW,CAAC3sC,KAAZ,EADZ,CAEEk1B,IAAI,CAAEuX,SAFR,CAGEj4B,QAAQ,CAAE,IAAM,KAAKivB,SAAL,GAAmB,GAHrC,CAIE37B,IAAI,CAAJA,IAJF,CAKE0uB,IAAI,CAAEA,IAAI,EAAI,EALhB,CAHK,CAULgC,OAVK,CAAP,CAYD,C,0CAGYs2C,2HAAf,E;;GCnDMC,4C,yBACJ,+BAAYl+B,MAAZ,CAAoB,CAAC,sEACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKm+B,WAAL,CAAmB,EAAnB,CACD,C,yGAEW,CACV,MAAO,CACLhwD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqqC,MAAM,CAAE,KAAKA,MAFR,CAAP,CAID,C,iDAEsB,IAAXroC,KAAW,2DAAJ,EAAI,CACrB,KAAKqoC,MAAL,CAAcroC,IAAI,CAACqoC,MAAnB,CACA,MAAO,KAAP,CACD,C,qCAGYk+B,+GAAf,E;;GCfME,gD,2GACJ,iCAAYrwE,QAAZ,CAAsBs2B,IAAtB,CAA4Bg6C,OAA5B,CAAqC1mB,UAArC,CAAiD,mFAC/C,+IACAhlB,mBAAS,CAAC0T,IAAV,0DACA,MAAKhiB,IAAL,CAAYA,IAAZ,CACA,MAAKt2B,QAAL,CAAgBA,QAAhB,CACA,MAAKuwE,QAAL,CAAgB,IAAhB,CACA,MAAKD,OAAL,CAAe,CAAf,CAEA,MAAK1mB,UAAL,CAAkBA,UAAlB,CAEA,MAAKh0C,QAAL,CAAgB,IAAhB,CAEA,GAAI06D,OAAO,GAAK14E,SAAhB,CAA2B,CACzB,MAAK04E,OAAL,CAAe,GAAf,CACD,CAED,MAAKxiC,aAAL,CAAqB,IAArB,CAEA,MAAKwT,KAAL,CAAa,GAAItgD,iCAAJ,CACX,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CADW,CAEX,GAAIA,wBAAJ,CAAkB,GAAlB,CAAuB,GAAvB,CAFW,CAGX,GAAIA,wBAAJ,CAAkB,GAAlB,CAAuB,CAAvB,CAHW,CAIX,GAAIA,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAJW,CAAb,CAlB+C,aAwBhD,C,yGAEuD,IAA/Cq2B,IAA+C,MAA/CA,GAA+C,CAA1CrtB,KAA0C,MAA1CA,KAA0C,CAAnCm7B,IAAmC,MAAnCA,IAAmC,CAA7BxmC,KAA6B,MAA7BA,KAA6B,CAAtB2H,IAAsB,MAAtBA,IAAsB,CAAhB89C,IAAgB,MAAhBA,IAAgB,CAAVnN,MAAU,MAAVA,MAAU,CACtD,KAAKu5B,UAAL,CAAgBn5C,GAAhB,CAAqBrtB,KAArB,CAA4Bm7B,IAA5B,CAAkCxmC,KAAlC,CAAyC2H,IAAzC,CAA+C89C,IAA/C,EACD,C,8CAEU/sB,G,CAAKrtB,K,CAAOm7B,I,CAAMxmC,K,CAAO2H,I,CAAM89C,I,CAAMnN,M,CAAQ,CACtD,GAAImN,IAAJ,CAAU,CACR,OACD,CAED,GAAIp6C,KAAK,CAAG,KAAKssB,IAAb,EAAqBtsB,KAAK,CAAG,KAAKssB,IAAL,CAAY,KAAK1gB,QAA9C,EAA0D,CAACqhC,MAA/D,CAAuE,CACrE,GAAI,KAAKnJ,aAAL,GAAuB,IAA3B,CAAiC,CAC/B,KAAKA,aAAL,CAAqB,KAAK8b,UAAL,CAAgB6mB,iBAAhB,EAArB,CACD,CACD,GAAIzrC,KAAI,CAAG,EAAI,CAAC,KAAK1O,IAAL,CAAY,KAAK1gB,QAAjB,CAA4B5L,KAA7B,EAAsC,KAAK4L,QAA1D,CACA,GAAI/N,MAAK,CAAG,KAAKy5C,KAAL,CAAWC,QAAX,CAAoBvc,IAApB,EAA0BntC,CAAtC,CAEA,GAAImI,SAAQ,CAAG9F,eAAe,CAC5B,KAAK4zC,aADuB,CAE5B,KAAK9tC,QAFuB,CAG5B6H,KAH4B,CAI5B,IAJ4B,CAA9B,CAOA,KAAK6oE,MAAL,CAAY1wE,QAAZ,EACD,CAfD,IAeO,CACL,KAAK8tC,aAAL,CAAqB,IAArB,CACD,CACF,C,gDAEWzW,G,CAAKrtB,K,CAAOm7B,I,CAAMxmC,K,CAAO2H,I,CAAM89C,I,CAAM,CAC/C,GAAIA,IAAJ,CAAU,CACR,OACD,CAED,GACE,KAAKmsB,QAAL,GAAkB,IAAlB,EACA,KAAKA,QAAL,CAAgB,KAAKj6C,IADrB,EAEAtsB,KAAK,CAAG,KAAKssB,IAHf,CAIE,CACA,KAAKo6C,MAAL,CAAY,KAAK1wE,QAAjB,EACD,CAED,KAAKuwE,QAAL,CAAgBvmE,KAAhB,CACD,C,sCAEMhK,Q,CAAU,CACf,KAAK4pD,UAAL,CAAgBO,mBAAhB,CAAoCnqD,QAApC,EACD,C,qCA1EmC4kC,mB,EA6EvByrC,qHAAf,E;;GCjFMM,gC,yBACJ,yBAAY/mE,IAAZ,CAAkB,CAAC,gEACjB,KAAKkC,WAAL,CAAiBlC,IAAjB,EACD,C,mGAEW,CACV,MAAO,CACLipD,SAAS,CAAE,KAAKA,SADX,CAELC,WAAW,CAAE,KAAKA,WAFb,CAGLhnC,GAAG,CAAE,KAAKA,GAHL,CAILguB,GAAG,CAAE,KAAKA,GAJL,CAKLxiD,QAAQ,CAAE,KAAKA,QALV,CAMLmU,OAAO,CAAE,KAAKA,OANT,CAOLoY,aAAa,CAAE,KAAKA,aAPf,CAQLhf,MAAM,CAAE,KAAKA,MARR,CASL+rE,cAAc,CAAE,KAAKA,cAThB,CAUL7d,UAAU,CAAE,KAAKA,UAVZ,CAWL8d,cAAc,CAAE,KAAKA,cAXhB,CAYL3d,aAAa,CAAE,KAAKA,aAZf,CAaLD,iBAAiB,CAAE,KAAKA,iBAbnB,CAcLD,cAAc,CAAE,KAAKA,cAdhB,CAAP,CAgBD,C,iDAEsB,IAAXppD,KAAW,2DAAJ,EAAI,CACrB,KAAKipD,SAAL,CAAiBjpD,IAAI,CAACipD,SAAL,EAAkB,CAAnC,CACA,KAAKC,WAAL,CAAmBlpD,IAAI,CAACkpD,WAAL,EAAoB,CAAvC,CACA,KAAKhnC,GAAL,CAAWliB,IAAI,CAACkiB,GAAL,EAAY,CAAvB,CACA,KAAKguB,GAAL,CAAWlwC,IAAI,CAACkwC,GAAL,EAAY,CAAvB,CACA,KAAKxiD,QAAL,CAAgBsS,IAAI,CAACtS,QAAL,EAAiB,CAAjC,CACA,KAAKusB,aAAL,CAAqBja,IAAI,CAACia,aAAL,EAAsB,CAA3C,CACA,KAAKhf,MAAL,CAAc+E,IAAI,CAAC/E,MAAL,EAAe,CAA7B,CACA,KAAK+rE,cAAL,CAAsBhnE,IAAI,CAACgnE,cAAL,EAAuB,CAA7C,CACA,KAAK7d,UAAL,CAAkBnpD,IAAI,CAACmpD,UAAL,EAAmB,KAArC,CACA,KAAKtnD,OAAL,CAAe7B,IAAI,CAAC6B,OAAL,EAAgB,CAA/B,CACA,KAAKolE,cAAL,CAAsBjnE,IAAI,CAACinE,cAAL,EAAuB,CAA7C,CACA,KAAK3d,aAAL,CAAqBtpD,IAAI,CAACspD,aAAL,EAAsB,CAA3C,CACA,KAAKD,iBAAL,CAAyBrpD,IAAI,CAACqpD,iBAAL,EAA0B,CAAnD,CACA,KAAKD,cAAL,CAAsBppD,IAAI,CAACopD,cAAL,EAAuB,CAA7C,CAEA,MAAO,KAAP,CACD,C,+BAGY2d,0FAAf,E;;GC1CMG,0D,yBACJ,sCAAYjsE,MAAZ,CAAoBqf,SAApB,CAA+B6sD,OAA/B,CAAwC,CAAC,6EACvC,KAAKlsE,MAAL,CAAcA,MAAd,CACA,KAAKqf,SAAL,CAAiBA,SAAjB,CACA,KAAK6sD,OAAL,CAAeA,OAAf,CACD,C,gHAEW,CACV,MAAO,CACLlsE,MAAM,CAAE,KAAKA,MADR,CAELqf,SAAS,CAAE,KAAKA,SAAL,CAAerY,SAAf,EAFN,CAGLklE,OAAO,CAAE,KAAKA,OAHT,CAAP,CAKD,C,iDAEsB,IAAXnnE,KAAW,2DAAJ,EAAI,CACrB,KAAK/E,MAAL,CAAc+E,IAAI,CAAC/E,MAAL,EAAe,KAA7B,CACA,KAAKqf,SAAL,CAAiB,GAAIysD,uBAAJ,GAAsB7kE,WAAtB,CAAkClC,IAAI,CAACsa,SAAvC,CAAjB,CACA,KAAK6sD,OAAL,CAAennE,IAAI,CAACmnE,OAAL,EAAgB,CAA/B,CAEA,MAAO,KAAP,CACD,C,4CAGYD,oIAAf,E;;GCvBME,wC,yBACJ,6BAAYC,WAAZ,CAAyBn/C,QAAzB,CAAmCD,SAAnC,CAA8ChR,IAA9C,CAAoD,CAAC,oEACnD,KAAKowD,WAAL,CAAmBA,WAAnB,CACA,KAAKn/C,QAAL,CAAgBA,QAAhB,CACA,KAAKD,SAAL,CAAiBA,SAAjB,CACA,KAAKk1B,OAAL,CAAe,EAAf,CACA,KAAK7mC,KAAL,CAAa,EAAb,CACA,KAAKgxD,SAAL,CAAiB,IAAjB,CACA,KAAKC,QAAL,CAAgBtwD,IAAI,CAAGA,IAAI,CAACk2C,mBAAL,EAAH,CAAgC,IAApD,CACD,C,kGAEO52C,I,CAAM,CACZ,KAAKD,KAAL,CAAWhe,IAAX,CAAgBie,IAAhB,EACD,C,4CAESjE,W,CAAa,CACrB,KAAK6qC,OAAL,CAAa7kD,IAAb,CAAkBga,WAAlB,EACD,C,kDAEYg1D,S,CAAW,CACtB,KAAKA,SAAL,CAAiBA,SAAjB,CACD,C,0CAEQ5rB,Q,CAAUW,U,CAAY,CAC7B,KAAKX,QAAL,CAAgBA,QAAhB,CACA,KAAKW,UAAL,CAAkBA,UAAlB,CACD,C,mDAEc,CACb,MAAO,MAAKc,OAAL,CAAahuD,MAAb,CAAsB,CAA7B,CACD,C,8CAEUoD,M,CAAQ,CACjB,MAAO,MAAK4qD,OAAL,CAAah9C,MAAb,CAAoB,SAACiG,GAAD,CAAMrW,OAAN,CAAkB,CAC3C,6DACKqW,GADL,+CAEKrW,OAAO,CAACsd,OAAR,CAAgBlN,MAAhB,CAAuB,SAACiG,GAAD,CAAMkM,WAAN,CAAsB,CAC9C,GAAMjN,OAAM,CAAG9S,MAAM,CAAC4S,OAAP,CAAe6F,aAAf,CAA6BsH,WAAW,CAACmE,QAAzC,CAAf,CAEA,6DACKrQ,GADL,+CAEKkM,WAAW,CAACoE,SAAZ,CAAsB1d,GAAtB,CAA0B,SAAA2H,EAAE,QAAI0E,OAAM,CAACkI,MAAP,CAAcqJ,aAAd,CAA4BjW,EAA5B,CAAJ,EAA5B,CAFL,GAID,CAPE,CAOA,EAPA,CAFL,GAWD,CAZM,CAYJ,EAZI,CAAP,CAaD,C,gEAEmBpO,M,CAAQ,CAC1B,MAAO,MAAKi1E,UAAL,CAAgBj1E,MAAhB,EACJuO,MADI,CACG,SAAAyM,MAAM,QAAIA,OAAM,CAAC1B,eAAX,EADT,EAEJ7S,GAFI,CAEA,SAAAuU,MAAM,QAAIA,OAAM,CAAClI,MAAX,EAFN,CAAP,CAGD,C,6CAEW,CACV,MAAO,CACLmR,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqpE,WAAW,CAAE,KAAKA,WAFb,CAGLn/C,QAAQ,CAAE,KAAKA,QAHV,CAILD,SAAS,CAAE,KAAKA,SAJX,CAKLk1B,OAAO,CAAE,KAAKA,OAAL,CAAankD,GAAb,CAAiB,SAAAuU,MAAM,QAAIA,OAAM,CAACtL,SAAP,EAAJ,EAAvB,CALJ,CAMLqU,KAAK,CAAE,KAAKA,KANP,CAOLgxD,SAAS,CAAE,KAAKA,SAAL,CAAiB,KAAKA,SAAL,CAAerlE,SAAf,EAAjB,CAA8C,IAPpD,CAQLy5C,QAAQ,CAAE,KAAKA,QARV,CASLW,UAAU,CAAE,KAAKA,UATZ,CAULkrB,QAAQ,CAAE,KAAKA,QAVV,CAAP,CAYD,C,iDAEsB,IAAXvnE,KAAW,2DAAJ,EAAI,CACrB,KAAKqnE,WAAL,CAAmBrnE,IAAI,CAACqnE,WAAxB,CACA,KAAKn/C,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAKD,SAAL,CAAiBjoB,IAAI,CAACioB,SAAtB,CACA,KAAKk1B,OAAL,CAAen9C,IAAI,CAACm9C,OAAL,CAAankD,GAAb,CAAiB,SAAAuU,MAAM,QACpC,IAAI8I,+BAAJ,GAA2BnU,WAA3B,CAAuCqL,MAAvC,CADoC,EAAvB,CAAf,CAIA,KAAK+I,KAAL,CAAatW,IAAI,CAACsW,KAAL,EAAc,EAA3B,CAEA,KAAKgxD,SAAL,CAAiBtnE,IAAI,CAACsnE,SAAL,CACb,GAAIJ,uCAAJ,GAAmChlE,WAAnC,CAA+ClC,IAAI,CAACsnE,SAApD,CADa,CAEb,IAFJ,CAIA,KAAK5rB,QAAL,CAAgB17C,IAAI,CAAC07C,QAAL,EAAiB,CAAjC,CACA,KAAKW,UAAL,CAAkBr8C,IAAI,CAACq8C,UAAL,EAAmB,CAArC,CAEA,KAAKkrB,QAAL,CAAgBvnE,IAAI,CAACunE,QAAL,EAAiB,IAAjC,CAEA,MAAO,KAAP,CACD,C,mCAGYH,yGAAf,E;;GC7FMK,sD,yBACJ,oCAAYv/C,QAAZ,CAAsB,CAAC,2EACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAK7a,OAAL,CAAe,EAAf,CACA,KAAKm5D,WAAL,CAAmB,CAAnB,CACD,C,2GAEQkB,I,CAAM,CACb,KAAKr6D,OAAL,CAAa/U,IAAb,CAAkBovE,IAAlB,EACD,C,6CAEW,CACV,MAAO,CACLlxD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqP,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QAAIA,MAAK,CAACqB,SAAN,EAAJ,EAAtB,CAFJ,CAAP,CAID,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKkoB,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAK7a,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QAAI,IAAIwmE,8BAAJ,GAA0BllE,WAA1B,CAAsCtB,KAAtC,CAAJ,EAAtB,CADW,CAEX,EAFJ,CAGA,MAAO,KAAP,CACD,C,0CAGY6mE,8HAAf,E;;ACzBA,GAAMtyC,0CAAY,CAAG,GAArB,CAEA,GAAMwyC,OAAM,CAAG,QAATA,OAAS,CAACvxE,QAAD,CAAWs2B,IAAX,QAAoBA,KAAI,CAAG,GAAP,CAAat2B,QAAQ,CAACrI,CAAtB,CAA0B,GAA1B,CAAgCqI,QAAQ,CAACnI,CAA7D,EAAf,CAEA,GAAM25E,uCAAS,CAAG,QAAZA,UAAY,CAAC5pE,IAAD,CAAO5H,QAAP,CAAiBwG,KAAjB,CAA2B,CAC3C,GAAI29B,OAAM,CAAG,IAAb,CAEA,GAAIv8B,IAAI,CAAC6a,SAAT,CAAoB,CAClB0hB,MAAM,CAAG,GAAIzD,kBAAJ,CACP94B,IAAI,CAAC6pE,WAAL,EADO,CAEP,yBAFO,CAGPzxE,QAAQ,CAACzH,CAAT,CAAa,EAHN,CAIP,CACEqoC,QAAQ,CAAE,MADZ,CAEEhJ,IAAI,CAAE,GAFR,CAJO,CAAT,CASD,CAVD,IAUO,CACLuM,MAAM,CAAG,GAAIzD,kBAAJ,CACP94B,IAAI,CAAC6pE,WAAL,EADO,CAEP,0BAFO,CAGPzxE,QAAQ,CAACzH,CAAT,CAAa,EAHN,CAIP,CACEqoC,QAAQ,CAAE,MADZ,CAEEhJ,IAAI,CAAE,GAFR,CAJO,CAAT,CASD,CAEDuM,MAAM,CAACz4B,WAAP,CAAmB1L,QAAnB,EACAmkC,MAAM,CAAC3D,UAAP,CAAkB,CAAlB,EACAh6B,KAAK,CAAC5M,GAAN,CAAUuqC,MAAM,CAACjO,IAAjB,EAEA,MAAOiO,OAAP,CACD,CA9BD,CAgCA,GAAMutC,uBAAsB,CAAG,QAAzBA,uBAAyB,CAAC1xE,QAAD,CAAWs2B,IAAX,CAAiBq7C,KAAjB,CAA2B,CACxD,GAAMC,UAAS,CAAGC,yCAAY,CAAC7xE,QAAD,CAAW2xE,KAAX,CAA9B,CAEA,GAAIC,SAAS,CAAC74E,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,MAAOu9B,KAAP,CACD,CAED,MAAOw7C,UAAU,CAACx7C,IAAD,CAAOs7C,SAAP,CAAjB,CAAoC,CAClCt7C,IAAI,EAAI,GAAR,CACD,CAED,MAAOA,KAAP,CACD,CAZD,CAcA,GAAMu7C,0CAAY,CAAG,QAAfA,aAAe,CAAC7xE,QAAD,CAAW2xE,KAAX,CAAqB,CACxC,GAAMI,aAAY,CAAG/uE,yBAAmB,CAAC4F,aAApB,CAAkC5I,QAAlC,CAArB,CAEA,MAAO2xE,MAAK,CAACjnE,MAAN,CAAa,SAAAi2B,IAAI,QACtB39B,0BAAmB,CAAC4F,aAApB,CAAkC+3B,IAAI,CAAC3gC,QAAvC,EAAiDqE,MAAjD,CAAwD0tE,YAAxD,CADsB,EAAjB,CAAP,CAGD,CAND,CAQA,GAAMD,WAAU,CAAG,QAAbA,WAAa,CAACx7C,IAAD,CAAOq7C,KAAP,CAAiB,CAClC,MAAOA,MAAK,CAACxtE,IAAN,CAAW,SAAAw8B,IAAI,QAAIA,KAAI,CAACrK,IAAL,CAAYA,IAAZ,CAAmB,GAAnB,EAA0BqK,IAAI,CAACrK,IAAL,CAAYA,IAAZ,CAAmB,CAAC,GAAlD,EAAf,CAAP,CACD,CAFD,C,GAIM07C,0D,gHACJ,sCAAYxrE,KAAZ,CAAmB,wFACjB,oJAEA,MAAKA,KAAL,CAAaA,KAAb,CAEA,MAAKoP,QAAL,CAAgB,IAAhB,CACA,MAAKs6B,YAAL,CAAoB,IAApB,CACA,MAAK7kC,QAAL,CAAgB,GAAhB,CACA,MAAK4mE,cAAL,CAAsB,EAAtB,CARiB,aASlB,C,kHAEY,iBACX,KAAKA,cAAL,CAAoBjwE,OAApB,CAA4B,SAAAkwE,aAAa,CAAI,CAC3C,MAAI,CAAC1rE,KAAL,CAAW8xB,MAAX,CAAkB45C,aAAa,CAAC/tC,MAAd,CAAqBjO,IAAvC,EACAg8C,aAAa,CAAC/tC,MAAd,CAAqBoV,OAArB,GACD,CAHD,CAGG,IAHH,EAKA,KAAK04B,cAAL,CAAsB,EAAtB,CACD,C,gCAEGjyE,Q,CAAUo0C,K,CAAO9d,I,CAAM,iBACzB8d,KAAK,CAAG,GAAG5vC,MAAH,CAAU4vC,KAAV,CAAR,CACAA,KAAK,CAAC1pC,MAAN,CAAamN,OAAb,EAAsB7V,OAAtB,CAA8B,SAAA4F,IAAI,CAAI,CACpC,MAAI,CAACqqE,cAAL,CAAoB/vE,IAApB,CAAyB,CACvBo0B,IAAI,CAAEo7C,sBAAsB,CAAC1xE,QAAD,CAAWs2B,IAAX,CAAiB,MAAI,CAAC27C,cAAtB,CADL,CAEvBjyE,QAAQ,CAARA,QAFuB,CAGvBmkC,MAAM,CAAEqtC,sCAAS,CAAC5pE,IAAD,CAAO5H,QAAP,CAAiB,MAAI,CAACwG,KAAtB,CAHM,CAAzB,EAKD,CAND,CAMG,IANH,EAOD,C,2CAEyC,oBAAjC6wB,IAAiC,MAAjCA,GAAiC,CAA5BrtB,KAA4B,MAA5BA,KAA4B,CAArBm7B,IAAqB,MAArBA,IAAqB,CAAfxmC,KAAe,MAAfA,KAAe,CAAR2H,IAAQ,MAARA,IAAQ,CACxC,KAAK2rE,cAAL,CAAoBjwE,OAApB,CAA4B,SAAA2+B,IAAI,CAAI,CAClC,GAAMrK,KAAI,CAAGqK,IAAI,CAACrK,IAAlB,CACA,GAAM6N,OAAM,CAAGxD,IAAI,CAACwD,MAApB,CAEA,GAAIn6B,KAAK,CAAGssB,IAAR,EAAgBtsB,KAAK,CAAGssB,IAAI,CAAG,MAAI,CAAC1gB,QAAZ,CAAuB,MAAI,CAACs6B,YAAxD,CAAsE,CACpE/L,MAAM,CAAC3D,UAAP,CAAkB,CAAlB,EACA,OACD,CAED2D,MAAM,CAACI,QAAP,CAAgBj+B,IAAhB,CAAsBA,IAAtB,EACA,GAAM6rE,aAAY,CAAGnoE,KAAK,CAAGssB,IAA7B,CACA,GAAM87C,OAAM,6CACPzxC,IAAI,CAAC3gC,QADE,EAEVnI,CAAC,CAAE8oC,IAAI,CAAC3gC,QAAL,CAAcnI,CAAd,CAAkB,MAAI,CAACwT,QAAL,CAAgB/E,IAAhB,CAAuB6rE,YAFlC,EAAZ,CAIAhuC,MAAM,CAACz4B,WAAP,CAAmB0mE,MAAnB,EAEA,GAAMC,SAAQ,CAAGroE,KAAK,EAAIssB,IAAI,CAAG,MAAI,CAAC1gB,QAAhB,CAAtB,CAEA,GAAIy8D,QAAQ,CAAG,CAAf,CAAkB,CAChBluC,MAAM,CAAC3D,UAAP,CAAkB,CAAlB,EACD,CAFD,IAEO,CACL,GAAMpK,QAAO,CAAG,EAAIi8C,QAAQ,CAAG,MAAI,CAACniC,YAApC,CACA/L,MAAM,CAAC3D,UAAP,CAAkBpK,OAAlB,EACD,CACF,CAzBD,CAyBG,IAzBH,EA0BD,C,iDAEa,CACZ,MAAO,EAAP,CACD,C,0CA/DwCwO,mB,EAkE5BotC,oIAAf,E;;GC7HMM,kD,4GACJ,kCACErsE,IADF,CAEE6nC,aAFF,CAGEC,WAHF,CAIEh0C,KAJF,CAKEC,GALF,CASE,cAHAu4E,OAGA,2DAHS,KAGT,IAFAC,cAEA,2DAFgB,IAEhB,IADAC,OACA,2DADS,KACT,0EACA,gJAEA,MAAKxsE,IAAL,CAAYA,IAAZ,CAEA,MAAKlM,KAAL,CAAaA,KAAb,CACA,MAAKC,GAAL,CAAWA,GAAX,CACA,MAAK4b,QAAL,CAAgB5b,GAAG,CAAGD,KAAtB,CAEA,MAAK+zC,aAAL,CAAqBA,aAArB,CACA,MAAKC,WAAL,CAAmBA,WAAnB,CACA,MAAKykC,aAAL,CAAqBA,aAArB,CAEA,MAAKD,MAAL,CAAcA,MAAd,CACA,MAAKE,MAAL,CAAcA,MAAd,CAEA,MAAKnD,aAAL,CAAqB,MAAK1rB,kBAAL,CAAwB9V,aAAxB,CAAuCC,WAAvC,CAArB,CAEA,GAAMlJ,UAAS,CAAGpsC,wBAAwB,CAACwN,IAAI,CAACwd,aAAL,CAAmBlZ,EAApB,CAA1C,CACA,MAAKgkE,QAAL,CAAgB,GAAIpnE,aAAJ,CAAW09B,SAAS,GAAK,EAAd,CAAmB,EAA9B,CAAkCA,SAAS,GAAK,EAAd,CAAmB,EAArD,CAAhB,CAEAD,mBAAS,CAAC0T,IAAV,0DArBA,aAsBD,C,8GAEY,CACX,KAAKryC,IAAL,CAAUm+B,IAAV,GACD,C,sCAEMxZ,Q,CAAU,CAAE,C,yCAET,CAAE,C,oDAEE0L,I,CAAM,CAClB,GAAMitB,SAAQ,CAAG,KAAKC,mBAAL,CAAyB,CAAEx5C,KAAK,CAAEssB,IAAT,CAAzB,CAAjB,CAEA,GAAIitB,QAAQ,GAAK,CAAC,CAAlB,CAAqB,CACnB,KAAM,IAAIv/C,MAAJ,CAAU,iCAAV,CAAN,CACD,CAED,GAAM2+C,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CAEA,MAAO,CACLnoD,MAAM,CAAE,KAAK+R,OAAL,CAAa/R,MADhB,CAEL4E,QAAQ,CAAE,KAAKsvE,aAAL,CAAmB/tB,QAAnB,CAA4BoB,WAA5B,CAFL,CAAP,CAID,C,mEAEsB,CACrB,GAAMY,SAAQ,CAAG,KAAKC,mBAAL,CAAyB,CAAEx5C,KAAK,CAAE,KAAKwoE,aAAd,CAAzB,CAAjB,CAEA,GAAM7vB,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CACA,GAAMvjD,SAAQ,CAAG,KAAKsvE,aAAL,CAAmB/tB,QAAnB,CAA4BoB,WAA5B,CAAjB,CAEA,MAAO,IAAIx7C,aAAJ,CAAWnH,QAAX,CAAP,CACD,C,qEAE8B,IAATgK,MAAS,MAATA,KAAS,CAC7B,GAAIA,KAAK,CAAG,KAAKjQ,KAAjB,CAAwB,CACtB,MAAO,EAAP,CACD,CAED,GAAIiQ,KAAK,CAAG,KAAKhQ,GAAjB,CAAsB,CACpB,MAAO,EAAP,CACD,CACD,GAAMs8B,KAAI,CAAGtsB,KAAK,CAAG,KAAKjQ,KAA1B,CACA,MAAOu8B,KAAI,CAAG,KAAK1gB,QAAnB,CACD,C,4CAEiB,IAAT5L,MAAS,OAATA,KAAS,CAChB,GAAMu5C,SAAQ,CAAG,KAAKC,mBAAL,CAAyB,CAAEx5C,KAAK,CAALA,KAAF,CAAzB,CAAjB,CAEA,GAAI,KAAKwoE,aAAL,GAAuB,IAAvB,EAA+BxoE,KAAK,CAAG,KAAKwoE,aAAhD,CAA+D,CAC7D,KAAKvsE,IAAL,CAAUm+B,IAAV,GACA,OACD,CAED,GAAImf,QAAQ,GAAK,CAAb,EAAkB,KAAKgvB,MAA3B,CAAmC,CACjC,KAAKtsE,IAAL,CAAUm+B,IAAV,GACA,OACD,CAED,GAAMue,YAAW,CAAGY,QAAQ,CAAG,CAAX,CAAeA,QAAQ,CAAG,CAA1B,CAA8B,CAAlD,CAEA,GAAIA,QAAQ,GAAK,CAAb,EAAkB,KAAKkvB,MAA3B,CAAmC,CACjC,KAAKxsE,IAAL,CAAUm+B,IAAV,GACA,OACD,CAED,KAAKn+B,IAAL,CAAU0+B,IAAV,GACA,GAAM3kC,SAAQ,CAAG,KAAKsvE,aAAL,CAAmB/tB,QAAnB,CAA4BoB,WAA5B,CAAjB,CAEA,KAAK18C,IAAL,CAAUyF,WAAV,CAAsB,CACpB/T,CAAC,CAAEqI,QAAQ,CAACrI,CAAT,CAAa,KAAK42E,QAAL,CAAc52E,CADV,CAEpBE,CAAC,CAAEmI,QAAQ,CAACnI,CAAT,CAAa,KAAK02E,QAAL,CAAc12E,CAFV,CAGpBU,CAAC,CAAEyH,QAAQ,CAACzH,CAHQ,CAAtB,EAKA,KAAK0N,IAAL,CAAUu+B,SAAV,CACE,CAACvoC,wBAAwB,CAAC,KAAK6xC,aAAN,CAAqB,KAAKC,WAA1B,CAD3B,EAGD,C,8DAEkBh0C,K,CAAOC,G,CAAK,CAC7B;;;;;MAOA,GAAM6pD,OAAM,CAAG9pD,KAAf,CACA,GAAM+pD,SAAQ,CAAG/pD,KAAjB,CACA,GAAMgqD,SAAQ,CAAG/pD,GAAjB,CACA,GAAMgqD,OAAM,CAAGhqD,GAAf,CAEA,GAAI,CAAC,KAAKy4E,MAAV,CAAkB,CAChB,MAAO,IAAIzxE,kCAAJ,CACL,GAAIA,wBAAJ,CAAkB6iD,MAAM,CAAClsD,CAAzB,CAA4BksD,MAAM,CAAChsD,CAAnC,CAAsCgsD,MAAM,CAACtrD,CAA7C,CADK,CAEL,GAAIyI,wBAAJ,CAAkB8iD,QAAQ,CAACnsD,CAA3B,CAA8BmsD,QAAQ,CAACjsD,CAAvC,CAA0CisD,QAAQ,CAACvrD,CAAnD,CAFK,CAGL,GAAIyI,wBAAJ,CAAkB+iD,QAAQ,CAACpsD,CAA3B,CAA8BosD,QAAQ,CAAClsD,CAAvC,CAA0CksD,QAAQ,CAACxrD,CAAnD,CAHK,CAIL,GAAIyI,wBAAJ,CAAkBgjD,MAAM,CAACrsD,CAAzB,CAA4BqsD,MAAM,CAACnsD,CAAnC,CAAsCmsD,MAAM,CAACzrD,CAA7C,CAJK,CAAP,CAMD,CAED,MAAO,IAAIyI,2BAAJ,CACL,GAAIA,wBAAJ,CAAkB6iD,MAAM,CAAClsD,CAAzB,CAA4BksD,MAAM,CAAChsD,CAAnC,CAAsCgsD,MAAM,CAACtrD,CAA7C,CADK,CAEL,GAAIyI,wBAAJ,CAAkBgjD,MAAM,CAACrsD,CAAzB,CAA4BqsD,MAAM,CAACnsD,CAAnC,CAAsCmsD,MAAM,CAACzrD,CAA7C,CAFK,CAAP,CAID,C,sCAzIoCqsC,mB,EA4IxB0tC,wHAAf,E;;GCjJMI,8C,yBACJ,gCAAYC,eAAZ,CAA6B7gD,QAA7B,CAAuC,CAAC,uEACtC,KAAK6gD,eAAL,CAAuBA,eAAvB,CACA,KAAK7gD,QAAL,CAAgBA,QAAhB,CACA,KAAKi1B,OAAL,CAAe,EAAf,CACA,KAAK7mC,KAAL,CAAa,EAAb,CACD,C,qGAEOC,I,CAAM,CACZ,KAAKD,KAAL,CAAWhe,IAAX,CAAgBie,IAAhB,EACD,C,4CAESjE,W,CAAa,CACrB,KAAK6qC,OAAL,CAAa7kD,IAAb,CAAkBga,WAAlB,EACD,C,8CAEU/f,M,CAAQ,CACjB,MAAO,MAAK4qD,OAAL,CAAah9C,MAAb,CAAoB,SAACiG,GAAD,CAAMrW,OAAN,CAAkB,CAC3C,6DACKqW,GADL,+CAEKrW,OAAO,CAACsd,OAAR,CAAgBlN,MAAhB,CAAuB,SAACiG,GAAD,CAAMkM,WAAN,CAAsB,CAC9C,GAAMjN,OAAM,CAAG9S,MAAM,CAAC4S,OAAP,CAAe6F,aAAf,CAA6BsH,WAAW,CAACmE,QAAzC,CAAf,CAEA,6DACKrQ,GADL,+CAEKkM,WAAW,CAACoE,SAAZ,CAAsB1d,GAAtB,CAA0B,SAAA2H,EAAE,QAAI0E,OAAM,CAACkI,MAAP,CAAcqJ,aAAd,CAA4BjW,EAA5B,CAAJ,EAA5B,CAFL,GAID,CAPE,CAOA,EAPA,CAFL,GAWD,CAZM,CAYJ,EAZI,CAAP,CAaD,C,gEAEmBpO,M,CAAQ,CAC1B,MAAO,MAAKi1E,UAAL,CAAgBj1E,MAAhB,EACJuO,MADI,CACG,SAAAyM,MAAM,QAAIA,OAAM,CAAC1B,eAAX,EADT,EAEJ7S,GAFI,CAEA,SAAAuU,MAAM,QAAIA,OAAM,CAAClI,MAAX,EAFN,CAAP,CAGD,C,6CAEW,CACV,MAAO,CACLmR,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAGL5rB,OAAO,CAAE,KAAKA,OAAL,CAAankD,GAAb,CAAiB,SAAAuU,MAAM,QAAIA,OAAM,CAACtL,SAAP,EAAJ,EAAvB,CAHJ,CAILqU,KAAK,CAAE,KAAKA,KAJP,CAKL4R,QAAQ,CAAE,KAAKA,QALV,CAAP,CAOD,C,iDAEsB,IAAXloB,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,KAAK7gD,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAKi1B,OAAL,CAAen9C,IAAI,CAACm9C,OAAL,CAAankD,GAAb,CAAiB,SAAAuU,MAAM,QACpC,IAAI8I,+BAAJ,GAA2BnU,WAA3B,CAAuCqL,MAAvC,CADoC,EAAvB,CAAf,CAIA,KAAK+I,KAAL,CAAatW,IAAI,CAACsW,KAAL,EAAc,EAA3B,CACA,MAAO,KAAP,CACD,C,sCAGYwyD,kHAAf,E;;GC5DME,4D,yBACJ,uCAAY9gD,QAAZ,CAAsB,CAAC,8EACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAK7a,OAAL,CAAe,EAAf,CACA,KAAKm5D,WAAL,CAAmB,EAAnB,CACD,C,8GAEQ7Q,M,CAAQ,CACf,KAAKtoD,OAAL,CAAa/U,IAAb,CAAkBq9D,MAAlB,EACD,C,6CAEW,CACV,MAAO,CACLn/C,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqP,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAWA,MAAK,CAACqB,SAAN,EAAX,EAAjB,CAFJ,CAAP,CAID,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKkoB,QAAL,CAAgBloB,IAAI,CAACkoB,QAArB,CACA,KAAK7a,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QACf,IAAIkoE,iCAAJ,GAA6B5mE,WAA7B,CAAyCtB,KAAzC,CADe,EAAjB,CADW,CAIX,EAJJ,CAKA,MAAO,KAAP,CACD,C,6CAGYooE,uIAAf,E;;GC1BMC,sC,0HACJ,4BACEnxD,WADF,CAEE4U,IAFF,CAGE0X,wBAHF,CAIEnJ,SAJF,CAKE0wB,OALF,CAMEtc,UANF,CAOE,8EACA,wIAAM,CAAEpU,SAAS,CAATA,SAAF,CAAamJ,wBAAwB,CAAxBA,wBAAb,CAAN,GACA,MAAK7Z,UAAL,CAAkB,EAAlB,CAFA,iBAI6CzS,WAAW,CAACu3B,UAAU,CAACnwC,IAAZ,CAJxD,CAIkBswC,cAJlB,cAIQp5C,QAJR,CAIkC5E,MAJlC,cAIkCA,MAJlC,CAKA,GAAM4E,SAAQ,CAAG,MAAK8mD,uBAAL,CAA6B7N,UAA7B,CAAyC79C,MAAzC,EAAiDxB,GAAjD,CACfw/C,cADe,CAAjB,CAIA,GAAM75B,cAAa,CAAGg2C,OAAO,CAACn2C,OAAR,CAAgBG,aAAtC,CAEA,MAAK4U,UAAL,CAAgBjyB,IAAhB,CACE,GAAI0sC,uBAAJ,CACEZ,wBADF,CAEEnJ,SAFF,CAGE,CACE7kC,QAAQ,CAARA,QADF,CAEEs2B,IAAI,CAAEA,IAFR,CAGE1gB,QAAQ,CAAE,IAAMivB,SAAS,GAAK,GAHhC,CAIE37B,IAAI,CAAE,KAJR,CAKE0uB,IAAI,CAAEiN,SAAS,IAAMtlB,aAAa,CAAG,GAAtB,CAAT,CAAsCA,aAL9C,CAME4W,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,GAAK,GAArB,CAA0B,IAAM,GAAhC,CAAqC,IAAM,GAA3C,CANT,CAHF,yDADF,EAgBA,MAAKmzB,UAAL,CAAgBjyB,IAAhB,CACE,GAAI0sC,uBAAJ,CACEZ,wBADF,CAEEnJ,SAFF,CAGE,CACE7kC,QAAQ,CAARA,QADF,CAEEs2B,IAAI,CAAEA,IAFR,CAGE1gB,QAAQ,CAAE,IAAMivB,SAAS,GAAK,GAHhC,CAIE37B,IAAI,CAAE,MAJR,CAKE0uB,IAAI,CAAEiN,SAAS,IAAMtlB,aAAa,CAAG,GAAtB,CAAT,CAAsCA,aAAa,CAAG,GAL9D,CAHF,yDADF,EA3BA,aAyCD,C,wGAEY,CACX,KAAKyuB,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EAEA,OAAO,qIACR,C,gCAvD8BqU,iD,EA0DlBiuB,6GAAf,E;;;;;GCzDMC,wC,2HACJ,6BACE9yE,QADF,CAEE6tC,SAFF,CAGEvX,IAHF,CAIE0X,wBAJF,CAKEnJ,SALF,CAME0wB,OANF,CAOExO,OAPF,CAQE9N,UARF,CASEv3B,WATF,CAUEqxD,WAVF,CAYE,cADA7wC,MACA,8DADQ,GACR,qEACA,yIAAM,CAAE2C,SAAS,CAATA,SAAF,CAAamJ,wBAAwB,CAAxBA,wBAAb,CAAN,GACA,MAAKA,wBAAL,CAAgCA,wBAAhC,CACA,MAAK7Z,UAAL,CAAkB,EAAlB,CAEA,GAAMvuB,OAAM,CAAGmhD,OAAO,CAAChuD,MAAvB,CAEA,GAAMo9B,MAAK,CAAG,GAAIn1B,sBAAJ,CACZu0D,OAAO,CAACn2C,OAAR,CAAgBC,WAAhB,CAA4B,CAA5B,EAAiC,GADrB,CAEZk2C,OAAO,CAACn2C,OAAR,CAAgBC,WAAhB,CAA4B,CAA5B,EAAiC,GAFrB,CAGZk2C,OAAO,CAACn2C,OAAR,CAAgBC,WAAhB,CAA4B,CAA5B,EAAiC,GAHrB,CAAd,CAMA,GAAM2zD,SAAQ,CAAG,CACf78C,KAAK,CAAE,CAACA,KAAK,CAAC18B,CAAP,CAAU08B,KAAK,CAAC+C,CAAhB,CAAmB/C,KAAK,CAAC98B,CAAzB,CADQ,CAEfu+B,IAAI,CAAE,CAFS,CAGf7+B,MAAM,CAAE,CAHO,CAIf21C,WAAW,CAAE,IAJE,CAAjB,CAOA,GAAMC,WAAU,CAAG,GAAIf,kBAAJ,EAAnB,CApBA,iBAsB6ClsB,WAAW,CAACu3B,UAAU,CAACnwC,IAAZ,CAtBxD,CAsBkBswC,cAtBlB,cAsBQp5C,QAtBR,CAsBkC5E,MAtBlC,cAsBkCA,MAtBlC,CAuBA2rD,OAAO,CAAC/kD,OAAR,CAAgB,SAACmV,MAAD,CAAY,CAC1B,GAAMlI,OAAM,CAAGgqC,UAAU,CAACnwC,IAAX,CAAgBiG,OAAhB,CAAwB6F,aAAxB,CACbuC,MAAM,CAACF,OAAP,CAAe,CAAf,EAAkBoJ,QADL,CAAf,CAIA,GAAM4yD,kBAAiB,CAAG,MAAKjsB,6CAAL,CACxB/3C,MADwB,CAExBgqC,UAFwB,CAGxB79C,MAHwB,EAIxBxB,GAJwB,CAIpBw/C,cAJoB,CAA1B,CAMA,GAAMxjC,SAAQ,CAAGm9D,WAAW,CAACl4E,UAAZ,CAAuBo4E,iBAAvB,EAA4C/wC,KAA7D,CAEAyM,UAAU,CAACzX,MAAX,CACE2W,SADF,CAEEklC,WAFF,CAGEE,iBAAiB,CAAC7xE,KAAlB,EAHF,CAIE8gC,KAJF,CAKE,GALF,CAMEtsB,QANF,CAOEo9D,QAPF,CAQEnuC,SARF,CASEmJ,wBATF,0DAaA,MAAK7Z,UAAL,CAAgBjyB,IAAhB,CACE,GAAI0sC,uBAAJ,CACEZ,wBADF,CAEEnJ,SAFF,CAGE,CACE7kC,QAAQ,CAAEizE,iBADZ,CAEE38C,IAAI,CAAEuX,SAAS,CAAGj4B,QAFpB,CAGEA,QAAQ,CAAE,IAAMivB,SAAS,GAAK,GAHhC,CAIE37B,IAAI,CAAE,KAJR,CAKE0uB,IAAI,CAAE,CALR,CAMExB,OAAO,CAAE,IANX,CAHF,yDADF,EAeD,CAzCD,EA2CA,GAAI88C,WAAU,CAAG3d,OAAO,CAACp2C,cAAR,CAAuBiE,aAAvB,CAAuCxd,MAAxD,CACA,GAAIA,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,qDAAG,CAAH,CAAN,CACD,CAED,IAAK,GAAI/M,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGq6E,UAApB,CAAgCr6E,CAAC,EAAjC,CAAqC,CACnC,GAAMo6E,kBAAiB,CAAG,MAAKnsB,uBAAL,CACxB7N,UADwB,CAExB79C,MAFwB,EAGxBxB,GAHwB,CAGpBw/C,cAHoB,CAA1B,CAKAzK,UAAU,CAACzX,MAAX,CACE2W,SADF,CAEEklC,WAFF,CAGEE,iBAHF,CAIE/wC,KAJF,CAKE,IALF,CAME5L,IAAI,CAAGuX,SAAP,CAAmBhJ,SAAS,GAAK,IAAjC,CAAwC,GAN1C,CAOEmuC,QAPF,CAQEnuC,SARF,CASEmJ,wBATF,0DAYD,CAzFD,aA0FD,C,yGAEY,CACX,KAAKA,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EAEA,OAAO,sIACR,C,iCA7G+BqU,iD,EAgHnBkuB,gHAAf,E;;GCtHMK,8C,yBACJ,gCAAYR,eAAZ,CAA6B,CAAC,uEAC5B,KAAKA,eAAL,CAAuBA,eAAvB,CACA,KAAKvC,WAAL,CAAmB,EAAnB,CACD,C,0GAEW,CACV,MAAO,CACLhwD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAAP,CAID,C,iDAEsB,IAAX/oE,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,MAAO,KAAP,CACD,C,sCAGYQ,kHAAf,E;;ACTO,GAAM1tC,yBAAW,CAAG,CAApB,CACA,GAAMC,0BAAY,CAAG,CAArB,CACA,GAAMC,0BAAY,CAAG,CAArB,CACA,GAAMC,0BAAY,CAAG,CAArB,CACA,GAAMC,8BAAgB,CAAG,CAAzB,CACA,GAAMutC,oBAAmB,CAAG,CAA5B,CAEP,GAAM56C,2BAAa,CAAG,GAAIx3B,8BAAJ,EAAtB,CACA,GAAM63B,qBAAO,CAAGL,0BAAa,CAAC3C,IAAd,CAAmB,oCAAnB,CAAhB,C,GAEMw9C,yB,yBACJ,qBAAY7sE,KAAZ,CAA8B,IAAXsW,KAAW,2DAAJ,EAAI,6DAC5B,KAAKqzB,cAAL,CAAsBrzB,IAAI,CAACqzB,cAAL,EAAuB,CAA7C,CACA,KAAKmjC,cAAL,CAAsBx2D,IAAI,CAACw2D,cAAL,EAAuB,CAA7C,CACA,KAAKC,eAAL,CAAuBz2D,IAAI,CAACy2D,eAAL,EAAwB,CAA/C,CACA,KAAKC,WAAL,CAAmB12D,IAAI,CAAC02D,WAAL,EAAoB,IAAvC,CACA,KAAKz8C,QAAL,CAAgBja,IAAI,CAACia,QAAL,EAAiB/1B,gCAAjC,CACA,KAAKsB,KAAL,CAAawa,IAAI,CAACxa,KAAL,EAAc,CAAE+D,KAAK,CAAE,CAAT,CAAYR,MAAM,CAAE,CAApB,CAA3B,CACA,KAAK7F,QAAL,CAAgB8c,IAAI,CAAC9c,QAAL,CAAcilD,OAAd,IAA2BjkD,uBAAA,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAA3C,CACA,KAAKyyE,aAAL,CAAqB32D,IAAI,CAAC+b,OAAL,EAAgB,CAArC,CACA,KAAK1C,KAAL,CAAarZ,IAAI,CAACqZ,KAAL,EAAc,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAA3B,CACA,KAAKo1B,OAAL,CAAetZ,IAAI,CAACsZ,OAAL,EAAgB,GAA/B,CACA,KAAKs9C,WAAL,CAAmB52D,IAAI,CAAC42D,WAAL,EAAoB,IAAvC,CAEA,KAAKx9C,IAAL,CAAY,IAAZ,CACA,KAAK1vB,KAAL,CAAaA,KAAb,CAEA,KAAK6vB,QAAL,CAAgB,CACdwC,OAAO,CAAE,CACP3vB,IAAI,CAAE,GADC,CAEP4B,KAAK,CAAE+tB,oBAFA,CADK,CAKdE,YAAY,CAAE,CAAE7vB,IAAI,CAAE,IAAR,CAAc4B,KAAK,CAAE,KAAKqrB,KAA1B,CALA,CAMdC,OAAO,CAAE,CAAEltB,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,GAApB,CANK,CAOd2oE,aAAa,CAAE,CAAEvqE,IAAI,CAAE,GAAR,CAAa4B,KAAK,CAAE,KAAK2oE,aAAzB,CAPD,CAAhB,CAUA,KAAKv9C,IAAL,CAAY,KAAKgB,MAAL,EAAZ,CACA,KAAKxrB,WAAL,CAAiB,KAAK1L,QAAtB,EACA,KAAKukC,QAAL,CAAc,KAAKjiC,KAAL,CAAW+D,KAAzB,CAAgC,KAAK/D,KAAL,CAAWuD,MAA3C,EACD,C,gGAEUmE,K,CAAO,CAChB,GACE,KAAKwpE,WAAL,GAAqB,IAArB,EACAxpE,KAAK,EAAI,KAAKmmC,cAAL,CAAsB,KAAKqjC,WAA3B,CAAyC,KAAKD,eAFzD,CAGE,CACA,MAAO,IAAP,CACD,CAED,GACE,KAAKC,WAAL,GAAqB,IAArB,EACAxpE,KAAK,CAAG,KAAKmmC,cAAL,CAAsB,KAAKqjC,WADnC,EAEAxpE,KAAK,CAAG,KAAKmmC,cAAL,CAAsB,KAAKqjC,WAA3B,CAAyC,KAAKD,eAHxD,CAIE,CACA,MACE,CAAC,KAAKpjC,cAAL,CACC,KAAKqjC,WADN,CAEC,KAAKD,eAFN,CAGCvpE,KAHF,EAIA,KAAKupE,eALP,CAOD,CAED,GAAIvpE,KAAK,CAAG,KAAKmmC,cAAL,CAAsB,KAAKmjC,cAAvC,CAAuD,CACrD,MAAO,IAAP,CACD,CAED,GACEtpE,KAAK,CAAG,KAAKmmC,cAAb,EACAnmC,KAAK,CAAG,KAAKmmC,cAAL,CAAsB,KAAKmjC,cAFrC,CAGE,CACA,MACE,GACA,CAAC,KAAKnjC,cAAL,CAAsB,KAAKmjC,cAA3B,CAA4CtpE,KAA7C,EACE,KAAKspE,cAHT,CAKD,CAED,MAAO,EAAP,CACD,C,2CAEiB,IAATtpE,MAAS,MAATA,KAAS,CAChB,GAAI,KAAKmmC,cAAL,CAAsBnmC,KAA1B,CAAiC,CAC/B,KAAKo6B,IAAL,GACA,OACD,CAED,GAAMob,WAAU,CAAGx1C,KAAK,CAAG,KAAKmmC,cAAhC,CAEA,GAAM/Z,QAAO,CAAG,KAAKu9C,UAAL,CAAgB3pE,KAAhB,CAAhB,CAEA,GAAIosB,OAAO,GAAK,CAAhB,CAAmB,CACjB,KAAKgO,IAAL,GACA,OACD,CAED,KAAK5D,UAAL,CAAgBpK,OAAhB,EAEA,GAAI,KAAKs9C,WAAL,GAAqB,IAAzB,CAA+B,CAC7B,KAAKnvC,QAAL,CACE,KAAKjiC,KAAL,CAAW+D,KAAX,CAAmB,KAAKqtE,WAAxB,CAAsCl0B,UADxC,CAEE,KAAKl9C,KAAL,CAAWuD,MAAX,CAAoB,KAAK6tE,WAAzB,CAAuCl0B,UAFzC,EAID,CAED,KAAK7a,IAAL,GACD,C,8CAEUtF,G,CAAK,CACd,KAAKhJ,QAAL,CAAco9C,aAAd,CAA4B3oE,KAA5B,CAAoCu0B,GAApC,CACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKnJ,IAAL,CAAUmC,OAAV,CAAoB,KAApB,CACA,MAAO,KAAP,CACD,C,mCAEM,CACL,KAAKnC,IAAL,CAAUmC,OAAV,CAAoB,IAApB,CACA,MAAO,KAAP,CACD,C,gDAEWjxB,G,CAAK,CACf,KAAK8uB,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,CAAuByP,GAAG,CAACzP,CAA3B,CACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,CAAuBuP,GAAG,CAACvP,CAA3B,CACA,KAAKq+B,IAAL,CAAUl2B,QAAV,CAAmBzH,CAAnB,CAAuB6O,GAAG,CAAC7O,CAA3B,CACA,MAAO,KAAP,CACD,C,iDAEa,CACZ,MAAO,MAAK29B,IAAL,CAAUl2B,QAAjB,CACD,C,8CAEUA,Q,CAAU,CACnB,MACE,MAAKk2B,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,GAAyBqI,QAAQ,CAACrI,CAAlC,EACA,KAAKu+B,IAAL,CAAUl2B,QAAV,CAAmBnI,CAAnB,GAAyBmI,QAAQ,CAACnI,CADlC,EAEA,KAAKq+B,IAAL,CAAUl2B,QAAV,CAAmBzH,CAAnB,GAAyByH,QAAQ,CAACzH,CAHpC,CAKD,C,8CAEU69B,O,CAAS,CAClB,KAAKC,QAAL,CAAcD,OAAd,CAAsBtrB,KAAtB,CAA8BsrB,OAAO,CAAG,KAAKA,OAA7C,CACA,MAAO,KAAP,CACD,C,wDAEe4C,C,CAAG,CACjB,KAAK3C,QAAL,CAAcD,OAAd,CAAsBtrB,KAAtB,CAA8B,KAAKsrB,OAAL,CAAe4C,CAA7C,CACA,MAAO,KAAP,CACD,C,0CAEQ7C,K,CAAO,CACd,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKE,QAAL,CAAc0C,YAAd,CAA2BjuB,KAA3B,CAAmCqrB,KAAnC,CACA,MAAO,KAAP,CACD,C,0CAEQ9vB,K,CAAOR,M,CAAQ,CACtB,KAAKqwB,IAAL,CAAU5zB,KAAV,CAAgB4F,GAAhB,CAAoB7B,KAApB,CAA2BR,MAA3B,CAAmC,CAAnC,EACA,MAAO,KAAP,CACD,C,yCAES,CACR,KAAKqwB,IAAL,CAAUd,QAAV,CAAmBmD,OAAnB,GACA,KAAK/xB,KAAL,CAAW8xB,MAAX,CAAkB,KAAKpC,IAAvB,EACD,C,4CAES96B,M,CAAQ,CAChB,KAAK86B,IAAL,CAAUiD,QAAV,CAAmB5gC,CAAnB,CAAuByD,cAAc,CAACZ,MAAD,CAArC,CACA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAOU,eAAc,CAAC,KAAKo6B,IAAL,CAAUiD,QAAV,CAAmB5gC,CAApB,CAArB,CACD,C,uCAEQ,CACP,KAAK68B,QAAL,CAAgB,GAAIp0B,+BAAJ,CAAyB,CACvCg2B,YAAY,CAAEvD,+BADyB,CAEvCwD,cAAc,CAAEzD,iCAFuB,CAGvCmD,WAAW,CAAE,IAH0B,CAIvCC,UAAU,CAAE,KAJ2B,CAKvCC,SAAS,CAAE,KAL4B,CAMvCE,QAAQ,CAAE,KAAKA,QANwB,CAAzB,CAAhB,CASA,GAAMY,SAAQ,CAAG,GAAI32B,8BAAJ,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiC,CAAjC,CAAjB,CACA,KAAKo0B,QAAL,CAAciB,QAAd,CAAyB,KAAKA,QAA9B,CAEA,GAAMH,KAAI,CAAG,GAAIl1B,qBAAJ,CAAe22B,QAAf,CAAyB,KAAKvC,QAA9B,CAAb,CACA,KAAK5uB,KAAL,CAAW5M,GAAX,CAAes8B,IAAf,EACA,MAAOA,KAAP,CACD,C,2BAGYm9C,yEAAf,E;;ACrMA,GAAM1kC,kCAAU,CAAG,GAAIf,kBAAJ,EAAnB,C,GAEMgmC,8C,8HACJ,gCACE3tE,IADF,CAEE7K,MAFF,CAGE4E,QAHF,CAIEjG,KAJF,CAKE8qC,SALF,CAMEmJ,wBANF,CAOExnC,KAPF,CAQE,kFACA,4IAAM,CAAEq+B,SAAS,CAATA,SAAF,CAAamJ,wBAAwB,CAAxBA,wBAAb,CAAN,GAEA,MAAK7Z,UAAL,CAAkB,EAAlB,CACA,GAAMyD,KAAI,CACR3xB,IAAI,CAACo6B,UAAL,CAAgB1oC,CAAhB,CAAoBsO,IAAI,CAACo6B,UAAL,CAAgBxoC,CAApC,CACIoO,IAAI,CAACo6B,UAAL,CAAgB1oC,CADpB,CAEIsO,IAAI,CAACo6B,UAAL,CAAgBxoC,CAHtB,CAKA,MAAKg8E,QAAL,CAAgB,IAAhB,CAEA,MAAK5tE,IAAL,CAAYA,IAAZ,CACA,MAAKlM,KAAL,CAAaA,KAAb,CAEA,GAAI+5E,eAAc,CAChBh8E,IAAI,CAAC+nB,IAAL,CACG,MAAK5Z,IAAL,CAAUo6B,UAAV,CAAqB1oC,CAArB,CACC,MAAKsO,IAAL,CAAUo6B,UAAV,CAAqBxoC,CADtB,CAEC,MAAKoO,IAAL,CAAUo6B,UAAV,CAAqB9nC,CAFvB,CAGE,KAJJ,EAKIT,IAAI,CAAC6D,KAAL,CAAWkpC,SAAS,GAAK,CAAzB,CANN,CAQA,MAAOivC,cAAc,EAArB,CAAyB,CACvB,GAAMb,kBAAiB,CAAG,MAAKnsB,uBAAL,CACxB,MAAK7gD,IADmB,CAExB7K,MAFwB,EAGxBxB,GAHwB,CAGpBoG,QAHoB,CAA1B,CAKA,GAAI4uC,uBAAJ,CACE,MAAKZ,wBADP,CAEE,MAAKnJ,SAFP,CAGE,CACE7kC,QAAQ,CAAEizE,iBADZ,CAEE38C,IAAI,CAAEv8B,KAAK,CAAG,MAAK8qC,SAAL,GAAmB,IAFnC,CAGEjvB,QAAQ,CAAE,IAAMivB,SAAS,GAAK,GAHhC,CAIE37B,IAAI,CAAE,KAJR,CAKE0uB,IAAI,CAAEiN,SAAS,GAAK,EAAd,CAAmB,EAL3B,CAME1O,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,GAAK,GAArB,CAA0B,IAAM,GAAhC,CAAqC,IAAM,GAA3C,CANT,CAHF,0DAaD,CAED,GAAM+yE,kBAAiB,CAAG,GAAIV,aAAJ,CAAgB7sE,KAAhB,CAAuB,CAC/CxG,QAAQ,CAAEA,QAAQ,CAAC2tC,IAAT,CAAc1nC,IAAI,CAAC6qC,KAAnB,CADqC,CAE/CxuC,KAAK,CAAE,CAAE+D,KAAK,CAAEuxB,IAAI,CAAG,CAAhB,CAAmB/xB,MAAM,CAAE+xB,IAAI,CAAG,CAAlC,CAFwC,CAG/CzB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,GAAK,GAArB,CAA0B,IAAM,GAAhC,CAAqC,IAAM,GAA3C,CAHwC,CAI/C63B,OAAO,CAAE8M,yBAJsC,CAK/C2tC,cAAc,CAAE,GAL+B,CAM/CE,WAAW,CAAE,IANkC,CAO/CD,eAAe,CAAE,IAP8B,CAQ/CpjC,cAAc,CAAEp2C,KAAK,CAAG,IARuB,CAS/C25E,WAAW,CAAE,KATkC,CAU/C38C,QAAQ,CAAE/1B,8BAVqC,CAW/Co1B,OAAO,CAAE,GAXsC,CAAvB,CAA1B,CAaA,MAAKjC,UAAL,CAAgBjyB,IAAhB,CAAqB6xE,iBAArB,EAEA,GAAMC,uBAAsB,CAAG,GAAIX,aAAJ,CAAgB7sE,KAAhB,CAAuB,CACpDxG,QAAQ,CAAEA,QAAQ,CAAC2tC,IAAT,CAAc1nC,IAAI,CAAC6qC,KAAnB,CAD0C,CAEpDxuC,KAAK,CAAE,CAAE+D,KAAK,CAAEuxB,IAAI,CAAG,CAAhB,CAAmB/xB,MAAM,CAAE+xB,IAAI,CAAG,CAAlC,CAF6C,CAGpDzB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAH6C,CAIpD63B,OAAO,CAAE8M,yBAJ2C,CAKpD2tC,cAAc,CAAE,GALoC,CAMpDE,WAAW,CAAE,IANuC,CAOpDD,eAAe,CAAE,IAPmC,CAQpDpjC,cAAc,CAAEp2C,KAAK,CAAG,IAR4B,CASpD25E,WAAW,CAAE,KATuC,CAUpD38C,QAAQ,CAAE/1B,gCAV0C,CAWpDo1B,OAAO,CAAE,GAX2C,CAAvB,CAA/B,CAaA,MAAKjC,UAAL,CAAgBjyB,IAAhB,CAAqB8xE,sBAArB,EAEA,GAAMrxE,KAAI,CAAG,GAAI0wE,aAAJ,CAAgB7sE,KAAhB,CAAuB,CAClCxG,QAAQ,CAAEA,QAAQ,CAAC2tC,IAAT,CAAc1nC,IAAI,CAAC6qC,KAAnB,CADwB,CAElCxuC,KAAK,CAAE,CAAE+D,KAAK,CAAEuxB,IAAI,CAAG,GAAhB,CAAqB/xB,MAAM,CAAE+xB,IAAI,CAAG,GAApC,CAF2B,CAGlCzB,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,GAAK,GAArB,CAA0B,IAAM,GAAhC,CAAqC,IAAM,GAA3C,CAH2B,CAIlC63B,OAAO,CAAEu6C,mBAJyB,CAKlCE,cAAc,CAAE,CALkB,CAMlCE,WAAW,CAAE,GANqB,CAOlCD,eAAe,CAAE,GAPiB,CAQlCpjC,cAAc,CAAEp2C,KAAK,CAAG,IARU,CASlC25E,WAAW,CAAE,IATqB,CAUlCt9C,OAAO,CAAE,GAVyB,CAAvB,CAAb,CAYA,MAAKjC,UAAL,CAAgBjyB,IAAhB,CAAqBS,IAArB,EAEA;;;;;;;;;;;;;;;;;;;;;;;MAvFA,aA+GD,C,mGAEMoP,O,CAAS,CACd,GAAIA,OAAO,CAAC/H,KAAR,CAAgB,KAAKjQ,KAAL,CAAa,KAAK85E,QAAtC,CAAgD,CAC9C,KAAK5tE,IAAL,CAAUm+B,IAAV,GACD,CAFD,IAEO,CACL,KAAKn+B,IAAL,CAAU0+B,IAAV,GACD,CACD,KAAKxQ,UAAL,CAAgBnyB,OAAhB,CAAwB,SAAC5I,CAAD,QAAOA,EAAC,CAACyyC,MAAF,CAAS95B,OAAT,CAAP,EAAxB,EACD,C,+CAEY,CACX,KAAKi8B,wBAAL,CAA8BuC,OAA9B,CAAsC,IAAtC,EACA,KAAKpc,UAAL,CAAgBnyB,OAAhB,CAAwB,SAAC5I,CAAD,QAAOA,EAAC,CAACmgD,OAAF,EAAP,EAAxB,EAEA,OAAO,yIACR,C,oCAxIkCqL,iD,EA2ItBgvB,kHAAf,E;;AC5HA,GAAMK,kCAAe,CAAG,QAAlBA,gBAAkB,CAACjpB,SAAD,CAAYliD,IAAZ,QACtBkiD,UAAS,CAACjhD,MAAV,CAAiB,SAACmkB,KAAD,CAAQtD,QAAR,CAAqB,CACpC,6DACKsD,KADL,+CAEKtD,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2BnhD,IAAI,CAACyB,EAAhC,EAAoCQ,QAApC,CAA6CuC,WAA7C,EAFL,GAID,CALD,CAKG,EALH,CADsB,EAAxB,CAQA,GAAM4mE,kBAAiB,CAAG,QAApBA,kBAAoB,CAAClpB,SAAD,CAAYliD,IAAZ,QACxBmrE,kCAAe,CAACjpB,SAAD,CAAYliD,IAAZ,CAAf,CAAiCwF,GAAjC,EADwB,EAA1B,CAGA,GAAM6lE,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACnpB,SAAD,CAAYliD,IAAZ,QAC1BmrE,kCAAe,CAACjpB,SAAD,CAAYliD,IAAZ,CAAf,CAAiC4kB,KAAjC,EAD0B,EAA5B,CAGA,GAAM0mD,qCAAoC,CAAG,QAAvCA,qCAAuC,CAACppB,SAAD,CAAYliD,IAAZ,CAAqB,CAChE,GAAMC,KAAI,CAAGorE,mBAAmB,CAACnpB,SAAD,CAAYliD,IAAZ,CAAhC,CAEA,MAAO,CACL9I,QAAQ,CAAE+I,IAAI,CAAC/I,QADV,CAEL5E,MAAM,CAAE2N,IAAI,CAAC3N,MAFR,CAAP,CAID,CAPD,C,GASMi5E,oC,yHACJ,2BAAYtpB,aAAZ,CAA2B,6EACzB,yIACA,MAAKA,aAAL,CAAqBA,aAArB,CAEA,MAAKupB,4BAAL,CAAoC,IAApC,CACA,MAAKxyC,KAAL,CAAa,KAAb,CALyB,aAM1B,C,4MAEakpB,S,wOAMR,KAAK5N,Q,CAJPxD,iB,gBAAAA,iB,CACA5L,wB,gBAAAA,wB,CACA2N,O,gBAAAA,O,CACAn1C,K,gBAAAA,K,uBAGIozC,kBAAiB,CAACK,WAAlB,E,8BACAjM,yBAAwB,CAAClM,KAAzB,E,QAEAlX,Q,CAAWogC,SAAS,CAAC,CAAD,C,CAE1B,KAAKnmB,SAAL,CAAiBpsC,wBAAwB,CACvC,KAAOmyB,QAAQ,CAACrgB,EAAhB,CAAqB,MAArB,CAA8BqgB,QAAQ,CAACrf,IADA,CAAzC,CAIAowC,OAAO,CAAC44B,cAAR,CAAuB,KAAKxpB,aAA5B,CAA2CngC,QAA3C,EAEA,KAAK0pD,4BAAL,CAAoC,GAAItC,uCAAJ,CAAiCxrE,KAAjC,CAApC,CACA,KAAK2tB,UAAL,CAAgBjyB,IAAhB,CAAqB,KAAKoyE,4BAA1B,EAEA1pD,QAAQ,CAAC4pD,SAAT,CAAmBC,YAAnB,GAAkCzyE,OAAlC,CAA0C,SAACmf,cAAD,CAAoB,CAC5D,GAAIA,cAAc,WAAYgvD,gCAA9B,CAAqD,CACnD,MAAI,CAACuE,sBAAL,CAA4BvzD,cAA5B,CAA4C6pC,SAA5C,EACD,CAFD,IAEO,IAAI7pC,cAAc,WAAYkwD,qCAA9B,CAA0D,CAC/D,MAAI,CAACsD,wBAAL,CAA8BxzD,cAA9B,CAA8C6pC,SAA9C,EACD,CAFM,IAEA,IAAI7pC,cAAc,WAAYgyD,iCAA9B,CAAsD,CAC3D,MAAI,CAACyB,yBAAL,CAA+BzzD,cAA/B,CAA+C6pC,SAA/C,EACD,CAFM,IAEA,IAAI7pC,cAAc,WAAYyxD,wCAA9B,CAA6D,CAClE,MAAI,CAACiC,2BAAL,CAAiC1zD,cAAjC,CAAiD6pC,SAAjD,EACD,CACF,CAVD,EAYA,KAAK8pB,yBAAL,CAA+B9pB,SAA/B,E,+NAG2BA,S,CAAWliD,I,CAAM,qBAMxC,KAAKs0C,QANmC,CAE1CwM,UAF0C,iBAE1CA,UAF0C,CAG1ChQ,iBAH0C,iBAG1CA,iBAH0C,CAI1C5L,wBAJ0C,iBAI1CA,wBAJ0C,CAK1CxnC,KAL0C,iBAK1CA,KAL0C,CAQ5C,GAAMzM,MAAK,CAAG,KAAKgxD,aAAL,CAAmBgqB,sBAAnB,EAAd,CACA,GAAMC,eAAc,CAAG,IAAvB,CACA,GAAMC,YAAW,CAAGl7E,KAAK,CAAGi7E,cAA5B,CAEA,GAAM7nE,QAAO,CAAG+mE,iBAAiB,CAAClpB,SAAD,CAAYliD,IAAZ,CAAjC,CACA,GAAM9I,SAAQ,CAAGmN,OAAO,CAACuU,WAAR,EAAjB,CACA,GAAMzb,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CAEA,KAAKqrB,UAAL,CAAgBjyB,IAAhB,CACE,GAAImuE,kCAAJ,CAA4BrwE,QAA5B,CAAsCjG,KAAtC,CAA6Ck7E,WAA7C,CAA0DrrB,UAA1D,CADF,EAIA,KAAKz1B,UAAL,CAAgBjyB,IAAhB,CACE,GAAI0xE,iCAAJ,CACE3tE,IADF,CAEEkH,OAAO,CAAC6c,SAAR,EAFF,CAGE7c,OAAO,CAACuU,WAAR,EAHF,CAIEuzD,WAJF,CAKE,KAAKpwC,SALP,CAMEmJ,wBANF,CAOExnC,KAPF,CADF,EAYA,KAAKukD,aAAL,CAAmBmqB,yBAAnB,CAA6CF,cAAc,CAAG,IAA9D,EACD,C,4EAEyBhqB,S,CAAW,oBAC3BpR,kBAD2B,CACL,KAAKwD,QADA,CAC3BxD,iBAD2B,CAGnCoR,SAAS,CAAC,CAAD,CAAT,CAAaz4C,KAAb,CAAmB4f,QAAnB,GAA8BnwB,OAA9B,CAAsC,SAAC8G,IAAD,CAAU,CAC9C,GAAM7C,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CACA,GAAM8mE,iBAAgB,CAAG,MAAI,CAAC7kB,aAAL,CAAmBoqB,4BAAnB,CACvBrsE,IADuB,CAAzB,CAIA,GAAI9O,IAAG,CAAG,IAAV,CAEA,GAAI8O,IAAI,CAAC26C,mBAAL,EAAJ,CAAgC,CAC9BzpD,GAAG,CAAG,MAAI,CAAC+wD,aAAL,CAAmBgqB,sBAAnB,GAA8C,IAApD,CACA,MAAI,CAACK,4BAAL,CAAkCpqB,SAAlC,CAA6CliD,IAA7C,EACD,CAED,GAAIusE,kBAAiB,CAAGvsE,IAAI,CAACiG,OAAL,CAAauT,QAAb,CACrB0uB,wBADqB,GAErBtmC,MAFqB,CAEd,SAAC8X,OAAD,CAAa,CACnB,GAAMC,UAAS,CAAGD,OAAO,CAACE,YAAR,EAAlB,CACA,MACED,UAAS,CAAChQ,WAAV,IACAm9D,gBAAgB,CAACzlE,KAAjB,CAAuB,kBAAG4E,QAAH,MAAGA,OAAH,OACrBA,QAAO,CAAC5E,KAAR,CAAc,SAAC8E,MAAD,QAAYA,OAAM,CAAC1E,EAAP,GAAckY,SAAS,CAAClY,EAApC,EAAd,CADqB,EAAvB,CAFF,CAMD,CAVqB,CAAxB,CAYA,GAAM+qE,oBAAmB,CAAG,EAA5B,CAEA,GAAID,iBAAiB,CAACt8E,MAAlB,CAA2B,CAA/B,CAAkC,CAChCu8E,mBAAmB,CAACpzE,IAApB,CAAyB,CACvBogB,QAAQ,CAAE+yD,iBADa,CAEvBt7E,KAAK,CAAE,CAFgB,CAGvBC,GAAG,CAAE,IAHkB,CAAzB,EAKD,CAED41E,gBAAgB,CAAC5tE,OAAjB,CAAyB,eAAuB,IAApBs0B,KAAoB,OAApBA,IAAoB,CAAdvnB,OAAc,OAAdA,OAAc,CAC9C,GAAMwmE,aAAY,CAAGzsE,IAAI,CAACiG,OAAL,CAAauT,QAAb,CAClB0uB,wBADkB,GAElBtmC,MAFkB,CAEX,SAAC8X,OAAD,CAAa,CACnB,GAAMC,UAAS,CAAGD,OAAO,CAACE,YAAR,EAAlB,CACA,MAAO3T,QAAO,CAAC5K,IAAR,CAAa,SAAC8K,MAAD,QAAYA,OAAM,CAAC1E,EAAP,GAAckY,SAAS,CAAClY,EAApC,EAAb,CAAP,CACD,CALkB,CAArB,CAOA+rB,IAAI,EAAI,MAAI,CAACuO,SAAL,GAAmB,GAAnB,CAAyB,GAAjC,CACAwwC,iBAAiB,wDAAOA,iBAAP,+CAA6BE,YAA7B,EAAjB,CAEA,GAAID,mBAAmB,CAACA,mBAAmB,CAACv8E,MAApB,CAA6B,CAA9B,CAAvB,CAAyD,CACvDu8E,mBAAmB,CAACA,mBAAmB,CAACv8E,MAApB,CAA6B,CAA9B,CAAnB,CAAoDiB,GAApD,CAA0Ds8B,IAA1D,CACD,CAEDg/C,mBAAmB,CAACpzE,IAApB,CAAyB,CACvBogB,QAAQ,CAAE+yD,iBADa,CAEvBt7E,KAAK,CAAEu8B,IAFgB,CAGvBt8B,GAAG,CAAEA,GAHkB,CAAzB,EAKD,CApBD,EAsBAs7E,mBAAmB,CAACtzE,OAApB,CAA4B,eAA8B,IAA3BsgB,SAA2B,OAA3BA,QAA2B,CAAjBvoB,KAAiB,OAAjBA,KAAiB,CAAVC,GAAU,OAAVA,GAAU,CACxD,MAAI,CAACm6B,UAAL,CAAgBjyB,IAAhB,CACE,GAAIwlD,8BAAJ,CAAwBzhD,IAAxB,CAA8Bqc,QAA9B,CAAwCvoB,KAAxC,CAA+CC,GAA/C,CADF,EAGD,CAJD,EAKD,CA9DD,EA+DD,C,wEAGC4wB,Q,CACAquB,U,CACAksB,U,CACAqN,a,CACAgD,iB,CACAxqB,S,CACA,qCACwD,KAAK5N,QAD7D,CACQpP,wBADR,iBACQA,wBADR,CACkC4L,iBADlC,iBACkCA,iBADlC,CAGA,GAAMyL,uBAAsB,CAAG,GAAI6qB,kCAAJ,CAC7B,KAAKrrC,SADwB,CAE7BmJ,wBAF6B,CAA/B,CAKAm3B,UAAU,CAACnjE,OAAX,CAAmB,SAACijE,SAAD,CAAe,CAChC,GAAMn8D,KAAI,CAAG8hB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2Bgb,SAAS,CAAChzB,MAArC,CAAb,CACA,GAAMzf,OAAM,CAAG1pB,IAAI,CAACiG,OAAL,CAAa6F,aAAb,CAA2BqwD,SAAS,CAAClzC,QAArC,CAAf,CAEA,GAAI,CAACkzC,SAAS,CAACwQ,YAAV,EAAL,CAA+B,CAC7B,OACD,CAED,GAAMC,cAAa,CAAGljD,MAAM,CAACtjB,WAAP,CAAmB,4BAAnB,CAAtB,CAEA,GAAI,CAACwmE,aAAL,CAAoB,CAClB,OACD,CAED,GAAMnuB,UAAS,CAAG,GAAIouB,8BAAoB,qBAEtCD,aAAa,CAACE,MAAd,CAAqB,CAArB,EAAwBnE,WAAxB,GAAwCiE,aAAa,CAAC1mD,KAAd,CAAoB,CAApB,CAFF,cAAxB,CAIhB,CACA6V,SAAS,CAAE,MAAI,CAACA,SADhB,CAEAmJ,wBAAwB,CAAEA,wBAF1B,CAGAxb,MAAM,CAANA,MAHA,CAIA9Q,WAAW,CAAE,qBAAC5Y,IAAD,QACXsrE,qCAAoC,CAACppB,SAAD,CAAYliD,IAAZ,CADzB,EAJb,CAMAgU,IAAI,CAAE0V,MAAM,CAACtjB,WAAP,CAAmB,iCAAnB,CANN,CAOAm2C,sBAAsB,CAAtBA,sBAPA,CAQApM,UAAU,CAAVA,UARA,CASAmM,WAAW,CAAExL,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CATb,CAUA20C,kBAAkB,CAAE,CAVpB,CAWAmJ,cAAc,CAAE4uB,iBAXhB,CAYAvuB,UAAU,CAAEurB,aAZZ,CAaAvsB,UAAU,CAAEzzB,MAAM,CAACtjB,WAAP,CAAmB,mBAAnB,CAAwC,IAAxC,CAA8C,CAA9C,CAbZ,CAcAo2C,QAAQ,CAAE2f,SAAS,CAACwQ,YAAV,GAA2B,CAA3B,CAA+B,CAdzC,CAeApvB,gBAAgB,CAAE,IAflB,CAJgB,CAAlB,CAsBA,MAAI,CAAClyB,UAAL,CAAgBjyB,IAAhB,CAAqBqlD,SAArB,EACD,CArCD,EAsCD,C,gFAE2BpmC,c,CAAgB6pC,S,CAAW,qCAOjD,KAAK5N,QAP4C,CAEnDxD,iBAFmD,iBAEnDA,iBAFmD,CAGnDgQ,UAHmD,iBAGnDA,UAHmD,CAInD5b,wBAJmD,iBAInDA,wBAJmD,CAKnDoQ,oBALmD,iBAKnDA,oBALmD,CAMnDzC,OANmD,iBAMnDA,OANmD,CAQrD,GAAM/wB,SAAQ,CAAGogC,SAAS,CAAC,CAAD,CAA1B,CAEA,GAAM6qB,eAAc,CAAG,IAAvB,CAEA,GAAM97E,MAAK,CAAG,KAAKgxD,aAAL,CAAmB+qB,yBAAnB,EAAd,CACA,GAAMd,eAAc,CAAG,IAAvB,CACA,GAAMe,UAAS,CAAGh8E,KAAK,CAAGi7E,cAA1B,CAEA,GAAIgB,gBAAe,CAAGH,cAAtB,CAEA,GAAM15E,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B9oC,cAAc,CAAC2Q,QAA1C,CAAf,CACA,GAAMmnB,WAAU,CAAGW,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,CAAnB,CAEA,GAAM6D,SAAQ,CAAGm0E,mBAAmB,CAClCnpB,SADkC,CAElC/R,UAAU,CAACnwC,IAFuB,CAAnB,CAGf4Y,WAHe,EAAjB,CAKA,KAAKyS,UAAL,CAAgBjyB,IAAhB,CACE,GAAImuE,kCAAJ,CAA4BrwE,QAA5B,CAAsCjG,KAAtC,CAA6Cg8E,SAA7C,CAAwDnsB,UAAxD,CADF,EAIAzoC,cAAc,CAAClK,OAAf,CAAuBjV,OAAvB,CAA+B,SAACi0E,YAAD,CAAkB,CAC/C,GAAMz2D,OAAM,CAAGoL,QAAQ,CAAC+6C,QAAT,CAAkBuQ,oBAAlB,CACbD,YAAY,CAACtD,eADA,CAAf,CAIAh3B,OAAO,CAACw6B,cAAR,CAAuBF,YAAvB,EAEA,GAAM9Q,WAAU,CAAGv6C,QAAQ,CAAC4pD,SAAT,CAAmB4B,gBAAnB,CAAoCH,YAApC,CAAnB,CAEA,GAAMnY,YAAW,CAAGqH,UAAU,CAAChhE,IAAX,CAAgB,SAAC8gE,SAAD,QAClCA,UAAS,CAACwQ,YAAV,EADkC,EAAhB,CAApB,CAIA,GAAMjD,cAAa,CAAG1U,WAAW,CAC7BiY,SAAS,EAAIF,cAAc,CAAG,IAArB,CAAT,CAAsC,MAAI,CAAChxC,SAAL,GAAmB,IAD5B,CAE7B,IAFJ,CAIA,GAAMuU,eAAc,CAAG,GAAIjyC,aAAJ,CAAWnH,QAAX,EACpB2tC,IADoB,CACfsL,UAAU,CAACnI,KADI,EAEpBl3C,GAFoB,CAGnB,GAAIuN,aAAJ,CAAW,MAAI,CAAC09B,SAAL,GAAmB,EAAnB,CAAwB,EAAnC,CAAuC,MAAI,CAACA,SAAL,GAAmB,EAAnB,CAAwB,EAA/D,CAAmE,CAAnE,CAHmB,CAAvB,CAMA,GAAMwxC,eAAc,CAAG,IAAvB,CACA,GAAMzxD,eAAc,CAAGpF,MAAM,CAACoF,cAA9B,CACA,GAAM4pD,gBAAe,CAAG5pD,cAAc,CACnCpc,GADqB,CACjB4wC,cADiB,EAErBh2C,SAFqB,GAGrB/B,cAHqB,CAGNg1E,cAHM,EAIrBz8E,GAJqB,CAIjBw/C,cAJiB,EAKrBzL,IALqB,CAKhB7sC,SALgB,CAAxB,CAOA,GAAMw1E,YAAW,CAAG,MAAI,CAACzxC,SAAL,GAAmB,GAAnB,CAAyB,GAA7C,CACA,GAAMkuC,YAAW,CACfvzD,MAAM,CAAC+1C,OAAP,CAAep2C,cAAf,CAA8BoE,GAA9B,EAAqC,CAACu6C,WAAtC,CACIl5C,cAAc,CACXpc,GADH,CACO4wC,cADP,EAEGh2C,SAFH,GAGG/B,cAHH,CAGkBi1E,WAHlB,EAIG18E,GAJH,CAIOw/C,cAJP,EAKGzL,IALH,CAKQ7sC,SALR,CADJ,CAOI,IARN,CAUA,GAAMy1E,eAAc,CAAGxD,WAAW,CAC9B8C,cAAc,EAAI,CAACQ,cAAc,CAAGC,WAAlB,EAAiCD,cAArC,CADgB,CAE9BR,cAFJ,CAIA,GAAMW,qBAAoB,CAAG,MAAI,CAAC3xC,SAAL,GAAmB,GAAhD,CACA,GAAMyrC,QAAO,CAAGyF,SAAS,CAAGF,cAAZ,CAA6BW,oBAA7C,CACA,GAAMC,cAAa,CAAGV,SAAS,CAAGQ,cAAZ,CAA6BC,oBAAnD,CAEA,GAAMt0C,MAAK,CAAGm0C,cAAc,CAAGR,cAA/B,CAEA,GAAMtuB,UAAS,CAAG,GAAI+qB,mCAAJ,CAChBl0B,oBAAoB,CAACkwB,sBAArB,CAA4C9uD,MAA5C,CADgB,CAEhBgvD,eAFgB,CAGhBuE,WAAW,CAAGA,WAAH,CAAiB35B,cAHZ,CAIhB28B,SAJgB,CAKhBU,aALgB,CAMhBj3D,MAAM,CAAC+hD,WAAP,GAAuB,CANP,CAOhBiR,aAPgB,CAQhB,IARgB,CAAlB,CAWA,GAAM5C,iBAAgB,CAAGqG,YAAY,CAACS,mBAAb,CAAiCv6E,MAAjC,CAAzB,CAEA,GAAIyzE,gBAAgB,CAAC72E,MAAjB,CAA0B,CAA9B,CAAiC,CAC/B,MAAI,CAACu7E,4BAAL,CAAkC16E,GAAlC,CACE,GAAIuN,aAAJ,CAAWiyC,cAAc,CAACzhD,CAA1B,CAA6ByhD,cAAc,CAACvhD,CAA5C,CAA+CuhD,cAAc,CAAC7gD,CAA9D,CADF,CAEEq3E,gBAAgB,CAAChtE,GAAjB,CAAqB,SAACqM,MAAD,QAAYA,OAAM,CAACskD,cAAP,EAAZ,EAArB,CAFF,CAGE+c,OAHF,EAKD,CAED,GAAMjlE,SAAQ,CAAG+tC,cAAc,CAC5B5wC,GADc,CACVoc,cADU,EAEdxhB,SAFc,GAGd/B,cAHc,CAGCg1E,cAAc,CAAGR,cAHlB,EAIdx0E,cAJc,CAIC,GAJD,CAAjB,CAMA,GAAMm0E,kBAAiB,CAAGjuB,SAAS,CAACovB,oBAAV,EAA1B,CAEA,MAAI,CAACxiD,UAAL,CAAgBjyB,IAAhB,CAAqBqlD,SAArB,EAEA,MAAI,CAACqvB,uBAAL,CACEhsD,QADF,CAEEquB,UAFF,CAGEksB,UAHF,CAIEqN,aAJF,CAKEgD,iBALF,CAMExqB,SANF,EASA,GAAI8S,WAAJ,CAAiB,CACf,MAAI,CAAC3pC,UAAL,CAAgBjyB,IAAhB,CACE,GAAI0sC,uBAAJ,CACEZ,wBADF,CAEE,MAAI,CAACnJ,SAFP,CAGE,CACE7kC,QAAQ,CAAEw1E,iBADZ,CAEEl/C,IAAI,CAAEk8C,aAFR,CAGE58D,QAAQ,CAAE,IAAM,MAAI,CAACivB,SAAL,GAAmB,GAHrC,CAIE37B,IAAI,CAAE,MAJR,CAKE0uB,IAAI,CAAE,MAAI,CAACiN,SAAL,GAAmB,CAAnB,CAAuB,CAL/B,CAME1O,KAAK,CAAE,GAAIn1B,sBAAJ,CAAgB,GAAhB,CAAqB,GAArB,CAA0B,GAA1B,CANT,CAOEqK,QAAQ,CAARA,QAPF,CAHF,CAYE,MAZF,CADF,EAgBD,CAjBD,IAiBO,CACL,OAAQmU,MAAM,CAAC+1C,OAAP,CAAen2C,OAAf,CAAuBE,aAA/B,EACE,IAAK,KAAL,CACE,MAAI,CAAC6U,UAAL,CAAgBjyB,IAAhB,CACE,GAAI4wE,qCAAJ,CACE15B,cADF,CAEEq9B,aAFF,CAGEnG,OAHF,CAIEtiC,wBAJF,CAKE,MAAI,CAACnJ,SALP,CAMErlB,MAAM,CAAC+1C,OANT,CAOE0gB,YAAY,CAAClvB,OAPf,CAQE9N,UARF,CASE,SAACnwC,IAAD,QAAUsrE,qCAAoC,CAACppB,SAAD,CAAYliD,IAAZ,CAA9C,EATF,CAUEiqE,WAVF,CAWE7wC,KAXF,CADF,EAeA,MACF,IAAK,IAAL,CACA,QACE,MAAI,CAAC/N,UAAL,CAAgBjyB,IAAhB,CACE,GAAI2wE,oCAAJ,CACE,SAAC/pE,IAAD,QAAUsrE,qCAAoC,CAACppB,SAAD,CAAYliD,IAAZ,CAA9C,EADF,CAEEwnE,OAFF,CAGEtiC,wBAHF,CAIE,MAAI,CAACnJ,SAJP,CAKErlB,MAAM,CAAC+1C,OALT,CAMEtc,UANF,CADF,EAUA,MA9BJ,CAgCD,CACF,CAhJD,EAkJA,KAAK8R,aAAL,CAAmB8rB,iCAAnB,CACE7B,cAAc,CAAGgB,eAAjB,CAAmC,IADrC,EAGD,C,4EAEyB70D,c,CAAgB6pC,S,CAAW,IAC3C5M,qBAD2C,CAClB,KAAKhB,QADa,CAC3CgB,oBAD2C,CAGnD,GAAMxoC,SAAQ,CAAG,IAAjB,CACA,GAAM7b,MAAK,CAAG,KAAKgxD,aAAL,CAAmB+rB,gBAAnB,EAAd,CACA,KAAK/rB,aAAL,CAAmBgsB,mBAAnB,CAAuCnhE,QAAvC,EAEA,GAAM4J,OAAM,CAAGwrC,SAAS,CAAC,CAAD,CAAT,CAAa2a,QAAb,CAAsBuQ,oBAAtB,CACb/0D,cAAc,CAACwxD,eADF,CAAf,CAIA,GAAM9kC,UAAS,CAAG9zC,KAAK,CAAG,KAAK8qC,SAAL,GAAmB,IAA7C,CACA,GAAMyrC,QAAO,CAAGv2E,KAAK,CAAG6b,QAAR,CAAmB,KAAKivB,SAAL,GAAmB,IAAtD,CACA,GAAM0iB,UAAS,CAAG,GAAI+qB,mCAAJ,CAChBl0B,oBAAoB,CAACkwB,sBAArB,CAA4C9uD,MAA5C,CADgB,CAEhBA,MAAM,CAACoF,cAAP,CAAsB+oB,IAAtB,CAA2B7sC,SAA3B,CAFgB,CAGhB0e,MAAM,CAACoE,cAAP,CAAsB+pB,IAAtB,CAA2B7sC,SAA3B,CAHgB,CAIhB+sC,SAJgB,CAKhByiC,OALgB,CAMhB,IANgB,CAAlB,CASA,KAAKn8C,UAAL,CAAgBjyB,IAAhB,CAAqBqlD,SAArB,EACD,C,0EAEwBpmC,c,CAAgB6pC,S,CAAW,qCAM9C,KAAK5N,QANyC,CAEhDxD,iBAFgD,iBAEhDA,iBAFgD,CAGhDgQ,UAHgD,iBAGhDA,UAHgD,CAIhD5b,wBAJgD,iBAIhDA,wBAJgD,CAKhD2N,OALgD,iBAKhDA,OALgD,CAOlD,GAAM/wB,SAAQ,CAAGogC,SAAS,CAAC,CAAD,CAA1B,CAEA,GAAM2Q,kBAAiB,CAAG,GAAIzpC,yBAAJ,GAAwBiF,MAAxB,CAA+BvM,QAA/B,CAA1B,CACA,GAAMy6B,uBAAsB,CAAG,GAAI6qB,kCAAJ,CAC7B,KAAKrrC,SADwB,CAE7BmJ,wBAF6B,CAA/B,CAKA,GAAMj0C,MAAK,CAAG,KAAKgxD,aAAL,CAAmBisB,gBAAnB,EAAd,CACA,GAAMhC,eAAc,CAAG,IAAvB,CACA,GAAMe,UAAS,CAAGh8E,KAAK,CAAGi7E,cAA1B,CAEA,GAAIgB,gBAAe,CAAG,CAAtB,CAEA,GAAM75E,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B9oC,cAAc,CAAC2Q,QAA1C,CAAf,CACA,GAAMmnB,WAAU,CAAGW,iBAAiB,CAACC,SAAlB,CAA4B19C,MAA5B,CAAnB,CAEA,GAAM6D,SAAQ,CAAGm0E,mBAAmB,CAClCnpB,SADkC,CAElC/R,UAAU,CAACnwC,IAFuB,CAAnB,CAGf4Y,WAHe,EAAjB,CAKA,KAAKyS,UAAL,CAAgBjyB,IAAhB,CACE,GAAImuE,kCAAJ,CAA4BrwE,QAA5B,CAAsCjG,KAAtC,CAA6Cg8E,SAA7C,CAAwDnsB,UAAxD,CADF,EAIAzoC,cAAc,CAAClK,OAAf,CAAuBjV,OAAvB,CAA+B,SAAC6kD,SAAD,CAAe,CAC5C,GAAM3lC,UAAS,CAAGy6C,iBAAiB,CAACsb,gBAAlB,CAChBpwB,SAAS,CAACoqB,WADM,CAAlB,CAIAt1B,OAAO,CAACw6B,cAAR,CAAuBtvB,SAAvB,EAEA,GAAMplC,QAAO,CAAGmJ,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B/oC,SAAS,CAAC2Q,SAArC,CAAhB,CACA,GAAMW,OAAM,CAAG/Q,OAAO,CAAC1S,OAAR,CAAgB6F,aAAhB,CAA8BsM,SAAS,CAAC6Q,QAAxC,CAAf,CAEA,GAAM2jD,cAAa,CAAGljD,MAAM,CAACtjB,WAAP,CAAmB,4BAAnB,CAAtB,CAEA,GAAI,CAACwmE,aAAL,CAAoB,CAClB,OACD,CAED,GAAMnuB,UAAS,CAAG,GAAIouB,8BAAoB,qBAEtCD,aAAa,CAACE,MAAd,CAAqB,CAArB,EAAwBnE,WAAxB,GAAwCiE,aAAa,CAAC1mD,KAAd,CAAoB,CAApB,CAFF,cAAxB,CAIhB,CACA6V,SAAS,CAAE,MAAI,CAACA,SADhB,CAEAmJ,wBAAwB,CAAEA,wBAF1B,CAGAxb,MAAM,CAANA,MAHA,CAIA9Q,WAAW,CAAE,qBAAC5Y,IAAD,QACXsrE,qCAAoC,CAACppB,SAAD,CAAYliD,IAAZ,CADzB,EAJb,CAMAgU,IAAI,CAAE0V,MAAM,CAACtjB,WAAP,CAAmB,iCAAnB,CANN,CAOAm2C,sBAAsB,CAAtBA,sBAPA,CAQApM,UAAU,CAAVA,UARA,CASAmM,WAAW,CAAExL,iBAAiB,CAACC,SAAlB,CAA4Bp4B,OAA5B,CATb,CAUAg8B,kBAAkB,CAAEs4B,SAVpB,CAWA9vB,UAAU,CAAEY,SAAS,CAACZ,UAXtB,CAYAX,QAAQ,CAAEuB,SAAS,CAACvB,QAZpB,CAaAuB,SAAS,CAATA,SAbA,CAJgB,CAAlB,CAoBA,MAAI,CAAC1yB,UAAL,CAAgBjyB,IAAhB,CAAqBqlD,SAArB,EACA,GAAM3xC,SAAQ,CAAG2xC,SAAS,CAACnxC,WAAV,EAAjB,CAEA,GAAIR,QAAQ,CAAGogE,eAAf,CAAgC,CAC9BA,eAAe,CAAGpgE,QAAlB,CACD,CAED,GAAMg6D,iBAAgB,CAAG/oB,SAAS,CAAC6vB,mBAAV,CAA8Bv6E,MAA9B,CAAzB,CAEA,GAAIyzE,gBAAgB,CAAC72E,MAAjB,CAA0B,CAA9B,CAAiC,CAC/B,GAAMm+E,oBAAmB,CAAGnB,SAAS,CAAGngE,QAAZ,CAAuB,IAAnD,CACA,MAAI,CAACm1C,aAAL,CAAmBosB,mBAAnB,CACEh7E,MADF,CAEE+6E,mBAFF,CAGEtH,gBAHF,EAKA,MAAI,CAAC0E,4BAAL,CAAkC16E,GAAlC,CACE,GAAIuN,aAAJ,CAAWnH,QAAQ,CAACrI,CAApB,CAAuBqI,QAAQ,CAACnI,CAAhC,CAAmCmI,QAAQ,CAACzH,CAAT,CAAa0gD,UAAU,CAACnI,KAA3D,CADF,CAEE8+B,gBAAgB,CAAChtE,GAAjB,CAAqB,SAACqM,MAAD,QAAYA,OAAM,CAACskD,cAAP,EAAZ,EAArB,CAFF,CAGE2jB,mBAHF,EAKD,CACF,CA1DD,EA4DA,KAAKnsB,aAAL,CAAmBqsB,wBAAnB,CACEpC,cAAc,CAAGgB,eADnB,EAGD,C,sEAEsB70D,c,CAAgB6pC,S,CAAW,IACxCpR,kBADwC,CAClB,KAAKwD,QADa,CACxCxD,iBADwC,CAGhD,GAAMhkC,SAAQ,CAAG,IAAjB,CACA,GAAM7b,MAAK,CAAG,KAAKgxD,aAAL,CAAmB+rB,gBAAnB,EAAd,CAEA,GAAM7wE,KAAI,CAAG2zC,iBAAiB,CAACS,OAAlB,CAA0Bl5B,cAAc,CAAC8wB,MAAzC,CAAb,CACA,GAAMnpC,KAAI,CAAG7C,IAAI,CAAC6C,IAAlB,CAEA7C,IAAI,CAAC0+B,IAAL,GAEA,GAAM4iB,UAAS,CAAG,GAAIzE,gCAAJ,CAChB78C,IADgB,CAEhBguE,iCAAe,CAACjpB,SAAD,CAAYliD,IAAZ,CAFC,CAGhB/O,KAHgB,CAIhBA,KAAK,CAAG6b,QAJQ,CAAlB,CAOA,GAAI2xC,SAAS,CAAC8vB,QAAV,EAAJ,CAA0B,CACxB,KAAKtsB,aAAL,CAAmBgsB,mBAAnB,CAAuCnhE,QAAvC,EACD,CAED,KAAKue,UAAL,CAAgBjyB,IAAhB,CAAqBqlD,SAArB,EAEA,KAAKpzB,UAAL,CAAgBjyB,IAAhB,CACE,GAAIoiD,8BAAJ,CACEr+C,IADF,CAEE+kD,SAAS,CAAC,CAAD,CAAT,CAAaz4C,KAAb,CAAmB03C,WAAnB,CAA+BhkD,IAAI,CAAC6C,IAAL,CAAUyB,EAAzC,CAFF,CADF,EAMD,C,+CAEY,qBAKP,KAAK6yC,QALE,CAETxD,iBAFS,iBAETA,iBAFS,CAGT+B,OAHS,iBAGTA,OAHS,CAIT3N,wBAJS,iBAITA,wBAJS,CAMX4L,iBAAiB,CAACuF,QAAlB,GAA6Bn9C,OAA7B,CAAqC,SAAUiE,IAAV,CAAgB,CACnDA,IAAI,CAACm+B,IAAL,GACD,CAFD,CAEG,IAFH,EAIAuX,OAAO,CAAC27B,aAAR,GAEAtpC,wBAAwB,CAACuC,OAAzB,CAAiC,IAAjC,EACA,KAAKpc,UAAL,CAAgBnyB,OAAhB,CAAwB,SAACulD,SAAD,QAAeA,UAAS,CAACC,UAAV,EAAf,EAAxB,EAEA,OAAO,oIACR,C,+BA5iB6BH,8B,EA+iBjBgtB,gGAAf,E;;GCtlBMkD,0D,wHACJ,sCAAYn6B,QAAZ,CAAsB,wFACpB,kJAAMA,QAAN,GAEA,MAAKvO,gBAAL,CAAwBuO,QAAQ,CAACpP,wBAAjC,CAEA,MAAK+c,aAAL,CAAqB,GAAIwkB,2CAAJ,yDAArB,CACA,MAAKiI,iBAAL,CAAyB,GAAInD,yBAAJ,CAAsB,MAAKtpB,aAA3B,CAAzB,CAEA,MAAKhuC,UAAL,CAAkB,CAChB,MAAKy6D,iBADW,CAEhB,GAAI3sB,uBAAJ,yDAA0B,MAAKE,aAA/B,CAFgB,CAGhB,GAAIM,oBAAJ,CAAiB,MAAKN,aAAtB,CAHgB,CAIhB,GAAIhD,qCAAJ,EAJgB,CAKhB,GAAIskB,4BAAJ,EALgB,CAMhB,GAAIE,wBAAJ,EANgB,CAAlB,CARoB,aAgBrB,C,yGAEMvpE,mB,CAAqBwD,K,CAAOF,I,CAAM,CACvC,GAAMyL,QAAO,2IAAgB/O,mBAAhB,CAAqCwD,KAArC,CAA4CF,IAA5C,CAAb,CACA,KAAKuoC,gBAAL,CAAsBhD,MAAtB,CAA6B95B,OAA7B,EACD,C,+CAEY,CACX,MAAO,MAAP,CACD,C,sCAEMI,Q,CAAU,CACf,KAAKmsC,gBAAL,CAAsBnsC,QAAtB,EACA,MAAO,KAAP,CACD,C,+CAEY,CACX,+IACD,C,0CAnCwCgrC,2B,EAsC5Bo6B,qKAAf,E;;AC/CeA,sJAAf,E;;GCFME,4B,yBACJ,wBAAc,CAAC,8DACb,KAAKC,OAAL,CAAe,EAAf,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACD,C,2IAEgC,gBAC/B,GAAI,CAAC,KAAKA,eAAV,CAA2B,CACzB,MAAO,KAAP,CACD,CAED,GAAMC,aAAY,CAAG,KAAKF,OAAL,CAAatgE,IAAb,CACnB,SAAAygE,MAAM,QAAIA,OAAM,CAACtsE,IAAP,GAAgB,KAAI,CAACosE,eAAL,CAAqBpsE,IAArB,CAA4B,CAAhD,EADa,CAArB,CAIA,GAAI,CAACqsE,YAAL,CAAmB,CACjB,MAAO,KAAP,CACD,CAED,MAAO,CAACA,YAAD,CAAe,KAAKD,eAApB,CAAP,CACD,C,8CAEU/sD,Q,CAAU,CACnB,KAAK+sD,eAAL,CAAuB/sD,QAAvB,CACD,C,+CAEY,CACX,MAAO,MAAK+sD,eAAZ,CACD,C,8CAEUD,O,CAAS,CAClB,KAAKA,OAAL,CAAe,KAAKA,OAAL,CAAahtE,MAAb,CACb,SAAAmtE,MAAM,QAAI,CAACH,OAAO,CAACtgE,IAAR,CAAa,SAAA0gE,SAAS,QAAIA,UAAS,CAACvsE,IAAV,GAAmBssE,MAAM,CAACtsE,IAA9B,EAAtB,CAAL,EADO,CAAf,CAIA,KAAKmsE,OAAL,wDAAmB,KAAKA,OAAxB,+CAAoCA,OAApC,GACD,C,6BAGYD,mFAAf,E;;GCpCMM,kB,yBACJ,mBAAiC,IAArBnuE,KAAqB,2DAAd,EAAc,IAAVghB,SAAU,oGAC/B,KAAKrgB,EAAL,CAAUiL,EAAM,EAAhB,CACA,KAAKoV,QAAL,CAAgBA,QAAhB,CACA,KAAK9e,WAAL,CAAiBlC,IAAjB,EACD,C,0FAEU,gBACT,GAAI,CAAC,KAAKghB,QAAV,CAAoB,CAClB,MAAO,EAAP,CACD,CAED,MAAO,MAAKA,QAAL,CAAcrY,KAAd,CACJ4f,QADI,GAEJznB,MAFI,CAEG,SAAA5B,IAAI,QAAI,MAAI,CAACkvE,OAAL,CAAajwE,QAAb,CAAsBe,IAAI,CAACyB,EAA3B,CAAJ,EAFP,CAAP,CAGD,C,kDAEYzB,I,CAAM,CACjB,MAAO,MAAKkvE,OAAL,CAAajwE,QAAb,CAAsBe,IAAI,CAACyB,EAA3B,CAAP,CACD,C,wCAEOwgB,I,CAAM,CACZ,MAAO,MAAKktD,MAAL,GAAgBltD,IAAI,CAACxgB,EAA5B,CACD,C,wCAEOzB,I,CAAM,CACZ,KAAKkvE,OAAL,CAAa91E,IAAb,CAAkB4G,IAAI,CAACyB,EAAvB,EACD,C,yCAES,CACR,MAAOsN,QAAO,CAAC,KAAKogE,MAAN,CAAd,CACD,C,0CAEQltD,I,CAAM,CACb,KAAKktD,MAAL,CAAcltD,IAAI,CAACxgB,EAAnB,CACD,C,4CAESwgB,I,CAAM,CACd,GAAI,KAAKktD,MAAL,GAAgBltD,IAAI,CAACxgB,EAAzB,CAA6B,CAC3B,KAAMvG,MAAK,CAAC,qDAAD,CAAX,CACD,CAED,KAAKi0E,MAAL,CAAc,IAAd,CACD,C,kDAEYltD,I,CAAM,CACjB,MAAOA,KAAI,EAAI,KAAKktD,MAAL,GAAgBltD,IAAI,CAACxgB,EAApC,CACD,C,6CAEW,CACV,KAAK2tE,MAAL,CAAc,IAAd,CACD,C,2CAEU,CACT,MAAO,MAAKA,MAAZ,CACD,C,2CAEU,CACT,GAAI,CAAC,KAAKtwE,IAAV,CAAgB,CACd,MAAO,2BAAP,CACD,CAED,GAAI,EAAE,KAAKw4C,kBAAL,WAAmCt5C,QAAO,CAAClF,MAA7C,CAAJ,CAA0D,CACxD,MAAO,8DAAP,CACD,CAED,GACE,KAAKy+C,gBAAL,GAA0BlvC,QAAQ,CAAC,KAAKkvC,gBAAN,CAAwB,EAAxB,CAAlC,EACA,KAAKA,gBAAL,CAAwB,CAF1B,CAGE,CACA,MAAO,uDAAP,CACD,CAED,GAAI,KAAKsd,IAAL,GAAcxsD,QAAQ,CAAC,KAAKwsD,IAAN,CAAY,EAAZ,CAAtB,EAAyC,KAAKA,IAAL,CAAY,CAAzD,CAA4D,CAC1D,MAAO,mDAAP,CACD,CAED,GAAI,EAAE,KAAKwa,gBAAL,WAAiCrxE,QAAO,CAAClF,MAA3C,CAAJ,CAAwD,CACtD,MAAO,4DAAP,CACD,CAED,GAAI,KAAKw2E,MAAL,GAAgBjnE,QAAQ,CAAC,KAAKinE,MAAN,CAAc,EAAd,CAAxB,EAA6C,KAAKA,MAAL,EAAe,CAAhE,CAAmE,CACjE,MAAO,uCAAP,CACD,CACF,C,oEAEqBtvE,I,CAAM1E,G,CAAK,CAC/B,MACE,MAAKi0E,YAAL,CAAkBvvE,IAAlB,GACA1E,GAAG,CAACvJ,UAAJ,CAAe,KAAKulD,kBAApB,GAA2C,KAAKC,gBAFlD,CAID,C,6CAEW,CACV,MAAO,CACL91C,EAAE,CAAE,KAAKA,EADJ,CAEL3C,IAAI,CAAE,KAAKA,IAFN,CAGLqwE,MAAM,CAAE,KAAKA,MAHR,CAIL73B,kBAAkB,CAAE,KAAKA,kBAJpB,CAKLC,gBAAgB,CAAE,KAAKA,gBALlB,CAML83B,gBAAgB,CAAE,KAAKA,gBANlB,CAOLC,MAAM,CAAE,KAAKA,MAPR,CAQLJ,OAAO,CAAE,KAAKA,OART,CASLra,IAAI,CAAE,KAAKA,IATN,CAULua,MAAM,CAAE,KAAKA,MAVR,CAWL98E,MAAM,CAAE,KAAKA,MAXR,CAAP,CAaD,C,iDAEsB,IAAXwO,KAAW,2DAAJ,EAAI,CACrB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,KAAKA,EAA1B,CACA,KAAK3C,IAAL,CAAYgC,IAAI,CAAChC,IAAjB,CACA,KAAKqwE,MAAL,CAAcruE,IAAI,CAACquE,MAAL,EAAe,IAA7B,CACA,KAAK73B,kBAAL,CAA0Bx2C,IAAI,CAACw2C,kBAAL,CACtB,GAAIt5C,QAAO,CAAClF,MAAZ,CAAmBgI,IAAI,CAACw2C,kBAAxB,CADsB,CAEtB,GAAIt5C,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAFJ,CAGA,KAAKu2E,gBAAL,CAAwBvuE,IAAI,CAACuuE,gBAAL,CACpB,GAAIrxE,QAAO,CAAClF,MAAZ,CAAmBgI,IAAI,CAACuuE,gBAAxB,CADoB,CAEpB,GAAIrxE,QAAO,CAAClF,MAAZ,CAAmB,CAAnB,CAAsB,CAAtB,CAFJ,CAGA,KAAKy+C,gBAAL,CAAwBz2C,IAAI,CAACy2C,gBAAL,EAAyB,EAAjD,CACA;AACA,KAAK23B,OAAL,CAAepuE,IAAI,CAACouE,OAAL,EAAgB,EAA/B,CACA,KAAKI,MAAL,CAAcxuE,IAAI,CAACwuE,MAAL,EAAe,CAA7B,CACA,KAAKF,MAAL,CAActuE,IAAI,CAACsuE,MAAL,EAAe,KAA7B,CACA,KAAKva,IAAL,CAAY/zD,IAAI,CAAC+zD,IAAL,EAAa,CAAzB,CACA,KAAKviE,MAAL,CAAcwO,IAAI,CAACxO,MAAL,EAAe,CAA7B,CAEA,MAAO,KAAP,CACD,C,wBAGY28E,mEAAf,E;;GCpIMO,oB,yBACJ,mBAAY1tD,QAAZ,CAAsB,CAAC,0DACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKs1B,KAAL,CAAa,EAAb,CACD,C,sGAEcp3C,I,CAAM,CACnB,GAAMurC,KAAI,CAAG,KAAK6L,KAAL,CAAW9oC,IAAX,CAAgB,SAAAi9B,IAAI,QAAIA,KAAI,CAACgkC,YAAL,CAAkBvvE,IAAlB,CAAJ,EAApB,CAAb,CAEA,MAAOurC,KAAI,CAACspB,IAAZ,CACD,C,yDAEiB,CAChB,GAAM4a,MAAK,CAAG,EAAd,CAEA,KAAKr4B,KAAL,CAAWl+C,OAAX,CAAmB,SAAAqyC,IAAI,CAAI,CACzB,GAAIspB,KAAI,CAAG4a,KAAK,CAACnhE,IAAN,CAAW,SAAA5d,CAAC,QAAIA,EAAC,CAACmkE,IAAF,GAAWtpB,IAAI,CAACspB,IAApB,EAAZ,CAAX,CAEA,GAAI,CAACA,IAAL,CAAW,CACTA,IAAI,CAAG,CACLA,IAAI,CAAEtpB,IAAI,CAACspB,IADN,CAELzd,KAAK,CAAE,CAAC7L,IAAD,CAFF,CAAP,CAIAkkC,KAAK,CAACr2E,IAAN,CAAWy7D,IAAX,EACD,CAND,IAMO,CACLA,IAAI,CAACzd,KAAL,CAAWh+C,IAAX,CAAgBmyC,IAAhB,EACD,CACF,CAZD,EAcA,MAAOkkC,MAAP,CACD,C,4DAEiBxtD,I,CAAMjiB,I,CAAM,CAC5B,GAAM0vE,SAAQ,CAAG,KAAKt4B,KAAL,CAAW9oC,IAAX,CAAgB,SAAA+jB,CAAC,QAAIA,EAAC,CAAC88C,MAAF,GAAaltD,IAAI,CAACxgB,EAAtB,EAAjB,CAAjB,CAEA,GAAI,CAACiuE,QAAL,CAAe,CACb,MAAO,MAAP,CACD,CAED,MAAO,MAAK7vB,aAAL,CAAmB7/C,IAAnB,EAAyB60D,IAAzB,GAAkC6a,QAAQ,CAAC7a,IAAlD,CACD,C,gDAEW5yC,I,CAAM4yC,I,CAAM,CACtB,GAAM6a,SAAQ,CAAG,KAAKt4B,KAAL,CAAW9oC,IAAX,CAAgB,SAAA+jB,CAAC,QAAIA,EAAC,CAAC88C,MAAF,GAAaltD,IAAI,CAACxgB,EAAtB,EAAjB,CAAjB,CAEA,GAAI,CAACiuE,QAAL,CAAe,CACb,MAAO,MAAP,CACD,CAED,MAAO7a,KAAI,GAAK6a,QAAQ,CAAC7a,IAAzB,CACD,C,wDAEetpB,I,CAAMtpB,I,CAAM,CAC1B,GAAMytD,SAAQ,CAAG,KAAKt4B,KAAL,CAAW9oC,IAAX,CAAgB,SAAA+jB,CAAC,QAAIA,EAAC,CAAC88C,MAAF,GAAaltD,IAAjB,EAAjB,CAAjB,CAEA,GAAI,CAACytD,QAAL,CAAe,CACb,MAAO,MAAP,CACD,CAED,MAAOnkC,KAAI,CAACspB,IAAL,GAAc6a,QAAQ,CAAC7a,IAA9B,CACD,C,oDAEa5yC,I,CAAM,CAClB,MAAO,MAAKm1B,KAAL,CAAWx1C,MAAX,CAAkB,SAAA2pC,IAAI,QAAIA,KAAI,CAACiM,OAAL,CAAav1B,IAAb,CAAJ,EAAtB,CAAP,CACD,C,oDAEajiB,I,CAAM,CAClB,MAAO,MAAKo3C,KAAL,CAAW9oC,IAAX,CAAgB,SAAAi9B,IAAI,QAAIA,KAAI,CAACgkC,YAAL,CAAkBvvE,IAAlB,CAAJ,EAApB,CAAP,CACD,C,gDAEWyB,E,CAAI,CACd,MAAO,MAAK21C,KAAL,CAAW9oC,IAAX,CAAgB,SAAAi9B,IAAI,QAAIA,KAAI,CAAC9pC,EAAL,GAAYA,EAAhB,EAApB,CAAP,CACD,C,0CAEQ21C,K,CAAO,CACdA,KAAK,CAACl+C,OAAN,CAAc,KAAKy2E,OAAL,CAAah5E,IAAb,CAAkB,IAAlB,CAAd,EACD,C,2CAEU,CACT,MAAO,MAAKygD,KAAZ,CACD,C,wCAEO7L,I,CAAM,CACZ,KAAK6L,KAAL,CAAWh+C,IAAX,CAAgBmyC,IAAhB,EACA,MAAOA,KAAP,CACD,C,6CAEW,CACV,MAAO,CACL6L,KAAK,CAAE,KAAKA,KAAL,CAAWt9C,GAAX,CAAe,SAAAyxC,IAAI,QAAIA,KAAI,CAACxoC,SAAL,EAAJ,EAAnB,CADF,CAAP,CAGD,C,iDAEsB,mBAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKs2C,KAAL,CAAat2C,IAAI,CAACs2C,KAAL,CACTt2C,IAAI,CAACs2C,KAAL,CAAWt9C,GAAX,CAAe,SAAA81E,QAAQ,QAAI,IAAIX,cAAJ,CAAaW,QAAb,CAAuB,KAAI,CAAC9tD,QAA5B,CAAJ,EAAvB,CADS,CAET,EAFJ,CAIA,MAAO,KAAP,CACD,C,yBAGY0tD,sEAAf,E;;GCtGMK,gD,6HACJ,kCAAwC,cAA5BxkE,MAA4B,2DAApB,CAAoB,IAAjBykE,SAAiB,2DAAN,IAAM,yEACtC,+IACA,MAAKzkE,KAAL,CAAaA,KAAb,CAEA,MAAKykE,QAAL,CAAgBA,QAAhB,CACA,MAAKC,UAAL,CAAkB,CAAlB,CALsC,aAMvC,C,8GAEW9mE,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CAC5C,GAAIA,gBAAgB,GAAK,KAAzB,CAAgC,CAC9B,MAAO,MAAP,CACD,CAED,MAAO,MAAKg6D,QAAL,GAAkB,CAAzB,CACD,C,0CAEQ7mE,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CACzC,GAAIA,gBAAgB,GAAK,KAAzB,CAAgC,CAC9B,MAAO,MAAP,CACD,CAED,GAAMk6D,eAAc,CAAG,KAAK7pE,MAAL,CAAYgF,WAAZ,CAAwBE,KAAxB,CAA8BK,uBAA9B,EAAvB,CAEA,GAAI,KAAKvF,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAO,MAAP,CACD,CAED,GAAI,KAAKypE,QAAL,GAAkB,IAAlB,EAA0B,KAAKC,UAAL,EAAmB,KAAKD,QAAtD,CAAgE,CAC9D,MAAO,MAAP,CACD,CAED,MAAOE,eAAc,EAAI,KAAKC,wBAAL,EAAzB,CACD,C,8CAEUhnE,O,CAAS6M,gB,CAAkB,CACpC,MAAO,MAAKi6D,UAAL,CAAkB,CAAzB,CACD,C,0EAEwB9mE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACtD,MAAO,MAAKzK,KAAL,CAAayK,gBAApB,CACD,C,0CAEQ7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACtC,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG,KAAKi6D,UAA/B,CACD,C,gEAEmB9mE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACjD,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAMzK,MAAK,CAAG,KAAK0kE,UAAL,CAAkB,KAAK1kE,KAArC,CACA,MAAOA,MAAK,CAAGyK,gBAAf,CACD,C,oCAEK7M,O,CAAS6M,gB,CAAkB,CAC/B,GAAI,CAAC,KAAKo6D,QAAL,CAAcjnE,OAAd,CAAL,CAA6B,CAC3B,MAAO,MAAP,CACD,CAED,KAAK8mE,UAAL,GACA,KAAK5pE,MAAL,CAAYC,WAAZ,CAAwB,4BAAxB,EACD,C,wCAEO6C,O,CAAS6M,gB,CAAkB,CACjC,GAAI,KAAKi6D,UAAL,GAAoB,CAAxB,CAA2B,CACzB,MAAO,MAAP,CACD,CAED,KAAKA,UAAL,GACA,KAAK5pE,MAAL,CAAYC,WAAZ,CAAwB,4BAAxB,EACD,C,+CAEY,CACX,KAAK2pE,UAAL,CAAkB,CAAlB,CACA,KAAK5pE,MAAL,CAAYC,WAAZ,CAAwB,4BAAxB,EACD,C,wGAEuC6C,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACrE,GAAIA,gBAAgB,CAAG,CAAvB,CAA0B,CACxB,MAAOA,iBAAP,CACD,CAED,MAAO,EAAP,CACD,C,iEAE0C,IAAvBkM,aAAuB,MAAvBA,YAAuB,CAATD,KAAS,MAATA,KAAS,CACzC,GAAI,CAACC,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,KAAK7b,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,OACD,CAED,GAAM2vD,eAAc,CAAGh0C,YAAY,CAACmuD,uBAAb,CACrBN,uBADqB,EAErB,CAFqB,CAAvB,CAIA,GAAMO,iBAAgB,CAAGpa,cAAc,CAAC+Z,UAAxC,CAEA,GAAI,KAAKA,UAAL,CAAkBK,gBAAlB,EAAsCruD,KAAK,GAAK,CAApD,CAAuD,CACrD,MAAO,IAAP,CAAa,CACX,GAAI,KAAKguD,UAAL,GAAoBK,gBAAxB,CAA0C,CACxC,OACD,CAED,GAAI,CAAC,KAAKC,UAAL,EAAL,CAAwB,CACtB,OACD,CAED,KAAKC,OAAL,GACD,CACF,CAZD,IAYO,IAAI,KAAKP,UAAL,CAAkBK,gBAAlB,EAAsCruD,KAAK,GAAK,CAApD,CAAuD,CAC5D,MAAO,IAAP,CAAa,CACX,GAAI,KAAKguD,UAAL,GAAoBK,gBAAxB,CAA0C,CACxC,OACD,CAED,GAAI,CAAC,KAAKF,QAAL,EAAL,CAAsB,CACpB,OACD,CAED,KAAKK,KAAL,GACD,CACF,CACF,C,wEAEuD,oBAAjC9f,OAAiC,OAAjCA,MAAiC,IAAvB36C,iBAAuB,2DAAJ,EAAI,CACtD,GAAI,CAAC26C,MAAL,CAAa,CACX,MAAO36C,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,IAA4B,CAAC,KAAKF,MAAL,CAAYC,WAAZ,CAAwB,aAAxB,CAAjC,CAAyE,CACvE,MAAO0P,iBAAP,CACD,CAED,6DACKA,gBADL,GAEE,CACEtO,IAAI,CAAE,GADR,CAEE0sB,GAAG,CAAE,eAFP,CAGE8uC,cAAc,CAAE,gCAAM,OAAI,CAAC78D,MAAL,CAAYC,WAAZ,CAAwB,OAAxB,CAAN,EAHlB,CAIE28D,eAAe,CAAE,iCAAM,CAAC,MAAI,CAAC58D,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,IAA1C,CAAP,EAJnB,CAFF,CAQE,CACEoB,IAAI,CAAE,GADR,CAEE0sB,GAAG,CAAE,gBAFP,CAGE8uC,cAAc,CAAE,gCAAM,OAAI,CAAC78D,MAAL,CAAYC,WAAZ,CAAwB,SAAxB,CAAN,EAHlB,CAIE28D,eAAe,CAAE,iCACf,CAAC,MAAI,CAAC58D,MAAL,CAAYC,WAAZ,CAAwB,YAAxB,CAAsC,IAAtC,CAA4C,IAA5C,CADc,EAJnB,CARF,GAgBD,C,4CAES6C,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEE06D,uBAAuB,CAAE,CACvBT,UAAU,CAAE,KAAKA,UADM,CAF3B,GAMD,C,iDAEsB,IAAXjvE,KAAW,2DAAJ,EAAI,CACrB,KAAKivE,UAAL,CAAkBjvE,IAAI,CAAC0vE,uBAAL,CACd1vE,IAAI,CAAC0vE,uBAAL,CAA6BT,UADf,CAEd,CAFJ,CAIA,MAAO,KAAP,CACD,C,qCA/KmCr6D,2B,EAkLvBm6D,oHAAf,E;;GC3KMY,sD,gIACJ,oCAAYC,MAAZ,CAAoB,sFAClB,kJAEA,MAAKA,MAAL,CAAcA,MAAM,EAAI,CAAxB,CAHkB,aAInB,C,6HAEiBznE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC/C,GAAIA,gBAAgB,CAAG,KAAK46D,MAA5B,CAAoC,CAClC,MAAO56D,iBAAP,CACD,CAED,MAAO,MAAK46D,MAAZ,CACD,C,wDAEeznE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC7C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI46D,OAAM,CAAG,KAAKA,MAAlB,CAEAA,MAAM,EAAI,KAAKvqE,MAAL,CAAYkI,MAAZ,CACP4iD,YADO,GAEPrvD,MAFO,CAEA,SAAAsL,QAAQ,QAAIA,SAAQ,WAAYE,wBAAxB,EAFR,EAGPnM,MAHO,CAGA,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAAC8/E,kBAAR,EAA5B,EAHA,CAG0D,CAH1D,CAAV,CAKA,GAAID,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,MAAO56D,iBAAgB,CAAG,KAAK3P,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAnB,CAAyDsqE,MAAhE,CACD,C,kEAEoBznE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,6DACKA,gBADL,GAEE,CAAE86D,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAA1B,CAFF,CAGE,CACEwjE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAHF,CAOE,CACEE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAPF,CAWE,CACEE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAXF,CAeE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkB,CAAlB,CAA1B,CAfF,CAgBE,CAAEwjE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAhBF,CAiBE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAjBF,CAkBE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAlBF,GAoBD,C,yDAEiB,CAChB,KAAKG,0BAAL,GACD,C,+EAE4B,CAC3B,GACE,CAAC,KAAK1qE,MAAN,EACA,CAAC,KAAKA,MAAL,CAAYgF,WADb,EAEA,CAAC,KAAKhF,MAAL,CAAYgF,WAAZ,CAAwBnL,IAH3B,CAIE,CACA,OACD,CAED,KAAKmG,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6BiC,QAA7B,CAAsC6uE,iCAAtC,GACD,C,wCAvEsCp7D,2B,EA0E1B+6D,6HAAf,E;;GChFMM,wD,iIACJ,qCAAY1lE,KAAZ,CAAyC,cAAtB2lE,cAAsB,2DAAN,IAAM,6EACvC,mJACA,MAAK3lE,KAAL,CAAaA,KAAK,EAAI,CAAtB,CACA,GAAI,MAAKA,KAAL,EAAc,CAAlB,CAAqB,CACnB,KAAM,IAAInQ,MAAJ,CAAU,8BAAV,CAAN,CACD,CAED,MAAK81E,aAAL,CAAqBA,aAArB,CAPuC,aAQxC,C,kHAEW/nE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBoO,IAAI,CAAE,MADc,CAEpBiN,MAAM,CAAE,mBAFY,CAGpBzS,KAAK,CAAE,KAAKmE,MAAL,CAAYC,WAAZ,CAAwB,qBAAxB,CAA+C,IAA/C,CAAqD,CAArD,CAHa,CAAtB,EAMA,MAAO0P,iBAAP,CACD,C,gEAEmB7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACjD,MAAO,MAAKzK,KAAL,CAAayK,gBAApB,CACD,C,oDAEa7M,O,CAAmC,IAA1B6M,iBAA0B,2DAAP,KAAO,CAC/C,MAAO,KAAP,CACD,C,mDAEc,CACb,MAAO,KAAP,CACD,C,wDAEe7M,O,CAAmC,IAA1B6M,iBAA0B,2DAAP,KAAO,CACjD,GAAIA,gBAAgB,GAAK,IAAzB,CAA+B,CAC7B,MAAO,KAAP,CACD,CAED,MAAO,MAAK3P,MAAL,CAAYmP,WAAZ,CAAwBzH,uBAAxB,CAAP,CACD,C,uEAEuD,oBAAjC4iD,OAAiC,MAAjCA,MAAiC,IAAvB36C,iBAAuB,2DAAJ,EAAI,CACtD,GAAI,CAAC26C,MAAL,CAAa,CACX,MAAO36C,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYgF,WAAZ,CAAwBE,KAAxB,CAA8BO,YAA9B,CAA2C,KAAKzF,MAAhD,CAAJ,CAA6D,CAC3D,6DACK2P,gBADL,GAEE,CACEtO,IAAI,CAAE,CADR,CAEE0sB,GAAG,CAAE,mBAFP,CAGE8uC,cAAc,CAAE,gCAAM,OAAI,CAAC78D,MAAL,CAAYkF,KAAZ,CAAkBc,SAAlB,EAAN,EAHlB,CAFF,GAQD,CATD,IASO,IAAI,KAAKhG,MAAL,CAAYgF,WAAZ,CAAwBE,KAAxB,CAA8BM,aAA9B,CAA4C,KAAKxF,MAAjD,CAAJ,CAA8D,CACnE,6DACK2P,gBADL,GAEE,CACEtO,IAAI,CAAE,CADR,CAEE0sB,GAAG,CAAE,oBAFP,CAGE8uC,cAAc,CAAE,gCAAM,OAAI,CAAC78D,MAAL,CAAYkF,KAAZ,CAAkBY,UAAlB,EAAN,EAHlB,CAFF,GAQD,CAED,MAAO6J,iBAAP,CACD,C,kEAEoB7M,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,GAAI,CAAC,KAAKk7D,aAAV,CAAyB,CACvB,MAAOl7D,iBAAP,CACD,CAED,6DACKA,gBADL,GAEE,CACE86D,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIW,wBAAJ,CAAkB,CAAlB,CAFZ,CAFF,CAME,CACE+iE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIW,wBAAJ,CAAkB,CAAlB,CAFZ,CANF,CAUE,CACE+iE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIW,wBAAJ,CAAkB,CAAlB,CAFZ,CAVF,CAcE,CACE+iE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIW,wBAAJ,CAAkB,CAAlB,CAFZ,CAdF,GAmBD,C,yCA7FuC6H,2B,EAgG3Bq7D,gIAAf,E;;GC3FME,oD,+HACJ,mCAAYP,MAAZ,CAAoB,qFAClB,iJAEA,MAAKA,MAAL,CAAcA,MAAM,EAAI,CAAxB,CAHkB,aAInB,C,gHAEWznE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,cADY,CAEpBzS,KAAK,CAAE,KAAKsJ,cAAL,EAFa,CAAtB,EAKA,MAAOwK,iBAAP,CACD,C,sDAEc7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC5C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI46D,OAAM,CAAG,KAAKA,MAAlB,CAEA,GAAI,KAAKvqE,MAAL,CAAYmP,WAAZ,CAAwB/H,wBAAxB,CAAJ,CAA6C,CAC3CmjE,MAAM,EAAI,CAAV,CACD,CAED,GAAI,KAAKvqE,MAAL,CAAYmP,WAAZ,CAAwB9H,wBAAxB,CAAJ,CAA6C,CAC3CkjE,MAAM,EAAI,CAAV,CACD,CAED,GAAI,KAAKvqE,MAAL,CAAYmP,WAAZ,CAAwB7H,wBAAxB,CAAJ,CAA6C,CAC3CijE,MAAM,EAAI,CAAV,CACD,CAED,GAAI,KAAKvqE,MAAL,CAAYmP,WAAZ,CAAwB5H,wBAAxB,CAAJ,CAA6C,CAC3CgjE,MAAM,EAAI,CAAV,CACD,CAED,GAAIA,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,MAAO56D,iBAAgB,CAAG46D,MAA1B,CACD,C,kEAEoBznE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,6DACKA,gBADL,GAEE,CAAEo4B,MAAM,CAAE,EAAV,CAAclhC,SAAS,CAAEO,wBAAzB,CAFF,CAGE,CAAE2gC,MAAM,CAAE,CAAV,CAAalhC,SAAS,CAAEQ,wBAAxB,CAHF,CAIE,CAAE0gC,MAAM,CAAE,CAAV,CAAalhC,SAAS,CAAES,wBAAxB,CAJF,CAKE,CAAEygC,MAAM,CAAE,CAAV,CAAalhC,SAAS,CAAEU,wBAAxB,CALF,GAOD,C,uCAtDqCgI,2B,EAyDzBu7D,0HAAf,E;;AC7DA,GAAMC,mBAAkB,CAAG,CACzB,EAAG,gBADsB,CAEzB,EAAG,YAFsB,CAGzB,EAAG,kBAHsB,CAIzB,EAAG,kBAJsB,CAKzB,EAAG,aALsB,CAMzB,EAAG,aANsB,CAOzB,EAAG,aAPsB,CAQzB,EAAG,YARsB,CASzB,EAAG,aATsB,CAA3B,CAYO,GAAMC,qBAAoB,CAAG,QAA7B,CACA,GAAMC,uBAAsB,CAAG,UAA/B,CACA,GAAMC,uBAAsB,CAAG,UAA/B,C,GAEDC,wD,iIACJ,qCACEZ,MADF,CAEEv/E,SAFF,CAME,8EAH6C,EAG7C,2BAHEogF,eAGF,CAHEA,eAGF,+BAHoB,GAGpB,0CAHyBC,SAGzB,CAHyBA,SAGzB,yBAHqC,GAGrC,mBAFAC,KAEA,2DAFON,oBAEP,IADAO,eACA,2DADiB,EACjB,6EACA,mJAEA,MAAKhB,MAAL,CAAcA,MAAM,EAAI,CAAxB,CACA,MAAKv/E,SAAL,CAAiBA,SAAS,EAAI,CAA9B,CAAiC;AACjC,MAAK8W,SAAL,CAAiB,CAAjB,CACA,MAAKspE,eAAL,CAAuBA,eAAvB,CACA,MAAKC,SAAL,CAAiBA,SAAjB,CAEA,MAAKC,IAAL,CAAYA,IAAZ,CACA,MAAKE,OAAL,CAAe,IAAf,CACA,MAAKD,cAAL,CAAsBA,cAAtB,CAEA,GAAIA,cAAc,CAACzhF,MAAf,CAAwB,CAAxB,EAA6B,CAACyhF,cAAc,CAACzyE,QAAf,CAAwBwyE,IAAxB,CAAlC,CAAiE,CAC/DC,cAAc,CAACt4E,IAAf,CAAoBq4E,IAApB,EACD,CAfD,aAgBD,C,uJAE+B,CAC9B,OAAQ,KAAKA,IAAb,EACE,IAAKN,qBAAL,CACE,MAAO,IAAP,CACF,IAAKC,uBAAL,CACE,MAAO,KAAP,CACF,IAAKC,uBAAL,CACE,MAAO,IAAP,CANJ,CAQD,C,6EAE2B,CAC1B,OAAQ,KAAKI,IAAb,EACE,IAAKN,qBAAL,CACE,MAAO,EAAP,CACF,IAAKC,uBAAL,CACE,MAAO,GAAP,CACF,IAAKC,uBAAL,CACE,MAAO,GAAP,CANJ,CAQD,C,gDAEWpoE,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CAC5C,GAAIA,gBAAgB,GAAK,KAAzB,CAAgC,CAC9B,MAAO,MAAP,CACD,CAED,MAAO,MAAK27D,IAAL,GAAcN,oBAArB,CACD,C,0CAEQloE,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CACzC,GAAIA,gBAAgB,GAAK,KAAzB,CAAgC,CAC9B,MAAO,MAAP,CACD,CAED,MAAO,MAAK27D,IAAL,GAAcN,oBAArB,CACD,C,qDAEe,CACd,MAAO,MAAKO,cAAL,CAAoBzhF,MAApB,CAA6B,CAApC,CACD,C,+CAEY,CACX,GAAI,CAAC,KAAK2hF,aAAL,EAAL,CAA2B,CACzB,KAAM,IAAI12E,MAAJ,CAAU,sBAAV,CAAN,CACD,CAED,GAAIE,MAAK,CAAG,KAAKs2E,cAAL,CAAoBG,OAApB,CAA4B,KAAKJ,IAAjC,CAAZ,CAEA,GAAIr2E,KAAK,GAAK,KAAKs2E,cAAL,CAAoBzhF,MAApB,CAA6B,CAA3C,CAA8C,CAC5CmL,KAAK,CAAG,CAAR,CACD,CAFD,IAEO,CACLA,KAAK,GACN,CAED,KAAKq2E,IAAL,CAAY,KAAKC,cAAL,CAAoBt2E,KAApB,CAAZ,CACA,KAAKu2E,OAAL,CAAe,KAAKF,IAApB,CACA,KAAKtrE,MAAL,CAAYC,WAAZ,CAAwB,YAAxB,EACD,C,gFAE2B6C,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACzD,GAAI,KAAK27D,IAAL,GAAcN,oBAAlB,CAAwC,CACtC,GAAMZ,MAAK,CAAG,KAAKpqE,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,CAAd,CAEA,MAAO0P,iBAAgB,CAAGy6D,KAAK,CAAG,IAAlC,CACD,CAED,MAAOz6D,iBAAP,CACD,C,+DAEiC,IAAfhZ,OAAe,2DAAN,IAAM,CAChC,GAAI0J,KAAI,CAAG,CAAX,CACA,GAAI+K,MAAK,CAAG,CAAZ,CAEA,GAAIzU,MAAM,GAAK,IAAf,CAAqB,CACnBA,MAAM,CAAG,KAAKmL,SAAd,CACD,CAED,MAAOnL,MAAM,EAAb,CAAiB,CACf,GAAMg1E,SAAQ,CAAG,KAAKC,yBAAL,GAAmCxgE,KAApD,CACA/K,IAAI,EAAIsrE,QAAR,CACAvgE,KAAK,EAAI,KAAKigE,SAAd,CACD,CAED,MAAOxiF,KAAI,CAAC6D,KAAL,CAAW2T,IAAX,CAAP,CACD,C,mEAEsB,CACrB,KAAKyB,SAAL,CAAiB,CAAjB,CACD,C,8DAEkBQ,O,CAAS,CAC1B,KAAKR,SAAL,EAAkBQ,OAAlB,CACD,C,8DAEkBA,O,CAAS,CAC1B,KAAKR,SAAL,CAAiBQ,OAAjB,CACD,C,+DAEoB,CACnB,MAAO,MAAKR,SAAZ,CACD,C,iDAEa,CACZ,MAAO,MAAKA,SAAL,CAAiB,GAAjB,CAAuB,KAAKqe,eAAL,EAA9B,CACD,C,4CAESrd,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEk8D,2BAA2B,CAAE,CAC3B/pE,SAAS,CAAE,KAAKA,SADW,CAE3B0pE,OAAO,CAAE,KAAKA,OAFa,CAG3BF,IAAI,CAAE,KAAKA,IAHgB,CAF/B,GAQD,C,iDAEsB,IAAX3wE,KAAW,2DAAJ,EAAI,CACrB,GAAMmxE,SAAQ,CAAGnxE,IAAI,CAACkxE,2BAAL,EAAoC,EAArD,CACA,KAAK/pE,SAAL,CAAiBgqE,QAAQ,CAAChqE,SAAT,EAAsB,CAAvC,CACA,KAAK0pE,OAAL,CAAeM,QAAQ,CAACN,OAAT,EAAoB,IAAnC,CACA,KAAKF,IAAL,CAAYQ,QAAQ,CAACR,IAAT,EAAiB,KAAKA,IAAlC,CAEA,MAAO,KAAP,CACD,C,+DAEoB,CACnB,GAAIt5B,KAAK,CAACwP,OAAN,CAAc,KAAKx2D,SAAnB,CAAJ,CAAmC,CACjC,MAAO,MAAKA,SAAL,CACJ2I,GADI,CACA,SAAC3I,SAAD,QAAe+/E,mBAAkB,CAAC//E,SAAD,CAAjC,EADA,EAEJ6mB,IAFI,CAEC,IAFD,CAAP,CAGD,CAED,MAAOk5D,mBAAkB,CAAC,KAAK//E,SAAN,CAAzB,CACD,C,gDAEW8X,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,MADY,CAEpBzS,KAAK,CAAE,KAAKyvE,IAAL,CAAU3E,MAAV,CAAiB,CAAjB,EAAoBnE,WAApB,GAAoC,KAAK8I,IAAL,CAAUS,SAAV,CAAoB,CAApB,CAFvB,CAAtB,EAKAp8D,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,QADY,CAEpBzS,KAAK,CAAE,KAAKskB,eAAL,EAFa,CAAtB,EAKAxQ,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,aADY,CAEpBzS,KAAK,CAAE,KAAKmwE,kBAAL,EAFa,CAAtB,EAKAr8D,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,WADY,CAEpBzS,KAAK,CAAE,KAAKiG,SAFQ,CAAtB,EAKA6N,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,eADY,CAEpBzS,KAAK,CAAE,KAAKmF,kBAAL,EAFa,CAAtB,EAKA,MAAO2O,iBAAP,CACD,C,+DAEoB,CACnB,GAAI,KAAK27D,IAAL,GAAcN,oBAAlB,CAAwC,CACtC,GAAI,KAAK/qE,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CAC7C,MAAO,2BAAP,CACD,CAFD,IAEO,IAAI,KAAKA,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CACpD,MAAO,2BAAP,CACD,CAFM,IAEA,IAAI,KAAKA,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CACpD,MAAO,2BAAP,CACD,CACD,MAAO,2BAAP,CACD,CATD,IASO,CACL,GAAI,KAAKA,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CAC7C,MAAO,4BAAP,CACD,CAFD,IAEO,IAAI,KAAKA,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CACpD,MAAO,4BAAP,CACD,CAFM,IAEA,IAAI,KAAKA,WAAL,CAAiB,aAAjB,CAAgC,CAAhC,CAAmC,KAAnC,CAAJ,CAA+C,CACpD,MAAO,4BAAP,CACD,CACD,MAAO,4BAAP,CACD,CACF,C,wEAEuD,IAAjCqqD,OAAiC,OAAjCA,MAAiC,IAAvB36C,iBAAuB,2DAAJ,EAAI,CACtD,GAAI,CAAC26C,MAAL,CAAa,CACX,MAAO36C,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI,CAAC,KAAK87D,aAAL,EAAL,CAA2B,CACzB,MAAO97D,iBAAP,CACD,CAED,6DACKA,gBADL,GAEE,CACEtO,IAAI,CAAE,EADR,CAEE0sB,GAAG,CACD,KAAKu9C,IAAL,GAAcN,oBAAd,CACI,4BADJ,CAEI,2BALR,CAMEnO,cAAc,CAAE,KAAKoP,UAAL,CAAgBz7E,IAAhB,CAAqB,IAArB,CANlB,CAOE07E,iBAAiB,CAAE,mCAAM,MAAN,EAPrB,CAFF,GAYD,C,qDAEe,CACd,MAAO,KAAP,CACD,C,6EAE2B,CAC1B,GAAInpE,KAAI,CAAG,KAAKopE,6BAAL,EAAX,CAEAppE,IAAI,EACF,EACA,KAAK/C,MAAL,CAAYkI,MAAZ,CACG4iD,YADH,GAEGrvD,MAFH,CAEU,SAACsL,QAAD,QAAcA,SAAQ,WAAYc,qCAAlC,EAFV,EAGG/M,MAHH,CAGU,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAAC0hF,eAAR,EAA5B,EAHV,CAGiE,CAHjE,CAFF,CAOA,MAAOrpE,KAAP,CACD,C,0DAEgBD,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC9C,GAAI6yB,MAAK,CAAG,KAAK1gC,SAAjB,CACA,GAAIsJ,MAAK,CAAG,CAAZ,CACA,GAAIrI,KAAI,CAAG,CAAX,CAEA,GAAMqnE,MAAK,CAAG,KAAKpqE,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,EAA+C,IAA7D,CACA,GAAIosE,eAAc,CAAG,KAAKjB,eAAL,CAAuBhB,KAAK,CAAG,IAApD,CAEA,GAAIiC,cAAc,CAAG,IAArB,CAA2B,CACzBA,cAAc,CAAG,IAAjB,CACD,CAED,MAAO7pC,KAAK,EAAZ,CAAgB,CACd,GAAMmpC,SAAQ,CAAG,KAAKW,yBAAL,GAAmClhE,KAApD,CACArI,IAAI,EAAI4oE,QAAR,CACAvgE,KAAK,EAAIihE,cAAT,CACD,CAED,MAAO18D,iBAAgB,CAAG5M,IAA1B,CACD,C,8DAEkBD,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CACnD,MAAO,MAAK3kB,SAAZ,CACD,C,wDAEe8X,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC7C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI46D,OAAM,CAAG,KAAKA,MAAlB,CAEAA,MAAM,EAAI,KAAKvqE,MAAL,CAAYkI,MAAZ,CACP4iD,YADO,GAEPrvD,MAFO,CAEA,SAACsL,QAAD,QAAcA,SAAQ,WAAYE,wBAAlC,EAFA,EAGPnM,MAHO,CAGA,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAAC8/E,kBAAR,EAA5B,EAHA,CAG0D,CAH1D,CAAV,CAKAD,MAAM,EAAI,KAAKvqE,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,CAAV,CAEA,GAAIsqE,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,MAAO56D,iBAAgB,CAAG46D,MAA1B,CACD,C,iEAEqB,CACpB,MAAO,MAAKpqD,eAAL,EAAP,CACD,C,0DAEgBxpB,M,CAAQ,CACvB,MAAOA,OAAM,EAAI,KAAK41E,mBAAL,EAAjB,CACD,C,sDAEc51E,M,CAAQ,CACrB,MAAOA,OAAP,CACD,C,8CAEUmM,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACxC,MAAO,KAAP,CACD,C,gDAEW3kB,S,CAAW,CACrB,MACE,MAAKA,SAAL,GAAmBA,SAAnB,EACCgnD,KAAK,CAACwP,OAAN,CAAc,KAAKx2D,SAAnB,GAAiC,KAAKA,SAAL,CAAe8N,QAAf,CAAwB9N,SAAxB,CAFpC,CAID,C,wGAEuC8X,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACrE,GAAIA,gBAAgB,CAAG,CAAvB,CAA0B,CACxB,MAAOA,iBAAP,CACD,CAED,MAAO,EAAP,CACD,C,kEAE0C,IAAvBkM,aAAuB,OAAvBA,YAAuB,CAATD,KAAS,OAATA,KAAS,CACzC,GAAIA,KAAK,GAAK,CAAd,CAAiB,CACf,OACD,CAED,GAAI,CAACC,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,KAAK7b,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,OACD,CAED,GAAM2vD,eAAc,CAAGh0C,YAAY,CAACmuD,uBAAb,CACrBmB,2BADqB,EAErB,CAFqB,CAAvB,CAIA,GAAMqB,WAAU,CAAG3c,cAAc,CAAC2b,OAAlC,CAEA,GAAIgB,UAAU,GAAK,IAAnB,CAAyB,CACvB,OACD,CAED,GAAI,CAAC,KAAKf,aAAL,EAAD,EAAyB,CAAC,KAAKF,cAAL,CAAoBzyE,QAApB,CAA6B0zE,UAA7B,CAA9B,CAAwE,CACtE,KAAM,IAAIz3E,MAAJ,8CAAgDy3E,UAAhD,EAAN,CACD,CAED,KAAKlB,IAAL,CAAYkB,UAAZ,CACA,KAAKA,UAAL,CAAkB,IAAlB,CACA,KAAKxsE,MAAL,CAAYC,WAAZ,CAAwB,YAAxB,EACD,C,iDAEa,CACZ,KAAK6B,SAAL,CAAiB,CAAjB,CACA,KAAK0qE,UAAL,CAAkB,IAAlB,CACD,C,kEAEoB1pE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,6DACKA,gBADL,GAGE,CAAE86D,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIc,qCAAJ,CAA+B,GAA/B,CAAoC,CAApC,CAA1B,CAHF,CAIE,CACE4iE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAJF,CAQE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIc,qCAAJ,CAA+B,GAA/B,CAAoC,CAApC,CAA1B,CARF,CASE,CAAE4iE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIc,qCAAJ,CAA+B,GAA/B,CAA1B,CATF,CAUE,CAAE4iE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAVF,CAWE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAXF,CAYE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAZF,GAcD,C,yDAEiB,CAChB,KAAKG,0BAAL,GACD,C,+EAE4B,CAC3B,KAAKA,0BAAL,GACD,C,+EAE4B,CAC3B,GACE,CAAC,KAAK1qE,MAAN,EACA,CAAC,KAAKA,MAAL,CAAYgF,WADb,EAEA,CAAC,KAAKhF,MAAL,CAAYgF,WAAZ,CAAwBnL,IAH3B,CAIE,CACA,OACD,CAED,KAAKmG,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6BiC,QAA7B,CAAsC6uE,iCAAtC,GACD,C,yCAtZuCp7D,2B,EAyZ3B47D,gIAAf,E;;GC3aMsB,wD,iIACJ,qCAAYjwE,OAAZ,CAAqB,uFACnB,mJAEA,MAAKA,OAAL,CAAeA,OAAO,EAAI,CAA1B,CAHmB,aAIpB,C,sHAEasG,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC3C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG,KAAKnT,OAA/B,CACD,C,yCAbuC+S,2B,EAgB3Bk9D,gIAAf,E;;ACNA,GAAMC,uCAAY,CAAG,QAAfA,aAAe,CAAAzyE,IAAI,CAAI,CAC3B,OAAQA,IAAR,EACE,IAAK0iB,aAAL,CACE,MAAO,cAAP,CACF,IAAKA,aAAL,CACE,MAAO,cAAP,CACF,IAAKA,MAAL,CACE,MAAO,iBAAP,CACF,IAAKA,qBAAL,CACE,MAAO,sBAAP,CACF,IAAKA,qBAAL,CACE,MAAO,cAAP,CACF,IAAKA,cAAL,CACE,MAAO,eAAP,CACF,IAAKA,0BAAL,CACE,MAAO,mBAAP,CAdJ,CAgBD,CAjBD,C,GAmBMgwD,oD,+HACJ,mCAAYpC,MAAZ,CAAoBqC,cAApB,CAAoC,qFAClC,iJAEA,MAAKrC,MAAL,CAAcA,MAAM,EAAI,CAAxB,CACA,MAAKqC,cAAL,CAAsBA,cAAc,EAAI,CACtCjwD,YADsC,CAEtCA,YAFsC,CAGtCA,KAHsC,CAAxC,CAMA,MAAK3U,OAAL,CAAe,EAAf,CAVkC,aAWnC,C,4GAESlF,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEk9D,yBAAyB,CAAC,6CACrB,KAAK7kE,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QAAIA,MAAK,CAACqB,SAAN,EAAJ,EAAtB,CADoB,CAF3B,GAMD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKqN,OAAL,CAAerN,IAAI,CAACkyE,yBAAL,CACXlyE,IAAI,CAACkyE,yBAAL,CAA+Bl5E,GAA/B,CACE,SAAA4H,KAAK,QACH,IAAIkhB,yCAAJ,CACElhB,KAAK,CAACtB,IADR,CAEEsB,KAAK,CAACmhB,YAFR,CAGEnhB,KAAK,CAAC5E,MAHR,CADG,EADP,CADW,CASX,EATJ,CAWA,MAAO,KAAP,CACD,C,gDAEWmM,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,cADY,CAEpBzS,KAAK,CAAE,KAAKixE,oBAAL,EAFa,CAAtB,EAKAn9D,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,YADY,CAEpBzS,KAAK,CAAE,KAAK+wE,cAAL,CAAoBj5E,GAApB,CAAwB+4E,sCAAxB,EAAsC76D,IAAtC,CAA2C,IAA3C,CAFa,CAAtB,EAKA,MAAOlC,iBAAP,CACD,C,mEAEsB,CACrB,MAAO,MAAKo9D,cAAL,GAAwB,GAAxB,CAA8B,KAAKC,WAAL,EAArC,CACD,C,yDAEiB,CAChB,MAAO,MAAKC,eAAZ,CACD,C,8CAEUhzE,I,CAAM4oB,Q,CAAU,CACzB,MAAO,MAAK7a,OAAL,CAAaG,IAAb,CACL,SAAA5M,KAAK,QAAIA,MAAK,CAACtB,IAAN,GAAeA,IAAf,EAAuBsB,KAAK,CAACmhB,YAAN,GAAuBmG,QAAlD,EADA,CAAP,CAGD,C,+CAEkC,IAAxB5oB,KAAwB,MAAxBA,IAAwB,CAAlB/M,MAAkB,MAAlBA,MAAkB,CAAVyJ,MAAU,MAAVA,MAAU,CACjC,GAAIzJ,MAAM,WAAYmwB,UAAtB,CAA4B,CAC1BnwB,MAAM,CAAGA,MAAM,CAACoO,EAAhB,CACD,CAED,GAAI,CAAC,KAAK4xE,QAAL,CAAc,CAAEjzE,IAAI,CAAJA,IAAF,CAAQtD,MAAM,CAANA,MAAR,CAAd,CAAL,CAAsC,CACpC,KAAM,IAAI5B,MAAJ,CAAU,uBAAV,CAAN,CACD,CAED,GAAIwG,MAAK,CAAG,KAAK4xE,UAAL,CAAgBlzE,IAAhB,CAAsB/M,MAAtB,CAAZ,CACA,GAAI,CAACqO,KAAD,EAAU5E,MAAM,EAAI,CAAxB,CAA2B,CACzB,OACD,CAFD,IAEO,IAAI,CAAC4E,KAAL,CAAY,CACjBA,KAAK,CAAG,GAAIkhB,yCAAJ,CAA2BxiB,IAA3B,CAAiC/M,MAAjC,CAAyCyJ,MAAzC,CAAR,CACA,KAAKqR,OAAL,CAAa/U,IAAb,CAAkBsI,KAAlB,EACD,CAHM,IAGA,CACLA,KAAK,CAAC6xE,SAAN,CAAgBz2E,MAAhB,EACD,CACF,C,mDAEc,CACb,MAAO,MAAKqR,OAAL,CAAarU,GAAb,CAAiB,SAAA4H,KAAK,QAAIA,MAAK,CAACpJ,KAAN,EAAJ,EAAtB,CAAP,CACD,C,gDAE0B,IAAhB8H,KAAgB,OAAhBA,IAAgB,CAAVtD,MAAU,OAAVA,MAAU,CACzB,MAAO,MAAK02E,YAAL,CAAkBpzE,IAAlB,GAA2B,KAAKqzE,cAAL,CAAoB32E,MAApB,CAAlC,CACD,C,kDAEYsD,I,CAAM,CACjB,MAAO,MAAK2yE,cAAL,CAAoB9zE,QAApB,CAA6BmB,IAA7B,CAAP,CACD,C,sDAEctD,M,CAAQ,CACrB,MAAO,MAAKq2E,WAAL,IAAsB,KAAKD,cAAL,GAAwBp2E,MAArD,CACD,C,6DAEmB,CAClB,MAAO,MAAKq2E,WAAL,GAAqB,KAAKD,cAAL,EAA5B,CACD,C,kEAEoB9yE,I,CAAM,CACzB,GAAIA,IAAI,GAAK0iB,YAAb,CAAmC,CACjC,GAAI,CAAC,KAAK0wD,YAAL,CAAkB1wD,YAAlB,CAAL,CAA8C,CAC5C,MAAO,EAAP,CACD,CAED,MAAO,MAAK4wD,iBAAL,EAAP,CACD,CAED,MAAO,MAAKvlE,OAAL,CACJvM,MADI,CACG,SAAAF,KAAK,QAAIA,MAAK,CAACtB,IAAN,GAAeA,IAAnB,EADR,EAEJa,MAFI,CAEG,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAAK,CAAC+hB,SAAN,EAA1B,EAFH,CAEgD,CAFhD,CAAP,CAGD,C,uDAEgB,CACf,MAAO,MAAKtV,OAAL,CAAalN,MAAb,CAAoB,SAACC,KAAD,CAAQQ,KAAR,QAAkBR,MAAK,CAAGQ,KAAK,CAAC+hB,SAAN,EAA1B,EAApB,CAAiE,CAAjE,CAAP,CACD,C,4DAEiBxa,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC/C,GAAIA,gBAAgB,CAAG,KAAK46D,MAA5B,CAAoC,CAClC,MAAO56D,iBAAP,CACD,CAED,MAAO,MAAK46D,MAAZ,CACD,C,gDAEWznE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACzC,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI46D,OAAM,CAAG,KAAKA,MAAlB,CAEAA,MAAM,EAAI,KAAKvqE,MAAL,CAAYkI,MAAZ,CACP4iD,YADO,GAEPrvD,MAFO,CAEA,SAAAsL,QAAQ,QAAIA,SAAQ,WAAYE,wBAAxB,EAFR,EAGPnM,MAHO,CAGA,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAAC8/E,kBAAR,EAA5B,EAHA,CAG0D,CAH1D,CAAV,CAKA,MACE76D,iBAAgB,CAAG,KAAK3P,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,CAAnB,CAAkEsqE,MADpE,CAGD,C,4CAESznE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACvC,MAAO,KAAP,CACD,C,yCAES,CACR,KAAK3H,OAAL,CAAe,EAAf,CACD,C,kEAEoBlF,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,6DACKA,gBADL,GAEE,CAAE86D,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkB,CAAlB,CAA1B,CAFF,CAGE,CACEwjE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAHF,CAOE,CACEE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAPF,CAYE,CACEE,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA8C,CAA9C,CAFZ,CAZF,CAgBE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAhBF,CAiBE,CAAEE,QAAQ,CAAE,EAAZ,CAAgB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA1B,CAjBF,CAkBE,CAAEE,QAAQ,CAAE,GAAZ,CAAiB1jE,QAAQ,CAAE,GAAIE,wBAAJ,CAAkBpe,IAAI,CAAC+nB,IAAL,CAAU,KAAK25D,MAAL,CAAc,CAAxB,CAAlB,CAA3B,CAlBF,GAoBD,C,0DAEuB,IAARxuD,KAAQ,OAARA,IAAQ,CACtB,GAAI,CAACA,IAAL,CAAW,CACT,KAAK/T,OAAL,CAAe,EAAf,CACD,CACF,C,yDAEiB,CAChB,KAAK0iE,0BAAL,GACD,C,+EAE4B,CAC3B,GACE,CAAC,KAAK1qE,MAAN,EACA,CAAC,KAAKA,MAAL,CAAYgF,WADb,EAEA,CAAC,KAAKhF,MAAL,CAAYgF,WAAZ,CAAwBnL,IAH3B,CAIE,CACA,OACD,CAED,KAAKmG,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6BqoB,iBAA7B,CAA+CsrD,sBAA/C,GACD,C,uCAxMqCj+D,2B,EA2MzBo9D,0HAAf,E;;GCxOMc,0E,0IACJ,8CAAY/rD,KAAZ,CAAmBmG,IAAnB,CAAgD,cAAvB6lD,kBAAuB,2DAAH,CAAG,sFAC9C,4JAEA,MAAKhsD,KAAL,CAAaA,KAAb,CACA,MAAKmG,IAAL,CAAYA,IAAZ,CACA,MAAK6lD,iBAAL,CAAyBA,iBAAzB,CACA,MAAKzlB,YAAL,CAAoB,CAApB,CAN8C,aAO/C,C,uHAESnlD,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEg+D,oCAAoC,CAAE,CACpC1lB,YAAY,CAAE,KAAKA,YADiB,CAFxC,GAMD,C,iDAEsB,IAAXttD,KAAW,2DAAJ,EAAI,CACrB,GAAMmxE,SAAQ,CAAGnxE,IAAI,CAACgzE,oCAAL,EAA6C,EAA9D,CACA,KAAK1lB,YAAL,CAAoB6jB,QAAQ,CAAC7jB,YAAT,EAAyB,CAA7C,CAEA,MAAO,KAAP,CACD,C,8EAE0BnlD,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACxD,GACG,KAAK3P,MAAL,CAAYwD,WAAZ,IAA6B,KAAKykD,YAAL,CAAoB,CAAlD,EACA,KAAKA,YAAL,CAAoB,CAFtB,CAGE,CACA,MAAOt4C,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG,KAAK+9D,iBAA/B,CACD,C,gDAEW5qE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,+BADY,CAEpBzS,KAAK,WAAK,KAAK6lB,KAAV,aAAmB,KAAKmG,IAAxB,CAFe,CAAtB,EAIAlY,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,qCADY,CAEpBzS,KAAK,YAAM,KAAK6xE,iBAAX,CAFe,CAAtB,EAKA,GAAI,CAAC,KAAK1tE,MAAL,CAAYwD,WAAZ,EAAL,CAAgC,CAC9B,GAAI,KAAKykD,YAAL,CAAoB,CAAxB,CAA2B,CACzBt4C,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,+EADe,CAAtB,EAGD,CAJD,IAIO,CACL8T,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,0CACH,EAAI,KAAKosD,YADN,4CADe,CAAtB,EAKD,CACF,CAZD,IAYO,CACLt4C,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,yDADe,CAAtB,EAGD,CAED,MAAO8T,iBAAP,CACD,C,yDAEqD,qBAAtC+R,KAAsC,CAAtCA,KAAsC,qBAA9B,IAA8B,eAAtB/R,iBAAsB,2DAAH,CAAG,CACpD,GACG,KAAK3P,MAAL,CAAYwD,WAAZ,IAA6B,KAAKykD,YAAL,CAAoB,CAAlD,EACA,KAAKA,YAAL,CAAoB,CAFtB,CAGE,CACA,MAAOt4C,iBAAP,CACD,CAED,GAAI+R,KAAJ,CAAW,CACT,MAAO/R,iBAAgB,CAAG,KAAK+R,KAA/B,CACD,CAFD,IAEO,CACL,MAAO/R,iBAAgB,CAAG,KAAKkY,IAA/B,CACD,CACF,C,iDAEa,CACZ,GAAI,KAAK7nB,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,KAAK+nD,YAAL,GACD,CAFD,IAEO,CACL,KAAKA,YAAL,CAAoB,CAApB,CACD,CACF,C,iDAEa,CACZr1D,OAAO,CAACya,GAAR,CAAY,WAAZ,CAAyB,KAAKrN,MAAL,CAAYkF,KAAZ,CAAkBW,QAAlB,EAAzB,EACA,GAAI,KAAK7F,MAAL,CAAYkF,KAAZ,CAAkBW,QAAlB,EAAJ,CAAkC,CAChCjT,OAAO,CAACya,GAAR,CAAY,aAAZ,EACA,KAAKrN,MAAL,CAAYkF,KAAZ,CAAkBY,UAAlB,GACD,CAED,KAAKmiD,YAAL,CAAoB,EAApB,CACD,C,kDAnGgD14C,2B,EAsGpCk+D,2JAAf,E;;GCtGMG,0E,8IACJ,+CAA0D,cAA9CjE,SAA8C,2DAAnC,IAAmC,IAA7BkE,qBAA6B,2DAAN,IAAM,sFACxD,0JAAM,CAAN,CAASlE,QAAT,GACA,MAAKkE,oBAAL,CAA4BA,oBAA5B,CAFwD,aAGzD,C,qJAEwB/qE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACtD,GAAM46D,OAAM,CACV,KAAKsD,oBAAL,GAA8B,IAA9B,CACI,KAAKA,oBADT,CAEI,KAAK7tE,MAAL,CAAYC,WAAZ,CAAwB,mBAAxB,CAA6C,IAA7C,CAAmD,CAAnD,CAHN,CAIA,MAAOsqE,OAAM,CAAG,KAAKX,UAAd,CAA2Bj6D,gBAA3B,CAA8C,CAArD,CACD,C,gEAEmB7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACjD,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAM46D,OAAM,CACV,KAAKsD,oBAAL,GAA8B,IAA9B,CACI,KAAKA,oBADT,CAEI,KAAK7tE,MAAL,CAAYC,WAAZ,CAAwB,mBAAxB,CAA6C,IAA7C,CAAmD,CAAnD,CAHN,CAIA,GAAMiF,MAAK,CAAG,KAAK0kE,UAAL,CAAkBW,MAAlB,CAA2B,KAAKX,UAA9C,CACA,MAAO1kE,MAAK,CAAGyK,gBAAf,CACD,C,kDAzBgD+5D,gC,EA4BpCkE,2JAAf,E;;GC5BME,gE,qIACJ,0CAA4B,cAAhBC,WAAgB,2DAAH,CAAG,iFAC1B,uJAEA,MAAKA,UAAL,CAAkBA,UAAlB,CAH0B,aAI3B,C,gIAEgBjrE,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC9C,GAAI,CAAC,KAAK3P,MAAL,CAAYE,UAAZ,EAAL,CAA+B,CAC7B,MAAOyP,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG,KAAKo+D,UAA/B,CACD,C,gDAEWjrE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,8BADY,CAEpBzS,KAAK,YAAM,KAAKkyE,UAAX,CAFe,CAAtB,EAKA,MAAOp+D,iBAAP,CACD,C,6CAtB2CJ,2B,EAyB/Bu+D,4IAAf,E;;GCzBME,kD,8HACJ,kCACEC,UADF,CAIE,cAFAC,wBAEA,2DAF0B,CAE1B,IADAxkE,sBACA,2DADwB,GACxB,0EACA,gJACA,MAAKukE,UAAL,CAAkBA,UAAlB,CACA,MAAKC,uBAAL,CAA+BA,uBAA/B,CACA,MAAKxkE,qBAAL,CAA6BA,qBAA7B,CAJA,aAKD,C,yIAEwB5G,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CACtD,GAAIA,gBAAgB,EAAIA,gBAAgB,CAAG,KAAKjG,qBAAhD,CAAuE,CACrE,MAAOiG,iBAAP,CACD,CAED,MAAO,MAAKjG,qBAAZ,CACD,C,gDAEW5G,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,MAAOA,iBAAP,CACD,C,qDAEe,CACd,MAAO,KAAP,CACD,C,0DAEgB7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC9C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAMi6D,WAAU,CAAG,KAAK5pE,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,CAAnB,CAEA,MACE0P,iBAAgB,CAChB,KAAKs+D,UADL,CAEArE,UAAU,CAAG,KAAKsE,uBAHpB,CAKD,C,sCAxCoC3+D,2B,EA2CxBy+D,uHAAf,E;;GC3CMG,4C,2HACJ,+BAAYC,gBAAZ,CAA8B,iFAC5B,6IACA,MAAKA,gBAAL,CAAwBA,gBAAxB,CAF4B,aAG7B,C,iHAEe,CACd,MAAO,KAAP,CACD,C,gDAEWtrE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,MAAOA,iBAAP,CACD,C,0DAEgB7M,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC9C,GAAM2T,WAAU,CAAG,KAAKtjB,MAAL,CAAYC,WAAZ,CAAwB,eAAxB,CAAyC,IAAzC,CAA+C,EAA/C,CAAnB,CAEA,GAAIqjB,UAAU,CAACx5B,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAO6lB,iBAAP,CACD,CAED,MAAOA,iBAAgB,CAAG2T,UAAU,CAAG,KAAK8qD,gBAA5C,CACD,C,mCAtBiC7+D,2B,EAyBrB4+D,8GAAf,E;;GCzBME,8D,oIACJ,yCAAyC,cAA7BC,qBAA6B,2DAAN,IAAM,gFACvC,sJAEA,MAAKA,oBAAL,CAA4BA,oBAA5B,CACA,MAAKrmB,YAAL,CAAoB,CAApB,CAJuC,aAKxC,C,yHAEanlD,O,CAAmC,IAA1B6M,iBAA0B,2DAAP,KAAO,CAC/C,GAAI,KAAK3P,MAAL,CAAYwD,WAAZ,EAAJ,CAA+B,CAC7B,MAAOmM,iBAAP,CACD,CAED,GACE,KAAK2+D,oBAAL,GAA8B,IAA9B,EACA,KAAKrmB,YAAL,EAAqB,KAAKqmB,oBAF5B,CAGE,CACA,MAAO3+D,iBAAP,CACD,CAED,MAAO,KAAP,CACD,C,4CAES7M,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEE4+D,8BAA8B,CAAE,CAC9BtmB,YAAY,CAAE,KAAKA,YADW,CAFlC,GAMD,C,iDAEsB,IAAXttD,KAAW,2DAAJ,EAAI,CACrB,GAAMmxE,SAAQ,CAAGnxE,IAAI,CAAC4zE,8BAAL,EAAuC,EAAxD,CACA,KAAKtmB,YAAL,CAAoB6jB,QAAQ,CAAC7jB,YAAT,EAAyB,CAA7C,CAEA,MAAO,KAAP,CACD,C,gDAEWnlD,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,GAAI,KAAK3P,MAAL,CAAYwD,WAAZ,EAAJ,CAA+B,CAC7B,MAAOmM,iBAAP,CACD,CAED,GAAI,KAAK2+D,oBAAL,GAA8B,IAAlC,CAAwC,CACtC3+D,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,gEADe,CAAtB,EAGD,CAJD,IAIO,CACL,GAAI,KAAKosD,YAAL,EAAqB,KAAKqmB,oBAA9B,CAAoD,CAClD3+D,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,mEADe,CAAtB,EAGD,CAJD,IAIO,CACL8T,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,wCAAkC,KAAKyyE,oBAAL,CACrC,KAAKrmB,YADF,uCADe,CAAtB,EAID,CACF,CAED,MAAOt4C,iBAAP,CACD,C,iDAEa,CACZ,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,KAAK+nD,YAAL,GACD,CAFD,IAEO,CACL,KAAKA,YAAL,CAAoB,CAApB,CACD,CACF,C,4CAtE0C14C,2B,EAyE9B8+D,yIAAf,E;;GCvEMG,wC,yHACJ,8BAAgD,cAApC3qB,YAAoC,2DAAtB,CAAsB,IAAnB1vC,cAAmB,2DAAH,CAAG,qEAC9C,2IACA,MAAK0vC,WAAL,CAAmBA,WAAnB,CACA,MAAK1vC,aAAL,CAAqBA,aAArB,CAH8C,aAI/C,C,0GAEWrR,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,cADY,CAEpBzS,KAAK,CAAE,KAAKgoD,WAFQ,CAAtB,EAKA,MAAOl0C,iBAAP,CACD,C,+DAEqC,IAAnB6C,QAAmB,MAAnBA,OAAmB,CAAVtlB,MAAU,MAAVA,MAAU,CACpC,MAAOA,OAAM,CAACwnB,aAAP,CAAqBlC,OAAO,CAACC,WAAR,EAArB,CAAP,CACD,C,oEAEuE,IAAnDD,QAAmD,OAAnDA,OAAmD,CAA1CtlB,MAA0C,OAA1CA,MAA0C,CAAlCuhF,cAAkC,OAAlCA,cAAkC,CAAlBv8D,cAAkB,OAAlBA,cAAkB,CACtE,GAAMw8D,MAAK,CAAG,KAAK75D,YAAL,CAAkB,CAAErC,OAAO,CAAPA,OAAF,CAAWtlB,MAAM,CAANA,MAAX,CAAmBuhF,cAAc,CAAdA,cAAnB,CAAlB,CAAd,CACA,GAAM1wE,KAAI,CAAGlV,IAAI,CAAC+nB,IAAL,CAAU/nB,IAAI,CAAC6E,MAAL,GAAgB,GAA1B,CAAb,CAEA,GAAM0kB,IAAG,CAAGrU,IAAI,EAAI2wE,KAAK,CAAC94E,MAA1B,CAEA,GAAMA,OAAM,CAAG,GAAIisE,uCAAJ,CAAiCzvD,GAAjC,CAAsCs8D,KAAtC,CAA6C3wE,IAA7C,CAAf,CACAmU,cAAc,CAACy8D,YAAf,CAA4B/4E,MAA5B,EAEA,MAAOA,OAAP,CACD,C,uDAEgB,CACf,MAAO,MAAKiuD,WAAZ,CACD,C,wDAEsD,IAAxCrxC,QAAwC,OAAxCA,OAAwC,CAA/BtlB,MAA+B,OAA/BA,MAA+B,4BAAvBuhF,cAAuB,CAAvBA,cAAuB,+BAAN,EAAM,sBACrD,GAAM7qB,UAAS,CAAG,KAAK5jD,MAAL,CAAYC,WAAZ,CAAwB,kBAAxB,CAA4C,CAC5DuS,OAAO,CAAPA,OAD4D,CAE5DtlB,MAAM,CAANA,MAF4D,CAG5DuhF,cAAc,CAAdA,cAH4D,CAA5C,CAAlB,CAMA,GAAM5xD,IAAG,CAAG3vB,MAAM,CAACg1B,iBAAP,CAAyBzE,QAAzB,CAAkCC,cAAlC,EAAZ,CACA,GAAMmtB,IAAG,CAAGr4B,OAAO,CAAC0P,iBAAR,CAA0BzE,QAA1B,CAAmC48C,cAAnC,CAAkDntE,MAAlD,CAAZ,CAEA,GAAI7E,SAAQ,CAAGmqB,OAAO,CAAC48C,aAAR,CAAsBliE,MAAtB,CAAf,CAEA,GAAM0hF,qBAAoB,CAAG,KAAK5uE,MAAL,CAAYC,WAAZ,CAAwB,kBAAxB,CAA4C,CACvE5X,QAAQ,CAAEA,QAD6D,CAEvEomF,cAAc,CAAdA,cAFuE,CAA5C,CAA7B,CAKA,GAAM75D,cAAa,CACjBg6D,oBAAoB,EAAI,EAAI1hF,MAAM,CAAC4O,QAAP,CAAgB6jE,gBAAhB,GAAqC,EAA7C,CADtB,CAGA,GAAM5b,eAAc,CAAGnvC,aAAa,CAAGg6D,oBAAvC,CAEA,GAAMhN,eAAc,CAAGpvD,OAAO,CAAC1W,QAAR,CAAiBs5C,SAAjB,GAA+B,CAAC,EAAhC,CAAqC,CAA5D,CAEA,GAAM6O,cAAa,CAAGpZ,GAAG,EAAI,CAAP,CAAW,CAAX,CAAe,CAAC,KAAKgkC,cAAL,EAAtC,CACA,GAAM7qB,kBAAiB,CAAG,CAACxxC,OAAO,CAAC1W,QAAR,CAAiB6jE,gBAAjB,EAAD,CAAuC,CAAjE,CAEA,GAAI/pE,OAAM,CACRguD,SAAS,CACTge,cADA,CAEA,KAAKiN,cAAL,EAFA,CAGAhkC,GAAG,CAAG,CAHN,CAIAhuB,GAAG,CAAG,CAJN,CAKAjI,aALA,CAMAqvC,aANA,CAOAD,iBARF,CAUA,GAAIpvC,aAAa,GAAK,KAAtB,CAA6B,CAC3Bhf,MAAM,CAAG,CAAT,CACD,CAED,GAAMk5E,QAAO,CAAG,KAAK9uE,MAAL,CAAYC,WAAZ,CAAwB,WAAxB,CAAqC,CAAE5X,QAAQ,CAARA,QAAF,CAArC,CAAhB,CACA,GAAMs5E,eAAc,CAAG/rE,MAAvB,CACAA,MAAM,CAAG/M,IAAI,CAACuC,KAAL,CAAWwK,MAAX,CAAT,CAEA,GAAIA,MAAM,CAAG,CAAb,CAAgB,CACdA,MAAM,CAAG,CAAT,CACD,CAED,MAAO,IAAI8rE,uBAAJ,CAAoB,CACzB9d,SAAS,CAATA,SADyB,CAEzBC,WAAW,CAAE,KAAKA,WAFO,CAGzBhnC,GAAG,CAAEA,GAHoB,CAIzBguB,GAAG,CAAEA,GAJoB,CAKzBxiD,QAAQ,CAARA,QALyB,CAMzBusB,aAAa,CAAbA,aANyB,CAOzBpY,OAAO,CAAEtP,MAAM,CAAC4O,QAAP,CAAgB6jE,gBAAhB,EAPgB,CAQzB5b,cAAc,CAAEA,cARS,CASzBnuD,MAAM,CAAEk5E,OAAO,CAAGl5E,MAAH,CAAY,CATF,CAUzB+rE,cAAc,CAAdA,cAVyB,CAWzB7d,UAAU,CAAE,CAACgrB,OAXY,CAYzBlN,cAAc,CAAdA,cAZyB,CAazB3d,aAAa,CAAbA,aAbyB,CAczBD,iBAAiB,CAAjBA,iBAdyB,CAApB,CAAP,CAgBD,C,iCArG+Bz0C,2B,EAwGnBi/D,sGAAf,E;;GC1GMO,4C,2HACJ,+BAAYjmB,kBAAZ,CAAgC,iFAC9B,6IAEA,MAAKA,kBAAL,CAA0BA,kBAAkB,EAAI,EAAhD,CAH8B,aAI/B,C,oHAEehmD,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC9C,6DACKA,gBADL,GAEE,CACEhX,IAAI,CAAE,cADR,CAEExJ,KAAK,CAAE,CACLs5D,aAAa,CAAE,IADV,CAFT,CAFF,GASD,C,iDAEuB,IAAZpgE,SAAY,MAAZA,QAAY,CACtB,MAAOA,SAAQ,EAAI,KAAKqgE,WAAL,EAAnB,CACD,C,iDAEa,CACZ,MAAO,MAAKI,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBh/D,MAAxB,CAAiC,CAAzD,EAA4D8+D,KAAnE,CACD,C,gEAE4C,IAAhBomB,aAAgB,OAA1B3mF,QAA0B,CAC3C,GAAM4mF,cAAa,CAAG,KAAKnmB,kBAAL,CAAwB3gD,IAAxB,CACpB,mBAAGygD,MAAH,OAAGA,KAAH,OAAeA,MAAK,GAAKomB,YAAzB,EADoB,CAAtB,CAIA,GAAIC,aAAJ,CAAmB,CACjB,MAAOA,cAAa,CAACC,QAArB,CACD,CAED,GAAIpkF,MAAK,CAAG,IAAZ,CACA,GAAIC,IAAG,CAAG,IAAV,CAEA,KAAK+9D,kBAAL,CAAwB/1D,OAAxB,CAAgC,eAAyB,IAAtB61D,MAAsB,OAAtBA,KAAsB,CAAfsmB,QAAe,OAAfA,QAAe,CACvD,GAAI,CAACpkF,KAAK,GAAK,IAAV,EAAkB89D,KAAK,CAAG99D,KAAK,CAAC89D,KAAjC,GAA2CA,KAAK,CAAGomB,YAAvD,CAAqE,CACnElkF,KAAK,CAAG,CAAE89D,KAAK,CAALA,KAAF,CAASsmB,QAAQ,CAARA,QAAT,CAAR,CACD,CAFD,IAEO,IAAI,CAACnkF,GAAG,GAAK,IAAR,EAAgB69D,KAAK,CAAG79D,GAAG,CAAC69D,KAA7B,GAAuCA,KAAK,CAAGomB,YAAnD,CAAiE,CACtEjkF,GAAG,CAAG,CAAE69D,KAAK,CAALA,KAAF,CAASsmB,QAAQ,CAARA,QAAT,CAAN,CACD,CACF,CAND,EAQA,GAAI,CAACnkF,GAAL,CAAU,CACR,MAAO,CAAC,GAAR,CACD,CAED,GAAMkB,WAAU,CAAGlB,GAAG,CAACmkF,QAAJ,CAAepkF,KAAK,CAACokF,QAAxC,CACA,GAAM7mF,SAAQ,CAAG0C,GAAG,CAAC69D,KAAJ,CAAY99D,KAAK,CAAC89D,KAAnC,CACA,MAAO//D,KAAI,CAAC6D,KAAL,CACL5B,KAAK,CAACokF,QAAN,CAAkBjjF,UAAU,EAAI+iF,YAAY,CAAGlkF,KAAK,CAAC89D,KAAzB,CAAX,CAA8CvgE,QAD1D,CAAP,CAGD,C,mCAxDiCknB,2B,EA2DrBw/D,4GAAf,E;;GC7DMI,gD,yBACJ,iCAAYnN,WAAZ,CAAyB,CAAC,wEACxB,KAAKA,WAAL,CAAmBA,WAAnB,CACD,C,2GAEW,CACV,MAAO,CACL7wD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqpE,WAAW,CAAE,KAAKA,WAFb,CAAP,CAID,C,iDAEsB,IAAXrnE,KAAW,2DAAJ,EAAI,CACrB,KAAKqnE,WAAL,CAAmBrnE,IAAI,CAACqnE,WAAxB,CACA,MAAO,KAAP,CACD,C,uCAGYmN,qHAAf,E;;GCbMC,oC,uHACJ,4BAAwD,cAA5Cj7D,cAA4C,2DAA5B,CAA4B,IAAzBk7D,mBAAyB,2DAAJ,EAAI,mEACtD,yIAEA,MAAKl7D,aAAL,CAAqBA,aAArB,CACA,MAAKk7D,kBAAL,CAA0BA,kBAA1B,CAEA,MAAK/rD,UAAL,CAAkB,EAAlB,CANsD,aAOvD,C,yHAE+B,oBAAZ3H,SAAY,MAAZA,QAAY,CAC9B,KAAK2H,UAAL,CAAgBvwB,OAAhB,CAAwB,SAACkf,SAAD,CAAe,CACrC,GAAMsR,OAAM,CAAG,MAAI,CAACvjB,MAApB,CACA,GAAMwS,QAAO,CAAGmJ,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B/oC,SAAS,CAAC2Q,SAArC,CAAhB,CACA,GAAM11B,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B/oC,SAAS,CAAC4Q,QAArC,CAAf,CACA,GAAM4rD,eAAc,CAAGx8D,SAAS,CAACw8D,cAAjC,CAEA;;;;;QAOA,GAAI,CAAC,MAAI,CAACzuE,MAAL,CAAYC,WAAZ,CAAwB,SAAxB,CAAmC,CAAEuS,OAAO,CAAPA,OAAF,CAAWtlB,MAAM,CAANA,MAAX,CAAnC,CAAwD,IAAxD,CAAL,CAAoE,CAClE,MAAO,MAAP,CACD,CAED,GAAMglB,eAAc,CAAG,GAAI6vD,8BAAJ,CACrB9vD,SAAS,CAAC3W,EADW,CAErB2W,SAAS,CAAC4Q,QAFW,CAGrB5Q,SAAS,CAAC2Q,SAHW,CAIrBW,MAAM,CAACtjB,WAAP,CAAmB,iBAAnB,CAAsC,IAAtC,CAA4C,IAA5C,CAJqB,CAAvB,CAOA,GAAMkS,cAAa,CAAGoR,MAAM,CAACtjB,WAAP,CAAmB,oBAAnB,CAAyC,CAC7DuS,OAAO,CAAPA,OAD6D,CAE7DtlB,MAAM,CAANA,MAF6D,CAG7DuhF,cAAc,CAAdA,cAH6D,CAI7D9yD,QAAQ,CAARA,QAJ6D,CAK7D1J,SAAS,CAATA,SAL6D,CAM7DC,cAAc,CAAdA,cAN6D,CAAzC,CAAtB,CASAqR,MAAM,CAACtjB,WAAP,CAAmB,2BAAnB,CAAgD,CAC9CuS,OAAO,CAAPA,OAD8C,CAE9CtlB,MAAM,CAANA,MAF8C,CAG9CuhF,cAAc,CAAdA,cAH8C,CAI9C9yD,QAAQ,CAARA,QAJ8C,CAK9C1J,SAAS,CAATA,SAL8C,CAM9CC,cAAc,CAAdA,cAN8C,CAO9CC,aAAa,CAAbA,aAP8C,CAAhD,EAUAoR,MAAM,CAACtjB,WAAP,CAAmB,eAAnB,EACAgS,SAAS,CAACq9D,WAAV,GACA3zD,QAAQ,CAAC4pD,SAAT,CAAmBgK,QAAnB,CAA4Br9D,cAA5B,EACD,CA9CD,EA+CD,C,uDAEgB,CACf,MAAO,KAAP,CACD,C,2DAEkB,CACjB,MAAO,MAAKiC,aAAZ,CACD,C,uFAEgC,CAC/B,MAAO,MAAKk7D,kBAAZ,CACD,C,mDAEc,CACb,MAAO,MAAK/rD,UAAL,CAAgBx5B,MAAhB,CAAyB,CAAhC,CACD,C,qDAEe,CACd,MAAO,MAAKw5B,UAAZ,CACD,C,2DAEkB,CACjB,KAAKA,UAAL,CAAkB,EAAlB,CACD,C,wDAEiD,IAAnC9Q,QAAmC,OAAnCA,OAAmC,CAA1BtlB,MAA0B,OAA1BA,MAA0B,CAAlBuhF,cAAkB,OAAlBA,cAAkB,CAChD,KAAKnrD,UAAL,CAAkB,EAAlB,CAEA,GAAItO,MAAK,CAAG,KAAKb,aAAjB,CACA,MAAOa,KAAK,EAAZ,CAAgB,CACd,GAAMqO,MAAK,CAAG,GAAIV,iBAAJ,CAAcnQ,OAAd,CAAuBtlB,MAAvB,CAA+B,KAAK8S,MAApC,CAA4CyuE,cAA5C,CAAd,CACA,KAAKnrD,UAAL,CAAgBrwB,IAAhB,CAAqBowB,KAArB,EACD,CAED,MAAO,MAAKC,UAAZ,CACD,C,4CAESxgB,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEE6/D,iBAAiB,CAAE,KAAKlsD,UAAL,CAAgB3vB,GAAhB,CAAoB,SAAC0uE,IAAD,QAAUA,KAAI,CAACzlE,SAAL,EAAV,EAApB,CAFrB,GAID,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAK2oB,UAAL,CAAkB3oB,IAAI,CAAC60E,iBAAL,CACd70E,IAAI,CAAC60E,iBAAL,CAAuB77E,GAAvB,CAA2B,SAAC4H,KAAD,QACzB,IAAIonB,iBAAJ,GAAgB9lB,WAAhB,CAA4BtB,KAA5B,CADyB,EAA3B,CADc,CAId,EAJJ,CAMA,MAAO,KAAP,CACD,C,gDAEWe,I,CAAM,CAChB,KAAKgnB,UAAL,CAAkB,EAAlB,CACD,C,0DAEuB,IAARvH,KAAQ,OAARA,IAAQ,CACtB,GAAI,CAACA,IAAL,CAAW,CACT,KAAKuH,UAAL,CAAkB,EAAlB,CACD,CACF,C,yDAEiB,CAChB,KAAKquC,gBAAL,GACD,C,+BA7H6BpiD,2B,EAgIjB6/D,gGAAf,E;;GClIMK,gD,6HACJ,iCAAY9oB,WAAZ,CAAyB,mFACvB,+IACA,MAAKA,WAAL,CAAmBA,WAAnB,CACA,MAAKC,WAAL,CAAmBD,WAAnB,CACA,MAAK+oB,aAAL,CAAqB,KAArB,CAJuB,aAKxB,C,8GAEW5sE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,GAAMggE,aAAY,CAAG,KAAKC,gBAAL,EAArB,CACA,GAAItjB,QAAO,CAAG,EAAIqjB,YAAlB,CAEA,GAAI,CAACvpE,MAAM,CAACC,SAAP,CAAiBimD,OAAjB,CAAL,CAAgC,CAC9BA,OAAO,CAAGA,OAAO,CAAC52D,OAAR,CAAgB,CAAhB,CAAV,CACD,CAED,GAAIkxD,YAAW,CAAG,KAAKA,WAAvB,CAEA,GAAI,CAACxgD,MAAM,CAACC,SAAP,CAAiBugD,WAAjB,CAAL,CAAoC,CAClCA,WAAW,CAAGA,WAAW,CAAClxD,OAAZ,CAAoB,CAApB,CAAd,CACD,CAED,GAAMixD,YAAW,CAAG,KAAKkpB,cAAL,EAApB,CAEA,GAAIjpB,WAAW,CAAGD,WAAlB,CAA+B,CAC7BC,WAAW,CAAGD,WAAd,CACD,CAEDh3C,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,UADY,CAEpBzS,KAAK,WAAK+qD,WAAL,eAAsBD,WAAtB,cAAsC2F,OAAtC,aAFe,CAAtB,EAKA,GAAMwjB,WAAU,CAAG,KAAK9vE,MAAL,CAAYC,WAAZ,CACjB,0BADiB,CAEjB,IAFiB,CAGjB,CAHiB,CAAnB,CAMA,GAAI6vE,UAAJ,CAAgB,CACdngE,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,oBADY,CAEpBzS,KAAK,WAAKi0E,UAAL,mBAFe,CAAtB,EAID,CAED,MAAOngE,iBAAP,CACD,C,mEAEsB,CACrB,GAAMrhB,KAAI,CAAG,KAAKuhF,cAAL,GAAwB,KAAKjpB,WAA1C,CACA,GAAMmpB,eAAc,CAAG,EAAI,KAAKH,gBAAL,EAA3B,CAEA,MAAO/mF,KAAI,CAAC+nB,IAAL,CAAUtiB,IAAI,CAAGyhF,cAAjB,CAAP,CACD,C,gDAEWjtE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAMrhB,KAAI,CAAG,KAAK0hF,oBAAL,EAAb,CACA,GAAI1hF,IAAI,EAAI,CAAZ,CAAe,CACb,MAAOqhB,iBAAP,CACD,CAED,iBAAWrhB,IAAX,MACD,C,wCAEOwU,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CACxC,GAAI,CAAC,KAAKsgE,QAAL,EAAL,CAAsB,CACpB,MAAO,MAAP,CACD,CAED,MAAOtgE,iBAAP,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,qDAEe,CACd,KAAK+/D,aAAL,CAAqB,IAArB,CACD,C,uDAEgB,CACf,GAAMtkE,MAAK,CAAG,KAAKpL,MAAL,CAAYkI,MAAZ,CACX4iD,YADW,GAEXrvD,MAFW,CAEJ,SAAAsL,QAAQ,QAAIA,SAAQ,WAAYS,+BAAxB,EAFJ,EAGX1M,MAHW,CAGJ,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAACwlF,sBAAR,EAA5B,EAHI,CAG0D,CAH1D,CAAd,CAKA,MAAO,MAAKvpB,WAAL,CAAmBv7C,KAA1B,CACD,C,uDAEgB,CACf,MAAO,MAAKw7C,WAAZ,CACD,C,wCAEO9jD,O,CAAkC,IAAzB6M,iBAAyB,2DAAN,IAAM,CACxC,GAAIA,gBAAgB,GAAK,KAAzB,CAAgC,CAC9B,MAAO,MAAP,CACD,CAED,MAAO,MAAKsgE,QAAL,EAAP,CACD,C,2CAEU,CACT,MAAO,MAAKrpB,WAAL,EAAoB,KAAKipB,cAAL,EAA3B,CACD,C,4CAES/sE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEwgE,uBAAuB,CAAE,CACvBvpB,WAAW,CAAE,KAAKA,WADK,CAF3B,GAMD,C,iDAEsB,IAAXjsD,KAAW,2DAAJ,EAAI,CACrB,KAAKisD,WAAL,CAAmBjsD,IAAI,CAACw1E,uBAAL,CACfx1E,IAAI,CAACw1E,uBAAL,CAA6BvpB,WADd,CAEf,CAFJ,CAIA,MAAO,KAAP,CACD,C,iDAEa,CACZ,GAAI,KAAK5mD,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,KAAK0mD,WAAL,CAAmB,CAAnB,CACA,OACD,CAED,GAAI,KAAK8oB,aAAT,CAAwB,CACtB,KAAK9oB,WAAL,CAAmB,CAAnB,CACA,KAAK8oB,aAAL,CAAqB,KAArB,CACD,CAED,GAAMU,YAAW,CAAG,EAAI,KAAKR,gBAAL,EAAxB,CACA,KAAKhpB,WAAL,EAAoBwpB,WAApB,CACD,C,2DAEkB,CACjB,GAAIhG,MAAK,CAAG,KAAKpqE,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,CAA1C,CAAZ,CAEA,GAAI,CAACmqE,KAAL,CAAY,CACV,MAAO,EAAP,CACD,CAED,GAAMiG,cAAa,CAAG,KAAKR,cAAL,GAAwBzF,KAA9C,CACA,MAAO,MAAKyF,cAAL,GAAwBQ,aAAxB,CAAwC,CAA/C,CACD,C,kEAEoBvtE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACnD,6DACKA,gBADL,GAEE,CACE86D,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIS,+BAAJ,CAAyB,KAAKm/C,WAA9B,CAA2C,CAA3C,CAFZ,CAFF,CAME,CACE8jB,QAAQ,CAAE,EADZ,CAEE1jE,QAAQ,CAAE,GAAIS,+BAAJ,CAAyB,KAAKm/C,WAAL,CAAmB,CAA5C,CAA+C,CAA/C,CAFZ,CANF,CAUE,CAAE8jB,QAAQ,CAAE,GAAZ,CAAiB1jE,QAAQ,CAAE,GAAIS,+BAAJ,CAAyB,IAAzB,CAA+B,CAA/B,CAA3B,CAVF,GAYD,C,qCAtKmC+H,2B,EAyKvBkgE,kHAAf,E;;GCrKMa,oC,uHACJ,4BAAuB,cAAXrlD,KAAW,2DAAJ,EAAI,mEACrB,yIAEA,MAAKA,IAAL,CAAY,GAAG11B,MAAH,CAAU01B,IAAV,CAAZ,CAHqB,aAItB,C,iGAES,CACR,MAAO,KAAP,CACD,C,6DAEmC,IAAlBkf,eAAkB,MAAlBA,cAAkB,CAClC,GAAM33B,QAAO,CAAG,KAAKxS,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxC,CACA,GAAM02E,cAAa,CAAGvjF,wBAAwB,CAC5CwlB,OAAO,CAACC,WAAR,EAD4C,CAE5C03B,cAF4C,CAA9C,CAKA,GAAMqmC,cAAa,CAAGljF,gBAAgB,CAACklB,OAAO,CAACuI,SAAR,EAAD,CAAtC,CACA,GAAMkQ,KAAI,CAAG,KAAKwlD,OAAL,CAAa,CAAEtkF,MAAM,CAAEqkF,aAAV,CAAb,CAAb,CAEA,MAAOvlD,KAAI,CAAC/1B,IAAL,CAAU,eAAoB,IAAjBpK,MAAiB,OAAjBA,KAAiB,CAAVC,GAAU,OAAVA,GAAU,CACnC,GAAIA,GAAG,GAAKD,KAAZ,CAAmB,CACjB,MAAO,KAAP,CACD,CAFD,IAEO,IAAIC,GAAG,CAAGD,KAAV,CAAiB,CACtB,MAAOylF,cAAa,EAAIzlF,KAAjB,EAA0BylF,aAAa,EAAIxlF,GAAlD,CACD,CAFM,IAEA,IAAID,KAAK,CAAGC,GAAZ,CAAiB,CACtB,MAAOwlF,cAAa,EAAIxlF,GAAjB,EAAwBwlF,aAAa,EAAIzlF,KAAhD,CACD,CAED,MAAO,MAAP,CACD,CAVM,CAAP,CAWD,C,8CAEmB,IAAVoC,OAAU,OAAVA,MAAU,CAClB,MAAO,MAAKwjF,eAAL,CAAqB,CAAEvmC,cAAc,CAAEj9C,MAAM,CAACulB,WAAP,EAAlB,CAArB,CAAP,CACD,C,8CAEuB,wCAAdtmB,MAAc,CAAdA,MAAc,uBAAL,CAAK,cACtB,MAAO,MAAK8+B,IAAL,CAAUt3B,GAAV,CAAc,eAAoB,IAAjB7I,MAAiB,OAAjBA,KAAiB,CAAVC,GAAU,OAAVA,GAAU,CACvC,GAAI,MAAI,CAACiV,MAAL,CAAYgF,WAAZ,CAAwBnL,IAAxB,CAA6BiC,QAA7B,CAAsCC,QAAtC,EAAJ,CAAsD,CACpD,MAAO,CACLjR,KAAK,CAAEL,cAAc,CAACA,cAAc,CAAC,CAAD,CAAI,CAACM,GAAL,CAAf,CAA0BoB,MAA1B,CADhB,CAELpB,GAAG,CAAEN,cAAc,CAACA,cAAc,CAAC,CAAD,CAAI,CAACK,KAAL,CAAf,CAA4BqB,MAA5B,CAFd,CAAP,CAID,CAED,MAAO,CACLrB,KAAK,CAAEL,cAAc,CAACK,KAAD,CAAQqB,MAAR,CADhB,CAELpB,GAAG,CAAEN,cAAc,CAACM,GAAD,CAAMoB,MAAN,CAFd,CAAP,CAID,CAZM,CAAP,CAaD,C,+BApD6BojB,2B,EAuDjB+gE,gGAAf,E;;GC3DMK,gB,6FACJ,iBAAY9iE,IAAZ,CAAkB08D,MAAlB,CAA0B,CAAC,sLACnB18D,IADkB,CACZ,CAAC,GAAIi9D,mCAAJ,CAA8BP,MAA9B,CAAD,CADY,GAEzB,C,qGAEgB,CACf,MAAO,SAAP,CACD,C,+DAEoB,CACnB,MAAO,yBAAP,CACD,C,iDAEa,CACZ,MAAO,MAAKtqE,WAAL,CAAiB,gBAAjB,CAAP,CACD,C,qBAfmB2N,iB,EAkBP+iE,mEAAf,E;;GClBMC,sC,4HACJ,4BAAY1oE,MAAZ,CAAoB,8EAClB,0IAEA,MAAKA,MAAL,CAAcA,MAAd,CAHkB,aAInB,C,oIAEsD,IAA9B4L,cAA8B,MAA9BA,aAA8B,CAAfC,WAAe,MAAfA,WAAe,CACrD,MAAO,MAAK7L,MAAZ,CACD,C,gEAE6C,IAA3Bhb,OAA2B,OAA3BA,MAA2B,CAAnBqlB,eAAmB,OAAnBA,eAAmB,CAC5C,GAAMzS,QAAO,CAAG5S,MAAM,CAAC4S,OAAP,CAAe+T,gBAAf,CAAgCtB,eAAhC,CAAhB,CACA,MAAOzS,QAAO,CAACqI,IAAR,CAAa,SAAAnI,MAAM,QAAIA,OAAM,WAAY2wE,gBAAtB,EAAnB,CAAP,CACD,C,6DAEmB,CAClB,MAAO,KAAP,CACD,C,gCAlB8Bn/D,6B,EAqBlBo/D,mGAAf,E;;GCrBMC,wC,6HACJ,6BACEp/D,aADF,CAEEC,oBAFF,CAME,cAHAo/D,aAGA,2DAHe,CAGf,IAFAC,SAEA,2DAFW,CAEX,IADAC,SACA,2DADW,EACX,qEACA,yIAAMv/D,aAAN,CAAqBC,oBAArB,GAEA,MAAKo/D,YAAL,CAAoBA,YAApB,CACA,MAAKC,QAAL,CAAgBA,QAAhB,CACA,MAAKC,QAAL,CAAgBA,QAAhB,CALA,aAMD,C,uHAEmB,CAClB,MAAO,MAAKD,QAAZ,CACD,C,4EAEyBjuE,O,CAAS,oBACzBmP,UADyB,CACKnP,OADL,CACzBmP,SADyB,CACdC,cADc,CACKpP,OADL,CACdoP,cADc,CAEjC,GAAM8C,MAAK,CAAG,KAAKi8D,iBAAL,CAAuBnuE,OAAvB,CAAd,CAEAoP,cAAc,CAACG,QAAf,CAAwB2C,KAAxB,CAA+B,KAAK+7D,QAApC,EAEA/+B,KAAK,CAACyd,IAAN,CAAWzd,KAAK,CAACh9B,KAAD,CAAhB,EAAyBrhB,GAAzB,CAA6B,UAAM,CACjC,GAAMiC,OAAM,CAAG,GAAIob,+BAAJ,EAAf,CACAkB,cAAc,CAACtD,SAAf,CAAyBhZ,MAAzB,EACA,MAAI,CAAC0c,SAAL,2CACIC,eAAe,CAAEzP,OAAO,CAAC0P,OAAR,CAAgBC,WAAhB,EADrB,EACuD3P,OADvD,EAEElN,MAFF,EAIA,MAAOA,OAAP,CACD,CARD,EASD,C,qEAEuB,CACtB,MAAO,OAAP,CACD,C,gDAEWkN,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,aADY,CAEpBzS,KAAK,CAAE,KAAKiW,qBAAL,EAFa,CAAtB,EAKAnC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,YADY,CAEpBzS,KAAK,CAAE,KAAKk1E,QAFQ,CAAtB,EAKAphE,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKm1E,QAFQ,CAAtB,EAKArhE,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,QADY,CAEpBzS,KAAK,CAAE,KAAKkW,iBAAL,EAFa,CAAtB,EAKApC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKmW,wBAAL,EAFa,CAAtB,EAKA,MAAOrC,iBAAP,CACD,C,iEAEoC,IAAjBwC,cAAiB,MAAjBA,aAAiB,CACnC,GAAM2B,cAAa,CAAG3B,aAAa,CAAC8C,SAAd,CAAwBrf,MAA9C,CACA,GAAMme,YAAW,CAAG5B,aAAa,CAAC2vD,OAAlC,CAEA,GAAI/tD,WAAW,CAAGD,aAAlB,CAAiC,CAC/B,MAAO,EAAP,CACD,CAED,GAAIC,WAAW,EAAID,aAAa,CAAG,KAAKi9D,QAAL,CAAgB,KAAKC,QAAxD,CAAkE,CAChE,MAAO,MAAKD,QAAZ,CACD,CAED,GAAI/7D,MAAK,CAAGnsB,IAAI,CAACuC,KAAL,CAAW,CAAC0oB,aAAa,CAAGC,WAAjB,EAAgC,KAAKi9D,QAAhD,CAAZ,CAEA,GAAI5qE,MAAM,CAACC,SAAP,CAAiB,KAAKyqE,YAAtB,CAAJ,CAAyC,CACvC97D,KAAK,EAAI,KAAK87D,YAAd,CACD,CAFD,IAEO,CACL97D,KAAK,EAAI,KAAKxF,UAAL,CAAgBzR,IAAhB,CAAqB,KAAK+yE,YAA1B,EAAwC/1E,KAAjD,CACD,CAED,GAAIia,KAAK,CAAG,KAAK+7D,QAAjB,CAA2B,CACzB/7D,KAAK,CAAG,KAAK+7D,QAAb,CACD,CAED,GAAI/7D,KAAK,EAAI,CAAb,CAAgB,CACdA,KAAK,CAAG,CAAR,CACD,CAED,MAAOA,MAAP,CACD,C,iCAlG+BxD,6B,EAqGnBq/D,sGAAf,E;;GCrGMK,8C,gIACJ,gCAAYz/D,aAAZ,CAA2BC,oBAA3B,CAAiD,CAAC,oNAC1CD,aADyC,CAC1BC,oBAD0B,GAEhD,C,kIAEuB,CACtB,MAAO,UAAP,CACD,C,gDAEW5O,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1CA,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,aADY,CAEpBzS,KAAK,CAAE,KAAKiW,qBAAL,EAFa,CAAtB,EAKAnC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpB4I,KAAK,CACH,gHACA,iEAHkB,CAAtB,EAMA8T,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,QADY,CAEpBzS,KAAK,CAAE,KAAKkW,iBAAL,EAFa,CAAtB,EAKApC,gBAAgB,CAAC1c,IAAjB,CAAsB,CACpBqb,MAAM,CAAE,gBADY,CAEpBzS,KAAK,CAAE,KAAKmW,wBAAL,EAFa,CAAtB,EAKA,MAAOrC,iBAAP,CACD,C,6DAEmB,CAClB,MAAO,MAAKwhE,UAAZ,CACD,C,+DAE6CC,U,CAAY,IAAvClkF,OAAuC,MAAvCA,MAAuC,CAA/BqlB,eAA+B,MAA/BA,eAA+B,CACxD,GAAMzS,QAAO,CAAG5S,MAAM,CAAC4S,OAAP,CACb+T,gBADa,CACItB,eADJ,EAEb9W,MAFa,CAEN,SAAAuE,MAAM,QAAI,CAACoxE,UAAU,CAACl8E,IAAX,CAAgB,SAAAkd,GAAG,QAAIpS,OAAM,CAAC1E,EAAP,GAAc8W,GAAG,CAAC9W,EAAtB,EAAnB,CAAL,EAFA,CAAhB,CAGA,MAAO,MAAKqW,mBAAL,CAAyBiC,kBAAzB,CAA4C9T,OAA5C,CAAP,CACD,C,4CAGCgD,O,CACA4P,Y,CAIA,IAHAE,cAGA,2DAHgBjqB,SAGhB,IAFA0oF,cAEA,2DAFgB,CAEhB,IADAD,WACA,2DADa,EACb,IACQlkF,OADR,CACoD4V,OADpD,CACQ5V,MADR,CACgBqlB,eADhB,CACoDzP,OADpD,CACgByP,eADhB,CACiCL,cADjC,CACoDpP,OADpD,CACiCoP,cADjC,CAGA,GAAIU,aAAa,GAAK,CAAtB,CAAyB,CACvBV,cAAc,CAACe,OAAf,mBACao+D,aADb,wCAGA,OACD,CAED,GAAIz+D,aAAa,GAAKjqB,SAAtB,CAAiC,CAC/BiqB,aAAa,CAAG,KAAKC,iBAAL,CAAuB/P,OAAvB,CAAhB,CACD,CAED,GAAMiQ,UAAS,CAAG,KAAKC,gBAAL,CAChB,CACE9lB,MAAM,CAANA,MADF,CAEEqlB,eAAe,CAAfA,eAFF,CADgB,CAKhB6+D,UALgB,CAAlB,CAQA,GAAI,CAACr+D,SAAL,CAAgB,CACd,OACD,CAED,GAAInd,OAAM,CAAG,KAAKsd,iBAAL,CACXpQ,OADW,CAEX4P,YAFW,CAGXK,SAHW,CAIXH,aAJW,CAKX,KAAKE,sBAAL,CAA4BhQ,OAA5B,CALW,CAAb,CAQA8P,aAAa,CAAGhd,MAAM,CAACgd,aAAvB,CAEA,GAAI,EAAEG,SAAS,WAAYqF,oBAAvB,CAAJ,CAAuC,CACrCg5D,UAAU,CAACn+E,IAAX,CAAgB8f,SAAhB,EACD,CAED,MAAO,MAAKT,SAAL,CACLxP,OADK,CAEL4P,YAFK,CAGLE,aAHK,CAILy+D,aAAa,CAAG,CAJX,CAKLD,UALK,CAAP,CAOD,C,oCAlGkC5/D,6B,EAqGtB0/D,+GAAf,E;;GCnGMI,wC,yHACJ,8BAA0D,cAA9CC,mBAA8C,2DAAzB,CAAyB,IAAtBC,iBAAsB,2DAAH,CAAG,qEACxD,2IAEA,MAAKD,kBAAL,CAA0BA,kBAA1B,CACA,MAAKC,gBAAL,CAAwBA,gBAAxB,CACA,MAAKC,gBAAL,CAAwB,CAAxB,CALwD,aAMzD,C,qHAEkB,CACjB,MAAO,MAAKA,gBAAL,CAAwB,KAAKD,gBAApC,CACD,C,iEAEqB,CACpB,MAAO,MAAKA,gBAAZ,CACD,C,iEAE+B,IAAZ76E,OAAY,2DAAH,CAAG,CAC9B,KAAK86E,gBAAL,EAAyB96E,MAAzB,CACD,C,0DAEgBmM,O,CAA+B,IAAtB6M,iBAAsB,2DAAH,CAAG,CAC9C,MAAOA,iBAAgB,CAAG,KAAK8hE,gBAAL,CAAwB,KAAKD,gBAAvD,CACD,C,mDAEc,CACb,MAAO,KAAP,CACD,C,qEAEuB,CACtB,MAAO,MAAKD,kBAAZ,CACD,C,mEAE6C,IAAzBrkF,OAAyB,MAAzBA,MAAyB,CAAjBsnB,aAAiB,MAAjBA,aAAiB,CAC5C,GAAM3a,KAAI,CAAG,KAAKmG,MAAL,CAAYgF,WAAZ,CAAwBnL,IAArC,CAEA,GAAIxR,SAAQ,CAAGmsB,aAAa,CAAC8xC,OAAd,CAAsBp2C,cAAtB,CAAqCqE,iBAArC,CAAuD,CACpErnB,MAAM,CAANA,MADoE,CAEpEsnB,aAAa,CAAbA,aAFoE,CAAvD,CAAf,CAKA,GAAItnB,MAAM,GAAK2M,IAAf,CAAqB,CACnBxR,QAAQ,CAAGwR,IAAI,CACZlO,cADQ,GAERC,UAFQ,CAEG4oB,aAAa,CAACG,cAAd,CAA6BxhB,QAA7B,EAFH,CAAX,CAGD,CAED,GAAMyhB,cAAa,CACjB,KAAK5U,MAAL,CAAYC,WAAZ,CAAwB,kBAAxB,CAA4C,CAC1C5X,QAAQ,CAAEA,QADgC,CAA5C,GAGC,EAAImsB,aAAa,CAAC8xC,OAAd,CAAsBxiD,UAAtB,GAAqC,EAH1C,CADF,CAMA,GAAM+/C,YAAW,CAAG,KAAK7jD,MAAL,CAAYC,WAAZ,CAAwB,gBAAxB,CAA0C,IAA1C,CAAgD,CAAhD,CAApB,CAEA,GAAM6c,KAAI,CAAGjjB,IAAI,CAACqoB,iBAAL,CAAuBvE,OAAvB,EAAb,CAEA,GAAM+zD,eAAc,CAAGl9D,aAAa,CAAC8xC,OAAd,CAAsBqrB,UAAtB,EAAvB,CAEA,GAAM/P,eAAc,CAAG/nE,IAAI,CAACiC,QAAL,CAAcs5C,SAAd,GAA4B,CAAC,EAA7B,CAAkC,CAAzD,CAEA,MAAO,IAAIssB,uBAAJ,CAAoB,CACzB9d,SAAS,CAAE8tB,cADc,CAEzB7tB,WAAW,CAAXA,WAFyB,CAGzBhnC,GAAG,CAAE,CAHoB,CAIzBguB,GAAG,CAAE/tB,IAJoB,CAKzBz0B,QAAQ,CAARA,QALyB,CAMzBusB,aAAa,CAAbA,aANyB,CAOzBpY,OAAO,CAAEgY,aAAa,CAAC8xC,OAAd,CAAsBxiD,UAAtB,EAPgB,CAQzB89D,cAAc,CAAdA,cARyB,CASzBhsE,MAAM,CAAE/M,IAAI,CAAC6D,KAAL,CACNglF,cAAc,CAAG98D,aAAjB,CAAiCivC,WAAjC,CAA+C/mC,IAAI,CAAG,CAAtD,CAA0D8kD,cADpD,CATiB,CAYzBD,cAAc,CACZ+P,cAAc,CACd98D,aADA,CAEAivC,WAFA,CAGA/mC,IAAI,CAAG,CAHP,CAIA8kD,cAjBuB,CAApB,CAAP,CAmBD,C,iDAEa,CACZ,KAAK6P,gBAAL,CAAwB,CAAxB,CACD,C,iCApF+BliE,2B,EAuFnB+hE,sGAAf,E;;;;;;GCrFMM,wC,yGACJ,6BAAY/jE,IAAZ,CAAkBvL,OAAlB,CAA2B9F,OAA3B,CAAoC,CAAC,8MAC7BqR,IAD4B,CACtB,CACV,GAAIs9D,qCAAJ,CACE7oE,OADF,CAEE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAFF,CAGE,EAHF,CAIE2oE,sBAJF,CADU,CAOV,GAAIwB,qCAAJ,CAAgCjwE,OAAhC,CAPU,CADsB,GAUnC,C,iHAEgB,CACf,MAAO,sBAAP,CACD,C,+DAEoB,CACnB,MAAO,qCAAP,CACD,C,iCAnB+BoR,iB,EAsBnBgkE,wGAAf,E;;GCtBMC,kB,8FACJ,kBACEhkE,IADF,CAEE08D,MAFF,CAGEv/E,SAHF,CAKE,8EADkE,EAClE,iBADEka,KACF,CADEA,KACF,qBADU,CACV,iCADa4qE,UACb,CADaA,UACb,0BAD0B,CAC1B,oCAD6BgC,QAC7B,CAD6BA,QAC7B,wBADwC,IACxC,eAD8C1G,eAC9C,MAD8CA,eAC9C,0DACA,8HAAMv9D,IAAN,CAAY,CACV,GAAIs9D,qCAAJ,CACEZ,MADF,CAEEv/E,SAFF,CAGE,CACEogF,eAAe,CAAfA,eADF,CAHF,CAMEJ,oBANF,CAOE,CAACE,sBAAD,CAPF,CADU,CAUV,GAAIN,qCAAJ,CAAgC1lE,KAAhC,CAVU,CAAZ,GAaA,GAAI4sE,QAAQ,GAAK,CAAb,EAAkBhC,UAAU,GAAK,CAArC,CAAwC,CACtC,GAAIgC,QAAQ,GAAK,IAAjB,CAAuB,CACrBA,QAAQ,CAAGjpF,IAAI,CAAC6D,KAAL,CAAW69E,MAAM,CAAG,CAApB,CAAX,CACD,CAED,MAAK/xD,WAAL,CAAiB,GAAIkxD,iCAAJ,CAA4BoG,UAA5B,CAAwCgC,QAAxC,CAAjB,EACD,CApBD,aAqBD,C,sGAEgB,CACf,MAAO,0BAAP,CACD,C,+DAEoB,CACnB,MAAO,MAAK7xE,WAAL,CAAiB,oBAAjB,CAAP,CACD,C,sBAnCoB2N,iB,EAsCRikE,uEAAf,E;;GCtCME,gD,6GACJ,iCAAYlkE,IAAZ,CAAkBvL,OAAlB,CAA2B9F,OAA3B,CAAoC,CAAC,sNAC7BqR,IAD4B,CACtB,CACV,GAAIs9D,qCAAJ,CACE7oE,OADF,CAEE,CAAC,CAAD,CAAI,CAAJ,CAFF,CAGE,EAHF,CAIE2oE,sBAJF,CADU,CAOV,GAAIwB,qCAAJ,CAAgCjwE,OAAhC,CAPU,CADsB,GAUnC,C,qHAEgB,CACf,MAAO,sBAAP,CACD,C,+DAEoB,CACnB,MAAO,yCAAP,CACD,C,qCAnBmCoR,iB,EAsBvBmkE,oHAAf,E;;GCtBMC,kD,8GACJ,kCAAYnkE,IAAZ,CAAkBvL,OAAlB,CAA2B9F,OAA3B,CAAoC,CAAC,wNAC7BqR,IAD4B,CACtB,CACV,GAAIs9D,qCAAJ,CACE7oE,OADF,CAEE,CAAC,CAAD,CAAI,CAAJ,CAFF,CAGE,EAHF,CAIE2oE,sBAJF,CADU,CAOV,GAAIwB,qCAAJ,CAAgCjwE,OAAhC,CAPU,CADsB,GAUnC,C,sHAEgB,CACf,MAAO,sBAAP,CACD,C,+DAEoB,CACnB,MAAO,0CAAP,CACD,C,sCAnBoCoR,iB,EAsBxBokE,uHAAf,E;;GCzBMC,kC,sGACJ,0BAAYpkE,IAAZ,CAAkB08D,MAAlB,CAA0Bv/E,SAA1B,CAAqC,CAAC,wMAC9B6iB,IAD6B,CACvB,CACV,GAAIs9D,qCAAJ,CACEZ,MADF,CAEEv/E,SAFF,CAGE,EAHF,CAIEkgF,sBAJF,CADU,CADuB,GASpC,C,8GAEgB,CACf,MAAO,mBAAP,CACD,C,+DAEoB,CACnB,MAAO,MAAKjrE,WAAL,CAAiB,oBAAjB,CAAP,CACD,C,8BAlB4B2N,iB,EAqBhBqkE,+FAAf,E;;;;GClBMC,c,4FACJ,gBAAYrkE,IAAZ,CAAkB08D,MAAlB,CAA0BrlE,KAA1B,CAAiC4qE,UAAjC,CAA6C,CAAC,oLACtCjiE,IADqC,CAC/B,CACV,GAAI67D,iCAAJ,CAA4BoG,UAA5B,CADU,CAEV,GAAIxF,oCAAJ,CAA+BC,MAA/B,CAFU,CAGV,GAAIK,qCAAJ,CAAgC1lE,KAAhC,CAHU,CAD+B,GAM5C,C,oGAEgB,CACf,MAAO,QAAP,CACD,C,+DAEoB,CACnB,MAAO,wBAAP,CACD,C,iDAEa,CACZ,MAAO,MAAKjF,WAAL,CAAiB,iBAAjB,CAAP,CACD,C,oBAnBkB2N,iB,EAsBNskE,+DAAf,E;;;;;;;;GCvBMC,gB,6FACJ,iBAAYtkE,IAAZ,CAAkB08D,MAAlB,CAA0B,sEAEtBxnE,KAFsB,CAQpB8K,IARoB,CAEtB9K,IAFsB,CAGtBqvE,SAHsB,CAQpBvkE,IARoB,CAGtBukE,SAHsB,iBAQpBvkE,IARoB,CAItBwkE,SAJsB,CAItBA,SAJsB,0BAIV,IAJU,6BAQpBxkE,IARoB,CAKtB3I,KALsB,CAKtBA,KALsB,sBAKd,CALc,mCAQpB2I,IARoB,CAMtBnE,qBANsB,CAMtBA,qBANsB,gCAME,GANF,wCAQpBmE,IARoB,CAOtBiiE,UAPsB,CAOtBA,UAPsB,2BAOT,IAPS,kBASxB,6HAAMjiE,IAAN,CAAY,CACV,GAAI8+D,mCAAJ,CAA8BpC,MAA9B,CADU,CAEV,GAAIK,qCAAJ,CAAgC1lE,KAAhC,CAFU,CAGV,GAAI8oE,kCAAJ,CACEjrE,IAAI,EAAIla,IAAI,CAAC+nB,IAAL,CAAU25D,MAAM,CAAG,CAAnB,CADV,CAEE6H,SAAS,EAAIvpF,IAAI,CAAC+nB,IAAL,CAAU25D,MAAM,CAAG,CAAnB,CAFf,CAGE7gE,qBAHF,CAHU,CAAZ,GAUA,GAAI2oE,SAAJ,CAAe,CACb,MAAK75D,WAAL,CACE,GAAIo1D,8CAAJ,CAAyC,IAAzC,CAA+CkC,UAA/C,CADF,EAGD,CAvBuB,aAwBzB,C,qGAEgB,CACf,MAAO,0BAAP,CACD,C,+DAEoB,CACnB,MAAO,yBAAP,CACD,C,iDAEa,CACZ,MAAO,MAAK7vE,WAAL,CAAiB,sBAAjB,CAAP,CACD,C,qBArCmB2N,iB,EAwCPukE,6EAAf,E;;GC1CMG,oB,+FACJ,mBAAYzkE,IAAZ,CAAkB08D,MAAlB,CAA0B,CAAC,0LACnB18D,IADkB,CACZ,CAAC,GAAI8+D,mCAAJ,CAA8BpC,MAA9B,CAAsC,CAAC5tD,KAAD,CAAtC,CAAD,CADY,GAEzB,C,uGAEgB,CACf,MAAO,YAAP,CACD,C,+DAEoB,CACnB,MAAO,yBAAP,CACD,C,iDAEa,CACZ,MAAO,MAAK1c,WAAL,CAAiB,sBAAjB,CAAP,CACD,C,uBAfqB2N,iB,EAkBT0kE,mFAAf,E;;GClBMC,sB,0FACJ,oBAAY1kE,IAAZ,CAAkB08D,MAAlB,CAA0B,CAAC,4LACnB18D,IADkB,CACZ,CACV,GAAI8+D,mCAAJ,CAA8BpC,MAA9B,CAAsC,CACpC5tD,oBADoC,CAEpCA,oBAFoC,CAGpCA,aAHoC,CAIpCA,yBAJoC,CAAtC,CADU,CADY,GASzB,C,wGAEgB,CACf,MAAO,aAAP,CACD,C,+DAEoB,CACnB,MAAO,yBAAP,CACD,C,iDAEa,CACZ,MAAO,MAAK1c,WAAL,CAAiB,sBAAjB,CAAP,CACD,C,wBAtBsBkyE,yB,EAyBVI,sFAAf,E;;GCtBMC,kB,8FACJ,kBAAY3kE,IAAZ,CAAkB08D,MAAlB,CAA0B,uEAEtBxnE,KAFsB,CAOpB8K,IAPoB,CAEtB9K,IAFsB,CAGtBqvE,SAHsB,CAOpBvkE,IAPoB,CAGtBukE,SAHsB,iBAOpBvkE,IAPoB,CAItBwkE,SAJsB,CAItBA,SAJsB,0BAIV,KAJU,6BAOpBxkE,IAPoB,CAKtB3I,KALsB,CAKtBA,KALsB,sBAKd,CALc,mCAOpB2I,IAPoB,CAMtBnE,qBANsB,CAMtBA,qBANsB,gCAME,GANF,uBAQxB,8HAAMmE,IAAN,CAAY,CACV,GAAI8+D,mCAAJ,CAA8BpC,MAA9B,CAAsC,CAAC5tD,YAAD,CAAtC,CADU,CAEV,GAAIiuD,qCAAJ,CAAgC1lE,KAAhC,CAFU,CAGV,GAAI8oE,kCAAJ,CACEjrE,IAAI,EAAIla,IAAI,CAAC+nB,IAAL,CAAU25D,MAAM,CAAG,CAAnB,CADV,CAEE6H,SAAS,EAAIvpF,IAAI,CAAC+nB,IAAL,CAAU25D,MAAM,CAAG,CAAnB,CAFf,CAGE7gE,qBAHF,CAHU,CAAZ,GAUA,GAAI2oE,SAAJ,CAAe,CACb,MAAK75D,WAAL,CAAiB,GAAIo1D,8CAAJ,EAAjB,EACD,CApBuB,aAqBzB,C,sGAEgB,CACf,MAAO,oCAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,MAAK3tE,WAAL,CAAiB,sBAAjB,CAAP,CACD,C,sBAlCoB2N,iB,EAqCR4kE,gFAAf,E;;;;GCzCMC,c,4FACJ,gBAAY5kE,IAAZ,CAAkBC,UAAlB,CAA8B,kEAC5B,4HAAMD,IAAN,CAAYC,UAAZ,GAEA,GAAID,IAAI,CAAC6kE,gBAAT,CAA2B,CACzB,MAAKl6D,WAAL,CAAiB,GAAI61D,wCAAJ,EAAjB,EACD,CAL2B,aAM7B,C,wFAEU,CACT,MAAO,KAAP,CACD,C,2DAEkB,CACjB,MAAO,KAAP,CACD,C,oBAfkBzgE,iB,EAkBN6kE,+DAAf,E;;GCbME,sB,wFACJ,oBAAY9kE,IAAZ,CAAkBod,IAAlB,CAAwB,CAAC,4LACjBpd,IADgB,CACV,CACV,GAAIuhE,yBAAJ,CAAsB,CAAtB,CADU,CAEV,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFU,CAGV,GAAIujD,2BAAJ,CAAwB,KAAxB,CAHU,CAIV,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAtB,CADwB,CAExB,CAAEtmB,KAAK,CAAE,GAAT,CAAcsmB,QAAQ,CAAE,CAAC,GAAzB,CAFwB,CAA1B,CAJU,CAQV,GAAIO,+BAAJ,CAA4B,CAA5B,CARU,CASV,GAAImB,0BAAJ,CAAuB,EAAvB,CATU,CADU,GAYvB,C,oBAbsB6B,a,EAgBVE,2EAAf,E;;GChBMC,4C,mGACJ,+BAAY/kE,IAAZ,CAAkBod,IAAlB,CAAwB,CAAC,kNACjBpd,IADgB,CACV,CACV,GAAIuhE,yBAAJ,CAAsB,CAAtB,CADU,CAEV,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFU,CAGV,GAAIujD,2BAAJ,CAAwB,KAAxB,CAHU,CAIV,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAtB,CADwB,CAExB,CAAEtmB,KAAK,CAAE,GAAT,CAAcsmB,QAAQ,CAAE,CAAC,GAAzB,CAFwB,CAA1B,CAJU,CAQV,GAAIO,+BAAJ,CAA4B,CAA5B,CARU,CASV,GAAIj+D,8BAAJ,CAA2B,KAA3B,CATU,CADU,GAYvB,C,+BAbiCihE,a,EAgBrBG,4GAAf,E;;GCtBMC,gD,6HACJ,iCAAYpM,aAAZ,CAAoD,cAAzBqM,mBAAyB,2DAAJ,EAAI,yEAClD,+IACA,MAAKrM,aAAL,CAAqBA,aAArB,CACA,MAAKqM,kBAAL,CAA0BA,kBAA1B,CAHkD,aAInD,C,6IAE4B,CAC3B,MAAO,MAAKrM,aAAZ,CACD,C,yFAEiC,CAChC,MAAO,MAAKqM,kBAAZ,CACD,C,qCAbmCvjE,2B,EAgBvBsjE,kHAAf,E;;GCLME,oC,+FACJ,gCAAoB9nD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,2MAClB,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,EAAjB,CAAqBtC,KAAK,CAAE,CAA5B,CADkB,CACe,CACrC,GAAIipE,yBAAJ,CAAsB,CAAtB,CADqC,CAErC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFqC,CAGrC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHqC,CAIrC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,GAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,CAAjC,CAAT,CAA8C08E,QAAQ,CAAE,CAAC,EAAzD,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,CAAjC,CAAT,CAA8C08E,QAAQ,CAAE,CAAC,GAAzD,CAJwB,CAA1B,CAJqC,CAUrC,GAAIO,+BAAJ,CAA4B,CAA5B,CAVqC,CAWrC,GAAI7E,qCAAJ,CAAgC,CAAhC,CAXqC,CAYrC,GAAIlB,iCAAJ,CAA4B,CAA5B,CAA+B,CAA/B,CAZqC,CAarC,GAAIwH,8BAAJ,CAA2B,MAA3B,CAAmC,OAAnC,CAbqC,CAcrC,GAAI2B,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,EADqC,CAE3C7+B,MAAM,CAAE,IAFmC,CAG3CmpC,KAAK,CAAE,CAHoC,CAI3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJoC,CAK3C5W,aAAa,CAAE,EAL4B,CAM3CD,aAAa,CAAE,KAN4B,CAA7C,CAdqC,CAsBrC,GAAI29D,kCAAJ,CAA6B,CAA7B,CAAgC,CAAhC,CAtBqC,CADf,GAyBzB,C,+GAEgB,CACf,MAAO,qBAAP,CACD,C,+DAEoB,CACnB,MAAO,8BAAP,CACD,C,+BAlC6ByE,a,EAqCjBM,iGAAf,E;;GCrCMC,gD,qGACJ,sCAAoB/nD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,uNAClB,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,EAAjB,CAAqBtC,KAAK,CAAE,CAA5B,CADkB,CACe,CACrC,GAAIipE,yBAAJ,CAAsB,CAAtB,CADqC,CAErC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFqC,CAGrC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHqC,CAIrC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,GAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,CAAjC,CAAT,CAA8C08E,QAAQ,CAAE,CAAC,EAAzD,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAJwB,CAKxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,CAAjC,CAAT,CAA8C08E,QAAQ,CAAE,CAAC,GAAzD,CALwB,CAA1B,CAJqC,CAWrC,GAAIO,+BAAJ,CAA4B,CAA5B,CAXqC,CAYrC,GAAI7E,qCAAJ,CAAgC,EAAhC,CAZqC,CAarC,GAAIlB,iCAAJ,CAA4B,CAA5B,CAA+B,CAA/B,CAbqC,CAcrC,GAAIwH,8BAAJ,CAA2B,MAA3B,CAAmC,OAAnC,CAdqC,CAerC,GAAI2B,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,EADqC,CAE3C7+B,MAAM,CAAE,IAFmC,CAG3CmpC,KAAK,CAAE,CAHoC,CAI3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJoC,CAK3C5W,aAAa,CAAE,EAL4B,CAM3CD,aAAa,CAAE,KAN4B,CAA7C,CAfqC,CAuBrC,GAAI29D,kCAAJ,CAA6B,CAA7B,CAAgC,CAAhC,CAvBqC,CADf,GA0BzB,C,qHAEgB,CACf,MAAO,gBAAP,CACD,C,+DAEoB,CACnB,MAAO,8BAAP,CACD,C,qCAnCmCyE,a,EAsCvBO,mHAAf,E;;GC1CMC,wC,iGACJ,6BAAYplE,IAAZ,CAAkBod,IAAlB,CAAwB,CAAC,8MACjBpd,IADgB,CACV,CACV,GAAIuhE,yBAAJ,CAAsB,CAAtB,CADU,CAEV,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFU,CAGV,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHU,CAIV,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,GAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE,EAAT,CAAasmB,QAAQ,CAAE,CAAvB,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE,GAAT,CAAcsmB,QAAQ,CAAE,CAAC,GAAzB,CAHwB,CAA1B,CAJU,CASV,GAAIO,+BAAJ,CAA4B,CAA5B,CATU,CAUV,GAAIyB,8BAAJ,CAA2B,KAA3B,CAAkC,SAAlC,CAVU,CAWV,GAAI2B,+BAAJ,CAA4B,MAA5B,CAAoC,CAClClqD,IAAI,CAAE,EAD4B,CAElC7+B,MAAM,CAAE,IAF0B,CAGlCmpC,KAAK,CAAE,CAH2B,CAIlC/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJ2B,CAApC,CAXU,CADU,GAmBvB,C,iHAEgB,CACf,MAAO,uBAAP,CACD,C,+DAEoB,CACnB,MAAO,8BAAP,CACD,C,iCA5B+BurD,a,EA+BnBQ,uGAAf,E;;GC/BMC,wC,iGACJ,6BAAYrlE,IAAZ,CAAkBod,IAAlB,CAAwB,CAAC,8MACjBpd,IADgB,CACV,CACV,GAAIuhE,yBAAJ,CAAsB,CAAtB,CADU,CAEV,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFU,CAGV,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHU,CAIV,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,GAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE,EAAT,CAAasmB,QAAQ,CAAE,CAAvB,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE,GAAT,CAAcsmB,QAAQ,CAAE,CAAC,GAAzB,CAHwB,CAA1B,CAJU,CASV,GAAIO,+BAAJ,CAA4B,CAA5B,CATU,CAUV,GAAIyB,8BAAJ,CAA2B,KAA3B,CAAkC,SAAlC,CAVU,CAWV,GAAI2B,+BAAJ,CAA4B,MAA5B,CAAoC,CAClClqD,IAAI,CAAE,EAD4B,CAElC7+B,MAAM,CAAE,IAF0B,CAGlCmpC,KAAK,CAAE,CAH2B,CAIlC/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJ2B,CAApC,CAXU,CADU,GAmBvB,C,iHAEgB,CACf,MAAO,uBAAP,CACD,C,+DAEoB,CACnB,MAAO,8BAAP,CACD,C,iCA5B+BurD,a,EA+BnBS,uGAAf,E;;;;GCxCMC,0B,kNACQt5E,I,CAAMmd,K,CAAO,CACvB,GAAI,CAAC,KAAKS,WAAL,CAAiB5d,IAAjB,CAAuBmd,KAAvB,CAAL,CAAoC,CAClC,KAAM,IAAIjiB,MAAJ,CACJ,yDADI,CAAN,CAGD,CACD,GAAMq+E,UAAS,CAAG,KAAKC,gBAAL,CAAsBx5E,IAAtB,CAAlB,CAEA,GAAIlD,OAAM,CAAGqgB,KAAK,CAACrgB,MAAnB,CACA,MAAOA,MAAM,CAAG,CAAhB,CAAmB,CACjBy8E,SAAS,CAACrgF,OAAV,CAAkB,SAAAiN,MAAM,CAAI,CAC1B,GACErJ,MAAM,CAAG,CAAT,EACAqJ,MAAM,CAACC,WAAP,CACE,aADF,CAEE,CAAEvH,MAAM,CAAEse,KAAK,CAACte,MAAhB,CAAwB/B,MAAM,CAAE,CAAhC,CAFF,CAGE,KAHF,CAFF,CAOE,CACAqJ,MAAM,CAACC,WAAP,CAAmB,UAAnB,CAA+B,CAAEvH,MAAM,CAAEse,KAAK,CAACte,MAAhB,CAAwB/B,MAAM,CAAE,CAAhC,CAA/B,EACAA,MAAM,GACP,CACF,CAZD,EAaD,CACF,C,8DAEkBkD,I,CAAMmd,K,CAAO,CAC9B,GAAMD,MAAK,CAAG,KAAKu8D,8BAAL,CAAoCz5E,IAApC,CAAd,CACA,MAAOhR,KAAI,CAACuC,KAAL,CAAW2rB,KAAK,CAAGC,KAAK,CAACte,MAAN,CAAa0e,gBAAb,EAAnB,CAAP,CACD,C,gDAEWvd,I,CAAMmd,K,CAAO,CACvB,MACE,MAAKs8D,8BAAL,CAAoCz5E,IAApC,GACAmd,KAAK,CAACte,MAAN,CAAa0e,gBAAb,GAAkCJ,KAAK,CAACrgB,MAF1C,CAID,C,sFAE8BkD,I,CAAM,CACnC,MAAO,MAAKw5E,gBAAL,CAAsBx5E,IAAtB,EAA4BiB,MAA5B,CACL,SAACC,KAAD,CAAQiF,MAAR,QACEjF,MAAK,CAAGiF,MAAM,CAACC,WAAP,CAAmB,wBAAnB,CAA6C,EAA7C,CAAiD,CAAjD,CADV,EADK,CAGL,CAHK,CAAP,CAKD,C,0DAEgBpG,I,CAAM,CACrB,MAAOA,KAAI,CAACiG,OAAL,CACJC,UADI,GAEJtE,MAFI,CAGH,SAAAuE,MAAM,QAAIA,OAAM,CAACC,WAAP,CAAmB,wBAAnB,CAA6C,EAA7C,CAAiD,CAAjD,EAAsD,CAA1D,EAHH,CAAP,CAKD,C,4BAGYkzE,gFAAf,E;;GCpDMI,sC,wHACJ,4BACE9rB,iBADF,CAEEG,gBAFF,CAGE3mD,QAHF,CAIEinD,YAJF,CAME,cADAF,kBACA,2DADoB,CACpB,oEACA,0IAEA,MAAKP,iBAAL,CAAyB,GAAGlyD,MAAH,CAAUkyD,iBAAV,CAAzB,CACA,MAAKxmD,QAAL,CAAgBA,QAAhB,CACA,MAAK+mD,iBAAL,CAAyBA,iBAAzB,CACA,MAAKE,YAAL,CAAoBA,YAApB,CACA,MAAKN,gBAAL,CAAwBA,gBAAxB,CAEA,MAAK4rB,YAAL,CAAoB,GAAI,OAAK/rB,iBAAL,CACtB,MAAKA,iBAAL,CAAuB39D,MAAvB,CAAgC,CADV,CAAJ,EAApB,CAGA,MAAKm+D,YAAL,CAAoB,CAApB,CACA,MAAKwrB,UAAL,CAAkB,MAAKC,uBAAL,EAAlB,CAEA,MAAKC,gBAAL,CAAwB,IAAxB,CACA,MAAKC,kBAAL,CAA0B,IAA1B,CAEA,MAAKC,MAAL,CAAc,EAAd,CAlBA,aAmBD,C,kIAEyB,iBACxB,GAAIC,WAAU,CAAG,CAAjB,CACA,MAAO,MAAKrsB,iBAAL,CAAuB9zD,GAAvB,CAA2B,SAACkT,SAAD,CAAY5R,KAAZ,CAAsB,CACtD,GAAI0B,OAAM,CAAG9N,IAAI,CAACuC,KAAL,CAAW,MAAI,CAAC6V,QAAL,CAAgB,MAAI,CAACwmD,iBAAL,CAAuB39D,MAAlD,CAAb,CACA,GAAIiqF,KAAI,CAAGp9E,MAAM,CAAG,MAAI,CAACixD,gBAAzB,CACA,GAAIosB,MAAK,CAAGD,IAAI,GAAK,CAAT,CAAa,CAAb,CAAiB,MAAI,CAACnsB,gBAAL,CAAwBmsB,IAArD,CAEA,GAAM79C,KAAI,CAAGjhC,KAAK,GAAK,MAAI,CAACwyD,iBAAL,CAAuB39D,MAAvB,CAAgC,CAAvD,CAEA,GAAI6M,MAAM,CAAG,MAAI,CAACsK,QAAL,CAAgB6yE,UAA7B,CAAyC,CACvCn9E,MAAM,CAAG,MAAI,CAACsK,QAAL,CAAgB6yE,UAAzB,CACD,CAFD,IAEO,IAAI59C,IAAJ,CAAU,CACfv/B,MAAM,CAAG,MAAI,CAACsK,QAAL,CAAgB6yE,UAAzB,CACD,CAFM,IAEA,IAAIC,IAAI,GAAK,CAAT,EAAcA,IAAI,EAAIC,KAA1B,CAAiC,CACtCr9E,MAAM,EAAIo9E,IAAV,CACD,CAFM,IAEA,IAAIC,KAAK,GAAK,CAAV,EAAeF,UAAU,CAAGn9E,MAAb,CAAsBq9E,KAAtB,EAA+B,MAAI,CAAC/yE,QAAvD,CAAiE,CACtEtK,MAAM,EAAIq9E,KAAV,CACD,CAEDF,UAAU,EAAIn9E,MAAd,CAEA,MAAO,CACL+B,MAAM,CAAE,GAAImO,UAAJ,EADH,CAELlQ,MAAM,CAANA,MAFK,CAAP,CAID,CAvBM,CAAP,CAwBD,C,gDAEWmM,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CAC1C,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYC,WAAZ,CAAwB,UAAxB,CAAoC,IAApC,CAA0C,IAA1C,IAAoD,KAAxD,CAA+D,CAC7D,MAAO0P,iBAAP,CACD,CAED,MAAO,MAAKk4C,eAAL,GAAuBoF,WAAvB,EAAP,CACD,C,6DAEkD,IAAjC3C,OAAiC,MAAjCA,MAAiC,IAAvB36C,iBAAuB,2DAAJ,EAAI,CACjD,GAAI,CAAC26C,MAAL,CAAa,CACX,MAAO36C,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYwD,WAAZ,EAAJ,CAA+B,CAC7B,MAAOmM,iBAAP,CACD,CAED,6DACKA,gBADL,GAEE,CACEhX,IAAI,CAAE,MADR,CAEExJ,KAAK,CAAE,CACLm4D,YAAY,CAAE,IADT,CAFT,CAFF,GASD,C,wEAEuD,oBAAjCgD,OAAiC,OAAjCA,MAAiC,IAAvB36C,iBAAuB,2DAAJ,EAAI,CACtD,GAAI,CAAC26C,MAAL,CAAa,CACX,MAAO36C,iBAAP,CACD,CAED,GAAI,KAAK3P,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CAC5B,MAAOyP,iBAAP,CACD,CAED,6DACKA,gBADL,GAEE,CACEoe,GAAG,CAAE,KAAK85B,eAAL,GAAuBxC,kBAAvB,EADP,CAEEwX,cAAc,CAAE,yBAAM,CACpB,MAAI,CAACoX,kBAAL,GACD,CAJH,CAKE/H,iBAAiB,CAAE,mCAAM,MAAN,EALrB,CAFF,GAUD,C,4CAESppE,O,CAAgC,IAAvB6M,iBAAuB,2DAAJ,EAAI,CACxC,OAAO,4CACFA,gBADL,EAEEukE,kBAAkB,CAAE,CAClBT,UAAU,CAAE,KAAKA,UAAL,CAAgB9/E,GAAhB,CAAoB,SAAC4H,KAAD,QAAY,CAC1CsL,SAAS,CAAEtL,KAAK,CAAC7C,MAAN,CAAasO,WAAb,CAAyBrO,IADM,CAE1ChC,MAAM,CAAE4E,KAAK,CAAC5E,MAF4B,CAAZ,EAApB,CADM,CAKlBk9E,MAAM,CAAE,KAAKA,MAAL,CAAYlgF,GAAZ,CAAgB,SAAC4H,KAAD,QAAY,CAClCsL,SAAS,CAAEtL,KAAK,CAAC7C,MAAN,CAAasO,WAAb,CAAyBrO,IADF,CAElChC,MAAM,CAAE4E,KAAK,CAAC5E,MAFoB,CAAZ,EAAhB,CALU,CASlBg9E,gBAAgB,CAAE,KAAKA,gBAAL,CACd,KAAKA,gBAAL,CAAsBhgF,GAAtB,CAA0B,SAAC4H,KAAD,QAAY,CACpCsL,SAAS,CAAEtL,KAAK,CAAC7C,MAAN,CAAasO,WAAb,CAAyBrO,IADA,CAEpChC,MAAM,CAAE4E,KAAK,CAAC5E,MAFsB,CAAZ,EAA1B,CADc,CAKd,IAdc,CAelBsxD,YAAY,CAAE,KAAKA,YAfD,CAgBlBurB,YAAY,CAAE,KAAKA,YAAL,CAAkBxsE,WAAlB,CAA8BrO,IAhB1B,CAiBlBi7E,kBAAkB,CAAE,KAAKA,kBAAL,CAChB,KAAKA,kBAAL,CAAwB5sE,WAAxB,CAAoCrO,IADpB,CAEhB,IAnBc,CAFtB,GAwBD,C,iDAEsB,IAAXgC,KAAW,2DAAJ,EAAI,CACrB,GAAMw5E,SAAQ,CAAGx5E,IAAI,CAACu5E,kBAAL,EAA2B,EAA5C,CACA,KAAKT,UAAL,CAAkBU,QAAQ,CAACV,UAAT,CACdU,QAAQ,CAACV,UAAT,CAAoB9/E,GAApB,CAAwB,SAAC4H,KAAD,QAAY,CAClC7C,MAAM,CAAE,GAAIme,aAAY,CAACtb,KAAK,CAACsL,SAAP,CAAhB,EAD0B,CAElClQ,MAAM,CAAE4E,KAAK,CAAC5E,MAFoB,CAAZ,EAAxB,CADc,CAKd,EALJ,CAOA,KAAKk9E,MAAL,CAAcM,QAAQ,CAACN,MAAT,CACVM,QAAQ,CAACN,MAAT,CAAgBlgF,GAAhB,CAAoB,SAAC4H,KAAD,QAAY,CAC9B7C,MAAM,CAAE,GAAIme,aAAY,CAACtb,KAAK,CAACsL,SAAP,CAAhB,EADsB,CAE9BlQ,MAAM,CAAE4E,KAAK,CAAC5E,MAFgB,CAAZ,EAApB,CADU,CAKV,EALJ,CAOA,KAAKg9E,gBAAL,CAAwBQ,QAAQ,CAACR,gBAAT,CACpBQ,QAAQ,CAACR,gBAAT,CAA0BhgF,GAA1B,CAA8B,SAAC4H,KAAD,QAAY,CACxC7C,MAAM,CAAE,GAAIme,aAAY,CAACtb,KAAK,CAACsL,SAAP,CAAhB,EADgC,CAExClQ,MAAM,CAAE4E,KAAK,CAAC5E,MAF0B,CAAZ,EAA9B,CADoB,CAKpB,IALJ,CAOA,KAAKsxD,YAAL,CAAoBksB,QAAQ,CAAClsB,YAAT,EAAyB,CAA7C,CACA,KAAKurB,YAAL,CAAoBW,QAAQ,CAACX,YAAT,CAChB,GAAI38D,aAAY,CAACs9D,QAAQ,CAACX,YAAV,CAAhB,EADgB,CAEhB,GAAI,MAAK/rB,iBAAL,CAAuB,KAAKA,iBAAL,CAAuB39D,MAAvB,CAAgC,CAAvD,CAAJ,EAFJ,CAGA,KAAK8pF,kBAAL,CAA0BO,QAAQ,CAACP,kBAAT,CACtB,GAAI/8D,aAAY,CAACs9D,QAAQ,CAACP,kBAAV,CAAhB,EADsB,CAEtB,IAFJ,CAIA,MAAO,KAAP,CACD,C,+DAEoB,iBACnB,GAAI3+E,MAAK,CAAG,IAAZ,CACA,KAAK4+E,MAAL,CAAY9gF,OAAZ,CAAoB,SAACwI,KAAD,CAAQ3R,CAAR,CAAc,CAChC,GAAI,MAAI,CAACi+D,eAAL,GAAuB7gD,WAAvB,GAAuCzL,KAAK,CAAC7C,MAAN,CAAasO,WAAxD,CAAqE,CACnE/R,KAAK,CAAGrL,CAAR,CACD,CACF,CAJD,EAMA,GAAIqL,KAAK,CAAG,CAAR,CAAY,KAAK4+E,MAAL,CAAY/pF,MAAZ,CAAqB,CAArC,CAAwC,CACtCmL,KAAK,CAAG,CAAR,CACD,CAFD,IAEO,CACLA,KAAK,CAAGA,KAAK,CAAG,CAAhB,CACD,CAED,KAAK2+E,kBAAL,CAA0B,KAAKC,MAAL,CAAY5+E,KAAZ,EAAmByD,MAA7C,CACD,C,yDAEiB,CAChB,MAAO,MAAKk7E,kBAAL,EAA2B,KAAKJ,YAAvC,CACD,C,2DAEkB,CACjB,MAAO,MAAKG,gBAAL,EAAyB,KAAKF,UAArC,CACD,C,6DAEmB,CAClB,MAAO,MAAKI,MAAZ,CACD,C,6DAEmB,CAClB,KAAKA,MAAL,CAAc,KAAKJ,UAAnB,CACD,C,uEAEwB,CACvB,MAAO,MAAKjsB,gBAAL,GAAwB1sD,MAAxB,CACL,SAACC,KAAD,WAAUpE,OAAV,OAAUA,MAAV,OAAuBoE,MAAK,CAAGpE,MAA/B,EADK,CAEL,CAFK,CAAP,CAID,C,wDAEgC,IAAlB+B,OAAkB,OAAlBA,MAAkB,CAAV/B,MAAU,OAAVA,MAAU,CAC/B,GAAI,CAAC,KAAKg9E,gBAAV,CAA4B,CAC1B,KAAKA,gBAAL,CAAwB,KAAKF,UAAL,CAAgB9/E,GAAhB,CAAoB,SAAC4H,KAAD,qDACvCA,KADuC,GAApB,CAAxB,CAGD,CAED,GAAIA,MAAK,CAAG,KAAKo4E,gBAAL,CAAsBxrE,IAAtB,CACV,SAAC5M,KAAD,QAAWA,MAAK,CAAC7C,MAAN,CAAasO,WAAb,GAA6BtO,MAAM,CAACsO,WAA/C,EADU,CAAZ,CAIA,GAAI,CAACzL,KAAD,EAAU5E,MAAM,CAAG,CAAvB,CAA0B,CACxB4E,KAAK,CAAG,CACN7C,MAAM,CAANA,MADM,CAEN/B,MAAM,CAAE,CAFF,CAAR,CAKA,KAAKg9E,gBAAL,CAAsB1gF,IAAtB,CAA2BsI,KAA3B,EACD,CAPD,IAOO,IAAI,CAACA,KAAD,EAAU5E,MAAM,CAAG,CAAvB,CAA0B,CAC/B,OACD,CAED,GAAI,KAAKwxD,sBAAL,GAAgCxxD,MAAhC,CAAyC,KAAKsK,QAAlD,CAA4D,CAC1D,OACD,CAED,GAAI1F,KAAK,CAAC5E,MAAN,CAAeA,MAAf,CAAwB,CAA5B,CAA+B,CAC7B,OACD,CAED4E,KAAK,CAAC5E,MAAN,EAAgBA,MAAhB,CACD,C,gEAEmBzJ,M,CAAQ,CAC1B,KAAKymF,gBAAL,CAAwBzmF,MAAxB,CACD,C,8DAEkB0kB,I,CAAM,CACvB,KAAKgiE,kBAAL,CAA0BhiE,IAA1B,CACD,C,kEAE+C,oBAA5B8J,WAA4B,OAA5BA,UAA4B,CAAhBG,YAAgB,OAAhBA,YAAgB,CAC9C,GAAI,CAACA,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,KAAK7b,MAAL,CAAYkF,KAAZ,CAAkBE,SAAlB,EAAJ,CAAmC,CACjC;AACD,CAFD,IAEO,IAAI,KAAKpF,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CACnC,OACD,CAED,GAAM2vD,eAAc,CAAGh0C,YAAY,CAACmuD,uBAAb,CACrBuJ,kBADqB,EAErB,CAFqB,CAAvB,CAGA,GAAMI,iBAAgB,CAAG9jB,cAAc,CAAC8jB,gBAAxC,CACA,GAAMC,mBAAkB,CAAG/jB,cAAc,CAAC+jB,kBAA1C,CAEA,GAAID,gBAAJ,CAAsB,CACpBA,gBAAgB,CAAC5gF,OAAjB,CAAyB,SAACwI,KAAD,CAAW,CAClC,GACE,CAAC,MAAI,CAACksD,iBAAL,CAAuBvyD,IAAvB,CACC,SAAC2R,SAAD,QAAetL,MAAK,CAAC7C,MAAN,WAAwBmO,UAAvC,EADD,CADH,CAIE,CACA,KAAM,IAAI9R,MAAJ,0BAEFwG,KAAK,CAAC7C,MAAN,CAAasO,WAAb,CAAyBrO,IAFvB,wBAGW,MAAI,CAAC8uD,iBAAL,CAAuB51C,IAAvB,CAA4B,IAA5B,CAHX,MAAN,CAKD,CAED,GAAI,CAACzL,MAAM,CAACC,SAAP,CAAiB9K,KAAK,CAAC5E,MAAvB,CAAD,EAAmC4E,KAAK,CAAC5E,MAAN,CAAe,CAAtD,CAAyD,CACvD,KAAM,IAAI5B,MAAJ,iCAAmCwG,KAAK,CAAC5E,MAAzC,MAAN,CACD,CACF,CAhBD,EAkBA,GACEg9E,gBAAgB,CAAC74E,MAAjB,CAAwB,SAACC,KAAD,CAAQrQ,OAAR,QAAoBqQ,MAAK,CAAGrQ,OAAO,CAACiM,MAApC,EAAxB,CAAoE,CAApE,EACA,KAAKsK,QAFP,CAGE,CACA,KAAM,IAAIlM,MAAJ,0BAAN,CACD,CAED,KAAK0+E,UAAL,CAAkBE,gBAAlB,CACD,CAED,GAAIC,kBAAJ,CAAwB,CACtB,GACE,CAAC,KAAKnsB,iBAAL,CAAuBvyD,IAAvB,CACC,SAACk/E,SAAD,QAAeR,mBAAkB,WAAYQ,UAA7C,EADD,CADH,CAIE,CACA,KAAM,IAAIr/E,MAAJ,mCACuB6+E,kBAAkB,CAAC5sE,WAAnB,CAA+BrO,IADtD,MAAN,CAGD,CAED,KAAK66E,YAAL,CAAoBI,kBAApB,CACD,CACF,C,wDAEe9wE,O,CAAmC,oBAA1B6M,iBAA0B,2DAAP,KAAO,CACjD,GAAIA,gBAAgB,GAAK,IAAzB,CAA+B,CAC7B,MAAO,KAAP,CACD,CAED,MAAO,MAAKkkE,MAAL,CAAY34E,KAAZ,CAAkB,mBAAGvE,OAAH,OAAGA,MAAH,OAAgBA,OAAM,CAAG,MAAI,CAACixD,gBAA9B,EAAlB,CAAP,CACD,C,wCAEO9kD,O,CAAkC,oBAAzB6M,iBAAyB,2DAAN,IAAM,CACxC,GAAMpU,MAAK,CAAG,KAAKs4E,MAAL,CAAY1rE,IAAZ,CACZ,SAACye,IAAD,QAAUA,KAAI,CAACluB,MAAL,CAAYsO,WAAZ,GAA4B,MAAI,CAACwsE,YAAL,CAAkBxsE,WAAxD,EADY,CAAd,CAIA,GAAI,CAACzL,KAAL,CAAY,CACV,MAAO,MAAP,CACD,CAED,GAAIA,KAAK,CAAC5E,MAAN,CAAe,KAAKixD,gBAAxB,CAA0C,CACxC,MAAO,MAAP,CACD,CAED,MAAOj4C,iBAAP,CACD,C,iDAEa,CACZ,KAAK0kE,aAAL,GACD,C,qDAEe,iBACd,GAAM94E,MAAK,CAAG,KAAKs4E,MAAL,CAAY1rE,IAAZ,CACZ,SAACye,IAAD,QAAUA,KAAI,CAACluB,MAAL,CAAYsO,WAAZ,GAA4B,MAAI,CAACwsE,YAAL,CAAkBxsE,WAAxD,EADY,CAAd,CAIA,GAAI,CAACzL,KAAL,CAAY,CACV,KAAM,IAAIxG,MAAJ,CACJ,8DADI,CAAN,CAGD,CAEDwG,KAAK,CAAC5E,MAAN,EAAgB,KAAKixD,gBAArB,CAEA,KAAK5nD,MAAL,CAAYqN,GAAZ,CACGinE,kBADH,GAEGC,UAFH,8BAIM,KAAK3sB,gBAJX,eAKU,KAAK4rB,YAAL,CAAkBlvB,cAAlB,EALV,GAQA,KAAKuvB,MAAL,CAAc,KAAKA,MAAL,CAAYp4E,MAAZ,CAAmB,SAACF,KAAD,QAAWA,MAAK,CAAC5E,MAAN,CAAe,CAA1B,EAAnB,CAAd,CACA,KAAK69E,8BAAL,GACD,C,iDAEa,CACZ,GAAI,KAAKx0E,MAAL,CAAYkF,KAAZ,CAAkBE,SAAlB,EAAJ,CAAmC,CACjC,KAAK6iD,YAAL,GACD,CAFD,IAEO,IAAI,KAAKjoD,MAAL,CAAYE,UAAZ,EAAJ,CAA8B,CACnC,OACD,CAFM,IAEA,CACL,KAAK+nD,YAAL,CAAoB,CAApB,CACD,CAED,GAAI,KAAKA,YAAL,CAAoB,KAAKD,iBAA7B,CAAgD,CAC9C,KAAKysB,KAAL,GACD,CACF,C,uFAEgC,iBAC/B,GAAI,KAAKZ,MAAL,CAAY/pF,MAAZ,GAAuB,CAA3B,CAA8B,CAC5B,OACD,CAED,GACE,CAAC,KAAK+pF,MAAL,CAAY1rE,IAAZ,CACC,SAACye,IAAD,QAAUA,KAAI,CAACluB,MAAL,CAAYsO,WAAZ,GAA4B,MAAI,CAACwsE,YAAL,CAAkBxsE,WAAxD,EADD,CADH,CAIE,CACA,GAAMsoD,QAAO,CAAG,KAAKukB,MAAL,CAAY1rE,IAAZ,CACd,SAAC5M,KAAD,QAAWA,MAAK,CAAC5E,MAAN,CAAe,MAAI,CAACixD,gBAA/B,EADc,CAAhB,CAIA,GAAI0H,OAAJ,CAAa,CACX,KAAKkkB,YAAL,CAAoBlkB,OAAO,CAAC52D,MAA5B,CACD,CACF,CACF,C,qCAEO,kBACN,GAAIg8E,kBAAiB,CAAG,CAAxB,CACA,GAAIC,mBAAkB,CAAG,CAAzB,CAEA,GAAM96E,KAAI,CAAG,KAAKmG,MAAL,CAAYgF,WAAZ,CAAwBnL,IAArC,CACA,GAAM+6E,aAAY,CAAG,GAAIzB,mBAAJ,EAArB,CAEA,MAAO,IAAP,CAAa,CACX,GAAIwB,kBAAkB,GAAK,KAAKzsB,YAAhC,CAA8C,CAC5C,MACD,CAED,GACE,KAAK2rB,MAAL,CAAY34E,KAAZ,CAAkB,SAAC24E,MAAD,CAAY,CAC5B,GAAM3mF,OAAM,CAAG,OAAI,CAACumF,UAAL,CAAgBtrE,IAAhB,CACb,SAACjb,MAAD,QAAYA,OAAM,CAACwL,MAAP,CAAcsO,WAAd,GAA8B6sE,MAAM,CAACn7E,MAAP,CAAcsO,WAAxD,EADa,CAAf,CAIA,GAAI9Z,MAAM,EAAIA,MAAM,CAACyJ,MAAP,EAAiBk9E,MAAM,CAACl9E,MAAtC,CAA8C,CAC5C,MAAO,KAAP,CACD,CAED,GAAIyU,MAAK,CAAGle,MAAM,CAAG2mF,MAAM,CAACl9E,MAAP,CAAgBzJ,MAAM,CAACyJ,MAA1B,CAAmCk9E,MAAM,CAACl9E,MAA5D,CACA,GAAIyU,KAAK,CAAG,OAAI,CAAC88C,YAAL,CAAoBysB,kBAAhC,CAAoD,CAClDvpE,KAAK,CAAG,OAAI,CAAC88C,YAAL,CAAoBysB,kBAA5B,CACD,CAED,GAAIvpE,KAAK,GAAK,CAAd,CAAiB,CACf,MAAO,KAAP,CACD,CAED,GAAMypE,eAAc,CAAGD,YAAY,CAACE,kBAAb,CAAgCj7E,IAAhC,CAAsC,CAC3DnB,MAAM,CAAEm7E,MAAM,CAACn7E,MAD4C,CAE3D/B,MAAM,CAAEyU,KAFmD,CAAtC,CAAvB,CAKA,GAAIypE,cAAc,GAAK,CAAvB,CAA0B,CACxB,MAAO,KAAP,CACD,CAFD,IAEO,IAAIA,cAAc,CAAGzpE,KAArB,CAA4B,CACjCA,KAAK,CAAGypE,cAAR,CACD,CAEDD,YAAY,CAACG,WAAb,CAAyBl7E,IAAzB,CAA+B,CAC7BnB,MAAM,CAAEm7E,MAAM,CAACn7E,MADc,CAE7B/B,MAAM,CAAEyU,KAFqB,CAA/B,EAKAupE,kBAAkB,EAAIvpE,KAAtB,CACAyoE,MAAM,CAACl9E,MAAP,EAAiByU,KAAjB,CAEA,MAAO,MAAP,CACD,CAtCD,CADF,CAwCE,CACA,MACD,CACF,CAED,KAAKyoE,MAAL,CAAc,KAAKA,MAAL,CAAYp4E,MAAZ,CAAmB,SAACF,KAAD,QAAWA,MAAK,CAAC5E,MAAN,CAAe,CAA1B,EAAnB,CAAd,CAEA,MAAO,IAAP,CAAa,CACX,GAAI+9E,iBAAiB,GAAK,KAAKxsB,YAA/B,CAA6C,CAC3C,MACD,CAED,GACE,KAAKurB,UAAL,CAAgBv4E,KAAhB,CAAsB,SAAChO,MAAD,CAAY,CAChC,GAAI2mF,OAAM,CAAG,OAAI,CAACA,MAAL,CAAY1rE,IAAZ,CACX,SAAC0rE,MAAD,QAAY3mF,OAAM,CAACwL,MAAP,CAAcsO,WAAd,GAA8B6sE,MAAM,CAACn7E,MAAP,CAAcsO,WAAxD,EADW,CAAb,CAIA,GAAI,CAAC6sE,MAAD,EAAW3mF,MAAM,CAACyJ,MAAP,CAAgB,CAA/B,CAAkC,CAChCk9E,MAAM,CAAG,CACPn7E,MAAM,CAAExL,MAAM,CAACwL,MADR,CAEP/B,MAAM,CAAE,CAFD,CAAT,CAKA,OAAI,CAACk9E,MAAL,CAAY5gF,IAAZ,CAAiB4gF,MAAjB,EACD,CAPD,IAOO,IAAI,CAACA,MAAD,EAAW3mF,MAAM,CAACyJ,MAAP,GAAkB,CAAjC,CAAoC,CACzC,MAAO,KAAP,CACD,CAED,GAAIk9E,MAAM,CAACl9E,MAAP,EAAiBzJ,MAAM,CAACyJ,MAA5B,CAAoC,CAClC,MAAO,KAAP,CACD,CAED,GAAMq+E,YAAW,CAAG,OAAI,CAACh1E,MAAL,CAAYgF,WAAZ,CACjBjF,UADiB,GAEjBoI,IAFiB,CAEZ,SAACnI,MAAD,QACJA,OAAM,CAACC,WAAP,CAAmB,eAAnB,CAAoC/S,MAAM,CAACwL,MAA3C,CAAmD,IAAnD,CADI,EAFY,CAApB,CAMA,GAAI,CAACs8E,WAAL,CAAkB,CAChB,MAAO,KAAP,CACD,CAED,GAAMh+D,MAAK,CAAGg+D,WAAW,CAAC/0E,WAAZ,CACZ,eADY,CAEZ/S,MAAM,CAACwL,MAFK,CAGZ,IAHY,CAAd,CAMA,GAAIu8E,QAAO,CAAG/nF,MAAM,CAACyJ,MAAP,CAAgBk9E,MAAM,CAACl9E,MAArC,CAEA,GAAIs+E,OAAO,CAAG,OAAI,CAAC/sB,YAAL,CAAoBwsB,iBAAlC,CAAqD,CACnDO,OAAO,CAAG,OAAI,CAAC/sB,YAAL,CAAoBwsB,iBAA9B,CACD,CAED,GAAI19D,KAAK,CAACrgB,MAAN,EAAgBs+E,OAApB,CAA6B,CAC3BpB,MAAM,CAACl9E,MAAP,EAAiBs+E,OAAjB,CACAD,WAAW,CAAC/0E,WAAZ,CAAwB,aAAxB,CAAuC,CACrCvH,MAAM,CAAEse,KAAK,CAACte,MADuB,CAErC/B,MAAM,CAAEs+E,OAF6B,CAAvC,EAIAP,iBAAiB,EAAIO,OAArB,CACD,CAPD,IAOO,IAAIj+D,KAAK,CAACrgB,MAAN,CAAes+E,OAAnB,CAA4B,CACjCpB,MAAM,CAACl9E,MAAP,EAAiBqgB,KAAK,CAACrgB,MAAvB,CACAq+E,WAAW,CAAC/0E,WAAZ,CAAwB,aAAxB,CAAuC,CACrCvH,MAAM,CAAEse,KAAK,CAACte,MADuB,CAErC/B,MAAM,CAAEqgB,KAAK,CAACrgB,MAFuB,CAAvC,EAIA+9E,iBAAiB,EAAI19D,KAAK,CAACrgB,MAA3B,CACD,CAED,MAAO,MAAP,CACD,CA3DD,CADF,CA6DE,CACA,MACD,CACF,CAED,KAAK69E,8BAAL,GACD,C,gCAlhB8BjlE,2B,EAqhBlBgkE,mGAAf,E;;GCzgBM2B,gB,qFACJ,sBAAoBjqD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,uLAClB,CAAEA,EAAE,CAAFA,EAAF,CAAM6K,KAAK,CAAE,CAAb,CAAgBsC,SAAS,CAAE,CAA3B,CADkB,CACc,CACpC,GAAImiE,qCAAJ,CAAgC,CAAhC,CADoC,CAEpC,GAAIwE,yBAAJ,CAAsB,CAAtB,CAFoC,CAGpC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAHoC,CAIpC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAJoC,CAKpC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAtB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CAJwB,CAKxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CALwB,CAA1B,CALoC,CAYpC,GAAIO,+BAAJ,CAA4B,CAA5B,CAZoC,CAapC,GAAIoB,2BAAJ,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,CAA1C,CAboC,CAcpC,GAAIS,2BAAJ,CAAwB,CAAxB,CAA2B,CAA3B,CAdoC,CAepC,GAAIiC,0BAAJ,CAAuB,CAACr9D,qBAAD,CAAvB,CAAmC,CAAnC,CAAsC,EAAtC,CAA0C,EAA1C,CAfoC,CAgBpC,GAAI28D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,CADqC,CAE3CsK,KAAK,CAAE,IAFoC,CAG3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAHoC,CAI3C5W,aAAa,CAAE,CAJ4B,CAA7C,CAhBoC,CAsBpC,GAAIw9D,yCAAJ,CAAoC,CAApC,CAtBoC,CAuBpC,GAAIK,+BAAJ,CAA0B,CAA1B,CAvBoC,CADd,GA0BzB,C,qGAEgB,CACf,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,oCAAP,CACD,C,mEAEsB,CACrB,MAAO,6GAAP,CACD,C,qBAvCmBsE,a,EA0CPyC,+DAAf,E;;GC1CMC,oC,+FACJ,gCAAoBlqD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,2MAClB,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,CAAjB,CAAoBtC,KAAK,CAAE,CAA3B,CADkB,CACc,CACpC,GAAIipE,yBAAJ,CAAsB,CAAtB,CADoC,CAEpC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFoC,CAGpC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHoC,CAIpC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,GAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,CAAjC,CAAT,CAA8C08E,QAAQ,CAAE,CAAC,GAAzD,CAJwB,CAA1B,CAJoC,CAUpC,GAAIO,+BAAJ,CAA4B,CAA5B,CAVoC,CAWpC,GAAI7E,qCAAJ,CAAgC,CAAhC,CAXoC,CAYpC,GAAIlB,iCAAJ,CAA4B,CAA5B,CAA+B,CAA/B,CAZoC,CAapC,GAAImH,2BAAJ,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,EAA1C,CAboC,CAcpC,GAAI0C,0BAAJ,CAAuB,CAACh9D,wBAAD,CAAcC,wBAAd,CAAvB,CAAmD,CAAnD,CAAsD,EAAtD,CAA0D,CAA1D,CAdoC,CAepC,GAAIq8D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,EADqC,CAE3C7+B,MAAM,CAAE,EAFmC,CAG3CmpC,KAAK,CAAE,GAHoC,CAI3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJoC,CAK3C7W,aAAa,CAAE,KAL4B,CAM3CC,aAAa,CAAE,EAN4B,CAA7C,CAfoC,CAuBpC,GAAI09D,kCAAJ,CAA6B,CAA7B,CAAgC,CAAhC,CAvBoC,CADd,GA0BzB,C,+GAEgB,CACf,MAAO,qBAAP,CACD,C,+DAEoB,CACnB,MAAO,iCAAP,CACD,C,+BAnC6ByE,a,EAsCjB0C,iGAAf,E;;GCrCMC,8C,oGACJ,qCAAoBnqD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,qNAClB,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,EAAjB,CAAqBtC,KAAK,CAAE,CAA5B,CADkB,CACe,CACrC,GAAIipE,yBAAJ,CAAsB,CAAtB,CADqC,CAErC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFqC,CAGrC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHqC,CAIrC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,EAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CAJwB,CAA1B,CAJqC,CAUrC,GAAIO,+BAAJ,CAA4B,CAA5B,CAVqC,CAWrC,GAAI7E,qCAAJ,CAAgC,CAAhC,CAXqC,CAYrC,GAAIlB,iCAAJ,CAA4B,CAA5B,CAA+B,CAA/B,CAZqC,CAarC,GAAImH,2BAAJ,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,EAA1C,CAbqC,CAcrC,GAAI0C,0BAAJ,CAAuB,CAACl9D,wBAAD,CAAcC,wBAAd,CAAvB,CAAmD,CAAnD,CAAsD,CAAtD,CAAyD,CAAzD,CAdqC,CAerC,GAAIu8D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,EADqC,CAE3C7+B,MAAM,CAAE,EAFmC,CAG3CmpC,KAAK,CAAE,GAHoC,CAI3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJoC,CAK3C7W,aAAa,CAAE,KAL4B,CAA7C,CAfqC,CAsBrC,GAAI29D,kCAAJ,CAA6B,CAA7B,CAAgC,CAAhC,CAtBqC,CADf,GAyBzB,C,oHAEgB,CACf,MAAO,iBAAP,CACD,C,+DAEoB,CACnB,MAAO,2BAAP,CACD,C,oCAlCkCyE,a,EAqCtB2C,gHAAf,E;;GCrCMC,8C,oGACJ,qCAAoBpqD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,qNAClB,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,CAAjB,CAAoBtC,KAAK,CAAE,CAA3B,CADkB,CACc,CACpC,GAAIipE,yBAAJ,CAAsB,CAAtB,CADoC,CAEpC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAFoC,CAGpC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAHoC,CAIpC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAC,EAAvB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CAJwB,CAA1B,CAJoC,CAUpC,GAAIO,+BAAJ,CAA4B,CAA5B,CAVoC,CAWpC,GAAI7E,qCAAJ,CAAgC,CAAhC,CAXoC,CAYpC,GAAIlB,iCAAJ,CAA4B,CAA5B,CAA+B,CAA/B,CAZoC,CAapC,GAAImH,2BAAJ,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,EAA1C,CAboC,CAcpC,GAAI0C,0BAAJ,CAAuB,CAACl9D,wBAAD,CAAcC,wBAAd,CAAvB,CAAmD,CAAnD,CAAsD,CAAtD,CAAyD,CAAzD,CAdoC,CAepC,GAAIu8D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,EADqC,CAE3C7+B,MAAM,CAAE,EAFmC,CAG3CmpC,KAAK,CAAE,GAHoC,CAI3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAJoC,CAK3C7W,aAAa,CAAE,KAL4B,CAA7C,CAfoC,CAsBpC,GAAI29D,kCAAJ,CAA6B,CAA7B,CAAgC,CAAhC,CAtBoC,CADd,GAyBzB,C,oHAEgB,CACf,MAAO,eAAP,CACD,C,+DAEoB,CACnB,MAAO,+BAAP,CACD,C,oCAlCkCyE,a,EAqCtB4C,gHAAf,E;;;;GCjDMC,sC,gGACJ,4BAAYznE,IAAZ,CAAkB,CAAC,4MACXA,IADU,CACJ,CAAC,GAAIihD,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CAAD,CADI,GAEjB,C,gHAEgB,CACf,MAAO,wBAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,gCAf8BgiE,a,EAkBlB6C,qGAAf,E;;GClBMC,4C,mGACJ,+BAAY1nE,IAAZ,CAAkB,CAAC,kNACXA,IADU,CACJ,CACV,GAAIihD,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCj5C,iBAArC,CAAgD,CAAhD,CADU,CAEV,GAAIi5C,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCj5C,iBAArC,CAAgD,CAAhD,CAFU,CADI,GAKjB,C,mHAEgB,CACf,MAAO,6BAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,mCAlBiC48D,a,EAqBrB8C,8GAAf,E;;GCrBMC,8C,oGACJ,gCAAY3nE,IAAZ,CAAkB,CAAC,oNACXA,IADU,CACJ,CACV,GAAIihD,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CADU,CAEV,GAAIq+C,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CAFU,CADI,GAKjB,C,oHAEgB,CACf,MAAO,6BAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,oCAlBkCgiE,a,EAqBtB+C,iHAAf,E;;GCrBMC,wD,yGACJ,qCAAY5nE,IAAZ,CAAkB,CAAC,8NACXA,IADU,CACJ,CACV,GAAIihD,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CADU,CAEV,GAAIq+C,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CAFU,CAGV,GAAIq+C,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CAHU,CAIV,GAAIq+C,+BAAJ,CAA4B,CAA5B,CAA+B,IAA/B,CAAqCr+C,kBAArC,CAAiD,EAAjD,CAJU,CADI,GAOjB,C,yHAEgB,CACf,MAAO,2BAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,KAAP,CACD,C,yCApBuCgiE,a,EAuB3BgD,gIAAf,E;;;;GCZMC,8B,4FACJ,6BAAoBzqD,IAApB,CAA0B,IAAZ3vB,GAAY,MAAZA,EAAY,qMAClB,CAAEA,EAAE,CAAFA,EAAF,CAAM6K,KAAK,CAAE,CAAb,CAAgBsC,SAAS,CAAE,CAA3B,CADkB,CACc,CACpC,GAAImiE,qCAAJ,CAAgC,CAAhC,CADoC,CAEpC,GAAIwE,yBAAJ,CAAsB,CAAtB,CAFoC,CAGpC,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAHoC,CAIpC,GAAIujD,2BAAJ,CAAwB,EAAxB,CAJoC,CAKpC,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAtB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAEp2D,mBAAT,CAA8B08E,QAAQ,CAAE,CAAC,EAAzC,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CAJwB,CAA1B,CALoC,CAWpC,GAAIO,+BAAJ,CAA4B,CAA5B,CAXoC,CAYpC,GAAIoB,2BAAJ,CAAwB,IAAxB,CAA8B,IAA9B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,EAA1C,CAZoC,CAapC,GAAIS,2BAAJ,EAboC,CAcpC,GAAIiC,0BAAJ,CAAuB,CAACn9D,uBAAD,CAAaD,uBAAb,CAAvB,CAAiD,CAAjD,CAAoD,EAApD,CAAwD,CAAxD,CAdoC,CAepC,GAAI08D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,CADqC,CAE3CsK,KAAK,CAAE,GAFoC,CAG3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAHoC,CAI3C5W,aAAa,CAAE,CAJ4B,CAA7C,CAfoC,CAqBpC,GAAIw9D,yCAAJ,CAAoC,CAApC,CArBoC,CAsBpC,GAAIK,+BAAJ,CAA0B,CAA1B,CAtBoC,CADd,GAyBzB,C,4GAEgB,CACf,MAAO,iBAAP,CACD,C,+DAEoB,CACnB,MAAO,uCAAP,CACD,C,4BAlC0BsE,a,EAqCdiD,2FAAf,E;;ACxCA,GAAMC,OAAM,2CACVhD,UAAU,CAAVA,iBADU,CAEVuC,OAAO,CAAPA,WAFU,EAGPU,uBAHO,IAIPC,uBAJO,IAKPzlB,wBALO,EAMVslB,cAAc,CAAdA,yBANU,CAOV9C,qBAAqB,CAArBA,4BAPU,EAAZ,CAUe+C,wDAAf,E;;GCdMG,kB,8FACJ,kBAAYjoE,IAAZ,CAA6E,IAA3DgK,kBAA2D,2DAAvC,EAAuC,IAAnCk+D,aAAmC,2DAApB,EAAoB,IAAhBhI,WAAgB,2DAAH,CAAG,yLACrElgE,IADqE,CAC/D,CACV,GAAI+8D,qCAAJ,CAAgC,CAAhC,CAAmC,KAAnC,CADU,CAEV,GAAI6C,8CAAJ,CAAyCsI,YAAzC,CAAuDA,YAAvD,CAAqE,CAArE,CAFU,CAGV,GAAIn+D,6BAAJ,CAAwBC,iBAAxB,CAHU,CAIV,GAAIi2D,yCAAJ,CAAoCC,UAApC,CAJU,CAKV,GAAIM,wCAAJ,CAAmC,CAAnC,CALU,CAD+D,GAQ5E,C,sGAEgB,CACf,MAAO,UAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,EAAP,CACD,C,sBArBoBzgE,iB,EAwBRkoE,mEAAf,E;;GC9BME,kB,8FACJ,kBAAYnoE,IAAZ,CAAkByK,WAAlB,CAA+B,CAAC,wLACxBzK,IADuB,CACjB,CAAC,GAAI6J,2BAAJ,CAAsBY,WAAtB,CAAD,CADiB,GAE9B,C,sGAEgB,CACf,MAAO,WAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,iDAEa,CACZ,MAAO,EAAP,CACD,C,sBAfoB1K,iB,EAkBRooE,mEAAf,E;;GCnBMC,0B,8FACJ,2BAAoB,IAAN36E,GAAM,MAANA,EAAM,iMACZ,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,CAAjB,CAAoBtC,KAAK,CAAE,CAA3B,CADY,CACoB,EADpB,CACwB,EADxB,CAC4B,CAD5B,GAEnB,C,0GAEgB,CACf,MAAO,qBAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,0BAXwB2vE,a,EAcZG,+EAAf,E;;GCdMC,4B,+FACJ,4BAAoB,IAAN56E,GAAM,MAANA,EAAM,mMACZ,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,EAAjB,CAAqBtC,KAAK,CAAE,CAA5B,CADY,CACqB,EADrB,CACyB,EADzB,CAC6B,CAD7B,GAEnB,C,2GAEgB,CACf,MAAO,sBAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,2BAXyB2vE,a,EAcbI,kFAAf,E;;GCdMC,4B,+FACJ,4BAAoB,IAAN76E,GAAM,MAANA,EAAM,mMACZ,CAAEA,EAAE,CAAFA,EAAF,CAAMmN,SAAS,CAAE,EAAjB,CAAqBtC,KAAK,CAAE,CAA5B,CADY,CACqB,EADrB,CACyB,EADzB,CAC6B,CAD7B,GAEnB,C,2GAEgB,CACf,MAAO,wBAAP,CACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,2BAXyB2vE,a,EAcbK,kFAAf,E;;;;GCbMC,kB,8FACJ,kBAAYvoE,IAAZ,CAAkBkJ,KAAlB,CAAyB,CAAC,wLAClBlJ,IADiB,CACX,CAAC,GAAIiJ,gCAAJ,CAA2BC,KAA3B,CAAD,CADW,GAExB,C,sGAEgB,CACf,0BAAoB,KAAK9W,WAAL,CAAiB,oBAAjB,CAApB,UACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,sBAXoB2N,iB,EAcRwoE,oEAAf,E;;GCdMC,kB,8FACJ,kBAAYxoE,IAAZ,CAAkBkJ,KAAlB,CAAyB,CAAC,wLAClBlJ,IADiB,CACX,CAAC,GAAIqK,gCAAJ,CAA2BnB,KAA3B,CAAD,CADW,GAExB,C,sGAEgB,CACf,0BAAoB,KAAK9W,WAAL,CAAiB,cAAjB,CAApB,UACD,C,+DAEoB,CACnB,MAAO,0BAAP,CACD,C,sBAXoB2N,iB,EAcRyoE,oEAAf,E;;ACPA,GAAMV,cAAM,6CACP91E,wBADO,IAEPy2E,sBAFO,IAGPC,uBAHO,IAIP57D,yBAJO,IAKP67D,iCALO,IAMPC,aANO,IAOP1zE,oBAPO,EAQVqzE,QAAQ,CAARA,cARU,CASVC,QAAQ,CAARA,cATU,EAAZ,CAYeV,6DAAf,E;;GCnBMe,gB,iFACJ,iBAAY/7E,IAAZ,CAAkB,mEAChB,6HAAMA,IAAN,GAEA,MAAK6mB,YAAL,CAAoB,+BAApB,CACA,MAAKD,SAAL,CAAiB,MAAKrlB,SAAL,CAAiB,CAAlC,CACA,MAAKP,QAAL,CAAgB,CAAhB,CACA,MAAKK,SAAL,CAAiB,CAAjB,CACA,MAAKJ,WAAL,CAAmB,CAAnB,CAEA,MAAK2lB,SAAL,CAAiB,OAAjB,CACA,MAAKH,SAAL,CAAiB,GAAjB,CAEA,MAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAFF,CAGE,CAHF,CAD0B,CAA5B,EAQA,MAAKrG,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAD4B,CAE5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAF4B,CAG5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAAC,CAAD,CAAI,CAAJ,CAA5D,CAH4B,CAI5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAAC,CAAD,CAAI,CAAJ,CAA5D,CAJ4B,CAK5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAL4B,CAM5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAN4B,CAQ5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAnB,CAAuD,EAAvD,CAA2D,CAA3D,CAA8D,CAA9D,CAR4B,CAS5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAnB,CAAuD,EAAvD,CAA2D,CAA3D,CAA8D,CAA9D,CAT4B,CAU5B,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAV4B,CAW5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAAtB,CAX4B,CAA9B,EAcA,MAAKrG,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAFF,CAGE,CAHF,CADwB,CAA1B,EAlCgB,aAyCjB,C,iBA1CmBkX,S,EA6CPq5D,8DAAf,E;;GC/BMtuC,a,oYACgB,CAClB,KAAK5mB,YAAL,CAAoB,wBAApB,CACA,KAAKhB,QAAL,CAAgB,CACd,GAAI7tB,eAAJ,CAAW,CAAX,CAAc,CAAd,CADc,CAEd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAFc,CAGd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAHc,CAId,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAJc,CAAhB,CAMA,KAAKuJ,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,EAAhB,CACA,KAAKK,SAAL,CAAiB,EAAjB,CACA,KAAKJ,WAAL,CAAmB,EAAnB,CAEA,KAAKylB,eAAL,CAAuB,EAAvB,CACA,KAAKC,cAAL,CAAsB,EAAtB,CAEA,KAAKw1D,WAAL,IAEA,KAAKv1D,SAAL,CAAiB,MAAjB,CACA,KAAKH,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAD0B,CAG1B,GAAIrG,YAAO,CAACu1E,sBAAZ,CAAmC,CAAE/5E,EAAE,CAAE,GAAN,CAAnC,CAAgD,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAhD,CAH0B,CAI1B,GAAI+U,YAAO,CAACu1E,sBAAZ,CAAmC,CAAE/5E,EAAE,CAAE,GAAN,CAAnC,CAAgD,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAhD,CAJ0B,CAK1B,GAAI+U,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAL0B,CAO1B,GAAIrG,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAP0B,CAY1B,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAZ0B,CAiB1B,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAjB0B,CAsB1B,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAtB0B,CA2B1B,GAAI+U,YAAO,CAACqyE,OAAZ,CACE,CACE72E,EAAE,CAAE,GADN,CAEEmN,SAAS,CAAE,EAFb,CAGEtC,KAAK,CAAE,CAHT,CAIEksE,SAAS,CAAE,KAJb,CAKEtvE,IAAI,CAAE,CALR,CAMEmC,KAAK,CAAE,EANT,CAOEwE,qBAAqB,CAAE,GAPzB,CADF,CAUE,CAVF,CA3B0B,CAwC1B,GAAI5J,YAAO,CAAC0yE,QAAZ,CACE,CACEl3E,EAAE,CAAE,GADN,CAEEmN,SAAS,CAAE,EAFb,CAGEtC,KAAK,CAAE,CAHT,CAIEksE,SAAS,CAAE,KAJb,CAKEtvE,IAAI,CAAE,CALR,CAMEmC,KAAK,CAAE,CANT,CAOEwE,qBAAqB,CAAE,GAPzB,CADF,CAUE,CAVF,CAxC0B,CAqD1B,GAAI5J,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBkS,UAAU,CAAE,GAJQ,CAKpBE,QAAQ,CAAE,EALU,CAAtB,CArD0B,CAA5B,EA8DA,KAAKzY,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAD4B,CAE5B,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAF4B,CAG5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,EADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBkS,UAAU,CAAE,GAJQ,CAKpBC,WAAW,CAAE,EALO,CAAtB,CAH4B,CAU5B,GAAIxY,YAAO,CAACqyE,OAAZ,CAAoB,CAAE72E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAAmCpD,IAAI,CAAE,EAAzC,CAApB,CAAmE,EAAnE,CAV4B,CAW5B,GAAIjD,YAAO,CAACk2E,QAAZ,CAAqB,CAAE16E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAArB,CAA0D,GAA1D,CAX4B,CAY5B,GAAIrG,YAAO,CAACk2E,QAAZ,CAAqB,CAAE16E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAArB,CAA0D,GAA1D,CAZ4B,CAA9B,EAeA,KAAKrG,OAAL,CAAai3E,uBAAb,CAAqC,CACnC,GAAIj3E,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,CAAnE,CAAsE,CACpE,CADoE,CAEpE,CAFoE,CAAtE,CADmC,CAMnC,GAAIrG,YAAO,CAACkyE,wBAAZ,CACE,CAAE12E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CANmC,CAYnC,GAAIrG,YAAO,CAACs1E,sBAAZ,CAAmC,CAAE95E,EAAE,CAAE,GAAN,CAAnC,CAAgD,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAhD,CAZmC,CAcnC,GAAI+U,YAAO,CAAC21E,2BAAZ,CAAwC,CACtCn6E,EAAE,CAAE,GADkC,CAEtCmN,SAAS,CAAE,EAF2B,CAGtCtC,KAAK,CAAE,CAH+B,CAAxC,CAdmC,CAmBnC,GAAIrG,YAAO,CAAC21E,2BAAZ,CAAwC,CACtCn6E,EAAE,CAAE,GADkC,CAEtCmN,SAAS,CAAE,EAF2B,CAGtCtC,KAAK,CAAE,CAH+B,CAAxC,CAnBmC,CAwBnC,GAAIrG,YAAO,CAAC21E,2BAAZ,CAAwC,CACtCn6E,EAAE,CAAE,GADkC,CAEtCmN,SAAS,CAAE,EAF2B,CAGtCtC,KAAK,CAAE,CAH+B,CAAxC,CAxBmC,CA6BnC,GAAIrG,YAAO,CAAC21E,2BAAZ,CAAwC,CACtCn6E,EAAE,CAAE,GADkC,CAEtCmN,SAAS,CAAE,EAF2B,CAGtCtC,KAAK,CAAE,CAH+B,CAAxC,CA7BmC,CAArC,EAoCA,KAAKrG,OAAL,CAAak3E,kBAAb,CAAgC,CAC9B,GAAIl3E,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBoS,QAAQ,CAAE,EAJU,CAAtB,CAD8B,CAQ9B,GAAIzY,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,CAAnE,CAAsE,CACpE,CADoE,CAEpE,CAFoE,CAAtE,CAR8B,CAa9B,GAAIrG,YAAO,CAACkzE,uBAAZ,CAAoC,CAAE13E,EAAE,CAAE,GAAN,CAApC,CAAiD,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAAjD,CAb8B,CAe9B,GAAI+U,YAAO,CAACu1E,sBAAZ,CACE,CAAE/5E,EAAE,CAAE,GAAN,CADF,CAEE,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,IAAnB,CAFF,CAf8B,CAmB9B,GAAI+U,YAAO,CAACu1E,sBAAZ,CACE,CAAE/5E,EAAE,CAAE,GAAN,CADF,CAEE,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,IAAnB,CAFF,CAnB8B,CAwB9B,GAAI+U,YAAO,CAACiyE,uBAAZ,CACE,CAAEz2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CAxB8B,CA8B9B,GAAIrG,YAAO,CAACkzE,uBAAZ,CAAoC,CAAE13E,EAAE,CAAE,GAAN,CAApC,CAAiD,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAAjD,CA9B8B,CAAhC,EAiCA,KAAK+U,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,GAJO,CAKpBC,QAAQ,CAAE,CALU,CAMpBlY,IAAI,CAAE,KANc,CAAtB,CADwB,CAUxB,GAAIP,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAVwB,CAYxB,GAAI+U,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAAkE,CAChEjB,KAAK,CAAE,CADyD,CAEhE4qE,UAAU,CAAE,CAFoD,CAAlE,CAZwB,CAgBxB,GAAIhwE,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAAkE,CAChEjB,KAAK,CAAE,CADyD,CAEhE4qE,UAAU,CAAE,CAFoD,CAAlE,CAhBwB,CAqBxB,GAAIhwE,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CArBwB,CAuBxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAvBwB,CAwBxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAxBwB,CA0BxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CA1BwB,CA2BxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CA3BwB,CA6BxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CA7BwB,CA8BxB,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CA9BwB,CAA1B,EAiCA,KAAK+U,OAAL,CAAam3E,gBAAb,CAA8B,CAC5B,GAAIn3E,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAAkE,CAChEjB,KAAK,CAAE,CADyD,CAEhE4qE,UAAU,CAAE,CAFoD,CAAlE,CAD4B,CAK5B,GAAIhwE,YAAO,CAACkyE,wBAAZ,CACE,CAAE12E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CAL4B,CAU5B,GAAIrG,YAAO,CAACq2E,aAAZ,CAA0B,CAAE76E,EAAE,CAAE,GAAN,CAA1B,CAV4B,CAW5B,GAAIwE,YAAO,CAACq2E,aAAZ,CAA0B,CAAE76E,EAAE,CAAE,GAAN,CAA1B,CAX4B,CAY5B,GAAIwE,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAZ4B,CAa5B,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAb4B,CAe5B,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAf4B,CAgB5B,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAAjC,CAhB4B,CAA9B,EAmBA,KAAK+U,OAAL,CAAao3E,qBAAb,CAAmC,CACjC,GAAIp3E,YAAO,CAACiyE,uBAAZ,CACE,CAAEz2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CADiC,CAMjC,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAAkE,CAChEjB,KAAK,CAAE,CADyD,CAEhE4qE,UAAU,CAAE,CAFoD,CAAlE,CANiC,CAUjC,GAAIhwE,YAAO,CAACq2E,aAAZ,CAA0B,CAAE76E,EAAE,CAAE,GAAN,CAA1B,CAViC,CAWjC,GAAIwE,YAAO,CAACq2E,aAAZ,CAA0B,CAAE76E,EAAE,CAAE,GAAN,CAA1B,CAXiC,CAYjC,GAAIwE,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CAZiC,CAajC,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CAbiC,CAcjC,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CAdiC,CAgBjC,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAExQ,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAAjC,CAhBiC,CAAnC,EAkBD,C,uDAEgB,CACf,2HAEA,GAAM6pF,aAAY,CAAG,GAAIzB,mBAAJ,EAArB,CAEAyB,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIyc,sBAAJ,EADqB,CAE7Bxe,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI0c,uBAAJ,EADqB,CAE7Bze,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIsd,qBAAJ,EADqB,CAE7Brf,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIkd,0BAAJ,EADqB,CAE7Bjf,MAAM,CAAE,CAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIwd,sBAAJ,EADqB,CAE7Bvf,MAAM,CAAE,IAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI2d,yBAAJ,EADqB,CAE7B1f,MAAM,CAAE,GAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI4d,yBAAJ,EADqB,CAE7B3f,MAAM,CAAE,GAFqB,CAA/B,EAKA,GAAMy5D,UAAS,CAAG,CAChB,KAAKtwD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CADgB,CAEhB,KAAK7F,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CAFgB,CAGhB,KAAK7F,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CAHgB,CAIhB,KAAK7F,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CAJgB,CAAlB,CAOAyqD,SAAS,CAACr9D,OAAV,CAAkB,SAACiN,MAAD,CAAY,CAC5BA,MAAM,CAACC,WAAP,CAAmB,iBAAnB,CAAsC,CACpC2R,IAAI,CAAE,GAAIuD,sBAAJ,EAD8B,CAEpCgxC,aAAa,CAAE,CAFqB,CAAtC,EAIAnmD,MAAM,CAACC,WAAP,CAAmB,iBAAnB,CAAsC,CACpC2R,IAAI,CAAE,GAAIuD,sBAAJ,EAD8B,CAEpCgxC,aAAa,CAAE,CAFqB,CAAtC,EAIAnmD,MAAM,CAACC,WAAP,CAAmB,iBAAnB,CAAsC,CACpC2R,IAAI,CAAE,GAAIwD,uBAAJ,EAD8B,CAEpC+wC,aAAa,CAAE,CAFqB,CAAtC,EAKAnmD,MAAM,CAACC,WAAP,CAAmB,iBAAnB,CAAsC,CACpC2R,IAAI,CAAE,GAAIoE,qBAAJ,EAD8B,CAEpCmwC,aAAa,CAAE,CAFqB,CAAtC,EAID,CAlBD,EAmBD,C,kBAlTgB9oC,S,EAqTJ+qB,8DAAf,E;;;;GChUM+uC,kB,wZACgB,CAClB,KAAKj7E,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKJ,WAAL,CAAmB,CAAnB,CAEA,KAAKylB,eAAL,CAAuB,GAAvB,CACA,KAAKC,cAAL,CAAsB,GAAtB,CAEA,KAAKF,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAAC8yE,qBAAZ,CAAkC,CAAEt3E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,CAArB,CAAwBtC,KAAK,CAAE,CAA/B,CAAlC,CAAsE,CACpE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CADoE,CAAtE,CAD0B,CAI1B,GAAI+U,YAAO,CAAC6yE,UAAZ,CAAuB,CAAEr3E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,CAArB,CAAwBtC,KAAK,CAAE,CAA/B,CAAvB,CAA2D,CACzD,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CADyD,CAA3D,CAJ0B,CAO1B,GAAI+U,YAAO,CAACs1E,sBAAZ,CAAmC,CAAE95E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CAAnC,CAAwE,CACtE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CADsE,CAAxE,CAP0B,CAU1B,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAC,CAAExQ,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,CAAjB,CAAD,CAAjC,CAV0B,CAW1B,GAAI+U,YAAO,CAACo1E,OAAZ,CAAoB,CAAE55E,EAAE,CAAE,GAAN,CAApB,CAAiC,CAAC,CAAExQ,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,CAAjB,CAAD,CAAjC,CAX0B,CAA5B,EAcA,KAAK+U,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAD4B,CAE5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAF4B,CAG5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAAC,CAAD,CAAI,CAAJ,CAA5D,CAH4B,CAI5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAAC,CAAD,CAAI,CAAJ,CAA5D,CAJ4B,CAK5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,EAAzD,CAA6D,CAA7D,CAL4B,CAM5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,EAAzD,CAA6D,CAA7D,CAN4B,CAO5B,GAAIrG,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAFF,CAGE,CAHF,CAP4B,CAY5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAnB,CAAuD,EAAvD,CAA2D,CAA3D,CAA8D,CAA9D,CAZ4B,CAa5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAnB,CAAuD,EAAvD,CAA2D,CAA3D,CAA8D,CAA9D,CAb4B,CAc5B,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAd4B,CAe5B,GAAIrG,YAAO,CAACqyE,OAAZ,CAAoB,CAAE72E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAApB,CAAyD,EAAzD,CAf4B,CAgB5B,GAAIrG,YAAO,CAAC01E,sBAAZ,CAAmC,CAAEl6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnC,CAhB4B,CAiB5B,GAAIrG,YAAO,CAACy1E,qBAAZ,CAAkC,CAAEj6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAlC,CAjB4B,CAkB5B,GAAIrG,YAAO,CAACy1E,qBAAZ,CAAkC,CAAEj6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAlC,CAlB4B,CAmB5B,GAAIrG,YAAO,CAACs2E,QAAZ,CAAqB,CAAE96E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,GAA3D,CAnB4B,CAoB5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,GAJO,CAKpBC,QAAQ,CAAE,CALU,CAMpBlY,IAAI,CAAE,IANc,CAAtB,CApB4B,CAA9B,EA6BD,C,uDAEgB,CACf,+HAEA,KAAKP,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,YAA5C,EAEA,GAAMuvD,SAAQ,CAAG,KAAK1vD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CAAjB,CAEA6pD,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAC/BvH,MAAM,CAAE,GAAIyc,sBAAJ,EADuB,CAE/Bxe,MAAM,CAAE,EAFuB,CAAjC,EAKA64D,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAC/BvH,MAAM,CAAE,GAAIod,qBAAJ,EADuB,CAE/Bnf,MAAM,CAAE,EAFuB,CAAjC,EAKA,KAAKmJ,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAKA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAKA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAImE,oBAAJ,EADuD,CAE7DowC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAImE,oBAAJ,EADuD,CAE7DowC,aAAa,CAAE,CAF8C,CAA/D,EAKA,MAAO,KAAP,CACD,C,sBAtGoB9oC,S,EAyGR85D,mEAAf,E;;;;GChGM7uC,6B,mZACgB,CAClB,KAAK9mB,YAAL,CAAoB,6CAApB,CACA,KAAKhB,QAAL,CAAgB,CACd,GAAI7tB,eAAJ,CAAW,CAAX,CAAc,CAAd,CADc,CAEd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAFc,CAGd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAHc,CAId,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAJc,CAAhB,CAMA,KAAKuJ,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKJ,WAAL,CAAmB,CAAnB,CAEA,KAAKylB,eAAL,CAAuB,EAAvB,CACA,KAAKC,cAAL,CAAsB,EAAtB,CAEA,KAAKw1D,WAAL,4/FAqCA,KAAKv1D,SAAL,CAAiB,SAAjB,CACA,KAAKH,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAD0B,CAE1B,GAAIrG,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAF0B,CAO1B,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAP0B,CAW1B,GAAI+U,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAX0B,CAY1B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,EAJO,CAKpBC,QAAQ,CAAE,CALU,CAAtB,CAZ0B,CAoB1B,GAAIzY,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CApB0B,CAA5B,EA2BA,KAAKrG,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAD4B,CAE5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,EADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBkS,UAAU,CAAE,GAJQ,CAKpBC,WAAW,CAAE,EALO,CAMpBC,QAAQ,CAAE,EANU,CAOpBlY,IAAI,CAAE,IAPc,CAAtB,CAF4B,CAW5B,GAAIP,YAAO,CAACqyE,OAAZ,CAAoB,CAAE72E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAApB,CAAyD,CAAzD,CAX4B,CAY5B,GAAIrG,YAAO,CAACk2E,QAAZ,CAAqB,CAAE16E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAArB,CAA0D,GAA1D,CAZ4B,CAA9B,EAeA,KAAKrG,OAAL,CAAai3E,uBAAb,CAAqC,CACnC,GAAIj3E,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CACrE,CADqE,CAErE,CAFqE,CAAvE,CADmC,CAMnC,GAAIrG,YAAO,CAACs1E,sBAAZ,CACE,CAAE95E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAFF,CANmC,CAUnC,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CAVmC,CAcnC,GAAI+U,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAdmC,CAkBnC,GAAI+U,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CAlBmC,CAArC,EAwBA,KAAK+U,OAAL,CAAak3E,kBAAb,CAAgC,CAC9B,GAAIl3E,YAAO,CAACs1E,sBAAZ,CACE,CAAE95E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAFF,CAD8B,CAK9B,GAAI+U,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CACrE,CADqE,CAErE,CAFqE,CAAvE,CAL8B,CAU9B,GAAIrG,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAFF,CAV8B,CAc9B,GAAI+U,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAd8B,CAkB9B,GAAI+U,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAFF,CAlB8B,CAAhC,EAwBA,KAAK+U,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CADwB,CAOxB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAPwB,CAQxB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CARwB,CASxB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CATwB,CAWxB,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,GAJO,CAKpBC,QAAQ,CAAE,CALU,CAMpBlY,IAAI,CAAE,IANc,CAAtB,CAXwB,CAmBxB,GAAIP,YAAO,CAACo2E,aAAZ,CAA0B,CAAE56E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA1B,CAnBwB,CAoBxB,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAApB,CAA0D,EAA1D,CApBwB,CAqBxB,GAAIrG,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,CAAjB,CAFF,CArBwB,CAA1B,EA2BA,KAAK+U,OAAL,CAAam3E,gBAAb,CAA8B,CAC5B,GAAIn3E,YAAO,CAACo2E,aAAZ,CAA0B,CAAE56E,EAAE,CAAE,GAAN,CAA1B,CAD4B,CAE5B,GAAIwE,YAAO,CAACs2E,QAAZ,CAAqB,CAAE96E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,GAA3D,CAF4B,CAG5B,GAAIrG,YAAO,CAACw1E,kBAAZ,CAA+B,CAAEh6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA/B,CAH4B,CAI5B,GAAIrG,YAAO,CAACy1E,qBAAZ,CAAkC,CAAEj6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAlC,CAJ4B,CAK5B,GAAIrG,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAFF,CAL4B,CAA9B,EAWA,KAAK+U,OAAL,CAAao3E,qBAAb,CAAmC,CACjC,GAAIp3E,YAAO,CAACo2E,aAAZ,CAA0B,CAAE56E,EAAE,CAAE,GAAN,CAA1B,CADiC,CAEjC,GAAIwE,YAAO,CAACs2E,QAAZ,CAAqB,CAAE96E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,GAA3D,CAFiC,CAGjC,GAAIrG,YAAO,CAACw1E,kBAAZ,CAA+B,CAAEh6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA/B,CAHiC,CAIjC,GAAIrG,YAAO,CAACy1E,qBAAZ,CAAkC,CAAEj6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAlC,CAJiC,CAKjC,GAAIrG,YAAO,CAAC41E,cAAZ,CACE,CAAEp6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAFF,CALiC,CAAnC,EAUD,C,uDAEgB,CACf,8HAEA,GAAM6pF,aAAY,CAAG,GAAIzB,mBAAJ,EAArB,CACAyB,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIod,qBAAJ,EADqB,CAE7Bnf,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIqd,oBAAJ,EADqB,CAE7Bpf,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIyc,sBAAJ,EADqB,CAE7Bxe,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIkd,0BAAJ,EADqB,CAE7Bjf,MAAM,CAAE,CAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIwd,sBAAJ,EADqB,CAE7Bvf,MAAM,CAAE,GAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI2d,yBAAJ,EADqB,CAE7B1f,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI4d,yBAAJ,EADqB,CAE7B3f,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI0d,wBAAJ,EADqB,CAE7Bzf,MAAM,CAAE,GAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIyd,wBAAJ,EADqB,CAE7Bxf,MAAM,CAAE,GAFqB,CAA/B,EAKA,KAAKmJ,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAKA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAImE,oBAAJ,EADuD,CAE7DowC,aAAa,CAAE,CAF8C,CAA/D,EAKA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAImE,oBAAJ,EADuD,CAE7DowC,aAAa,CAAE,CAF8C,CAA/D,EAID,C,qBAhRmB9oC,S,EAmRPirB,2FAAf,E;;GC7RME,2B,8YACgB,CAClB,KAAKhnB,YAAL,CACE,wDADF,CAEA,KAAKtlB,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKJ,WAAL,CAAmB,CAAnB,CACA,KAAK4kB,QAAL,CAAgB,CACd,GAAI7tB,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CADc,CAEd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAFc,CAGd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAHc,CAId,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAJc,CAKd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CALc,CAMd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CACA;;;;;;;;;QAPc,CAAhB,CAmBA,KAAKmkF,WAAL,IAEA,KAAKv1D,SAAL,CAAiB,QAAjB,CACA,KAAKH,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAFF,CAGE,CAHF,CAD0B,CAO1B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAtB,CAP0B,CAA5B,EAUA,KAAKrG,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAD4B,CAE5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAArB,CAAyD,CAAzD,CAA4D,CAA5D,CAF4B,CAI5B,GAAIrG,YAAO,CAACqyE,OAAZ,CAAoB,CAAE72E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAApB,CAAyD,CAAzD,CAJ4B,CAM5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAnB,CAAuD,EAAvD,CAA2D,CAA3D,CAA8D,CAA9D,CAN4B,CAO5B,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAP4B,CAQ5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAAtB,CAR4B,CAA9B,EAWA,KAAKrG,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAFF,CAGE,CAHF,CADwB,CAOxB,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnB,CAAyD,EAAzD,CAA6D,CAA7D,CAAgE,CAAhE,CAPwB,CAQxB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CARwB,CASxB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CATwB,CAUxB,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAtB,CAVwB,CAA1B,EAaA,KAAKrG,OAAL,CAAao3E,qBAAb,CAAmC,CACjC,GAAIhE,4BAAJ,CACE,CAAE53E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CADiC,CAMjC,GAAI+U,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAAC,CAAD,CAAI,CAAJ,CAA9D,CANiC,CAAnC,EASA,KAAKrG,OAAL,CAAam3E,gBAAb,CAA8B,CAC5B,GAAI/D,4BAAJ,CACE,CAAE53E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAD4B,CAM5B,GAAI+U,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAAC,CAAD,CAAI,CAAJ,CAA9D,CAN4B,CAA9B,EAQD,C,oBAnFkBkX,S,EAsFNmrB,wFAAf,E;;GClFMD,6B,mZACgB,CAClB,KAAK/mB,YAAL,CAAoB,4CAApB,CACA,KAAKtlB,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKJ,WAAL,CAAmB,CAAnB,CACA,KAAK4kB,QAAL,CAAgB,CAAC,GAAI7tB,eAAJ,CAAW,CAAX,CAAc,CAAd,CAAD,CAAmB,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAAnB,CAAqC,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAArC,CAAhB,CAEA,KAAKmkF,WAAL,soEA6BA,KAAKv1D,SAAL,CAAiB,SAAjB,CACA,KAAKH,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,EAJO,CAKpBC,QAAQ,CAAE,CALU,CAAtB,CAD0B,CAS1B,GAAIzY,YAAO,CAACizE,iBAAZ,CAA8B,CAAEz3E,EAAE,CAAE,GAAN,CAA9B,CAA2C,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAA3C,CAT0B,CAU1B,GAAI+U,YAAO,CAACq1E,iBAAZ,CAA8B,CAAE75E,EAAE,CAAE,GAAN,CAA9B,CAA2C,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAA3C,CAV0B,CAW1B,GAAI+U,YAAO,CAACq1E,iBAAZ,CAA8B,CAAE75E,EAAE,CAAE,GAAN,CAA9B,CAA2C,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAA3C,CAX0B,CAY1B,GAAI+U,YAAO,CAACq1E,iBAAZ,CAA8B,CAAE75E,EAAE,CAAE,GAAN,CAA9B,CAA2C,CAAExQ,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,EAAnB,CAA3C,CAZ0B,CAc1B,GAAI+U,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAd0B,CAe1B,GAAIrG,YAAO,CAACmyE,gBAAZ,CAA6B,CAAE32E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAA7B,CAAmE,EAAnE,CAAuE,CAAvE,CAf0B,CAgB1B,GAAIrG,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CAhB0B,CAqB1B,GAAIrG,YAAO,CAACy1E,qBAAZ,CAAkC,CAAEj6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAlC,CArB0B,CAA5B,EAwBA,KAAKrG,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAACqyE,OAAZ,CACE,CAAE72E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,EAArB,CAAyBtC,KAAK,CAAE,CAAhC,CAAmC2pE,UAAU,CAAE,CAA/C,CADF,CAEE,CAFF,CAD4B,CAM5B,GAAIhwE,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAApB,CAAwD,EAAxD,CAN4B,CAO5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,EADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBkS,UAAU,CAAE,GAJQ,CAKpBC,WAAW,CAAE,EALO,CAMpBC,QAAQ,CAAE,CANU,CAAtB,CAP4B,CAgB5B,GAAIzY,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,EAAN,CAAUo3E,gBAAgB,CAAE,IAA5B,CADF,CAEE,CAAE5nF,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,CAAjB,CAFF,CAhB4B,CAA9B,EAsBA,KAAK+U,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAACsY,SAAZ,CAAsB,CACpB9c,EAAE,CAAE,GADgB,CAEpBmN,SAAS,CAAE,EAFS,CAGpBtC,KAAK,CAAE,CAHa,CAIpBmS,WAAW,CAAE,EAJO,CAKpBC,QAAQ,CAAE,EALU,CAMpBlY,IAAI,CAAE,IANc,CAAtB,CADwB,CAUxB,GAAIP,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,EAFF,CAGE,CAHF,CAVwB,CAexB,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,EAA3D,CAA+D,CAA/D,CAAkE,CAChEjB,KAAK,CAAE,CADyD,CAEhE4qE,UAAU,CAAE,CAFoD,CAGhEgC,QAAQ,CAAE,EAHsD,CAAlE,CAfwB,CAqBxB,GAAIhyE,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWo3E,gBAAgB,CAAE,IAA7B,CADF,CAEE,CAAE5nF,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,CAAjB,CAFF,CArBwB,CA0BxB,GAAI+U,YAAO,CAACm2E,YAAZ,CAAyB,CAAE36E,EAAE,CAAE,GAAN,CAAzB,CA1BwB,CA2BxB,GAAIwE,YAAO,CAACs2E,QAAZ,CAAqB,CAAE96E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,GAA3D,CA3BwB,CAA1B,EA8BA,KAAKrG,OAAL,CAAai3E,uBAAb,CAAqC,CACnC,GAAIj3E,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,CAArB,CAAwBtC,KAAK,CAAE,CAA/B,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CADmC,CAArC,EAOA,KAAK+U,OAAL,CAAao3E,qBAAb,CAAmC,CACjC,GAAIp3E,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CADiC,CAMjC,GAAI+U,YAAO,CAACm2E,YAAZ,CAAyB,CAAE36E,EAAE,CAAE,GAAN,CAAzB,CANiC,CAAnC,EASA,KAAKwE,OAAL,CAAak3E,kBAAb,CAAgC,CAC9B,GAAIl3E,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,EAAN,CAAUmN,SAAS,CAAE,CAArB,CAAwBtC,KAAK,CAAE,CAA/B,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAD8B,CAAhC,EAOA,KAAK+U,OAAL,CAAam3E,gBAAb,CAA8B,CAC5B,GAAIn3E,YAAO,CAACo1E,OAAZ,CACE,CAAE55E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAD4B,CAM5B,GAAI+U,YAAO,CAACm2E,YAAZ,CAAyB,CAAE36E,EAAE,CAAE,GAAN,CAAzB,CAN4B,CAA9B,EAQD,C,uDAEgB,CACf,8HAEA,GAAMs5E,aAAY,CAAG,GAAIzB,mBAAJ,EAArB,CACAyB,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIod,qBAAJ,EADqB,CAE7Bnf,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAIwd,sBAAJ,EADqB,CAE7Bvf,MAAM,CAAE,GAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI6d,yBAAJ,EADqB,CAE7B5f,MAAM,CAAE,EAFqB,CAA/B,EAKAi+E,YAAY,CAACG,WAAb,CAAyB,IAAzB,CAA+B,CAC7Br8E,MAAM,CAAE,GAAI8d,yBAAJ,EADqB,CAE7B7f,MAAM,CAAE,EAFqB,CAA/B,EAKA,KAAKmJ,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIkE,qBAAJ,EADuD,CAE7DqwC,aAAa,CAAE,CAF8C,CAA/D,EAID,C,qBAtLmB9oC,S,EAyLPkrB,2FAAf,E;;;;GCpLM6uC,oB,uFACJ,mBAAYvpE,IAAZ,CAAkBod,IAAlB,CAAwB,CAAC,0LACjBpd,IADgB,CACV,CACV,GAAI+8D,qCAAJ,CAAgC,CAAhC,CADU,CAEV,GAAIwE,yBAAJ,CAAsB,CAAtB,CAFU,CAGV,GAAIkB,yBAAJ,CAAsBrlD,IAAtB,CAHU,CAIV,GAAIujD,2BAAJ,CAAwB,EAAxB,CAJU,CAKV,GAAIO,6BAAJ,CAA0B,CACxB,CAAEnmB,KAAK,CAAE,CAAT,CAAYsmB,QAAQ,CAAE,CAAtB,CADwB,CAExB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAFwB,CAGxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,EAA3D,CAHwB,CAIxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CAJwB,CAKxB,CAAEtmB,KAAK,CAAE//D,IAAI,CAAC6D,KAAL,CAAW8F,mBAAmB,CAAG,GAAjC,CAAT,CAAgD08E,QAAQ,CAAE,CAAC,GAA3D,CALwB,CAA1B,CALU,CAYV,GAAIO,+BAAJ,CAA4B,CAA5B,CAZU,CAaV,GAAIoB,2BAAJ,CAAwB,IAAxB,CAA8B,MAA9B,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAA5C,CAbU,CAcV,GAAIS,2BAAJ,CAAwB,CAAxB,CAdU,CAeV,GAAIiC,0BAAJ,CAAuB,CAACr9D,qBAAD,CAAvB,CAAmC,CAAnC,CAAsC,EAAtC,CAA0C,EAA1C,CAfU,CAgBV,GAAI28D,+BAAJ,CAA4B,eAA5B,CAA6C,CAC3ClqD,IAAI,CAAE,CADqC,CAE3CsK,KAAK,CAAE,IAFoC,CAG3C/L,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAHoC,CAI3ClS,KAAK,CAAE,CAJoC,CAA7C,CAhBU,CADU,GAwBvB,C,uGAEgB,CACf,MAAO,YAAP,CACD,C,+DAEoB,CACnB,MAAO,oCAAP,CACD,C,uBAjCqBy9D,a,EAoCT2E,qEAAf,E;;;;GC1CM3uC,6B,wZACgB,CAClB,KAAKjnB,YAAL,CAAoB,UAApB,CACA,KAAKtlB,SAAL,CAAiB,CAAjB,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKK,SAAL,CAAiB,CAAjB,CACA,KAAKJ,WAAL,CAAmB,CAAnB,CACA,KAAK4kB,QAAL,CAAgB,CACd,GAAI7tB,eAAJ,CAAW,CAAX,CAAc,CAAd,CADc,CAEd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAFc,CAGd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAHc,CAId,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAJc,CAKd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CALc,CAMd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CANc,CAOd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAPc,CAQd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CARc,CASd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CATc,CAUd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAVc,CAWd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAXc,CAYd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAd,CAZc,CAad,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAbc,CAcd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAdc,CAed,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAf,CAfc,CAgBd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAhBc,CAiBd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAjBc,CAkBd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAlBc,CAmBd,GAAIA,eAAJ,CAAW,CAAX,CAAc,CAAC,CAAf,CAnBc,CAoBd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAC,CAAhB,CApBc,CAqBd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAC,CAAhB,CArBc,CAsBd,GAAIA,eAAJ,CAAW,CAAC,CAAZ,CAAe,CAAC,CAAhB,CAtBc,CAAhB,CAyBA,KAAKmkF,WAAL,IAEA,KAAKv1D,SAAL,CAAiB,UAAjB,CACA,KAAKH,SAAL,CAAiB,GAAjB,CAEA,KAAKthB,OAAL,CAAa62E,cAAb,CAA4B,CAC1B,GAAI72E,YAAO,CAAC8xE,mBAAZ,CAAgC,CAAEt2E,EAAE,CAAE,CAAN,CAASmN,SAAS,CAAE,EAApB,CAAwBtC,KAAK,CAAE,CAA/B,CAAhC,CAAoE,CAApE,CAAuE,CAAvE,CAD0B,CAE1B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAtB,CAF0B,CAA5B,EAKA,KAAKrG,OAAL,CAAa82E,gBAAb,CAA8B,CAC5B,GAAI92E,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CAD4B,CAE5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CAF4B,CAG5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CAH4B,CAI5B,GAAIrG,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAA9D,CAJ4B,CAM5B,GAAIrG,YAAO,CAACqyE,OAAZ,CAAoB,CAAE72E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAApB,CAA0D,CAA1D,CAN4B,CAQ5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnB,CAAyD,EAAzD,CAA6D,CAA7D,CAAgE,CAAhE,CAR4B,CAS5B,GAAIrG,YAAO,CAACoyE,MAAZ,CAAmB,CAAE52E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnB,CAAyD,EAAzD,CAA6D,CAA7D,CAAgE,CAAhE,CAT4B,CAU5B,GAAIrG,YAAO,CAAC6wE,OAAZ,CAAoB,CAAEr1E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAApB,CAA0D,EAA1D,CAV4B,CAW5B,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAtB,CAX4B,CAa5B,GAAI8sE,4BAAJ,CAAwB,CAAE33E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAxB,CAA8D,CAC5D,CAAErb,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAD4D,CAE5D,CAAED,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAF4D,CAA9D,CAb4B,CAiB5B,GAAIkoF,4BAAJ,CAAwB,CAAE33E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAxB,CAA8D,CAC5D,CAAErb,KAAK,CAAE,EAAT,CAAaC,GAAG,CAAE,GAAlB,CAD4D,CAE5D,CAAED,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,GAAnB,CAF4D,CAA9D,CAjB4B,CAA9B,EAuBA,KAAK+U,OAAL,CAAa+2E,YAAb,CAA0B,CACxB,GAAI/2E,YAAO,CAAC8xE,mBAAZ,CACE,CAAEt2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CADF,CAEE,CAFF,CAGE,CAHF,CADwB,CAOxB,GAAIrG,YAAO,CAAC01E,sBAAZ,CAAmC,CAAEl6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnC,CAPwB,CAQxB,GAAIrG,YAAO,CAAC01E,sBAAZ,CAAmC,CAAEl6E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAnC,CARwB,CASxB,GAAIrG,YAAO,CAACs2E,QAAZ,CAAqB,CAAE96E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,GAA3D,CATwB,CAUxB,GAAIrG,YAAO,CAACsY,SAAZ,CAAsB,CAAE9c,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAAtB,CAVwB,CAA1B,EAaA,KAAKrG,OAAL,CAAai3E,uBAAb,CAAqC,CACnC,GAAIK,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CADmC,CAKnC,GAAIqsF,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CALmC,CASnC,GAAIqsF,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,CAAT,CAAYC,GAAG,CAAE,GAAjB,CAFF,CATmC,CAcnC,GAAI+U,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAAC,CAAD,CAAI,CAAJ,CAA9D,CAdmC,CAArC,EAiBA,KAAKrG,OAAL,CAAak3E,kBAAb,CAAgC,CAC9B,GAAII,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAD8B,CAK9B,GAAIqsF,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAL8B,CAS9B,GAAIqsF,cAAJ,CACE,CAAE97E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,CAAtB,CAAyBtC,KAAK,CAAE,CAAhC,CADF,CAEE,CAAErb,KAAK,CAAE,GAAT,CAAcC,GAAG,CAAE,CAAnB,CAFF,CAT8B,CAc9B,GAAI+U,YAAO,CAAC+xE,QAAZ,CAAqB,CAAEv2E,EAAE,CAAE,GAAN,CAAWmN,SAAS,CAAE,EAAtB,CAA0BtC,KAAK,CAAE,CAAjC,CAArB,CAA2D,CAA3D,CAA8D,CAAC,CAAD,CAAI,CAAJ,CAA9D,CAd8B,CAAhC,EAgBD,C,uDAEgB,CACf,+HACA,GAAMqpD,SAAQ,CAAG,KAAK1vD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,CAAjB,CAEA6pD,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAC/BvH,MAAM,CAAE,GAAIyc,sBAAJ,EADuB,CAE/Bxe,MAAM,CAAE,EAFuB,CAAjC,EAKA64D,QAAQ,CAACvvD,WAAT,CAAqB,UAArB,CAAiC,CAC/BvH,MAAM,CAAE,GAAIkd,0BAAJ,EADuB,CAE/Bjf,MAAM,CAAE,CAFuB,CAAjC,EAKA,KAAKmJ,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAKA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAIA,KAAKrmD,OAAL,CAAa6F,aAAb,CAA2B,GAA3B,EAAgC1F,WAAhC,CAA4C,iBAA5C,CAA+D,CAC7D2R,IAAI,CAAE,GAAIuD,sBAAJ,EADuD,CAE7DgxC,aAAa,CAAE,CAF8C,CAA/D,EAID,C,sBAhJoB9oC,S,EAmJRorB,0FAAf,E;;;;ACtJA,GAAMktC,aAAM,6CAAQ0B,kBAAR,IAAeC,4BAAf,IAAgCC,oBAAhC,IAAyCC,0BAAzC,CAAZ,CACe7B,2DAAf,E;;ACJO,GAAM8B,kCAAgB,CAAG,QAAnBA,iBAAmB,CAAA98E,IAAI,CAAI,IAC9BonB,UAD8B,CAChBpnB,IADgB,CAC9BonB,SAD8B,CAEtC,GAAI,CAACA,SAAL,CAAgB,CACd,KAAM,IAAIhtB,MAAJ,CAAU,8CAAV,CAAN,CACD,CAED,GAAI,CACF,MAAO,IAAIuO,WAAK,CAACye,SAAD,CAAT,CAAqBpnB,IAArB,CAAP,CACD,CAAC,MAAOtJ,CAAP,CAAU,CACVuB,OAAO,CAAC4sD,KAAR,+CAAoDz9B,SAApD,QACA,KAAM1wB,EAAN,CACD,CACF,CAZM,CAcA,GAAMqmF,sCAAoB,CAAG,QAAvBA,qBAAuB,CAAA/8E,IAAI,CAAI,IAClConB,UADkC,CACpBpnB,IADoB,CAClConB,SADkC,CAE1C,GAAI,CAACA,SAAL,CAAgB,CACd,KAAM,IAAIhtB,MAAJ,CAAU,8CAAV,CAAN,CACD,CAED,GAAI,CACF,MAAO,IAAIuO,WAAK,CAACye,SAAD,CAAT,EAAP,CACD,CAAC,MAAO1wB,CAAP,CAAU,CACVuB,OAAO,CAAC4sD,KAAR,qDAA0Dz9B,SAA1D,QACA,KAAM1wB,EAAN,CACD,CACF,CAZM,C;;GCdDsmF,oB,yBACJ,mBAAYh8D,QAAZ,CAAsB,CAAC,0DACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKrY,KAAL,CAAa,EAAb,CACD,C,8FAEUs0E,K,CAAOC,K,CAAO,CACvB,MACE,MAAKl8D,QAAL,CAAcs1B,KAAd,CAAoB6mC,cAApB,CAAmCF,KAAnC,IACA,KAAKj8D,QAAL,CAAcs1B,KAAd,CAAoB6mC,cAApB,CAAmCD,KAAnC,CAFF,CAID,C,wCAEOh+E,I,CAAM,CACZ,GAAIA,IAAI,CAACyB,EAAL,EAAW,KAAK0/C,WAAL,CAAiBnhD,IAAI,CAACyB,EAAtB,CAAf,CAA0C,CACxC,KAAM,IAAIvG,MAAJ,CAAU,qCAAV,CAAN,CACD,CAED,KAAKuO,KAAL,CAAWrQ,IAAX,CAAgB4G,IAAhB,EACA,MAAO,KAAP,CACD,C,2CAEU,CACT,MAAO,MAAKyJ,KAAZ,CACD,C,qDAEe,CACd,MAAO,MAAKA,KAAL,CAAW7H,MAAX,CAAkB,SAAC5B,IAAD,QAAU,CAACA,IAAI,CAAC2J,WAAL,EAAX,EAAlB,CAAP,CACD,C,gDAEWlI,E,CAAI,CACd,MAAO,MAAKgI,KAAL,CAAW6E,IAAX,CAAgB,SAACtO,IAAD,QAAUA,KAAI,CAACyB,EAAL,GAAYA,EAAtB,EAAhB,CAAP,CACD,C,oDAEawgB,I,CAAM,CAClB,MAAO,MAAKxY,KAAL,CAAW7H,MAAX,CACL,SAAC5B,IAAD,QAAUA,KAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBv1B,IAApB,GAA6B,CAACjiB,IAAI,CAAC2J,WAAL,EAAxC,EADK,CAAP,CAGD,C,8DAEkBsY,I,CAAM,gBACvB,GAAMspB,KAAI,CAAG,KAAKzpB,QAAL,CAAcs1B,KAAd,CAAoB8mC,aAApB,CAAkCj8D,IAAlC,CAAb,CACA,GAAI,CAACspB,IAAD,EAASA,IAAI,CAACt7C,MAAL,GAAgB,CAA7B,CAAgC,CAC9B,MAAO,EAAP,CACD,CACD,GAAM4kE,KAAI,CAAGtpB,IAAI,CAAC/lC,GAAL,GAAWqvD,IAAxB,CAEA,MAAO,MAAKprD,KAAL,CAAW7H,MAAX,CACL,SAAC5B,IAAD,QACE,MAAI,CAAC8hB,QAAL,CAAcs1B,KAAd,CAAoByI,aAApB,CAAkC7/C,IAAlC,EAAwC60D,IAAxC,GAAiDA,IAAjD,EACA,CAAC70D,IAAI,CAAC2J,WAAL,EAFH,EADK,CAAP,CAKD,C,8DAEkBsY,I,CAAM,CACvB,GAAMk8D,UAAS,CAAG,KAAK1c,kBAAL,CAAwBx/C,IAAxB,CAAlB,CAEA,MAAO,MAAKxY,KAAL,CAAW7H,MAAX,CACL,SAAC5B,IAAD,QAAU,CAACm+E,SAAS,CAACl/E,QAAV,CAAmBe,IAAnB,CAAD,EAA6B,CAACA,IAAI,CAAC2J,WAAL,EAAxC,EADK,CAAP,CAGD,C,6CAEW,CACV,MAAO,MAAKF,KAAL,CAAW3P,GAAX,CAAe,SAACkG,IAAD,QAAUA,KAAI,CAAC+C,SAAL,EAAV,EAAf,CAAP,CACD,C,iDAEuB,IAAZ0G,MAAY,2DAAJ,EAAI,CACtB,KAAKA,KAAL,CAAaA,KAAK,CAAC3P,GAAN,CAAU,SAACmuB,QAAD,QAAc21D,kCAAgB,CAAC31D,QAAD,CAA9B,EAAV,CAAb,CAEA,MAAO,KAAP,CACD,C,yDAEiB,CAChB,KAAKoB,QAAL,GAAgBnwB,OAAhB,CAAwB,SAAC8G,IAAD,QAAUA,KAAI,CAACo+E,cAAL,EAAV,EAAxB,EACD,C,yBAGYN,sEAAf,E;;GC/EMO,gC,yBACJ,yBAAYv8D,QAAZ,CAAsB,CAAC,gEACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKotD,OAAL,CAAe,EAAf,CACD,C,gGAEQlvE,I,CAAM,CACb,MAAO,MAAKkvE,OAAL,CAAajwE,QAAb,CAAsBe,IAAI,CAACyB,EAA3B,CAAP,CACD,C,4CAESzB,I,CAAM,CACd,GAAI,KAAKghD,QAAL,CAAchhD,IAAd,CAAJ,CAAyB,CACvB,OACD,CAED,KAAKkvE,OAAL,CAAa91E,IAAb,CAAkB4G,IAAI,CAACyB,EAAvB,EACD,C,gDAEWzB,I,CAAM,CAChB,KAAKkvE,OAAL,CAAe,KAAKA,OAAL,CAAattE,MAAb,CAAoB,SAAAH,EAAE,QAAIA,GAAE,GAAKzB,IAAI,CAACyB,EAAhB,EAAtB,CAAf,CACD,C,6CAEW,CACV,MAAO,MAAKytE,OAAZ,CACD,C,iDAEsB,IAAXpuE,KAAW,2DAAJ,EAAI,CACrB,KAAKouE,OAAL,CAAepuE,IAAf,CAEA,MAAO,KAAP,CACD,C,+BAGYu9E,wFAAf,E;;AChCA,GAAMC,iBAAgB,CAAG,KAAzB,C,GAEMC,oC,yBACJ,2BAAYz9E,IAAZ,CAAkB,CAAC,kEACjB,KAAKkC,WAAL,CAAiBlC,IAAjB,EACD,C,kHAEgB5J,Q,CAAU,CACzB,GAAM1I,SAAQ,CAAG0I,QAAQ,CAACnF,UAAT,CAAoB,KAAKmF,QAAzB,CAAjB,CACA,GAAMsnF,cAAa,CAAG,KAAKC,OAAL,CAAezvF,IAAI,CAACE,GAAL,CAASV,QAAT,CAAmB,CAAnB,CAArC,CAEA,GAAMkwF,cAAa,CAAG,KAAKxnF,QAAL,CACnBwI,GADmB,CACfxI,QADe,EAEnBoD,SAFmB,GAGnB/B,cAHmB,CAGJimF,aAHI,CAAtB,CAKA,MAAOE,cAAP,CACD,C,iDAEsB,IAAX59E,KAAW,2DAAJ,EAAI,CACrB,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,IAArB,CACA,KAAKrB,IAAL,CAAYU,IAAI,CAACV,IAAL,EAAak+E,gBAAzB,CACA,KAAKK,IAAL,CAAY,WAAZ,CAAyB;AACzB,KAAKznF,QAAL,CAAgB,GAAImH,aAAJ,CAAWyC,IAAI,CAAC5J,QAAhB,CAAhB,CACA,KAAKqL,QAAL,CAAgB,GAAIlE,aAAJ,CAAWyC,IAAI,CAACyB,QAAhB,CAAhB,CACA,KAAKowC,QAAL,CAAgB,CAAhB,CAAmB;AACnB,KAAK/4C,MAAL,CAAc,KAAKglF,iBAAL,CAAyB,KAAKx+E,IAAL,GAAck+E,gBAArD,CAEA,MAAO,KAAP,CACD,C,6CAEW,CACV,MAAO,CACL78E,EAAE,CAAE,KAAKA,EADJ,CAELrB,IAAI,CAAE,KAAKA,IAFN,CAGLlJ,QAAQ,CAAE,KAAKA,QAHV,CAILqL,QAAQ,CAAE,KAAKA,QAJV,CAKL3I,MAAM,CAAE,KAAK+4C,QALR,CAMLgsC,IAAI,CAAE,KAAKA,IANN,CAAP,CAQD,C,iCAGYJ,8FAAf,E;;ACzCA,GAAMjuF,UAAC,CAAG,CACR,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CADQ,CAER,CAAC,EAAI,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAFQ,CAGR,CAAC,EAAI,EAAL,CAAS,EAAI,EAAb,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAHQ,CAIR,CAAC,KAAO,IAAR,CAAc,CAAC,IAAD,CAAQ,IAAtB,CAA4B,KAAO,IAAnC,CAAyC,CAAzC,CAA4C,CAA5C,CAJQ,CAKR,CAAC,IAAM,GAAP,CAAY,CAAC,CAAb,CAAgB,KAAO,GAAvB,CAA4B,CAAC,GAAD,CAAO,IAAnC,CAAyC,CAAzC,CALQ,CAMR,CAAC,CAAC,CAAD,CAAK,EAAN,CAAU,CAAV,CAAa,CAAC,IAAD,CAAQ,IAArB,CAA2B,KAAO,IAAlC,CAAwC,CAAC,EAAD,CAAM,EAA9C,CANQ,CAAV,CASA,GAAMuuF,GAAE,CAAG,CAAC,GAAK,GAAN,CAAW,CAAX,CAAc,KAAO,KAArB,CAA4B,MAAQ,KAApC,CAA2C,CAAC,CAAD,CAAK,EAAhD,CAAoD,EAAI,EAAxD,CAAX,CAEA,GAAMC,IAAG,CAAG,CAAC,GAAK,GAAN,CAAW,CAAX,CAAc,KAAO,IAArB,CAA2B,KAAO,IAAlC,CAAwC,CAAC,CAAD,CAAK,CAA7C,CAAgD,CAAhD,CAAZ,CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAQC,WAAR,QAAwBA,YAAW,CAAGD,KAAtC,EAApB,C,GAEME,gB,yBACJ,iBAAYhoF,QAAZ,CAAsBqL,QAAtB,CAAgC48E,cAAhC,CAAgDC,UAAhD,CAA4DC,EAA5D,CAAgE,CAAC,wDAC/D,KAAKC,SAAL,CAAepoF,QAAf,CAAyBqL,QAAzB,CAAmC48E,cAAnC,CAAmDC,UAAnD,CAA+DC,EAA/D,EACD,C,8GAEmBnoF,Q,CAAU,CAC5B,GAAMvG,EAAC,CAAG,KAAKwuF,cAAL,CAAoBz/E,GAApB,CAAwBxI,QAAxB,CAAV,CACA,MAAQ,MAAKkoF,UAAL,CAAkBpwF,IAAI,CAACE,GAAL,CAASyB,CAAC,CAACV,MAAF,EAAT,CAAqB,CAArB,CAAnB,CAA8CU,CAAC,CAAC9B,CAAvD,CACD,C,gEAEmBqI,Q,CAAU,CAC5B,GAAMvG,EAAC,CAAG,KAAKwuF,cAAL,CAAoBz/E,GAApB,CAAwBxI,QAAxB,CAAV,CACA,MAAQ,MAAKkoF,UAAL,CAAkBpwF,IAAI,CAACE,GAAL,CAASyB,CAAC,CAACV,MAAF,EAAT,CAAqB,CAArB,CAAnB,CAA8CU,CAAC,CAAC5B,CAAvD,CACD,C,gCAEGiwF,K,CAAO3kB,C,CAAG,CACZ,GAAIn5D,MAAK,CAAG,CAAZ,CACA,IAAK,GAAInR,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGivF,KAApB,CAA2BjvF,CAAC,EAA5B,CAAgC,CAC9BmR,KAAK,EAAI5Q,SAAC,CAAC0uF,KAAD,CAAD,CAASjvF,CAAT,EAAc,KAAK0L,CAAL,CAAO1L,CAAP,CAAUsqE,CAAV,CAAvB,CACD,CAED,MAAOn5D,MAAP,CACD,C,8BAEE89E,K,CAAO,CACR,MAAO,MAAKK,EAAL,EAAW,KAAK98E,QAAL,CAAc1T,CAAd,CAAkB,KAAK0wF,GAAL,CAASP,KAAT,CAAgB,IAAhB,CAA7B,CAAP,CACD,C,8BAEEA,K,CAAO,CACR,MAAO,MAAKK,EAAL,EAAW,KAAK98E,QAAL,CAAcxT,CAAd,CAAkB,KAAKwwF,GAAL,CAASP,KAAT,CAAgB,IAAhB,CAA7B,CAAP,CACD,C,gCAEGA,K,CAAO,CACT,MACE,MAAKK,EAAL,CACA,KAAKG,mBAAL,CACE,GAAInhF,aAAJ,CACE,KAAKnH,QAAL,CAAcrI,CAAd,CAAkB,KAAK0wF,GAAL,CAASP,KAAT,CAAgB,GAAhB,CADpB,CAEE,KAAK9nF,QAAL,CAAcnI,CAAd,CAAkB,KAAKwwF,GAAL,CAASP,KAAT,CAAgB,GAAhB,CAFpB,CADF,CAFF,CASD,C,gCAEGA,K,CAAO,CACT,MACE,MAAKK,EAAL,CACA,KAAKI,mBAAL,CACE,GAAIphF,aAAJ,CACE,KAAKnH,QAAL,CAAcrI,CAAd,CAAkB,KAAK0wF,GAAL,CAASP,KAAT,CAAgB,GAAhB,CADpB,CAEE,KAAK9nF,QAAL,CAAcnI,CAAd,CAAkB,KAAKwwF,GAAL,CAASP,KAAT,CAAgB,GAAhB,CAFpB,CADF,CAFF,CASD,C,4BAECA,K,CAAO3kB,C,CAAG,CACV,GAAM3tC,OAAM,CAAG,KAAKgzD,UAAL,CAAgBV,KAAhB,CAAuB3kB,CAAvB,CAAf,CACA,GAAI3tC,MAAM,GAAK,IAAf,CAAqB,CACnB,KAAKizD,QAAL,GACA,MAAOjzD,OAAP,CACD,CAED,KAAKkzD,SAAL,GACA,GAAI7jF,OAAM,CAAG,IAAb,CAEA,OAAQs+D,CAAR,EACE,IAAK,GAAL,CACEt+D,MAAM,CAAG,KAAK8jF,EAAL,CAAQb,KAAR,CAAT,CACA,MACF,IAAK,GAAL,CACEjjF,MAAM,CAAG,KAAK+jF,EAAL,CAAQd,KAAR,CAAT,CACA,MACF,IAAK,IAAL,CACEjjF,MAAM,CAAG,KAAKgkF,GAAL,CAASf,KAAT,CAAT,CACA,MACF,IAAK,IAAL,CACEjjF,MAAM,CAAG,KAAKikF,GAAL,CAAShB,KAAT,CAAT,CACA,MAZJ,CAeA,KAAKiB,QAAL,CAAcjB,KAAd,CAAqB3kB,CAArB,CAAwBt+D,MAAxB,EAEA,MAAOA,OAAP,CACD,C,8CAEUijF,K,CAAO3kB,C,CAAG,CACnB,GAAM14D,IAAG,CAAGo9E,WAAW,CAACC,KAAD,CAAQ3kB,CAAR,CAAvB,CACA,MAAO,MAAK6lB,KAAL,CAAWv+E,GAAX,IAAoB7S,SAApB,CAAgC,KAAKoxF,KAAL,CAAWv+E,GAAX,CAAhC,CAAkD,IAAzD,CACD,C,0CAEQq9E,K,CAAO3kB,C,CAAGt+D,M,CAAQ,CACzB,GAAM4F,IAAG,CAAGo9E,WAAW,CAACC,KAAD,CAAQ3kB,CAAR,CAAvB,CACA,KAAK6lB,KAAL,CAAWv+E,GAAX,EAAkB5F,MAAlB,CACD,C,4CAES7E,Q,CAAUqL,Q,CAAU48E,c,CAAgBC,U,CAAYC,E,CAAI,CAC5D,KAAKnoF,QAAL,CAAgBA,QAAhB,CACA,KAAKqL,QAAL,CAAgBA,QAAhB,CACA,KAAK48E,cAAL,CAAsBA,cAAtB,CACA,KAAKC,UAAL,CAAkBA,UAAlB,CACA,KAAKC,EAAL,CAAUA,EAAV,CACA,KAAKa,KAAL,CAAa,EAAb,CACA,KAAKP,QAAL,CAAgB,CAAhB,CACA,KAAKC,SAAL,CAAiB,CAAjB,CACA,MAAO,KAAP,CACD,C,0CAEQvlB,C,CAAG,CACV,GAAMt+D,OAAM,CAAG,EAAf,CACA,IAAK,GAAIhM,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CAC1BgM,MAAM,CAAChM,CAAD,CAAN,CAAY,KAAK0L,CAAL,CAAO1L,CAAP,CAAUsqE,CAAV,CAAZ,CACD,CAED,MAAOt+D,OAAP,CACD,C,gDAEWygC,M,CAAQ/gC,C,CAAG,CACrB,MAAO+gC,OAAM,CACV1iC,GADI,CACA,SAACkI,KAAD,CAAQjS,CAAR,QAAciS,MAAK,CAAGvG,CAAC,CAAC1L,CAAD,CAAvB,EADA,EAEJkR,MAFI,CAEG,SAAC4F,WAAD,CAAchW,OAAd,QAA0BgW,YAAW,CAAGhW,OAAxC,EAFH,CAEoD,CAFpD,CAAP,CAGD,C,8CAEUP,C,CAAGC,C,CAAG,CACf,MAAOD,EAAC,CAACwJ,GAAF,CAAM,SAACqmF,MAAD,CAASpwF,CAAT,QAAeowF,OAAM,CAAG5vF,CAAC,CAACR,CAAD,CAAzB,EAAN,CAAP,CACD,C,6CAEW,CACV,GAAMqwF,GAAE,CAAG,CACTvxF,CAAC,CAAE,KAAKwxF,QAAL,CAAc,GAAd,CADM,CAETtxF,CAAC,CAAE,KAAKsxF,QAAL,CAAc,GAAd,CAFM,CAGT1mB,EAAE,CAAE,KAAK0mB,QAAL,CAAc,IAAd,CAHK,CAITzmB,EAAE,CAAE,KAAKymB,QAAL,CAAc,IAAd,CAJK,CAAX,CAOA,GAAMC,UAAS,CAAG,GAAIjiF,aAAJ,CAChB,KAAKkiF,WAAL,CAAiB1B,EAAjB,CAAqBuB,EAAE,CAACvxF,CAAxB,CADgB,CAEhB,KAAK0xF,WAAL,CAAiB1B,EAAjB,CAAqBuB,EAAE,CAACrxF,CAAxB,CAFgB,CAAlB,CAKA,GAAMyxF,UAAS,CAAG,GAAIniF,aAAJ,CAChB,KAAKkiF,WAAL,CAAiB1B,EAAjB,CAAqBuB,EAAE,CAACzmB,EAAxB,CADgB,CAEhB,KAAK4mB,WAAL,CAAiB1B,EAAjB,CAAqBuB,EAAE,CAACxmB,EAAxB,CAFgB,CAAlB,CAKA,GAAMjU,MAAK,CAAG,GAAIztD,MAAK,CAACuoF,OAAV,CACZ,KAAKF,WAAL,CAAiB,KAAKxnD,UAAL,CAAgB8lD,EAAhB,CAAoBC,GAApB,CAAjB,CAA2CsB,EAAE,CAACvxF,CAA9C,CADY,CAEZ,KAAK0xF,WAAL,CAAiB,KAAKxnD,UAAL,CAAgB8lD,EAAhB,CAAoBC,GAApB,CAAjB,CAA2CsB,EAAE,CAACrxF,CAA9C,CAFY,CAGZ,KAAKwxF,WAAL,CAAiB,KAAKxnD,UAAL,CAAgB8lD,EAAhB,CAAoBC,GAApB,CAAjB,CAA2CsB,EAAE,CAACzmB,EAA9C,CAHY,CAIZ,KAAK4mB,WAAL,CAAiB,KAAKxnD,UAAL,CAAgB8lD,EAAhB,CAAoBC,GAApB,CAAjB,CAA2CsB,EAAE,CAACxmB,EAA9C,CAJY,EAKZ3pE,MALY,EAAd,CAOA,MAAO,CAAEqwF,SAAS,CAATA,SAAF,CAAaE,SAAS,CAATA,SAAb,CAAwB76B,KAAK,CAALA,KAAxB,CAAP,CACD,C,iDAEa,CACZ5sD,OAAO,CAACya,GAAR,CACE,QADF,CAEE,KAAKmsE,QAAL,CAAgB,KAAKC,SAFvB,CAGE,YAHF,CAIE,KAAKD,QAAL,EAAiB,KAAKA,QAAL,CAAgB,KAAKC,SAAtC,CAJF,CAKE,MALF,CAME,KAAKD,QANP,CAOE,OAPF,CAQE,KAAKC,SARP,EAUD,C,uBAGYV,iEAAf,E;;ACxLA,GAAMwB,QAAO,CAAG,GAAIxB,cAAJ,EAAhB,CAEA,GAAMyB,UAAS,CAAG,KAAlB,CACA,GAAMC,UAAS,CAAGD,SAAS,CAAG,GAA9B,C,GAEME,Q,yBACJ,aAAYzlC,WAAZ,CAAyB,CAAC,oDACxB,KAAKA,WAAL,CAAmBA,WAAnB,CACD,C,4HAE4BlkD,Q,CAAUqL,Q,CAAUE,I,CAAM,CACrD,GAAI48E,GAAE,CAAG,GAAT,CACA,GAAIyB,YAAW,CAAG,CAAlB,CAEA,GAAI5oC,UAAS,CAAG,CAAChhD,QAAQ,CAACoB,KAAT,EAAD,CAAhB,CACA;;;;;;;EASA,GAAM8E,OAAM,CAAG,KAAKg+C,WAAL,CAAiB2lC,eAAjB,CAAiC7pF,QAAjC,CAA2CuL,IAA3C,CAAf,CAEA,GAAI,CAACrF,MAAL,CAAa,CACX,GAAM6nC,YAAW,CAAG/tC,QAAQ,CAACpG,GAAT,CAAayR,QAAb,CAApB,CACA21C,SAAS,CAAC9+C,IAAV,CAAe6rC,WAAf,EACA,MAAO,CACL/tC,QAAQ,CAAE+tC,WADL,CAEL1iC,QAAQ,CAARA,QAFK,CAGL21C,SAAS,CAATA,SAHK,CAILqI,SAAS,CAAE,KAJN,CAAP,CAMD,CAED,GAAM6+B,WAAU,CAAGhiF,MAAM,CAACuhF,IAA1B,CACA,GAAMQ,eAAc,CAAG/hF,MAAM,CAAClG,QAA9B,CAEA,MAAO4pF,WAAW,CAAG,CAAd,EAAmBzB,EAAE,EAAI,CAAhC,CAAmC,CACjC,GAAIjiF,MAAM,EAAI+hF,cAAc,CAACptF,UAAf,CAA0BmF,QAA1B,EAAsC,GAApD,CAAyD,CACvDghD,SAAS,CAAC9+C,IAAV,CAAe+lF,cAAc,CAAC7mF,KAAf,EAAf,EACA,MAAO,CACLpB,QAAQ,CAAEioF,cAAc,CAAC7mF,KAAf,EADL,CAELiK,QAAQ,CAAE,GAAIlE,aAAJ,CAAW,CAAX,CAAc,CAAd,CAFL,CAGL65C,SAAS,CAATA,SAHK,CAILqI,SAAS,CAAE,IAJN,CAAP,CAMD,CATgC,0BAWOmgC,OAAO,CAC5CpB,SADqC,CAC3BpoF,QAD2B,CACjBqL,QADiB,CACP48E,cADO,CACSC,UADT,CACqBC,EADrB,EAErC2B,SAFqC,EAXP,CAWzBV,SAXyB,uBAWzBA,SAXyB,CAWdE,SAXc,uBAWdA,SAXc,CAWH76B,KAXG,uBAWHA,KAXG,CAcjC;AAEA,GAAIA,KAAK,CAAGg7B,SAAZ,CAAuB,CACrBtB,EAAE,CAAGA,EAAE,CAAG,GAAV,CACA,SACD,CAHD,IAGO,IAAI15B,KAAK,CAAGi7B,SAAZ,CAAuB,CAC5BvB,EAAE,CAAGA,EAAE,CAAG,CAAV,CACA,SACD,CAHM,IAGA,IAAIyB,WAAW,CAAGzB,EAAd,CAAmB,CAAvB,CAA0B,CAC/B,MACD,CAFM,IAEA,CACLnoF,QAAQ,CAAGA,QAAQ,CAACpG,GAAT,CAAawvF,SAAb,CAAX,CACA/9E,QAAQ,CAAGA,QAAQ,CAACzR,GAAT,CAAa0vF,SAAb,CAAX,CACAtoC,SAAS,CAAC9+C,IAAV,CAAelC,QAAQ,CAACoB,KAAT,EAAf,EAEA;AAEAwoF,WAAW,EAAIzB,EAAf,CACD,CACF,CAEDA,EAAE,CAAG,EAAIyB,WAAT,CACAA,WAAW,CAAG,CAAd,CAlEqD,2BAoEIJ,OAAO,CAC7DpB,SADsD,CAC5CpoF,QAD4C,CAClCqL,QADkC,CACxB48E,cADwB,CACRC,UADQ,CACIC,EADJ,EAEtD2B,SAFsD,EApEJ,CAoElCC,UApEkC,wBAoE7CX,SApE6C,CAoEXY,UApEW,wBAoEtBV,SApEsB,CAwErDtpF,QAAQ,CAAGA,QAAQ,CAACpG,GAAT,CAAamwF,UAAb,CAAX,CACA1+E,QAAQ,CAAGA,QAAQ,CAACzR,GAAT,CAAaowF,UAAb,CAAX,CACAhpC,SAAS,CAAC9+C,IAAV,CAAelC,QAAQ,CAACoB,KAAT,EAAf,EACA;;;;;;;;;MAUA,MAAO,CACLpB,QAAQ,CAARA,QADK,CAELqL,QAAQ,CAARA,QAFK,CAGL21C,SAAS,CAATA,SAHK,CAILqI,SAAS,CAAE,KAJN,CAAP,CAMD,C,mBAGYsgC,qDAAf,E;;GCxGMM,wB,yBACJ,qBAAYr/D,QAAZ,CAAsB,CAAC,4DACrB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKgJ,QAAL,CAAgB,EAAhB,CACA,KAAKs2D,GAAL,CAAW,GAAIP,UAAJ,CAAQ,IAAR,CAAX,CACD,C,mGAEa,CACZ,MAAO,MAAK/1D,QAAZ,CACD,C,4CAES6B,M,CAAQ,CAChB,KAAK7B,QAAL,CAAc1xB,IAAd,CAAmBuzB,MAAnB,EACD,C,wEAEuBz1B,Q,CAAUqL,Q,CAAUE,I,CAAM,CAChD,MAAO,MAAK2+E,GAAL,CAASC,4BAAT,CAAsCnqF,QAAtC,CAAgDqL,QAAhD,CAA0DE,IAA1D,CAAP,CACD,C,wDAEevL,Q,CAAUs2B,I,CAAM/qB,I,CAAM,CACpC,MAAO,MAAKqoB,QAAL,CAAc,CAAd,CAAP,CACD,C,6CAEW,CACV,MAAO,MAAKA,QAAL,CAAchxB,GAAd,CAAkB,SAAA6yB,MAAM,QAAIA,OAAM,CAAC5pB,SAAP,EAAJ,EAAxB,CAAP,CACD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKgqB,QAAL,CAAgBhqB,IAAI,CAAChH,GAAL,CAAS,SAAA4H,KAAK,QAAI,IAAI68E,uBAAJ,CAAsB78E,KAAtB,CAAJ,EAAd,CAAhB,CAEA,MAAO,KAAP,CACD,C,2BAGYy/E,4EAAf,E;;GCnCMG,0B,yBACJ,uBAAc,CAAC,6DACb,KAAKrkB,OAAL,CAAe,EAAf,CACD,C,qHAEoBx7D,E,CAAI,CACvB,MAAO,MAAKw7D,OAAL,CAAa3uD,IAAb,CAAkB,SAACoI,MAAD,QAAYA,OAAM,CAACjV,EAAP,GAAcA,EAA1B,EAAlB,CAAP,CACD,C,4DAEiBw7D,O,CAAS,CACzBA,OAAO,CAAG,GAAGvhE,MAAH,CAAUuhE,OAAV,CAAV,CAEA,KAAKA,OAAL,wDAAmB,KAAKA,OAAxB,+CAAoCA,OAApC,GACD,C,6DAEmB,CAClB,OAAO,6CAAI,KAAKA,OAAhB,EACD,C,6CAEW,CACV,MAAO,CACLA,OAAO,CAAE,KAAKA,OAAL,CAAanjE,GAAb,CAAiB,SAAC4c,MAAD,QAAYA,OAAM,CAAC3T,SAAP,EAAZ,EAAjB,CADJ,CAAP,CAGD,C,iDAEmC,IAAxBjC,KAAwB,2DAAjB,CAAEm8D,OAAO,CAAE,EAAX,CAAiB,CAClC,KAAKA,OAAL,CAAen8D,IAAI,CAACm8D,OAAL,CAAanjE,GAAb,CAAiB,SAAC4c,MAAD,QAC9B,IAAIq+C,mBAAJ,GAAoB/xD,WAApB,CAAgC0T,MAAhC,CAD8B,EAAjB,CAAf,CAIA,MAAO,KAAP,CACD,C,iDAEa,CACZ,KAAKumD,OAAL,CAAe,KAAKA,OAAL,CAAar7D,MAAb,CAAoB,SAAC8U,MAAD,QAAY,CAACA,MAAM,CAAC6qE,MAAP,EAAb,EAApB,CAAf,CACD,C,4BAGYD,+EAAf,E;;;;;GCtCME,oD,yBACJ,mCAAY3X,eAAZ,CAA6B1gC,MAA7B,CAAqClgB,QAArC,CAA+Cw4D,eAA/C,CAAgEv9E,IAAhE,CAAsE,CAAC,0EACrE,KAAK2lE,eAAL,CAAuBA,eAAvB,CACA,KAAK1gC,MAAL,CAAcA,MAAd,CACA,KAAKlgB,QAAL,CAAgBA,QAAhB,CACA,KAAKw4D,eAAL,CAAuBA,eAAvB,CACA,KAAKv9E,IAAL,CAAYA,IAAZ,CACD,C,mHAEc,CACb,MAAO,MAAKA,IAAL,EAAa,KAAKu9E,eAAL,CAAqB1lF,MAAzC,CACD,C,6CAEW,CACV,MAAO,CACLub,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAGL5gD,QAAQ,CAAE,KAAKA,QAHV,CAIL/kB,IAAI,CAAE,KAAKA,IAJN,CAKLilC,MAAM,CAAE,KAAKA,MALR,CAMLs4C,eAAe,CAAE,KAAKA,eAAL,CAAqB1+E,SAArB,EANZ,CAAP,CAQD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,KAAK5gD,QAAL,CAAgBnoB,IAAI,CAACmoB,QAArB,CACA,KAAK/kB,IAAL,CAAYpD,IAAI,CAACoD,IAAjB,CACA,KAAKilC,MAAL,CAAcroC,IAAI,CAACqoC,MAAnB,CACA,KAAKs4C,eAAL,CAAuB,GAAI5Z,uBAAJ,GAAsB7kE,WAAtB,CACrBlC,IAAI,CAAC2gF,eADgB,CAAvB,CAGA,MAAO,KAAP,CACD,C,yCAGYD,2HAAf,E;;GCpCME,0C,yBACJ,8BAAY7X,eAAZ,CAA6B7kC,aAA7B,CAA4CC,WAA5C,CAAyD1iC,QAAzD,CAAmE,CAAC,qEAClE,KAAKsnE,eAAL,CAAuBA,eAAvB,CACA,KAAK7kC,aAAL,CAAqBA,aAArB,CACA,KAAKC,WAAL,CAAmBA,WAAnB,CACA,KAAK1iC,QAAL,CAAgBA,QAAhB,CAEA,KAAK+kE,WAAL,CAAmB,EAAnB,CACD,C,wGAEW,CACV,MAAO,CACLhwD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAGL7kC,aAAa,CAAE,KAAKA,aAHf,CAILC,WAAW,CAAE,KAAKA,WAJb,CAKL1iC,QAAQ,CAAE,KAAKA,QALV,CAAP,CAOD,C,iDAEsB,IAAXzB,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,KAAK7kC,aAAL,CAAqB,GAAI3mC,aAAJ,CAAWyC,IAAI,CAACkkC,aAAhB,CAArB,CACA,KAAKC,WAAL,CAAmB,GAAI5mC,aAAJ,CAAWyC,IAAI,CAACmkC,WAAhB,CAAnB,CACA,KAAK1iC,QAAL,CAAgB,GAAIlE,aAAJ,CAAWyC,IAAI,CAACyB,QAAhB,CAAhB,CACA,MAAO,KAAP,CACD,C,oCAGYm/E,4GAAf,E;;GC/BMC,oD,yBACJ,mCAAY9X,eAAZ,CAA6B,CAAC,0EAC5B,KAAKA,eAAL,CAAuBA,eAAvB,CACD,C,6GAEW,CACV,MAAO,CACLvyD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAAP,CAID,C,iDAEsB,IAAX/oE,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,MAAO,KAAP,CACD,C,yCAGY8X,2HAAf,E;;GClBMC,4C,yBACJ,+BAAYz4C,MAAZ,CAAoB,CAAC,sEACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKm+B,WAAL,CAAmB,EAAnB,CACD,C,yGAEW,CACV,MAAO,CACLhwD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAELqqC,MAAM,CAAE,KAAKA,MAFR,CAAP,CAID,C,iDAEsB,IAAXroC,KAAW,2DAAJ,EAAI,CACrB,KAAKqoC,MAAL,CAAcroC,IAAI,CAACqoC,MAAnB,CACA,MAAO,KAAP,CACD,C,qCAGYy4C,+GAAf,E;;GCnBMC,kD,yBACJ,kCAAYhY,eAAZ,CAA6BpR,WAA7B,CAA0CC,UAA1C,CAAsD,CAAC,yEACrD,KAAKmR,eAAL,CAAuBA,eAAvB,CACA,KAAKpR,WAAL,CAAmBA,WAAnB,CACA,KAAKC,UAAL,CAAkBA,UAAlB,CACD,C,4GAEW,CACV,MAAO,CACLphD,aAAa,CAAE,KAAKnK,WAAL,CAAiBrO,IAD3B,CAEL+qE,eAAe,CAAE,KAAKA,eAFjB,CAGLpR,WAAW,CAAE,KAAKA,WAHb,CAILC,UAAU,CAAE,KAAKA,UAJZ,CAAP,CAMD,C,iDAEsB,IAAX53D,KAAW,2DAAJ,EAAI,CACrB,KAAK+oE,eAAL,CAAuB/oE,IAAI,CAAC+oE,eAA5B,CACA,KAAKpR,WAAL,CAAmB33D,IAAI,CAAC23D,WAAxB,CACA,KAAKC,UAAL,CAAkB53D,IAAI,CAAC43D,UAAvB,CACA,MAAO,KAAP,CACD,C,wCAGYmpB,wHAAf,E;;ACVO,GAAMC,iBAAgB,4CAC3BlY,sBAAsB,CAAtBA,gCAD2B,CAE3BzyD,oBAAoB,CAApBA,8BAF2B,CAG3BkzD,sBAAsB,CAAtBA,gCAH2B,CAI3BmX,yBAAyB,CAAzBA,mCAJ2B,CAK3BE,oBAAoB,CAApBA,8BAL2B,CAM3BC,yBAAyB,CAAzBA,mCAN2B,CAO3BrM,uBAAuB,CAAvBA,iCAP2B,CAQ3BpN,mBAAmB,CAAnBA,6BAR2B,CAS3Bb,qBAAqB,CAArBA,+BAT2B,CAU3Bua,qBAAqB,CAArBA,+BAV2B,CAW3BC,wBAAwB,CAAxBA,kCAX2B,CAY3BtZ,0BAA0B,CAA1BA,oCAZ2B,+BAa3BA,oCAb2B,CAAtB,C;;GCPDwZ,4B,yBACJ,wBAAc,CAAC,8DACb,KAAK5zE,OAAL,CAAe,EAAf,CACD,C,8FAEQzM,K,CAAO,CACd,KAAKyM,OAAL,CAAa/U,IAAb,CAAkBsI,KAAlB,EACD,C,6CAEW,CACV,MAAO,CACLyM,OAAO,CAAE,KAAKA,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QAAWA,MAAK,CAACqB,SAAN,EAAX,EAAjB,CADJ,CAAP,CAGD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,KAAKqN,OAAL,CAAerN,IAAI,CAACqN,OAAL,CACXrN,IAAI,CAACqN,OAAL,CAAarU,GAAb,CAAiB,SAAC4H,KAAD,QACf,IAAIogF,iBAAgB,CAACpgF,KAAK,CAAC4V,aAAP,CAApB,GAA4CtU,WAA5C,CAAwDtB,KAAxD,CADe,EAAjB,CADW,CAIX,EAJJ,CAMA,MAAO,KAAP,CACD,C,iDAEa,CACZ,KAAKyM,OAAL,CAAe,EAAf,CACD,C,0DAEgB6zE,a,CAAe,CAC9B,MAAO,MAAK7zE,OAAL,CACJvM,MADI,CACG,SAACF,KAAD,QAAWA,MAAK,WAAY8/E,oCAA5B,EADH,EAEJ5/E,MAFI,CAGH,SAACF,KAAD,QAAWA,MAAK,CAACmoE,eAAN,GAA0BmY,aAAa,CAACnY,eAAnD,EAHG,CAAP,CAKD,C,mDAEc,CACb,GAAM17D,QAAO,8CAAO,KAAKA,OAAZ,CAAb,CACA,GAAM8zE,aAAY,CAAG,EAArB,CAEA9zE,OAAO,CACJvM,MADH,CACU,SAACF,KAAD,QAAWA,MAAK,WAAYwmE,8BAA5B,EADV,EAEGhvE,OAFH,CAEW,SAACsvE,IAAD,CAAU,CACjB,GAAI9mE,MAAK,CAAGugF,YAAY,CAAC3zE,IAAb,CACV,SAAC4zE,OAAD,QAAaA,QAAO,CAACl5D,QAAR,GAAqBw/C,IAAI,CAACx/C,QAAvC,EADU,CAAZ,CAIA,GAAI,CAACtnB,KAAL,CAAY,CACVA,KAAK,CAAG,GAAI6mE,qCAAJ,CAA+BC,IAAI,CAACx/C,QAApC,CAAR,CACAi5D,YAAY,CAAC7oF,IAAb,CAAkBsI,KAAlB,EACD,CAEDA,KAAK,CAACg0E,QAAN,CAAelN,IAAf,EACD,CAbH,EAeA,GAAM2Z,gBAAe,CAAG,EAAxB,CAEAh0E,OAAO,CACJvM,MADH,CACU,SAACF,KAAD,QAAWA,MAAK,WAAYkoE,iCAA5B,EADV,EAEG1wE,OAFH,CAEW,SAACuzD,OAAD,CAAa,CACpB,GAAI/qD,MAAK,CAAGygF,eAAe,CAAC7zE,IAAhB,CACV,SAAC4zE,OAAD,QAAaA,QAAO,CAACl5D,QAAR,GAAqByjC,OAAO,CAACzjC,QAA1C,EADU,CAAZ,CAIA,GAAI,CAACtnB,KAAL,CAAY,CACVA,KAAK,CAAG,GAAIooE,wCAAJ,CAAkCrd,OAAO,CAACzjC,QAA1C,CAAR,CACAm5D,eAAe,CAAC/oF,IAAhB,CAAqBsI,KAArB,EACD,CAEDA,KAAK,CAACg0E,QAAN,CAAejpB,OAAf,EACD,CAbH,EAeA,MAAO,uDACF,KAAKt+C,OAAL,CAAavM,MAAb,CACD,SAACF,KAAD,QAAW,EAAEA,KAAK,WAAYwmE,8BAAnB,CAAX,EADC,CADE,EAIF+Z,YAJE,CAKFE,eALE,EAOJvgF,MAPI,CAOG,SAACF,KAAD,QAAWA,MAAK,CAAC4lE,WAAjB,EAPH,EAQJ9/D,IARI,CAQC,SAAClX,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAID,CAAC,CAACg3E,WAAF,CAAgB/2E,CAAC,CAAC+2E,WAAtB,CAAmC,CACjC,MAAO,EAAP,CACD,CAED,GAAIh3E,CAAC,CAACg3E,WAAF,CAAgB/2E,CAAC,CAAC+2E,WAAtB,CAAmC,CACjC,MAAO,CAAC,CAAR,CACD,CAED,MAAO,EAAP,CACD,CAlBI,CAAP,CAmBD,C,6BAGYya,uFAAf,E;;GC5FMK,kB,yBACJ,kBAAYthF,IAAZ,CAAkB,CAAC,yDACjB,KAAKkC,WAAL,CAAiBlC,IAAjB,EACD,C,2FAESuhF,M,CAAQ,CAChB,KAAKA,MAAL,CAAcA,MAAd,CACD,C,0CAEQtgE,K,CAAO,CACd,KAAKA,KAAL,CAAaA,KAAb,CACD,C,iDAEa,CACZ,KAAKtf,IAAL,GACD,C,4CAESwf,I,CAAM,CACd,GAAI,KAAKqgE,OAAL,CAAah0E,IAAb,CAAkB,SAAC8Z,MAAD,QAAYA,OAAM,CAAC3mB,EAAP,GAAcwgB,IAAI,CAACxgB,EAA/B,EAAlB,CAAJ,CAA0D,CACxD,OACD,CAED,KAAK6gF,OAAL,CAAalpF,IAAb,CAAkB6oB,IAAlB,EACD,C,kDAEYA,I,CAAM,CACjB,KAAKqgE,OAAL,CAAe,KAAKA,OAAL,CAAa1gF,MAAb,CAAoB,SAACwmB,MAAD,QAAYA,OAAM,CAAC3mB,EAAP,GAAcwgB,IAAI,CAACxgB,EAA/B,EAApB,CAAf,CACD,C,sDAEcwgB,I,CAAM,CACnB,MAAO,MAAKqgE,OAAL,CAAah0E,IAAb,CAAkB,SAAC8Z,MAAD,QAAYA,OAAM,CAAC3mB,EAAP,GAAcwgB,IAAI,CAACxgB,EAA/B,EAAlB,CAAP,CACD,C,sDAEcwgB,I,CAAM,CACnB,MAAO,MAAKsgE,eAAL,CAAqBtjF,QAArB,CAA8BgjB,IAAI,CAACxgB,EAAnC,CAAP,CACD,C,wDAEewgB,I,CAA4B,IAAtBugE,aAAsB,2DAAP,KAAO,CAC1C,GAAI,KAAKC,cAAL,CAAoBxgE,IAApB,CAAJ,CAA+B,CAC7B,OACD,CAED,GAAIugE,YAAY,EAAI,KAAK/4E,KAAL,CAAWy3D,aAAX,CAAyBj/C,IAAzB,EAA+BhyB,MAA/B,GAA0C,CAA9D,CAAiE,CAC/D,OACD,CAED,KAAKsyF,eAAL,CAAqBnpF,IAArB,CAA0B6oB,IAAI,CAACxgB,EAA/B,EACD,C,4DAEiBwgB,I,CAAM,CACtB,KAAKsgE,eAAL,CAAuB,KAAKA,eAAL,CAAqB3gF,MAArB,CAA4B,SAACH,EAAD,QAAQA,GAAE,GAAKwgB,IAAI,CAACxgB,EAApB,EAA5B,CAAvB,CACD,C,oEAEqBwgB,I,CAAM,CAC1B,GAAI,CAAC,KAAKnjB,IAAV,CAAgB,CACd,MAAO,mBAAP,CACD,CAED,GAAMs4C,MAAK,CAAG,KAAKA,KAAL,CAAWC,QAAX,EAAd,CAEA,GAAID,KAAK,CAACnnD,MAAN,CAAe,CAAnB,CAAsB,CACpB,MAAO,oCAAP,CACD,CAED,GAAMw/E,MAAK,CAAG,EAAd,CACAr4B,KAAK,CAACl+C,OAAN,CAAc,SAACqyC,IAAD,QAAWkkC,MAAK,CAAClkC,IAAI,CAACspB,IAAN,CAAL,CAAmB,IAA9B,EAAd,EAEA,GAAI9zD,MAAM,CAACC,IAAP,CAAYyuE,KAAZ,EAAmBx/E,MAAnB,CAA4B,CAAhC,CAAmC,CACjC,MAAO,oCAAP,CACD,CAED,GAAI01D,MAAK,CAAG72D,SAAZ,CAEAsoD,KAAK,CAACl+C,OAAN,CAAc,SAACqyC,IAAD,CAAU,CACtB,GAAMm3C,UAAS,CAAGn3C,IAAI,CAACo3C,QAAL,EAAlB,CACA,GAAID,SAAJ,CAAe,CACb/8B,KAAK,CAAG+8B,SAAR,CACD,CACF,CALD,EAOA,GAAI/8B,KAAJ,CAAW,CACT,MAAOA,MAAP,CACD,CAED,GAAI,CAACvO,KAAK,CAAC/7C,IAAN,CAAW,SAACkwC,IAAD,QAAUA,KAAI,CAAC4jC,MAAL,GAAgBltD,IAAI,CAACxgB,EAA/B,EAAX,CAAL,CAAoD,CAClD,MAAO,6CAAP,CACD,CAED,GAAI21C,KAAK,CAAC/7C,IAAN,CAAW,SAACkwC,IAAD,QAAUA,KAAI,CAAC4jC,MAAL,EAAe5jC,IAAI,CAAC4jC,MAAL,GAAgBltD,IAAI,CAACxgB,EAA9C,EAAX,CAAJ,CAAkE,CAChE,MAAO,kDAAP,CACD,CACF,C,uDAEgB,gBACf,MAAO,MAAKgI,KAAL,CACJ4f,QADI,GAEJznB,MAFI,CAEG,SAAC5B,IAAD,QAAU,MAAI,CAAC+gD,WAAL,CAAiBC,QAAjB,CAA0BhhD,IAA1B,CAAV,EAFH,CAAP,CAGD,C,oEAEqBiiB,I,CAAM,iBAC1B,MAAO,MAAKxY,KAAL,CACJ4f,QADI,GAEJznB,MAFI,CAGH,SAAC5B,IAAD,QAAU,OAAI,CAAC+gD,WAAL,CAAiBC,QAAjB,CAA0BhhD,IAA1B,GAAmCA,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBv1B,IAApB,CAA7C,EAHG,CAAP,CAKD,C,kDAEYjiB,I,CAAM,CACjB,MAAO,MAAK+gD,WAAL,CAAiBC,QAAjB,CAA0BhhD,IAA1B,CAAP,CACD,C,oDAEaA,I,CAAM,CAClB,KAAK+gD,WAAL,CAAiB6hC,SAAjB,CAA2B5iF,IAA3B,EACD,C,wDAEeA,I,CAAM,CACpB,KAAK+gD,WAAL,CAAiB8hC,WAAjB,CAA6B7iF,IAA7B,EACD,C,wDAEeiiB,I,CAAM,CACpB,MAAO,MAAKxY,KAAL,CAAW4f,QAAX,GAAsBznB,MAAtB,CAA6B,SAAC5B,IAAD,QAAUA,KAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBv1B,IAApB,CAAV,EAA7B,CAAP,CACD,C,6CAEW,CACV,MAAO,CACLxgB,EAAE,CAAE,KAAKA,EADJ,CAELsgB,KAAK,CAAE,KAAKA,KAFP,CAGLjjB,IAAI,CAAE,KAAKA,IAHN,CAIL2D,IAAI,CAAE,KAAKA,IAJN,CAKL3B,IAAI,CAAC,0CACHyhF,eAAe,CAAE,KAAKA,eADpB,EAEC,KAAKnrC,KAAL,CAAWr0C,SAAX,EAFD,EAGF6G,OAAO,CAAE,KAAKA,OAAL,CAAa7G,SAAb,EAHP,CAIF2oE,SAAS,CAAE,KAAKA,SAAL,CAAe3oE,SAAf,EAJT,CAKF85D,QAAQ,CAAE,KAAKA,QAAL,CAAc95D,SAAd,EALR,EALC,CAYL0G,KAAK,CAAE,KAAKA,KAAL,CAAW1G,SAAX,EAZF,CAaLg+C,WAAW,CAAE,KAAKA,WAAL,CAAiBh+C,SAAjB,EAbR,CAcL+/E,SAAS,CAAE,KAAKA,SAdX,CAeLT,MAAM,CAAE,KAAKA,MAfR,CAgBLC,OAAO,CAAE,KAAKA,OAAL,CAAaxoF,GAAb,CAAiB,SAACsuB,MAAD,QAAYA,OAAM,CAACrlB,SAAP,EAAZ,EAAjB,CAhBJ,CAAP,CAkBD,C,iDAEsB,IAAXjC,KAAW,2DAAJ,EAAI,CACrB,GAAMghB,SAAQ,CAAGhhB,IAAI,CAACA,IAAL,EAAa,EAA9B,CACA,KAAKW,EAAL,CAAUX,IAAI,CAACW,EAAL,EAAW,IAArB,CACA,KAAK3C,IAAL,CAAYgC,IAAI,CAAChC,IAAjB,CACA,KAAKijB,KAAL,CAAajhB,IAAI,CAACihB,KAAL,EAAcghE,UAA3B,CACA,KAAKtgF,IAAL,CAAY3B,IAAI,CAAC2B,IAAL,EAAa,CAAzB,CACA,KAAK6/E,OAAL,CAAexhF,IAAI,CAACwhF,OAAL,CACXxhF,IAAI,CAACwhF,OAAL,CAAaxoF,GAAb,CAAiB,SAACsuB,MAAD,QAAY,IAAIrD,WAAJ,GAAW/hB,WAAX,CAAuBolB,MAAvB,CAAZ,EAAjB,CADW,CAEX,EAFJ,CAGA,KAAKm6D,eAAL,CAAuBzgE,QAAQ,CAACygE,eAAT,EAA4B,EAAnD,CACA,KAAKnrC,KAAL,CAAa,GAAIo4B,eAAJ,CAAc,IAAd,EAAoBxsE,WAApB,CAAgC8e,QAAhC,CAAb,CACA,KAAKrY,KAAL,CAAa,GAAIq0E,eAAJ,CAAc,IAAd,EAAoB96E,WAApB,CAAgClC,IAAI,CAAC2I,KAArC,CAAb,CACA,KAAKs3C,WAAL,CAAmB,GAAIs9B,qBAAJ,CAAoB,IAApB,EAA0Br7E,WAA1B,CAAsClC,IAAI,CAACigD,WAA3C,CAAnB,CACA,KAAK+hC,SAAL,CAAiBhiF,IAAI,CAACgiF,SAAtB,CACA,KAAKT,MAAL,CAAcvhF,IAAI,CAACuhF,MAAL,EAAeW,KAA7B,CAEA,KAAKnmB,QAAL,CAAgB,GAAIykB,kBAAJ,GAAmBt+E,WAAnB,CAA+B8e,QAAQ,CAAC+6C,QAAxC,CAAhB,CACA,KAAKjzD,OAAL,CAAe,GAAIu3E,iBAAJ,CAAgB,IAAhB,EAAsBn+E,WAAtB,CAAkC8e,QAAQ,CAAClY,OAA3C,CAAf,CACA,KAAK8hE,SAAL,CAAiB,GAAIqW,wBAAJ,GAAoB/+E,WAApB,CAAgC8e,QAAQ,CAAC4pD,SAAzC,CAAjB,CAEA,MAAO,KAAP,CACD,C,qCAEO,CACN,MAAO,IAAI0W,SAAJ,CAAa,KAAKr/E,SAAL,EAAb,CAAP,CACD,C,oDAEakf,I,CAAM,iBAClB,KAAKxY,KAAL,CAAW4f,QAAX,GAAsBnwB,OAAtB,CAA8B,SAAC8G,IAAD,CAAU,CACtCA,IAAI,CAACiC,QAAL,CAAcymB,2BAAd,CAA0C,MAAI,CAACjmB,IAA/C,EACA,GAAMyf,KAAI,CAAGD,IAAI,EAAIjiB,IAAI,CAACooB,MAAL,CAAY+mB,EAAZ,CAAeltB,IAAf,CAArB,CACAjiB,IAAI,CAACyoB,aAAL,CAAmBxG,IAAnB,CAAyBC,IAAzB,EACD,CAJD,EAMA,MAAO,KAAP,CACD,C,yCAES,iBACR,KAAKzY,KAAL,CAAW4f,QAAX,GAAsBnwB,OAAtB,CAA8B,SAAC8G,IAAD,CAAU,CACtCA,IAAI,CAACyV,OAAL,CAAa,MAAI,CAAChT,IAAlB,EACD,CAFD,EAGD,C,iDAEa,iBACZ,KAAKA,IAAL,GACA,KAAK6/E,OAAL,CAAappF,OAAb,CAAqB,SAACkvB,MAAD,QAAY,OAAI,CAAC66D,eAAL,CAAqB76D,MAArB,CAA6B,IAA7B,CAAZ,EAArB,EACA,KAAKsjD,SAAL,CAAe58D,WAAf,GACA,KAAK+tD,QAAL,CAAc/tD,WAAd,GAEA,KAAKrF,KAAL,CACG4f,QADH,GAEGznB,MAFH,CAEU,SAAC5B,IAAD,QAAU,CAACA,IAAI,CAAC2J,WAAL,EAAX,EAFV,EAGGzQ,OAHH,CAGW,SAAC8G,IAAD,CAAU,CACjBA,IAAI,CAAC8O,WAAL,CAAiB,MAAI,CAACrM,IAAtB,EACA,MAAI,CAACygF,aAAL,CAAmBljF,IAAnB,EACD,CANH,EAOD,C,wBAGYoiF,mEAAf,E;;ACtMA,GAAMe,YAAW,CAAG32D,UAAU,CAAC,4BAAD,CAA9B,C,GAEM42D,4B,yBACJ,uBAAYzoE,aAAZ,CAA2Bjd,KAA3B,CAAkC,CAAC,8DACjC,KAAKid,aAAL,CAAqBA,aAArB,CACA,KAAKjd,KAAL,CAAaA,KAAb,CACA,KAAK+uD,OAAL,CAAe,IAAf,CAEA,KAAK5tD,MAAL,CAAc,GAAI3G,yBAAJ,EAAd,CACA,KAAKmrF,eAAL,CAAuB,GAAIhlD,yBAAJ,CAAoB,KAAKx/B,MAAzB,CAAiC,EAAjC,CAAvB,CACA,KAAKuvB,MAAL,GACA,KAAKymB,iBAAL,CAAyB,IAAzB,CACA,KAAKD,kBAAL,CAA0B,CAA1B,CAEA,KAAKxK,MAAL,CAAc,IAAd,CACD,C,uFAEM,CACL,GAAI,KAAKA,MAAT,CAAiB,CACf,OACD,CAED,KAAK1sC,KAAL,CAAW8xB,MAAX,CAAkB,KAAK3wB,MAAvB,EACA,KAAKurC,MAAL,CAAc,IAAd,CACD,C,mCAEM,CACL,GAAI,CAAC,KAAKA,MAAV,CAAkB,CAChB,OACD,CAED,KAAK1sC,KAAL,CAAW5M,GAAX,CAAe,KAAK+N,MAApB,EACA,KAAKurC,MAAL,CAAc,KAAd,CACD,C,4CAES93C,M,CAAQ,CAChB,KAAKuM,MAAL,CAAYswB,UAAZ,CAAuBgc,gBAAvB,CACE,GAAIjzC,wBAAJ,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CADF,CAEEhF,cAAc,CAACZ,MAAD,CAFhB,EAID,C,gDAEW4E,Q,CAAU,CACpB,KAAK2H,MAAL,CAAY3H,QAAZ,CAAqBkI,GAArB,CAAyBlI,QAAQ,CAACrI,CAAlC,CAAqCqI,QAAQ,CAACnI,CAA9C,CAAiDmI,QAAQ,CAACzH,CAA1D,EACA,MAAO,KAAP,CACD,C,6DAEmB,CAClB,GAAM87C,KAAI,CAAG,KAAKkhB,OAAL,CAAa9tD,QAAb,CAAsB2P,IAAtB,CAA2B,SAACw8B,KAAD,CAAW,CACjD,GAAI,CAACA,KAAK,CAAChsC,IAAX,CAAiB,CACf,MAAO,MAAP,CACD,CAED,GAAIgsC,KAAK,CAAChsC,IAAN,GAAe,cAAnB,CAAmC,CACjC,MAAO,KAAP,CACD,CACF,CARY,CAAb,CAUA,GAAI,CAACysC,IAAL,CAAW,CACT,MAAO,IAAIltC,aAAJ,EAAP,CACD,CAED,MAAO,IAAIA,aAAJ,CAAWktC,IAAI,CAACr0C,QAAhB,CAAP,CACD,C,iYAGqBisF,Y,QAAdzlF,K,eAEA+uD,O,CAAU/uD,KAAK,CAACA,KAAN,CAAYiB,QAAZ,CAAqB,CAArB,EAAwBrG,KAAxB,E,CAEhB,KAAKm0D,OAAL,CAAeA,OAAf,CAEMn2C,O,CAAU,KAAKqE,aAAL,CAAmB8xC,OAAnB,CAA2Bn2C,O,CACrC+W,K,CAAQ,GAAIn1B,sBAAJ,CACZoe,OAAO,CAACC,WAAR,CAAoB,CAApB,CADY,CAEZD,OAAO,CAACC,WAAR,CAAoB,CAApB,CAFY,CAGZD,OAAO,CAACC,WAAR,CAAoB,CAApB,CAHY,C,CAMd;AACA;AAEA;;;;;;;;;MAWM+sE,c,CAAiB,KAAKC,iBAAL,E,CAEvB,KAAKF,eAAL,CAAqBj2D,IAArB,CAA0Bl2B,QAA1B,CAAmCkI,GAAnC,CACEkkF,cAAc,CAACz0F,CADjB,CAEEy0F,cAAc,CAACv0F,CAFjB,CAGEu0F,cAAc,CAAC7zF,CAHjB,EAKMssC,S,CAAYpsC,wBAAwB,CAAC,KAAKgrB,aAAL,CAAmBlZ,EAApB,C,CAEpCqtB,I,CAAO,E,CACPwU,a,CAAgBvH,SAAS,GAAK,EAAd,CAAmB,G,CAEzC,KAAKsnD,eAAL,CACG1gD,WADH,GAEGjF,OAFH,CAEW5O,IAFX,EAGG4I,UAHH,CAGc,GAHd,EAIG8F,SAJH,CAIa,CAJb,CAIgB,CAJhB,EAKGC,UALH,CAKc,CALd,CAKiB,CALjB,EAMGF,QANH,CAMYlQ,KANZ,CAOE;AAPF,CAQGzqB,WARH,CAQe,CACX/T,CAAC,CAAE,CADQ,CAEXE,CAAC,CAAE,CAFQ,CAGXU,CAAC,CAAE,CAHQ,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqB,CAdrB,EAeA;AAEA,KAAKwlD,eAAL,CACG1gD,WADH,GAEGjF,OAFH,CAEW5O,IAFX,EAGG4I,UAHH,CAGc,GAHd,EAIG8F,SAJH,CAIa,CAJb,CAIgB,CAJhB,EAKGC,UALH,CAKc,CALd,CAKiB,CALjB,EAMGF,QANH,CAMYlQ,KANZ,CAOE;AAPF,CAQGzqB,WARH,CAQe,CACX/T,CAAC,CAAE,CADQ,CAEXE,CAAC,CAAE,CAFQ,CAGXU,CAAC,CAAE,CAHQ,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqB,CAdrB,EAeG2lD,OAfH,CAeWlgD,aAfX,CAe0B,IAf1B,EAiBA,KAAK+/C,eAAL,CACG1gD,WADH,GAEGjF,OAFH,CAEW5O,IAAI,CAAG,GAFlB,EAGG4I,UAHH,CAGc,GAHd,EAIG8F,SAJH,CAIa,CAJb,CAIgB,CAJhB,EAKGC,UALH,CAKc,CALd,CAKiB,CALjB,EAMGF,QANH,CAMY,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CANZ,CAOE;AAPF,CAQG0K,WARH,CAQe,CACX/T,CAAC,CAAE,CADQ,CAEXE,CAAC,CAAE,CAFQ,CAGXU,CAAC,CAAE,CAHQ,CARf,EAaGsuC,UAbH,CAaclB,YAbd,EAcGgB,iBAdH,CAcqB,CAdrB,EAgBI5qC,K,CAAQ,E,CACRwwF,M,CAAS,C,CACTC,W,CAAc,C,CAAG;AAErB,MAAOD,MAAM,EAAb,CAAiB,CACfxwF,KAAK,EAAI,EAAT,CAEA;;;;;;;;;;;;;;;;;;QAoBA,KAAKowF,eAAL,CACG1gD,WADH,GAEG9E,iBAFH,CAEqB,CAFrB,EAGGL,SAHH,CAGa,CAHb,CAGgB,CAHhB,EAIGC,UAJH,CAIc,CAJd,CAIiB,CAJjB,EAKGC,OALH,CAKW3B,SAAS,GAAK,EAAd,CAAmBjN,IAAI,CAAG,CALrC,EAMG4I,UANH,CAMc,GANd,EAOG90B,WAPH,CAOe,CACX/T,CAAC,CAAE,CADQ,CAEXE,CAAC,CAAE,CAFQ,CAGXU,CAAC,CAAE,CAHQ,CAPf,EAYG8tC,QAZH,CAYYlQ,KAZZ,CAaE;AAbF,CAcGuQ,QAdH,CAcY3qC,KAdZ,CAcmBywF,WAdnB,EAeG3lD,UAfH,CAechB,gBAfd,EAgBGymD,OAhBH,CAgBWlgD,aAhBX,CAgB0B,IAhB1B,EAiBD,CAED,KAAKzkC,MAAL,CAAY/N,GAAZ,CAAgB27D,OAAhB,E,mLAGe,IAARjvD,KAAQ,MAARA,IAAQ,CACf,GAAI,KAAKq3C,iBAAL,GAA2B,IAA/B,CAAqC,CACnC,KAAKA,iBAAL,CAAyBrmB,IAAI,CAACD,GAAL,EAAzB,CACD,CAED,GAAIo1D,UAAS,CAAGn1D,IAAI,CAACD,GAAL,GAAa,KAAKsmB,iBAAlC,CAEA,KAAKD,kBAAL,EAA2B+uC,SAA3B,CAEA,KAAKN,eAAL,CAAqBtgD,MAArB,CAA4B,CAC1BltC,KAAK,CAAE,CADmB,CAE1BqL,KAAK,CAAE,KAAK0zC,kBAFc,CAG1BvY,IAAI,CAAE,CAHoB,CAI1B7+B,IAAI,CAAEA,IAJoB,CAA5B,EAOA,KAAKq3C,iBAAL,CAAyBrmB,IAAI,CAACD,GAAL,EAAzB,CACD,C,yCAES,CACR,KAAK7wB,KAAL,CAAW8xB,MAAX,CAAkB,KAAK3wB,MAAvB,EACD,C,sCAEM8b,a,CAAe,CACpB,KAAKA,aAAL,CAAqBA,aAArB,CACD,C,6BAGYyoE,mFAAf,E;;GCrPMQ,0C,yBACJ,8BAAYlmF,KAAZ,CAAmB,CAAC,qEAClB,KAAKA,KAAL,CAAaA,KAAb,CAEA,KAAKkyC,KAAL,CAAa,EAAb,CACD,C,sGAEU,CACT,MAAO,MAAKA,KAAZ,CACD,C,wCAEOnuC,E,CAAI,CACV,MAAOsN,QAAO,CAAC,KAAK80E,WAAL,CAAiBpiF,EAAjB,CAAD,CAAd,CACD,C,sEAEsBiV,M,CAAQ,CAC7B,GAAIvZ,KAAI,CAAG,KAAK0mF,WAAL,CAAiBntE,MAAM,CAACjV,EAAxB,CAAX,CACA,GAAI,CAACtE,IAAL,CAAW,CACTA,IAAI,CAAG,GAAIimF,oBAAJ,CAAkB1sE,MAAlB,CAA0B,KAAKhZ,KAA/B,CAAP,CACA,KAAKkyC,KAAL,CAAWx2C,IAAX,CAAgB+D,IAAhB,EACD,CAED,MAAOA,KAAP,CACD,C,gDAEWsE,E,CAAI,CACd,MAAO,MAAKmuC,KAAL,CAAWthC,IAAX,CAAgB,SAAAnR,IAAI,QAAIA,KAAI,CAACwd,aAAL,CAAmBlZ,EAAnB,GAA0BA,EAA9B,EAApB,CAAP,CACD,C,sCAEMyqC,a,CAAe,CACpB,KAAK0D,KAAL,CAAW12C,OAAX,CAAmB,SAAAiE,IAAI,QAAIA,KAAI,CAAC4lC,MAAL,CAAYmJ,aAAZ,CAAJ,EAAvB,EACD,C,oCAGY03C,uGAAf,E;;GCdME,4B,yBACJ,uBAAYjxC,OAAZ,CAAqB5D,WAArB,CAAkC/0C,mBAAlC,CAAuDw7C,aAAvD,CAAsE,CAAC,8DACrE,KAAK7C,OAAL,CAAeA,OAAf,CACA,KAAK5D,WAAL,CAAmBA,WAAnB,CACA,KAAK6B,iBAAL,CAAyB,IAAzB,CACA,KAAKwE,oBAAL,CAA4B,IAA5B,CACA,KAAKyrB,iCAAL,CAAyC,IAAzC,CACA,KAAKgjB,QAAL,CAAgB,EAAhB,CAEA,KAAK/hC,aAAL,CAAqB,IAArB,CACA,KAAK9nD,mBAAL,CAA2BA,mBAA3B,CACA,KAAK8pF,iBAAL,CAAyB,IAAzB,CACA,KAAKtgF,eAAL,CAAuB,GAAI0F,yBAAJ,EAAvB,CACA,KAAKypD,iBAAL,CAAyB,GAAIzpC,yBAAJ,EAAzB,CACA,KAAKuuC,oBAAL,CAA4B,GAAItB,4BAAJ,EAA5B,CACA,KAAKngB,mBAAL,CAA2B,IAA3B,CACA,KAAK+tC,eAAL,CAAuB,IAAvB,CACA,KAAKC,UAAL,CAAkB,GAAIt6D,iBAAJ,EAAlB,CACA,KAAK8rB,aAAL,CAAqBA,aAArB,CACA,KAAKA,aAAL,CAAmBvhC,IAAnB,CAAwB,IAAxB,EACA,KAAKzW,KAAL,CAAa,IAAb,CACA,KAAKqoC,gBAAL,CAAwB,IAAxB,CACA,KAAKtoC,MAAL,CAAc,IAAd,CAEA,KAAK0mF,aAAL,CAAqB,GAAIxV,oBAAJ,EAArB,CACD,C,sFAEIjxE,K,CAAOqoC,gB,CAAkBtoC,M,CAAQ,CACpC,KAAKC,KAAL,CAAaA,KAAb,CACA,KAAKqoC,gBAAL,CAAwBA,gBAAxB,CACA,KAAKtoC,MAAL,CAAcA,MAAd,CAEA,KAAKqzC,iBAAL,CAAyB,GAAI1B,uBAAJ,CAAsB1xC,KAAtB,CAA6B,KAAKuxC,WAAlC,CAAzB,CACA,KAAKqG,oBAAL,CAA4B,GAAIsuC,0BAAJ,CAAyBlmF,KAAzB,CAA5B,CACA,KAAKqjE,iCAAL,CAAyC,GAAI/uB,oDAAJ,CACvCt0C,KADuC,CAEvC,KAAKozC,iBAFkC,CAGvC,KAAK7B,WAHkC,CAAzC,CAKA,KAAK+0C,iBAAL,CAAyB,GAAIpxC,6BAAJ,CACvB,KAAKC,OADkB,CAEvB,KAAKnvC,eAFkB,CAAzB,CAKA,KAAKwyC,mBAAL,CAA2B,GAAI3C,6BAAJ,CACzB71C,KADyB,CAEzB,KAAKozC,iBAFoB,CAGzB,KAAK7B,WAHoB,CAA3B,CAKA,KAAKg1C,eAAL,CAAuB,GAAI1xC,yBAAJ,CAAoB70C,KAApB,CAAvB,CAEA,KAAKm1C,OAAL,CAAauxC,gBAAb,CAA8B,IAA9B,EACD,C,iDAEa,CACZ,KAAKpiC,aAAL,CAAmBtD,UAAnB,GACA,KAAKsD,aAAL,CAAqB,IAArB,CAEA,KAAKqiC,oBAAL,GACD,C,iDAEa,CACZ,GAAMniC,UAAS,CAAG,KAAKiiC,aAAL,CAAmBG,8BAAnB,EAAlB,CAEA,GAAI,CAACpiC,SAAL,CAAgB,CACd,OACD,CAED,KAAKqiC,qBAAL,CAA2B9V,0CAA3B,EACA,KAAKjkE,UAAL,CAAgB,SAAhB,CAA2B03C,SAA3B,EACD,C,wDAEepgC,Q,CAAU,CACxBjtB,MAAM,CAACitB,QAAP,CAAkB,KAAKqiE,aAAvB,CACA,KAAKA,aAAL,CAAmBK,UAAnB,CAA8B1iE,QAA9B,EACA,KAAKuiE,oBAAL,GACD,C,oDAEaniC,S,CAAW,CACvB,KAAKuiC,iBAAL,CAAuBviC,SAAvB,EACD,C,4DAEiBA,S,CAAW,CAC3B,KAAKiiC,aAAL,CAAmBK,UAAnB,CAA8BtiC,SAAS,CAACA,SAAS,CAACjyD,MAAV,CAAmB,CAApB,CAAvC,EACA,GAAM2+E,QAAO,8CAAO1sB,SAAP,CAAb,CACA0sB,OAAO,CAAC8V,MAAR,CAAe,CAAC,CAAhB,CAAmB,CAAnB,EACA,KAAKP,aAAL,CAAmBQ,UAAnB,CAA8B/V,OAA9B,EAEA,GAAI,CAAC,KAAK5sB,aAAN,EAAuB,KAAKA,aAAL,CAAmB4iC,UAAnB,EAA3B,CAA4D,CAC1D,KAAKL,qBAAL,CAA2B9V,0CAA3B,EACD,CAED,GAAI,KAAKzsB,aAAT,CAAwB,CACtB,KAAKx3C,UAAL,CAAgB,SAAhB,CAA2B03C,SAA3B,EACD,CACF,C,8CAEUpjD,I,CAAMmK,O,CAAS,CACxB,GAAI,CAAC,KAAK+4C,aAAN,EAAuB,KAAKA,aAAL,CAAmBzN,QAA9C,CAAwD,CACtD,OACD,CAED,KAAKyN,aAAL,CAAmB6iC,OAAnB,CAA2B/lF,IAA3B,CAAiCmK,OAAjC,EACA,KAAK6nC,iBAAL,CAAuB+zC,OAAvB,CAA+B/lF,IAA/B,CAAqCmK,OAArC,EACD,C,+CAEY,CACX,KAAK+4C,aAAL,CAAmBskB,UAAnB,CAA8B,KAAK5wB,aAAnC,EACA,MAAO,MAAK6uC,qBAAL,CAA2Bne,kCAA3B,CAAP,CACD,C,sCAEM1oE,K,CAAOxD,mB,CAAqBsD,I,CAAM,CACvC,GAAI,CAAC,KAAKwkD,aAAN,EAAuB,KAAKA,aAAL,CAAmBzN,QAA9C,CAAwD,CACtD,OACD,CAED,KAAKyN,aAAL,CAAmBjf,MAAnB,CAA0B7oC,mBAA1B,CAA+CwD,KAA/C,CAAsDF,IAAtD,EACA,KAAKujE,iCAAL,CAAuCh+B,MAAvC,CAA8CvlC,IAA9C,EACA,KAAKq1C,OAAL,CAAa9P,MAAb,GACD,C,mEAEsB,CACrB,GAAMjhB,SAAQ,CAAG,KAAKqiE,aAAL,CAAmBW,UAAnB,EAAjB,CAEA,GAAI,KAAK9iC,aAAL,EAAsB,CAAC,KAAKA,aAAL,CAAmB4iC,UAAnB,EAA3B,CAA4D,CAC1D,OACD,CAED,GAAI9iE,QAAQ,CAACugE,MAAT,GAAoB0C,KAAxB,CAA0C,CACxC,MAAO,MAAKR,qBAAL,CAA2B5uC,gCAA3B,CAA+C7zB,QAA/C,CAAP,CACD,CAED,GACE,CAAC,KAAKmtB,WAAN,EACA,CAACntB,QAAQ,CAACkjE,cAAT,CAAwB,KAAK/1C,WAA7B,CADD,EAEA,KAAK4D,OAAL,CAAaoyC,QAAb,EAFA,EAGAnjE,QAAQ,CAACugE,MAAT,GAAoB0C,QAJtB,CAKE,CACA,MAAO,MAAKR,qBAAL,CAA2Bpe,iCAA3B,CAAgDrkD,QAAhD,CAAP,CACD,CAED,GAAI,CAACA,QAAQ,CAAC2gE,cAAT,CAAwB,KAAKxzC,WAA7B,CAAL,CAAgD,CAC9C,MAAO,MAAKs1C,qBAAL,CAA2Bne,kCAA3B,CAAiDtkD,QAAjD,CAAP,CACD,CAED,GAAIA,QAAQ,CAACC,KAAT,GAAmBmjE,UAAvB,CAA6C,CAC3C,MAAO,MAAKX,qBAAL,CAA2Bte,qCAA3B,CAAoDnkD,QAApD,CAAP,CACD,CAED,GAAI,CAACA,QAAQ,CAAC2gE,cAAT,CAAwB,KAAKxzC,WAA7B,CAAL,CAAgD,CAC9C,MAAO,MAAKs1C,qBAAL,CAA2Bne,kCAA3B,CAAiDtkD,QAAjD,CAAP,CACD,CAED,MAAO,MAAKyiE,qBAAL,CAA2Ble,+BAA3B,CAA8CvkD,QAA9C,CAAP,CACD,C,oEAEqBkgC,a,CAAe,CACnC,GAAMlgC,SAAQ,CAAG,KAAKqiE,aAAL,CAAmBW,UAAnB,EAAjB,CAEA,KAAKjyC,OAAL,CAAaxkB,MAAb,CAAoBvM,QAApB,EACA,KAAKgvB,iBAAL,CAAuBziB,MAAvB,CAA8BvM,QAA9B,EACA,KAAKpe,eAAL,CAAqB2qB,MAArB,CAA4BvM,QAA5B,CAAsC,IAAtC,EACA,KAAKo0B,mBAAL,CAAyB7nB,MAAzB,CAAgCvM,QAAhC,EACA,KAAKmiE,eAAL,CAAqB51D,MAArB,CAA4BvM,QAAQ,CAAClY,OAArC,EACA,KAAKipD,iBAAL,CAAuBxkC,MAAvB,CAA8BvM,QAA9B,EACA,KAAK61C,oBAAL,CAA0BtpC,MAA1B,CAAiCvM,QAAjC,EAEA,GAAI,KAAKkgC,aAAL,EAAsB,KAAKA,aAAL,WAA8BA,cAAxD,CAAuE,CACrE,KAAKA,aAAL,CAAmB3zB,MAAnB,CAA0BvM,QAA1B,EACA,OACD,CAED,GAAI,KAAKkgC,aAAT,CAAwB,CACtB,KAAKA,aAAL,CAAmBtD,UAAnB,GACD,CAED,KAAKsD,aAAL,CAAqB,GAAIA,cAAJ,CAAkB,KAAKmjC,WAAL,EAAlB,CAArB,CACA,KAAKnjC,aAAL,CAAmB/M,QAAnB,GAA8B5mB,MAA9B,CAAqCvM,QAArC,EACD,C,iDAEa,CACZ,MAAO,CACLoiE,UAAU,CAAE,KAAKA,UADZ,CAELpzC,iBAAiB,CAAE,KAAKA,iBAFnB,CAGLwE,oBAAoB,CAAE,KAAKA,oBAHtB,CAILyrB,iCAAiC,CAAE,KAAKA,iCAJnC,CAKLrjE,KAAK,CAAE,KAAKA,KALP,CAMLsmF,iBAAiB,CAAE,KAAKA,iBANnB,CAOLtgF,eAAe,CAAE,KAAKA,eAPjB,CAQLxJ,mBAAmB,CAAE,KAAKA,mBARrB,CASL24C,OAAO,CAAE,KAAKA,OATT,CAUL5D,WAAW,CAAE,KAAKA,WAVb,CAWLyG,aAAa,CAAE,KAAKA,aAXf,CAYLQ,mBAAmB,CAAE,KAAKA,mBAZrB,CAaL2c,iBAAiB,CAAE,KAAKA,iBAbnB,CAcL3tB,wBAAwB,CAAE,KAAKa,gBAd1B,CAeL+a,UAAU,CAAE,KAAKrjD,MAfZ,CAgBLk6D,oBAAoB,CAAE,KAAKA,oBAhBtB,CAAP,CAkBD,C,+CAEY,CAAE,C,6BAGFmsB,mFAAf,E;;GClOMsB,8B,CACJ,wBAAYC,IAAZ,CAAkBzvF,IAAlB,CAAwB0F,GAAxB,CAA4C,IAAfqxB,OAAe,2DAAN,IAAM,gEAC1C,KAAK04D,IAAL,CAAYA,IAAZ,CACA,KAAKzvF,IAAL,CAAYA,IAAZ,CACA,KAAK0F,GAAL,CAAWA,GAAX,CACA,KAAKqxB,MAAL,CAAcA,MAAd,CACD,C,CAGYy4D,sFAAf,E;;GCTME,0B,yBACJ,sBAAYC,QAAZ,CAAsB,CAAC,kEA4CvBC,UA5CsB,CA4CT,SAASrxF,KAAT,CAAgB,CAC3B,MAAO4M,OAAM,CAACC,IAAP,CAAY,KAAKukF,QAAjB,EAA2Bj3E,IAA3B,CAAgC,SAASy/B,MAAT,CAAiB,CACtD,GAAI03C,IAAG,CAAG,KAAKF,QAAL,CAAcx3C,MAAd,CAAV,CACA,GAAI,CAAC03C,GAAD,EAAQ,CAACA,GAAG,CAACC,OAAjB,CAA0B,CACxB,MAAO,MAAP,CACD,CAED,MACED,IAAG,CAACC,OAAJ,GAAgBvxF,KAAK,CAACuxF,OAAtB,EACAD,GAAG,CAACE,QAAJ,GAAiBxxF,KAAK,CAACwxF,QADvB,EAEAF,GAAG,CAACG,MAAJ,GAAezxF,KAAK,CAACyxF,MAFrB,EAGAH,GAAG,CAACI,OAAJ,GAAgB1xF,KAAK,CAAC0xF,OAHtB,EAIAJ,GAAG,CAACK,OAAJ,GAAgB3xF,KAAK,CAAC2xF,OALxB,CAOD,CAbM,CAaJ,IAbI,CAAP,CAcD,CA3DqB,CACpB,KAAKC,QAAL,CAAcR,QAAd,EACD,C,8FAEuB,IAAfA,SAAe,2DAAJ,EAAI,CACtB,KAAKA,QAAL,CAAgB,CACdS,SAAS,CAAET,QAAQ,CAACS,SAAT,EAAsB,CAC/BN,OAAO,CAAE,EADsB,CAE/BC,QAAQ,CAAE,KAFqB,CAG/BC,MAAM,CAAE,KAHuB,CAI/BC,OAAO,CAAE,KAJsB,CAK/BC,OAAO,CAAE,KALsB,CADnB,CAQdG,cAAc,CAAEV,QAAQ,CAACU,cAAT,EAA2B,CACzCP,OAAO,CAAE,EADgC,CAEzCC,QAAQ,CAAE,KAF+B,CAGzCC,MAAM,CAAE,KAHiC,CAIzCC,OAAO,CAAE,KAJgC,CAKzCC,OAAO,CAAE,KALgC,CAR7B,CAedI,WAAW,CAAEX,QAAQ,CAACW,WAAT,EAAwB,CACnCR,OAAO,CAAE,EAD0B,CAEnCC,QAAQ,CAAE,KAFyB,CAGnCC,MAAM,CAAE,KAH2B,CAInCC,OAAO,CAAE,KAJ0B,CAKnCC,OAAO,CAAE,KAL0B,CAfvB,CAsBdK,oBAAoB,CAAE,GAtBR,CAAhB,CAwBD,C,gCAEGxkF,G,CAAKK,K,CAAO,CACd,GAAI,KAAKujF,QAAL,CAAc5jF,GAAd,IAAuB7S,SAA3B,CAAsC,CACpC,KAAM,IAAIoM,MAAJ,CAAU,8BAAgCyG,GAAhC,CAAsC,GAAhD,CAAN,CACD,CAED5I,OAAO,CAACya,GAAR,CAAY,aAAZ,CAA2B7R,GAA3B,CAAgC,IAAhC,CAAsCK,KAAtC,CAA6C,MAAOA,MAApD,EACA,KAAKujF,QAAL,CAAc5jF,GAAd,EAAqBK,KAArB,CACD,C,mCAEM,CACLokF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAe,KAAKhB,QAApB,CAAjC,EACD,C,mCAmBM,CACL,GAAIA,SAAQ,CAAGa,YAAY,CAACI,OAAb,CAAqB,UAArB,GAAoC,IAAnD,CACA,KAAKT,QAAL,CAAcO,IAAI,CAACG,KAAL,CAAWlB,QAAX,CAAd,EACA,MAAO,KAAP,CACD,C,4BAGYD,+EAAf,E;;ACrEO,GAAMoB,kBAAiB,CAAG,UAA1B,CACA,GAAMC,mBAAkB,CAAG,WAA3B,CACA,GAAMC,kBAAiB,CAAG,UAA1B,CACA,GAAMC,oBAAmB,CAAG,YAA5B,CACA,GAAMC,0BAAyB,CAAG,kBAAlC,CACA,GAAMC,uBAAsB,CAAG,eAA/B,CAEA,GAAMC,eAAc,CAAG,QAAvB,CACA,GAAMC,iBAAgB,CAAG,UAAzB,CACA,GAAMC,qBAAoB,CAAG,aAA7B,C;;GCLDC,4B,yBACJ,uBAAY5+D,MAAZ,CAAoB,CAAC,8DACnB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKjf,aAAL,CAAqB,IAArB,CACA,KAAK89E,SAAL,CAAiB,IAAjB,CACA,KAAKC,IAAL,CAAY,KAAZ,CACA,KAAKC,UAAL,CAAkB,IAAlB,CACA,KAAKC,iBAAL,CAAyB,IAAzB,CACD,C,sFAEIj+E,a,CAAe,CAClB,KAAKA,aAAL,CAAqBA,aAArB,CACD,C,mTAG0B,MAAKg+E,U,QAAxBA,U,eACNA,UAAU,CAACE,KAAX,G,4LAGmB,mBAAbC,QAAa,2DAAH,CAAG,CACnB,KAAKH,UAAL,CAAkB,GAAI16D,QAAJ,CAAY,SAACC,OAAD,CAAa,CACzCs1B,UAAU,CAAC,UAAM,CACf,KAAI,CAACilC,SAAL,CAAiB,GAAIM,UAAJ,CAAcrqB,oBAAoB,CAAG,KAAI,CAAC90C,MAA1C,CAAjB,CACA,KAAI,CAACg/D,iBAAL,CAAyB16D,OAAzB,CACA,KAAI,CAACu6D,SAAL,CAAeO,OAAf,CAAyB,KAAI,CAACC,OAAL,CAAajxF,IAAb,CAAkB,KAAlB,CAAzB,CACA,KAAI,CAACywF,SAAL,CAAeS,SAAf,CAA2B,KAAI,CAACC,SAAL,CAAenxF,IAAf,CAAoB,KAApB,CAA3B,CACA,KAAI,CAACywF,SAAL,CAAeW,OAAf,CAAyB,KAAI,CAACC,OAAL,CAAarxF,IAAb,CAAkB,KAAlB,CAAzB,CACA,KAAI,CAACywF,SAAL,CAAea,MAAf,CAAwB,KAAI,CAACC,MAAL,CAAYvxF,IAAZ,CAAiB,KAAjB,CAAxB,CACD,CAPS,CAOP8wF,OAPO,CAAV,CAQD,CATiB,CAAlB,CAUD,C,2JAEgB3lE,Q,8JACU,MAAKwlE,U,QAAxBA,U,gBACNA,UAAU,CAACa,IAAX,CACE7B,IAAI,CAACC,SAAL,CAAe,CACbnmF,IAAI,CAAEgoF,mBADO,CAEbn/E,OAAO,CAAE6Y,QAAQ,CAAC/e,SAAT,EAFI,CAAf,CADF,E,8TAQqB+e,Q,8JACI,MAAKwlE,U,QAAxBA,U,gBACNA,UAAU,CAACa,IAAX,CACE7B,IAAI,CAACC,SAAL,CAAe,CACbnmF,IAAI,CAAEgoF,yBADO,CAEbn/E,OAAO,CAAE6Y,QAAQ,CAAC/e,SAAT,EAFI,CAAf,CADF,E,iUAQaolB,M,8JACY,MAAKm/D,U,QAAxBA,U,gBACNA,UAAU,CAACa,IAAX,CACE7B,IAAI,CAACC,SAAL,CAAe,CACbnmF,IAAI,CAAEgoF,iBADO,CAEbn/E,OAAO,CAAEkf,MAFI,CAAf,CADF,E,2SAQcA,M,8JACW,MAAKm/D,U,QAAxBA,U,gBACNA,UAAU,CAACa,IAAX,CACE7B,IAAI,CAACC,SAAL,CAAe,CACbnmF,IAAI,CAAEgoF,kBADO,CAEbn/E,OAAO,CAAEkf,MAFI,CAAf,CADF,E,4SAQaA,M,CAAQ1e,K,8JACI,MAAK69E,U,QAAxBA,U,gBACNA,UAAU,CAACa,IAAX,CACE7B,IAAI,CAACC,SAAL,CAAe,CACbnmF,IAAI,CAAEgoF,iBADO,CAEbn/E,OAAO,CAAE,CACPkf,MAAM,CAANA,MADO,CAEP1e,KAAK,CAAEA,KAAK,CAAC3P,GAAN,CAAU,SAACkG,IAAD,QAAUA,KAAI,CAAC+C,SAAL,EAAV,EAAV,CAFA,CAFI,CAAf,CADF,E,yaAYA,KAAKskF,IAAL,CAAY,KAAZ,C,uBACO,MAAKC,U,uBAAYE,K,+LAGjB,CACP,KAAKH,IAAL,CAAY,IAAZ,CACA,KAAKE,iBAAL,CAAuB,KAAKH,SAA5B,EACD,C,yCAES,CACRruF,OAAO,CAACya,GAAR,CAAY,OAAZ,EACD,C,yCAES,CACR,GAAI,KAAK6zE,IAAT,CAAe,CACb,KAAKgB,OAAL,CAAa,IAAb,EACD,CACF,C,iDAEmB,IAARvnF,KAAQ,MAARA,IAAQ,iBACQwlF,IAAI,CAACG,KAAL,CAAW3lF,IAAX,CADR,CACVV,IADU,aACVA,IADU,CACJ6I,OADI,aACJA,OADI,CAElBlQ,OAAO,CAACya,GAAR,CAAY,kBAAZ,CAAgCpT,IAAhC,EAEA,OAAQA,IAAR,EACE,IAAKgoF,iBAAL,CACE,KAAK9+E,aAAL,CAAmBg/E,eAAnB,CAAmC,GAAIlG,cAAJ,CAAan5E,OAAb,CAAnC,EACA,MAEF,IAAKm/E,qBAAL,CACE,KAAK9+E,aAAL,CAAmBm7E,iBAAnB,CACEx7E,OAAO,CAACnP,GAAR,CAAY,SAAC4H,KAAD,QAAW,IAAI0gF,cAAJ,CAAa1gF,KAAb,CAAX,EAAZ,CADF,EAGA,MAEF,IAAK0mF,eAAL,CACE,KAAK9+E,aAAL,CAAmBi/E,aAAnB,CACEt/E,OAAO,CAACnP,GAAR,CAAY,SAAC4H,KAAD,QAAW,IAAI0gF,cAAJ,CAAa1gF,KAAb,CAAX,EAAZ,CADF,EAGA,MACF,QACE,KAAM,IAAIxG,MAAJ,iDAAmDkF,IAAnD,MAAN,CAjBJ,CAmBD,C,6BAGY+mF,kFAAf,E;;ACnIA,GAAMqB,gBAAe,CAAG,IAAxB,CACA,GAAMC,iBAAgB,CAAG,IAAzB,CACA,GAAMC,eAAc,CAAG,uBAAvB,CACA,GAAMC,eAAc,CAAG,eAAvB,CACA,GAAMC,eAAc,CAAG,EAAvB,CACA,GAAMC,gBAAe,CAAG,IAAxB,CACA,GAAMC,YAAW,CAAG,IAApB,CACA;AAEA,GAAMC,+BAAgB,CAAG,QAAnBA,iBAAmB,SAAMjrF,YAAW,CAACpB,YAAZ,CAAyB8rF,eAAzB,CAAN,EAAzB,CAEA,GAAMQ,gCAAiB,CAAG,QAApBA,kBAAoB,SAAMlrF,YAAW,CAAClB,aAAZ,CAA0B6rF,gBAA1B,CAAN,EAA1B,C,GAEMQ,8B,yBACJ,0BAAc,CAAC,qEAsCfC,MAtCc,CAsCL,SAAU1rF,IAAV,CAAgB,CACvB,GAAIA,IAAI,CAAG,CAAX,CAAc,CACZ;AACD,CAFD,IAEO,CACL;AACD,CACF,CA5Ca,CACZ,KAAK8uB,QAAL,CAAgB,IAAhB,CACA,KAAKc,IAAL,CAAY,IAAZ,CACA,KAAK+7D,OAAL,CAAe,CAAf,CACA,KAAKC,OAAL,CAAe,CAAf,CACA,KAAKltF,OAAL,CAAe,GAAf,CACD,C,0GAEawB,K,CAAOyrF,O,CAASC,O,CAAS,CACrC,KAAKD,OAAL,CAAeA,OAAf,CACA,KAAKC,OAAL,CAAeA,OAAf,CAEA,GAAM7rF,MAAK,CAAGwrF,8BAAgB,EAA9B,CACA,GAAMhsF,OAAM,CAAGisF,+BAAiB,EAAhC,CAEA,GAAMj5D,QAAO,CAAGqG,cAAc,CAACL,iBAAf,CACd8yD,eADc,CAEdL,eAFc,CAGdC,gBAHc,CAIdC,cAJc,CAKdC,cALc,CAMdC,cANc,CAAhB,CASA,GAAM/5D,SAAQ,CAAG,GAAI32B,8BAAJ,CAAwBqF,KAAxB,CAA+BR,MAA/B,CAAuC,CAAvC,CAA0C,CAA1C,CAAjB,CACA,KAAKuvB,QAAL,CAAgB,GAAIp0B,kCAAJ,CAA4B,CAC1C4B,GAAG,CAAEi2B,OADqC,CAE1ClC,WAAW,CAAE,IAF6B,CAG1CP,OAAO,CAAEw7D,WAHiC,CAI1Ch7D,UAAU,CAAE,KAJ8B,CAA5B,CAAhB,CAMA,KAAKV,IAAL,CAAY,GAAIl1B,qBAAJ,CAAe22B,QAAf,CAAyB,KAAKvC,QAA9B,CAAZ,CACA,KAAKc,IAAL,CAAUl2B,QAAV,CAAmBrI,CAAnB,EAAwBiP,WAAW,CAAC1B,OAAZ,GAAwB,CAAhD,CACA,KAAKgxB,IAAL,CAAUtuB,IAAV,CAAiB,SAAjB,CAEApB,KAAK,CAAC5M,GAAN,CAAU,KAAKs8B,IAAf,EACD,C,+BAWY67D,+EAAf,E;;GCzDMI,oB,yBACJ,mBAAY3rF,KAAZ,CAAmB6qB,MAAnB,CAA2B,CAAC,0DAC1B,KAAK+gE,SAAL,CAAiB,IAAjB,CACA,KAAKvjD,gBAAL,CAAwB,GAAIxE,kCAAJ,CAA6B7jC,KAA7B,CAAoC,KAAK4rF,SAAzC,CAAxB,CACA,KAAK5rF,KAAL,CAAaA,KAAb,CACA,KAAKm3C,iBAAL,CAAyB,IAAzB,CACA,KAAKD,kBAAL,CAA0B,CAA1B,CACA,KAAK20C,WAAL,CAAmB,CAAnB,CACA,KAAKhhE,MAAL,CAAcA,MAAd,CAEA,KAAKwT,SAAL,CAAiB,IAAjB,CAEA,KAAK3N,MAAL,GACD,C,mWAGO,MAAK2X,gBAAL,CAAsB/M,KAAtB,E,QACN;AAEA;AACIz7B,K,CAAQ,I,CAAM;AACdR,M,CAAS,I,CAAM;AAEnB,KAAKg/B,SAAL,CAAiBpsC,wBAAwB,CAAC,KAAK44B,MAAN,CAAzC,CAEA;AACIihE,K,CAAQ,KAAKF,S,CACjB,MAAOE,KAAK,EAAZ,CAAgB,CACd,KAAKC,UAAL,CAAgBlsF,KAAhB,CAAuBR,MAAvB,EAEA,GAAI,KAAKg/B,SAAL,GAAmB,IAAvB,CAA6B,CAC3B,KAAK2tD,iBAAL,CAAuBnsF,KAAvB,CAA8BR,MAA9B,EACD,CACF,CAED;AAEA;;;;UAMA,KAAK83C,iBAAL,CAAyB,GAAIrmB,KAAJ,GAAWm7D,OAAX,EAAzB,CACA,KAAK/0C,kBAAL,CAA0B,CAA1B,CACA,KAAK20C,WAAL,CAAmB,CAAnB,C,gCACO,I,iLAGA,CAAE,C,yCAED,CACR,KAAKxjD,gBAAL,CAAsB0B,OAAtB,CAA8B,IAA9B,EACD,C,uCAEQ,CACP,GAAI,CAAC,KAAK1B,gBAAL,CAAsB6jD,OAAtB,EAAL,CAAsC,CACpC,OACD,CAED,GAAIjG,UAAS,CAAG,GAAIn1D,KAAJ,GAAWm7D,OAAX,GAAuB,KAAK90C,iBAA5C,CACA,KAAKD,kBAAL,EAA2B+uC,SAA3B,CACA,KAAK59C,gBAAL,CAAsBhD,MAAtB,CAA6B,CAC3BltC,KAAK,CAAE,CADoB,CAE3BqL,KAAK,CAAE,KAAK0zC,kBAFe,CAG3BvY,IAAI,CAAE,CAHqB,CAI3B7+B,IAAI,CAAE,KAAK+rF,WAJgB,CAA7B,EAOA,GAAI,KAAKA,WAAL,GAAqB,CAAzB,CAA4B,CAC1B,KAAKA,WAAL,CAAmB,CAAnB,CACD,CAED,KAAK10C,iBAAL,CAAyB,GAAIrmB,KAAJ,GAAWm7D,OAAX,EAAzB,CACD,C,8CAEUpsF,K,CAAOR,M,CAAQ,CACxB,GAAI2lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsB8jD,eAAtB,CAAsC,IAAtC,CAAf,CAEA,GAAIh7F,EAAC,CAAG,CAAC,KAAKktC,SAAL,GAAmB,GAApB,EAA2Bx+B,KAA3B,CAAmC,GAA3C,CACA,GAAIxO,EAAC,CAAG,CAAC,KAAKgtC,SAAL,GAAmB,GAApB,EAA2Bh/B,MAA3B,CAAoC,GAA5C,CAEA2lC,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW,EAAI,KAAK3B,SAAL,GAAmB,CAFlC,EAGGrE,UAHH,CAGc,KAAKqE,SAAL,GAAmB,GAAnB,CAAyB,GAHvC,EAIGn5B,WAJH,CAIe,CAAE/T,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAJf,EAKGwuC,QALH,CAKY,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CALZ,EAMGgrC,iBANH,CAMqB,IAAM,KAAKnH,SAAL,GAAmB,GAN9C,EAQA,GAAI,KAAKA,SAAL,GAAmB,GAAvB,CAA4B,CAC1B2G,QAAQ,CACLS,gBADH,CACoB,KAAKpH,SAAL,GAAmB,GAAnB,CAAyB,EAD7C,EAEGqH,gBAFH,CAEoB,KAAKrH,SAAL,EAFpB,EAGD,CACF,C,4DAEiBx+B,K,CAAOR,M,CAAQ,CAC/B,GAAI2lC,SAAQ,CAAG,KAAKqD,gBAAL,CAAsB8jD,eAAtB,CAAsC,IAAtC,CAAf,CAEA,GAAIh7F,EAAC,CAAG,CAAC,KAAKktC,SAAL,GAAmB,GAApB,EAA2Bx+B,KAA3B,CAAmC,GAA3C,CACA,GAAIxO,EAAC,CAAG,CAAC,KAAKgtC,SAAL,GAAmB,GAApB,EAA2Bh/B,MAA3B,CAAoC,GAA5C,CAEA,GAAI+xB,KAAI,CAAG,EAAI,KAAKiN,SAAL,GAAmB,CAAlC,CACA,GAAIsH,eAAc,CAAG,IAAM,KAAKtH,SAAL,GAAmB,GAA9C,CACA,GAAI1O,MAAK,CAAG,GAAIn1B,sBAAJ,CACV,KAAK6jC,SAAL,GAAmB,GAAnB,CAAyB,GADf,CAEV,KAAKA,SAAL,GAAmB,GAAnB,CAAyB,GAFf,CAGV,KAAKA,SAAL,GAAmB,GAAnB,CAAyB,GAHf,CAAZ,CAMA2G,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW5O,IAAI,CAAG,GAFlB,EAGG4I,UAHH,CAGc,KAAKqE,SAAL,GAAmB,GAAnB,CAAyB,GAHvC,EAIGn5B,WAJH,CAIe,CAAE/T,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAJf,EAKGwuC,QALH,CAKY,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CALZ,EAMGgrC,iBANH,CAMqBG,cANrB,EAQAX,QAAQ,CAAG,KAAKqD,gBAAL,CAAsB8jD,eAAtB,CAAsC,IAAtC,CAAX,CACAnnD,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW5O,IAFX,EAGG4I,UAHH,CAGc,KAAKqE,SAAL,GAAmB,GAAnB,CAAyB,GAHvC,EAIGn5B,WAJH,CAIe,CAAE/T,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAJf,EAKGwuC,QALH,CAKYlQ,KALZ,EAMG6V,iBANH,CAMqBG,cANrB,EAOGF,gBAPH,CAOoB,KAAKpH,SAAL,GAAmB,GAAnB,CAAyB,GAP7C,EAQGqH,gBARH,CAQoB,KAAKrH,SAAL,GAAmB,GARvC,EAUA,GAAI0nD,OAAM,CAAGz0F,IAAI,CAAC6D,KAAL,CAAW,KAAKkpC,SAAL,GAAmB,CAA9B,EAAmC,CAAhD,CAEA,GAAI0nD,MAAM,EAAI,CAAd,CAAiB,CACf,OACD,CAED,GAAIxwF,MAAK,CAAG,KAAK8oC,SAAL,GAAmB,GAA/B,CACA,GAAI2nD,YAAW,CAAG,CAAC,KAAK3nD,SAAL,GAAmB,GAApB,EAA2B,IAA7C,CAEA,MAAO0nD,MAAM,EAAb,CAAiB,CACfxwF,KAAK,EAAI,KAAK8oC,SAAL,GAAmB,EAAnB,CAAwB,EAAjC,CACA2G,QAAQ,CAAG,KAAKqD,gBAAL,CAAsB8jD,eAAtB,CAAsC,IAAtC,CAAX,CACAnnD,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW5O,IAAI,CAAG,KAAKiN,SAAL,EAAP,CAA0B,EAA1B,CAA+B,EAF1C,EAGGrE,UAHH,CAGc,KAAKqE,SAAL,GAAmB,GAAnB,CAAyB,GAHvC,EAIGn5B,WAJH,CAIe,CAAE/T,CAAC,CAAEA,CAAL,CAAQE,CAAC,CAAEA,CAAX,CAJf,EAKGwuC,QALH,CAKYlQ,KALZ,EAMG6V,iBANH,CAMqBG,cANrB,EAOGF,gBAPH,CAOoB,KAAKpH,SAAL,GAAmB,GAAnB,CAAyB,GAP7C,EAQGqH,gBARH,CAQoB,GARpB,EASGxF,QATH,CASY3qC,KATZ,EAUGgwC,cAVH,CAUkBygD,WAVlB,EAWG3lD,UAXH,CAWc2E,QAAQ,CAAC3S,OAAT,CAAiBsN,QAX/B,EAYD,CACF,C,sDAEc9/B,K,CAAOR,M,CAAQ,CAC5B,GAAI7F,SAAQ,CAAG,CACbrI,CAAC,CAAE,CAAC,KAAKktC,SAAL,GAAmB,GAApB,EAA2Bx+B,KADjB,CAEbxO,CAAC,CAAE,CAAC,KAAKgtC,SAAL,GAAmB,GAApB,EAA2Bh/B,MAFjB,CAAf,CAKA,GAAImC,OAAM,CAAG,CACXrQ,CAAC,CAAG,KAAKi7F,aAAL,CAAmB,GAAnB,CAAwB,CAAxB,EAA6BvsF,KAA9B,CAAuC,GAD/B,CAEXxO,CAAC,CAAG,KAAK+6F,aAAL,CAAmB,GAAnB,CAAwB,CAAxB,EAA6BvsF,KAA9B,CAAuC,GAF/B,CAAb,CAKA,GAAIwsF,WAAU,CAAG/6F,IAAI,CAACuC,KAAL,CAAW,KAAKwqC,SAAL,GAAmB,CAA9B,EAAmC,CAApD,CAEA,MAAOguD,UAAU,EAAjB,CAAqB,CACnB,KAAKC,kBAAL,CAAwB,CAAEn7F,CAAC,CAAEqI,QAAQ,CAACrI,CAAd,CAAiBE,CAAC,CAAEmI,QAAQ,CAACnI,CAA7B,CAAxB,CAA0DwO,KAA1D,EACArG,QAAQ,CAACrI,CAAT,EAAc,KAAKi7F,aAAL,CAAmB,CAAnB,CAAsB,CAAtB,EAA2B,EAA3B,CAAgC5qF,MAAM,CAACrQ,CAArD,CACAqI,QAAQ,CAACnI,CAAT,EAAc,KAAK+6F,aAAL,CAAmB,CAAnB,CAAsB,CAAtB,EAA2B,EAA3B,CAAgC5qF,MAAM,CAACnQ,CAArD,CACD,CACF,C,oDAEautE,G,CAAKnhE,G,CAAK,CACtB,GAAItH,OAAM,CAAG,KAAKkoC,SAAL,IAAoB5gC,GAAG,CAAGmhE,GAA1B,EAAiCA,GAA9C,CACA,MAAO,MAAKvgC,SAAL,GAAmB,GAAnB,CAAyBloC,MAAM,CAAG,CAAC,CAAnC,CAAuCA,MAA9C,CACD,C,8DAEkBqD,Q,CAAUqG,K,CAAO,CAClC,GAAI2/B,IAAG,CAAGluC,IAAI,CAACuC,KAAL,CAAW,KAAKwqC,SAAL,GAAmB,CAAnB,CAAuB,CAAlC,CAAV,CACA,GAAIkuD,aAAY,CAAG,CAAC,KAAKluD,SAAL,GAAmB,GAApB,EAA2B,KAA9C,CAEA,MAAOmB,GAAG,EAAV,CAAc,CACZ,KAAKiJ,SAAL,CACEjvC,QADF,CAEE+yF,YAFF,CAGE,KAAKluD,SAAL,GAAmBx+B,KAAnB,CAA2B,GAA3B,CAAiCA,KAAK,CAAG,GAH3C,EAKD,CACF,C,4CAESrG,Q,CAAU+yF,Y,CAAcn7D,I,CAAM,CACtC,GAAI4T,SAAQ,CAAG,KAAKqD,gBAAL,CAAsB8jD,eAAtB,CAAsC,IAAtC,CAAf,CAEA3yF,QAAQ,CAACrI,CAAT,EAAc,CAAC,KAAKktC,SAAL,GAAmB,GAApB,EAA2B,GAAzC,CACA7kC,QAAQ,CAACnI,CAAT,EAAc,CAAC,KAAKgtC,SAAL,GAAmB,GAApB,EAA2B,GAAzC,CAEA2G,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW,KAAK3B,SAAL,GAAmBjN,IAAnB,CAA0B,GAA1B,CAAgCA,IAAI,CAAG,GAFlD,EAGG4I,UAHH,CAGc,KAAKqE,SAAL,GAAmB,KAAnB,CAA2B,KAHzC,EAIGn5B,WAJH,CAIe,CAAE/T,CAAC,CAAEqI,QAAQ,CAACrI,CAAd,CAAiBE,CAAC,CAAEmI,QAAQ,CAACnI,CAA7B,CAJf,EAKGwuC,QALH,CAKY,GAAIrlC,sBAAJ,CAAgB,IAAM,GAAtB,CAA2B,IAAM,GAAjC,CAAsC,IAAM,GAA5C,CALZ,EAMG6lC,UANH,CAMc2E,QAAQ,CAAC3S,OAAT,CAAiBmN,GAN/B,EAOGU,QAPH,CAOY,KAAK7B,SAAL,GAAmB,GAP/B,EAQGkH,cARH,CAQkBgnD,YAAY,CAAG,CAAC,KAAKluD,SAAL,GAAmB,GAApB,EAA2B,KAR5D,EASGmH,iBATH,CASqB,IAAM,KAAKnH,SAAL,GAAmB,GAT9C,EAWA,GAAI,KAAKA,SAAL,GAAmB,GAAvB,CAA4B,CAC1B2G,QAAQ,CACL7E,iBADH,CACqB,CADrB,EAEGH,OAFH,CAEW,KAAK3B,SAAL,GAAmBjN,IAAnB,CAA0B,IAA1B,CAAiCA,IAAI,CAAG,IAFnD,EAGG4I,UAHH,CAGc,CAHd,EAIG90B,WAJH,CAIe,CAAE/T,CAAC,CAAEqI,QAAQ,CAACrI,CAAd,CAAiBE,CAAC,CAAEmI,QAAQ,CAACnI,CAA7B,CAJf,EAKGwuC,QALH,CAKY,GAAIrlC,sBAAJ,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CALZ,EAMG6lC,UANH,CAMc2E,QAAQ,CAAC3S,OAAT,CAAiBmN,GAN/B,EAOGU,QAPH,CAOY,KAAK7B,SAAL,GAAmB,GAP/B,EAQGkH,cARH,CAQkBgnD,YAAY,CAAG,CAAC,KAAKluD,SAAL,GAAmB,GAApB,EAA2B,IAR5D,EASGmH,iBATH,CASqB,IAAM,KAAKnH,SAAL,GAAmB,GAT9C,EAUGoH,gBAVH,CAUoB,KAAKpH,SAAL,GAAmB,GAAnB,CAAyB,GAV7C,EAWGqH,gBAXH,CAWoB,KAAKrH,SAAL,GAAmB,IAXvC,EAYD,CACF,C,yBAGYstD,yEAAf,E;;GCxOMa,sB,yBACJ,oBAAY1sF,IAAZ,CAAkBD,KAAlB,CAAyBR,MAAzB,CAAiCtN,CAAjC,CAAoC,CAAC,2DACnC,KAAK06F,KAAL,CAAa,GAAIjyF,mCAAJ,CACVsF,IAAI,CAAGD,KAAR,CAAiB,CAAC,CADP,CAEVC,IAAI,CAAGD,KAAR,CAAiB,CAFN,CAGVC,IAAI,CAAGT,MAAR,CAAkB,CAHP,CAIVS,IAAI,CAAGT,MAAR,CAAkB,CAAC,CAJR,CAKX,CAAC,KALU,CAMX,KANW,CAAb,CASA,KAAKtN,CAAL,CAASA,CAAT,CAEA,KAAK06F,KAAL,CAAWjzF,QAAX,CAAoBkI,GAApB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B3P,CAA9B,EACA,KAAK26F,gBAAL,CAAwB,CAAxB,CAEA,KAAKC,gBAAL,CAAwB,EAAxB,CACA,KAAKC,sBAAL,CAA8B,EAA9B,CAEA,KAAKC,WAAL,CAAmB,GAAIryF,kCAAJ,CACjB,KAAKoyF,sBADY,CAEjB/sF,KAAK,CAAGR,MAFS,CAGjB,CAHiB,CAIjB,MAJiB,CAAnB,CAOA,KAAKytF,yBAAL,CAAiC,CAAjC,CAEA,KAAKC,UAAL,CAAkB,CAACh7F,CAAD,CAAK,GAAvB,CAEA,KAAKi7F,cAAL,CAAoB,KAAKD,UAAzB,EAEA,KAAK55F,OAAL,CAAe,KAAK05F,WAApB,CACA11F,MAAM,CAACisD,UAAP,CAAoB,IAApB,CACD,C,0GAEiB,CAChB,KAAK4pC,cAAL,CAAoB,CAApB,EACA,KAAK75F,OAAL,CAAe,KAAKs5F,KAApB,CACD,C,6DAEmB,CAClB,KAAKO,cAAL,CAAoB,KAAKD,UAAzB,EACA,KAAK55F,OAAL,CAAe,KAAK05F,WAApB,CACD,C,mEAEsB,CACrB,GAAMI,SAAQ,CAAG,KAAKJ,WAAL,CAAiBrzF,QAAjB,CAA0BzH,CAA3C,CACA,GAAMm7F,WAAU,CACdD,QAAQ,CAAG37F,IAAI,CAAC0D,GAAL,CAASQ,cAAc,CAAC,KAAKo3F,sBAAL,CAA8B,CAA/B,CAAvB,CADb,CAGA,GAAMO,SAAQ,CACZ77F,IAAI,CAAC4D,GAAL,CAASM,cAAc,CAAC,KAAKo3F,sBAAL,CAA8B,CAA/B,CAAvB,EAA4DM,UAD9D,CAGA,MAAO,CACLrtF,KAAK,CAAEstF,QAAQ,CAAG,CAAX,CAAe,KAAKN,WAAL,CAAiBO,MADlC,CAEL/tF,MAAM,CAAE8tF,QAAQ,CAAG,CAFd,CAAP,CAID,C,mDAEc,CACb,GAAI,KAAKh6F,OAAL,GAAiB,KAAK05F,WAA1B,CAAuC,CACrC,KAAK15F,OAAL,CAAe,KAAKs5F,KAApB,CACD,CAFD,IAEO,CACL,KAAKt5F,OAAL,CAAe,KAAK05F,WAApB,CACD,CACF,C,wDAEe/sF,I,CAAMD,K,CAAOR,M,CAAQ,CACnC,GAAMlM,QAAO,CAAG,KAAKk6F,oBAAL,EAAhB,CACA,GAAMC,gBAAe,CAAGn6F,OAAO,CAACkM,MAAR,EAAkBA,MAAM,CAAGS,IAA3B,CAAxB,CACA,KAAKgtF,yBAAL,EAAkCQ,eAAlC,CAEA,GAAI,KAAKR,yBAAL,CAAiC5yF,oBAArC,CAA2D,CACzD,KAAK4yF,yBAAL,CAAiC5yF,oBAAjC,CACD,CAED,KAAKqzF,oCAAL,CAA0C,KAAKtjB,iBAAL,EAA1C,EACD,C,8CAEUnqE,I,CAAMD,K,CAAOR,M,CAAQ,CAC9B,KAAKotF,KAAL,CAAW11F,IAAX,CAAmB+I,IAAI,CAAGD,KAAR,CAAiB,CAAC,CAApC,CACA,KAAK4sF,KAAL,CAAWh4F,KAAX,CAAoBqL,IAAI,CAAGD,KAAR,CAAiB,CAApC,CACA,KAAK4sF,KAAL,CAAWx1F,GAAX,CAAkB6I,IAAI,CAAGT,MAAR,CAAkB,CAAnC,CACA,KAAKotF,KAAL,CAAW7jC,MAAX,CAAqB9oD,IAAI,CAAGT,MAAR,CAAkB,CAAC,CAAvC,CAEA,KAAKwtF,WAAL,CAAiBO,MAAjB,CAA0BvtF,KAAK,CAAGR,MAAlC,CACA,KAAKwtF,WAAL,CAAiB/sF,IAAjB,CAAwB,CAAxB,CACA,KAAK0tF,eAAL,CAAqB1tF,IAArB,CAA2BD,KAA3B,CAAkCR,MAAlC,EACA;AACA,KAAKwtF,WAAL,CAAiBY,sBAAjB,GACA,KAAKhB,KAAL,CAAWgB,sBAAX,GACA,KAAKhB,KAAL,CAAWiB,iBAAX,GACD,C,iDAEa,CACZ,MAAO,IAAI/sF,aAAJ,CAAW,KAAKxN,OAAL,CAAaqG,QAAxB,CAAP,CACD,C,6DAEmB,CAClB,MAAO,IAAImH,aAAJ,CACL,KAAK8rF,KAAL,CAAWjzF,QAAX,CAAoBrI,CADf,CAEL,KAAKs7F,KAAL,CAAWjzF,QAAX,CAAoBnI,CAApB,CAAwB,KAAKq7F,gBAFxB,CAGL,KAAKD,KAAL,CAAWjzF,QAAX,CAAoBzH,CAApB,CAAwB,KAAKA,CAHxB,CAAP,CAKD,C,gEAEmByH,Q,CAAU,CAC5B,KAAKizF,KAAL,CAAWjzF,QAAX,CAAoBrI,CAApB,CAAwBqI,QAAQ,CAACrI,CAAjC,CACA,KAAKs7F,KAAL,CAAWjzF,QAAX,CAAoBnI,CAApB,CAAwBmI,QAAQ,CAACnI,CAAT,CAAa,KAAKq7F,gBAA1C,CACA,KAAKa,oCAAL,CAA0C,KAAKtjB,iBAAL,EAA1C,EACD,C,gDAEWzwE,Q,CAAU,CACpB,KAAKizF,KAAL,CAAWjzF,QAAX,CAAoBrI,CAApB,EAAyBqI,QAAQ,CAACrI,CAAlC,CACA,KAAKs7F,KAAL,CAAWjzF,QAAX,CAAoBnI,CAApB,EAAyBmI,QAAQ,CAACnI,CAAlC,CACA,KAAKw7F,WAAL,CAAiBrzF,QAAjB,CAA0BrI,CAA1B,EAA+BqI,QAAQ,CAACrI,CAAxC,CACA,KAAK07F,WAAL,CAAiBrzF,QAAjB,CAA0BnI,CAA1B,EAA+BmI,QAAQ,CAACnI,CAAxC,CACD,C,gDAEWmI,Q,CAAU,CACpB,KAAKizF,KAAL,CAAWjzF,QAAX,CAAoBrI,CAApB,CAAwBqI,QAAQ,CAACrI,CAAjC,CACA,KAAKs7F,KAAL,CAAWjzF,QAAX,CAAoBnI,CAApB,CAAwBmI,QAAQ,CAACnI,CAAjC,CACA,KAAKw7F,WAAL,CAAiBrzF,QAAjB,CAA0BrI,CAA1B,EAA+BqI,QAAQ,CAACrI,CAAxC,CACA,KAAK07F,WAAL,CAAiBrzF,QAAjB,CAA0BnI,CAA1B,EAA+BmI,QAAQ,CAACnI,CAAxC,CACD,C,6CAEW,CACV,MAAO,MAAK8B,OAAZ,CACD,C,kGAEoC0pC,M,CAAQ,CAC3C,GAAM8wD,0BAAyB,CAAG,GAAIhtF,aAAJ,CAChC,CADgC,CAEhC,KAAK+rF,gBAAL,CAAwB,KAAKC,gBAFG,CAGhC,KAAK56F,CAAL,CAAS,KAAK46F,gBAHkB,EAIhC/vF,SAJgC,EAAlC,CAMA,GAAMgxF,oBAAmB,CAAG,GAAIjtF,aAAJ,CAAWk8B,MAAX,EAAmBzpC,GAAnB,CAC1Bu6F,yBAAyB,CAAC9yF,cAA1B,CAAyC,KAAKiyF,yBAA9C,CAD0B,CAA5B,CAIA,KAAKD,WAAL,CAAiBrzF,QAAjB,CAA0BkI,GAA1B,CACEksF,mBAAmB,CAACz8F,CADtB,CAEEy8F,mBAAmB,CAACv8F,CAFtB,CAGEu8F,mBAAmB,CAAC77F,CAHtB,EAMA,KAAK86F,WAAL,CAAiBhwD,MAAjB,CAAwB,GAAIl8B,aAAJ,CAAWk8B,MAAX,EAAmB4hB,OAAnB,EAAxB,EACD,C,sDAEcovC,Q,CAAU,CACvB,GAAIA,QAAQ,CAAG,CAAf,CAAkB,CAChBA,QAAQ,CAAG,CAAX,CACD,CAED,GAAIA,QAAQ,CAAG,CAAC,KAAK97F,CAArB,CAAwB,CACtB87F,QAAQ,CAAG,CAAC,KAAK97F,CAAjB,CACD,CAED,GAAM+7F,cAAa,CAAG,KAAK7jB,iBAAL,GAAyBxrB,OAAzB,EAAtB,CAEA,GAAMtmD,MAAK,CAAG,KAAKu0F,gBAAL,CAAwBmB,QAAtC,CAEA,KAAKpB,KAAL,CAAWjzF,QAAX,CAAoBkI,GAApB,CACE,KAAK+qF,KAAL,CAAWjzF,QAAX,CAAoBrI,CADtB,CAEE,KAAKs7F,KAAL,CAAWjzF,QAAX,CAAoBnI,CAApB,CAAwB8G,KAF1B,CAGE,KAAKs0F,KAAL,CAAWjzF,QAAX,CAAoBzH,CAHtB,EAKA,KAAK06F,KAAL,CAAW5vD,MAAX,CAAkBixD,aAAlB,EACA,KAAKpB,gBAAL,CAAwBmB,QAAxB,CAEA,KAAKN,oCAAL,CAA0CO,aAA1C,EACD,C,0BAGYtB,yEAAf,E;;AC9KAr1F,MAAM,CAACqD,KAAP,CAAeA,YAAf,C,GAEMuzF,oB,yBACJ,mBAAYniF,aAAZ,CAA2BpP,mBAA3B,CAAgD,CAAC,0DAC/C,KAAKoP,aAAL,CAAqBA,aAArB,CACA,KAAKpP,mBAAL,CAA2BA,mBAA3B,CACA,KAAKwxF,eAAL,CAAuB,GAAIzC,cAAJ,EAAvB,CACA,KAAK/jD,wBAAL,CAAgC,IAAhC,CACA,KAAKxnC,KAAL,CAAa,IAAb,CACA,KAAKD,MAAL,CAAc,IAAd,CACA,KAAKkuF,cAAL,CAAsB,IAAtB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACA,KAAKC,SAAL,CAAiB,IAAjB,CACA,KAAKtuF,KAAL,CAAa,IAAb,CACA,KAAKR,MAAL,CAAc,IAAd,CAEA,KAAK3I,OAAL,CAAe,IAAf,CAEA,KAAK03F,WAAL,CAAmB,KAAnB,CAEA,KAAKtuF,IAAL,CAAY,CAAZ,CACA,KAAKuuF,UAAL,CAAkB,KAAKvuF,IAAvB,CAEA,KAAKwuF,WAAL,CAAmB,CAAnB,CAAsB;AAEtB,KAAKC,WAAL,CAAmB,KAAnB,CACD,C,kFAEI73F,O,MAA4Bm0B,M,CAAQ,IAAzBhrB,MAAyB,MAAzBA,KAAyB,CAAlBR,MAAkB,MAAlBA,MAAkB,CACvC,KAAK3I,OAAL,CAAeA,OAAf,CAEA,KAAKsJ,KAAL,CAAa,GAAIxF,sBAAJ,EAAb,CAEA,KAAKgtC,wBAAL,CAAgC,GAAI3D,kCAAJ,CAC9B,KAAK7jC,KADyB,CAE9B,IAF8B,CAAhC,CAKA,KAAKH,KAAL,CAAaA,KAAb,CACA,KAAKR,MAAL,CAAcA,MAAd,CAEA,KAAKU,MAAL,CAAc,GAAIysF,gBAAJ,CAAe,KAAK1sF,IAApB,CAA0B,KAAKD,KAA/B,CAAsC,KAAKR,MAA3C,CAAmD,KAAnD,CAAd,CAEA,KAAK7C,mBAAL,CAAyBia,IAAzB,CAA8B,KAAK1W,MAAnC,CAA2C,KAAKC,KAAhD,EACA,KAAK4L,aAAL,CAAmB6K,IAAnB,CACE,KAAKzW,KADP,CAEE,KAAKwnC,wBAFP,CAGE,KAAKznC,MAHP,EAMA,KAAKkuF,cAAL,CAAsB,GAAIzzF,sBAAJ,EAAtB,CACA,KAAK0zF,eAAL,CAAuB,GAAI1zF,mCAAJ,CACpB,KAAKsF,IAAL,CAAY,KAAKD,KAAlB,CAA2B,CAAC,CADP,CAEpB,KAAKC,IAAL,CAAY,KAAKD,KAAlB,CAA2B,CAFN,CAGpB,KAAKC,IAAL,CAAY,KAAKT,MAAlB,CAA4B,CAHP,CAIpB,KAAKS,IAAL,CAAY,KAAKT,MAAlB,CAA4B,CAAC,CAJR,CAKrB,CAAC,IALoB,CAMrB,KANqB,CAAvB,CASA,KAAK6uF,eAAL,CAAqB10F,QAArB,CAA8BkI,GAA9B,CAAkC,CAAlC,CAAqC,CAArC,CAAwC,GAAxC,EACA,KAAKwsF,eAAL,CAAqBrxD,MAArB,CAA4B,CAA5B,CAA+B,CAA/B,CAAkC,GAAlC,EAEA,KAAK2xD,KAAL,CAAa,GAAIh0F,2BAAJ,CAAqB,QAArB,CAA+B,GAA/B,CAAoC,CAApC,CAAb,CACA,KAAKg0F,KAAL,CAAWh1F,QAAX,CAAoBkI,GAApB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,MAA9B,EACA,KAAK1B,KAAL,CAAW5M,GAAX,CAAe,KAAKo7F,KAApB,EAEA,GAAMC,iBAAgB,CAAG,GAAIj0F,iCAAJ,CAA2B,QAA3B,CAAqC,KAArC,CAAzB,CACAi0F,gBAAgB,CAACj1F,QAAjB,CAA0BkI,GAA1B,CAA8B,CAA9B,CAAiC,CAAjC,CAAoC,CAApC,EAAuC9E,SAAvC,GACA,KAAKoD,KAAL,CAAW5M,GAAX,CAAeq7F,gBAAf,EAEA;;;;;;;;;;;EA3CuC,CAuDvC;;;;;;;;;;;;;;;;;MAvDuC,CAyEvC;;;;;;;;MAzEuC,CAmFvC;;;;MAnFuC,CAyFvC;AACA,KAAKC,QAAL,CAAgB,GAAIl0F,8BAAJ,CAAwB,CAAEi4B,KAAK,CAAE,IAAT,CAAewF,SAAS,CAAE,IAA1B,CAAxB,CAAhB,CACA,KAAKy2D,QAAL,CAAcC,aAAd,CAA4Bx3F,MAAM,CAACy3F,gBAAnC,EACA,KAAKF,QAAL,CAAc1uD,OAAd,CAAsB,KAAKngC,KAA3B,CAAkC,KAAKR,MAAvC,EACA,KAAKqvF,QAAL,CAAcG,SAAd,CAA0B,KAA1B,CACA,KAAKH,QAAL,CAAct7D,OAAd,CAAsB07D,YAAtB,CAAmC,0BAAnC,EACA,KAAKJ,QAAL,CAAct7D,OAAd,CAAsB07D,YAAtB,CAAmC,6BAAnC,EAEA,GAAMC,GAAE,CACN,KAAKL,QAAL,CAAcM,UAAd,CAAyB/7D,UAAzB,CAAoC,OAApC,GACA,KAAKy7D,QAAL,CAAcM,UAAd,CAAyB/7D,UAAzB,CAAoC,oBAApC,CAFF,CAGA87D,EAAE,CAACD,YAAH,CAAgB,0BAAhB,EAEA,KAAKJ,QAAL,CAAcO,SAAd,CAAwBC,OAAxB,CAAkC,IAAlC,CACA,KAAKR,QAAL,CAAcO,SAAd,CAAwBvsF,IAAxB,CAA+BlI,4BAA/B,CACA,KAAKk0F,QAAL,CAAcS,WAAd,CAA4B,IAA5B,CACA,KAAKT,QAAL,CAAcU,WAAd,CAA4B,GAA5B,CAEA14F,OAAO,CAACwgC,WAAR,CAAoB,KAAKw3D,QAAL,CAAcM,UAAlC,EAEA,KAAKZ,WAAL,CAAmB,IAAnB,CACA,KAAKJ,eAAL,CAAqBp2D,aAArB,CAAmC,KAAK53B,KAAxC,CAA+C/F,QAA/C,CAAyDD,QAAzD,EACA,KAAKm0F,SAAL,CAAiB,GAAIxC,kBAAJ,CAAc,KAAKsC,cAAnB,CAAmCpjE,MAAnC,CAAjB,CAEA,KAAKwa,MAAL,GACD,C,sCAEMltC,K,CAAO,CACZ,KAAKk3F,UAAL,CAAgB,CACdl+F,CAAC,CAAEgH,KAAK,CAAChH,CAAN,EAAW,EAAI,KAAK2O,IAApB,CADW,CAEdzO,CAAC,CAAE8G,KAAK,CAAC9G,CAAN,EAAW,EAAI,KAAKyO,IAApB,CAFW,CAAhB,EAID,C,8CAEUtG,Q,CAAU,CACnB,GAAI,CAAC,KAAK40F,WAAV,CAAuB,CACrB,OACD,CAED,KAAKruF,MAAL,CAAYuvF,WAAZ,CAAwB,CACtBn+F,CAAC,CAAEqI,QAAQ,CAACrI,CAAT,CAAa,KAAK2O,IAAlB,CAAyB,KAAKA,IAA9B,CAAqC,CAAC,CADnB,CAEtBzO,CAAC,CAAEmI,QAAQ,CAACnI,CAAT,CAAa,KAAKyO,IAAlB,CAAyB,KAAKA,IAFX,CAAxB,EAIA;AACA;AACA,KAAKouF,eAAL,CAAqB10F,QAArB,CAA8BrI,CAA9B,EACEqI,QAAQ,CAACrI,CAAT,CAAa,KAAK2O,IAAlB,CAAyB,KAAKA,IAA9B,CAAqC,IADvC,CAEA,KAAKouF,eAAL,CAAqB10F,QAArB,CAA8BnI,CAA9B,EACEmI,QAAQ,CAACnI,CAAT,CAAa,KAAKyO,IAAlB,CAAyB,KAAKA,IAA9B,CAAqC,IADvC,CAGA,KAAK8L,aAAL,CAAmBkB,UAAnB,CAA8B,aAA9B,CAA6C,KAAK/M,MAAL,CAAYmb,WAAZ,EAA7C,EACD,C,kDAEY1hB,Q,CAAU,CACrB,GAAI,CAAC,KAAK40F,WAAV,CAAuB,CACrB,OACD,CAED,KAAKruF,MAAL,CAAYmF,WAAZ,CAAwB,CAAE/T,CAAC,CAAEqI,QAAQ,CAACrI,CAAd,CAAiBE,CAAC,CAAEmI,QAAQ,CAACnI,CAA7B,CAAxB,EAEA;AACA;AACA,KAAK68F,eAAL,CAAqB10F,QAArB,CAA8BrI,CAA9B,CAAkCqI,QAAQ,CAACrI,CAAT,CAAa,GAA/C,CACA,KAAK+8F,eAAL,CAAqB10F,QAArB,CAA8BnI,CAA9B,CAAkCmI,QAAQ,CAACnI,CAAT,CAAa,GAA/C,CAEA,KAAKua,aAAL,CAAmBkB,UAAnB,CAA8B,aAA9B,CAA6C,KAAK/M,MAAL,CAAYmb,WAAZ,EAA7C,EACD,C,8CAEUpb,I,CAAMyvF,c,CAAgB,CAC/B,KAAKzvF,IAAL,CAAYA,IAAZ,CAEA,GAAI,CAAC,KAAKsuF,WAAV,CAAuB,CACrB,OACD,CAED,KAAKruF,MAAL,CAAYyvF,UAAZ,CAAuB,KAAK1vF,IAA5B,CAAkC,KAAKD,KAAvC,CAA8C,KAAKR,MAAnD,EACA,KAAK7C,mBAAL,CAAyBgvF,MAAzB,CAAgC,KAAK1rF,IAArC,EACA,KAAKkuF,eAAL,CAAqBxC,MAArB,CAA4B,KAAK1rF,IAAjC,EAEA,KAAK8L,aAAL,CAAmBkB,UAAnB,CAA8B,WAA9B,CAA2C,CACzChN,IAAI,CAAE,KAAKA,IAD8B,CAEzCyvF,cAAc,CAAEl+E,OAAO,CAACk+E,cAAD,CAFkB,CAA3C,EAID,C,uCAEQ,CACP,GAAI,KAAKhB,WAAT,CAAsB,CACpB,OACD,CAED,KAAK3iF,aAAL,CAAmBy5B,MAAnB,CAA0B,KAAKrlC,KAA/B,CAAsC,KAAKxD,mBAA3C,CAAgE,KAAKsD,IAArE,EAEA,KAAK4uF,QAAL,CAAce,KAAd,GACA,KAAKf,QAAL,CAAcrpD,MAAd,CAAqB,KAAK4oD,cAA1B,CAA0C,KAAKC,eAA/C,EACA,KAAKQ,QAAL,CAAcgB,UAAd,GACA,KAAKhB,QAAL,CAAcrpD,MAAd,CAAqB,KAAKrlC,KAA1B,CAAiC,KAAKD,MAAL,CAAYe,SAAZ,EAAjC,EAEA,KAAK6uF,WAAL,GACA,KAAKxB,SAAL,CAAe9oD,MAAf,GAEArU,qBAAqB,CAAC,KAAKqU,MAAL,CAAYpsC,IAAZ,CAAiB,IAAjB,CAAD,CAArB,CACD,C,iDAEa,CACZ,GAAI,KAAKo1F,UAAL,EAAmB,KAAKA,UAAL,GAAoB,KAAKvuF,IAAhD,CAAsD,CACpD,GAAI8T,OAAM,CAAG,CAAC,KAAKy6E,UAAL,CAAkB,KAAKvuF,IAAxB,EAAgC,GAA7C,CACA,GACExO,IAAI,CAACwE,GAAL,CAAS8d,MAAT,EAAmB,OAAnB,EACC,KAAKy6E,UAAL,GAAoB,CAApB,EAAyB/8F,IAAI,CAACwE,GAAL,CAAS8d,MAAT,EAAmB,OAF/C,CAGE,CACA,KAAK47E,UAAL,CAAgB,KAAKnB,UAArB,CAAiC,IAAjC,EACD,CALD,IAKO,CACL,KAAKmB,UAAL,CAAgB,KAAK1vF,IAAL,CAAY8T,MAA5B,EACD,CACF,CACF,C,gDAE2B,IAAjB/T,MAAiB,OAAjBA,KAAiB,CAAVR,MAAU,OAAVA,MAAU,CAC1B,KAAKQ,KAAL,CAAaA,KAAb,CACA,KAAKR,MAAL,CAAcA,MAAd,CAEA,KAAKmwF,UAAL,CAAgB,KAAK1vF,IAArB,EAEA,KAAK4uF,QAAL,CAAc1uD,OAAd,CAAsB7oC,MAAM,CAACC,UAA7B,CAAyCD,MAAM,CAACG,WAAhD,EACA,KAAK62F,SAAL,CAAeyB,MAAf,GACD,C,8CAEU9vF,I,CAAM,CACfA,IAAI,EAAI,GAAR,CACA,GAAIA,IAAI,CAAG,CAAC,GAAZ,CAAiBA,IAAI,CAAG,CAAC,GAAR,CAEjB,KAAK+vF,cAAL,CAAsB,KAAtB,CACA,GAAIC,QAAO,CAAG,KAAKhwF,IAAL,CAAY,KAAKA,IAAL,CAAYA,IAAtC,CAEA,GAAIgwF,OAAO,CAAG71F,QAAd,CAAwB61F,OAAO,CAAG71F,QAAV,CAExB,GAAI61F,OAAO,CAAG91F,QAAd,CAAwB81F,OAAO,CAAG91F,QAAV,CAExB,KAAKq0F,UAAL,CAAkByB,OAAlB,CACD,C,+CAEY,CACX,GAAI,KAAKvB,WAAT,CAAsB,CACpB,OACD,CAED,KAAKA,WAAL,CAAmB,IAAnB,CACA,KAAK73F,OAAL,CAAaq5F,WAAb,CAAyB,KAAKrB,QAAL,CAAcM,UAAvC,EACA,KAAKN,QAAL,CAAce,KAAd,GACA,KAAKf,QAAL,CAAcsB,gBAAd,GACA,KAAKtB,QAAL,CAAcM,UAAd,CAA2B,IAA3B,CACA,KAAKN,QAAL,CAAc38D,OAAd,GACA,KAAK28D,QAAL,CAAgB,IAAhB,CACD,C,yBAGYX,sEAAf,E;;GChRMkC,U,yBACJ,cAAYplE,MAAZ,CAAoBtG,IAApB,CAA0B4wB,OAA1B,CAAmC,CAAC,qDAClC,KAAKtqB,MAAL,CAAcA,MAAd,CACA,KAAK0mB,WAAL,CAAmBhtB,IAAnB,CAEA,KAAK4wB,OAAL,CAAeA,OAAf,CACA,KAAK34C,mBAAL,CAA2BA,yBAA3B,CAEA,KAAKw7C,aAAL,CAAqB,GAAIyxC,mBAAJ,CAAkB5+D,MAAlB,CAArB,CACA,KAAKjf,aAAL,CAAqB,GAAIw6E,oBAAJ,CACnB,KAAKjxC,OADc,CAEnB,KAAK5D,WAFc,CAGnB,KAAK/0C,mBAHc,CAInB,KAAKw7C,aAJc,CAArB,CAMA,KAAKk4C,SAAL,CAAiB,GAAInC,eAAJ,CACf,KAAKniF,aADU,CAEf,KAAKpP,mBAFU,CAAjB,CAIA,KAAK2zF,YAAL,CAAoB,GAAIvI,kBAAJ,GAAmBv4D,IAAnB,EAApB,CACA,KAAK+gE,YAAL,CAAoB,IAApB,CAEA,KAAK35E,IAAL,CAAY,KAAZ,CAEA,KAAK45E,WAAL,CAAmB,IAAnB,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACD,C,0FAEY,CACX,MAAO,MAAKn7C,OAAZ,CACD,C,8CAEUz+C,O,CAAS,CAClB,KAAK05F,YAAL,CAAoB15F,OAApB,CACA,KAAK+f,IAAL,CAAY,IAAZ,CACA,KAAKy5E,SAAL,CAAez5E,IAAf,CAAoB/f,OAApB,CAA6B,KAAK65F,aAAL,EAA7B,CAAmD,KAAK1lE,MAAxD,EACA,KAAKmtB,aAAL,CAAmB2yC,OAAnB,GACA,KAAKpyF,QAAL,GACD,C,kDAEY6O,I,CAAM,CACjB,KAAK8oF,SAAL,CAAeM,UAAf,CAA0BppF,IAA1B,EACD,C,4CAES3Q,K,CAAO,CACf,GAAM45C,OAAM,CAAG,KAAK8/C,YAAL,CAAkBrI,UAAlB,CAA6BrxF,KAA7B,CAAf,CACA,KAAK0+C,OAAL,CAAa8Y,WAAb,CAAyB5d,MAAzB,CAAiC,CAAEvT,EAAE,CAAE,KAAN,CAAjC,EACD,C,wCAEOrmC,K,CAAO,CACb,GAAM45C,OAAM,CAAG,KAAK8/C,YAAL,CAAkBrI,UAAlB,CAA6BrxF,KAA7B,CAAf,CACA,KAAK0+C,OAAL,CAAa8Y,WAAb,CAAyB5d,MAAzB,CAAiC,CAAEvT,EAAE,CAAE,IAAN,CAAjC,EACD,C,4CAEStjC,Q,CAAUF,M,CAAQ,CAC1B,GAAI,CAAC,KAAKmd,IAAV,CAAgB,CACd,OACD,CAED,GAAMg6E,QAAO,CAAG,KAAKj0F,mBAAL,CAAyBk0F,kBAAzB,CAA4Cl3F,QAA5C,CAAhB,CACA,GAAMy1B,OAAM,CAAG,KAAKzyB,mBAAL,CACZm0F,sBADY,CACWn3F,QADX,CACqB,IADrB,EAEZ0tB,KAFY,EAAf,CAGA,GAAM0pE,OAAM,CAAG,KAAKp0F,mBAAL,CAAyB4F,aAAzB,CAAuCquF,OAAvC,CAAgD,IAAhD,CAAf,CAEA,GAAMllF,QAAO,CAAG,GAAIm8E,qBAAJ,CAAmBluF,QAAnB,CAA6Bi3F,OAA7B,CAAsCG,MAAtC,CAA8C3hE,MAA9C,CAAhB,CACA5zB,OAAO,CAACya,GAAR,CAAYvK,OAAO,CAAC3N,GAApB,EAEA,GAAItE,MAAM,EAAIA,MAAM,GAAK,CAArB,EAA0B21B,MAA9B,CAAsC,CACpC,KAAKrjB,aAAL,CAAmBkB,UAAnB,CAA8B,kBAA9B,CAAkDvB,OAAlD,EACD,CAFD,IAEO,IAAI0jB,MAAJ,CAAY,CACjB,KAAKrjB,aAAL,CAAmBkB,UAAnB,CAA8B,aAA9B,CAA6CvB,OAA7C,EACD,CAFM,IAEA,CACL,KAAKK,aAAL,CAAmBkB,UAAnB,CAA8B,YAA9B,CAA4CvB,OAA5C,EACD,CACF,C,sCAEM/R,Q,CAAUrB,K,CAAO,CACtB,KAAK+3F,SAAL,CAAeW,MAAf,CAAsB14F,KAAtB,EACD,C,gDAEWqB,Q,CAAU,CACpB,GAAMi3F,QAAO,CAAG,KAAKj0F,mBAAL,CAAyBk0F,kBAAzB,CAA4Cl3F,QAA5C,CAAhB,CACA,GAAMo3F,OAAM,CAAG,KAAKp0F,mBAAL,CAAyB4F,aAAzB,CAAuCquF,OAAvC,CAAf,CACA,GAAMxhE,OAAM,CAAG,KAAKzyB,mBAAL,CACZm0F,sBADY,CACWn3F,QADX,EAEZ0tB,KAFY,EAAf,CAIA,GAAM3b,QAAO,CAAG,GAAIm8E,qBAAJ,CAAmBluF,QAAnB,CAA6Bi3F,OAA7B,CAAsCG,MAAtC,CAA8C3hE,MAA9C,CAAhB,CAEA,GAAI,KAAKohE,WAAL,EAAoBphE,MAApB,EAA8B,KAAKohE,WAAL,EAAoBphE,MAAtD,CAA8D,CAC5D,KAAKrjB,aAAL,CAAmBkB,UAAnB,CAA8B,cAA9B,6CACKvB,OADL,EAEE0jB,MAAM,CAAE,KAAKohE,WAFf,IAKA,KAAKzkF,aAAL,CAAmBkB,UAAnB,CAA8B,eAA9B,CAA+CvB,OAA/C,EACA,KAAK8kF,WAAL,CAAmBphE,MAAnB,CACD,CARD,IAQO,IAAI,KAAKohE,WAAL,EAAoB,IAApB,EAA4BphE,MAAhC,CAAwC,CAC7C,KAAKrjB,aAAL,CAAmBkB,UAAnB,CAA8B,eAA9B,CAA+CvB,OAA/C,EACA,KAAK8kF,WAAL,CAAmBphE,MAAnB,CACD,CAHM,IAGA,IAAI,KAAKohE,WAAL,EAAoB,CAACphE,MAAzB,CAAiC,CACtC,KAAKrjB,aAAL,CAAmBkB,UAAnB,CAA8B,cAA9B,6CACKvB,OADL,EAEE0jB,MAAM,CAAE,KAAKohE,WAFf,IAIA,KAAKA,WAAL,CAAmB,IAAnB,CACD,CAED,GAAI,CAACphE,MAAL,CAAa,CACX,GAAI,KAAKqhE,cAAL,EAAuB,CAAC,KAAKA,cAAL,CAAoBzyF,MAApB,CAA2B0N,OAAO,CAAC3N,GAAnC,CAA5B,CAAqE,CACnE,KAAKgO,aAAL,CAAmBkB,UAAnB,CAA8B,aAA9B,CAA6C,KAAKwjF,cAAlD,EACA,KAAK1kF,aAAL,CAAmBkB,UAAnB,CAA8B,cAA9B,CAA8CvB,OAAO,CAAC3N,GAAtD,EACA,KAAK0yF,cAAL,CAAsB/kF,OAAO,CAAC3N,GAA9B,CACD,CAJD,IAIO,IAAI,CAAC,KAAK0yF,cAAV,CAA0B,CAC/B,KAAK1kF,aAAL,CAAmBkB,UAAnB,CAA8B,cAA9B,CAA8CvB,OAAO,CAAC3N,GAAtD,EACA,KAAK0yF,cAAL,CAAsB/kF,OAAO,CAAC3N,GAA9B,CACD,CACF,CATD,IASO,IAAIqxB,MAAM,EAAI,KAAKqhE,cAAnB,CAAmC,CACxC,KAAK1kF,aAAL,CAAmBkB,UAAnB,CAA8B,aAA9B,CAA6C,KAAKwjF,cAAlD,EACA,KAAKA,cAAL,CAAsB,IAAtB,CACD,CACF,C,+CAEY,CACX,KAAK1kF,aAAL,CAAmBkB,UAAnB,CAA8B,UAA9B,EACD,C,2CAEU,CACT,GAAI,CAAC,KAAKsjF,YAAV,CAAwB,CACtB,OACD,CAED,GAAMv2D,WAAU,CAAG,KAAK02D,aAAL,EAAnB,CACA,KAAK/zF,mBAAL,CAAyBjE,QAAzB,CAAkCshC,UAAlC,EACA,KAAKq2D,SAAL,CAAe33F,QAAf,CAAwBshC,UAAxB,EACD,C,qDAEe,CACd,MAAO,CACLh6B,KAAK,CAAE,KAAKuwF,YAAL,CAAkB34F,WADpB,CAEL4H,MAAM,CAAE,KAAK+wF,YAAL,CAAkB14F,YAFrB,CAAP,CAID,C,+CAEY,CACX,KAAKsgD,aAAL,CAAmBgJ,UAAnB,GACA,KAAKp1C,aAAL,CAAmBo1C,UAAnB,GACA,KAAKkvC,SAAL,CAAelvC,UAAf,GACD,C,oBAGYivC,uDAAf,E;;GC5JMa,gB,yBACJ,kBAAc,CAAC,wDACb,KAAKllF,aAAL,CAAqB,IAArB,CACA,KAAKgrC,QAAL,CAAgB,IAAhB,CAEA,KAAKm6C,eAAL,CAAuB,EAAvB,CAEA,KAAKC,qBAAL,CAA6B,EAA7B,CAEA,KAAK7kE,KAAL,CAAa,CACX8kE,KAAK,CAAE,KADI,CAEX7sE,QAAQ,CAAE,IAFC,CAGXw+C,YAAY,CAAE,IAHH,CAIXsuB,eAAe,CAAE,EAJN,CAKXC,UAAU,CAAE,IALD,CAMXC,cAAc,CAAE,IANL,CAOXC,YAAY,CAAE,IAPH,CAQXC,WAAW,CAAE,EARF,CASXC,SAAS,CAAE,KATA,CAUXvvB,uBAAuB,CAAE,IAVd,CAWX3M,UAAU,CAAE,CACV1B,sBAAsB,CAAE,IADd,CAEV2B,YAAY,CAAE,IAFJ,CAGVC,mBAAmB,CAAE,IAHX,CAXD,CAgBXi8B,UAAU,CAAE,EAhBD,CAiBXC,UAAU,CAAE,EAjBD,CAkBXC,iBAAiB,CAAE,KAlBR,CAmBXC,QAAQ,CAAE,KAnBC,CAoBX3jB,SAAS,CAAE,KApBA,CAqBX4jB,UAAU,CAAE,EArBD,CAsBXC,MAAM,CAAE,EAtBG,CAuBXC,YAAY,CAAE,CAvBH,CAAb,CA0BA,KAAK3lE,KAAL,CAAWslE,UAAX,CAAsBvtC,EAAtB,EAAwC,KAAxC,CACA,KAAK/3B,KAAL,CAAWslE,UAAX,CAAsBvtC,aAAtB,EAAmD,KAAnD,CACA,KAAK/3B,KAAL,CAAWslE,UAAX,CAAsBvtC,OAAtB,EAA6C,KAA7C,CACA,KAAK/3B,KAAL,CAAWslE,UAAX,CAAsBvtC,QAAtB,EAA8C,KAA9C,CACD,C,8FAEWwc,Q,CAAU,CACpB,KAAKA,QAAL,CAAgBA,QAAhB,CACD,C,+CAEY,CACX,MAAO,MAAKC,OAAL,CAAa1nE,IAAb,CAAkB,IAAlB,CAAP,CACD,C,yDAEiB,CAChB,MAAO,MAAKkzB,KAAZ,CACD,C,wCAEOA,K,CAAOkkB,M,CAAQ,CACrB,KAAKlkB,KAAL,6CACKA,KADL,IAEKkkB,MAFL,EAKA,MAAO,MAAKlkB,KAAZ,CACD,C,oDAEa1sB,I,CAAMsnE,Q,CAAU,CAC5B,GAAM/iE,MAAK,CAAG,KAAKmoB,KAAL,CAAWqlE,UAAX,CAAsB5gF,IAAtB,CACZ,SAACmhF,KAAD,QAAWA,MAAK,CAACtyF,IAAN,CAAW6C,IAAX,CAAgByB,EAAhB,GAAuBtE,IAAI,CAAC6C,IAAL,CAAUyB,EAA5C,EADY,CAAd,CAIA,GAAIC,KAAJ,CAAW,CACTA,KAAK,CAACvE,IAAN,CAAaA,IAAb,CACAuE,KAAK,CAACguF,OAAN,GACAhuF,KAAK,CAAC+iE,QAAN,CAAiBA,QAAjB,CACA/iE,KAAK,CAAC6tB,OAAN,CAAgB,IAAhB,CACD,CALD,IAKO,CACL,KAAK1F,KAAL,CAAWqlE,UAAX,CAAsB91F,IAAtB,CAA2B,CACzB+D,IAAI,CAAJA,IADyB,CAEzBuyF,OAAO,CAAE,CAFgB,CAGzBjrB,QAAQ,CAARA,QAHyB,CAIzBl1C,OAAO,CAAE,IAJgB,CAA3B,EAMD,CAED,KAAKmzC,WAAL,GACD,C,oDAEavlE,I,CAAM,CAClB,GAAMuE,MAAK,CAAG,KAAKmoB,KAAL,CAAWqlE,UAAX,CAAsB5gF,IAAtB,CACZ,SAACmhF,KAAD,QAAWA,MAAK,CAACtyF,IAAN,CAAW6C,IAAX,CAAgByB,EAAhB,GAAuBtE,IAAI,CAAC6C,IAAL,CAAUyB,EAA5C,EADY,CAAd,CAIA,GAAIC,KAAJ,CAAW,CACTA,KAAK,CAAC6tB,OAAN,CAAgB,KAAhB,CACA7tB,KAAK,CAACguF,OAAN,GACA,KAAKhtB,WAAL,GACD,CACF,C,wDAEevlE,I,CAAM,CACpB,KAAK0sB,KAAL,CAAWqlE,UAAX,CAAwB,KAAKrlE,KAAL,CAAWqlE,UAAX,CAAsBttF,MAAtB,CACtB,SAACF,KAAD,QAAWA,MAAK,CAACvE,IAAN,CAAW6C,IAAX,CAAgByB,EAAhB,GAAuBtE,IAAI,CAAC6C,IAAL,CAAUyB,EAA5C,EADsB,CAAxB,CAIA,KAAKihE,WAAL,GACD,C,4CAESv0D,O,CAAS,CACjB,KAAK0b,KAAL,CAAW0lE,MAAX,CAAoBphF,OAApB,CACD,C,oDAEalI,O,CAAS,CACrB,KAAK4jB,KAAL,CAAWylE,UAAX,CAAwBrpF,OAAxB,CACA,KAAKy8D,WAAL,GACD,C,0DAEgBv8D,M,CAAQ,CACvB,MAAO,MAAK0jB,KAAL,CAAW+kE,eAAX,CAA2B3vF,QAA3B,CAAoCkH,MAApC,CAAP,CACD,C,kDAEYnG,I,CAAMiG,O,CAAS,gBAC1B,GAAI,KAAKuwC,eAAL,KAA2Bx2C,IAA/B,CAAqC,CACnC,KAAK2/C,UAAL,CAAgB3/C,IAAhB,EACD,CAEDiG,OAAO,CAAG,GACPvK,MADO,CACAuK,OADA,EAEPrE,MAFO,CAEA,SAACuE,MAAD,QAAY,CAAC,KAAI,CAACmuD,gBAAL,CAAsBnuD,MAAtB,CAAb,EAFA,EAGPjN,OAHO,CAGC,SAACiN,MAAD,QAAY,MAAI,CAAC0jB,KAAL,CAAW+kE,eAAX,CAA2Bx1F,IAA3B,CAAgC+M,MAAhC,CAAZ,EAHD,CAAV,CAKA,KAAKu8D,WAAL,GACA,KAAK/W,WAAL,CAAiB,gBAAjB,CAAmC,CAAE1lD,OAAO,CAAPA,OAAF,CAAnC,EACD,C,sDAEcA,O,CAAS,CACtBA,OAAO,CAAG,GAAGvK,MAAH,CAAUuK,OAAV,CAAV,CAEA,KAAK4jB,KAAL,CAAW+kE,eAAX,CAA6B,KAAK/kE,KAAL,CAAW+kE,eAAX,CAA2BhtF,MAA3B,CAAkC,SAACylD,QAAD,QAC7DphD,QAAO,CAAC5E,KAAR,CAAc,SAAC8E,MAAD,QAAYA,OAAM,CAAC1E,EAAP,GAAc4lD,QAAQ,CAAC5lD,EAAnC,EAAd,CAD6D,EAAlC,CAA7B,CAIA,KAAKihE,WAAL,GACA,KAAK/W,WAAL,CAAiB,kBAAjB,CAAqC,CAAE1lD,OAAO,CAAPA,OAAF,CAArC,EACD,C,+DAEoB,CACnB,GAAMA,QAAO,CAAG,KAAK4jB,KAAL,CAAW+kE,eAA3B,CACA,KAAK/kE,KAAL,CAAW+kE,eAAX,CAA6B,EAA7B,CACA,KAAKlsB,WAAL,GACA,KAAK/W,WAAL,CAAiB,kBAAjB,CAAqC,CAAE1lD,OAAO,CAAPA,OAAF,CAArC,EACD,C,+DAEoB,CACnB,MAAO,MAAK4jB,KAAL,CAAW+kE,eAAlB,CACD,C,oDAEapyD,M,CAAQ,iBACpBA,MAAM,CAAG,GAAG9gC,MAAH,CAAU8gC,MAAV,CAAT,CACA,MAAOA,OAAM,CAACnhC,IAAP,CAAY,SAAC2G,KAAD,QAAW,OAAI,CAAC6nB,KAAL,CAAWslE,UAAX,CAAsBntF,KAAtB,CAAX,EAAZ,CAAP,CACD,C,0DAEgBA,K,CAAO,CACtB,KAAK6nB,KAAL,CAAWslE,UAAX,CAAsBntF,KAAtB,EAA+B,CAAC,KAAK6nB,KAAL,CAAWslE,UAAX,CAAsBntF,KAAtB,CAAhC,CACA,KAAK0gE,WAAL,GACD,C,4DAEiB1gE,K,CAAO,CACvB,KAAK6nB,KAAL,CAAWulE,iBAAX,CAA+BptF,KAA/B,CACA,KAAK0gE,WAAL,GACD,C,kDAEY1gE,K,CAAO,CAClB,KAAK6nB,KAAL,CAAWwlE,QAAX,CAAsBrtF,KAAtB,CACA,KAAK0gE,WAAL,GACD,C,sDAEczgB,a,CAAengC,Q,CAAU,CACtC,KAAK+H,KAAL,CAAW6hD,SAAX,CAAuB,CACrB5pD,QAAQ,CAARA,QADqB,CAErBmgC,aAAa,CAAbA,aAFqB,CAGrBzuC,GAAG,CAAE,EAHgB,CAAvB,CAKD,C,sDAEcxR,K,CAAO,CACpB,GAAI,KAAK6nB,KAAL,CAAW6hD,SAAX,GAAyB,KAA7B,CAAoC,CAClC,KAAM,IAAIxwE,MAAJ,CAAU,wBAAV,CAAN,CACD,CAED,KAAK2uB,KAAL,CAAW6hD,SAAX,CAAqBl4D,GAArB,CAAyBpa,IAAzB,CAA8B4I,KAA9B,EACA,KAAK0gE,WAAL,GACD,C,qDAEe,CACd,KAAK74C,KAAL,CAAW6hD,SAAX,CAAuB,KAAvB,CACA,KAAKhJ,WAAL,GACD,C,iDAEa,CACZ,KAAKp5D,aAAL,CAAmBqmF,WAAnB,GACA,KAAKjtB,WAAL,GACD,C,iDAEa,CACZ,KAAKp5D,aAAL,CAAmBg5C,WAAnB,GACA,KAAKogB,WAAL,GACD,C,2CAEU,CACT,MAAO,MAAK74C,KAAL,CAAWklD,MAAlB,CACD,C,sCAEMjtD,Q,CAAU,iBACf,KAAKA,QAAL,CAAgBA,QAAhB,CACA,GAAI,KAAK+H,KAAL,CAAWy2C,YAAf,CAA6B,CAC3B,KAAK3gB,UAAL,CACE,KAAK79B,QAAL,CAAcrY,KAAd,CAAoB03C,WAApB,CAAgC,KAAKt3B,KAAL,CAAWy2C,YAAX,CAAwB7+D,EAAxD,CADF,EAIA,KAAKghE,YAAL,CACE,KAAKjsB,eAAL,EADF,CAEE,KAAK3sB,KAAL,CAAW+kE,eAAX,CAA2B90F,GAA3B,CAA+B,SAACqM,MAAD,QAC7B,OAAI,CAACqwC,eAAL,GAAuBvwC,OAAvB,CAA+B6F,aAA/B,CAA6C3F,MAAM,CAAC1E,EAApD,CAD6B,EAA/B,CAFF,EAMD,CACF,C,kDAEYu3B,K,CAAO,CAClB,KAAKnP,KAAL,CAAWolE,SAAX,CAAuBj2D,KAAvB,CACA,KAAK0pC,WAAL,GACD,C,8CAEUktB,O,CAAS,CAClB,KAAK/lE,KAAL,CAAW+lE,OAAX,CAAqBA,OAArB,CACA,KAAKltB,WAAL,GACD,C,0DAEgBp5D,a,CAAe,CAC9B,KAAKA,aAAL,CAAqBA,aAArB,CACA,KAAKgrC,QAAL,CAAgBhrC,aAAa,CAAC67E,WAAd,EAAhB,CACD,C,gDAEWrmF,I,CAAMmK,O,CAAS,CACzB,GAAI,CAAC,KAAKK,aAAV,CAAyB,CACvB,OACD,CAED,KAAKA,aAAL,CAAmBkB,UAAnB,CAA8B1L,IAA9B,CAAoCmK,OAApC,EACD,C,+CAEY,CACX,KAAKK,aAAL,CAAmBg9D,UAAnB,GACD,C,8CAEUtmE,I,CAAM,CACf,GAAI,KAAKw2C,eAAL,KAA2Bx2C,IAA/B,CAAqC,CACnC,OACD,CAED,KAAK6vF,YAAL,GACA,KAAKhmE,KAAL,CAAWy2C,YAAX,CAA0BtgE,IAA1B,CACA,KAAK0iE,WAAL,GACA,KAAK/W,WAAL,CAAiB,cAAjB,CAAiC3rD,IAAjC,EACD,C,mDAEc,CACb,GAAMA,KAAI,CAAG,KAAK6pB,KAAL,CAAWy2C,YAAxB,CACA,KAAKz2C,KAAL,CAAWy2C,YAAX,CAA0B,IAA1B,CACA,KAAKoC,WAAL,GACA,KAAKJ,kBAAL,GACA,GAAItiE,IAAJ,CAAU,CACR,KAAK2rD,WAAL,CAAiB,gBAAjB,CAAmC3rD,IAAnC,EACD,CACF,C,yDAEiB,CAChB,MAAO,MAAK6pB,KAAL,CAAWy2C,YAAlB,CACD,C,8CAEUtgE,I,CAAM,CACf,MAAO,MAAK6pB,KAAL,CAAWy2C,YAAX,GAA4BtgE,IAAnC,CACD,C,iDAEa,CACZ;AACA,KAAKo+D,QAAL,CAAc,KAAKv0C,KAAnB,EACA,KAAK8hC,WAAL,CAAiB,gBAAjB,EACD,C,sEAEsB/d,Q,CAAU,CAC/B,KAAK/jB,KAAL,CAAW61C,uBAAX,CAAqC9xB,QAArC,CACA,KAAK80B,WAAL,GACD,C,4EAEyB90B,Q,CAAU,CAClC,KAAK/jB,KAAL,CAAWkpC,UAAX,CAAsB1B,sBAAtB,CAA+CzjB,QAA/C,CACA,KAAK80B,WAAL,GACD,C,4EAEyBv8D,M,CAAQ/R,O,CAAS,CACzC,KAAKy1B,KAAL,CAAWkpC,UAAX,CAAsBC,YAAtB,CAAqC7sD,MAArC,CACA,KAAK0jB,KAAL,CAAWkpC,UAAX,CAAsBE,mBAAtB,CAA4C7+D,OAA5C,CACA,KAAKsuE,WAAL,GACD,C,gDAEW5gD,Q,CAAU,CACpB,KAAK+H,KAAL,CAAW/H,QAAX,CAAsBA,QAAQ,CAAC/e,SAAT,EAAtB,CACA,KAAK2/D,WAAL,GACD,C,0CAEQ2f,M,CAAQ,CACf,KAAKx4D,KAAL,CAAW8kE,KAAX,CAAmBtM,MAAnB,CACA,KAAK3f,WAAL,GACD,C,2CAEU,CACT,MAAO,MAAK74C,KAAZ,CACD,C,sDAEc7V,I,CAAM,CACnB,KAAK6V,KAAL,CAAWglE,UAAX,CAAwB76E,IAAxB,CACA,KAAK0uD,WAAL,GACD,C,uDAEgB,CACf,KAAK74C,KAAL,CAAWglE,UAAX,CAAwB,IAAxB,CACA,KAAKnsB,WAAL,GACD,C,8DAEkB1uD,I,CAAM,CACvB,KAAK6V,KAAL,CAAWilE,cAAX,CAA4B96E,IAA5B,CACA,KAAK0uD,WAAL,GACD,C,+DAEoB,CACnB,KAAK74C,KAAL,CAAWilE,cAAX,CAA4B,IAA5B,CACA,KAAKpsB,WAAL,GACD,C,0DAEgB1iE,I,CAAM,CACrB,KAAK2rD,WAAL,CAAiB,kBAAjB,CAAqC3rD,IAArC,EACD,C,sEAEsBA,I,CAAMmG,M,CAAQ,CACnC,KAAKwlD,WAAL,CAAiB,wBAAjB,CAA2C,CAAE3rD,IAAI,CAAJA,IAAF,CAAQmG,MAAM,CAANA,MAAR,CAA3C,EACA,KAAKuoF,qBAAL,CAA2Bx1F,OAA3B,CAAmC,SAAC00C,QAAD,QAAcA,SAAQ,CAAC5tC,IAAD,CAAOmG,MAAP,CAAtB,EAAnC,EACD,C,wDAEenG,I,CAAiC,IAA3By/D,GAA2B,2DAAtB,KAAsB,IAAfttE,MAAe,2DAAP,KAAO,CAC/C,KAAKotD,eAAL,CAAqBv/C,IAArB,EACA,KAAK6pB,KAAL,CAAWmlE,WAAX,CAAuB51F,IAAvB,CAA4B,CAC1B4G,IAAI,CAAJA,IAD0B,CAE1By/D,EAAE,CAAFA,EAF0B,CAG1BttE,KAAK,CAAE,CAACA,KAHkB,CAA5B,EAKA,KAAKuwE,WAAL,GACD,C,wDAEe1iE,I,CAAM,CACpB,KAAK6pB,KAAL,CAAWmlE,WAAX,CAAyB,KAAKnlE,KAAL,CAAWmlE,WAAX,CAAuBptF,MAAvB,CACvB,SAACkuF,OAAD,QAAaA,QAAO,CAAC9vF,IAAR,CAAayB,EAAb,GAAoBzB,IAAI,CAACyB,EAAtC,EADuB,CAAzB,CAIA,KAAKkqD,WAAL,CAAiB,mBAAjB,CAAsC3rD,IAAtC,EACA,KAAK0iE,WAAL,GACD,C,8EAE0B1iE,I,CAAM,oBAK3B,KAAKs0C,QALsB,CAE7BxD,iBAF6B,gBAE7BA,iBAF6B,CAG7B52C,mBAH6B,gBAG7BA,mBAH6B,CAI7BwJ,eAJ6B,gBAI7BA,eAJ6B,CAO/B,KAAKmmB,KAAL,CAAWklE,YAAX,CAA0B,CACxB/uF,IAAI,CAAJA,IADwB,CAExBI,IAAI,CAAE,QAFkB,CAGxBsD,eAAe,CAAfA,eAHwB,CAIxBkV,WAAW,CAAE,6BACX1e,oBAAmB,CAAC2D,kBAApB,CACEizC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,EAAkC4Y,WAAlC,EADF,CADW,EAJW,CAA1B,CASA,KAAK8pD,WAAL,GACD,C,0DAEgB1iE,I,CAAM,qBAKjB,KAAKs0C,QALY,CAEnBxD,iBAFmB,iBAEnBA,iBAFmB,CAGnB52C,mBAHmB,iBAGnBA,mBAHmB,CAInBwJ,eAJmB,iBAInBA,eAJmB,CAOrB,KAAKmmB,KAAL,CAAWklE,YAAX,CAA0B,CACxB/uF,IAAI,CAAJA,IADwB,CAExBI,IAAI,CAAE,MAFkB,CAGxBsD,eAAe,CAAfA,eAHwB,CAIxBkV,WAAW,CAAE,6BACX1e,oBAAmB,CAAC2D,kBAApB,CACEizC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,EAAkC4Y,WAAlC,EADF,CADW,EAJW,CAA1B,CASA,KAAK8pD,WAAL,GACD,C,2DAEkB,CACjB,KAAK74C,KAAL,CAAWklE,YAAX,CAA0B,IAA1B,CACA,KAAKrsB,WAAL,GACD,C,uCAEQ,CACP,KAAK+rB,eAAL,CAAqBv1F,OAArB,CAA6B,SAAC62F,QAAD,QAAcA,SAAQ,EAAtB,EAA7B,EACD,C,4DAEiBniD,Q,CAAU,CAC1B,KAAK6gD,eAAL,CAAqBr1F,IAArB,CAA0Bw0C,QAA1B,EACD,C,oEAEqBA,Q,CAAU,CAC9B,KAAK6gD,eAAL,CAAuB,KAAKA,eAAL,CAAqB7sF,MAArB,CACrB,SAACmuF,QAAD,QAAcA,SAAQ,GAAKniD,QAA3B,EADqB,CAAvB,CAGD,C,wEAEuBA,Q,CAAU,CAChC,KAAK8gD,qBAAL,CAA2Bt1F,IAA3B,CAAgCw0C,QAAhC,EACD,C,gFAE2BA,Q,CAAU,CACpC,KAAK8gD,qBAAL,CAA6B,KAAKA,qBAAL,CAA2B9sF,MAA3B,CAC3B,SAACmuF,QAAD,QAAcA,SAAQ,GAAKniD,QAA3B,EAD2B,CAA7B,CAGD,C,uBAGY4gD,8DAAf,E;;2PCzaA,GAAMrqC,wBAAS,CAAGpwD,gDAAM,CAACC,GAAV,gCAAf,CAMO,QAASg8F,cAAT,MAA0C,IAAjBhwF,KAAiB,MAAjBA,IAAiB,CAAX6yC,OAAW,MAAXA,OAAW,CAC/C,GAAMo9C,eAAc,CAAGr7B,4BAAW,CAAC,UAAM,CACvC/hB,OAAO,CAACyM,eAAR,CAAwBt/C,IAAxB,CAA8B,IAA9B,CAAoC,IAApC,EACD,CAFiC,CAE/B,CAAC6yC,OAAD,CAAU7yC,IAAV,CAF+B,CAAlC,CAD+C,cAKrBiwD,yBAAQ,CAAC,uBAAD,CALa,kEAKxCtK,KALwC,eAKjCuqC,QALiC,eAO/C,MACE,+BAAC,uBAAD,MACE,8BAAC,aAAD,EAAQ,WAAW,CAAC,MAApB,CAA2B,OAAO,CAAED,cAApC,EACGjwF,IAAI,CAAC2nB,YADR,KACsB,8BAAC,KAAD,MAAQ3nB,IAAI,CAACunB,SAAb,CADtB,WADF,CAIE,8BAAC,2BAAD,EACE,KAAK,CAAEo+B,KADT,CAEE,KAAK,CAAC,MAFR,CAGE,QAAQ,CAAE,kBAAAnuD,CAAC,CAAI,CACbwI,IAAI,CAAClB,IAAL,CAAYtH,CAAC,CAACnE,MAAF,CAAS2O,KAArB,CACA,GAAI,CAAChC,IAAI,CAAClB,IAAV,CAAgB,CACdoxF,QAAQ,CAAC,uBAAD,CAAR,CACD,CAFD,IAEO,CACLA,QAAQ,CAAC,IAAD,CAAR,CACD,CACF,CAVH,EAJF,CADF,CAmBD,C;;mSC/BD,GAAMC,eAAc,CAAGp8F,gDAAM,CAACC,GAAV,4BAApB,C,GAQMo8F,oB,gaACWpwF,I,CAAM,gBACnB,MAAO,WAAM,IACH6yC,QADG,CACS,KAAI,CAACv9C,KADd,CACHu9C,OADG,CAEXA,OAAO,CAACyM,eAAR,CAAwBt/C,IAAxB,CAA8B,IAA9B,CAAoC,IAApC,EACD,CAHD,CAID,C,uCAEQ,iBACqC,KAAK1K,KAD1C,CACCmU,KADD,aACCA,KADD,CACQ4mF,OADR,aACQA,OADR,CACiBjhB,MADjB,aACiBA,MADjB,CACyBv8B,OADzB,aACyBA,OADzB,CAGP,MACE,+BAAC,aAAD,MACE,8BAAC,OAAD,MACE,8BAAC,QAAD,+BADF,CAEE,8BAAC,YAAD,MACG,CAACu8B,MAAD,EAAW3lE,KAAK,CAACxZ,MAAN,CAAe,CAA1B,EACC,8BAAC,aAAD,EAAQ,WAAW,CAAC,QAApB,CAA6B,OAAO,CAAEogG,OAAtC,UAFJ,CAFF,CADF,CAWE,8BAAC,cAAD,MACG5mF,KAAK,CAAC3P,GAAN,CAAU,SAACkG,IAAD,CAAOjQ,CAAP,QACT,+BAAC,aAAD,EACE,GAAG,0BAAoBA,CAApB,CADL,CAEE,IAAI,CAAEiQ,IAFR,CAGE,OAAO,CAAE6yC,OAHX,EADS,EAAV,CADH,CAXF,CADF,CAuBD,C,uBAlCqB+X,kB,EAqCTwlC,uEAAf,E;;4dC1CA,GAAM/oC,cAAQ,CAAG5C,oDAAH,uBAGQ1qB,sBAAM,CAACrF,MAHf,CAIIqF,sBAAM,CAAC0oB,IAJX,CAAd,CAOA,GAAM6tC,cAAa,CAAGv8F,wDAAM,CAACowD,SAAD,CAAT,wBACf,SAAA7uD,KAAK,QAAKA,MAAK,CAAC+xD,QAAN,CAAiBA,aAAjB,CAA4B,EAAjC,EADU,CAAnB,C,GAIMkpC,U,oYACW,CAAE,C,oDAEHhlD,I,CAAM,IACVzpB,SADU,CACG,KAAKxsB,KADR,CACVwsB,QADU,CAGlB,GAAMG,KAAI,CAAGH,QAAQ,CAACwgE,OAAT,CAAiBh0E,IAAjB,CAAsB,SAAA2T,IAAI,QAAIA,KAAI,CAACxgB,EAAL,GAAY8pC,IAAI,CAAC4jC,MAArB,EAA1B,CAAb,CACA,MAAOltD,KAAI,CAAC+C,QAAZ,CACD,C,4CAESumB,I,CAAM,gBACd,MAAO,WAAM,IACHsH,QADG,CACS,KAAI,CAACv9C,KADd,CACHu9C,OADG,CAEXA,OAAO,CAAC8Y,WAAR,CAAoB,WAApB,CAAiCpgB,IAAjC,EACD,CAHD,CAID,C,0CAEQA,I,CAAM,iBACb,MAAO,WAAM,IACHsH,QADG,CACS,MAAI,CAACv9C,KADd,CACHu9C,OADG,CAEXA,OAAO,CAAC8Y,WAAR,CAAoB,UAApB,CAAgCpgB,IAAhC,EACD,CAHD,CAID,C,uCAEQ,iBAQH,KAAKj2C,KARF,CAELi2C,IAFK,aAELA,IAFK,CAGLilD,IAHK,aAGLA,IAHK,CAILC,IAJK,aAILA,IAJK,CAKLxhD,WALK,aAKLA,WALK,CAMLyhD,YANK,aAMLA,YANK,CAOL/xF,QAPK,aAOLA,QAPK,CAUP,MACE,+BAAC,aAAD,EAAe,QAAQ,CAAE+xF,YAAY,EAAIA,YAAY,CAACjvF,EAAb,GAAoB8pC,IAAI,CAAC9pC,EAAlE,EACE,8BAAC,OAAD,MACG+uF,IAAI,CACH,4DACE,8BAAC,2BAAD,EACE,KAAK,CAAC,WADR,CAEE,EAAE,oBAAcjlD,IAAI,CAACzsC,IAAnB,CAFJ,CAGE,WAAW,CAAC,WAHd,CAIE,KAAK,CAAEysC,IAAI,CAACzsC,IAJd,CAKE,QAAQ,CAAE,KAAK6xF,YALjB,CAME,KAAK,CAAE,CAACplD,IAAI,CAACzsC,IAAN,CAAa,kBAAb,CAAkC,KAN3C,EADF,CAUE,8BAAC,2BAAD,EACE,KAAK,CAAC,QADR,CAEE,EAAE,sBAAgBysC,IAAI,CAACzsC,IAArB,CAFJ,CAGE,WAAW,CAAC,MAHd,CAIE,KAAK,CAAEysC,IAAI,CAAC+jC,MAJd,CAKE,QAAQ,CAAE,KAAKqhB,YALjB,CAME,KAAK,CACHplD,IAAI,CAAC+jC,MAAL,GAAgBjnE,QAAQ,CAACkjC,IAAI,CAAC+jC,MAAN,CAAc,EAAd,CAAxB,EAA6C/jC,IAAI,CAAC+jC,MAAL,EAAe,CAA5D,CACI,kCADJ,CAEI,KATR,EAVF,CADG,CAyBH,4DACE,8BAAC,KAAD,MAAQ/jC,IAAI,CAACzsC,IAAb,CADF,CAEE,8BAAC,KAAD,iBACU,8BAAC,KAAD,MAAQysC,IAAI,CAAC+jC,MAAb,CADV,CAFF,CAKE,8BAAC,YAAD,MACG/jC,IAAI,CAACqlD,OAAL,IACC,8BAAC,KAAD,iBACU,8BAAC,KAAD,MAAQ,KAAKC,aAAL,CAAmBtlD,IAAnB,CAAR,CADV,CAFJ,CAMG0D,WAAW,EAAI,CAAC1D,IAAI,CAACqlD,OAAL,EAAhB,EAAkCH,IAAlC,EACC,8BAAC,aAAD,EACE,OAAO,CAAE,KAAK56C,QAAL,CAActK,IAAd,CADX,CAEE,IAAI,CAAC,QAFP,CAGE,WAAW,CAAC,aAHd,cAPJ,CAeGklD,IAAI,EAAIxhD,WAAR,EAAuB1D,IAAI,CAACulD,YAAL,CAAkB7hD,WAAlB,CAAvB,EACC,8BAAC,aAAD,EACE,OAAO,CAAE,KAAK6G,SAAL,CAAevK,IAAf,CADX,CAEE,IAAI,CAAC,QAFP,CAGE,IAAI,CAAEqE,oBAAK,CAAC4T,CAHd,EAhBJ,CALF,CA1BJ,CADF,CA2DE,8BAAC,OAAD,MACGgtC,IAAI,CACH,4DACE,8BAAC,2BAAD,EACE,KAAK,CAAC,4BADR,CAEE,EAAE,8BAAwBjlD,IAAI,CAACzsC,IAA7B,CAFJ,CAGE,WAAW,CAAC,GAHd,CAIE,KAAK,WAAKysC,IAAI,CAAC+L,kBAAL,CAAwBz+C,CAA7B,aACH0yC,IAAI,CAAC+L,kBAAL,CAAwB3mD,CADrB,CAJP,CAOE,QAAQ,CAAE,KAAKggG,YAPjB,EADF,CAWE,8BAAC,2BAAD,EACE,KAAK,CAAC,0BADR,CAEE,EAAE,4BAAsBplD,IAAI,CAACzsC,IAA3B,CAFJ,CAGE,WAAW,CAAC,GAHd,CAIE,KAAK,WAAKysC,IAAI,CAAC8jC,gBAAL,CAAsBx2E,CAA3B,aAAgC0yC,IAAI,CAAC8jC,gBAAL,CAAsB1+E,CAAtD,CAJP,CAKE,QAAQ,CAAE,KAAKggG,YALjB,EAXF,CADG,CAqBH,4DACE,8BAAC,KAAD,6BAEE,8BAAC,KAAD,iBAAYplD,IAAI,CAAC+L,kBAAL,CAAwBz+C,CAApC,aACE0yC,IAAI,CAAC+L,kBAAL,CAAwB3mD,CAD1B,EAFF,CADF,CAOE,8BAAC,KAAD,2BAEE,8BAAC,KAAD,gBAAW46C,IAAI,CAAC8jC,gBAAL,CAAsBx2E,CAAjC,aACE0yC,IAAI,CAAC8jC,gBAAL,CAAsB1+E,CADxB,EAFF,CAPF,CAaE,8BAAC,KAAD,4BACqB,8BAAC,KAAD,UAAS46C,IAAI,CAACgM,gBAAd,CADrB,CAbF,CAtBJ,CA3DF,CAqGE,8BAAC,OAAD,MACGi5C,IAAI,EACH,8BAAC,2BAAD,EACE,KAAK,CAAC,oBADR,CAEE,EAAE,4BAAsBjlD,IAAI,CAACzsC,IAA3B,CAFJ,CAGE,WAAW,CAAC,GAHd,CAIE,KAAK,CAAEysC,IAAI,CAACgM,gBAJd,CAKE,QAAQ,CAAE,KAAKo5C,YALjB,EAFJ,CArGF,CAgHGhyF,QAhHH,CADF,CAoHD,C,kBAtJgBisD,kB,EAyJJ2lC,6DAAf,E;;GC9KMQ,sB,kbACmB,gCACuC,KAAKz7F,KAD5C,CACbwsB,QADa,aACbA,QADa,CACH4uE,YADG,aACHA,YADG,CACWjnF,KADX,aACWA,KADX,CACkBopC,OADlB,aACkBA,OADlB,CAC2Bw9C,OAD3B,aAC2BA,OAD3B,CAGrB,MAAOvuE,SAAQ,CAACs1B,KAAT,CAAe45C,eAAf,GAAiCl3F,GAAjC,CAAqC,SAAA+6D,IAAI,CAAI,CAClD,MACE,+BAAC,aAAD,EAAe,GAAG,gBAAUA,IAAI,CAACA,IAAf,CAAlB,EACE,8BAAC,KAAD,eAAcA,IAAI,CAACA,IAAnB,CADF,CAEGA,IAAI,CAACzd,KAAL,CAAWt9C,GAAX,CAAe,SAAAyxC,IAAI,CAAI,CACtB,GAAImlD,YAAY,EAAInlD,IAAI,CAAC9pC,EAAL,GAAYivF,YAAY,CAACjvF,EAA7C,CAAiD,CAC/C,MACE,+BAAC,eAAD,gBAAM,GAAG,CAAE8pC,IAAI,CAAC9pC,EAAhB,CAAoB,IAAI,CAAE8pC,IAA1B,EAAoC,KAAI,CAACj2C,KAAzC,EACE,8BAAC,eAAD,EACE,MAAM,CAAEi2C,IAAI,CAAC0lD,QAAL,EADV,CAEE,OAAO,CAAEZ,OAFX,CAGE,OAAO,CAAEx9C,OAHX,CAIE,KAAK,CAAEppC,KAJT,EADF,CADF,CAUD,CAXD,IAWO,CACL,MAAO,+BAAC,eAAD,gBAAM,GAAG,CAAE8hC,IAAI,CAAC9pC,EAAhB,CAAoB,IAAI,CAAE8pC,IAA1B,EAAoC,KAAI,CAACj2C,KAAzC,EAAP,CACD,CACF,CAfA,CAFH,CADF,CAqBD,CAtBM,CAAP,CAuBD,C,uCAEQ,CACP,MAAO,6DAAG,KAAK47F,oBAAL,EAAH,CAAP,CACD,C,wBA/BsBtmC,kB,EAkCVmmC,0EAAf,E;;GCxCMI,iB,CACJ,iBAAYryF,IAAZ,CAAkB2K,KAAlB,CAAyB,CAAC,wDACxB,KAAK3K,IAAL,CAAYA,IAAZ,CACA,KAAK2K,KAAL,CAAaA,KAAb,CACD,C,CAGY,8CACb,GAAI0nF,iBAAJ,CAAY,iBAAZ,CAA+B,CAAC,SAAD,CAAY,MAAZ,CAA/B,CADa,CAEb,GAAIA,iBAAJ,CAAY,yBAAZ,CAAuC,CAAC,SAAD,CAAY,SAAZ,CAAuB,QAAvB,CAAvC,CAFa,CAGb,GAAIA,iBAAJ,CAAY,iBAAZ,CAA+B,CAAC,UAAD,CAA/B,CAHa,CAAf,E;;GCIMA,gB,wYACInkF,S,CAAW,IACTokF,QADS,CACG,KAAK97F,KADR,CACT87F,OADS,CAEjB,MAAO,WAAM,CACXA,OAAO,CAACpkF,SAAD,CAAP,CACD,CAFD,CAGD,C,sDAEchN,I,CAAM,gBACnB,MAAO,WAAM,IACH6yC,QADG,CACS,KAAI,CAACv9C,KADd,CACHu9C,OADG,CAEXA,OAAO,CAACyM,eAAR,CAAwBt/C,IAAxB,CAA8B,IAA9B,CAAoC,IAApC,EACD,CAHD,CAID,C,uCAEQ,oBACCqxF,QADD,CACa,KAAK/7F,KADlB,CACC+7F,OADD,CAGP,MACE,0CACE,8BAAC,QAAD,MAAWA,OAAO,CAACvyF,IAAnB,CADF,CAEGuyF,OAAO,CAAC5nF,KAAR,CACE3P,GADF,CACM,SAAAkG,IAAI,QAAI,IAAIyJ,WAAK,CAACzJ,IAAD,CAAT,EAAJ,EADV,EAEElG,GAFF,CAEM,SAAAkG,IAAI,QACP,+BAAC,OAAD,EAAS,GAAG,2BAAqBA,IAAI,CAACkoB,SAA1B,CAAZ,EACE,8BAAC,aAAD,EAAQ,WAAW,CAAC,MAApB,CAA2B,OAAO,CAAE,MAAI,CAAC+nE,cAAL,CAAoBjwF,IAApB,CAApC,EACGA,IAAI,CAAC2nB,YADR,KACsB,8BAAC,KAAD,MAAQ3nB,IAAI,CAACunB,SAAb,CADtB,WADF,CAKE,8BAAC,aAAD,EACE,WAAW,CAAC,QADd,CAEE,OAAO,CAAE,MAAI,CAAC6pE,OAAL,CAAapxF,IAAI,CAACkoB,SAAlB,CAFX,iBALF,CADO,EAFV,CAFH,CADF,CAqBD,C,qBAvCmB0iC,kB,EA0CPumC,iEAAf,E;;8NC9CA,GAAMhB,0BAAc,CAAGp8F,wDAAM,CAAC4wD,aAAD,CAAT,6BAApB,C,GAKM2sC,sB,sZACK,gBACP,MACE,+BAAC,yBAAD,MACGC,QAAQ,CAACz3F,GAAT,CAAa,SAAAu3F,OAAO,QACnB,+BAAC,aAAD,gBAAS,GAAG,CAAEA,OAAO,CAACvyF,IAAtB,CAA4B,OAAO,CAAEuyF,OAArC,EAAkD,KAAI,CAAC/7F,KAAvD,EADmB,EAApB,CADH,CADF,CAOD,C,wBATsBs1D,kB,EAYV0mC,0EAAf,E;;ACrBAz8F,MAAM,CAACqD,KAAP,CAAeA,YAAf,C,GAEMs5F,oB,yBACJ,oBAAc,CAAC,0DACb,KAAK7F,cAAL,CAAsB,IAAtB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CACA,KAAKC,SAAL,CAAiB,IAAjB,CACA,KAAKtuF,KAAL,CAAa,IAAb,CACA,KAAKR,MAAL,CAAc,IAAd,CACA,KAAK3I,OAAL,CAAe,IAAf,CACA,KAAK03F,WAAL,CAAmB,KAAnB,CAEA,KAAKtuF,IAAL,CAAY,CAAZ,CACD,C,kFAEIpJ,O,MAA4B,IAAjBmJ,MAAiB,MAAjBA,KAAiB,CAAVR,MAAU,MAAVA,MAAU,CAC/B,KAAK3I,OAAL,CAAeA,OAAf,CACA,KAAKsJ,KAAL,CAAa,GAAIxF,sBAAJ,EAAb,CAEA,KAAKqF,KAAL,CAAaA,KAAb,CACA,KAAKR,MAAL,CAAcA,MAAd,CAEA,KAAK4uF,cAAL,CAAsB,GAAIzzF,sBAAJ,EAAtB,CACA,KAAK0zF,eAAL,CAAuB,GAAI1zF,mCAAJ,CACpB,KAAKsF,IAAL,CAAY,KAAKD,KAAlB,CAA2B,CAAC,CADP,CAEpB,KAAKC,IAAL,CAAY,KAAKD,KAAlB,CAA2B,CAFN,CAGpB,KAAKC,IAAL,CAAY,KAAKT,MAAlB,CAA4B,CAHP,CAIpB,KAAKS,IAAL,CAAY,KAAKT,MAAlB,CAA4B,CAAC,CAJR,CAKrB,CAAC,IALoB,CAMrB,KANqB,CAAvB,CASA,KAAK6uF,eAAL,CAAqB10F,QAArB,CAA8BkI,GAA9B,CAAkC,CAAlC,CAAqC,CAArC,CAAwC,GAAxC,EACA,KAAKwsF,eAAL,CAAqBrxD,MAArB,CAA4B,CAA5B,CAA+B,CAA/B,CAAkC,GAAlC,EAEA,KAAK6xD,QAAL,CAAgB,GAAIl0F,8BAAJ,CAAwB,CAAEi4B,KAAK,CAAE,IAAT,CAAewF,SAAS,CAAE,IAA1B,CAAxB,CAAhB,CACA,KAAKy2D,QAAL,CAAcC,aAAd,CAA4Bx3F,MAAM,CAACy3F,gBAAnC,EACA,KAAKF,QAAL,CAAc1uD,OAAd,CAAsB,KAAKngC,KAA3B,CAAkC,KAAKR,MAAvC,EACA,KAAKqvF,QAAL,CAAcG,SAAd,CAA0B,KAA1B,CACA,KAAKH,QAAL,CAAct7D,OAAd,CAAsB07D,YAAtB,CAAmC,0BAAnC,EACA,KAAKJ,QAAL,CAAcS,WAAd,CAA4B,IAA5B,CACA,KAAKT,QAAL,CAAcU,WAAd,CAA4B,GAA5B,CACA14F,OAAO,CAACwgC,WAAR,CAAoB,KAAKw3D,QAAL,CAAcM,UAAlC,EAEA,KAAKZ,WAAL,CAAmB,IAAnB,CACA,KAAKD,SAAL,CAAiB,GAAIxC,kBAAJ,CAAc,KAAKsC,cAAnB,CAAmC,MAAnC,CAAjB,CAEA,KAAK5oD,MAAL,GACD,C,uCAEQ,CACP,KAAKqpD,QAAL,CAAce,KAAd,GACA,KAAKf,QAAL,CAAcrpD,MAAd,CAAqB,KAAK4oD,cAA1B,CAA0C,KAAKC,eAA/C,EACA,KAAKC,SAAL,CAAe9oD,MAAf,GAEArU,qBAAqB,CAAC,KAAKqU,MAAL,CAAYpsC,IAAZ,CAAiB,IAAjB,CAAD,CAArB,CACD,C,gDAE2B,IAAjB4G,MAAiB,OAAjBA,KAAiB,CAAVR,MAAU,OAAVA,MAAU,CAC1B,KAAKQ,KAAL,CAAaA,KAAb,CACA,KAAKR,MAAL,CAAcA,MAAd,CACA,KAAKqvF,QAAL,CAAc1uD,OAAd,CAAsB7oC,MAAM,CAACC,UAA7B,CAAyCD,MAAM,CAACG,WAAhD,EACA,KAAK62F,SAAL,CAAeyB,MAAf,GACD,C,yBAGYkE,0EAAf,E;;qaCjEA,GAAM19F,+BAAW,CAAGC,gDAAM,CAACC,GAAV,qCAAjB,C,GAaMy9F,sC,kHACJ,4BAAYn8F,KAAZ,CAAmB,8EACjB,wIAAMA,KAAN,GACA,MAAKY,SAAL,CAAiBC,kBAAA,EAAjB,CACA,MAAKuH,KAAL,CAAa,GAAI8zF,mBAAJ,EAAb,CAHiB,aAIlB,C,sHAEmB,CAClB38F,MAAM,CAAC2B,gBAAP,CAAwB,QAAxB,CAAkC,KAAKP,QAAL,CAAcU,IAAd,CAAmB,IAAnB,CAAlC,EAEA,GAAMm3F,aAAY,CAAG,KAAK53F,SAAL,CAAerF,OAApC,CAEA,KAAK6M,KAAL,CAAWyW,IAAX,CAAgB25E,YAAhB,CAA8B,KAAKG,aAAL,EAA9B,EACD,C,qDAEe,CACd,MAAO,CACL1wF,KAAK,CAAE,KAAKrH,SAAL,CAAerF,OAAf,CAAuBsE,WADzB,CAEL4H,MAAM,CAAE,KAAK7G,SAAL,CAAerF,OAAf,CAAuBuE,YAF1B,CAAP,CAID,C,mEAEsB,CACrBP,MAAM,CAACiC,mBAAP,CAA2B,QAA3B,CAAqC,KAAKb,QAAL,CAAcU,IAAd,CAAmB,IAAnB,CAArC,EACD,C,2CAEU,CACT,GAAI,CAAC,KAAKT,SAAL,CAAerF,OAApB,CAA6B,CAC3B,OACD,CAED,GAAM0mC,WAAU,CAAG,KAAK02D,aAAL,EAAnB,CACA,KAAKvwF,KAAL,CAAWzH,QAAX,CAAoBshC,UAApB,EACD,C,oEAEqBlgC,S,CAAWC,S,CAAW,CAC1C,MAAO,MAAP,CACD,C,uCAEQ,CACP,MAAO,wBAAC,8BAAD,EAAa,GAAG,CAAE,KAAKpB,SAAvB,EAAP,CACD,C,gCAzC8BC,kB,EA4ClBs7F,qGAAf,E;;uMCtDA,GAAMttC,gBAAS,CAAGpwD,gDAAM,CAACC,GAAV,wBAAf,C,GAIM09F,Y,yZACmB,mBACb5vE,SADa,CACA,KAAKxsB,KADL,CACbwsB,QADa,CAErB,MAAOA,SAAQ,CAACs1B,KAAT,CAAe45C,eAAf,GAAiCl3F,GAAjC,CAAqC,SAAC+6D,IAAD,CAAU,CACpD,MACE,+BAAC,eAAD,MACE,8BAAC,aAAD,EAAe,GAAG,gBAAUA,IAAI,CAACA,IAAf,CAAlB,EACE,8BAAC,KAAD,eAAcA,IAAI,CAACA,IAAnB,CADF,CAEGA,IAAI,CAACzd,KAAL,CAAWt9C,GAAX,CAAe,SAACyxC,IAAD,QACd,+BAAC,eAAD,gBAAM,GAAG,CAAEA,IAAI,CAAC9pC,EAAhB,CAAoB,IAAI,CAAE8pC,IAA1B,EAAoC,KAAI,CAACj2C,KAAzC,EADc,EAAf,CAFH,CADF,CADF,CAUD,CAXM,CAAP,CAYD,C,mDAEc,CAAE,C,uCAER,CACP,MAAO,6DAAG,KAAK47F,oBAAL,EAAH,CAAP,CACD,C,mBArBiBtmC,kB,EAwBL8mC,gEAAf,E;;yMCRA,GAAMvtC,qBAAS,CAAGpwD,gDAAM,CAACC,GAAV,6BAAf,CAIA,GAAM29F,sBAAU,CAAG,QAAbA,WAAa,MAAkB,IAAfvyE,SAAe,MAAfA,QAAe,CACnC,GAAMyK,MAAK,CAAGi1C,2BAAU,CAACR,UAAD,CAAxB,CACA,GAAMr8C,KAAI,CAAG4H,KAAK,CAAColB,WAAnB,CAFmC,cAGHghB,yBAAQ,CAAC,GAAImyB,cAAJ,EAAD,CAHL,kEAG5BtgE,QAH4B,eAGlByzB,WAHkB,eAKnCqpB,0BAAS,CAAC,UAAM,CACd98C,QAAQ,CAACs1B,KAAT,CAAeu4B,OAAf,CACE,GAAIV,cAAJ,CAAa,CACXnwE,IAAI,CAAE,MADK,CAEX+1D,IAAI,CAAE,CAFK,CAGXya,MAAM,CAAE,IAHG,CAIXH,MAAM,CAAEltD,IAAI,CAACxgB,EAJF,CAKX61C,kBAAkB,CAAE,GAAIt5C,QAAO,CAAClF,MAAZ,CAAmB,CAAC,GAApB,CAAyB,CAAzB,CALT,CAMXu2E,gBAAgB,CAAE,GAAIrxE,QAAO,CAAClF,MAAZ,CAAmB,EAAnB,CAAuB,CAAvB,CANP,CAAb,CADF,EAWAgpB,QAAQ,CAACs1B,KAAT,CAAeu4B,OAAf,CACE,GAAIV,cAAJ,CAAa,CACXnwE,IAAI,CAAE,KADK,CAEX+1D,IAAI,CAAE,CAFK,CAGXya,MAAM,CAAE,IAHG,CAIXH,MAAM,CAAE,IAJG,CAKX73B,kBAAkB,CAAE,GAAIt5C,QAAO,CAAClF,MAAZ,CAAmB,GAAnB,CAAwB,CAAxB,CALT,CAMXu2E,gBAAgB,CAAE,GAAIrxE,QAAO,CAAClF,MAAZ,CAAmB,CAAC,EAApB,CAAwB,CAAxB,CANP,CAAb,CADF,EAWAgpB,QAAQ,CAAC8vE,SAAT,CAAmB3vE,IAAnB,EACAH,QAAQ,CAAChjB,IAAT,CAAgB,WAAhB,CAEAy2C,WAAW,CAACzzB,QAAQ,CAACxpB,KAAT,EAAD,CAAX,CACD,CA3BQ,CA2BN,CAACi9C,WAAD,CA3BM,CAAT,CA6BA,GAAMs8C,eAAc,CAAGj9B,4BAAW,CAChC,SAACp9D,CAAD,CAAO,CACLsqB,QAAQ,CAAChjB,IAAT,CAAgBtH,CAAC,CAACnE,MAAF,CAAS2O,KAAzB,CACAuzC,WAAW,CAACzzB,QAAQ,CAACxpB,KAAT,EAAD,CAAX,CACD,CAJ+B,CAKhC,CAACwpB,QAAD,CAAWyzB,WAAX,CALgC,CAAlC,CAQA,GAAMu8C,mBAAkB,CAAGl9B,4BAAW,CAAC,UAAM,CAC3C,oFAAC,wLAE0BoJ,gBAAU,CAACl8C,QAAD,CAFpC,QAESvM,QAFT,eAGGuM,QAAQ,CAACrgB,EAAT,CAAc8T,QAAQ,CAACzU,IAAT,CAAcynB,MAA5B,CACAgtB,WAAW,CAACzzB,QAAQ,CAACxpB,KAAT,EAAD,CAAX,CAJH,+EAMGS,OAAO,CAAC4sD,KAAR,cANH,oEAAD,KASD,CAVqC,CAUnC,CAAC7jC,QAAD,CAAWyzB,WAAX,CAVmC,CAAtC,CAYA,GAAIzzB,QAAQ,CAACrgB,EAAb,CAAiB,CACf,MACE,+BAAC,gCAAD,EACE,EAAE,CAAE,CAAEswF,QAAQ,iBAAWjwE,QAAQ,CAACrgB,EAApB,CAAV,CAAoCooB,KAAK,CAAE,CAAE+rC,IAAI,CAAEx2C,QAAR,CAA3C,CADN,EADF,CAKD,CAED,MACE,6DACE,8BAAC,gBAAD,MACE,8BAAC,aAAD,oBAEE,8BAAC,UAAD,EAAY,EAAE,CAAC,GAAf,EACE,8BAAC,kBAAD,MADF,CAFF,CADF,CAQE,8BAAC,2BAAD,EACE,WAAW,CAAC,MADd,CAEE,KAAK,CAAE0C,QAAQ,CAAChjB,IAFlB,CAGE,QAAQ,CAAE+yF,cAHZ,CAIE,KAAK,CAAE,CAAC/vE,QAAQ,CAAChjB,IAAV,CAAiB,kBAAjB,CAAsC,KAJ/C,EARF,CAeE,8BAAC,gBAAD,EAAO,QAAQ,CAAEgjB,QAAjB,EAfF,CAgBE,8BAAC,aAAD,EAAQ,WAAW,CAAC,aAApB,CAAkC,OAAO,CAAEgwE,kBAA3C,gBAhBF,CADF,CADF,CAwBD,CAtFD,CAwFeH,+EAAf,E;;ACrHeA,yEAAf,E;;yNCcA,GAAMK,gBAAe,CAAGj+F,gDAAM,CAACC,GAAV,uBAArB,CAKA,GAAMi+F,UAAI,CAAG,QAAPA,KAAO,EAAM,iBACOnzB,2BAAU,CAACR,UAAD,CADjB,CACTrvB,WADS,aACTA,WADS,eAEWghB,yBAAQ,CAAC,IAAD,CAFnB,kEAEV1nC,MAFU,eAEF2pE,SAFE,eAIjB,GAAMl0B,WAAU,CAAGpJ,4BAAW,CAAC,UAAM,CACnC,GAAMu9B,QAAO,sHAAG,wKACSl0B,mBAAkB,EAD3B,QACR1oD,QADQ,eAEdxc,OAAO,CAACya,GAAR,CAAY+B,QAAZ,EACA28E,SAAS,CAAC38E,QAAQ,CAACzU,IAAT,CAAcynB,MAAf,CAAT,CAHc,sDAAH,kBAAP4pE,QAAO,0CAAb,CAMAA,OAAO,GACR,CAR6B,CAQ3B,CAACD,SAAD,CAAYj0B,kBAAZ,CAR2B,CAA9B,CAUA,MACE,+BAAC,gBAAD,MACE,8BAAC,aAAD,aADF,CAGGhvB,WAAW,GAAKA,WAAW,CAACxtC,EAAZ,GAAmB,CAAnB,EAAwBwtC,WAAW,CAACxtC,EAAZ,GAAmB,CAAhD,CAAX,EACC,8BAAC,aAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,WAAW,CAAC,aAAlC,CAAgD,OAAO,CAAEu8D,UAAzD,qBAJJ,CASGz1C,MAAM,EACL,8BAAC,eAAD,MACE,8BAAC,KAAD,sBADF,CAEE,8BAAC,KAAD,MACE,8BAAC,UAAD,EAAY,EAAE,iBAAWA,MAAX,CAAd,kBAA6CA,MAA7C,EADF,CAFF,CAVJ,CADF,CAoBD,CAlCD,CAoCe0pE,uDAAf,E;;ACvDeA,kDAAf,E;;;;;;;;uMCqBA,GAAMG,eAAc,CAAGr+F,gDAAM,CAACC,GAAV,wBAApB,CAIA,GAAMq+F,YAAK,CAAG,QAARA,MAAQ,MAAmB,IAAhBrlF,UAAgB,MAAhBA,SAAgB,CAC/B,GAAMoxD,SAAQ,CAAGU,2BAAU,CAACN,aAAD,CAA3B,CAD+B,gBAEPM,2BAAU,CAACR,UAAD,CAFH,CAEvBrvB,WAFuB,aAEvBA,WAFuB,eAGLghB,yBAAQ,CAAC,IAAD,CAHH,kEAGxBtK,KAHwB,eAGjBuqC,QAHiB,eAK/B,GAAMoC,SAAQ,uHAAG,iBAAO91D,MAAP,4IAAiB+1D,aAAjB,OAAiBA,aAAjB,uCAEPC,MAAS,CAACh2D,MAAM,CAACxX,QAAR,CAAkBwX,MAAM,CAACkhC,QAAzB,CAFF,8BAGPI,uBAAc,CAACM,QAAD,CAHP,QAIbm0B,aAAa,CAAC,KAAD,CAAb,CAJa,+EAMb,GAAI,YAAElQ,MAAF,GAAa,GAAjB,CAAsB,CACpB6N,QAAQ,CAAC,mCAAD,CAAR,CACD,CARY,QAWfqC,aAAa,CAAC,KAAD,CAAb,CAXe,oEAAH,kBAARD,SAAQ,iDAAd,CAcA,GAAIrjD,WAAJ,CAAiB,CACf,MACE,+BAAC,gBAAD,MACE,8BAAC,aAAD,8BACuB,8BAAC,KAAD,MAAQA,WAAW,CAACjqB,QAApB,CADvB,CADF,CAKE,8BAAC,IAAD,EAAM,EAAE,CAAC,SAAT,EACE,8BAAC,aAAD,EAAQ,WAAW,CAAC,aAApB,YADF,CALF,CADF,CAWD,CAED,MACE,+BAAC,4BAAD,EACE,aAAa,CAAE,CAAEA,QAAQ,CAAE,EAAZ,CAAgB04C,QAAQ,CAAE,EAA1B,CADjB,CAEE,QAAQ,CAAE40B,QAFZ,CAGE,gBAAgB,CAAEG,aAAA,GAAaC,KAAb,CAAmB,CACnC1tE,QAAQ,CAAEytE,aAAA,GAAatxF,QAAb,CAAsB,UAAtB,CADyB,CAEnCu8D,QAAQ,CAAE+0B,aAAA,GAAatxF,QAAb,CAAsB,UAAtB,CAFyB,CAAnB,CAHpB,EAQG,SAAC7L,KAAD,CAAW,IAERknC,OAFQ,CASNlnC,KATM,CAERknC,MAFQ,CAGRm2D,OAHQ,CASNr9F,KATM,CAGRq9F,OAHQ,CAIRC,MAJQ,CASNt9F,KATM,CAIRs9F,MAJQ,CAKRC,YALQ,CASNv9F,KATM,CAKRu9F,YALQ,CAMRlC,YANQ,CASNr7F,KATM,CAMRq7F,YANQ,CAORmC,UAPQ,CASNx9F,KATM,CAORw9F,UAPQ,CAQRC,YARQ,CASNz9F,KATM,CAQRy9F,YARQ,CAWV,GAAMC,oBAAmB,CAAG,QAAtBA,oBAAsB,CAAC7+F,KAAD,CAAW,CACrC+7F,QAAQ,CAAC,IAAD,CAAR,CACAS,YAAY,CAACx8F,KAAD,CAAZ,CACD,CAHD,CAKA,MACE,+BAAC,gBAAD,EACE,SAAS,CAAE6Y,SADb,CAEE,EAAE,CAAC,MAFL,CAGE,QAAQ,CAAE+lF,YAHZ,EAKE,8BAAC,aAAD,cALF,CAME,8BAAC,OAAD,MACE,8BAAC,MAAD,MACE,8BAAC,2BAAD,EACE,KAAK,CAAC,UADR,CAEE,EAAE,CAAC,UAFL,CAGE,WAAW,CAAC,UAHd,CAIE,KAAK,CAAEv2D,MAAM,CAACxX,QAJhB,CAKE,QAAQ,CAAEguE,mBALZ,CAME,MAAM,CAAEF,UANV,CAOE,KAAK,CAAEH,OAAO,CAAC3tE,QAAR,EAAoB4tE,MAAM,CAAC5tE,QAPpC,EADF,CADF,CAYE,8BAAC,MAAD,MACE,8BAAC,2BAAD,EACE,KAAK,CAAC,UADR,CAEE,EAAE,CAAC,UAFL,CAGE,WAAW,CAAC,UAHd,CAIE,KAAK,CAAEwX,MAAM,CAACkhC,QAJhB,CAKE,QAAQ,CAAEs1B,mBALZ,CAME,MAAM,CAAEF,UANV,CAOE,KAAK,CAAEH,OAAO,CAACj1B,QAAR,EAAoBk1B,MAAM,CAACl1B,QAPpC,CAQE,IAAI,CAAC,UARP,EADF,CAZF,CANF,CAgCG/X,KAAK,EACJ,8BAAC,cAAD,MACE,8BAAC,WAAD,MAAQA,KAAR,CADF,CAjCJ,CAqCE,8BAAC,OAAD,MACE,8BAAC,aAAD,EACE,WAAW,CAAC,aADd,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAEktC,YAAY,EAAI9xF,MAAM,CAACoN,OAAP,CAAeykF,MAAf,EAAuB3iG,MAAvB,GAAkC,CAH9D,UADF,CAQE,8BAAC,aAAD,EACE,WAAW,CAAC,aADd,CAEE,OAAO,CAAE,iBAACuH,CAAD,CAAO,CACdA,CAAC,CAAC/B,cAAF,GACA+B,CAAC,CAAChC,eAAF,GAEAy9F,KAAK,CAAC,iBAAD,CAAL,CACD,CAPH,aARF,CArCF,CADF,CA4DD,CApFH,CADF,CAwFD,CAzHD,CA2HeZ,2DAAf,E;;4jCC7IA,GAAMa,KAAI,CAAGn/F,gDAAM,CAACC,GAAV,2BAAV,CAWO,GAAMm/F,eAAc,CAAGp/F,gDAAM,CAACC,GAAV,4BAApB,CAOA,GAAMo/F,cAAa,CAAGr/F,gDAAM,CAACC,GAAV,4BAAnB,CAMA,GAAMq/F,eAAc,CAAGt/F,gDAAM,CAACC,GAAV,4BAApB,CAMA,GAAMs/F,kBAAQ,CAAG,QAAXA,SAAW,EAAM,CAC5B,MACE,6DACE,8BAAC,IAAD,MADF,CAEE,8BAAC,2BAAD,MAFF,CAGE,8BAAC,cAAD,MACE,8BAAC,aAAD,MACE,8BAAC,6BAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAErB,IAAjC,EADF,CAEE,8BAAC,mBAAD,EAAc,KAAK,KAAnB,CAAoB,IAAI,CAAC,aAAzB,CAAuC,SAAS,CAAEN,eAAlD,EAFF,CADF,CAKE,8BAAC,cAAD,MACE,8BAAC,WAAD,MADF,CALF,CAHF,CADF,CAeD,CAhBM,C;;uzBCvBP,GAAM4B,eAAc,CAAGx/F,gDAAM,CAACC,GAAV,wBAApB,CAWA,GAAMo/F,oBAAa,CAAGr/F,gDAAM,CAACC,GAAV,yBAAnB,CAOA,GAAMq/F,qBAAc,CAAGt/F,gDAAM,CAACC,GAAV,yBAApB,C,GAOMw/F,Y,yFACJ,eAAYl+F,KAAZ,CAAmB,iEACjB,2HAAMA,KAAN,GAEA,MAAKu0B,KAAL,CAAa,CACX6mE,YAAY,CAAE,IADH,CAEXjnF,KAAK,CAAE,EAFI,CAAb,CAHiB,aAOlB,C,2FA2BY,CAAE,C,wCAEPye,S,CAAW,CACjB,GAAMloB,KAAI,CAAG,GAAIyzF,WAAW,CAACvrE,SAAD,CAAf,EAAb,CADiB,gBAEe,KAAK2B,KAFpB,CAET6mE,YAFS,aAETA,YAFS,CAEKjnF,KAFL,aAEKA,KAFL,CAIjB,GAAI,CAACinF,YAAL,CAAmB,CACjB,OACD,CAED,GAAMgD,UAAS,CAAG,uDAAIjqF,KAAJ,GAAWzJ,IAAX,GAAiBiB,MAAjB,CAChB,SAACmK,GAAD,CAAMpL,IAAN,QAAeoL,IAAG,CAAGpL,IAAI,CAAC2zF,YAAL,EAArB,EADgB,CAEhB,CAFgB,CAAlB,CAKA,GAAID,SAAS,CAAGhD,YAAY,CAACphB,MAA7B,CAAqC,CACnC2jB,KAAK,CAAC,YAAD,CAAL,CACA,OACD,CAED,KAAK/nC,QAAL,CAAc,CAAEzhD,KAAK,wDAAMA,KAAN,GAAazJ,IAAb,EAAP,CAAd,EACD,C,yCAES,IACA6yC,QADA,CACY,KAAKv9C,KADjB,CACAu9C,OADA,kBAEwB,KAAKhpB,KAF7B,CAEA6mE,YAFA,cAEAA,YAFA,CAEcjnF,KAFd,cAEcA,KAFd,CAGRopC,OAAO,CAAC8Y,WAAR,CAAoB,UAApB,CAAgC,CAAEpgB,IAAI,CAAEmlD,YAAR,CAAsBjnF,KAAK,CAALA,KAAtB,CAAhC,EACD,C,uCAEQ,iBACwC,KAAKnU,KAD7C,CACDu9C,OADC,aACDA,OADC,CACQ/wB,QADR,aACQA,QADR,CACkBmtB,WADlB,aACkBA,WADlB,CAC+Br5C,IAD/B,aAC+BA,IAD/B,kBAGyB,KAAKi0B,KAH9B,CAGC6mE,YAHD,cAGCA,YAHD,CAGejnF,KAHf,cAGeA,KAHf,CAKP,GAAI,CAACqY,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAEDA,QAAQ,CAAG,GAAIsgE,cAAJ,CAAatgE,QAAb,CAAX,CAEA,MACE,+BAAC,cAAD,MACE,8BAAC,mBAAD,MACE,8BAAC,gBAAD,MACE,8BAAC,aAAD,eAAsBA,QAAQ,CAAChjB,IAA/B,CADF,CAEE,8BAAC,gBAAD,EACE,QAAQ,CAAEgjB,QADZ,CAEE,IAAI,CAAE,KAFR,CAGE,WAAW,CAAEmtB,WAHf,CAIE,IAAI,CAAE,IAJR,CAKE,MAAM,CAAE,IALV,CAME,YAAY,CAAEyhD,YANhB,CAOE,IAAI,CAAE96F,IAPR,CAQE,KAAK,CAAE6T,KART,CASE,OAAO,CAAEopC,OATX,CAUE,OAAO,CAAE,KAAKw9C,OAAL,CAAa15F,IAAb,CAAkB,IAAlB,CAVX,EAFF,CADF,CADF,CAkBE,8BAAC,oBAAD,MACE,8BAAC,gBAAD,MACE,8BAAC,aAAD,uBADF,CAEE,8BAAC,gBAAD,EAAY,OAAO,CAAEk8C,OAArB,CAA8B,OAAO,CAAE,KAAKu+C,OAAL,CAAaz6F,IAAb,CAAkB,IAAlB,CAAvC,EAFF,CADF,CAlBF,CADF,CA2BD,C,4EA5F+BU,S,CAAWu8F,S,CAAW,IAC9C9xE,SAD8C,CACpBzqB,SADoB,CAC9CyqB,QAD8C,CACpCmtB,WADoC,CACpB53C,SADoB,CACpC43C,WADoC,CAEpD,GAAI,CAACntB,QAAL,CAAe,CACb,MAAO8xE,UAAP,CACD,CAED9xE,QAAQ,CAAG,GAAIsgE,cAAJ,CAAatgE,QAAb,CAAX,CAEA,GAAI,CAAC8xE,SAAS,CAAClD,YAAf,CAA6B,CAC3B,GAAMA,aAAY,CAChB5uE,QAAQ,CAACs1B,KAAT,CACGC,QADH,GAEG/oC,IAFH,CAEQ,SAACi9B,IAAD,QAAUA,KAAI,CAACulD,YAAL,CAAkB7hD,WAAlB,CAAV,EAFR,GAEqD,IAHvD,CAKA,GAAMxlC,MAAK,CAAGinF,YAAY,CAAGA,YAAY,CAACrnE,QAAb,EAAH,CAA6B,EAAvD,CACA,OAAO,4CACFuqE,SADL,EAEElD,YAAY,CAAZA,YAFF,CAGEjnF,KAAK,CAALA,KAHF,GAKD,CAED,MAAOmqF,UAAP,CACD,C,mBAjCiBhpC,kB,EAyGpB;;;;;;;;;;;;;;;;;;;;;;;;QAyBe4oC,2DAAf,E;;ACzKeA,qDAAf,E;;ACAej0B,uEAAf,E;;qqBCWA,GAAMs0B,oBAAmB,CAAG9/F,gDAAM,CAACC,GAAV,6BAAzB,CAQA,GAAM8/F,aAAY,CAAG//F,wDAAM,CAAC8wD,YAAD,CAAT,8BAAlB,CAIA,GAAMkvC,eAAc,CAAGhgG,gDAAM,CAACC,GAAV,8BAChB,SAACsB,KAAD,QAAYA,MAAK,CAAC0jC,KAAN,CAAc,iBAAd,CAAkC,qBAA9C,EADgB,CAApB,C,GAIMg7D,sB,4aACM,iBACmB,KAAK1+F,KADxB,CACAu9C,OADA,aACAA,OADA,CACS7Z,KADT,aACSA,KADT,CAGR,GAAI,CAACA,KAAL,CAAY,CACV,OACD,CAED6Z,OAAO,CAACyzB,UAAR,GACD,C,uCAEQ,kBAC8B,KAAKhxE,KADnC,CACCwsB,QADD,cACCA,QADD,CACWkX,KADX,cACWA,KADX,CACkB42D,OADlB,cACkBA,OADlB,CAEP,MACE,wBAAC,mBAAD,MACE,uBAAC,OAAD,MACE,uBAAC,KAAD,sBACY9tE,QAAQ,CAACrf,IADrB,EAC6B,GAD7B,CAEGqf,QAAQ,CAACC,KAAT,GAAmBghE,UAAnB,EAA4C,YAF/C,CAGG6M,OAAO,EAAI,UAHd,CADF,CAMG,CAACA,OAAD,EAAY52D,KAAZ,EACC,uBAAC,YAAD,MACE,uBAAC,aAAD,EAAe,OAAO,CAAE,KAAKq3D,OAAL,CAAa15F,IAAb,CAAkB,IAAlB,CAAxB,EACE,uBAAC,oBAAD,CAAO,SAAP,MADF,CADF,CAPJ,CADF,CADF,CAkBD,C,wBA/BsBR,sB,EAkCV69F,uEAAf,E;;s/DC5DA,GAAM7vC,mBAAS,CAAGpwD,gDAAM,CAACC,GAAV,2BAAf,CASA,GAAM20D,cAAI,CAAGlE,oDAAH,4BAAV,CAOA,GAAMwvC,cAAa,CAAGlgG,gDAAM,CAACC,GAAV,4BACf20D,aADe,CAAnB,CAgBA,GAAMurC,MAAK,CAAGngG,gDAAM,CAACC,GAAV,4BACP20D,aADO,CAAX,CAcA,GAAMwrC,QAAO,CAAGpgG,gDAAM,CAACC,GAAV,4BAAb,CAYA,GAAMogG,aAAY,CAAGrgG,wDAAM,CAACogG,OAAD,CAAT,4BAAlB,C,GAKME,kB,wZACK,iBAC+B,KAAK/+F,KADpC,CACC0K,IADD,aACCA,IADD,CACOrB,QADP,aACOA,QADP,4BACiB8gE,EADjB,CACiBA,EADjB,yBACsB,IADtB,gBAGP,MACE,+CACE,uBAAC,kBAAD,EAAW,EAAE,CAAC,oBAAd,EAAoC9gE,QAApC,CADF,CADF,CAKD,C,sBAToBxI,kB,EAYRk+F,uEAAf,E;;wvBC3EA,GAAMlwC,oBAAS,CAAGpwD,gDAAM,CAACC,GAAV,qCAWT,SAAAsB,KAAK,QAAIA,MAAK,CAACg/F,WAAN,EAAqB,eAAzB,EAXI,CAYT,SAAAh/F,KAAK,QAAIA,MAAK,CAACgwD,QAAN,EAAkB,gBAAtB,EAZI,CAcXD,SAdW,CAgBX,SAAA/vD,KAAK,QACLA,MAAK,CAAC0mC,MAAN,EACAyoB,oDADA,sCADK,EAhBM,CAAf,CA6BeN,0EAAf,E;;oNCtBA,GAAMgE,6BAAe,CAAGp0D,wDAAM,CAACowD,kBAAD,CAAT,+BAEjB,SAAA7uD,KAAK,oCAAyBA,KAAK,CAACnE,SAAN,CAAkB,EAA3C,WAFY,CAIjB,SAAAmE,KAAK,6BAAkBA,KAAK,CAACzG,CAAxB,iBAJY,CAKjB,SAAAyG,KAAK,4BAAiBA,KAAK,CAACvG,CAAvB,iBALY,CAArB,C,GAQMwlG,0B,qbACQpjG,S,CAAW,CACrB,MAAOoB,oBAAmB,CAAC,EAAD,CAAK,CAACkB,gBAAgB,CAACtC,SAAD,CAAtB,CAAmC,CAAnC,CAAsC,CAAtC,CAA1B,CACD,C,6CAEW,iBACmC,KAAKmE,KADxC,CACF0K,IADE,aACFA,IADE,CACI0D,eADJ,aACIA,eADJ,CACqBvS,SADrB,aACqBA,SADrB,CAEV,MAAOuS,gBAAe,CAAC+G,SAAhB,CAA0BzK,IAA1B,CAAgC7O,SAAhC,CAAP,CACD,C,sCAEMqjG,G,CAAK,CACV,GAAI,CAACA,GAAL,CAAU,CACR,OACD,CAHS,iBAKmC,KAAKl/F,KALxC,CAKF0K,IALE,cAKFA,IALE,CAKI0D,eALJ,cAKIA,eALJ,CAKqBvS,SALrB,cAKqBA,SALrB,CAMV,MAAOuS,gBAAe,CAACgC,MAAhB,CAAuB1F,IAAvB,CAA6B7O,SAA7B,CAAP,CACD,C,uCAEQ,IACCA,UADD,CACe,KAAKmE,KADpB,CACCnE,SADD,CAGP,GAAMqjG,IAAG,CAAG,KAAK/pF,SAAL,EAAZ,CAHO,GAIC6pF,YAJD,CAIiBE,GAJjB,CAICF,WAJD,CAMP,MACE,wBAAC,4BAAD,gBACE,WAAW,CAAEA,WADf,CAEE,QAAQ,CAAE,CAACE,GAFb,CAGE,SAAS,CAAE/gG,gBAAgB,CAACtC,SAAD,CAH7B,CAIE,OAAO,CAAE,KAAKuU,MAAL,CAAY/O,IAAZ,CAAiB,IAAjB,CAAuB69F,GAAvB,CAJX,EAKM,KAAK57E,WAAL,CAAiBznB,SAAjB,CALN,EAOE,uBAAC,UAAD,MAPF,CADF,CAWD,C,0BApCwBgF,kB,EAuCZo+F,mFAAf,E;;wRCpDA,GAAMpwC,uBAAS,CAAGpwD,gDAAM,CAACC,GAAV,+BAMXqxD,SANW,CAAf,C,GASMovC,0B,kbACQ,iBACwB,KAAKn/F,KAD7B,CACFoO,eADE,aACFA,eADE,CACe1D,IADf,aACeA,IADf,CAEV,MAAO0D,gBAAe,CAACiH,SAAhB,CAA0B3K,IAA1B,CAAP,CACD,C,uCAEQ,kBAC2B,KAAK1K,KADhC,CACCoO,eADD,cACCA,eADD,CACkB1D,IADlB,cACkBA,IADlB,CAEP,MAAO0D,gBAAe,CAACmH,MAAhB,CAAuB7K,IAAvB,CAAP,CACD,C,uCAEQ,CACP,GAAI,CAAC,KAAK2K,SAAL,EAAL,CAAuB,CACrB,MAAO,KAAP,CACD,CAED,MACE,wBAAC,sBAAD,EAAW,OAAO,CAAE,KAAKE,MAAL,CAAYlU,IAAZ,CAAiB,IAAjB,CAApB,EACE,uBAAC,WAAD,MADF,CADF,CAKD,C,0BArBwBR,kB,EAwBZs+F,mFAAf,E;;0NCjCA,GAAMtsC,6BAAe,CAAGp0D,wDAAM,CAACowD,kBAAD,CAAT,+BAArB,C,GAKMuwC,0B,kbACQ,iBACwB,KAAKp/F,KAD7B,CACFoO,eADE,aACFA,eADE,CACe1D,IADf,aACeA,IADf,CAEV,MAAO0D,gBAAe,CAACgH,SAAhB,CAA0B1K,IAA1B,CAAP,CACD,C,uCAEQ,kBAC2B,KAAK1K,KADhC,CACCoO,eADD,cACCA,eADD,CACkB1D,IADlB,cACkBA,IADlB,CAEP,MAAO0D,gBAAe,CAACkH,MAAhB,CAAuB5K,IAAvB,CAAP,CACD,C,uCAEQ,CACP,GAAI,CAAC,KAAK0K,SAAL,EAAL,CAAuB,CACrB,MAAO,KAAP,CACD,CAED,MACE,wBAAC,4BAAD,EAAiB,OAAO,CAAE,KAAKE,MAAL,CAAYjU,IAAZ,CAAiB,IAAjB,CAA1B,EACE,uBAAC,MAAD,MADF,CADF,CAKD,C,0BArBwBR,kB,EAwBZu+F,mFAAf,E;;iOC7BA,GAAMvsC,4BAAe,CAAGp0D,wDAAM,CAACowD,kBAAD,CAAT,8BAIjB,SAAA7uD,KAAK,QACLA,MAAK,CAAC6P,cAAN,GAAyB,CAAzB,CACI,cADJ,CAEI,wCAHC,EAJY,CAArB,C,GAUMwvF,wB,2aACO,iBACyC,KAAKr/F,KAD9C,CACD0K,IADC,aACDA,IADC,CACK0D,eADL,aACKA,eADL,CACsByB,cADtB,aACsBA,cADtB,CAET,MAAOzB,gBAAe,CAACqH,QAAhB,CAAyB/K,IAAzB,CAA+BmF,cAA/B,CAAP,CACD,C,qCAEO,kBAC4C,KAAK7P,KADjD,CACE0K,IADF,cACEA,IADF,CACQ0D,eADR,cACQA,eADR,CACyByB,cADzB,cACyBA,cADzB,CAEN,GAAI,CAACzB,eAAe,CAACqH,QAAhB,CAAyB/K,IAAzB,CAA+BmF,cAA/B,CAAL,CAAqD,CACnD,OACD,CAED,MAAOzB,gBAAe,CAAC0B,KAAhB,CAAsBpF,IAAtB,CAA4BmF,cAA5B,CAAP,CACD,C,uCAEQ,IACCA,eADD,CACoB,KAAK7P,KADzB,CACC6P,cADD,CAGP,GAAMqvF,IAAG,CAAG,KAAKzpF,QAAL,EAAZ,CAEA,MACE,wBAAC,2BAAD,EACE,cAAc,CAAE5F,cADlB,CAEE,OAAO,CAAE,KAAKC,KAAL,CAAWzO,IAAX,CAAgB,IAAhB,CAFX,CAGE,QAAQ,CAAE,CAAC69F,GAHb,EAKE,uBAAC,UAAD,MALF,CADF,CASD,C,yBA7BuBr+F,kB,EAgCXw+F,gFAAf,E;;qRCzCA,GAAMC,cAAa,CAAG7gG,wDAAM,CAACowD,kBAAD,CAAT,6BAMfkB,SANe,CAAnB,C,GASMwvC,sB,oaACM,iBAC0B,KAAKv/F,KAD/B,CACAoO,eADA,aACAA,eADA,CACiB1D,IADjB,aACiBA,IADjB,CAER,MAAO0D,gBAAe,CAACsH,OAAhB,CAAwBhL,IAAxB,CAAP,CACD,C,mCAEM,kBAC6B,KAAK1K,KADlC,CACGoO,eADH,cACGA,eADH,CACoB1D,IADpB,cACoBA,IADpB,CAEL,GAAI,CAAC0D,eAAe,CAACsH,OAAhB,CAAwBhL,IAAxB,CAAL,CAAoC,CAClC,OACD,CAED,MAAO0D,gBAAe,CAACQ,IAAhB,CAAqBlE,IAArB,CAAP,CACD,C,uCAEQ,IACCA,KADD,CACU,KAAK1K,KADf,CACC0K,IADD,CAEP,MACE,wBAAC,aAAD,EACE,MAAM,CAAEA,IAAI,CAACiC,QAAL,CAAcs5C,SAAd,EADV,CAEE,OAAO,CAAE,KAAKr3C,IAAL,CAAUvN,IAAV,CAAe,IAAf,CAFX,CAGE,QAAQ,CAAE,CAAC,KAAKqU,OAAL,EAHb,EAKE,uBAAC,SAAD,MALF,CADF,CASD,C,wBA1BsB7U,kB,EA6BV0+F,6EAAf,E;;s8BCtCA,GAAMC,eAAc,CAAG/gG,wDAAM,CAACowD,kBAAD,CAAT,8BAMhBkB,SANgB,CAApB,CASA,GAAM0vC,iBAAgB,CAAGhhG,wDAAM,CAAC+gG,cAAD,CAAT,+BAAtB,CAKA,GAAME,QAAO,CAAGjhG,gDAAM,CAACC,GAAV,+BAAb,C,GAgBMihG,wB,0aACKnwF,I,CAAM,iBACqB,KAAKxP,KAD1B,CACLoO,eADK,aACLA,eADK,CACY1D,IADZ,aACYA,IADZ,CAEb,MAAO0D,gBAAe,CAACuH,QAAhB,CAAyBjL,IAAzB,CAA+B8E,IAA/B,CAAP,CACD,C,oCAEKA,I,CAAM,kBACwB,KAAKxP,KAD7B,CACFoO,eADE,cACFA,eADE,CACe1D,IADf,cACeA,IADf,CAEV,GAAI,CAAC0D,eAAe,CAACuH,QAAhB,CAAyBjL,IAAzB,CAA+B8E,IAA/B,CAAL,CAA2C,CACzC,OACD,CAED,MAAOpB,gBAAe,CAACqB,KAAhB,CAAsB/E,IAAtB,CAA4B8E,IAA5B,CAAP,CACD,C,uCAEQ,IACC9E,KADD,CACU,KAAK1K,KADf,CACC0K,IADD,CAEP,GAAMk1F,QAAO,CAAG,KAAKjqF,QAAL,CAAc,CAAd,CAAhB,CACA,GAAMkqF,QAAO,CAAG,KAAKlqF,QAAL,CAAc,CAAC,CAAf,CAAhB,CACA,MACE,+CACE,uBAAC,cAAD,EACE,GAAG,CAAC,YADN,CAEE,OAAO,CAAE,KAAKlG,KAAL,CAAWpO,IAAX,CAAgB,IAAhB,CAAsB,CAAtB,CAFX,CAGE,QAAQ,CAAE,CAACu+F,OAHb,EAKE,uBAAC,UAAD,MALF,CADF,CASE,uBAAC,OAAD,MAAUl1F,IAAI,CAACiC,QAAL,CAAcgI,UAAd,EAAV,CATF,CAUE,uBAAC,gBAAD,EACE,GAAG,CAAC,YADN,CAEE,OAAO,CAAE,KAAKlF,KAAL,CAAWpO,IAAX,CAAgB,IAAhB,CAAsB,CAAC,CAAvB,CAFX,CAGE,QAAQ,CAAE,CAACw+F,OAHb,EAKE,uBAAC,UAAD,MALF,CAVF,CADF,CAoBD,C,yBAvCuBh/F,kB,EA0CX8+F,gFAAf,E;;GCrEMG,0B,obACK,iBACoC,KAAK9/F,KADzC,CACC0K,IADD,aACCA,IADD,CACO0D,eADP,aACOA,eADP,CAC2BkiD,IAD3B,4FAGP,MACE,wBAAC,iBAAD,gBAAU,IAAI,CAAE5lD,IAAhB,CAAsB,eAAe,CAAE0D,eAAvC,EAA4DkiD,IAA5D,EACE,uBAAC,qBAAD,EACE,IAAI,CAAE5lD,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EADF,CAOE,uBAAC,qBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EAPF,CAaE,uBAAC,qBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EAbF,CAmBE,uBAAC,qBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EAnBF,CAyBE,uBAAC,qBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EAzBF,CA+BE,uBAAC,qBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,SAAS,CAAE,CAHb,EA/BF,CAqCE,uBAAC,qBAAD,EAAc,IAAI,CAAE1D,IAApB,CAA0B,eAAe,CAAE0D,eAA3C,EArCF,CAuCE,uBAAC,qBAAD,EAAc,IAAI,CAAE1D,IAApB,CAA0B,eAAe,CAAE0D,eAA3C,EAvCF,CAyCE,uBAAC,oBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,cAAc,CAAE,CAAC,CAHnB,EAzCF,CA+CE,uBAAC,oBAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,cAAc,CAAE,CAHlB,EA/CF,CAqDE,uBAAC,mBAAD,EAAY,IAAI,CAAE1D,IAAlB,CAAwB,eAAe,CAAE0D,eAAzC,EArDF,CAuDE,uBAAC,oBAAD,EAAa,IAAI,CAAE1D,IAAnB,CAAyB,eAAe,CAAE0D,eAA1C,EAvDF,CADF,CA2DD,C,0BA/DwBvN,sB,EAkEZi/F,mFAAf,E;;qPCtEA,GAAMjtC,sCAAe,CAAGp0D,wDAAM,CAACowD,kBAAD,CAAT,wCAIjB,SAAA7uD,KAAK,QACLA,MAAK,CAAC6P,cAAN,GAAyB,CAAzB,CACI,0CADJ,CAEI,uCAHC,EAJY,CAArB,C,GAUMkwF,4C,udACI,iBAC4C,KAAK//F,KADjD,CACE0K,IADF,aACEA,IADF,CACQ0D,eADR,aACQA,eADR,CACyByB,cADzB,aACyBA,cADzB,CAEN,MAAOzB,gBAAe,CAAC4xF,gBAAhB,CAAiCt1F,IAAjC,CAAuCmF,cAAvC,CAAP,CACD,C,uCAEQ,IACCA,eADD,CACoB,KAAK7P,KADzB,CACC6P,cADD,CAGP,MACE,wBAAC,qCAAD,EACE,cAAc,CAAEA,cADlB,CAEE,OAAO,CAAE,KAAKC,KAAL,CAAWzO,IAAX,CAAgB,IAAhB,CAFX,EAIE,uBAAC,UAAD,MAJF,CADF,CAQD,C,mCAjBiCR,kB,EAoBrBk/F,8GAAf,E;;GC/BME,6C,qfACK,iBACoC,KAAKjgG,KADzC,CACC0K,IADD,aACCA,IADD,CACO0D,eADP,aACOA,eADP,CAC2BkiD,IAD3B,4FAGP,MACE,wBAAC,iBAAD,gBACE,IAAI,CAAE5lD,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,EAAE,CAAE,KAHN,EAIMkiD,IAJN,EAME,uBAAC,8BAAD,EACE,IAAI,CAAE5lD,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,cAAc,CAAE,CAAC,CAHnB,EANF,CAYE,uBAAC,8BAAD,EACE,IAAI,CAAE1D,IADR,CAEE,eAAe,CAAE0D,eAFnB,CAGE,cAAc,CAAE,CAHlB,EAZF,CADF,CAoBD,C,uCAxBqCvN,sB,EA2BzBo/F,mGAAf,E;;sfCzBA,GAAMpxC,4BAAS,CAAGpwD,gDAAM,CAACC,GAAV,oCAAf,CAQA,GAAMwhG,aAAY,CAAGzhG,wDAAM,CAACqzD,aAAD,CAAT,qCAAlB,C,GAIMquC,oC,6cACK,iBACmD,KAAKngG,KADxD,CACCogG,EADD,aACCA,EADD,CACKzzF,QADL,aACKA,QADL,CACe26E,OADf,aACeA,OADf,CACwB+Y,aADxB,aACwBA,aADxB,CACuC9iD,OADvC,aACuCA,OADvC,CAGP,MACE,wBAAC,2BAAD,MACE,uBAAC,aAAD,EACE,QAAQ,CAAE8iD,aADZ,CAEE,GAAG,CAAC,qBAFN,CAGE,OAAO,CAAE,yBAAM9iD,QAAO,CAAC+iD,gBAAR,CAAyBh0C,aAAzB,CAAN,EAHX,EADF,CAME,uBAAC,aAAD,EACE,QAAQ,CAAEg7B,OADZ,CAEE,GAAG,CAAC,iBAFN,CAGE,OAAO,CAAE,yBAAM/pC,QAAO,CAAC+iD,gBAAR,CAAyBh0C,OAAzB,CAAN,EAHX,EANF,CAWE,uBAAC,aAAD,EACE,QAAQ,CAAE8zC,EADZ,CAEE,GAAG,CAAC,iBAFN,CAGE,OAAO,CAAE,yBAAM7iD,QAAO,CAAC+iD,gBAAR,CAAyBh0C,EAAzB,CAAN,EAHX,EAXF,CAgBE,uBAAC,aAAD,EACE,QAAQ,CAAE3/C,QADZ,CAEE,GAAG,CAAC,qBAFN,CAGE,OAAO,CAAE,yBAAM4wC,QAAO,CAAC+iD,gBAAR,CAAyBh0C,QAAzB,CAAN,EAHX,EAhBF,CAqBE,uBAAC,YAAD,EAAc,OAAO,CAAE,yBAAM/O,QAAO,CAAC88C,WAAR,EAAN,EAAvB,EACE,uBAAC,WAAD,MADF,CArBF,CADF,CA2BD,C,+BA/B6Bx5F,sB,EAkCjBs/F,4FAAf,E;;GCjDMI,sB,0GACJ,oBAAYvgG,KAAZ,CAAmB,CAAC,4LACZA,KADW,GAElB,C,wFAEQ,iBACqC,KAAKA,KAD1C,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,CACgB5sC,OADhB,aACgBA,OADhB,CAC4B2/C,IAD5B,8FAGP,GAAI,CAAC5lD,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CAED,MAAOiG,QAAO,CAACnM,GAAR,CAAY,SAAAqM,MAAM,QACvB,wBAAC,iBAAD,gBACE,GAAG,KADL,CAEE,OAAO,CAAE0sC,OAFX,CAGE,GAAG,uBAAiB1sC,MAAM,CAAC1E,EAAxB,CAHL,CAIE,MAAM,CAAE0E,MAJV,CAKE,IAAI,CAAEnG,IALR,EAMM4lD,IANN,EADuB,EAAlB,CAAP,CAUD,C,wBAtBsBzvD,kB,EAyBV0/F,2EAAf,E;;GCzBMC,c,sGACJ,gBAAYxgG,KAAZ,CAAmB,CAAC,oLACZA,KADW,GAElB,C,oFAEQ,iBACyC,KAAKA,KAD9C,CACC0K,IADD,aACCA,IADD,CACO6yC,OADP,aACOA,OADP,CACgB08C,MADhB,aACgBA,MADhB,CACwBjvB,YADxB,aACwBA,YADxB,IAGCx+C,SAHD,CAGc+wB,OAHd,CAGC/wB,QAHD,CAIP,GAAI,CAAC9hB,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CAED,MAAOuvF,OAAM,CAACz1F,GAAP,CAAW,SAAC4H,KAAD,CAAQtG,KAAR,CAAkB,CAClC,GAAM/H,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2Bz/C,KAAK,CAACmhB,YAAjC,CAAf,CACA,MACE,wBAAC,4BAAD,EACE,SAAS,KADX,CAEE,IAAI,CAAExvB,MAAM,CAACyL,IAFf,CAGE,OAAO,CAAE+zC,OAHX,CAIE,GAAG,mBAAaz3C,KAAb,CAJL,CAKE,IAAI,CAAEklE,YALR,CAME,MAAM,CAAEjtE,MANV,CAOE,GAAG,CAAEitE,YAAY,CAACj4C,iBAAb,CAA+Bm4C,cAA/B,CACH9+D,KAAK,CAACmhB,YADH,CAPP,EADF,CAaD,CAfM,CAAP,CAgBD,C,oBA7BkB1sB,kB,EAgCN2/F,0EAAf,E;;6jBC5BA,GAAM3xC,oBAAS,CAAGpwD,gDAAM,CAACC,GAAV,4BAAf,CAUA,GAAM6xD,uBAAY,CAAG9xD,gDAAM,CAACC,GAAV,6BAAlB,C,GAMM+hG,oB,qaACK,iBAC0C,KAAKzgG,KAD/C,CACCu9C,OADD,aACCA,OADD,CACUy8C,UADV,aACUA,UADV,CACsBC,MADtB,aACsBA,MADtB,CACiC3pC,IADjC,mGAGP,GAAI,CAAC/S,OAAO,CAAChpB,KAAR,CAAcy2C,YAAnB,CAAiC,CAC/B,MAAO,KAAP,CACD,CAED,MACE,wBAAC,mBAAD,MACE,uBAAC,sBAAD,MACGivB,MAAM,EACL,uBAAC,wBAAD,gBACE,IAAI,CAAE18C,OAAO,CAAChpB,KAAR,CAAcy2C,YADtB,CAEE,OAAO,CAAEztB,OAFX,CAGE,MAAM,CAAE08C,MAHV,EAIM3pC,IAJN,EAFJ,CADF,CAWE,uBAAC,+BAAD,gBACE,IAAI,CAAE/S,OAAO,CAAChpB,KAAR,CAAcy2C,YADtB,CAEE,OAAO,CAAEztB,OAFX,EAGM+S,IAHN,EAXF,CADF,CAmBD,C,uBA3BqBzvD,sB,EA8BT4/F,2EAAf,E;;0dChDA,GAAM5xC,mBAAS,CAAGpwD,gDAAM,CAACC,GAAV,2BAAf,CAQA,GAAMynE,uBAAa,CAAG1nE,wDAAM,CAACqzD,aAAD,CAAT,4BAAnB,C,GAIM4uC,kB,gaACK,iBAC4B,KAAK1gG,KADjC,CACCu9C,OADD,aACCA,OADD,CACUoP,aADV,aACUA,aADV,CAGP,MACE,wBAAC,kBAAD,MACE,uBAAC,aAAD,EAAQ,OAAO,CAAE,yBAAMA,cAAa,CAACg0C,cAAd,EAAN,EAAjB,WADF,CAGE,uBAAC,sBAAD,EAAe,OAAO,CAAE,yBAAMh0C,cAAa,CAACi0C,kBAAd,EAAN,EAAxB,EACE,uBAAC,SAAD,MADF,CAHF,CAME,uBAAC,aAAD,EAAe,OAAO,CAAE,yBAAMj0C,cAAa,CAACk0C,WAAd,EAAN,EAAxB,EACE,uBAAC,UAAD,MADF,CANF,CASE,uBAAC,aAAD,EAAe,OAAO,CAAE,yBAAMl0C,cAAa,CAACm0C,YAAd,EAAN,EAAxB,EACE,uBAAC,SAAD,MADF,CATF,CAYE,uBAAC,aAAD,EAAe,OAAO,CAAE,yBAAMvjD,QAAO,CAACyP,WAAR,EAAN,EAAxB,EACE,uBAAC,MAAD,MADF,CAZF,CADF,CAkBD,C,sBAtBoBnsD,sB,EAyBR6/F,8DAAf,E;;6ZCxCO,GAAMK,UAAS,CAAGtiG,gDAAM,CAACkxD,IAAV,yBAAf,CAIA,GAAMqxC,gBAAe,CAAGviG,gDAAM,CAACkxD,IAAV,0BAArB,C;;0MCFP,GAAMsxC,mBAAkB,CAAGxiG,gDAAM,CAACC,GAAV,4BAAxB,C,GAIMwiG,oB,6ZACK,iBACsC,KAAKlhG,KAD3C,CACCmhG,UADD,aACCA,UADD,CACat5C,UADb,aACaA,UADb,CACyBX,QADzB,aACyBA,QADzB,CAGP,MACE,+BAAC,kBAAD,wBACiB,8BAAC,SAAD,MAAYi6C,UAAU,CAACr7E,SAAX,CAAqBrf,MAAjC,CADjB,gBAEQ,8BAAC,SAAD,MAAY06F,UAAU,CAACxuB,OAAvB,CAFR,KAGGwuB,UAAU,CAAC16F,MAAX,CACC,8BAAC,SAAD,MACE,kDAAQygD,QAAR,aAAoBW,UAApB,UADF,CADD,CAKC,8BAAC,eAAD,MACE,gDADF,CARJ,CADF,CAeD,C,uBAnBqBhnD,eAAK,CAACy0D,S,EAsBf4rC,2EAAf,E;;qLC1BA,GAAME,gBAAe,CAAG3iG,gDAAM,CAACC,GAAV,6BAArB,C,GAEM2iG,sB,kaACK,iBACsC,KAAKrhG,KAD3C,CACCjC,MADD,aACCA,MADD,CACSyuB,QADT,aACSA,QADT,CACmBzJ,cADnB,aACmBA,cADnB,CAGP,GAAM4lC,QAAO,CAAG5lC,cAAc,CAACiwD,UAAf,CAA0Bj1E,MAA1B,CAAhB,CACA,GAAMyzE,iBAAgB,CAAGzuD,cAAc,CAACu1D,mBAAf,CAAmCv6E,MAAnC,CAAzB,CAEA,GAAMujG,YAAW,CAAG34C,OAAO,CAACh9C,MAAR,CAAe,SAACC,KAAD,CAAQrQ,OAAR,CAAoB,CACrD,MAAOqQ,MAAK,CAAGrQ,OAAO,CAACiM,MAAvB,CACD,CAFmB,CAEjB,CAFiB,CAApB,CAIA,GAAM+5F,WAAU,CAAG54C,OAAO,CAACh9C,MAAR,CAAe,SAACC,KAAD,CAAQrQ,OAAR,CAAoB,CACpD,MAAOqQ,MAAK,CAAGrQ,OAAO,CAACyb,KAAvB,CACD,CAFkB,CAEhB,CAFgB,CAAnB,CAIA,MACE,+BAAC,eAAD,wBACiB,8BAAC,eAAD,MAAkBsqF,WAAlB,CADjB,yBAEqB,8BAAC,SAAD,MAAYC,UAAZ,CAFrB,KAGG/vB,gBAAgB,CAAC72E,MAAjB,CAA0B,CAA1B,EACC,4DACG,GADH,sBAEqB,GAFrB,CAGE,8BAAC,eAAD,MACG62E,gBAAgB,CACdhtE,GADF,CACM,SAAAqM,MAAM,QAAIA,OAAM,CAACskD,cAAP,EAAJ,EADZ,EAEEzyC,IAFF,CAEO,IAFP,CADH,CAHF,CAJJ,CADF,CAiBD,C,wBAhCsB7hB,eAAK,CAACy0D,S,EAmChB+rC,8EAAf,E;;oyBChCA,GAAMG,cAAa,CAAG/iG,gDAAM,CAACC,GAAV,gCAAnB,CAUA,GAAM+iG,QAAO,CAAGhjG,gDAAM,CAACC,GAAV,iCAAb,CAIA,GAAMgjG,gBAAe,CAAGjjG,wDAAM,CAACgjG,OAAD,CAAT,iCAArB,C,GAKME,4B,6cACmB,iBAC+B,KAAK3hG,KADpC,CACb+iB,cADa,aACbA,cADa,CACGyJ,QADH,aACGA,QADH,CACamgC,aADb,aACaA,aADb,CAGrB,GAAM5uD,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B9oC,cAAc,CAAC2Q,QAA1C,CAAf,CACA,GAAMtS,OAAM,CAAGoL,QAAQ,CAAC+6C,QAAT,CAAkBuQ,oBAAlB,CACb/0D,cAAc,CAACwxD,eADF,CAAf,CAIA,GAAMqtB,WAAU,CAAG7jG,MAAM,CAACyL,IAAP,CAAYq4F,IAAZ,EAAnB,CAEA,MACE,+BAAC,aAAD,MACE,8BAAC,OAAD,MACE,8BAAC,eAAD,4BADF,CAEE,8BAAC,SAAD,aAAkBzgF,MAAM,CAAC+1C,OAAP,CAAehC,cAAf,EAAlB,QAFF,YAGWysC,UAHX,CADF,CAMG7+E,cAAc,CAACjB,KAAf,CAAqBnnB,MAArB,CAA8B,CAA9B,EACC,8BAAC,eAAD,MAAkBooB,cAAc,CAACjB,KAAf,CAAqBY,IAArB,CAA0B,IAA1B,CAAlB,CAPJ,CASGK,cAAc,CAAC4lC,OAAf,CAAuBhuD,MAAvB,CAAgC,CAAhC,EACC,8BAAC,eAAD,MACE,8BAAC,oBAAD,EACE,MAAM,CAAEoD,MADV,CAEE,QAAQ,CAAEyuB,QAFZ,CAGE,cAAc,CAAEzJ,cAHlB,EADF,CAVJ,CADF,CAqBD,C,6DAEmB,kBACkC,KAAK/iB,KADvC,CACV+iB,cADU,cACVA,cADU,CACMyJ,QADN,cACMA,QADN,CACgBmgC,aADhB,cACgBA,aADhB,CAGlB,GAAM4Q,kBAAiB,CAAG,GAAIzpC,yBAAJ,GAAwBiF,MAAxB,CAA+BvM,QAA/B,CAA1B,CACA,GAAM1J,UAAS,CAAGy6C,iBAAiB,CAACsb,gBAAlB,CAChB91D,cAAc,CAAC8vD,WADC,CAAlB,CAIA,GAAM90E,OAAM,CAAGyuB,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B/oC,SAAS,CAAC4Q,QAArC,CAAf,CACA,GAAMrQ,QAAO,CAAGmJ,QAAQ,CAACrY,KAAT,CAAe03C,WAAf,CAA2B/oC,SAAS,CAAC2Q,SAArC,CAAhB,CACA,GAAMW,OAAM,CAAG/Q,OAAO,CAAC1S,OAAR,CAAgB6F,aAAhB,CAA8BsM,SAAS,CAAC6Q,QAAxC,CAAf,CAEA,GAAM1Q,IAAG,CAAGF,cAAc,CAAC+vD,SAAf,CAAyBrsE,MAArC,CACA,GAAMq7F,YAAW,CAAGz+E,OAAO,CAAC7Z,IAAR,CAAaq4F,IAAb,EAApB,CACA,GAAMD,WAAU,CAAG7jG,MAAM,CAACyL,IAAP,CAAYq4F,IAAZ,EAAnB,CACA,GAAME,WAAU,CAAG3tE,MAAM,CAAC+gC,cAAP,EAAnB,CAEA,MACE,+BAAC,aAAD,MACE,8BAAC,OAAD,MACE,8BAAC,eAAD,kBADF,CAEG2sC,WAFH,UAEsB,GAFtB,CAGE,8BAAC,SAAD,aACSC,UADT,QAEGh/E,cAAc,CAACgwD,QAAf,aAA+BhwD,cAAc,CAACgwD,QAA9C,KAFH,QAHF,CAMe,GANf,OAOM6uB,UAPN,KAQE,8BAAC,mBAAD,EACE,UAAU,CAAE7+E,cAAc,CAAC+vD,SAD7B,CAEE,UAAU,CAAE/vD,cAAc,CAAC8kC,UAF7B,CAGE,QAAQ,CAAE9kC,cAAc,CAACmkC,QAH3B,EARF,CADF,CAeGnkC,cAAc,CAACjB,KAAf,CAAqBnnB,MAArB,CAA8B,CAA9B,EACC,8BAAC,eAAD,MAAkBooB,cAAc,CAACjB,KAAf,CAAqBY,IAArB,CAA0B,GAA1B,CAAlB,CAhBJ,CAkBGO,GAAG,EACF,8BAAC,eAAD,MACE,8BAAC,oBAAD,EACE,MAAM,CAAEllB,MADV,CAEE,QAAQ,CAAEyuB,QAFZ,CAGE,cAAc,CAAEzJ,cAHlB,EADF,CAnBJ,CADF,CA8BD,C,uCAEQ,IACCA,eADD,CACoB,KAAK/iB,KADzB,CACC+iB,cADD,CAGP,GAAIA,cAAc,WAAY6vD,8BAA9B,CAAmD,CACjD,MAAO,MAAKovB,iBAAL,EAAP,CACD,CAFD,IAEO,IAAIj/E,cAAc,WAAYuxD,iCAA9B,CAAsD,CAC3D,MAAO,MAAK2tB,oBAAL,EAAP,CACD,CAFM,IAEA,CACL,MAAO,KAAP,CACD,CACF,C,2BA7FyBphG,eAAK,CAACy0D,S,EAgGnBqsC,uFAAf,E;;yaCxHA,GAAMnmC,uBAAY,CAAG/8D,gDAAM,CAACC,GAAV,4BAAlB,C,GAiBMwjG,oB,6ZACK,iBACkC,KAAKliG,KADvC,CACC2sD,aADD,aACCA,aADD,CACgBngC,QADhB,aACgBA,QADhB,CAC0BtO,GAD1B,aAC0BA,GAD1B,CAGP,MACE,+BAAC,sBAAD,MACGA,GAAG,CAAC1Z,GAAJ,CAAQ,SAACmb,QAAD,CAAWllB,CAAX,QACP,+BAAC,uBAAD,EACE,QAAQ,CAAE+xB,QADZ,CAEE,aAAa,CAAEmgC,aAFjB,CAGE,GAAG,0BAAoBlyD,CAApB,CAHL,CAIE,cAAc,CAAEklB,QAJlB,EADO,EAAR,CADH,CADF,CAYD,C,uBAhBqB9e,eAAK,CAACy0D,S,EAmBf4sC,2EAAf,E;;mkFChCA,GAAMC,mBAAkB,CAAG1jG,gDAAM,CAACC,GAAV,4BAAxB,CAYA,GAAM0jG,SAAQ,CAAG3jG,wDAAM,CAACkwD,mBAAD,CAAT,6BAAd,CAQA,GAAM2E,mBAAQ,CAAG70D,gDAAM,CAACC,GAAV,6BAAd,CAMA,GAAM2jG,oBAAmB,CAAG5jG,gDAAM,CAACC,GAAV,6BAAzB,CAQA,GAAM4jG,KAAI,CAAG7jG,gDAAM,CAACC,GAAV,6BAKY,SAACsB,KAAD,sBAAkBA,KAAK,CAAC4uD,UAAxB,OALZ,CAAV,CASA,GAAM2zC,kBAAiB,CAAG9jG,gDAAM,CAACC,GAAV,6BAAvB,CAMA,GAAM8jG,UAAS,CAAG/jG,wDAAM,CAAC8jG,iBAAD,CAAT,6BACXD,IADW,CAAf,CAMA,GAAMG,OAAM,CAAGhkG,gDAAM,CAACC,GAAV,6BAIR6jG,iBAJQ,CAAZ,CAaA,GAAMG,aAAY,CAAGjkG,wDAAM,CAAC+jG,SAAD,CAAT,6BAAlB,CAUA,GAAMG,uCAA4B,CAAG,QAA/BA,6BAA+B,CAACj4F,IAAD,CAAO8hB,QAAP,CAAoB,CACvD,GAAMo2E,eAAc,CAAG,GAAI9V,cAAJ,CAAatgE,QAAb,CAAvB,CAEA,MAAOo2E,eAAc,CAACr7B,QAAf,CACJC,iBADI,GAEJl7D,MAFI,CAEG,SAAC8U,MAAD,QAAYA,OAAM,CAACsS,QAAP,GAAoBhpB,IAAI,CAACyB,EAArC,EAFH,EAE4CxR,MAFnD,CAGD,CAND,CAQA,GAAMkoG,oBAAS,CAAG,QAAZA,UAAY,MAA0C,IAAvCh7F,KAAuC,MAAvCA,IAAuC,CAAjC01C,OAAiC,MAAjCA,OAAiC,CAAxB4xB,QAAwB,MAAxBA,QAAwB,CAAdl1C,OAAc,MAAdA,OAAc,IAClD0f,YADkD,CAClC4D,OAAO,CAACyB,QAD0B,CAClDrF,WADkD,CAE1D,GAAMoQ,OAAM,CAAGliD,IAAI,CAAC6C,IAAL,CAAUooB,MAAV,CAAiB+mB,EAAjB,CAAoBF,WAApB,CAAf,CAEA,GAAMr2B,YAAW,CAAG,QAAdA,YAAc,SAClB1e,0BAAmB,CAAC2D,kBAApB,CAAuCV,IAAI,CAACyb,WAAL,EAAvC,CADkB,EAApB,CAGA,GAAMw/E,SAAQ,CAAGH,sCAA4B,CAC3C96F,IAAI,CAAC6C,IADsC,CAE3C6yC,OAAO,CAAChpB,KAAR,CAAc/H,QAF6B,CAA7C,CAKA,GAAMu2E,WAAU,CAAGl7F,IAAI,CAAC6C,IAAL,CAAUiG,OAAV,CAAkBoF,KAAlB,CAAwBe,YAAxB,EAAnB,CAEA,GAAI,CAACizC,MAAD,EAAY+4C,QAAQ,GAAK,CAAb,EAAkBC,UAAlC,CAA+C,CAC7C9oE,OAAO,CAAG,KAAV,CACD,CAED,GAAM+oE,kBAAiB,CAAGloC,wBAAO,CAC/B,iBACE7gC,QAAO,EACL,8BAAC,kBAAD,MACE,8BAAC,mBAAD,MACG,QAAqB,KADxB,CAGE,8BAAC,MAAD,MACG8vB,MAAM,EAAI+4C,QAAQ,CAAG,CAArB,EACC,8BAAC,YAAD,MACE,8BAAC,IAAD,EAAM,UAAU,CAAC,0BAAjB,EADF,CAEGA,QAFH,CAFJ,CAQG/4C,MAAM,EAAI,CAACliD,IAAI,CAAC6C,IAAL,CAAUiG,OAAV,CAAkBoF,KAAlB,CAAwBe,YAAxB,EAAX,EACC,8BAAC,YAAD,MACE,8BAAC,IAAD,EAAM,UAAU,CAAC,kBAAjB,EADF,CATJ,CAHF,CADF,CAFJ,EAD+B,CAwB/B,CAACmjB,OAAD,CAAU8vB,MAAV,CAAkB+4C,QAAlB,CAA4BC,UAA5B,CAxB+B,CAAjC,CA2BA,MACE,+BAAC,wBAAD,EACE,WAAW,CAAEz/E,WADf,CAEE,OAAO,CAAEi6B,OAFX,CAGE,SAAS,CAAE,CAHb,CAIE,UAAU,CAAE,CAJd,EAMGylD,iBANH,CADF,CAUD,CAvDD,CAyDeH,2EAAf,E;;ACrJO,GAAMI,eAAc,CAAGpiG,eAAK,CAACooE,aAAN,CAAoB,EAApB,CAAvB,CACA,GAAMi6B,kBAAiB,CAAGriG,eAAK,CAACooE,aAAN,CAAoB,EAApB,CAA1B,CAEP,GAAMk6B,oCAAiB,CAAG,QAApBA,kBAAoB,MAA2B,IAAxB5lD,QAAwB,MAAxBA,OAAwB,CAAfl0C,QAAe,MAAfA,QAAe,iBACzBggE,2BAAU,CAClC9rB,OAAO,CAAC6lD,UAAR,EADkC,CAElC7lD,OAAO,CAAC8lD,eAAR,EAFkC,CADe,sEAC5C9uE,KAD4C,iBACrCu0C,QADqC,iBAMnDvrB,OAAO,CAAC+lD,WAAR,CAAoBx6B,QAApB,EAEA,MACE,+BAAC,iBAAD,CAAmB,QAAnB,EAA4B,KAAK,CAAEA,QAAnC,EACE,8BAAC,cAAD,CAAgB,QAAhB,EAAyB,KAAK,CAAEv0C,KAAhC,EACGlrB,QADH,CADF,CADF,CAOD,CAfD,CAiBe85F,8FAAf,E;;24BCTA,GAAMt0C,yBAAS,CAAGpwD,wDAAM,CAACiyD,gBAAD,CAAT,iCAYP,SAAA1wD,KAAK,QAAKA,MAAK,CAAC+pD,MAAN,CAAetlB,sBAAM,CAAC8oB,SAAtB,CAAkC9oB,sBAAM,CAAC6oB,UAA9C,EAZE,CAmBX,SAAAttD,KAAK,QACLA,MAAK,CAACirE,UAAN,8BACqBxmC,sBAAM,CAACopB,UAD5B,gCAC6DppB,sBAAM,CAAC8oB,SADpE,KADK,EAnBM,CAAf,CAwBA,GAAM+G,sBAAM,CAAG71D,wDAAM,CAACwyD,aAAD,CAAT,kCAAZ,CAIA,GAAMsyC,MAAK,CAAG9kG,wDAAM,CAAC0yD,kBAAD,CAAT,kCAAX,CAIe,QAASqyC,eAAT,MAA2C,IAAjB94F,KAAiB,MAAjBA,IAAiB,CAAX6yC,OAAW,MAAXA,OAAW,iBAChCisB,2BAAU,CAACR,UAAD,CADsB,CAChDrvB,WADgD,aAChDA,WADgD,CAGxD,GAAMoQ,OAAM,CAAGr/C,IAAI,CAACooB,MAAL,CAAYovB,OAAZ,CAAoBvI,WAApB,CAAf,CAEA,GAAMqxB,aAAY,CAAGztB,OAAO,CAAC2D,eAAR,EAArB,CACA,GAAM+pB,WAAU,CAAGD,YAAY,EAAIA,YAAY,CAAC7+D,EAAb,GAAoBzB,IAAI,CAACyB,EAA5D,CAEA,GAAMs3F,aAAY,CAAGnkC,4BAAW,CAAC,UAAM,uBACK/hB,OAAO,CAACyB,QADb,CAC7BwM,UAD6B,mBAC7BA,UAD6B,CACjBhQ,iBADiB,mBACjBA,iBADiB,CAErC,GAAM3zC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CACA8gD,UAAU,CAACO,mBAAX,CAA+BlkD,IAAI,CAACyb,WAAL,EAA/B,EACAi6B,OAAO,CAAC8Y,WAAR,CAAoB,aAApB,CAAmC,CAAEh/B,MAAM,CAAExvB,IAAV,CAAnC,EACD,CAL+B,CAK7B,EAL6B,CAAhC,CAOA,GAAM67F,UAAS,CAAGpkC,4BAAW,CAAC,UAAM,IAC1B9jB,kBAD0B,CACJ+B,OAAO,CAACyB,QADJ,CAC1BxD,iBAD0B,CAElC,GAAM3zC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CACA6yC,OAAO,CAAC8Y,WAAR,CAAoB,eAApB,CAAqC,CAAEh/B,MAAM,CAAExvB,IAAV,CAArC,EACD,CAJ4B,CAI1B,EAJ0B,CAA7B,CAMA,GAAM87F,SAAQ,CAAGrkC,4BAAW,CAAC,UAAM,IACzB9jB,kBADyB,CACH+B,OAAO,CAACyB,QADL,CACzBxD,iBADyB,CAEjC,GAAM3zC,KAAI,CAAG2zC,iBAAiB,CAACC,SAAlB,CAA4B/wC,IAA5B,CAAb,CACA6yC,OAAO,CAAC8Y,WAAR,CAAoB,cAApB,CAAoC,CAAEh/B,MAAM,CAAExvB,IAAV,CAApC,EACD,CAJ2B,CAIzB,EAJyB,CAA5B,CAMA,GAAMytD,UAAS,CAAGwF,wBAAO,CAAC,UAAM,CAC9B,MACE,+BAAC,wBAAD,EACE,MAAM,CAAE/Q,MADV,CAEE,OAAO,CAAE05C,YAFX,CAGE,WAAW,CAAEC,SAHf,CAIE,UAAU,CAAEC,QAJd,CAKE,UAAU,CAAE14B,UALd,EAOE,8BAAC,qBAAD,MACE,8BAAC,iBAAD,EAAU,IAAI,CAAEvgE,IAAhB,EADF,CAPF,CAUE,8BAAC,KAAD,qBAVF,CADF,CAcD,CAfwB,CAetB,CAACugE,UAAD,CAfsB,CAAzB,CAiBA,MAAO3V,UAAP,CACD,C;;gPCpFD,GAAMzG,mBAAS,CAAGpwD,gDAAM,CAACC,GAAV,2BAGX,SAACsB,KAAD,QAAYA,MAAK,CAACnD,KAAN,CAAc,cAAd,CAA+B,aAA3C,EAHW,CAAf,CAQA,QAAS+mG,eAAT,MAKG,IAJDrmD,QAIC,MAJDA,OAIC,mBAHDsmD,OAGC,CAHDA,OAGC,uBAHS,EAGT,kCAFDC,SAEC,CAFDA,SAEC,yBAFW,EAEX,gCADDjnG,KACC,CADDA,KACC,qBADO,KACP,YACD,MACE,+BAAC,kBAAD,EAAW,KAAK,CAAEA,KAAlB,EACGgnG,OAAO,CAACr/F,GAAR,CAAY,SAACkG,IAAD,QACX,+BAAC,cAAD,EACE,GAAG,2BAAqBA,IAAI,CAACyB,EAA1B,CADL,CAEE,IAAI,CAAEzB,IAFR,CAGE,OAAO,CAAE6yC,OAHX,EADW,EAAZ,CADH,CADF,CAWD,CAEc,QAASwmD,SAAT,OAAyC,IAArBv3E,SAAqB,OAArBA,QAAqB,CAAX+wB,OAAW,OAAXA,OAAW,iBAC9BisB,2BAAU,CAACR,UAAD,CADoB,CAC9CrvB,WAD8C,aAC9CA,WAD8C,CAGtD,GAAI,CAACntB,QAAL,CAAe,CACb,MAAO,KAAP,CACD,CAEDA,QAAQ,CAAG,GAAIsgE,cAAJ,CAAatgE,QAAb,CAAX,CAEA,GAAMw3E,QAAO,CAAGx3E,QAAQ,CAACrY,KAAT,CACby3D,aADa,CACCjyB,WADD,EAEbrtC,MAFa,CAEN,SAAC5B,IAAD,QAAU,CAACA,IAAI,CAAC2J,WAAL,EAAX,EAFM,CAAhB,CAIA,GAAM4vF,YAAW,CAAGz3E,QAAQ,CAACrY,KAAT,CACjBg4D,kBADiB,CACExyB,WADF,EAEjBrtC,MAFiB,CAEV,SAAC5B,IAAD,QAAU,CAACA,IAAI,CAAC2J,WAAL,EAAX,EAFU,EAGjB/H,MAHiB,CAGV,SAAC5B,IAAD,QAAU,CAACs5F,OAAO,CAACr6F,QAAR,CAAiBe,IAAjB,CAAX,EAHU,CAApB,CAKA,GAAMw5F,WAAU,CAAG13E,QAAQ,CAACrY,KAAT,CAChB83D,kBADgB,CACGtyB,WADH,EAEhBrtC,MAFgB,CAET,SAAC5B,IAAD,QAAU,CAACA,IAAI,CAAC2J,WAAL,EAAX,EAFS,CAAnB,CAIA,MACE,6DACG2vF,OAAO,CAACrpG,MAAR,CAAiB,CAAjB,EACC,8BAAC,cAAD,EACE,OAAO,CAAE4iD,OADX,CAEE,OAAO,8CAAMymD,OAAN,CAFT,CAGE,SAAS,CAAEC,WAHb,EAFJ,CAQGD,OAAO,CAACrpG,MAAR,CAAiB,CAAjB,EACC,8BAAC,cAAD,EAAgB,OAAO,CAAE4iD,OAAzB,CAAkC,OAAO,8CAAM2mD,UAAN,CAAzC,CAA4D,KAAK,KAAjE,EATJ,CADF,CAcD,C;;ACpDD,GAAMC,gCAAe,CAAG,QAAlBA,gBAAkB,MAAc,IAAX7jG,KAAW,MAAXA,IAAW,iBACZkpE,2BAAU,CAACR,UAAD,CADE,CAC5BrvB,WAD4B,aAC5BA,WAD4B,CAEpC,GAAMplB,MAAK,CAAGi1C,2BAAU,CAACy5B,cAAD,CAAxB,CACA,GAAM1lD,QAAO,CAAGj9C,IAAI,CAAC8jG,UAAL,EAAhB,CAEA,MACE,6DACG7vE,KAAK,CAAC8kE,KAAN,EACC,8BAAC,KAAD,EACE,OAAO,CAAE97C,OADX,CAEE,QAAQ,CAAEhpB,KAAK,CAAC/H,QAFlB,CAGE,IAAI,CAAElsB,IAHR,CAIE,WAAW,CAAEq5C,WAJf,EAFJ,CAUGplB,KAAK,CAACmlE,WAAN,CAAkBl1F,GAAlB,CAAsB,SAACg2F,OAAD,QACrB,+BAAC,WAAD,gBACE,GAAG,wBAAkBA,OAAO,CAAC9vF,IAAR,CAAayB,EAA/B,CADL,CAEE,OAAO,CAAEoxC,OAFX,EAGMhpB,KAHN,CAIMimE,OAJN,EADqB,EAAtB,CAVH,CAmBGjmE,KAAK,CAAC/H,QAAN,GACE+H,KAAK,CAAC/H,QAAN,CAAeC,KAAf,GAAyBghE,IAAzB,EACCl5D,KAAK,CAAC/H,QAAN,CAAeC,KAAf,GAAyBghE,UAF5B,GAGG,8BAAC,aAAD,EACE,OAAO,CAAElwC,OADX,CAEE,QAAQ,CAAEA,OAAO,CAAChpB,KAAR,CAAc/H,QAF1B,CAGE,KAAK,CAAE+wB,OAAO,CAAChpB,KAAR,CAAcolE,SAHvB,CAIE,OAAO,CAAEp8C,OAAO,CAAChpB,KAAR,CAAc+lE,OAJzB,EAtBN,CA8BG/lE,KAAK,CAACklE,YAAN,EAAsBllE,KAAK,CAACklE,YAAN,CAAmB3uF,IAAnB,GAA4B,QAAlD,EACC,8BAAC,kBAAD,kBAAwBypB,KAAK,CAACklE,YAA9B,EAA4C,OAAO,CAAEl8C,OAArD,GA/BJ,CAkCGhpB,KAAK,CAACklE,YAAN,EACCllE,KAAK,CAACklE,YAAN,CAAmB3uF,IAAnB,GAA4B,MAD7B,EAECyyC,OAAO,CAAC8O,aAAR,CAAsBH,QAAtB,CAFD,EAGG,8BAAC,qBAAD,kBAAkB33B,KAAK,CAACklE,YAAxB,EAAsC,OAAO,CAAEl8C,OAA/C,GArCN,CAwCGhpB,KAAK,CAACulE,iBAAN,EACC,8BAAC,oBAAD,gBAAmB,OAAO,CAAEv8C,OAA5B,EAAyChpB,KAAK,CAACslE,UAA/C,EAzCJ,CA4CGtlE,KAAK,CAACwlE,QAAN,EACC,8BAAC,QAAD,EAAU,OAAO,CAAEx8C,OAAnB,CAA4B,aAAa,CAAEhpB,KAAK,CAACwlE,QAAjD,EA7CJ,CAgDG,CAACxlE,KAAK,CAACwlE,QAAP,EAAmB,8BAAC,mBAAD,gBAAW,OAAO,CAAEx8C,OAApB,EAAiChpB,KAAjC,EAhDtB,CAkDGgpB,OAAO,CAAChpB,KAAR,CAAc6hD,SAAd,EACC,8BAAC,mBAAD,EACE,OAAO,CAAE74B,OADX,CAEE,aAAa,CAAEhpB,KAAK,CAAC6hD,SAAN,CAAgBzpB,aAFjC,CAGE,QAAQ,CAAEp4B,KAAK,CAAC6hD,SAAN,CAAgB5pD,QAH5B,CAIE,GAAG,CAAE+H,KAAK,CAAC6hD,SAAN,CAAgBl4D,GAJvB,EAnDJ,CA2DGqW,KAAK,CAACqlE,UAAN,CAAiBp1F,GAAjB,CAAqB,mBAAG41F,QAAH,OAAGA,OAAH,CAAYvyF,IAAZ,OAAYA,IAAZ,CAAkBoyB,OAAlB,OAAkBA,OAAlB,CAA2Bk1C,QAA3B,OAA2BA,QAA3B,OACpB,+BAAC,mBAAD,EACE,GAAG,sBAAgBtnE,IAAI,CAAC6C,IAAL,CAAUyB,EAA1B,CADL,CAEE,IAAI,CAAEtE,IAFR,CAGE,OAAO,CAAEuyF,OAHX,CAIE,OAAO,CAAEngE,OAJX,CAKE,OAAO,CAAEsjB,OALX,CAME,QAAQ,CAAE4xB,QANZ,EADoB,EAArB,CA3DH,CAsEE,8BAAC,QAAD,EAAU,OAAO,CAAE5xB,OAAnB,CAA4B,QAAQ,CAAEA,OAAO,CAAChpB,KAAR,CAAc/H,QAApD,EAtEF,CADF,CA0ED,CA/ED,CAiFe23E,8FAAf,E;;mSC7FA,GAAME,sBAAqB,CAAG5lG,wDAAM,CAACs+F,WAAD,CAAT,+BAA3B,CASA,GAAMuH,0BAAY,CAAG,QAAfA,aAAe,EAAM,iBACD96B,2BAAU,CAACR,UAAD,CADT,CACjBrvB,WADiB,aACjBA,WADiB,CAGzB,GAAIA,WAAJ,CAAiB,CACf,MAAO,KAAP,CACD,CAED,MAAO,+BAAC,qBAAD,MAAP,CACD,CARD,CAUe2qD,gFAAf,E;;ACfA,GAAMC,4BAAa,CAAG,QAAhBA,cAAgB,MAAe,IAAZC,MAAY,MAAZA,KAAY,iBACXh7B,2BAAU,CAACR,UAAD,CADC,CAC3BrvB,WAD2B,aAC3BA,WAD2B,eAELghB,yBAAQ,CAAC,IAAD,CAFH,kEAE5Bpd,OAF4B,eAEnBknD,UAFmB,8BAGX9pC,yBAAQ,CAAC,IAAD,CAHG,mEAG5Br6D,IAH4B,eAGtBokG,OAHsB,eAKnCp7B,0BAAS,CAAC,UAAM,CACd,GAAMq7B,WAAU,CAAG,GAAIzL,WAAJ,EAAnB,CACA,GAAM0L,QAAO,CAAG,GAAIvM,UAAJ,CAASmM,KAAK,CAACK,MAAN,CAAaC,MAAtB,CAA8BnrD,WAA9B,CAA2CgrD,UAA3C,CAAhB,CACAF,UAAU,CAACE,UAAD,CAAV,CACAD,OAAO,CAACE,OAAD,CAAP,CACD,CALQ,CAKN,CAACjrD,WAAD,CAAc8qD,UAAd,CAA0BC,OAA1B,CALM,CAAT,CAOA,GAAI,CAACnnD,OAAD,EAAY,CAACj9C,IAAb,EAAqBq5C,WAAW,GAAKngD,SAAzC,CAAoD,CAClD,MAAO,KAAP,CACD,CAED,MACE,+BAAC,sBAAD,EAAmB,OAAO,CAAE+jD,OAA5B,EACE,8BAAC,6BAAD,EAAoB,IAAI,CAAEj9C,IAA1B,CAAgC,WAAW,CAAEq5C,WAA7C,EADF,CAEE,8BAAC,0BAAD,EAAiB,IAAI,CAAEr5C,IAAvB,EAFF,CAGE,8BAAC,kBAAD,MAHF,CADF,CAOD,CAvBD,CAyBeikG,wFAAf,E;;AChCeA,sEAAf,E;;ACKA,GAAMQ,cAAM,CAAG,QAATA,OAAS,MAAkB,IAAfj7E,SAAe,MAAfA,QAAe,CAC/B,GAAMg/C,SAAQ,CAAGU,2BAAU,CAACN,aAAD,CAA3B,CAD+B,gBAEPM,2BAAU,CAACR,UAAD,CAFH,CAEvBrvB,WAFuB,aAEvBA,WAFuB,CAI/B2vB,0BAAS,CAAC,UAAM,CACd,oFAAC,2JACO07B,OAAU,EADjB,8BAEOx8B,uBAAc,CAACM,QAAD,CAFrB,uDAAD,KAID,CALQ,CAKN,CAACA,QAAD,CALM,CAAT,CAOA,GAAI,CAACnvB,WAAL,CAAkB,CAChB,MAAO,+BAAC,gCAAD,EAAU,EAAE,CAAE,CAAE8iD,QAAQ,CAAE,GAAZ,CAAiBloE,KAAK,CAAE,CAAE+rC,IAAI,CAAEx2C,QAAR,CAAxB,CAAd,EAAP,CACD,CAED,MAAO,KAAP,CACD,CAhBD,CAkBei7E,+DAAf,E;;ACvBeA,6DAAf,E;;ACKO,GAAME,oBAAY,CAAG,QAAfA,aAAe,MAAuC,IAAzB3vC,UAAyB,MAApCt2C,SAAoC,CAAXsxC,IAAW,wFACzCkZ,2BAAU,CAACR,UAAD,CAD+B,CACzDrvB,WADyD,aACzDA,WADyD,CAGjE,GAAMurD,OAAM,CAAGzrF,OAAO,CAACkgC,WAAD,CAAtB,CAEA,MACE,+BAAC,6BAAD,kBACM2W,IADN,EAEE,MAAM,CAAE,gBAACtwD,KAAD,QACNklG,OAAM,GAAK,IAAX,CACE,8BAAC,SAAD,CAAellG,KAAf,CADF,CAGE,8BAAC,gCAAD,EAAU,EAAE,CAAE,CAAEy8F,QAAQ,CAAE,GAAZ,CAAiBloE,KAAK,CAAE,CAAE+rC,IAAI,CAAEtgE,KAAK,CAAC8pB,QAAd,CAAxB,CAAd,EAJI,EAFV,GADF,CAYD,CAjBM,CAmBP,GAAMq7E,cAAM,CAAG,QAATA,OAAS,EAAM,kBACK37B,2BAAU,CAACR,UAAD,CADf,CACXrvB,WADW,cACXA,WADW,CAGnB,GAAIA,WAAW,GAAKngD,SAApB,CAA+B,CAC7B,MAAO,KAAP,CACD,CAED,MACE,+BAAC,yCAAD,MACE,8BAAC,mBAAD,EAAc,KAAK,KAAnB,CAAoB,IAAI,CAAC,eAAzB,CAAyC,SAAS,CAAE6+F,SAApD,EADF,CAEE,8BAAC,6BAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,SAAlB,CAA4B,SAAS,CAAE0M,WAAvC,EAFF,CAGE,8BAAC,6BAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAE/G,iBAA3B,EAHF,CADF,CAOD,CAdD,CAgBemH,wDAAf,E;;GCrCMC,Q,mXACK,CACP,MACE,+BAAC,mBAAD,MACE,8BAAC,MAAD,MADF,CADF,CAKD,C,iBAPe9vC,kB,EAUH8vC,sDAAf,E;;ACfA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,GAAMC,YAAW,CAAG5rF,OAAO,CACzBla,MAAM,CAACuqB,QAAP,CAAgBw7E,QAAhB,GAA6B,WAA7B,EACE;AACA/lG,MAAM,CAACuqB,QAAP,CAAgBw7E,QAAhB,GAA6B,OAF/B,EAGE;AACA/lG,MAAM,CAACuqB,QAAP,CAAgBw7E,QAAhB,CAAyBd,KAAzB,CACE,wDADF,CALuB,CAA3B,CAUO,QAASj8B,uBAAT,CAAkBg9B,MAAlB,CAA0B,CAC/B,GAAI3yF,KAAA,EAAyC,iBAAmB4yF,UAAhE,CAA2E,CACzE;AACA,GAAMC,UAAS,CAAG,GAAIC,IAAJ,CAAQ9yF,EAAR,CAAgCrT,MAAM,CAACuqB,QAAP,CAAgB67E,IAAhD,CAAlB,CACA,GAAIF,SAAS,CAACG,MAAV,GAAqBrmG,MAAM,CAACuqB,QAAP,CAAgB87E,MAAzC,CAAiD,CAC/C;AACA;AACA;AACA,OACD,CAEDrmG,MAAM,CAAC2B,gBAAP,CAAwB,MAAxB,CAAgC,UAAM,CACpC,GAAM2kG,MAAK,WAAMjzF,EAAN,sBAAX,CAEA,GAAIyyF,WAAJ,CAAiB,CACf;AACAS,uBAAuB,CAACD,KAAD,CAAQN,MAAR,CAAvB,CAEA;AACA;AACAC,SAAS,CAACO,aAAV,CAAwBriE,KAAxB,CAA8BsiE,IAA9B,CAAmC,UAAM,CACvCviG,OAAO,CAACya,GAAR,CACE,yDACE,qDAFJ,EAID,CALD,EAMD,CAZD,IAYO,CACL;AACA+nF,eAAe,CAACJ,KAAD,CAAQN,MAAR,CAAf,CACD,CACF,CAnBD,EAoBD,CACF,CAED,QAASU,gBAAT,CAAyBJ,KAAzB,CAAgCN,MAAhC,CAAwC,CACtCC,SAAS,CAACO,aAAV,CACGx9B,QADH,CACYs9B,KADZ,EAEGG,IAFH,CAEQ,SAAAE,YAAY,CAAI,CACpBA,YAAY,CAACC,aAAb,CAA6B,UAAM,CACjC,GAAMC,iBAAgB,CAAGF,YAAY,CAACG,UAAtC,CACA,GAAID,gBAAgB,EAAI,IAAxB,CAA8B,CAC5B,OACD,CACDA,gBAAgB,CAACE,aAAjB,CAAiC,UAAM,CACrC,GAAIF,gBAAgB,CAAC7xE,KAAjB,GAA2B,WAA/B,CAA4C,CAC1C,GAAIixE,SAAS,CAACO,aAAV,CAAwBQ,UAA5B,CAAwC,CACtC;AACA;AACA;AACA9iG,OAAO,CAACya,GAAR,CACE,sDACE,4DAFJ,EAKA;AACA,GAAIqnF,MAAM,EAAIA,MAAM,CAACiB,QAArB,CAA+B,CAC7BjB,MAAM,CAACiB,QAAP,CAAgBN,YAAhB,EACD,CACF,CAbD,IAaO,CACL;AACA;AACA;AACAziG,OAAO,CAACya,GAAR,CAAY,oCAAZ,EAEA;AACA,GAAIqnF,MAAM,EAAIA,MAAM,CAACkB,SAArB,CAAgC,CAC9BlB,MAAM,CAACkB,SAAP,CAAiBP,YAAjB,EACD,CACF,CACF,CACF,CA3BD,CA4BD,CAjCD,CAkCD,CArCH,EAsCGQ,KAtCH,CAsCS,SAAAr2C,KAAK,CAAI,CACd5sD,OAAO,CAAC4sD,KAAR,CAAc,2CAAd,CAA2DA,KAA3D,EACD,CAxCH,EAyCD,CAED,QAASy1C,wBAAT,CAAiCD,KAAjC,CAAwCN,MAAxC,CAAgD,CAC9C;AACAoB,KAAK,CAACd,KAAD,CAAL,CACGG,IADH,CACQ,SAAA/lF,QAAQ,CAAI,CAChB;AACA,GAAM2mF,YAAW,CAAG3mF,QAAQ,CAACioD,OAAT,CAAiB1xC,GAAjB,CAAqB,cAArB,CAApB,CACA,GACEvW,QAAQ,CAAC8sE,MAAT,GAAoB,GAApB,EACC6Z,WAAW,EAAI,IAAf,EAAuBA,WAAW,CAACrqB,OAAZ,CAAoB,YAApB,IAAsC,CAAC,CAFjE,CAGE,CACA;AACAipB,SAAS,CAACO,aAAV,CAAwBriE,KAAxB,CAA8BsiE,IAA9B,CAAmC,SAAAE,YAAY,CAAI,CACjDA,YAAY,CAACW,UAAb,GAA0Bb,IAA1B,CAA+B,UAAM,CACnCzmG,MAAM,CAACuqB,QAAP,CAAgBg9E,MAAhB,GACD,CAFD,EAGD,CAJD,EAKD,CAVD,IAUO,CACL;AACAb,eAAe,CAACJ,KAAD,CAAQN,MAAR,CAAf,CACD,CACF,CAlBH,EAmBGmB,KAnBH,CAmBS,UAAM,CACXjjG,OAAO,CAACya,GAAR,CACE,+DADF,EAGD,CAvBH,EAwBD,CAEM,QAAS2oF,WAAT,EAAsB,CAC3B,GAAI,iBAAmBrB,UAAvB,CAAkC,CAChCA,SAAS,CAACO,aAAV,CAAwBriE,KAAxB,CAA8BsiE,IAA9B,CAAmC,SAAAE,YAAY,CAAI,CACjDA,YAAY,CAACW,UAAb,GACD,CAFD,EAGD,CACF,C;;ACjIDE,mBAAQ,CAACt5D,MAAT,CAAgB,8BAAC,UAAD,MAAhB,CAAyBtsC,QAAQ,CAACi6B,cAAT,CAAwB,MAAxB,CAAzB,EAEA;AACA;AACA;AACA2qE,UAAA,G","file":"static/js/main.f67988ea.chunk.js","sourcesContent":["const distance = (x1, y1, x2, y2) => {\r\n  if (y1.x !== undefined && x1.x !== undefined) {\r\n    x2 = y1.x;\r\n    y2 = y1.y;\r\n    y1 = x1.y;\r\n    x1 = x1.x;\r\n  }\r\n\r\n  return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n};\r\n\r\nconst distance3d = (pointA, pointB) => {\r\n  const dx = pointB.x - pointA.x;\r\n  const dy = pointB.y - pointA.y;\r\n  const dz = pointB.z - pointA.z;\r\n\r\n  const dist = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2) + Math.pow(dz, 2));\r\n\r\n  return dist;\r\n};\r\n\r\nconst getSeededRandomGenerator = seed => {\r\n  function xmur3(str) {\r\n    for (var i = 0, h = 1779033703 ^ str.length; i < str.length; i++) {\r\n      h = Math.imul(h ^ str.charCodeAt(i), 3432918353);\r\n      h = (h << 13) | (h >>> 19);\r\n    }\r\n\r\n    return function() {\r\n      h = Math.imul(h ^ (h >>> 16), 2246822507);\r\n      h = Math.imul(h ^ (h >>> 13), 3266489909);\r\n      return (h ^= h >>> 16) >>> 0;\r\n    };\r\n  }\r\n\r\n  const seedGenerator = xmur3(seed);\r\n\r\n  const xoshiro128ss = (a, b, c, d) => {\r\n    return function() {\r\n      var t = b << 9,\r\n        r = a * 5;\r\n      r = ((r << 7) | (r >>> 25)) * 9;\r\n      c ^= a;\r\n      d ^= b;\r\n      b ^= c;\r\n      a ^= d;\r\n      c ^= t;\r\n      d = (d << 11) | (d >>> 21);\r\n      return (r >>> 0) / 4294967296;\r\n    };\r\n  };\r\n\r\n  return xoshiro128ss(\r\n    seedGenerator(),\r\n    seedGenerator(),\r\n    seedGenerator(),\r\n    seedGenerator()\r\n  );\r\n};\r\n\r\nconst addToDirection = (current, add) => {\r\n  add = add % 360;\r\n\r\n  let ret = 0;\r\n  if (current + add > 360) {\r\n    ret = add - (360 - current);\r\n  } else if (current + add < 0) {\r\n    ret = 360 + (current + add);\r\n  } else {\r\n    ret = current + add;\r\n  }\r\n\r\n  return ret;\r\n};\r\n\r\nconst getDistanceBetweenDirections = (start, end, direction = 1) => {\r\n  if (end === start) {\r\n    return 0;\r\n  }\r\n\r\n  if (direction > 0) {\r\n    if (end < start) {\r\n      return 360 - start + end;\r\n    } else {\r\n      return end - start;\r\n    }\r\n  } else {\r\n    if (end > start) {\r\n      return 360 - end + start;\r\n    } else {\r\n      return start - end;\r\n    }\r\n  }\r\n};\r\n\r\nconst getPointBetween = (start, end, percentage, noRound) => {\r\n  var x = start.x + percentage * (end.x - start.x);\r\n  var y = start.y + percentage * (end.y - start.y);\r\n\r\n  if (noRound) {\r\n    return { x: x, y: y };\r\n  }\r\n\r\n  return { x: Math.floor(x), y: Math.floor(y) };\r\n};\r\n\r\nconst getPointBetween3d = (start, end, percentage, noRound) => {\r\n  var x = start.x + percentage * (end.x - start.x);\r\n  var y = start.y + percentage * (end.y - start.y);\r\n  var z = start.z + percentage * (end.z - start.z);\r\n\r\n  if (noRound) {\r\n    return { x: x, y: y, z: z };\r\n  }\r\n\r\n  return { x: Math.floor(x), y: Math.floor(y), z: Math.floor(z) };\r\n};\r\n\r\nconst getPointBetweenInDistance = (start, end, distance, noRound) => {\r\n  const totalDistance = distance3d(start, end);\r\n  const percentage = distance / totalDistance;\r\n  return getPointBetween3d(start, end, percentage, noRound);\r\n};\r\n\r\nconst getDistanceBetweenShipsInHex = (s1, s2) => {\r\n  var start = s1.getHexPosition();\r\n  var end = s2.getHexPosition();\r\n  return start.distanceTo(end);\r\n};\r\n\r\nconst getAngleBetween = (angle1, angle2, right) => {\r\n  let difference;\r\n  if (right) {\r\n    if (angle1 > angle2) {\r\n      difference = 360 - angle1 + angle2;\r\n    } else {\r\n      difference = angle2 - angle1;\r\n    }\r\n  } else {\r\n    if (angle1 < angle2) {\r\n      difference = (angle1 + (360 - angle2)) * -1;\r\n    } else {\r\n      difference = angle2 - angle1;\r\n    }\r\n  }\r\n\r\n  return difference;\r\n};\r\n\r\nconst addToHexFacing = (facing, add) => {\r\n  if (facing + add > 5) {\r\n    return addToHexFacing(0, facing + add - 6);\r\n  }\r\n\r\n  if (facing + add < 0) {\r\n    return addToHexFacing(6, facing + add);\r\n  }\r\n\r\n  return facing + add;\r\n};\r\n\r\nconst getPointInDirection = (r, a, cx, cy, noRound) => {\r\n  a = -a;\r\n\r\n  var x = cx + r * Math.cos((a * Math.PI) / 180);\r\n  var y = cy + r * Math.sin((a * Math.PI) / 180);\r\n\r\n  if (noRound) {\r\n    return { x: x, y: y };\r\n  }\r\n  return { x: Math.round(x), y: Math.round(y) };\r\n};\r\n\r\nconst getArcLength = (start, end) => {\r\n  var a = 0;\r\n  if (start > end) {\r\n    a = 360 - start + end;\r\n  } else {\r\n    a = end - start;\r\n  }\r\n\r\n  return a;\r\n};\r\n\r\nconst isInArc = (direction, start, end) => {\r\n  //direction: 300 start: 360 end: 240\r\n  direction = Math.round(direction);\r\n\r\n  if (start === end) return true;\r\n\r\n  if ((direction === 0 && start === 360) || (direction === 0 && end === 360))\r\n    return true;\r\n\r\n  if (start > end) {\r\n    return direction >= start || direction <= end;\r\n  } else if (direction >= start && direction <= end) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst radianToDegree = angle => {\r\n  return angle * (180.0 / Math.PI);\r\n};\r\n\r\nconst degreeToRadian = angle => angle / (180.0 / Math.PI);\r\n\r\nconst getCompassHeadingOfPoint = (observer, target) => {\r\n  let heading = radianToDegree(\r\n    Math.atan2(target.y - observer.y, target.x - observer.x)\r\n  );\r\n\r\n  if (heading > 0) {\r\n    heading = 360 - heading;\r\n  } else {\r\n    heading = Math.abs(heading);\r\n  }\r\n\r\n  return heading;\r\n};\r\n\r\nconst hexFacingToAngle = d => {\r\n  switch (d) {\r\n    case 0:\r\n      return 0;\r\n    case 1:\r\n      return 60;\r\n    case 2:\r\n      return 120;\r\n    case 3:\r\n      return 180;\r\n    case 4:\r\n      return 240;\r\n    default:\r\n      return 300;\r\n  }\r\n};\r\n\r\nconst angleToHexFacing = d => {\r\n  switch (d) {\r\n    case 0:\r\n      return 0;\r\n    case 60:\r\n      return 1;\r\n    case 120:\r\n      return 2;\r\n    case 180:\r\n      return 3;\r\n    case 240:\r\n      return 4;\r\n    default:\r\n      return 5;\r\n  }\r\n};\r\n\r\nconst shuffleArray = a => {\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n};\r\n\r\nexport {\r\n  distance,\r\n  distance3d,\r\n  getSeededRandomGenerator,\r\n  addToDirection,\r\n  getDistanceBetweenDirections,\r\n  getPointBetween,\r\n  getPointBetween3d,\r\n  getPointBetweenInDistance,\r\n  getDistanceBetweenShipsInHex,\r\n  getAngleBetween,\r\n  addToHexFacing,\r\n  getPointInDirection,\r\n  getArcLength,\r\n  isInArc,\r\n  radianToDegree,\r\n  degreeToRadian,\r\n  getCompassHeadingOfPoint,\r\n  hexFacingToAngle,\r\n  angleToHexFacing,\r\n  shuffleArray\r\n};\r\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { distance } from \"../../../../model/utils/math\";\n\nconst WebglCanvas = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-color: #030910;\n  box-shadow: inset 0px 0px 200px rgba(0, 0, 0, 1);\n`;\n//background-color: #0b121a;\n\nconst ClickCatcher = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  background-color: transparent;\n`;\n\nconst getMousePositionInObservedElement = (event, element) => {\n  if (event.touches) {\n    return {\n      x: event.originalEvent.touches[0].pageX - element.offset().left,\n      y: event.originalEvent.touches[0].pageY - element.offset().top,\n      xR:\n        ((event.originalEvent.touches[0].pageX - element.offset().left) /\n          window.innerWidth) *\n          2 -\n        1,\n      yR:\n        -(\n          (event.originalEvent.touches[0].pageY - element.offset().top) /\n          window.innerHeight\n        ) *\n          2 +\n        1,\n    };\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY,\n    xR: (event.clientX / element.offsetWidth) * 2 - 1,\n    yR: -(event.clientY / element.offsetHeight) * 2 + 1,\n  };\n};\n\nclass GameSceneComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    // create a ref to store the textInput DOM element\n    this.canvasRef = React.createRef();\n    this.clickCatcherRef = React.createRef();\n    this.mouseDownPosition = null;\n    this.lastDraggingPosition = null;\n    this.draggingThreshold = 5;\n  }\n\n  componentDidMount() {\n    const { game } = this.props;\n\n    window.addEventListener(\"resize\", this.onResize);\n    this.clickCatcherRef.current.addEventListener(\"wheel\", this.onWheel);\n    window.addEventListener(\"touchstart\", this.onTouchStart);\n    document.addEventListener(\"keydown\", this.onKeyDown.bind(this), false);\n    document.addEventListener(\"keyup\", this.onKeyUp.bind(this), false);\n\n    game.initRender(this.canvasRef.current);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.onKeyDown.bind(this), false);\n    document.removeEventListener(\"keyup\", this.onKeyUp.bind(this), false);\n    window.removeEventListener(\"resize\", this.onResize);\n    this.clickCatcherRef.current.removeEventListener(\"wheel\", this.onWheel);\n    window.removeEventListener(\"touchstart\", this.onTouchStart);\n  }\n\n  onTouchStart = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  onWheel = (event) => {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    const { game } = this.props;\n    const delta = Math.sign(event.deltaY);\n    game.onMouseWheel(delta);\n  };\n\n  onResize = () => {\n    const { game } = this.props;\n    game.onResize();\n  };\n\n  onMouseDown(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.mouseDownPosition = getMousePositionInObservedElement(\n      event,\n      this.clickCatcherRef.current\n    );\n  }\n\n  onMouseUp(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const { game } = this.props;\n    if (!this.lastDraggingPosition) {\n      game.onMouseUp(\n        getMousePositionInObservedElement(event, this.clickCatcherRef.current),\n        event.button\n      );\n    }\n\n    this.mouseDownPosition = null;\n    this.lastDraggingPosition = null;\n  }\n\n  onMouseMove(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const { game } = this.props;\n\n    if (this.mouseDownPosition === null) {\n      game.onMouseMove(\n        getMousePositionInObservedElement(event, this.canvasRef.current)\n      );\n      return;\n    }\n\n    const position = getMousePositionInObservedElement(\n      event,\n      this.clickCatcherRef.current\n    );\n\n    if (\n      !this.lastDraggingPosition &&\n      distance(this.mouseDownPosition, position) > this.draggingThreshold\n    ) {\n      this.lastDraggingPosition = this.mouseDownPosition;\n    }\n\n    if (this.lastDraggingPosition) {\n      const delta = {\n        x: position.x - this.lastDraggingPosition.x,\n        y: position.y - this.lastDraggingPosition.y,\n      };\n\n      this.lastDraggingPosition = position;\n      game.onDrag(position, delta);\n    }\n  }\n\n  onMouseOut(event) {\n    const { game } = this.props;\n    this.mouseDownPosition = null;\n    this.lastDraggingPosition = null;\n    game.onMouseOut(event);\n  }\n\n  onKeyDown(event) {\n    const { game } = this.props;\n    game.onKeyDown(event);\n  }\n\n  onKeyUp(event) {\n    const { game } = this.props;\n    game.onKeyUp(event);\n  }\n\n  componentDidUpdate() {\n    this.props.game.initRender(this.canvasRef.current);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    /*\n    if (this.props.game != nextProps.game) {\n      this.props.game.deactivate();\n      return true;\n    }\n  */\n\n    return false;\n  }\n\n  render() {\n    return (\n      <>\n        <ClickCatcher\n          ref={this.clickCatcherRef}\n          onMouseOut={this.onMouseOut.bind(this)}\n          onMouseDown={this.onMouseDown.bind(this)}\n          onMouseUp={this.onMouseUp.bind(this)}\n          onMouseMove={this.onMouseMove.bind(this)}\n          onKeyUp={this.onKeyUp.bind(this)}\n          onContextMenu={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n          }}\n        />\n        <WebglCanvas ref={this.canvasRef} />\n      </>\n    );\n  }\n}\n\nexport default GameSceneComponent;\n","import THREE from \"three\";\r\n\r\nconst HEX_SIZE = 25.0;\r\nconst ZOOM_MAX = 40;\r\nconst ZOOM_MIN = 0.05;\r\nconst ZOOM_PERSPECTIVE_MIN = 100;\r\nconst ZOOM_FOR_MAPICONS = 4;\r\nconst ZOOM_FOR_SHIPBADGE = 2;\r\nconst ZOOM_FOR_SHIPBADGE_NAME = 0.5;\r\n\r\nconst TORPEDO_Z = 30;\r\n\r\nconst COLOR_FRIENDLY = new THREE.Color(0 / 255, 138 / 255, 255 / 255); //new THREE.Color(39 / 255, 196 / 255, 39 / 255);\r\nconst COLOR_ENEMY = new THREE.Color(196 / 255, 39 / 255, 39 / 255);\r\nconst COLOR_FRIENDLY_HIGHLIGHT = COLOR_FRIENDLY.clone().multiplyScalar(1.5);\r\nconst COLOR_ENEMY_HIGHLIGHT = COLOR_ENEMY.clone().multiplyScalar(1.5);\r\n\r\nconst COLOR_OEW_FRIENDLY = new THREE.Color(160 / 255, 150 / 255, 250 / 255);\r\nconst COLOR_OEW_ENEMY = new THREE.Color(255 / 255, 40 / 255, 40 / 255);\r\n\r\nconst MEDIUM_WEAPON_RANGE = 25;\r\n\r\nexport {\r\n  HEX_SIZE,\r\n  ZOOM_MAX,\r\n  ZOOM_MIN,\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  ZOOM_FOR_MAPICONS,\r\n  COLOR_FRIENDLY_HIGHLIGHT,\r\n  COLOR_ENEMY_HIGHLIGHT,\r\n  COLOR_OEW_FRIENDLY,\r\n  COLOR_OEW_ENEMY,\r\n  ZOOM_FOR_SHIPBADGE,\r\n  ZOOM_FOR_SHIPBADGE_NAME,\r\n  ZOOM_PERSPECTIVE_MIN,\r\n  TORPEDO_Z,\r\n  MEDIUM_WEAPON_RANGE,\r\n};\r\n","import Cube from \"./Cube.mjs\";\nimport coordinateConverter from \"../utils/CoordinateConverter.mjs\";\n\nconst NEIGHBOURS = [\n  [\n    { q: 1, r: 0 },\n    { q: 1, r: -1 },\n    { q: 0, r: -1 },\n    { q: -1, r: 0 },\n    { q: 0, r: 1 },\n    { q: 1, r: 1 }\n  ],\n  [\n    { q: 1, r: 0 },\n    { q: 0, r: -1 },\n    { q: -1, r: -1 },\n    { q: -1, r: 0 },\n    { q: -1, r: 1 },\n    { q: 0, r: 1 }\n  ]\n];\n\nclass Offset {\n  constructor(q, r) {\n    if (q === undefined) {\n      console.trace();\n    }\n    if (q instanceof Offset || (q.q !== undefined && q.r !== undefined)) {\n      const offset = q;\n      this.q = offset.q;\n      this.r = offset.r;\n    } else {\n      this.q = q;\n      this.r = r;\n    }\n  }\n\n  getNeighbours() {\n    var neighbours = [];\n\n    NEIGHBOURS[this.r & 1].forEach(function(neighbour) {\n      neighbours.push(this.add(new Offset(neighbour)));\n    }, this);\n\n    return neighbours;\n  }\n\n  getNeighbourAtHeading(heading) {\n    if (heading >= 330 || heading <= 30) {\n      return this.add(new Offset(1, 0));\n    } else if (heading >= 150 && heading <= 210) {\n      return this.add(new Offset(-1, 0));\n    } else if (heading > 30 && heading < 90) {\n      return this.add(new Offset(1, -1));\n    } else if (heading >= 90 && heading < 150) {\n      return this.add(new Offset(0, -1));\n    } else if (heading > 210 && heading <= 270) {\n      return this.add(new Offset(0, 1));\n    } else if (heading > 270 && heading < 330) {\n      return this.add(new Offset(1, 1));\n    }\n  }\n\n  add(offset) {\n    return this.toCube()\n      .add(offset.toCube())\n      .toOffset();\n  }\n\n  subtract(offset) {\n    return this.toCube()\n      .subtract(offset.toCube())\n      .toOffset();\n  }\n\n  scale(scale) {\n    return this.toCube()\n      .scale(scale)\n      .toOffset();\n  }\n\n  moveToDirection(direction, steps) {\n    return this.toCube()\n      .moveToDirection(direction, steps)\n      .toOffset();\n  }\n\n  equals(offset) {\n    return this.q === offset.q && this.r === offset.r;\n  }\n\n  getNeighbourAtDirection(direction) {\n    var neighbours = this.getNeighbours();\n\n    return neighbours[direction];\n  }\n\n  distanceTo(target) {\n    return this.toCube().distanceTo(target.toCube());\n  }\n\n  ring(radius) {\n    return this.toCube()\n      .ring(radius)\n      .map(cube => cube.toOffset());\n  }\n\n  spiral(radius) {\n    return this.toCube()\n      .spiral(radius)\n      .map(cube => cube.toOffset());\n  }\n\n  clone() {\n    return new Offset(this);\n  }\n\n  toCube() {\n    const x = this.q - (this.r + (this.r & 1)) / 2;\n    const z = this.r;\n    const y = -x - z;\n\n    /*\n        var x, y, z;\n        switch (this.layout) {\n            case Offset.ODD_R:\n                x = this.q - (this.r - (this.r & 1)) / 2;\n                z = this.r;\n                y = -x - z;\n                break;\n            case Offset.EVEN_R:\n                x = this.q - (this.r + (this.r&1)) / 2;\n                z = this.r;\n                y = -x - z;\n                break;\n        }\n        */\n\n    return new Cube(x, y, z).round();\n  }\n\n  toVector() {\n    return coordinateConverter.fromHexToGame(this);\n  }\n\n  drawLine(target, distance) {\n    return this.toCube()\n      .drawLine(target.toCube(), distance)\n      .map(cube => cube.toOffset());\n  }\n\n  toString() {\n    return `(${this.q}, ${this.r})`;\n  }\n\n  rotate(facing) {\n    return this.toCube()\n      .rotate(facing)\n      .toOffset();\n  }\n\n  normalize() {\n    return this.toCube()\n      .normalize()\n      .toOffset();\n  }\n}\n\nexport default Offset;\n","import Offset from \"./Offset.mjs\";\n\nconst PRECISION = 4;\n\nconst lerp = (a, b, t) => {\n  return a + (b - a) * t;\n};\n\nconst cubeLerp = (a, b, t) => {\n  return new Cube(lerp(a.x, b.x, t), lerp(a.y, b.y, t), lerp(a.z, b.z, t));\n};\n\nclass Cube {\n  constructor(x, y, z) {\n    if (\n      x instanceof Cube ||\n      (x.x !== undefined && x.y !== undefined && x.z !== undefined)\n    ) {\n      const cube = x;\n      this.x = this._formatNumber(cube.x);\n      this.y = this._formatNumber(cube.y);\n      this.z = this._formatNumber(cube.z);\n    } else {\n      this.x = this._formatNumber(x);\n      this.y = this._formatNumber(y);\n      this.z = this._formatNumber(z);\n    }\n\n    this.neighbours = [\n      { x: 1, y: -1, z: 0 },\n      { x: 1, y: 0, z: -1 },\n      { x: 0, y: 1, z: -1 },\n      { x: -1, y: 1, z: 0 },\n      { x: -1, y: 0, z: 1 },\n      { x: 0, y: -1, z: 1 }\n    ];\n\n    this._validate();\n  }\n\n  round() {\n    if (this.x % 1 === 0 && this.y % 1 === 0 && this.z % 1 === 0) {\n      return this;\n    }\n\n    var rx = Math.round(this.x);\n    var ry = Math.round(this.y);\n    var rz = Math.round(this.z);\n\n    var x_diff = Math.abs(rx - this.x);\n    var y_diff = Math.abs(ry - this.y);\n    var z_diff = Math.abs(rz - this.z);\n\n    if (x_diff > y_diff && x_diff > z_diff) {\n      rx = -ry - rz;\n    } else if (y_diff > z_diff) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n\n    return new Cube(rx, ry, rz);\n  }\n\n  _validate() {\n    if (Math.abs(this.x + this.y + this.z) > 0.001) {\n      throw new Error(\n        \"Invalid Cube coordinates: (\" +\n          this.x +\n          \", \" +\n          this.y +\n          \", \" +\n          this.z +\n          \")\"\n      );\n    }\n  }\n\n  getNeighbours() {\n    var neighbours = [];\n\n    this.neighbours.forEach(function(neighbour) {\n      neighbours.push(this.add(new Cube(neighbour)));\n    }, this);\n\n    return neighbours;\n  }\n\n  moveToDirection(direction, steps = 1) {\n    return this.add(new Cube(this.neighbours[direction]).scale(steps));\n  }\n\n  add(cube) {\n    return new Cube(this.x + cube.x, this.y + cube.y, this.z + cube.z);\n  }\n\n  subtract(cube) {\n    return new Cube(this.x - cube.x, this.y - cube.y, this.z - cube.z);\n  }\n\n  scale(scale) {\n    return new Cube(this.x * scale, this.y * scale, this.z * scale);\n  }\n\n  distanceTo(cube) {\n    return Math.max(\n      Math.abs(this.x - cube.x),\n      Math.abs(this.y - cube.y),\n      Math.abs(this.z - cube.z)\n    );\n  }\n\n  equals(cube) {\n    return this.x === cube.x && this.y === cube.y && this.z === cube.z;\n  }\n\n  clone() {\n    return new Cube(this);\n  }\n\n  getFacing(neighbour) {\n    var index = -1;\n\n    var delta = neighbour.subtract(this);\n\n    this.neighbours.some(function(hex, i) {\n      if (delta.equals(hex)) {\n        index = i;\n        return true;\n      }\n\n      return false;\n    });\n\n    return index;\n  }\n\n  ring(radius) {\n    const results = [];\n\n    if (radius === 0) {\n      return results;\n    }\n\n    let cube = this.moveToDirection(4, radius);\n    for (let i = 0; i < 6; i++) {\n      for (let j = 0; j < radius; j++) {\n        results.push(cube);\n        cube = cube.moveToDirection(i);\n      }\n    }\n\n    return results;\n  }\n\n  spiral(radius) {\n    let results = [this.clone()];\n    for (let k = 1; k <= radius; k++) {\n      results = results.concat(this.ring(k));\n    }\n    return results;\n  }\n\n  toOffset() {\n    var q = this.x + (this.z + (this.z & 1)) / 2;\n    var r = this.z;\n\n    return new Offset(q, r); //EVEN_R\n  }\n\n  /*\n        Cube.prototype.toOffset = function()\n        {\n            var q = this.x + (this.z - (this.z & 1)) / 2;\n            var r = this.z;\n    \n            return new hexagon.Offset(q, r); //ODD_R\n        };\n    */\n  toString() {\n    return \"(\" + this.x + \",\" + this.y + \",\" + this.z + \")\";\n  }\n\n  _formatNumber(number) {\n    return parseFloat(number.toFixed(PRECISION));\n  }\n\n  normalize() {\n    return this.drawLine(new Cube(0, 0, 0), 1)[0];\n  }\n\n  drawLine(target, distance = null) {\n    const n = this.distanceTo(target);\n\n    if (distance === null) {\n      distance = n;\n    }\n\n    const results = [];\n    for (let i = distance; i >= 0; i--) {\n      results.push(cubeLerp(target, this, (1.0 / n) * i).round());\n    }\n\n    return results;\n  }\n\n  rotate(facing) {\n    let result = this;\n\n    const takeStep = cube => {\n      return new Cube(-cube.y, -cube.z, -cube.x);\n    };\n\n    while (facing--) {\n      result = takeStep(result);\n    }\n\n    return result;\n  }\n}\n\nexport default Cube;\n","import Cube from \"./Cube.mjs\";\r\nimport Offset from \"./Offset.mjs\";\r\n\r\nexport default { Cube, Offset };\r\n","import * as gameConfig from \"../gameConfig.mjs\";\r\n\r\nconst getHexA = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return hexSize * Math.sin((30 / 180) * Math.PI);\r\n};\r\n\r\nconst getHexB = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return hexSize * Math.cos((30 / 180) * Math.PI);\r\n};\r\n\r\nconst getHexHeight = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return hexSize + 2 * getHexA(hexSize);\r\n};\r\n\r\nconst getHexWidth = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return getHexB(hexSize) * 2;\r\n};\r\n\r\nconst getHexRowHeight = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return hexSize + getHexA(hexSize);\r\n};\r\n\r\nconst getTextureHeight = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return Math.floor(hexSize + getHexHeight(hexSize));\r\n};\r\n\r\nconst getTextureWidth = hexSize => {\r\n  if (!hexSize) {\r\n    hexSize = gameConfig.HEX_SIZE;\r\n  }\r\n\r\n  return getHexWidth(hexSize) * 2;\r\n};\r\n\r\nconst getGridWidth = hexCountWidth => {\r\n  return getHexWidth() * (hexCountWidth + 0.5);\r\n};\r\n\r\nconst getGridHeight = hexCountHeight => {\r\n  var amount = Math.floor(hexCountHeight / 2);\r\n  var height = amount * (getHexHeight() + gameConfig.HEX_SIZE);\r\n\r\n  if (hexCountHeight % 2 !== 0) {\r\n    height += getHexHeight();\r\n  }\r\n\r\n  return height;\r\n};\r\n\r\nexport default {\r\n  getHexA,\r\n  getHexB,\r\n  getHexHeight,\r\n  getHexWidth,\r\n  getHexRowHeight,\r\n  getTextureHeight,\r\n  getTextureWidth,\r\n  getGridWidth,\r\n  getGridHeight\r\n};\r\n","import THREE from \"three\";\r\nimport Vector from \"./Vector.mjs\";\r\nimport * as gameConfig from \"../gameConfig.mjs\";\r\nimport hexagon from \"../hexagon/index.mjs\";\r\nimport HexagonMath from \"./HexagonMath.mjs\";\r\nimport { distance } from \"./math.mjs\";\r\n\r\nconst getShipIcon = object3d => {\r\n  do {\r\n    if (object3d.userData.icon) {\r\n      return object3d.userData.icon;\r\n    }\r\n    object3d = object3d.parent;\r\n  } while (object3d.parent);\r\n\r\n  return null;\r\n};\r\n\r\nclass CoordinateConverter {\r\n  constructor() {\r\n    this.hexlenght = gameConfig.HEX_SIZE;\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.zoom = 1;\r\n    this.camera = null;\r\n    this.scene = null;\r\n    this.raycaster = new THREE.Raycaster();\r\n  }\r\n\r\n  init(camera, scene) {\r\n    this.camera = camera;\r\n    this.scene = scene;\r\n  }\r\n\r\n  onResize({ width, height }) {\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  onZoom(zoom) {\r\n    this.zoom = zoom;\r\n  }\r\n\r\n  fromHexToViewport(hex) {\r\n    return this.fromGameToViewPort(this.fromHexToGame(hex));\r\n  }\r\n\r\n  getHexHeightViewport() {\r\n    return HexagonMath.getHexHeight() / this.zoom;\r\n  }\r\n\r\n  getHexDistance() {\r\n    var hex1 = new hexagon.Offset(0, 0);\r\n    var hex2 = hex1.getNeighbourAtDirection(0);\r\n\r\n    return distance(this.fromHexToGame(hex1), this.fromHexToGame(hex2));\r\n  }\r\n\r\n  fromGameToHex(gameCoordinates) {\r\n    if (!gameCoordinates) {\r\n      console.trace();\r\n    }\r\n    var q =\r\n      ((1 / 3) * Math.sqrt(3) * gameCoordinates.x -\r\n        (1 / 3) * gameCoordinates.y) /\r\n      this.hexlenght;\r\n    var r = ((2 / 3) * gameCoordinates.y) / this.hexlenght;\r\n\r\n    var x = q;\r\n    var z = r;\r\n    var y = -x - z;\r\n\r\n    return new hexagon.Cube(x, y, z).round().toOffset();\r\n  }\r\n\r\n  fromHexToGame(offsetHex) {\r\n    if (offsetHex instanceof hexagon.Cube) {\r\n      offsetHex = offsetHex.toOffset();\r\n    }\r\n\r\n    if (!(offsetHex instanceof hexagon.Offset)) {\r\n      offsetHex = new hexagon.Offset(offsetHex.q, offsetHex.r);\r\n    }\r\n\r\n    var x =\r\n      this.hexlenght * Math.sqrt(3) * (offsetHex.q - 0.5 * (offsetHex.r & 1));\r\n    var y = ((this.hexlenght * 3) / 2) * offsetHex.r;\r\n\r\n    return new Vector(x, y, 0);\r\n  }\r\n\r\n  fromViewPortToGame(pos) {\r\n    var result = {\r\n      x: 0,\r\n      y: 0,\r\n      z: 0\r\n    };\r\n\r\n    this.raycaster.setFromCamera(\r\n      { x: pos.xR, y: pos.yR },\r\n      this.camera.getCamera()\r\n    );\r\n    var intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n\r\n    intersects.forEach(function(intersected) {\r\n      if (intersected.object.name === \"hexgrid\") {\r\n        result.x = intersected.point.x;\r\n        result.y = intersected.point.y;\r\n        result.z = intersected.point.z;\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  getEntitiesIntersected(pos, debug = false) {\r\n    var result = [];\r\n\r\n    this.raycaster.setFromCamera(\r\n      { x: pos.xR, y: pos.yR },\r\n      this.camera.getCamera()\r\n    );\r\n    var intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n\r\n    intersects.forEach(function(intersected) {\r\n      if (intersected.object.name !== \"hexgrid\") {\r\n        var icon = getShipIcon(intersected.object);\r\n\r\n        icon && !result.includes(icon) && result.push(icon);\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  fromGameToViewPort(pos) {\r\n    var vector = new THREE.Vector3();\r\n    vector.set(pos.x, pos.y, pos.z || 0);\r\n\r\n    // map to normalized device coordinate (NDC) space\r\n    vector.project(this.camera.getCamera());\r\n\r\n    // map to 2D screen space\r\n    vector.x = Math.round(((vector.x + 1) * this.width) / 2);\r\n    vector.y = Math.round(((-vector.y + 1) * this.height) / 2);\r\n    vector.z = 0;\r\n\r\n    return {\r\n      x: vector.x,\r\n      y: vector.y\r\n    };\r\n\r\n    /*\r\n        var cameraPos = this.camera.position;\r\n        var zoom = this.zoom;\r\n        var windowDimensions = { width: this.width, height: this.height };\r\n\r\n        var positionFromCamera = { x: pos.x - cameraPos.x, y: pos.y - cameraPos.y };\r\n        var withZoom = { x: positionFromCamera.x / zoom, y: positionFromCamera.y / zoom };\r\n        var positionFromCenterOfScreen = { x: withZoom.x + windowDimensions.width / 2, y: windowDimensions.height / 2 - withZoom.y };\r\n\r\n        return positionFromCenterOfScreen;\r\n        */\r\n  }\r\n}\r\n\r\nconst coordinateConverter = new CoordinateConverter();\r\nexport default coordinateConverter;\r\n","import THREE from \"three\";\r\nimport coordinateConverter from \"./CoordinateConverter.mjs\";\r\nimport { degreeToRadian } from \"./math.mjs\";\r\n\r\nconst helperA = new THREE.Vector3();\r\nconst helperB = new THREE.Vector3();\r\n\r\nclass Vector {\r\n  constructor(x = 0, y = 0, z = 0) {\r\n    if (x instanceof THREE.Vector3 || x instanceof Vector) {\r\n      this.x = x.x;\r\n      this.y = x.y;\r\n      this.z = x.z;\r\n    } else if (x instanceof THREE.Vector2) {\r\n      this.x = x.x;\r\n      this.y = x.y;\r\n      this.z = 0;\r\n    } else if (typeof x === \"object\") {\r\n      this.x = x.x || 0;\r\n      this.y = x.y || 0;\r\n      this.z = x.z || 0;\r\n    } else {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.z = z;\r\n    }\r\n  }\r\n\r\n  clone() {\r\n    return new Vector(this.x, this.y, this.z);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      x: this.x,\r\n      y: this.y,\r\n      z: this.z,\r\n    };\r\n  }\r\n\r\n  setX(x) {\r\n    return new Vector(x, this.y, this.z);\r\n  }\r\n\r\n  setY(y) {\r\n    return new Vector(this.x, y, this.z);\r\n  }\r\n\r\n  setZ(z) {\r\n    return new Vector(this.x, this.y, z);\r\n  }\r\n\r\n  setFromAngle(a) {\r\n    return new Vector(\r\n      Math.cos(degreeToRadian(a)),\r\n      Math.sin(degreeToRadian(a))\r\n    ).normalize();\r\n  }\r\n\r\n  distanceTo(vector) {\r\n    vector = new Vector(vector);\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperB.set(vector.x, vector.y, vector.z);\r\n    return helperA.distanceTo(helperB);\r\n  }\r\n\r\n  add(vector) {\r\n    vector = new Vector(vector);\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperB.set(vector.x, vector.y, vector.z);\r\n    helperA.add(helperB);\r\n    return new Vector(helperA.x, helperA.y, helperA.z);\r\n  }\r\n\r\n  dot(vector) {\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperB.set(vector.x, vector.y, vector.z);\r\n    return helperA.dot(helperB);\r\n  }\r\n\r\n  subtract(vector) {\r\n    return this.sub(vector);\r\n  }\r\n\r\n  sub(vector) {\r\n    vector = new Vector(vector);\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperB.set(vector.x, vector.y, vector.z);\r\n    helperA.sub(helperB);\r\n    return new Vector(helperA.x, helperA.y, helperA.z);\r\n  }\r\n\r\n  normalize() {\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperA.normalize();\r\n    return new Vector(helperA.x, helperA.y, helperA.z);\r\n  }\r\n\r\n  multiplyScalar(scalar) {\r\n    helperA.set(this.x, this.y, this.z);\r\n    helperA.multiplyScalar(scalar);\r\n    return new Vector(helperA.x, helperA.y, helperA.z);\r\n  }\r\n\r\n  length() {\r\n    helperA.set(this.x, this.y, this.z);\r\n    return helperA.length();\r\n  }\r\n\r\n  applyMatrix4(matrix) {\r\n    helperA.set(this.x, this.y, this.z);\r\n\r\n    return new Vector(helperA.applyMatrix4(matrix));\r\n  }\r\n\r\n  equals(vector) {\r\n    if (!vector) {\r\n      return false;\r\n    }\r\n\r\n    return this.x === vector.x && this.y === vector.y && this.z === vector.z;\r\n  }\r\n\r\n  round() {\r\n    return new Vector(\r\n      Math.floor(this.x),\r\n      Math.floor(this.y),\r\n      Math.floor(this.z)\r\n    );\r\n  }\r\n\r\n  roundToHexCenter() {\r\n    return coordinateConverter.fromHexToGame(\r\n      coordinateConverter.fromGameToHex(this)\r\n    );\r\n  }\r\n\r\n  toOffset() {\r\n    return coordinateConverter.fromGameToHex(this);\r\n  }\r\n\r\n  toString() {\r\n    return `(x:${this.x}, y:${this.y}, z:${this.z})`;\r\n  }\r\n\r\n  toThree() {\r\n    return new THREE.Vector3(this.x, this.y, this.z);\r\n  }\r\n\r\n  toObject() {\r\n    return {\r\n      x: this.x,\r\n      y: this.y,\r\n      z: this.z,\r\n    };\r\n  }\r\n}\r\n\r\nexport default Vector;\r\n","import { movementTypes } from \"./index.mjs\";\nimport { addToHexFacing } from \"../utils/math.mjs\";\n\nclass RequiredThrust {\n  constructor(ship, move) {\n    this.requirements = {};\n    this.fullfilments = {\n      0: [],\n      1: [],\n      2: [],\n      3: [],\n      4: [],\n      5: [],\n      6: [],\n      7: [],\n      8: []\n    };\n\n    if (move) {\n      switch (move.type) {\n        case movementTypes.SPEED:\n          this.requireSpeed(ship, move);\n          break;\n        case movementTypes.PIVOT:\n          this.requirePivot(ship, move);\n          break;\n        case movementTypes.ROLL:\n          this.requireRoll(ship);\n          break;\n        case movementTypes.EVADE:\n          this.requireEvade(ship, move);\n          break;\n        default:\n      }\n    }\n  }\n\n  serialize() {\n    return {\n      requirements: this.requirements,\n      fullfilments: this.fullfilments\n    };\n  }\n\n  deserialize(data = {}) {\n    this.requirements = data.requirements || {};\n    this.fullfilments = data.fullfilments || {\n      0: [],\n      1: [],\n      2: [],\n      3: [],\n      4: [],\n      5: [],\n      6: [],\n      7: [],\n      8: []\n    };\n    return this;\n  }\n\n  getTotalAmountRequired() {\n    return Object.keys(this.requirements).reduce((total, direction) => {\n      const required = this.requirements[direction] || 0;\n      return total + required;\n    }, 0);\n  }\n\n  getRequirement(direction) {\n    if (!this.requirements[direction]) {\n      return 0;\n    }\n\n    return this.requirements[direction] - this.getFulfilledAmount(direction);\n  }\n\n  isFulfilled() {\n    return Object.keys(this.requirements).every(\n      direction => this.getRequirement(direction) === 0\n    );\n  }\n\n  fulfill(direction, amount, thruster) {\n    this.fullfilments[direction].push({ amount, thrusterId: thruster.id });\n    if (this.requirements[direction] < this.getFulfilledAmount(direction)) {\n      throw new Error(\"Fulfilled too much!\");\n    }\n  }\n\n  getFulfilledAmount(direction) {\n    return this.fullfilments[direction].reduce(\n      (total, entry) => total + entry.amount,\n      0\n    );\n  }\n\n  getFulfilments() {\n    return Object.keys(this.fullfilments)\n      .map(key => this.fullfilments[key])\n      .filter(fulfillment => fulfillment.length > 0);\n  }\n\n  requireRoll(ship) {\n    this.requirements[8] = ship.rollcost;\n  }\n\n  requireEvade(ship, move) {\n    this.requirements[8] = ship.evasioncost * move.value;\n  }\n\n  requirePivot(ship, move) {\n    if (ship.movement.isRolled()) {\n      if (move.value === 1) {\n        this.requirements[7] = ship.pivotcost;\n      } else {\n        this.requirements[6] = ship.pivotcost;\n      }\n    } else {\n      if (move.value === 1) {\n        this.requirements[6] = ship.pivotcost;\n      } else {\n        this.requirements[7] = ship.pivotcost;\n      }\n    }\n  }\n\n  requireSpeed(ship, move) {\n    const facing = move.facing;\n    const direction = move.value;\n    const actualDirection = addToHexFacing(\n      addToHexFacing(direction, -facing),\n      3\n    );\n\n    if (ship.movement.isRolled() && [1, 2, 4, 5].includes(actualDirection)) {\n      this.requirements[addToHexFacing(actualDirection, 3)] = ship.accelcost;\n    } else {\n      this.requirements[actualDirection] = ship.accelcost;\n    }\n  }\n\n  accumulate(total) {\n    Object.keys(this.requirements).forEach(direction => {\n      total[direction] = total[direction]\n        ? total[direction] + this.requirements[direction]\n        : this.requirements[direction];\n    });\n\n    return total;\n  }\n}\n\nexport default RequiredThrust;\n","import Vector from \"../../model/utils/Vector.mjs\";\nimport coordinateConverter from \"../../model/utils/CoordinateConverter.mjs\";\nimport { movementTypes } from \"./index.mjs\";\nimport hexagon from \"../hexagon/index.mjs\";\nimport { addToHexFacing } from \"../utils/math.mjs\";\nimport RequiredThrust from \"./RequiredThrust.mjs\";\n\nclass MovementOrder {\n  constructor(\n    id,\n    type,\n    position,\n    velocity,\n    facing,\n    rolled,\n    turn,\n    value = 0,\n    requiredThrust = undefined,\n    index = 0,\n    evasion = 0\n  ) {\n    this.id = id;\n    this.type = type;\n    this.facing = facing;\n    this.rolled = rolled;\n    this.turn = turn;\n    this.value = value;\n    this.requiredThrust = requiredThrust || new RequiredThrust();\n    this.index = index;\n    this.setPosition(position);\n    this.setVelocity(velocity);\n    this.evasion = evasion;\n  }\n\n  round() {\n    const position = this.position.round();\n    const velocity = this.velocity.round();\n\n    const clone = this.clone();\n    clone.setPosition(position);\n    clone.setVelocity(velocity);\n    return clone;\n  }\n\n  setPosition(position) {\n    if (position instanceof hexagon.Offset) {\n      position = coordinateConverter.fromHexToGame(position);\n    }\n\n    this.position = position;\n  }\n\n  setVelocity(velocity) {\n    if (velocity instanceof hexagon.Offset) {\n      velocity = coordinateConverter.fromHexToGame(velocity);\n    }\n\n    this.velocity = velocity;\n  }\n\n  setEvasion(evasion) {\n    this.evasion = evasion;\n    return this;\n  }\n\n  getFacing() {\n    return this.facing;\n  }\n\n  getPosition() {\n    return this.position;\n  }\n\n  getVelocity() {\n    return this.velocity;\n  }\n\n  getHexPosition() {\n    return coordinateConverter.fromGameToHex(this.position);\n  }\n\n  getHexVelocity() {\n    return coordinateConverter.fromGameToHex(this.velocity);\n  }\n\n  setRequiredThrust(req) {\n    this.requiredThrust = req;\n    return this;\n  }\n\n  setId(id) {\n    this.id = id;\n    return this;\n  }\n\n  setIndex(index) {\n    this.index = index;\n    return this;\n  }\n\n  serialize() {\n    return {\n      id: this.id,\n      type: this.type,\n      position: this.position.serialize(),\n      velocity: this.velocity.serialize(),\n      facing: this.facing,\n      rolled: this.rolled,\n      turn: this.turn,\n      value: this.value,\n      requiredThrust: this.requiredThrust.serialize(),\n      index: this.index,\n      evasion: this.evasion\n    };\n  }\n\n  deserialize(data) {\n    this.id = data.id;\n    this.type = data.type;\n    this.position = new Vector(data.position);\n    this.velocity = new Vector(data.velocity);\n    this.facing = data.facing;\n    this.rolled = data.rolled;\n    this.turn = data.turn;\n    this.value = data.value;\n    this.index = data.index;\n    this.evasion = data.evasion || 0;\n    this.requiredThrust = new RequiredThrust().deserialize(data.requiredThrust);\n\n    return this;\n  }\n\n  equals(move) {\n    return (\n      this.type === move.type &&\n      this.position\n        .roundToHexCenter()\n        .equals(move.position.roundToHexCenter()) &&\n      this.velocity\n        .roundToHexCenter()\n        .equals(move.velocity.roundToHexCenter()) &&\n      this.facing === move.facing &&\n      this.rolled === move.rolled &&\n      this.turn === move.turn &&\n      this.value === move.value\n    );\n  }\n\n  isSpeed() {\n    return this.type === movementTypes.SPEED;\n  }\n\n  isDeploy() {\n    return this.type === movementTypes.DEPLOY;\n  }\n\n  isStart() {\n    return this.type === movementTypes.START;\n  }\n\n  isEvade() {\n    return this.type === movementTypes.EVADE;\n  }\n\n  isRoll() {\n    return this.type === movementTypes.ROLL;\n  }\n\n  isEnd() {\n    return this.type === movementTypes.END;\n  }\n\n  isPivot() {\n    return this.type === movementTypes.PIVOT;\n  }\n\n  isCancellable() {\n    return this.isSpeed() || this.isPivot() || this.isEvade() || this.isRoll();\n  }\n\n  isPlayerAdded() {\n    return this.isSpeed() || this.isPivot() || this.isEvade() || this.isRoll();\n  }\n\n  clone() {\n    return new MovementOrder(\n      this.id,\n      this.type,\n      this.position,\n      this.velocity,\n      this.facing,\n      this.rolled,\n      this.turn,\n      this.value,\n      this.requiredThrust,\n      this.index,\n      this.evasion\n    );\n  }\n\n  isOpposite(move) {\n    switch (move.type) {\n      case movementTypes.SPEED:\n        return this.isSpeed() && this.value === addToHexFacing(move.value, 3);\n      default:\n        return false;\n    }\n  }\n}\n\nexport default MovementOrder;\n","const movementTypes = {\n  START: \"start\",\n  END: \"end\",\n  DEPLOY: \"deploy\",\n  SPEED: \"speed\",\n  PIVOT: \"pivot\",\n  EVADE: \"evade\",\n  ROLL: \"roll\"\n};\n\nexport default movementTypes;\n","import hexagon from \"../hexagon/index.mjs\";\nimport { addToHexFacing } from \"../utils/math.mjs\";\n\nimport { MovementOrder, movementTypes, ThrustBill } from \"./index.mjs\";\n\nclass MovementResolver {\n  constructor(ship, movementService, turn) {\n    this.ship = ship;\n    this.movementService = movementService;\n    this.turn = turn;\n  }\n\n  billAndPay(bill, commit = true) {\n    if (bill.pay()) {\n      const newMovement = bill.getMoves();\n\n      if (commit) {\n        this.ship.movement.replaceMovement(newMovement);\n        this.movementService.shipStateChanged(this.ship);\n      }\n\n      return true;\n    } else if (commit) {\n      throw new Error(\n        \"Tried to commit move that was not legal. Check legality first!\"\n      );\n    } else {\n      return false;\n    }\n  }\n\n  canRoll() {\n    return this.roll(false);\n  }\n\n  roll(commit = true) {\n    let rollMove = this.ship.movement.getRollMove();\n\n    const endMove = this.ship.movement.getLastEndMoveOrSurrogate();\n\n    let movements = this.ship.movement.getMovement();\n\n    if (rollMove) {\n      movements = movements.filter((move) => !move.isRoll());\n    } else {\n      rollMove = new MovementOrder(\n        null,\n        movementTypes.ROLL,\n        endMove.position,\n        endMove.velocity,\n        endMove.facing,\n        endMove.rolled,\n        this.turn,\n        endMove.rolled ? false : true\n      );\n\n      const playerAdded = movements.filter((move) => move.isPlayerAdded());\n      const nonPlayerAdded = movements.filter((move) => !move.isPlayerAdded());\n\n      movements = [...nonPlayerAdded, rollMove, ...playerAdded];\n    }\n\n    const bill = new ThrustBill(this.ship, movements);\n\n    return this.billAndPay(bill, commit);\n  }\n\n  canEvade(step) {\n    return this.evade(step, false);\n  }\n\n  evade(step, commit = true) {\n    let evadeMove = this.ship.movement.getEvadeMove();\n\n    const endMove = this.ship.movement.getLastEndMoveOrSurrogate();\n\n    if (evadeMove) {\n      if (evadeMove.value + step > this.ship.movement.getMaxEvasion()) {\n        return false;\n      }\n\n      if (evadeMove.value + step < 0) {\n        return false;\n      }\n      evadeMove.value += step;\n    } else {\n      if (step < 0) {\n        return false;\n      }\n\n      evadeMove = new MovementOrder(\n        null,\n        movementTypes.EVADE,\n        endMove.position,\n        endMove.velocity,\n        endMove.facing,\n        endMove.rolled,\n        this.turn,\n        1\n      );\n    }\n\n    const playerAdded = this.ship.movement\n      .getMovement()\n      .filter(\n        (move) => move.isPlayerAdded() && !move.isRoll() && !move.isEvade()\n      );\n    const nonPlayerAdded = this.ship.movement\n      .getMovement()\n      .filter((move) => !move.isPlayerAdded() || move.isRoll());\n\n    const movements =\n      evadeMove.value === 0\n        ? [...nonPlayerAdded, ...playerAdded]\n        : [...nonPlayerAdded, evadeMove, ...playerAdded];\n\n    const bill = new ThrustBill(this.ship, movements);\n\n    return this.billAndPay(bill, commit);\n  }\n\n  canPivot(pivotDirection) {\n    return this.pivot(pivotDirection, false);\n  }\n\n  pivot(pivotDirection, commit = true) {\n    const lastMove = this.ship.movement.getLastMove();\n\n    const pivotMove = new MovementOrder(\n      null,\n      movementTypes.PIVOT,\n      lastMove.position,\n      lastMove.velocity,\n      addToHexFacing(lastMove.facing, pivotDirection),\n      lastMove.rolled,\n      this.turn,\n      pivotDirection\n    );\n\n    const movements = this.ship.movement.getMovement();\n\n    if (lastMove.isPivot() && lastMove.value !== pivotDirection) {\n      movements.pop();\n    } else {\n      if (\n        this.ship.maxPivots !== null &&\n        this.ship.movement.getMovement().filter((move) => move.isPivot())\n          .length >= this.ship.maxPivots\n      ) {\n        return false;\n      }\n\n      movements.push(pivotMove);\n    }\n\n    const bill = new ThrustBill(this.ship, movements);\n\n    return this.billAndPay(bill, commit);\n  }\n\n  canThrust(direction) {\n    return this.thrust(direction, false);\n  }\n\n  thrust(direction, commit = true) {\n    const lastMove = this.ship.movement.getLastMove();\n\n    const thrustMove = new MovementOrder(\n      null,\n      movementTypes.SPEED,\n      lastMove.position,\n      lastMove.getHexVelocity().moveToDirection(direction),\n      lastMove.facing,\n      lastMove.rolled,\n      this.turn,\n      direction\n    );\n\n    let movements = this.ship.movement.getMovement();\n    if (lastMove.isSpeed() && lastMove.value === addToHexFacing(direction, 3)) {\n      movements.pop();\n    } else {\n      movements.push(thrustMove);\n    }\n\n    const bill = new ThrustBill(this.ship, movements);\n\n    return this.billAndPay(bill, commit);\n  }\n\n  canCancel() {\n    return this.ship.movement\n      .getMovement()\n      .some((move) => move.isCancellable());\n  }\n\n  cancel() {\n    const toCancel = this.ship.movement.getLastMove();\n\n    if (!toCancel || !toCancel.isCancellable()) {\n      return;\n    }\n\n    this.ship.movement.removeMovement(toCancel);\n\n    const bill = new ThrustBill(this.ship, this.ship.movement.getMovement());\n\n    return this.billAndPay(bill, true);\n  }\n\n  canRevert() {\n    return this.ship.movement\n      .getMovement()\n      .some((move) => move.isPlayerAdded());\n  }\n\n  revert() {\n    this.ship.movement\n      .getMovement()\n      .filter((move) => move.isCancellable())\n      .forEach((move) => this.ship.movement.removeMovement(move));\n\n    this.movementService.shipStateChanged(this.ship);\n  }\n}\n\nexport default MovementResolver;\n","import { RequiredThrust, ThrustAssignment } from \"./index.mjs\";\n\nclass ThrustBill {\n  constructor(ship, movement) {\n    this.ship = ship;\n    this.movement = movement.map((move) => move.clone());\n    this.thrusters = ship.systems\n      .getSystems()\n      .filter((system) => system.callHandler(\"isThruster\", null, false))\n      .filter((system) => !system.isDisabled())\n      .map((thruster) => new ThrustAssignment(thruster));\n\n    this.buildRequiredThrust(this.movement);\n\n    this.fuel = this.ship.movement.getFuel();\n\n    this.paid = null;\n\n    this.directionsRequired = this.getRequiredThrustDirections();\n  }\n\n  getRequiredThrustDirections() {\n    const result = this.movement.reduce(\n      (accumulator, move) => move.requiredThrust.accumulate(accumulator),\n      {}\n    );\n\n    result[0] = result[0] || 0;\n    result[1] = result[1] || 0;\n    result[2] = result[2] || 0;\n    result[3] = result[3] || 0;\n    result[4] = result[4] || 0;\n    result[5] = result[5] || 0;\n    result[6] = result[6] || 0;\n    result[7] = result[7] || 0;\n    result[8] = result[8] || 0;\n\n    return result;\n  }\n\n  getTotalThrustRequired() {\n    const totalRequired = this.getRequiredThrustDirections();\n    return (\n      totalRequired[0] +\n      totalRequired[1] +\n      totalRequired[2] +\n      totalRequired[3] +\n      totalRequired[4] +\n      totalRequired[5] +\n      totalRequired[6] +\n      totalRequired[7] +\n      totalRequired[8]\n    );\n  }\n\n  getCurrentThrustRequired() {\n    return (\n      this.directionsRequired[0] +\n      this.directionsRequired[1] +\n      this.directionsRequired[2] +\n      this.directionsRequired[3] +\n      this.directionsRequired[4] +\n      this.directionsRequired[5] +\n      this.directionsRequired[6] +\n      this.directionsRequired[7] +\n      this.directionsRequired[8]\n    );\n  }\n\n  isPaid() {\n    /*\n    console.log(\n      \"isPaid, required\",\n      this.getCurrentThrustRequired(),\n      \"this.fuel\",\n      this.fuel,\n      \"fuel required\",\n      this.totalFuelRequirement()\n    );\n    */\n    return (\n      this.getCurrentThrustRequired() === 0 &&\n      this.fuel >= this.totalFuelRequirement()\n    );\n  }\n\n  totalFuelRequirement() {\n    return this.thrusters.reduce(\n      (all, thruster) => all + thruster.getFuelRequirement(),\n      0\n    );\n  }\n\n  getAllUsableThrusters(direction) {\n    return this.thrusters\n      .filter((thruster) => {\n        const capacity = thruster.getThrustCapacity();\n\n        return (\n          thruster.isDirection(direction) &&\n          capacity > 0 &&\n          this.fuel >= thruster.getNextThrustFuelCost()\n        );\n      })\n      .sort(this.sortThrusters);\n  }\n\n  sortThrusters(a, b) {\n    const {\n      overheatPercentage: aHeat,\n      coolingPercent: aCooling,\n    } = a.getOverheat();\n    const {\n      overheatPercentage: bHeat,\n      coolingPercent: bCooling,\n    } = b.getOverheat();\n\n    if (aHeat > bHeat) {\n      return -1;\n    }\n\n    if (aHeat < bHeat) {\n      return 1;\n    }\n\n    if (aCooling > bCooling) {\n      return -1;\n    }\n\n    if (aCooling < bCooling) {\n      return 1;\n    }\n\n    if (a.getNextThrustFuelCost() > b.getNextThrustFuelCost()) {\n      return -1;\n    }\n\n    if (a.getNextThrustFuelCost() < b.getNextThrustFuelCost()) {\n      return 1;\n    }\n\n    if (a.channeled > b.channeled) {\n      return -1;\n    }\n\n    if (a.channeled < b.channeled) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  pay() {\n    if (this.paid !== null) {\n      throw new Error(\"Thrust bill is already paid!\");\n    }\n\n    try {\n      this.process();\n\n      this.paid = this.isPaid();\n      return this.paid;\n    } catch (e) {\n      if (e.message === \"over budget\") {\n        this.paid = false;\n        return this.paid;\n      }\n\n      throw e;\n    }\n  }\n\n  process() {\n    Object.keys(this.directionsRequired).forEach((direction) => {\n      const required = this.directionsRequired[direction];\n      direction = parseInt(direction, 10);\n\n      if (required === 0) {\n        return;\n      }\n\n      this.useThrusters(direction, required);\n    });\n\n    return this.isPaid();\n  }\n\n  useThrusters(direction, required) {\n    let assigned = 0;\n\n    while (true) {\n      const thrusters = this.getAllUsableThrusters(direction);\n\n      if (assigned === required) {\n        return;\n      }\n\n      if (thrusters.length === 0) {\n        return;\n      }\n\n      const thruster = thrusters.pop();\n      thruster.channel(1);\n      this.directionsRequired[direction] -= 1;\n      assigned += 1;\n    }\n  }\n\n  buildRequiredThrust(movement) {\n    movement.forEach((move) =>\n      move.setRequiredThrust(new RequiredThrust(this.ship, move))\n    );\n  }\n\n  getMoves() {\n    [0, 1, 2, 3, 4, 5, 6, 7, 8].forEach((direction) => {\n      this.thrusters.forEach((thruster) => {\n        if (!thruster.isDirection(direction)) {\n          return;\n        }\n\n        let free = thruster.channeled - thruster.assigned;\n\n        if (free === 0) {\n          return;\n        }\n\n        this.movement.forEach((move) => {\n          const required = move.requiredThrust.getRequirement(direction);\n\n          if (required === 0) {\n            return;\n          }\n\n          if (required > free) {\n            move.requiredThrust.fulfill(direction, free, thruster.thruster);\n            thruster.addAssigned(free);\n            free = 0;\n          } else {\n            move.requiredThrust.fulfill(direction, required, thruster.thruster);\n            thruster.addAssigned(required);\n            free -= required;\n          }\n        });\n      });\n    });\n\n    if (!this.movement.every((move) => move.requiredThrust.isFulfilled())) {\n      throw new Error(\"Not all moves are fulfilled\");\n    }\n\n    return this.movement;\n  }\n}\n\nexport default ThrustBill;\n","class ThrustAssignment {\r\n  constructor(thruster) {\r\n    this.thruster = thruster;\r\n\r\n    this.directions = [].concat(thruster.callHandler(\"getThrustDirection\"));\r\n    this.paid = 0;\r\n    this.channeled = 0;\r\n    this.capacity = thruster.callHandler(\"getThrustOutput\", null, 0);\r\n    this.assigned = 0;\r\n  }\r\n\r\n  addAssigned(amount) {\r\n    this.assigned += amount;\r\n  }\r\n\r\n  getOverheat() {\r\n    const oldChannel = this.thruster.callHandler(\"getChanneledThrust\", null, 0);\r\n    this.thruster.callHandler(\"setChanneledThrust\", this.channeled);\r\n\r\n    const payload = this.thruster.heat.predictHeatChange();\r\n\r\n    this.thruster.callHandler(\"setChanneledThrust\", oldChannel);\r\n\r\n    return payload;\r\n  }\r\n\r\n  getFuelRequirement() {\r\n    return this.thruster.callHandler(\"getFuelRequirement\", this.channeled, 0);\r\n  }\r\n\r\n  getNextThrustFuelCost() {\r\n    return (\r\n      this.thruster.callHandler(\"getFuelRequirement\", this.channeled + 1, 0) -\r\n      this.thruster.callHandler(\"getFuelRequirement\", this.channeled, 0)\r\n    );\r\n  }\r\n\r\n  isDirection(direction) {\r\n    return this.directions.includes(direction);\r\n  }\r\n\r\n  canChannel() {\r\n    return this.channeled < this.capacity;\r\n  }\r\n\r\n  getThrustCapacity() {\r\n    const capacity = this.capacity - this.channeled;\r\n\r\n    if (capacity < 0) {\r\n      return 0;\r\n    }\r\n\r\n    return capacity;\r\n  }\r\n\r\n  channel(amount) {\r\n    this.channeled += amount;\r\n  }\r\n\r\n  undoChannel(amount) {\r\n    if (this.channeled - amount < 0) {\r\n      throw new Error(\"Can not undo channel more than channeled\");\r\n    }\r\n\r\n    this.channeled = this.channeled - amount;\r\n  }\r\n}\r\n\r\nexport default ThrustAssignment;\r\n","import { MovementOrder, movementTypes, MovementResolver } from \"./index.mjs\";\nimport hexagon from \"../hexagon/index.mjs\";\nimport { addToHexFacing } from \"../utils/math.mjs\";\n\nclass MovementService {\n  constructor() {\n    this.gamedata = null;\n  }\n\n  update(gamedata, phaseDirector) {\n    this.gamedata = gamedata;\n    this.phaseDirector = phaseDirector;\n\n    return this;\n  }\n\n  isMoved(ship, turn) {\n    const end = this.getLastEndMove(ship);\n\n    if (!end) {\n      return false;\n    }\n\n    return end.turn === turn;\n  }\n\n  getShipsInSameHex(ship, hex) {\n    hex = hex && this.getMostRecentMove(ship).position;\n    return this.gamedata.ships.filter(\n      ship2 =>\n        ship2.isDestroyed() &&\n        ship !== ship2 &&\n        this.getMostRecentMove(ship2).position.equals(hex)\n    );\n  }\n\n  getNewEndMove(ship, terrain) {\n    const startMove = ship.movement.getLastEndMoveOrSurrogate();\n    const lastMove = ship.movement.getLastMove();\n    const vector = lastMove.getVelocity();\n\n    const { position, velocity } = terrain.getGravityVectorForTurn(\n      startMove.position,\n      vector\n    );\n\n    return new MovementOrder(\n      null,\n      movementTypes.END,\n      position,\n      velocity,\n      lastMove.facing,\n      lastMove.rolled,\n      startMove.turn + 1,\n      0\n    ).setEvasion(ship.movement.getEvasion());\n  }\n\n  deploy(ship, pos) {\n    let deployMove = ship.movement.getDeployMove();\n\n    if (!deployMove) {\n      const lastMove = ship.movement.getLastMove();\n      deployMove = new MovementOrder(\n        -1,\n        movementTypes.DEPLOY,\n        pos,\n        lastMove.velocity,\n        lastMove.facing,\n        lastMove.rolled,\n        this.gamedata.turn,\n        0,\n        null,\n        1\n      );\n      ship.movement.addMovement(deployMove);\n    } else {\n      deployMove.setPosition(pos);\n      ship.movement.replaceDeployMove(deployMove);\n    }\n  }\n\n  doDeploymentTurn(ship, step) {\n    const deployMove = ship.movement.getDeployMove();\n    const newfacing = addToHexFacing(deployMove.facing, step);\n    deployMove.facing = newfacing;\n    ship.movement.replaceDeployMove(deployMove);\n    this.shipStateChanged(ship);\n  }\n\n  getPositionAtStartOfTurn(ship, currentTurn) {\n    if (currentTurn === undefined) {\n      currentTurn = this.gamedata.turn;\n    }\n\n    let move = null;\n\n    for (var i = ship.movement.length - 1; i >= 0; i--) {\n      move = ship.movement[i];\n      if (move.turn < currentTurn) {\n        break;\n      }\n    }\n\n    return new hexagon.Offset(move.position);\n  }\n\n  shipStateChanged(ship) {\n    this.phaseDirector.relayEvent(\"shipStateChanged\", ship);\n  }\n\n  canThrust(ship, direction) {\n    return new MovementResolver(ship, this, this.gamedata.turn).canThrust(\n      direction\n    );\n  }\n\n  thrust(ship, direction) {\n    new MovementResolver(ship, this, this.gamedata.turn).thrust(direction);\n  }\n\n  canCancel(ship) {\n    return new MovementResolver(ship, this, this.gamedata.turn).canCancel();\n  }\n\n  canRevert(ship) {\n    return new MovementResolver(ship, this, this.gamedata.turn).canRevert();\n  }\n\n  cancel(ship) {\n    new MovementResolver(ship, this, this.gamedata.turn).cancel();\n  }\n\n  revert(ship) {\n    new MovementResolver(ship, this, this.gamedata.turn).revert();\n  }\n\n  canPivot(ship, turnDirection) {\n    if (turnDirection !== 1 && turnDirection !== -1) {\n      throw new Error(\"While pivoting direction must be 1 or -1\");\n    }\n\n    return new MovementResolver(ship, this, this.gamedata.turn).canPivot(\n      turnDirection\n    );\n  }\n\n  pivot(ship, turnDirection) {\n    if (turnDirection !== 1 && turnDirection !== -1) {\n      throw new Error(\"While pivoting direction must be 1 or -1\");\n    }\n\n    return new MovementResolver(ship, this, this.gamedata.turn).pivot(\n      turnDirection\n    );\n  }\n\n  canRoll(ship) {\n    return new MovementResolver(ship, this, this.gamedata.turn).canRoll();\n  }\n\n  roll(ship) {\n    return new MovementResolver(ship, this, this.gamedata.turn).roll();\n  }\n\n  canEvade(ship, step) {\n    if (step !== 1 && step !== -1) {\n      throw new Error(\"While evading step must be 1 or -1\");\n    }\n\n    if (ship.movement.getEvasion() + step > ship.movement.getMaxEvasion()) {\n      return false;\n    }\n\n    return new MovementResolver(ship, this, this.gamedata.turn).canEvade(step);\n  }\n\n  evade(ship, step) {\n    if (step !== 1 && step !== -1) {\n      throw new Error(\"While evading step must be 1 or -1\");\n    }\n\n    return new MovementResolver(ship, this, this.gamedata.turn).evade(step);\n  }\n}\n\nexport default MovementService;\n","import { shuffleArray } from \"../utils/math.mjs\";\r\n\r\nclass ShipPower {\r\n  constructor(shipSystems) {\r\n    this.shipSystems = shipSystems;\r\n  }\r\n\r\n  getPowerOutput() {\r\n    return this.shipSystems\r\n      .getSystems()\r\n      .reduce((acc, system) => acc + system.power.getPowerOutput(), 0);\r\n  }\r\n\r\n  getPowerRequired() {\r\n    return this.shipSystems\r\n      .getSystems()\r\n      .filter((system) => !system.power.isOffline())\r\n      .reduce((acc, system) => acc + system.power.getPowerRequirement(), 0);\r\n  }\r\n\r\n  getRemainingPowerOutput() {\r\n    return this.getPowerOutput() - this.getPowerRequired();\r\n  }\r\n\r\n  isValidPower() {\r\n    return this.getRemainingPowerOutput() >= 0 || this.getPowerRequired() === 0;\r\n  }\r\n\r\n  canSetOffline(system) {\r\n    return system.power.canSetOffline();\r\n  }\r\n\r\n  canSetOnline(system) {\r\n    if (!system.power.canSetOnline()) {\r\n      return false;\r\n    }\r\n\r\n    return this.getRemainingPowerOutput() >= system.power.getPowerRequirement();\r\n  }\r\n\r\n  copyPower(ship) {\r\n    this.shipSystems.getSystems().forEach((system) => {\r\n      const otherSystem = ship.systems.getSystemById(system.id);\r\n\r\n      if (otherSystem.power.isGoingOffline() && system.power.isOnline()) {\r\n        system.power.setOffline();\r\n      }\r\n\r\n      if (otherSystem.power.isGoingOnline() && system.power.isOffline()) {\r\n        system.power.setOnline();\r\n      }\r\n    });\r\n  }\r\n\r\n  forceValidPower() {\r\n    const systems = shuffleArray(this.shipSystems.getSystems());\r\n\r\n    systems.forEach((system) => {\r\n      if (this.canSetOffline(system) && !this.isValidPower()) {\r\n        system.power.setOffline();\r\n      }\r\n    });\r\n  }\r\n\r\n  advanceTurn(turn) {}\r\n}\r\n\r\nexport default ShipPower;\r\n","import uuidv4 from \"uuid/v4.js\";\r\n\r\nclass DamageEntry {\r\n  constructor(amount = 0, armor = 0) {\r\n    if (\r\n      !Number.isInteger(amount) ||\r\n      Number.isNaN(amount) ||\r\n      !Number.isInteger(armor) ||\r\n      Number.isNaN(armor)\r\n    ) {\r\n      throw new Error(\r\n        `Trying to construct damageEntry with invalid damage or armor ${amount}, ${armor}`\r\n      );\r\n    }\r\n    this.amount = amount;\r\n    if (this.amount < 0) {\r\n      this.amount = 0;\r\n    }\r\n    this.armor = armor;\r\n    this.id = uuidv4();\r\n    this.destroyedSystem = false;\r\n\r\n    this.system = null;\r\n    this.new = true;\r\n  }\r\n\r\n  isNew() {\r\n    return this.new;\r\n  }\r\n\r\n  setSystem(system) {\r\n    this.system = system;\r\n  }\r\n\r\n  setDestroyedSystem() {\r\n    this.destroyedSystem = true;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      amount: this.amount,\r\n      armor: this.armor,\r\n      id: this.id,\r\n      destroyedSystem: this.destroyedSystem,\r\n    };\r\n  }\r\n\r\n  deserialize(data) {\r\n    this.id = data.id || uuidv4();\r\n    this.amount = data.amount || 0;\r\n    this.armor = data.armor || 0;\r\n    this.destroyedSystem = data.destroyedSystem || false;\r\n    this.new = false;\r\n\r\n    if (\r\n      !Number.isInteger(this.amount) ||\r\n      Number.isNaN(this.amount) ||\r\n      !Number.isInteger(this.armor) ||\r\n      Number.isNaN(this.armor)\r\n    ) {\r\n      throw new Error(\r\n        `Trying to deserialize damageEntry with invalid damage or armor ${this.amount}, ${this.armor}`\r\n      );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getDamage() {\r\n    return this.amount;\r\n  }\r\n\r\n  advanceTurn() {\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default DamageEntry;\r\n","import uuidv4 from \"uuid/v4.js\";\r\n\r\nclass Critical {\r\n  constructor(duration = null) {\r\n    this.id = uuidv4();\r\n    this.duration = Number.isInteger(duration) ? duration + 1 : null;\r\n    this.turnsRemaining = this.duration;\r\n  }\r\n\r\n  getMessage() {\r\n    return \"\";\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      className: this.getClassName(),\r\n      id: this.id,\r\n      duration: this.duration,\r\n      turnsRemaining: this.turnsRemaining\r\n    };\r\n  }\r\n\r\n  deserialize(data) {\r\n    this.id = data.id || null;\r\n    this.turnsRemaining = data.turnsRemaining || null;\r\n    this.duration = data.duration || null;\r\n    return this;\r\n  }\r\n\r\n  advanceTurn() {\r\n    if (this.turnsRemaining !== null && this.turnsRemaining > 0) {\r\n      this.turnsRemaining--;\r\n    }\r\n  }\r\n\r\n  excludes(critical) {\r\n    return false;\r\n  }\r\n\r\n  isReplacedBy(critical) {\r\n    return false;\r\n  }\r\n\r\n  isFixed() {\r\n    return this.turnsRemaining === 0;\r\n  }\r\n\r\n  getDuration() {\r\n    return this.duration;\r\n  }\r\n\r\n  getClassName() {\r\n    return this.constructor.name;\r\n  }\r\n}\r\n\r\nexport default Critical;\r\n","import Critical from \"./Critical.mjs\";\r\n\r\nclass OutputReduced extends Critical {\r\n  constructor(outputReduction, duration) {\r\n    super(duration);\r\n\r\n    this.outputReduction = outputReduction;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      outputReduction: this.outputReduction\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.outputReduction = data.outputReduction || 1;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    if (this.duration) {\r\n      return `Output decreased by ${this.outputReduction} for ${this.turnsRemaining} turns`;\r\n    }\r\n    return `Output decreased by ${this.outputReduction}`;\r\n  }\r\n\r\n  getOutputReduction() {\r\n    return this.outputReduction;\r\n  }\r\n\r\n  excludes(critical) {\r\n    if (!(critical instanceof OutputReduced)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.outputReduction !== this.outputReduction) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.getDuration() !== null && this.getDuration() !== null) {\r\n      return critical.getDuration() <= this.turnsRemaining;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  isReplacedBy(critical) {\r\n    if (!(critical instanceof OutputReduced)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.getDuration() !== null && this.getDuration() !== null) {\r\n      if (critical.outputReduction !== this.outputReduction) {\r\n        return false;\r\n      }\r\n\r\n      return critical.getDuration() > this.turnsRemaining;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default OutputReduced;\r\n","import OutputReduced from \"./OutputReduced.mjs\";\r\n\r\nclass OutputReduced2 extends OutputReduced {\r\n  constructor(duration) {\r\n    super(2, duration);\r\n  }\r\n}\r\n\r\nexport default OutputReduced2;\r\n","import OutputReduced from \"./OutputReduced.mjs\";\r\n\r\nclass OutputReduced4 extends OutputReduced {\r\n  constructor(duration) {\r\n    super(4, duration);\r\n  }\r\n}\r\n\r\nexport default OutputReduced4;\r\n","import OutputReduced from \"./OutputReduced.mjs\";\r\n\r\nclass OutputReduced6 extends OutputReduced {\r\n  constructor(duration) {\r\n    super(6, duration);\r\n  }\r\n}\r\n\r\nexport default OutputReduced6;\r\n","import OutputReduced from \"./OutputReduced.mjs\";\r\n\r\nclass OutputReduced8 extends OutputReduced {\r\n  constructor(duration) {\r\n    super(8, duration);\r\n  }\r\n}\r\n\r\nexport default OutputReduced8;\r\n","import Critical from \"./Critical.mjs\";\r\n\r\nclass LoadingTimeIncreased extends Critical {\r\n  constructor(duration, loadingTimeIncrease) {\r\n    super(duration);\r\n\r\n    this.loadingTimeIncrease = loadingTimeIncrease;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      loadingTimeIncrease: this.loadingTimeIncrease\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.loadingTimeIncrease = data.loadingTimeIncrease || 1;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    if (this.duration) {\r\n      return `Charging time increased by ${this.loadingTimeIncrease} for ${this.turnsRemaining} turns`;\r\n    }\r\n    return `Charging time increased by ${this.loadingTimeIncrease}`;\r\n  }\r\n\r\n  getLoadingTimeIncrease() {\r\n    return this.loadingTimeIncrease;\r\n  }\r\n\r\n  excludes(critical) {\r\n    if (!(critical instanceof LoadingTimeIncreased)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.loadingTimeIncrease < this.loadingTimeIncrease) {\r\n      return true;\r\n    }\r\n\r\n    if (critical.loadingTimeIncrease > this.loadingTimeIncrease) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.getDuration() !== null && this.getDuration() === null) {\r\n      return true;\r\n    }\r\n\r\n    return critical.getDuration() <= this.turnsRemaining;\r\n  }\r\n\r\n  isReplacedBy(critical) {\r\n    if (!(critical instanceof LoadingTimeIncreased)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.loadingTimeIncrease > this.loadingTimeIncrease) {\r\n      return true;\r\n    }\r\n\r\n    if (critical.getDuration() === null && this.getDuration() !== null) {\r\n      return true;\r\n    }\r\n\r\n    return critical.getDuration() > this.turnsRemaining;\r\n  }\r\n}\r\n\r\nexport default LoadingTimeIncreased;\r\n","import Critical from \"./Critical.mjs\";\r\n\r\nclass ForcedOffline extends Critical {\r\n  getMessage() {\r\n    return `Forced offline for ${this.turnsRemaining} turns`;\r\n  }\r\n\r\n  excludes(critical) {\r\n    return (\r\n      critical instanceof ForcedOffline &&\r\n      critical.getDuration() <= this.turnsRemaining\r\n    );\r\n  }\r\n\r\n  isReplacedBy(critical) {\r\n    return (\r\n      critical instanceof ForcedOffline &&\r\n      critical.getDuration() > this.turnsRemaining\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForcedOffline;\r\n","import Critical from \"./Critical.mjs\";\n\nclass ForcedOfflineOverheat extends Critical {\n  getMessage() {\n    return `Forced offline until system heat lowers to 0.5 or below`;\n  }\n\n  excludes(critical) {\n    return critical instanceof ForcedOfflineOverheat;\n  }\n\n  isFixed(system) {\n    return system.heat.getOverheatPercentage() < 0.5;\n  }\n}\n\nexport default ForcedOfflineOverheat;\n","import Critical from \"./Critical.mjs\";\r\n\r\nclass ThrustChannelHeatIncreased extends Critical {\r\n  constructor(heatMultiplier = 0.5, duration) {\r\n    super(duration);\r\n\r\n    this.heatMultiplier = heatMultiplier;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      heatMultiplier: this.heatMultiplier\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.heatMultiplier = data.heatMultiplier || 0.5;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    if (this.duration) {\r\n      return `Heat per thrust increased by ${this.heatMultiplier} for ${this.turnsRemaining} turns`;\r\n    }\r\n    return `Heat per thrust increased by ${this.heatMultiplier}`;\r\n  }\r\n\r\n  getHeatIncrease() {\r\n    return this.heatMultiplier;\r\n  }\r\n\r\n  excludes(critical) {\r\n    if (!(critical instanceof ThrustChannelHeatIncreased)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.heatMultiplier !== this.heatMultiplier) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.getDuration() !== null && this.getDuration() !== null) {\r\n      return critical.getDuration() <= this.turnsRemaining;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  isReplacedBy(critical) {\r\n    if (!(critical instanceof ThrustChannelHeatIncreased)) {\r\n      return false;\r\n    }\r\n\r\n    if (critical.getDuration() !== null && this.getDuration() !== null) {\r\n      if (critical.heatMultiplier !== this.heatMultiplier) {\r\n        return false;\r\n      }\r\n\r\n      return critical.getDuration() > this.turnsRemaining;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default ThrustChannelHeatIncreased;\r\n","import DamageEntry from \"./DamageEntry.mjs\";\r\nimport * as criticals from \"./criticals/index.mjs\";\r\nimport Critical from \"./criticals/Critical.mjs\";\r\n\r\nclass SystemDamage {\r\n  constructor(system) {\r\n    this.system = system;\r\n    this.entries = [];\r\n    this.criticals = [];\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      entries: this.entries.map((entry) => entry.serialize()),\r\n      criticals: this.criticals.map((entry) => entry.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.entries = data.entries\r\n      ? data.entries.map((entry) => new DamageEntry().deserialize(entry))\r\n      : [];\r\n\r\n    this.criticals = data.criticals\r\n      ? data.criticals.map((entry) =>\r\n          new criticals[entry.className]().deserialize(entry)\r\n        )\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  addDamage(damage) {\r\n    this.entries.push(damage);\r\n  }\r\n\r\n  getDamageById(id) {\r\n    const entry = this.entries.find((damage) => damage.id === id);\r\n\r\n    if (entry) {\r\n      entry.setSystem(this.system);\r\n    }\r\n\r\n    return entry;\r\n  }\r\n\r\n  addCritical(critical) {\r\n    this.criticals.push(critical);\r\n  }\r\n\r\n  filterReplaced(critical) {\r\n    this.criticals = this.criticals.filter(\r\n      (old) => !old.isReplacedBy(critical)\r\n    );\r\n  }\r\n\r\n  hasCritical(object) {\r\n    switch (typeof object) {\r\n      case \"object\":\r\n        return this.criticals.some(\r\n          (crit) => crit.constructor === object.constructor\r\n        );\r\n      case \"function\":\r\n        return this.criticals.some((crit) => crit instanceof object);\r\n\r\n      case \"string\":\r\n        return this.criticals.some((crit) => crit.constructor.name === object);\r\n    }\r\n  }\r\n\r\n  getCriticals() {\r\n    return this.criticals;\r\n  }\r\n\r\n  hasAnyCritical() {\r\n    return this.criticals.length > 0;\r\n  }\r\n\r\n  getTotalDamage() {\r\n    const damage = this.entries.reduce(\r\n      (acc, entry) => acc + entry.getDamage(),\r\n      0\r\n    );\r\n\r\n    if (damage > this.system.hitpoints) {\r\n      return this.system.hitpoints;\r\n    }\r\n\r\n    return damage;\r\n  }\r\n\r\n  getPercentUnDamaged() {\r\n    return 1 - this.getTotalDamage() / this.system.hitpoints;\r\n  }\r\n\r\n  getNewDamage() {\r\n    return this.entries\r\n      .filter((entry) => entry.new)\r\n      .reduce((acc, entry) => acc + entry.getDamage(), 0);\r\n  }\r\n\r\n  isDestroyed() {\r\n    return this.getTotalDamage() >= this.system.hitpoints;\r\n  }\r\n\r\n  advanceTurn() {\r\n    this.entries = this.entries\r\n      .map((entry) => entry.advanceTurn())\r\n      .filter(Boolean);\r\n    this.criticals.forEach((critical) => critical.advanceTurn());\r\n    this.criticals = this.criticals.filter(\r\n      (critical) => !critical.isFixed(this.system)\r\n    );\r\n  }\r\n}\r\n\r\nexport default SystemDamage;\r\n","const POWER_TYPE_OFFLINE = \"offline\";\nconst POWER_TYPE_BOOST = \"boost\";\nconst POWER_TYPE_GO_OFFLINE = \"go-offline\";\nconst POWER_TYPE_GO_ONLINE = \"go-online\";\n\nclass PowerEntry {\n  constructor(powerType, amount = 0) {\n    this.type = powerType;\n    this.amount = amount;\n  }\n\n  isOffline() {\n    return this.type === POWER_TYPE_OFFLINE;\n  }\n\n  isGoingOffline() {\n    return this.type === POWER_TYPE_GO_OFFLINE;\n  }\n\n  isGoingOnline() {\n    return this.type === POWER_TYPE_GO_ONLINE;\n  }\n\n  isBoost() {\n    return this.type === POWER_TYPE_BOOST;\n  }\n\n  getAmount() {\n    return this.amount;\n  }\n\n  setAmount(amount) {\n    this.amount = amount;\n  }\n\n  serialize() {\n    return {\n      type: this.type,\n      amount: this.amount\n    };\n  }\n\n  deserialize(data) {\n    this.type = data.type;\n    this.amount = data.amount || 0;\n\n    return this;\n  }\n}\n\nexport {\n  POWER_TYPE_OFFLINE,\n  POWER_TYPE_BOOST,\n  POWER_TYPE_GO_OFFLINE,\n  POWER_TYPE_GO_ONLINE\n};\n\nexport default PowerEntry;\n","import PowerEntry, {\r\n  POWER_TYPE_OFFLINE,\r\n  POWER_TYPE_GO_OFFLINE,\r\n  POWER_TYPE_GO_ONLINE,\r\n  //POWER_TYPE_BOOST\r\n} from \"./PowerEntry.mjs\";\r\n\r\nclass SystemPower {\r\n  constructor(system) {\r\n    this.system = system;\r\n    this.entries = [];\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      entries: this.entries.map((entry) => entry.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.entries = data.entries\r\n      ? data.entries.map((entry) => new PowerEntry().deserialize(entry))\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  isOffline() {\r\n    if (this.system.isDestroyed()) {\r\n      return false;\r\n    }\r\n\r\n    return (\r\n      (this.entries.some((entry) => entry.isOffline()) ||\r\n        this.isGoingOffline()) &&\r\n      !this.isGoingOnline()\r\n    );\r\n  }\r\n\r\n  isOnline() {\r\n    return !this.isOffline();\r\n  }\r\n\r\n  isGoingOnline() {\r\n    return this.entries.some((entry) => entry.isGoingOnline());\r\n  }\r\n\r\n  isGoingOffline() {\r\n    return this.entries.some((entry) => entry.isGoingOffline());\r\n  }\r\n\r\n  forceOffline() {\r\n    if (this.isOffline() || !this.canSetOffline()) {\r\n      return;\r\n    }\r\n\r\n    this.entries = this.entries.filter(\r\n      (entry) => entry.type !== POWER_TYPE_GO_ONLINE\r\n    );\r\n\r\n    this.entries.push(new PowerEntry(POWER_TYPE_GO_OFFLINE));\r\n  }\r\n\r\n  setOffline() {\r\n    this.forceOffline();\r\n    this.system.callHandler(\"onSystemOffline\");\r\n  }\r\n\r\n  canSetOffline() {\r\n    return (\r\n      !this.isOffline() && this.system.callHandler(\"canSetOffline\", null, false)\r\n    );\r\n  }\r\n\r\n  canSetOnline() {\r\n    if (this.system.callHandler(\"shouldBeOffline\", null, false)) {\r\n      return false;\r\n    }\r\n\r\n    return (\r\n      this.isOffline() && this.system.callHandler(\"canSetOnline\", null, false)\r\n    );\r\n  }\r\n\r\n  setOnline() {\r\n    if (!this.isOffline()) {\r\n      return;\r\n    }\r\n\r\n    this.entries = this.entries.filter(\r\n      (entry) => entry.type !== POWER_TYPE_GO_OFFLINE\r\n    );\r\n\r\n    this.entries.push(new PowerEntry(POWER_TYPE_GO_ONLINE));\r\n    this.system.callHandler(\"onSystemOnline\");\r\n  }\r\n\r\n  getPowerOutput() {\r\n    return this.system.callHandler(\"getPowerOutput\", null, 0);\r\n  }\r\n\r\n  getPowerRequirement() {\r\n    return this.system.callHandler(\"getPowerRequirement\", null, 0);\r\n  }\r\n\r\n  advanceTurn() {\r\n    if (this.isOffline()) {\r\n      this.entries = [new PowerEntry(POWER_TYPE_OFFLINE)];\r\n    } else {\r\n      this.entries = [];\r\n    }\r\n  }\r\n}\r\n\r\nexport default SystemPower;\r\n","class SystemHeat {\n  constructor(system) {\n    this.system = system;\n    this.heat = 0;\n    this.overheat = 0;\n\n    this.heatTransferPerStructure = 0.5;\n    this.overheatLimitPerStructure = 1;\n\n    this.overheatTransferRatio = 0.5;\n\n    this.heatTransferred = 0;\n  }\n\n  serialize() {\n    return {\n      heat: this.heat,\n      overheat: this.overheat,\n    };\n  }\n\n  deserialize(data = {}) {\n    this.heat = data.heat || 0;\n    this.overheat = data.overheat || 0;\n\n    return this;\n  }\n\n  getHeatTransferPerStructure() {\n    return (\n      this.system.callHandler(\"getHeatTransferPerStructure\", null, 0) +\n      this.heatTransferPerStructure\n    );\n  }\n\n  getHeat() {\n    return this.heat;\n  }\n\n  getMaxTransferHeat() {\n    if (this.isHeatStorage()) {\n      return 0;\n    }\n\n    return this.system.hitpoints * this.getHeatTransferPerStructure();\n  }\n\n  getOverheatTransferRatio() {\n    return (\n      this.system.callHandler(\"getOverheatTransferRatio\", null, 0) ||\n      this.overheatTransferRatio\n    );\n  }\n\n  getTransferOverHeat() {\n    const ratio = this.getOverheatTransferRatio();\n    const overheat = this.overheat > 0 ? this.overheat : 0;\n    const withRatio = overheat * ratio;\n    if (withRatio < ratio) {\n      if (ratio > overheat) {\n        return overheat;\n      }\n      return ratio;\n    }\n\n    return withRatio;\n  }\n\n  getTransferHeat() {\n    const max = this.getMaxTransferHeat() - this.heatTransferred;\n\n    if (max <= 0) {\n      return 0;\n    }\n\n    if (max > this.heat) {\n      let overheatTransfer = max - this.heat;\n\n      if (overheatTransfer > this.getTransferOverHeat()) {\n        overheatTransfer = this.getTransferOverHeat();\n      }\n\n      return this.heat + overheatTransfer;\n    }\n\n    return max;\n  }\n\n  getHeatGenerated() {\n    return this.system.callHandler(\"getHeatGenerated\", null, 0);\n  }\n\n  getHeatPerStructure() {\n    return this.getHeat() / this.system.hitpoints;\n  }\n\n  shouldDisplayHeat() {\n    return (\n      this.system.callHandler(\"generatesHeat\", null, false) ||\n      this.isHeatStorage()\n    );\n  }\n\n  predictHeatChange() {\n    if (this.isHeatStorage() || this.system.isDestroyed()) {\n      return {\n        overheat: 0,\n        newHeat: 0,\n        overheatPercentage: 0,\n        cooling: 0,\n        overHeatThreshold: 0,\n        maximumPossibleOverheatReduction: 0,\n      };\n    }\n\n    const newHeat = this.getHeatGenerated();\n    const heat = this.heat + newHeat;\n    const cooling = this.getMaxTransferHeat();\n    const finalHeat = heat >= cooling ? heat - cooling : 0;\n\n    const heatCooling = cooling > heat ? heat : cooling;\n\n    const maxOverheatCooling =\n      heatCooling < cooling ? cooling - heatCooling : 0;\n\n    const overheatCooling =\n      maxOverheatCooling > this.overheat * this.getOverheatTransferRatio()\n        ? this.overheat * this.getOverheatTransferRatio()\n        : maxOverheatCooling;\n\n    const cumulatedOverheat = this.overheat + finalHeat;\n\n    const actualOverheatCooling =\n      overheatCooling <= cumulatedOverheat\n        ? overheatCooling\n        : cumulatedOverheat;\n\n    const overheat = cumulatedOverheat - actualOverheatCooling;\n\n    const maximumPossibleOverheatReduction = this.getOverheatTransferRatio();\n\n    return {\n      overheat,\n      newHeat,\n      overheatPercentage: overheat / this.getOverheatTreshold(),\n      cooling: heatCooling + actualOverheatCooling,\n      maxCooling: this.getMaxTransferHeat(),\n      coolingPercent: (heatCooling + actualOverheatCooling) / cooling,\n      overHeatThreshold: this.getOverheatTreshold(),\n      maximumPossibleOverheatReduction,\n    };\n  }\n\n  generateHeat() {\n    const newHeat = this.getHeatGenerated();\n    this.heat += newHeat;\n    return newHeat;\n  }\n\n  isHeatStorage() {\n    return this.system.callHandler(\"canStoreHeat\", null, false);\n  }\n\n  getMaxHeatStoreCapacity() {\n    return this.system.callHandler(\"getHeatStoreAmount\", null, 0);\n  }\n\n  getHeatStoreCapacity() {\n    const capacity = this.getMaxHeatStoreCapacity() - this.heat;\n\n    if (capacity <= 0) {\n      return 0;\n    }\n\n    return capacity;\n  }\n\n  changeHeat(change) {\n    if (change < 0) {\n      if (change > this.heat) {\n        this.overheat += change + this.heat;\n        this.heat = 0;\n      } else {\n        this.heat += change;\n      }\n\n      this.heatTransferred += Math.abs(change);\n    } else {\n      this.heat += change;\n    }\n    return this;\n  }\n\n  markNewOverheat() {\n    if (this.isHeatStorage()) {\n      return;\n    }\n\n    this.overheat += this.heat;\n    this.heat = 0;\n  }\n\n  getOverheat() {\n    if (this.isHeatStorage()) {\n      return 0;\n    }\n\n    return this.overheat;\n  }\n\n  getOverheatTreshold() {\n    return this.system.hitpoints * this.overheatLimitPerStructure;\n  }\n\n  getOverheatPercentage(extra = 0) {\n    if (this.isHeatStorage()) {\n      return 0;\n    }\n\n    return (this.overheat + extra) / this.getOverheatTreshold();\n  }\n\n  getRadiateHeatCapacity() {\n    return this.system.callHandler(\"getHeatRadiationCapacity\", null, 0);\n  }\n\n  radiateHeat(heat) {\n    return this.system.callHandler(\"radiateHeat\", heat);\n  }\n\n  advanceTurn() {\n    this.heatTransferred = 0;\n  }\n}\n\nexport default SystemHeat;\n","class ShipSystemLogEntry {\r\n  constructor(system) {\r\n    this.system = system;\r\n    this.turn = null;\r\n\r\n    this.messages = [];\r\n  }\r\n\r\n  setTurn(turn) {\r\n    this.turn = turn;\r\n  }\r\n\r\n  addMessage(message) {\r\n    this.messages.push(message);\r\n  }\r\n\r\n  getMessage() {\r\n    return this.messages;\r\n  }\r\n\r\n  isOpen() {\r\n    return this.turn === null;\r\n  }\r\n\r\n  isTurn(turn) {\r\n    return this.turn === turn;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      className: this.constructor.name,\r\n      messages: this.messages,\r\n      turn: this.turn\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.turn = data.turn || null;\r\n    this.messages = data.messages || [];\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default ShipSystemLogEntry;\r\n","export const formatNumber = (number) => {\r\n  if ((number * 10) % 1 > 0) {\r\n    return number.toFixed(2);\r\n  }\r\n\r\n  if (number % 1 > 0) {\r\n    return number.toFixed(1);\r\n  }\r\n  return number;\r\n};\r\n","import ShipSystemLogEntry from \"./ShipSystemLogEntry.mjs\";\r\nimport { formatNumber } from \"../../../utils/format.mjs\";\r\n\r\nclass ShipSystemLogEntryHeat extends ShipSystemLogEntry {\r\n  constructor(system) {\r\n    super(system);\r\n\r\n    this.initialOverheat = 0;\r\n    this.initialOverheatPercentage = 0;\r\n    this.heatGenerated = 0;\r\n    this.heatCooled = 0;\r\n    this.heatRadiated = 0;\r\n    this.overheat = 0;\r\n    this.overheatPercentage = 0;\r\n    this.isForcedOffline = 0;\r\n    this.intialHeatStored = 0;\r\n    this.newHeatStored = 0;\r\n    this.heatGivenToRadiators = 0;\r\n  }\r\n\r\n  setIntialHeatStored(heat) {\r\n    this.intialHeatStored = heat;\r\n  }\r\n\r\n  addNewHeatStored(amount) {\r\n    this.newHeatStored += amount;\r\n  }\r\n\r\n  addHeatGivenToRadiators(amount) {\r\n    this.heatGivenToRadiators += amount;\r\n  }\r\n\r\n  setInitialOverheat(heat, percentage) {\r\n    this.initialOverheat = heat;\r\n    this.initialOverheatPercentage = percentage;\r\n  }\r\n\r\n  setHeatGenerated(heat) {\r\n    this.heatGenerated = heat;\r\n  }\r\n\r\n  setNewOverheat(heat, percentage) {\r\n    this.overheat = heat;\r\n    this.overheatPercentage = percentage;\r\n\r\n    this.heatCooled = this.heatGenerated + this.initialOverheat - this.overheat;\r\n  }\r\n\r\n  setHeatRadiated(heat) {\r\n    this.heatRadiated = heat;\r\n  }\r\n\r\n  setForcedOffline() {\r\n    this.isForcedOffline = true;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      initialOverheat: this.initialOverheat,\r\n      initialOverheatPercentage: this.initialOverheatPercentage,\r\n      heatGenerated: this.heatGenerated,\r\n      heatCooled: this.heatCooled,\r\n      heatRadiated: this.heatRadiated,\r\n      overheat: this.overheat,\r\n      overheatPercentage: this.overheatPercentage,\r\n      isForcedOffline: this.isForcedOffline,\r\n      intialHeatStored: this.intialHeatStored,\r\n      newHeatStored: this.newHeatStored,\r\n      heatGivenToRadiators: this.heatGivenToRadiators\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.initialOverheat = data.initialOverheat || 0;\r\n    this.initialOverheatPercentage = data.initialOverheatPercentage || 0;\r\n    this.heatGenerated = data.heatGenerated || 0;\r\n    this.heatCooled = data.heatCooled || 0;\r\n    this.heatRadiated = data.heatRadiated || 0;\r\n    this.overheat = data.overheat || 0;\r\n    this.overheatPercentage = data.overheatPercentage || 0;\r\n    this.isForcedOffline = data.isForcedOffline || 0;\r\n    this.intialHeatStored = data.intialHeatStored || 0;\r\n    this.newHeatStored = data.newHeatStored || 0;\r\n    this.heatGivenToRadiators = data.heatGivenToRadiators || 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    let messages = [];\r\n\r\n    const isRadiator = this.system.callHandler(\"isRadiator\", null, false);\r\n    const isStorage = this.system.heat.isHeatStorage();\r\n\r\n    if (isStorage) {\r\n      messages = [...messages, ...this.getHeatStorageMessage()];\r\n    }\r\n\r\n    if (isRadiator) {\r\n      messages = [...messages, ...this.getRadiatorMessage()];\r\n    }\r\n\r\n    if (!isRadiator && !isStorage) {\r\n      messages = [...messages, ...this.getRegularMessage()];\r\n    }\r\n\r\n    return messages;\r\n  }\r\n\r\n  getRadiatorMessage() {\r\n    if (this.heatRadiated) {\r\n      return [`Radiated ${formatNumber(this.heatRadiated)} units of heat.`];\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  getHeatStorageMessage() {\r\n    const messages = [];\r\n\r\n    if (this.heatGivenToRadiators || this.newHeatStored) {\r\n      messages.push(\r\n        `Added ${formatNumber(\r\n          this.newHeatStored\r\n        )} units of heat. Transfered ${formatNumber(\r\n          this.heatGivenToRadiators\r\n        )} units of heat to radiators.`\r\n      );\r\n    }\r\n\r\n    messages.push(\r\n      `Stored ${formatNumber(\r\n        this.intialHeatStored + this.newHeatStored - this.heatGivenToRadiators\r\n      )} units of heat.`\r\n    );\r\n\r\n    return messages;\r\n  }\r\n\r\n  getRegularMessage() {\r\n    const messages = [];\r\n\r\n    if (this.heatGenerated || this.heatCooled) {\r\n      messages.push(\r\n        `Added ${formatNumber(this.heatGenerated)} and cooled ${formatNumber(\r\n          this.heatCooled\r\n        )} units of heat.`\r\n      );\r\n    }\r\n\r\n    let heatMessage = `Current system heat was ${formatNumber(this.overheat)}.`;\r\n\r\n    messages.push();\r\n\r\n    if (this.overheat) {\r\n      heatMessage += ` Overheating ${Math.round(\r\n        this.overheatPercentage * 100\r\n      )}%.`;\r\n    }\r\n\r\n    messages.push(heatMessage);\r\n    if (this.isForcedOffline) {\r\n      messages.push(`System forced offline until overheat is less than 50%.`);\r\n    }\r\n\r\n    return messages;\r\n  }\r\n}\r\n\r\nexport default ShipSystemLogEntryHeat;\r\n","import ShipSystemLogEntry from \"./ShipSystemLogEntry.mjs\";\r\n\r\nclass ShipSystemLogEntryCriticalHit extends ShipSystemLogEntry {\r\n  constructor(system) {\r\n    super(system);\r\n\r\n    this.newDamagePoints = 0;\r\n    this.overHeatPoints = 0;\r\n    this.oldDamagePoints = 0;\r\n    this.criticalMessage = \"\";\r\n    this.extraPoints = 0;\r\n  }\r\n\r\n  setExtraPoints(amount) {\r\n    this.extraPoints = amount;\r\n  }\r\n\r\n  setNewDamagePoints(damage) {\r\n    this.newDamagePoints = damage;\r\n  }\r\n\r\n  setOldDamagePoints(damage) {\r\n    this.oldDamagePoints = damage;\r\n  }\r\n\r\n  setOverHeatPoints(amount) {\r\n    this.overHeatPoints += amount;\r\n  }\r\n\r\n  setCriticalMessage(message) {\r\n    this.criticalMessage = message;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      newDamagePoints: this.newDamagePoints,\r\n      overHeatPoints: this.overHeatPoints,\r\n      oldDamagePoints: this.oldDamagePoints,\r\n      criticalMessage: this.criticalMessage,\r\n      extraPoints: this.extraPoints\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.newDamagePoints = data.newDamagePoints || 0;\r\n    this.overHeatPoints = data.overHeatPoints || 0;\r\n    this.oldDamagePoints = data.oldDamagePoints || 0;\r\n    this.criticalMessage = data.criticalMessage || \"\";\r\n    this.extraPoints = data.extraPoints || 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    const messages = [\r\n      `Tested for critical damage:`,\r\n      `Existing damage: ${this.oldDamagePoints}, new: ${\r\n        this.newDamagePoints\r\n      }, overheat: ${this.overHeatPoints}, random: ${\r\n        this.extraPoints\r\n      }, total: ${this.oldDamagePoints +\r\n        this.newDamagePoints +\r\n        this.overHeatPoints +\r\n        this.extraPoints}`\r\n    ];\r\n\r\n    if (this.criticalMessage) {\r\n      messages.push(`Resulted in critical:`);\r\n      messages.push(`\"${this.criticalMessage}\"`);\r\n    }\r\n\r\n    return messages;\r\n  }\r\n}\r\n\r\nexport default ShipSystemLogEntryCriticalHit;\r\n","import ShipSystemLogEntry from \"./ShipSystemLogEntry.mjs\";\r\n\r\nclass ShipSystemLogEntryDamage extends ShipSystemLogEntry {\r\n  constructor(system) {\r\n    super(system);\r\n\r\n    this.damage = 0;\r\n    this.blockedByArmor = 0;\r\n    this.wasDestroyed = false;\r\n  }\r\n\r\n  addDamage(damageEntry) {\r\n    this.damage += damageEntry.amount;\r\n    this.blockedByArmor += damageEntry.armor;\r\n    if (damageEntry.destroyedSystem) {\r\n      this.wasDestroyed = true;\r\n    }\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      ...super.serialize(),\r\n      blockedByArmor: this.blockedByArmor,\r\n      damage: this.damage,\r\n      wasDestroyed: this.wasDestroyed\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    super.deserialize(data);\r\n    this.blockedByArmor = data.blockedByArmor || 0;\r\n    this.damage = data.damage || 0;\r\n    this.wasDestroyed = data.wasDestroyed || false;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessage() {\r\n    const messages = [\r\n      `Suffered ${this.damage} points of damge. Armor blocked ${this.addBlockedByArmor} points.`\r\n    ];\r\n\r\n    if (this.wasDestroyed) {\r\n      messages.push(`System was destroyed`);\r\n    }\r\n\r\n    return messages;\r\n  }\r\n}\r\n\r\nexport default ShipSystemLogEntryDamage;\r\n","import ShipSystemLogEntry from \"./ShipSystemLogEntry.mjs\";\r\nimport ShipSystemLogEntryHeat from \"./ShipSystemLogEntryHeat.mjs\";\r\nimport ShipSystemLogEntryCriticalHit from \"./ShipSystemLogEntryCriticalHit.mjs\";\r\nimport ShipSystemLogEntryDamage from \"./ShipSystemLogEntryDamage.mjs\";\r\n\r\nexport const systemLogEntryClasses = {\r\n  ShipSystemLogEntry,\r\n  ShipSystemLogEntryHeat,\r\n  ShipSystemLogEntryCriticalHit,\r\n  ShipSystemLogEntryDamage\r\n};\r\n","import { systemLogEntryClasses } from \"./systemLogEntryClasses.mjs\";\r\nimport ShipSystemLogEntry from \"./ShipSystemLogEntry.mjs\";\r\n\r\nclass ShipSystemLog {\r\n  constructor(system) {\r\n    this.system = system;\r\n\r\n    this.log = [];\r\n  }\r\n\r\n  getGenericLogEntry() {\r\n    const entry = new ShipSystemLogEntry();\r\n    this.log.push(entry);\r\n    return entry;\r\n  }\r\n\r\n  getOpenLogEntryByClass(className) {\r\n    let entry = this.log\r\n      .filter(entry => entry.isOpen())\r\n      .find(entry => entry instanceof className);\r\n\r\n    if (!entry) {\r\n      entry = new className(this.system);\r\n      this.log.push(entry);\r\n    }\r\n\r\n    return entry;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      log: this.log.map(entry => entry.serialize())\r\n    };\r\n  }\r\n\r\n  getMessagesForTurn(turn) {\r\n    return this.log\r\n      .filter(entry => entry.isTurn(turn))\r\n      .reduce((all, entry) => [...all, ...entry.getMessage()], []);\r\n  }\r\n\r\n  getWithTurns() {\r\n    const turns = [];\r\n\r\n    this.log.forEach(entry => {\r\n      let turnEntry = turns.find(turnEntry => turnEntry.turn === entry.turn);\r\n\r\n      if (!turnEntry) {\r\n        turnEntry = {\r\n          turn: entry.turn,\r\n          messages: []\r\n        };\r\n\r\n        turns.push(turnEntry);\r\n      }\r\n\r\n      turnEntry.messages = [...turnEntry.messages, ...entry.getMessage()];\r\n    });\r\n\r\n    return turns;\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.log = data.log || [];\r\n    this.log = this.log.map(entry =>\r\n      new systemLogEntryClasses[entry.className](this.system).deserialize(entry)\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  endTurn(turn) {\r\n    this.log\r\n      .filter(entry => entry.isOpen())\r\n      .forEach(entry => entry.setTurn(turn));\r\n  }\r\n\r\n  advanceTurn(turn) {}\r\n}\r\n\r\nexport default ShipSystemLog;\r\n","import SystemDamage from \"./SystemDamage.mjs\";\nimport SystemPower from \"./SystemPower.mjs\";\nimport SystemHeat from \"./SystemHeat.mjs\";\nimport ShipSystemLog from \"./ShipSystemLog/ShipSystemLog.mjs\";\nimport ShipSystemLogEntryDamage from \"./ShipSystemLog/ShipSystemLogEntryDamage.mjs\";\nimport { formatNumber } from \"../../utils/format.mjs\";\n\nclass ShipSystem {\n  constructor(args = {}, strategies = []) {\n    this.id = args.id;\n    this.hitpoints = args.hitpoints;\n    this.armor = args.armor || 0;\n    this.strategies = strategies;\n\n    if (!this.hitpoints) {\n      throw new Error(\"System must have hitpoints\");\n    }\n\n    this.strategies.forEach((strategy) => strategy.init(this));\n\n    this.damage = new SystemDamage(this);\n    this.power = new SystemPower(this);\n\n    this.shipSystems = null;\n\n    this.heat = new SystemHeat(this);\n    this.log = new ShipSystemLog(this);\n  }\n\n  getSystemDescription() {\n    return \"\";\n  }\n\n  addStrategy(strategy) {\n    this.strategies.push(strategy);\n    strategy.init(this);\n  }\n\n  addShipSystemsReference(shipSystems) {\n    this.shipSystems = shipSystems;\n  }\n\n  getSystemInfo(ship) {\n    const heatMessages = [];\n\n    if (this.heat.shouldDisplayHeat()) {\n      if (!this.heat.isHeatStorage()) {\n        heatMessages.push({\n          sort: \"heat\",\n          component: \"SystemHeatBar\",\n          props: {\n            currentOverheat: this.heat.getOverheatPercentage(),\n            prediction: this.heat.predictHeatChange(),\n          },\n        });\n      }\n    }\n\n    return [\n      {\n        sort: \"AAA\",\n        value: [\n          {\n            header: \"Hitpoints\",\n            value: `${this.getRemainingHitpoints()}/${this.hitpoints}`,\n          },\n          { header: \"Armor\", value: `${this.getArmor()}` },\n        ],\n      },\n      ...heatMessages,\n      ...this.callHandler(\"getMessages\", null, []),\n    ];\n  }\n\n  getDisplayName() {\n    return null;\n  }\n\n  getBackgroundImage() {\n    return null;\n  }\n\n  getIconText() {\n    return this.callHandler(\"getIconText\", null, \"\");\n  }\n\n  isDestroyed() {\n    return this.damage.isDestroyed();\n  }\n\n  isDisabled() {\n    return this.power.isOffline() || this.isDestroyed();\n  }\n\n  getArmor() {\n    const armorMod = this.callHandler(\"getArmorModifier\", null, 0);\n\n    return this.armor + armorMod;\n  }\n\n  getRemainingHitpoints() {\n    return this.hitpoints - this.getTotalDamage();\n  }\n\n  getTotalDamage() {\n    return this.damage.getTotalDamage();\n  }\n\n  addDamage(damage) {\n    const shipWasDestroyed = this.shipSystems\n      ? this.shipSystems.isDestroyed()\n      : undefined;\n\n    const systemWasDestroyed = this.isDestroyed();\n    this.damage.addDamage(damage);\n\n    if (!systemWasDestroyed && this.isDestroyed()) {\n      damage.setDestroyedSystem();\n    }\n\n    const logEntry = this.log.getOpenLogEntryByClass(ShipSystemLogEntryDamage);\n    logEntry.addDamage(damage);\n\n    if (\n      this.shipSystems &&\n      shipWasDestroyed === false &&\n      this.shipSystems.isDestroyed()\n    ) {\n      this.shipSystems.markDestroyedThisTurn();\n    }\n  }\n\n  addCritical(critical) {\n    this.damage.addCritical(critical);\n  }\n\n  hasAnyCritical() {\n    return this.damage.hasAnyCritical();\n  }\n\n  hasCritical(name) {\n    return this.damage.hasCritical(name);\n  }\n\n  callHandler(name, payload = {}, response = undefined) {\n    this.strategies.forEach((strategy) => {\n      response = strategy.callHandler(name, payload, response);\n    });\n\n    return response;\n  }\n\n  getStrategiesByInstance(instance) {\n    return this.strategies.filter((strategy) => strategy instanceof instance);\n  }\n\n  deserialize(data = {}) {\n    this.damage.deserialize(data.damage);\n    this.power.deserialize(data.power);\n    this.heat.deserialize(data.heat);\n    this.log.deserialize(data.log);\n    this.callHandler(\"deserialize\", data);\n\n    return this;\n  }\n\n  serialize() {\n    return {\n      damage: this.damage.serialize(),\n      power: this.power.serialize(),\n      heat: this.heat.serialize(),\n      log: this.log.serialize(),\n      ...this.callHandler(\"serialize\"),\n    };\n  }\n\n  endTurn(turn) {\n    this.log.endTurn(turn);\n  }\n\n  advanceTurn(turn) {\n    this.damage.advanceTurn(turn);\n    this.power.advanceTurn(turn);\n    this.heat.advanceTurn(turn);\n    this.log.advanceTurn(turn);\n    this.callHandler(\"advanceTurn\", turn);\n  }\n\n  isWeapon() {\n    return false;\n  }\n\n  showOnSystemList() {\n    return false;\n  }\n}\n\nexport default ShipSystem;\n","import dice from \"rpg-dice-roller\";\n\nclass ShipSystemStrategy {\n  constructor() {\n    this.system = null;\n    this.diceRoller = new dice.DiceRoller();\n  }\n\n  init(system) {\n    this.system = system;\n  }\n\n  hasHandler(name) {\n    return Boolean(this[name]);\n  }\n\n  callHandler(name, payload = {}, previousResponse) {\n    if (!this.hasHandler(name)) {\n      return previousResponse;\n    }\n    return this[name](payload, previousResponse);\n  }\n}\n\nexport default ShipSystemStrategy;\n","class CargoEntity {\r\n  getSpaceRequired() {\r\n    return 0.1;\r\n  }\r\n\r\n  getCargoInfo() {\r\n    return [];\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default CargoEntity;\r\n","import CargoEntity from \"../../../cargo/CargoEntity.mjs\";\n\nclass Torpedo extends CargoEntity {\n  constructor({ minRange = 100, maxRange = 300, hitSize = 0, evasion = 30 }) {\n    super();\n    this.minRange = minRange;\n    this.maxRange = maxRange;\n    this.hitSize = hitSize;\n    this.evasion = evasion;\n\n    this.damageStrategy = null;\n\n    this.visuals = {\n      engineColor: [51 / 255, 163 / 255, 255 / 255],\n      explosionType: \"HE\",\n      explosionSize: 15\n    };\n  }\n\n  getStrikeDistance(flight, target) {\n    return 1;\n  }\n\n  getHitSize() {\n    return this.hitSize;\n  }\n\n  getEvasion() {\n    return this.evasion;\n  }\n\n  getCargoInfo() {\n    const previousResponse = super.getCargoInfo();\n\n    return [\n      ...previousResponse,\n      { header: \"Range\", value: `${this.minRange} – ${this.maxRange} hexes` },\n      { header: \"Evasion\", value: `+${this.evasion * 10}% range penalty` },\n      ...this.damageStrategy.getMessages()\n    ];\n  }\n}\n\nexport default Torpedo;\n","import Torpedo from \"./Torpedo.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../../gameConfig.mjs\";\r\n\r\nclass Torpedo158 extends Torpedo {\r\n  constructor({\r\n    minRange = MEDIUM_WEAPON_RANGE * 2,\r\n    maxRange = Math.round(MEDIUM_WEAPON_RANGE * 4.5),\r\n    hitSize = 0,\r\n    evasion = 30,\r\n  }) {\r\n    super({\r\n      minRange,\r\n      maxRange,\r\n      hitSize,\r\n      evasion,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Torpedo158;\r\n","class HitSystemRandomizer {\r\n  rollForSystem(totalStructure) {\r\n    return Math.ceil(Math.random() * totalStructure);\r\n  }\r\n\r\n  randomizeHitSystem(systems) {\r\n    if (systems.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const totalStructure = systems.reduce(\r\n      (total, system) => total + this.getSystemHitSize(system),\r\n      0\r\n    );\r\n\r\n    const roll = this.rollForSystem(totalStructure);\r\n\r\n    let tested = 0;\r\n\r\n    return systems.find(system => {\r\n      if (roll > tested && roll <= this.getSystemHitSize(system) + tested) {\r\n        return true;\r\n      }\r\n\r\n      tested += this.getSystemHitSize(system);\r\n      return false;\r\n    });\r\n  }\r\n\r\n  getSystemHitSize(system) {\r\n    return (\r\n      system.hitpoints *\r\n      system.callHandler(\"getHitSystemSizeMultiplier\", null, 1)\r\n    );\r\n  }\r\n}\r\n\r\nexport default HitSystemRandomizer;\r\n","class CombatLogDamageEntry {\r\n  constructor() {\r\n    this.entries = [];\r\n    this.notes = [];\r\n  }\r\n\r\n  addNote(note) {\r\n    this.notes.push(note);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      entries: this.entries,\r\n      notes: this.notes\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.entries = data.entries || [];\r\n    this.notes = data.notes || [];\r\n    return this;\r\n  }\r\n\r\n  add(system, damage) {\r\n    this.entries.push({\r\n      systemId: system.id,\r\n      damageIds: [].concat(damage).map(d => d.id)\r\n    });\r\n  }\r\n\r\n  getDamages(target) {\r\n    return this.entries.reduce((total, { systemId, damageIds }) => {\r\n      const system = target.systems.getSystemById(systemId);\r\n\r\n      return total.concat(\r\n        damageIds.map(damageId => system.damage.getDamageById(damageId))\r\n      );\r\n    }, []);\r\n  }\r\n}\r\n\r\nexport default CombatLogDamageEntry;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\nimport HitSystemRandomizer from \"./utils/HitSystemRandomizer.mjs\";\r\nimport DamageEntry from \"../../DamageEntry.mjs\";\r\nimport CombatLogDamageEntry from \"../../../../combatLog/CombatLogDamageEntry.mjs\";\r\n\r\nclass StandardDamageStrategy extends ShipSystemStrategy {\r\n  constructor(damageFormula = 0, armorPiercingFormula = 0) {\r\n    super();\r\n\r\n    this.damageFormula = damageFormula;\r\n    this.armorPiercingFormula = armorPiercingFormula;\r\n    this.hitSystemRandomizer = new HitSystemRandomizer();\r\n  }\r\n\r\n  getTotalBurstSize() {\r\n    return 1;\r\n  }\r\n\r\n  _getDamageMessage() {\r\n    let messages = [];\r\n\r\n    if (this.damageFormula) {\r\n      messages.push(this.damageFormula);\r\n    }\r\n\r\n    const ammo = this.system.callHandler(\"getSelectedAmmo\", null, null);\r\n\r\n    if (ammo) {\r\n      messages.push(ammo.damageFormula);\r\n    }\r\n\r\n    return messages.join(\" + ammo: \");\r\n  }\r\n\r\n  _getArmorPiercingMessage() {\r\n    let messages = [];\r\n\r\n    if (this.armorPiercingFormula) {\r\n      messages.push(this.armorPiercingFormula);\r\n    }\r\n\r\n    const ammo = this.system.callHandler(\"getSelectedAmmo\", null, null);\r\n\r\n    if (ammo) {\r\n      messages.push(ammo.armorPiercingFormula);\r\n    }\r\n\r\n    return messages.join(\" + ammo: \");\r\n  }\r\n\r\n  _getDamageTypeMessage() {\r\n    return \"Standard\";\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Damage type\",\r\n      value: this._getDamageTypeMessage(),\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Damage\",\r\n      value: this._getDamageMessage(),\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Armor piercing\",\r\n      value: this._getArmorPiercingMessage(),\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  applyDamageFromWeaponFire(payload) {\r\n    const { fireOrder, combatLogEntry, hitResolution } = payload;\r\n\r\n    const hit = hitResolution.result;\r\n\r\n    const result = new CombatLogDamageEntry();\r\n    combatLogEntry.addDamage(result);\r\n\r\n    if (hit) {\r\n      combatLogEntry.setShots(1, 1);\r\n      this._doDamage(\r\n        { shooterPosition: payload.shooter.getPosition(), ...payload },\r\n        result\r\n      );\r\n    } else {\r\n      combatLogEntry.setShots(0, 1);\r\n    }\r\n  }\r\n\r\n  _doDamage(\r\n    payload,\r\n    damageResult,\r\n    lastSection,\r\n    armorPiercing = undefined,\r\n    damage = undefined\r\n  ) {\r\n    const { target, shooterPosition } = payload;\r\n\r\n    if (armorPiercing === undefined) {\r\n      armorPiercing = this._getArmorPiercing(payload);\r\n    }\r\n\r\n    if (damage === undefined) {\r\n      damage = this._getDamageForWeaponHit(payload);\r\n    }\r\n\r\n    const hitSystem = this._chooseHitSystem({\r\n      target,\r\n      shooterPosition,\r\n      lastSection,\r\n    });\r\n\r\n    if (!hitSystem) {\r\n      damageResult.addNote(\"Unable to find system to hit\");\r\n      return;\r\n    }\r\n\r\n    let result = this._doDamageToSystem(\r\n      payload,\r\n      damageResult,\r\n      hitSystem,\r\n      armorPiercing,\r\n      damage\r\n    );\r\n\r\n    armorPiercing = result.armorPiercing;\r\n    damage = result.damage;\r\n\r\n    if (damage === 0) {\r\n      return damageResult;\r\n    }\r\n\r\n    let overkillSystem = this._findOverkillStructure(hitSystem, target);\r\n\r\n    if (!overkillSystem) {\r\n      return this._doDamage(\r\n        payload,\r\n        damageResult,\r\n        target.systems.sections.getSectionBySystem(hitSystem),\r\n        armorPiercing,\r\n        damage\r\n      );\r\n    }\r\n\r\n    result = this._doDamageToSystem(\r\n      payload,\r\n      damageResult,\r\n      overkillSystem,\r\n      armorPiercing,\r\n      damage\r\n    );\r\n\r\n    armorPiercing = result.armorPiercing;\r\n    damage = result.damage;\r\n\r\n    if (damage === 0) {\r\n      return;\r\n    }\r\n\r\n    return this._doDamage(\r\n      payload,\r\n      damageResult,\r\n      target.systems.sections.getSectionBySystem(overkillSystem),\r\n      armorPiercing,\r\n      damage\r\n    );\r\n  }\r\n\r\n  _findOverkillStructure(system, ship) {\r\n    const section = ship.systems.sections.getSectionBySystem(system);\r\n    const structure = section.getStructure();\r\n\r\n    if (!structure || structure.id === system.id || structure.isDestroyed()) {\r\n      return null;\r\n    }\r\n\r\n    return structure;\r\n  }\r\n\r\n  _doDamageToSystem({}, damageResult, hitSystem, armorPiercing, damage) {\r\n    let armor = hitSystem.getArmor();\r\n    let finalArmor = armor - armorPiercing;\r\n    if (finalArmor < 0) {\r\n      finalArmor = 0;\r\n    }\r\n\r\n    damage -= finalArmor;\r\n\r\n    let armorPiercingLeft = armorPiercing - armor;\r\n    if (armorPiercingLeft < 0) {\r\n      armorPiercingLeft = 0;\r\n    }\r\n\r\n    if (damage < 0) {\r\n      damage = 0;\r\n    }\r\n\r\n    let entry = null;\r\n\r\n    if (damage > hitSystem.getRemainingHitpoints()) {\r\n      if (hitSystem.getRemainingHitpoints() <= 0) {\r\n        throw new Error(\"Trying to damage destroyed system\");\r\n      }\r\n\r\n      entry = new DamageEntry(hitSystem.getRemainingHitpoints(), finalArmor);\r\n      damage -= hitSystem.getRemainingHitpoints();\r\n    } else {\r\n      entry = new DamageEntry(damage, finalArmor);\r\n\r\n      damage = 0;\r\n    }\r\n\r\n    hitSystem.addDamage(entry);\r\n    damageResult.add(hitSystem, entry);\r\n\r\n    return {\r\n      armorPiercing: armorPiercingLeft,\r\n      damage,\r\n    };\r\n  }\r\n\r\n  _chooseHitSystem({ target, shooterPosition, lastSection }) {\r\n    return this.hitSystemRandomizer.randomizeHitSystem(\r\n      target.systems.getSystemsForHit(shooterPosition, lastSection)\r\n    );\r\n  }\r\n\r\n  _getDamageForWeaponHit({ requiredToHit, rolledToHit }) {\r\n    let damage = 0;\r\n    if (Number.isInteger(this.damageFormula)) {\r\n      damage = this.damageFormula;\r\n    } else if (this.damageFormula !== null) {\r\n      damage = this.diceRoller.roll(this.damageFormula).total;\r\n    }\r\n\r\n    if (!this.system) {\r\n      return damage;\r\n    }\r\n\r\n    const ammo = this.system.callHandler(\"getSelectedAmmo\", null, null);\r\n\r\n    if (!ammo) {\r\n      return damage;\r\n    }\r\n\r\n    return damage + ammo.getDamage(this.diceRoller);\r\n  }\r\n\r\n  _getArmorPiercing() {\r\n    let armorPiercing = 0;\r\n    if (Number.isInteger(this.armorPiercingFormula)) {\r\n      armorPiercing = this.armorPiercingFormula;\r\n    } else if (this.armorPiercingFormula !== null) {\r\n      armorPiercing = this.diceRoller.roll(this.armorPiercingFormula).total;\r\n    }\r\n\r\n    if (!this.system) {\r\n      return armorPiercing;\r\n    }\r\n\r\n    const ammo = this.system.callHandler(\"getSelectedAmmo\", null, null);\r\n\r\n    if (!ammo) {\r\n      return armorPiercing;\r\n    }\r\n\r\n    return armorPiercing + ammo.getArmorPiercing(this.diceRoller);\r\n  }\r\n}\r\n\r\nexport default StandardDamageStrategy;\r\n","import StandardDamageStrategy from \"../../../../strategy/weapon/StandardDamageStrategy.mjs\";\nimport CombatLogDamageEntry from \"../../../../../../combatLog/CombatLogDamageEntry.mjs\";\n\nclass MSVTorpedoDamageStrategy extends StandardDamageStrategy {\n  constructor(\n    damageFormula,\n    armorPiercingFormula,\n    rangePenalty,\n    numberOfShots,\n    strikeHitChance = 20,\n    minStrikeDistance = 1\n  ) {\n    super(damageFormula, armorPiercingFormula);\n    this.rangePenalty = rangePenalty;\n    this.numberOfShots = numberOfShots;\n    this.strikeHitChance = strikeHitChance;\n    this.minStrikeDistance = minStrikeDistance;\n    this.msv = true;\n  }\n\n  getAttackRunMessages(payload, previousResponse = []) {\n    return [\n      {\n        header: \"Strike distance\",\n        value: this.getStrikeDistance(payload),\n      },\n    ];\n  }\n\n  getMessages(payload, previousResponse = []) {\n    previousResponse.push({\n      header: \"Number of SVs\",\n      value: this.numberOfShots,\n    });\n\n    previousResponse.push({\n      header: \"Damage per SV\",\n      value: this.damageFormula,\n    });\n\n    previousResponse.push({\n      header: \"Armor piercing per SV\",\n      value: this.armorPiercingFormula,\n    });\n\n    previousResponse.push({\n      header: \"SV range penalty\",\n      value: this.rangePenalty,\n    });\n\n    previousResponse.push({\n      header: \"Target hit chance\",\n      value: `${this.strikeHitChance}%`,\n    });\n\n    return previousResponse;\n  }\n\n  _getDamageForWeaponHit({ torpedoFlight }) {\n    if (Number.isInteger(this.damageFormula)) {\n      return Math.ceil(this.damageFormula);\n    }\n    return Math.ceil(this.diceRoller.roll(this.damageFormula).total);\n  }\n\n  _getArmorPiercing({ torpedoFlight }) {\n    if (Number.isInteger(this.armorPiercingFormula)) {\n      return Math.round(this.armorPiercingFormula);\n    }\n\n    return Math.round(this.diceRoller.roll(this.armorPiercingFormula).total);\n  }\n\n  getHitChance({ target, torpedoFlight, distance }) {\n    const hitProfile = target.getHitProfile(torpedoFlight.strikePosition);\n    const rangeModifier =\n      this.rangePenalty * (1 + target.movement.getEvasion() / 10) * distance;\n\n    return hitProfile - rangeModifier;\n  }\n\n  getStrikeDistance(payload) {\n    let distance = 11;\n\n    while (distance--) {\n      if (distance === this.minStrikeDistance) {\n        return distance;\n      }\n\n      if (this.getHitChance({ ...payload, distance }) >= this.strikeHitChance) {\n        return distance;\n      }\n    }\n\n    return 1;\n  }\n\n  applyDamageFromWeaponFire(payload) {\n    const { torpedoFlight, combatLogEvent } = payload;\n    const attackPosition = torpedoFlight.strikePosition;\n\n    let shots = this.numberOfShots;\n\n    const distance = this.getStrikeDistance(payload);\n    const hitChance = this.getHitChance({ ...payload, distance });\n\n    combatLogEvent.addNote(\n      `MSV with ${this.numberOfShots} projectiles at distance ${distance} with hit chance of ${hitChance}% each.`\n    );\n\n    let hits = 0;\n\n    while (shots--) {\n      const roll = Math.ceil(Math.random() * 100);\n      const hit = roll <= hitChance;\n\n      if (hit) {\n        hits++;\n        const result = new CombatLogDamageEntry();\n        combatLogEvent.addDamage(result);\n        this._doDamage({ shooterPosition: attackPosition, ...payload }, result);\n      }\n    }\n\n    combatLogEvent.addNote(`${hits} MSVs hit target.`);\n  }\n}\n\nexport default MSVTorpedoDamageStrategy;\n","import Torpedo158 from \"./Torpedo158.mjs\";\nimport MSVTorpedoDamageStrategy from \"./torpedoDamageStrategy/MSVTorpedoDamageStrategy.mjs\";\n\nclass Torpedo158MSV extends Torpedo158 {\n  constructor() {\n    super({});\n\n    this.damageStrategy = new MSVTorpedoDamageStrategy(\"d3+3\", 0, 15, 32);\n\n    this.visuals = {\n      engineColor: [255 / 255, 222 / 255, 120 / 255],\n      explosionType: \"MSV\"\n    };\n  }\n\n  getStrikeDistance(flight, target) {\n    return this.damageStrategy.getStrikeDistance({\n      target,\n      torpedoFlight: flight\n    });\n  }\n\n  getCargoInfo() {\n    const previousResponse = super.getCargoInfo();\n\n    return [\n      {\n        value: \"A long range torpedo with Multiple Strike Vehicles.\"\n      },\n      ...previousResponse\n    ];\n  }\n\n  getDisplayName() {\n    return \"Shrike 1.53m MSV torpedo\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/torpedoMSV.png\";\n  }\n}\n\nexport default Torpedo158MSV;\n","import Torpedo158 from \"./Torpedo158.mjs\";\r\nimport MSVTorpedoDamageStrategy from \"./torpedoDamageStrategy/MSVTorpedoDamageStrategy.mjs\";\r\n\r\nclass Torpedo158MSV2 extends Torpedo158 {\r\n  constructor() {\r\n    super({ evasion: 35 });\r\n\r\n    this.damageStrategy = new MSVTorpedoDamageStrategy(\"d3\", 0, 5, 84, 10);\r\n\r\n    this.visuals = {\r\n      engineColor: [255 / 255, 222 / 255, 120 / 255],\r\n      explosionType: \"MSV\"\r\n    };\r\n  }\r\n\r\n  getStrikeDistance(flight, target) {\r\n    return this.damageStrategy.getStrikeDistance({\r\n      target,\r\n      torpedoFlight: flight\r\n    });\r\n  }\r\n\r\n  getCargoInfo() {\r\n    const previousResponse = super.getCargoInfo();\r\n\r\n    return [\r\n      {\r\n        value:\r\n          \"A long range torpedo with Multiple Strike Vehicles. Designed to supress smaller targets.\"\r\n      },\r\n      ...previousResponse\r\n    ];\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Shrike B 1.53m saturation MSV torpedo\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/torpedoMSV2.png\";\r\n  }\r\n}\r\n\r\nexport default Torpedo158MSV2;\r\n","import StandardDamageStrategy from \"./StandardDamageStrategy.mjs\";\r\n\r\nclass ExplosiveDamageStrategy extends StandardDamageStrategy {\r\n  constructor(damageFormula, armorPiercingFormula, numberOfDamagesFormula = 1) {\r\n    super(damageFormula, armorPiercingFormula);\r\n\r\n    this.numberOfDamagesFormula = numberOfDamagesFormula;\r\n  }\r\n\r\n  _getDamageTypeMessage() {\r\n    return \"Explosive\";\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Damage type\",\r\n      value: this._getDamageTypeMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Number of hits\",\r\n      value: this.numberOfDamagesFormula\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Damage per hit\",\r\n      value: this._getDamageMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Armor piercing per hit\",\r\n      value: this._getArmorPiercingMessage()\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  _getNumberOfDamagesForWeaponHit() {\r\n    if (Number.isInteger(this.numberOfDamagesFormula)) {\r\n      return this.numberOfDamagesFormula;\r\n    }\r\n    return this.diceRoller.roll(this.numberOfDamagesFormula).total;\r\n  }\r\n\r\n  _doDamage(payload, damageResult) {\r\n    const { target, shooterPosition } = payload;\r\n\r\n    let numberOfDamages = this._getNumberOfDamagesForWeaponHit();\r\n\r\n    while (numberOfDamages--) {\r\n      const hitSystem = this._chooseHitSystem({\r\n        target,\r\n        shooterPosition\r\n      });\r\n\r\n      if (!hitSystem) {\r\n        return;\r\n      }\r\n\r\n      this._doDamageToSystem(\r\n        payload,\r\n        damageResult,\r\n        hitSystem,\r\n        this._getArmorPiercing(),\r\n        this._getDamageForWeaponHit(payload)\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ExplosiveDamageStrategy;\r\n","import CombatLogDamageEntry from \"../../../../../../combatLog/CombatLogDamageEntry.mjs\";\nimport ExplosiveDamageStrategy from \"../../../../strategy/weapon/ExplosiveDamageStrategy.mjs\";\n\nclass HETorpedoDamageStrategy extends ExplosiveDamageStrategy {\n  constructor(damageFormula, armorPiercingFormula, numberOfHitsFormula) {\n    super(damageFormula, armorPiercingFormula, numberOfHitsFormula);\n  }\n\n  getAttackRunMessages(payload, previousResponse = []) {\n    return [\n      {\n        header: \"Strike distance\",\n        value: this.getStrikeDistance(payload)\n      }\n    ];\n  }\n  _getDamageMessage() {\n    return this.damageFormula;\n  }\n\n  _getArmorPiercingMessage() {\n    return this.armorPiercingFormula;\n  }\n\n  getStrikeDistance() {\n    return 1;\n  }\n\n  applyDamageFromWeaponFire(payload) {\n    const { torpedoFlight, combatLogEvent } = payload;\n    const attackPosition = torpedoFlight.launchPosition;\n\n    const result = new CombatLogDamageEntry();\n    combatLogEvent.addDamage(result);\n    this._doDamage({ shooterPosition: attackPosition, ...payload }, result);\n  }\n}\n\nexport default HETorpedoDamageStrategy;\n","import Torpedo158 from \"./Torpedo158.mjs\";\r\nimport HETorpedoDamageStrategy from \"./torpedoDamageStrategy/HETorpedoDamageStrategy.mjs\";\r\n\r\nclass Torpedo158Nuclear extends Torpedo158 {\r\n  constructor(args) {\r\n    super({ evasion: 20 });\r\n\r\n    this.damageStrategy = new HETorpedoDamageStrategy(\"d10+4\", 0, \"d20+60\");\r\n  }\r\n\r\n  getCargoInfo() {\r\n    const previousResponse = super.getCargoInfo();\r\n\r\n    return [\r\n      {\r\n        value: \"A long range torpedo with a nuclear payload.\",\r\n      },\r\n      ...previousResponse,\r\n    ];\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Bodkin 1.53m nuclear torpedo\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/torpedoNuclear.png\";\r\n  }\r\n}\r\n\r\nexport default Torpedo158Nuclear;\r\n","import Torpedo from \"./Torpedo.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../../gameConfig.mjs\";\r\n\r\nclass Torpedo72 extends Torpedo {\r\n  constructor({\r\n    minRange = MEDIUM_WEAPON_RANGE * 2,\r\n    maxRange = Math.round(MEDIUM_WEAPON_RANGE * 3.5),\r\n    hitSize = 0,\r\n    evasion = 50,\r\n  }) {\r\n    super({\r\n      minRange,\r\n      maxRange,\r\n      hitSize,\r\n      evasion,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Torpedo72;\r\n","import MSVTorpedoDamageStrategy from \"./torpedoDamageStrategy/MSVTorpedoDamageStrategy.mjs\";\nimport Torpedo72 from \"./Torpedo72.mjs\";\n\nclass Torpedo72MSV extends Torpedo72 {\n  constructor() {\n    super({});\n\n    this.damageStrategy = new MSVTorpedoDamageStrategy(\"d3+3\", 0, 15, 25);\n    this.visuals = {\n      engineColor: [255 / 255, 222 / 255, 120 / 255],\n      explosionType: \"MSV\"\n    };\n  }\n\n  getStrikeDistance(flight, target) {\n    return this.damageStrategy.getStrikeDistance({\n      target,\n      torpedoFlight: flight\n    });\n  }\n\n  getCargoInfo() {\n    const previousResponse = super.getCargoInfo();\n\n    return [\n      {\n        value: \"A medium range torpedo with Multiple Strike Vehicles.\"\n      },\n      ...previousResponse\n    ];\n  }\n\n  getDisplayName() {\n    return \"Avalanche 0.72m MSV torpedo\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/torpedoMSVsmall.png\";\n  }\n}\n\nexport default Torpedo72MSV;\n","import Torpedo72 from \"./Torpedo72.mjs\";\nimport HETorpedoDamageStrategy from \"./torpedoDamageStrategy/HETorpedoDamageStrategy.mjs\";\n\nclass Torpedo72HE extends Torpedo72 {\n  constructor() {\n    super({});\n\n    this.damageStrategy = new HETorpedoDamageStrategy(\"d8+4\", 0, \"d3+3\");\n  }\n\n  getCargoInfo() {\n    const previousResponse = super.getCargoInfo();\n\n    return [\n      {\n        value: \"A medium range torpedo with high explosive warhead.\"\n      },\n      ...previousResponse\n    ];\n  }\n\n  getDisplayName() {\n    return \"Pike 0.72m HE torpedo\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/torpedoHEsmall.png\";\n  }\n}\n\nexport default Torpedo72HE;\n","import HETorpedoDamageStrategy from \"./torpedoDamageStrategy/HETorpedoDamageStrategy.mjs\";\r\nimport Torpedo158 from \"./Torpedo158.mjs\";\r\n\r\nclass Torpedo158HE extends Torpedo158 {\r\n  constructor() {\r\n    super({});\r\n\r\n    this.damageStrategy = new HETorpedoDamageStrategy(\"d10+4\", 0, \"d8+6\");\r\n  }\r\n\r\n  getCargoInfo() {\r\n    const previousResponse = super.getCargoInfo();\r\n\r\n    return [\r\n      {\r\n        value: \"A long range torpedo with high explosive warhead.\"\r\n      },\r\n      ...previousResponse\r\n    ];\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Meteor 1.53m HE torpedo\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/torpedoHE.png\";\r\n  }\r\n}\r\n\r\nexport default Torpedo158HE;\r\n","import CargoEntity from \"../../cargo/CargoEntity.mjs\";\r\n\r\nclass Ammo extends CargoEntity {\r\n  constructor(damageFormula, armorPiercingFormula) {\r\n    super();\r\n    this.damageFormula = damageFormula;\r\n    this.armorPiercingFormula = armorPiercingFormula;\r\n  }\r\n\r\n  getDamage(diceRoller) {\r\n    if (Number.isInteger(this.damageFormula)) {\r\n      return this.armorPiercingFormula;\r\n    }\r\n\r\n    return diceRoller.roll(this.damageFormula).total;\r\n  }\r\n\r\n  getArmorPiercing(diceRoller) {\r\n    if (Number.isInteger(this.armorPiercingFormula)) {\r\n      return this.armorPiercingFormula;\r\n    }\r\n\r\n    return diceRoller.roll(this.armorPiercingFormula).total;\r\n  }\r\n\r\n  getCargoInfo() {\r\n    const previousResponse = super.getCargoInfo();\r\n\r\n    return [\r\n      {\r\n        header: \"Damage\",\r\n        value: this.damageFormula\r\n      },\r\n      {\r\n        header: \"Armor piercing\",\r\n        value: this.armorPiercingFormula\r\n      },\r\n      ...previousResponse\r\n    ];\r\n  }\r\n\r\n  getIconText() {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default Ammo;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo30mm extends Ammo {\r\n  constructor() {\r\n    super(\"d2\", \"d3+2\");\r\n  }\r\n\r\n  getSpaceRequired() {\r\n    return 0.01;\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"30mm PDC shell\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"30mm\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/30mm.png\";\r\n  }\r\n}\r\n\r\nexport default Ammo30mm;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo85mmHE extends Ammo {\r\n  constructor() {\r\n    super(\"2d4+2\", 0);\r\n  }\r\n\r\n  getSpaceRequired() {\r\n    return 0.02;\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"85mm high explosive shell\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"85mm HE\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/85mmHE.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"HE\";\r\n  }\r\n}\r\n\r\nexport default Ammo85mmHE;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo85mmAP extends Ammo {\r\n  constructor() {\r\n    super(\"d3\", \"2d3+2\");\r\n  }\r\n\r\n  getSpaceRequired() {\r\n    return 0.02;\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"85mm armor piercing shell\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"85mm AP\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/85mmAP.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"AP\";\r\n  }\r\n}\r\n\r\nexport default Ammo85mmAP;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo140mmAP extends Ammo {\r\n  constructor() {\r\n    super(\"2d3+6\", 12);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"140mm armor piercing railgun projectile\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"140mm AP\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/140mmAP.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"AP\";\r\n  }\r\n}\r\n\r\nexport default Ammo140mmAP;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo140mmHE extends Ammo {\r\n  constructor() {\r\n    super(\"2d5 + 10\", 0);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"140mm high explosive railgun projectile\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"140mm HE\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/140mmHE.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"HE\";\r\n  }\r\n}\r\n\r\nexport default Ammo140mmHE;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo120mmAP extends Ammo {\r\n  constructor() {\r\n    super(\"2d3+5\", 10);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"120mm armor piercing railgun projectile\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"120mm AP\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/120mmAP.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"AP\";\r\n  }\r\n}\r\n\r\nexport default Ammo120mmAP;\r\n","import Ammo from \"../Ammo.mjs\";\r\n\r\nclass Ammo120mmHE extends Ammo {\r\n  constructor() {\r\n    super(\"2d4 + 10\", 0);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"120mm high explosive railgun projectile\";\r\n  }\r\n\r\n  getShortDisplayName() {\r\n    return \"120mm HE\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/ammo/120mmHE.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"HE\";\r\n  }\r\n}\r\n\r\nexport default Ammo120mmHE;\r\n","import CargoEntity from \"../../cargo/CargoEntity.mjs\";\r\n\r\nclass NoAmmunitionLoaded extends CargoEntity {\r\n  getDisplayName() {\r\n    return \"NO AMMUNITION LOADED\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/noAmmo.png\";\r\n  }\r\n}\r\n\r\nexport default NoAmmunitionLoaded;\r\n","import * as torpedoes from \"./torpedo/index.mjs\";\r\nimport * as conventional from \"./conventional/index.mjs\";\r\nimport NoAmmunitionLoaded from \"./NoAmmunitionLoaded.mjs\";\r\n\r\nexport const ammunition = {\r\n  ...torpedoes,\r\n  ...conventional,\r\n  NoAmmunitionLoaded\r\n};\r\n","import { ammunition } from \"../weapon/ammunition/index.mjs\";\r\n\r\nexport const cargoClasses = { ...ammunition };\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\nimport { cargoClasses } from \"../cargo/cargo.mjs\";\r\n\r\nclass CargoBaySystemStrategy extends ShipSystemStrategy {\r\n  constructor(space) {\r\n    super();\r\n    this.space = space;\r\n    this.cargo = [];\r\n  }\r\n\r\n  getUiComponents(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        name: \"CargoList\",\r\n        props: {\r\n          list: this.cargo.map(cargo => ({\r\n            object: cargo.object,\r\n            amount: cargo.amount\r\n          }))\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      cargoBaySystemStrategy: this.cargo.map(cargo => ({\r\n        className: cargo.object.constructor.name,\r\n        amount: cargo.amount\r\n      }))\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.cargo = data.cargoBaySystemStrategy\r\n      ? data.cargoBaySystemStrategy.map(data => ({\r\n          object: new cargoClasses[data.className](),\r\n          amount: data.amount\r\n        }))\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  getTotalCargoSpace() {\r\n    return this.space;\r\n  }\r\n\r\n  getAvailableCargoSpace() {\r\n    return this.space - this.getCargoSpaceUsed();\r\n  }\r\n\r\n  getCargoSpaceUsed() {\r\n    return this.cargo.reduce(\r\n      (total, { object, amount }) => total + object.getSpaceRequired() * amount,\r\n      0\r\n    );\r\n  }\r\n\r\n  hasSpaceFor({ object, amount }) {\r\n    return this.getAvailableCargoSpace() >= object.getSpaceRequired() * amount;\r\n  }\r\n\r\n  getCargoEntry(object) {\r\n    return this.cargo.find(\r\n      stored => stored.object.constructor === object.constructor\r\n    );\r\n  }\r\n\r\n  getCargoByParentClass(parentClass) {\r\n    return this.cargo.filter(cargo => cargo.object instanceof parentClass);\r\n  }\r\n\r\n  hasCargo({ object, amount = 1 }) {\r\n    const entry = this.getCargoEntry(object);\r\n\r\n    if (!entry) {\r\n      return false;\r\n    }\r\n\r\n    return entry.amount >= amount;\r\n  }\r\n\r\n  removeCargo({ object, amount = 1 }) {\r\n    const entry = this.getCargoEntry(object);\r\n\r\n    if (!entry || entry.amount < amount) {\r\n      throw new Error(\"Check hasCargo first!\");\r\n    }\r\n\r\n    entry.amount -= amount;\r\n\r\n    this.cargo = this.cargo.filter(entry => entry.amount > 0);\r\n  }\r\n\r\n  addCargo({ object, amount = 1 }) {\r\n    if (!this.hasSpaceFor({ object, amount })) {\r\n      throw new Error(\"No space in cargo bay\");\r\n    }\r\n\r\n    let entry = this.getCargoEntry(object);\r\n\r\n    if (entry) {\r\n      entry.amount += amount;\r\n    } else {\r\n      entry = {\r\n        object: new cargoClasses[object.constructor.name](),\r\n        amount\r\n      };\r\n\r\n      this.cargo.push(entry);\r\n    }\r\n  }\r\n}\r\n\r\nexport default CargoBaySystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass StoreHeatStrategy extends ShipSystemStrategy {\r\n  constructor(heatCapacity) {\r\n    super();\r\n    this.heatCapacity = heatCapacity;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      ...[\r\n        {\r\n          header: \"Stores heat without overheating\",\r\n          value: `${this.heatCapacity}`,\r\n        },\r\n        {\r\n          header: \"Heat stored\",\r\n          value: Math.round(this.system.heat.getHeat()),\r\n        },\r\n      ],\r\n    ];\r\n  }\r\n\r\n  canStoreHeat() {\r\n    if (this.system.isDisabled()) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  getHeatStoreAmount(payload, previousResponse) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + this.heatCapacity;\r\n  }\r\n}\r\n\r\nexport default StoreHeatStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass RadiateHeatStrategy extends ShipSystemStrategy {\r\n  constructor(radiationCapacity) {\r\n    super();\r\n    this.radiationCapacity = radiationCapacity;\r\n\r\n    this.heatRadiated = 0;\r\n  }\r\n\r\n  isRadiator() {\r\n    return true;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Radiates heat\",\r\n      value: `${this.getHeatRadiationCapacity()}`,\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getRadiatedHeat(payload, previousResponse = 0) {\r\n    return this.heatRadiated + previousResponse;\r\n  }\r\n\r\n  getHeatRadiationCapacity(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    const undamaged = this.system.damage.getPercentUnDamaged();\r\n    let capacity =\r\n      Math.floor(this.radiationCapacity * undamaged) - this.heatRadiated;\r\n\r\n    if (capacity < 0) {\r\n      capacity = 0;\r\n    }\r\n\r\n    return previousResponse + capacity;\r\n  }\r\n\r\n  radiateHeat(heat, previousResponse = 0) {\r\n    let heatLeft = heat - previousResponse;\r\n    if (heatLeft <= 0) {\r\n      return previousResponse;\r\n    }\r\n\r\n    const capacity = this.getHeatRadiationCapacity();\r\n    if (capacity < heatLeft) {\r\n      heatLeft = capacity;\r\n    }\r\n\r\n    this.heatRadiated += heatLeft;\r\n\r\n    return previousResponse + heatLeft;\r\n  }\r\n}\r\n\r\nexport default RadiateHeatStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass FuelTankSystemStrategy extends ShipSystemStrategy {\r\n  constructor(space) {\r\n    super();\r\n    this.space = space;\r\n    this.fuel = 0;\r\n  }\r\n\r\n  getFuel() {\r\n    return this.fuel;\r\n  }\r\n\r\n  getFuelSpace() {\r\n    return this.space;\r\n  }\r\n\r\n  setMaxFuel() {\r\n    this.fuel = this.space;\r\n  }\r\n\r\n  setFuel(fuel) {\r\n    if (fuel > this.space) {\r\n      throw new Error(\"No space for fuel\");\r\n    }\r\n    this.fuel = fuel;\r\n  }\r\n\r\n  takeFuel(amount) {\r\n    if (amount > this.fuel) {\r\n      throw new Error(\"Trying to take more fuel than exists\");\r\n    }\r\n\r\n    this.fuel -= amount;\r\n  }\r\n\r\n  addFuel(amount) {\r\n    if (this.fuel + amount > this.space) {\r\n      throw new Error(\"No space for fuel\");\r\n    }\r\n    this.fuel += amount;\r\n  }\r\n\r\n  getUiComponents(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        name: \"SystemFuelBar\",\r\n        props: {\r\n          space: this.space,\r\n          fuel: this.fuel,\r\n        },\r\n      },\r\n    ];\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      fuelTankSystemStrategy: {\r\n        fuel: this.fuel,\r\n      },\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.fuel = data.fuelTankSystemStrategy\r\n      ? data.fuelTankSystemStrategy.fuel\r\n      : 0;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default FuelTankSystemStrategy;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport CargoBaySystemStrategy from \"../strategy/CargoBaySystemStrategy.mjs\";\r\nimport StoreHeatStrategy from \"../strategy/StoreHeatStrategy.mjs\";\r\nimport RadiateHeatStrategy from \"../strategy/RadiateHeatStrategy.mjs\";\r\nimport FuelTankSystemStrategy from \"../strategy/FuelTankSystemStrategy.mjs\";\r\n\r\nclass Structure extends ShipSystem {\r\n  constructor({\r\n    cargoSpace = 0,\r\n    heatStorage = 0,\r\n    radiator = 0,\r\n    fuel = 0,\r\n    ...args\r\n  }) {\r\n    super(args);\r\n\r\n    if (cargoSpace) {\r\n      this.addStrategy(new CargoBaySystemStrategy(cargoSpace));\r\n    }\r\n\r\n    if (heatStorage) {\r\n      this.addStrategy(new StoreHeatStrategy(heatStorage));\r\n    }\r\n\r\n    if (radiator) {\r\n      this.addStrategy(new RadiateHeatStrategy(radiator));\r\n    }\r\n\r\n    if (fuel) {\r\n      this.addStrategy(new FuelTankSystemStrategy(fuel));\r\n    }\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Structure\";\r\n  }\r\n}\r\n\r\nexport default Structure;\r\n","export const SYSTEM_LOCATION_PRIMARY = 0;\r\nexport const SYSTEM_LOCATION_FRONT = 1;\r\nexport const SYSTEM_LOCATION_AFT = 2;\r\nexport const SYSTEM_LOCATION_PORT_FRONT = 31;\r\nexport const SYSTEM_LOCATION_PORT_AFT = 32;\r\nexport const SYSTEM_LOCATION_STARBOARD_FRONT = 41;\r\nexport const SYSTEM_LOCATION_STARBOARD_AFT = 42;\r\n","import Structure from \"../structure/Structure.mjs\";\r\nimport hexagon from \"../../../hexagon/index.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass SystemSection {\r\n  constructor(location) {\r\n    this.location = location;\r\n    this.systems = [];\r\n  }\r\n\r\n  getOffsetHex() {\r\n    switch (this.location) {\r\n      case systemLocation.SYSTEM_LOCATION_PRIMARY:\r\n        return new hexagon.Offset(0, 0);\r\n      case systemLocation.SYSTEM_LOCATION_FRONT:\r\n        return new hexagon.Offset(1, 0);\r\n      case systemLocation.SYSTEM_LOCATION_AFT:\r\n        return new hexagon.Offset(-1, 0);\r\n      case systemLocation.SYSTEM_LOCATION_PORT_FRONT:\r\n        return new hexagon.Offset(1, 1);\r\n      case systemLocation.SYSTEM_LOCATION_PORT_AFT:\r\n        return new hexagon.Offset(0, 1);\r\n      case systemLocation.SYSTEM_LOCATION_STARBOARD_FRONT:\r\n        return new hexagon.Offset(1, -1);\r\n      case systemLocation.SYSTEM_LOCATION_STARBOARD_AFT:\r\n        return new hexagon.Offset(0, -1);\r\n    }\r\n  }\r\n\r\n  hasUndestroyedStructure() {\r\n    return this.systems.some(\r\n      system => system instanceof Structure && !system.isDisabled()\r\n    );\r\n  }\r\n\r\n  addSystem(system) {\r\n    this.systems.push(system);\r\n    return this;\r\n  }\r\n\r\n  getSystems() {\r\n    return this.systems;\r\n  }\r\n\r\n  isLocation(location) {\r\n    return this.location === location;\r\n  }\r\n\r\n  hasSystems() {\r\n    return this.systems.length > 0;\r\n  }\r\n\r\n  getStructure() {\r\n    return this.systems.find(system => system instanceof Structure);\r\n  }\r\n\r\n  getNonStructureSystems() {\r\n    return this.systems.filter(system => !(system instanceof Structure));\r\n  }\r\n}\r\n\r\nexport default SystemSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass PrimarySection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_PRIMARY);\r\n  }\r\n}\r\n\r\nexport default PrimarySection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass AftSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_AFT);\r\n  }\r\n}\r\n\r\nexport default AftSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass FrontSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_FRONT);\r\n  }\r\n}\r\n\r\nexport default FrontSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass PortAftSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_PORT_AFT);\r\n  }\r\n}\r\n\r\nexport default PortAftSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass PortFrontSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_PORT_FRONT);\r\n  }\r\n}\r\n\r\nexport default PortFrontSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass StarboardFrontSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_STARBOARD_FRONT);\r\n  }\r\n}\r\n\r\nexport default StarboardFrontSection;\r\n","import SystemSection from \"./SystemSection.mjs\";\r\nimport * as systemLocation from \"./systemLocation.mjs\";\r\n\r\nclass StarboardAftSection extends SystemSection {\r\n  constructor() {\r\n    super(systemLocation.SYSTEM_LOCATION_STARBOARD_AFT);\r\n  }\r\n}\r\n\r\nexport default StarboardAftSection;\r\n","import {\r\n  PrimarySection,\r\n  FrontSection,\r\n  AftSection,\r\n  PortFrontSection,\r\n  PortAftSection,\r\n  StarboardFrontSection,\r\n  StarboardAftSection,\r\n} from \"./systemSection/index.mjs\";\r\nimport { getCompassHeadingOfPoint, addToDirection } from \"../../utils/math.mjs\";\r\n\r\nclass ShipSystemSections {\r\n  constructor(ship) {\r\n    this.ship = ship;\r\n\r\n    this.sections = [\r\n      new PrimarySection(),\r\n      new FrontSection(),\r\n      new AftSection(),\r\n      new PortFrontSection(),\r\n      new PortAftSection(),\r\n      new StarboardFrontSection(),\r\n      new StarboardAftSection(),\r\n    ];\r\n  }\r\n\r\n  getHitSectionHeading(shooterPosition, shipPosition, shipFacing) {\r\n    const heading = addToDirection(\r\n      getCompassHeadingOfPoint(shipPosition, shooterPosition),\r\n      -shipFacing\r\n    );\r\n\r\n    if (this.ship.movement.isRolled()) {\r\n      return addToDirection(0, -heading);\r\n    }\r\n\r\n    return heading;\r\n  }\r\n\r\n  getNextSectionForHit(heading, lastSection) {\r\n    return this.sections.find((section) => {\r\n      const location = section.getOffsetHex();\r\n      const intervening = location.getNeighbourAtHeading(heading);\r\n\r\n      return lastSection.getOffsetHex().equals(intervening);\r\n    });\r\n  }\r\n\r\n  getSectionsThatCanBeHit(heading) {\r\n    return this.sections.filter((section) => {\r\n      const location = section.getOffsetHex();\r\n      const intervening = location.getNeighbourAtHeading(heading);\r\n\r\n      return this.sections.every((blockingSection) => {\r\n        if (!blockingSection.getOffsetHex().equals(intervening)) {\r\n          return true;\r\n        } else if (!blockingSection.hasUndestroyedStructure()) {\r\n          return true;\r\n        } else if (blockingSection === section) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getHitSections(shooterPosition, shipPosition, shipFacing, lastSection) {\r\n    const heading = this.getHitSectionHeading(\r\n      shooterPosition,\r\n      shipPosition,\r\n      shipFacing\r\n    );\r\n\r\n    if (!lastSection) {\r\n      return this.getSectionsThatCanBeHit(heading);\r\n    }\r\n\r\n    let result = [];\r\n\r\n    while (true) {\r\n      const newSection = this.getNextSectionForHit(heading, lastSection);\r\n\r\n      if (!newSection) {\r\n        return result;\r\n      }\r\n\r\n      result = result.concat(newSection);\r\n\r\n      if (newSection.hasUndestroyedStructure()) {\r\n        return result;\r\n      }\r\n\r\n      lastSection = newSection;\r\n    }\r\n  }\r\n\r\n  hasSectionWithStructure(type) {\r\n    return this.getSection(type).getStructure();\r\n  }\r\n\r\n  hasFrontSectionWithStructure() {\r\n    return this.hasSectionWithStructure(FrontSection);\r\n  }\r\n\r\n  hasStarboardFrontSectionWithStructure() {\r\n    return this.hasSectionWithStructure(StarboardFrontSection);\r\n  }\r\n\r\n  hasStarboardAftSectionWithStructure() {\r\n    return this.hasSectionWithStructure(StarboardAftSection);\r\n  }\r\n\r\n  hasPortFrontSectionWithStructure() {\r\n    return this.hasSectionWithStructure(PortFrontSection);\r\n  }\r\n\r\n  hasPortAftSectionWithStructure() {\r\n    return this.hasSectionWithStructure(PortAftSection);\r\n  }\r\n\r\n  hasAftSectionWithStructure() {\r\n    return this.hasSectionWithStructure(AftSection);\r\n  }\r\n\r\n  getPrimarySection() {\r\n    return this.getSection(PrimarySection);\r\n  }\r\n\r\n  getFrontSection() {\r\n    return this.getSection(FrontSection);\r\n  }\r\n\r\n  getAftSection() {\r\n    return this.getSection(AftSection);\r\n  }\r\n\r\n  getStarboardFrontSection() {\r\n    return this.getSection(StarboardFrontSection);\r\n  }\r\n\r\n  getStarboardAftSection() {\r\n    return this.getSection(StarboardAftSection);\r\n  }\r\n\r\n  getPortFrontSection() {\r\n    return this.getSection(PortFrontSection);\r\n  }\r\n\r\n  getPortAftSection() {\r\n    return this.getSection(PortAftSection);\r\n  }\r\n\r\n  getSection(location) {\r\n    return this.sections.find((section) => section instanceof location);\r\n  }\r\n\r\n  getSectionBySystem(system) {\r\n    return this.sections.find((section) =>\r\n      section.systems.find((otherSystem) => system.id === otherSystem.id)\r\n    );\r\n  }\r\n\r\n  getSectionsWithStructure() {\r\n    return this.sections.filter((section) => section.getStructure());\r\n  }\r\n}\r\n\r\nexport default ShipSystemSections;\r\n","import ShipPower from \"./ShipPower.mjs\";\nimport ShipSystemSections from \"./system/ShipSystemSections.mjs\";\nimport { hexFacingToAngle } from \"../utils/math.mjs\";\n\nclass ShipSystems {\n  constructor(ship) {\n    this.ship = ship;\n    this.systems = {};\n    this.systemsAsArray = [];\n\n    this.sections = new ShipSystemSections(ship);\n    this.power = new ShipPower(this);\n  }\n\n  markDestroyedThisTurn() {\n    this.ship.markDestroyedThisTurn();\n  }\n\n  isDestroyed() {\n    const structuresDestroyed = this.sections.sections.reduce(\n      (total, section) => {\n        const structure = section.getStructure();\n\n        if (structure && structure.isDestroyed()) {\n          return total + 1;\n        }\n\n        return total;\n      },\n      0\n    );\n\n    const structures = this.sections.sections.reduce((total, section) => {\n      if (section.getStructure()) {\n        return total + 1;\n      }\n\n      return total;\n    }, 0);\n\n    const primaryStructure = this.sections.getPrimarySection().getStructure();\n\n    return (\n      (!primaryStructure || primaryStructure.isDestroyed()) &&\n      structuresDestroyed > structures / 2\n    );\n  }\n\n  getSectionsForHit(attackPosition, lastSection) {\n    return this.sections.getHitSections(\n      attackPosition,\n      this.ship.getPosition(),\n      hexFacingToAngle(this.ship.getFacing()),\n      lastSection\n    );\n  }\n\n  getSystemsForHit(attackPosition, lastSection) {\n    const systems = this.getSectionsForHit(attackPosition, lastSection).reduce(\n      (all, section) => {\n        return [\n          ...all,\n          ...section.getSystems().filter((system) => !system.isDestroyed()),\n        ];\n      },\n      []\n    );\n\n    return [\n      ...systems,\n      ...this.getSystems().filter((system) =>\n        system.callHandler(\"canBeTargeted\", null, false)\n      ),\n    ];\n  }\n\n  addSystem(system, section) {\n    if (this.getSystemById(system.id)) {\n      throw new Error(\"System with duplicate id! \" + system.id);\n    }\n\n    if (!system.id) {\n      throw new Error(\"System with falsy id!\");\n    }\n\n    this.systems[system.id] = system;\n    this.systemsAsArray.push(system);\n    section.addSystem(system);\n    system.addShipSystemsReference(this);\n\n    return this;\n  }\n\n  addPrimarySystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getPrimarySection())\n    );\n\n    return this;\n  }\n\n  addFrontSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getFrontSection())\n    );\n\n    return this;\n  }\n\n  addAftSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getAftSection())\n    );\n\n    return this;\n  }\n\n  addStarboardFrontSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getStarboardFrontSection())\n    );\n\n    return this;\n  }\n\n  addStarboardAftSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getStarboardAftSection())\n    );\n\n    return this;\n  }\n\n  addPortFrontSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getPortFrontSection())\n    );\n\n    return this;\n  }\n\n  addPortAftSystem(systems) {\n    systems = [].concat(systems);\n    systems.forEach((system) =>\n      this.addSystem(system, this.sections.getPortAftSection())\n    );\n\n    return this;\n  }\n\n  getSystemById(id) {\n    return this.systems[id];\n  }\n\n  getSystems() {\n    return this.systemsAsArray;\n  }\n\n  deserialize(data = []) {\n    data.forEach((systemData) => {\n      const system = this.getSystemById(systemData.systemId);\n      if (system) {\n        system.deserialize(systemData.data);\n      }\n    });\n\n    return this;\n  }\n\n  serialize() {\n    return this.systemsAsArray.map((system) => ({\n      systemId: system.id,\n      data: system.serialize(),\n    }));\n  }\n\n  endTurn(turn) {\n    this.getSystems().forEach((system) => {\n      system.endTurn(turn);\n    });\n  }\n\n  advanceTurn(turn) {\n    this.getSystems().forEach((system) => {\n      system.advanceTurn(turn);\n    });\n\n    this.power.advanceTurn(turn);\n    return this;\n  }\n\n  getRequiredPhasesForReceivingPlayerData() {\n    return this.getSystems()\n      .map((system) =>\n        system.callHandler(\"getRequiredPhasesForReceivingPlayerData\", null, 0)\n      )\n      .sort((a, b) => {\n        if (a > b) {\n          return -1;\n        }\n\n        if (a < b) {\n          return 1;\n        }\n\n        return 0;\n      })[0];\n  }\n\n  receivePlayerData(clientShip, gameData, phase) {\n    this.getSystems().forEach((system) => {\n      if (\n        phase >\n        system.callHandler(\"getRequiredPhasesForReceivingPlayerData\", null, 1)\n      ) {\n        return;\n      }\n\n      system.callHandler(\"receivePlayerData\", {\n        clientShip,\n        clientSystem: clientShip.systems.getSystemById(system.id),\n        gameData,\n        phase,\n      });\n    });\n  }\n\n  censorForUser(user, mine) {\n    this.getSystems().forEach((system) => {\n      system.callHandler(\"censorForUser\", { user, mine });\n    });\n  }\n\n  callAllSystemHandlers(name, payload) {\n    return this.getSystems()\n      .reduce(\n        (total, system) => [\n          ...total,\n          ...[].concat(system.callHandler(name, payload)),\n        ],\n        []\n      )\n      .filter(Boolean);\n  }\n\n  getTotalHeat() {\n    return this.getSystems().reduce(\n      (total, system) => total + system.heat.getHeat(),\n      0\n    );\n  }\n\n  getTotalHeatStorage() {\n    return this.getSystems().reduce(\n      (total, system) => total + system.heat.getMaxHeatStoreCapacity(),\n      0\n    );\n  }\n\n  getTotalHeatStored() {\n    return this.getSystems()\n      .filter((system) => system.heat.isHeatStorage())\n      .reduce((total, system) => total + system.heat.getHeat(), 0);\n  }\n\n  getPassiveHeatChange() {\n    const producedAndTransferred = this.getSystems().reduce((total, system) => {\n      const { cooling } = system.heat.predictHeatChange();\n\n      return total + cooling;\n    }, 0);\n\n    const heatRadiated = this.getSystems().reduce(\n      (total, system) => total + system.heat.getRadiateHeatCapacity(),\n      0\n    );\n\n    return producedAndTransferred - heatRadiated;\n  }\n}\n\nexport default ShipSystems;\n","export const EW_OFFENSIVE = \"oew\";\r\nexport const EW_DEFENSIVE = \"dew\";\r\nexport const EW_CC = \"ccew\";\r\nexport const EW_OFFENSIVE_SUPPORT = \"soew\";\r\nexport const EW_DEFENSIVE_SUPPORT = \"sdew\";\r\nexport const EW_DISRUPTION = \"disew\";\r\nexport const EW_AREA_DEFENSIVE_SUPPORT = \"adew\";\r\n","import * as ewTypes from \"./electronicWarfareTypes.mjs\";\r\n\r\nclass ElectronicWarfareEntry {\r\n  constructor(type, targetShipId, amount) {\r\n    this.deserialize({\r\n      type,\r\n      targetShipId,\r\n      amount\r\n    });\r\n  }\r\n\r\n  clone() {\r\n    return new ElectronicWarfareEntry(\r\n      this.type,\r\n      this.targetShipId,\r\n      this.amount\r\n    );\r\n  }\r\n\r\n  addAmount(amount) {\r\n    this.amount += amount;\r\n  }\r\n\r\n  getAmount() {\r\n    return this.amount;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  getActualPower() {\r\n    switch (this.type) {\r\n      case ewTypes.EW_OFFENSIVE:\r\n      case ewTypes.EW_DEFENSIVE:\r\n      case ewTypes.EW_CC:\r\n      case ewTypes.EW_OFFENSIVE_SUPPORT:\r\n      case ewTypes.EW_DEFENSIVE_SUPPORT:\r\n        return this.amount;\r\n      case ewTypes.EW_DISRUPTION:\r\n        return this.amount / 3;\r\n      case ewTypes.EW_AREA_DEFENSIVE_SUPPORT:\r\n        return this.amount / 2.5;\r\n    }\r\n  }\r\n\r\n  getEfficiency() {\r\n    switch (this.type) {\r\n      case ewTypes.EW_OFFENSIVE:\r\n      case ewTypes.EW_DEFENSIVE:\r\n      case ewTypes.EW_CC:\r\n      case ewTypes.EW_OFFENSIVE_SUPPORT:\r\n      case ewTypes.EW_DEFENSIVE_SUPPORT:\r\n        return 1;\r\n      case ewTypes.EW_DISRUPTION:\r\n        return 3;\r\n      case ewTypes.EW_AREA_DEFENSIVE_SUPPORT:\r\n        return 2.5;\r\n    }\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      type: this.type,\r\n      targetShipId: this.targetShipId,\r\n      amount: this.amount\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.type = data.type;\r\n    this.targetShipId = data.targetShipId;\r\n    this.amount = data.amount;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default ElectronicWarfareEntry;\r\n","import * as ewTypes from \"../electronicWarfare/electronicWarfareTypes.mjs\";\r\nimport ElectornicWarfareEntry from \"../electronicWarfare/ElectronicWarfareEntry.mjs\";\r\nimport Ship from \"./Ship.mjs\";\r\n\r\nclass ShipCurrentElectronicWarfare {\r\n  constructor(dew, ccew, entries) {\r\n    this.dew = dew;\r\n    this.ccew = ccew;\r\n    this.entries = entries ? entries.map(entry => entry.clone()) : [];\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      dew: this.dew,\r\n      ccew: this.ccew,\r\n      entries: this.entries.map(entry => entry.serialize())\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.dew = data.dew || 0;\r\n    this.ccew = data.ccew || 0;\r\n    this.entries = data.entries\r\n      ? data.entries.map(entry =>\r\n          new ElectornicWarfareEntry().deserialize(entry)\r\n        )\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  getDefensiveEw() {\r\n    return this.dew;\r\n  }\r\n\r\n  getCcEw() {\r\n    return this.ccew;\r\n  }\r\n\r\n  getOffensiveEw(target) {\r\n    return this.getFromEntries(ewTypes.EW_OFFENSIVE, target);\r\n  }\r\n\r\n  getAllOew() {\r\n    const combined = [];\r\n\r\n    this.entries\r\n      .filter(entry => entry.getType() === ewTypes.EW_OFFENSIVE)\r\n      .forEach(entry => {\r\n        const existing = combined.find(\r\n          combinedEntry => combinedEntry.targetShipId === entry.targetShipId\r\n        );\r\n\r\n        if (existing) {\r\n          existing.amount += entry.amount;\r\n        } else {\r\n          combined.push(entry.clone());\r\n        }\r\n      });\r\n\r\n    return combined;\r\n  }\r\n\r\n  getFromEntries(type, target) {\r\n    if (target instanceof Ship) {\r\n      target = target.id;\r\n    }\r\n\r\n    return this.entries\r\n      .filter(entry => entry.type === type && entry.targetShipId === target)\r\n      .reduce((total, entry) => total + entry.getAmount(), 0);\r\n  }\r\n}\r\n\r\nexport default ShipCurrentElectronicWarfare;\r\n","import * as ewTypes from \"../electronicWarfare/electronicWarfareTypes.mjs\";\r\nimport ElectronicWarfareEntry from \"../electronicWarfare/ElectronicWarfareEntry.mjs\";\r\nimport Ship from \"../unit/Ship.mjs\";\r\nimport ShipCurrentElectronicWarfare from \"./ShipCurrentElectronicWarfare.mjs\";\r\n\r\nexport class UnableToAssignEw extends Error {}\r\n\r\nclass ShipElectronicWarfare {\r\n  constructor(ship) {\r\n    this.ship = ship;\r\n    this.inEffect = new ShipCurrentElectronicWarfare();\r\n  }\r\n\r\n  serialize() {\r\n    return this.inEffect.serialize();\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.inEffect.deserialize(data);\r\n\r\n    return this;\r\n  }\r\n\r\n  activatePlannedElectronicWarfare() {\r\n    this.inEffect = new ShipCurrentElectronicWarfare(\r\n      this.getDefensiveEw(),\r\n      this.getCcEw(),\r\n      this.getAllEntries()\r\n    );\r\n  }\r\n\r\n  canAssignCcEw(amount) {\r\n    return this.canAssignEw(ewTypes.EW_CC, this.ship.id, amount);\r\n  }\r\n\r\n  assignCcEw(amount) {\r\n    this.assingEw(ewTypes.EW_CC, this.ship.id, amount);\r\n  }\r\n\r\n  assignOffensiveEw(target, amount) {\r\n    this.assingEw(ewTypes.EW_OFFENSIVE, target, amount);\r\n  }\r\n\r\n  canAssignOffensiveEw(target, amount) {\r\n    return this.canAssignEw(ewTypes.EW_OFFENSIVE, target, amount);\r\n  }\r\n\r\n  getCcEw() {\r\n    return this.getEw(ewTypes.EW_CC, this.ship.id);\r\n  }\r\n\r\n  getDefensiveEw() {\r\n    return this.getEw(ewTypes.EW_DEFENSIVE);\r\n  }\r\n\r\n  getOffensiveEw(target) {\r\n    return this.getEw(ewTypes.EW_OFFENSIVE, target);\r\n  }\r\n\r\n  getEw(type, target) {\r\n    if (target && target instanceof Ship) {\r\n      target = target.id;\r\n    }\r\n\r\n    if (type === ewTypes.EW_DEFENSIVE) {\r\n      return this.getEwArrays().reduce(\r\n        (total, system) =>\r\n          total + system.callHandler(\"getTotalEwUsedByType\", type),\r\n        0\r\n      );\r\n    }\r\n\r\n    const result = this.getAllEntries()\r\n      .filter((entry) => entry.type === type && entry.targetShipId === target)\r\n      .reduce((total, entry) => total + entry.getAmount(), 0);\r\n\r\n    return result;\r\n  }\r\n\r\n  assingEw(type, target, amount) {\r\n    if (target && target instanceof Ship) {\r\n      target = target.id;\r\n    }\r\n\r\n    const entries = this.getAllEntries();\r\n    entries.push(new ElectronicWarfareEntry(type, target, amount));\r\n\r\n    this.assignEntries(entries);\r\n  }\r\n\r\n  canAssignEw(type, target, amount) {\r\n    const entries = this.getAllEntries();\r\n    try {\r\n      this.assingEw(type, target, amount);\r\n      this.assignEntries(entries);\r\n      return true;\r\n    } catch (e) {\r\n      if (e instanceof UnableToAssignEw) {\r\n        this.assignEntries(entries);\r\n        return false;\r\n      }\r\n\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  getAllOew() {\r\n    const combined = [];\r\n\r\n    this.getEwArrays()\r\n      .reduce(\r\n        (all, system) => [...all, ...system.callHandler(\"getEwEntries\")],\r\n        []\r\n      )\r\n      .filter((entry) => entry.getType() === ewTypes.EW_OFFENSIVE)\r\n      .forEach((entry) => {\r\n        const existing = combined.find(\r\n          (combinedEntry) => combinedEntry.targetShipId === entry.targetShipId\r\n        );\r\n\r\n        if (existing) {\r\n          existing.amount += entry.amount;\r\n        } else {\r\n          combined.push(entry.clone());\r\n        }\r\n      });\r\n\r\n    return combined;\r\n  }\r\n\r\n  getAllEntries() {\r\n    return this.getEwArrays().reduce(\r\n      (all, system) => [...all, ...system.callHandler(\"getEwEntries\")],\r\n      []\r\n    );\r\n  }\r\n\r\n  getEwArrays() {\r\n    return this.ship.systems\r\n      .getSystems()\r\n      .filter((system) => system.callHandler(\"isEwArray\"));\r\n  }\r\n\r\n  repeatElectonicWarfare() {\r\n    this.assignEntries(this.getAllEntries(), true);\r\n  }\r\n\r\n  removeAll() {\r\n    this.getEwArrays().forEach((system) => system.callHandler(\"resetEw\"));\r\n  }\r\n\r\n  assignEntries(entries, allowIncomplete = false) {\r\n    this.removeAll();\r\n    const negativeEntries = entries.filter((entry) => entry.getAmount() < 0);\r\n\r\n    entries\r\n      .filter((entry) => entry.getAmount() > 0)\r\n      .sort((a, b) => {\r\n        if (\r\n          a.type === ewTypes.EW_OFFENSIVE &&\r\n          b.type !== ewTypes.EW_OFFENSIVE\r\n        ) {\r\n          return 1;\r\n        }\r\n\r\n        if (\r\n          a.type !== ewTypes.EW_OFFENSIVE &&\r\n          b.type === ewTypes.EW_OFFENSIVE\r\n        ) {\r\n          return -1;\r\n        }\r\n\r\n        return 0;\r\n      })\r\n      .map((entry) => {\r\n        negativeEntries\r\n          .filter(\r\n            (negativeEntry) =>\r\n              negativeEntry.type === entry.type &&\r\n              negativeEntry.targetShipId === entry.targetShipId\r\n          )\r\n          .forEach((negativeEntry) => {\r\n            if (entry.getAmount() >= Math.abs(negativeEntry.getAmount())) {\r\n              entry.amount += negativeEntry.getAmount();\r\n              negativeEntry.amount = 0;\r\n            } else if (\r\n              Math.abs(negativeEntry.getAmount()) > entry.getAmount()\r\n            ) {\r\n              negativeEntry.amount += entry.getAmount();\r\n              entry.amount = 0;\r\n            }\r\n          });\r\n\r\n        return entry;\r\n      })\r\n      .filter((entry) => entry.getAmount() !== 0)\r\n      .forEach((entry) => this.assignPositiveEW(entry, allowIncomplete));\r\n\r\n    if (negativeEntries.some((entry) => entry.getAmount() !== 0)) {\r\n      throw new UnableToAssignEw(\"Invalid EW, negative entries left\");\r\n    }\r\n  }\r\n\r\n  assignPositiveEW(entry, allowIncomplete) {\r\n    let amount = entry.getAmount();\r\n    while (amount > 0) {\r\n      const availableSystems = this.getAvailableSystemsForEntry(entry);\r\n\r\n      if (availableSystems.length === 0) {\r\n        if (allowIncomplete) {\r\n          return;\r\n        } else {\r\n          throw new UnableToAssignEw(\"Invalid EW\");\r\n        }\r\n      }\r\n\r\n      availableSystems.shift().callHandler(\"assignEw\", {\r\n        type: entry.type,\r\n        target: entry.targetShipId,\r\n        amount: 1,\r\n      });\r\n      amount--;\r\n    }\r\n  }\r\n\r\n  getAvailableSystemsForEntry(entry) {\r\n    return this.getEwArrays()\r\n      .filter((system) =>\r\n        system.callHandler(\"canUseEw\", {\r\n          type: entry.type,\r\n          amount: 1,\r\n        })\r\n      )\r\n      .sort((a, b) => {\r\n        const aValidTypes = a.callHandler(\"getValidEwTypes\");\r\n        const bValidTypes = b.callHandler(\"getValidEwTypes\");\r\n\r\n        if (aValidTypes.length > bValidTypes.length) {\r\n          return -1;\r\n        } else if (aValidTypes.length < bValidTypes.length) {\r\n          return 1;\r\n        }\r\n\r\n        return 0;\r\n      });\r\n  }\r\n}\r\n\r\nexport default ShipElectronicWarfare;\r\n","class User {\r\n  constructor(id, username, accessLevel = 1) {\r\n    this.id = id;\r\n    this.username = username;\r\n    this.accessLevel = accessLevel;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      id: this.id,\r\n      username: this.username,\r\n      accessLevel: this.accessLevel\r\n    };\r\n  }\r\n\r\n  deserialize(data) {\r\n    this.id = data.id;\r\n    this.username = data.username;\r\n    this.accessLevel = data.accessLevel;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default User;\r\n","import User from \"../User.mjs\";\r\n\r\nclass ShipPlayer {\r\n  constructor() {\r\n    this.user = null;\r\n  }\r\n\r\n  is(user) {\r\n    return user && this.user.id === user.id;\r\n  }\r\n\r\n  setUser(user) {\r\n    this.user = user;\r\n  }\r\n\r\n  isUsers(user) {\r\n    return user && this.user && this.user.id === user.id;\r\n  }\r\n\r\n  deserialize(user) {\r\n    this.user = user ? new User().deserialize(user) : undefined;\r\n\r\n    return this;\r\n  }\r\n\r\n  serialize() {\r\n    return this.user ? this.user.serialize() : undefined;\r\n  }\r\n}\r\n\r\nexport default ShipPlayer;\r\n","import MovementOrder from \"../movement/MovementOrder.mjs\";\nimport Vector from \"../utils/Vector.mjs\";\nimport ThrustBill from \"../movement/ThrustBill.mjs\";\n\nclass ShipMovement {\n  constructor(ship) {\n    this.ship = ship;\n    this.moves = [];\n  }\n\n  addMovement(move) {\n    this.moves.push(move.clone());\n    this.buildIndex();\n  }\n\n  removeMovement(move) {\n    const toDelete = this.moves.find((other) => other.equals(move));\n    this.moves = this.moves.filter((other) => other !== toDelete);\n    this.buildIndex();\n  }\n\n  replaceLastMove(move) {\n    this.moves[this.moves.length - 1] = move;\n    this.buildIndex();\n  }\n\n  removeMovementExceptEnd(turn) {\n    this.moves = this.moves.filter(\n      (move) =>\n        move.turn < turn || move.isEnd() || move.isDeploy() || move.isStart()\n    );\n    this.buildIndex();\n  }\n\n  removeMovementForTurn(turn) {\n    this.moves = this.moves.filter(\n      (move) => move.turn < turn || move.isStart()\n    );\n    this.buildIndex();\n  }\n\n  removeMovementForOtherTurns(turn) {\n    this.moves = this.moves.filter((move) => move.turn === turn);\n    this.buildIndex();\n  }\n\n  getMovement() {\n    return this.moves.map((move) => move.clone());\n  }\n\n  getPlayerAddedMovement() {\n    return this.moves\n      .filter((move) => move.isPlayerAdded())\n      .map((move) => move.clone());\n  }\n\n  getLastMove() {\n    if (this.moves.length === 0) {\n      return null;\n    }\n\n    return this.moves[this.moves.length - 1].clone();\n  }\n\n  getStartMove() {\n    const start = this.moves.find((move) => move.isStart());\n    if (!start) {\n      return null;\n    }\n\n    return start.clone();\n  }\n\n  getDeployMove() {\n    const deploy = this.moves.find((move) => move.isDeploy());\n    if (!deploy) {\n      return null;\n    }\n\n    return deploy.clone();\n  }\n\n  replaceDeployMove(newMove) {\n    this.moves = this.moves.map((move) => {\n      if (move.isDeploy()) {\n        return newMove;\n      } else {\n        return move.clone();\n      }\n    });\n  }\n\n  replaceMovement(newMovement) {\n    this.moves = [\n      ...this.moves.filter((move) => !move.isPlayerAdded()),\n      ...newMovement.filter((move) => move.isPlayerAdded()),\n    ];\n\n    this.moves = this.moves.map((move) => move.clone());\n    this.buildIndex();\n  }\n\n  buildIndex() {\n    let lastIndex = null;\n\n    this.moves.forEach((move) => {\n      if (\n        lastIndex === null &&\n        (move.isEnd() || move.isStart() || move.isDeploy()) &&\n        move.index !== 0\n      ) {\n        lastIndex = move.index;\n      } else if (lastIndex !== null) {\n        lastIndex++;\n        move.index = lastIndex;\n      }\n    });\n\n    this.ship.systems.callAllSystemHandlers(\"resetChanneledThrust\");\n\n    this.moves.forEach((move) => {\n      const fulfilments = move.requiredThrust.getFulfilments();\n      fulfilments.forEach((fulfilment) => {\n        fulfilment.forEach(({ amount, thrusterId }) => {\n          this.ship.systems\n            .getSystemById(thrusterId)\n            .callHandler(\"addChanneledThrust\", amount);\n        });\n      });\n    });\n  }\n\n  getLastEndMove() {\n    const end = this.moves\n      .slice()\n      .reverse()\n      .find((move) => move.isEnd());\n\n    if (!end) {\n      return null;\n    }\n\n    return end.clone();\n  }\n\n  getLastEndMoveOrSurrogate() {\n    const end = this.getLastEndMove();\n    if (!end) {\n      const deploy = this.getDeployMove();\n\n      if (!deploy) {\n        const start = this.getStartMove();\n        return start;\n      }\n\n      return deploy;\n    }\n\n    return end;\n  }\n\n  getEvadeMove() {\n    const move = this.moves.find((move) => move.isEvade());\n\n    if (!move) {\n      return null;\n    }\n\n    return move.clone();\n  }\n\n  isRolled() {\n    const end = this.getLastEndMoveOrSurrogate();\n    return end.rolled;\n  }\n\n  isRolling() {\n    return this.getRollMove();\n  }\n\n  getRollMove() {\n    const move = this.moves.find((move) => move.isRoll());\n\n    if (!move) {\n      return null;\n    }\n\n    return move.clone();\n  }\n\n  getEvasion() {\n    const move = this.getEvadeMove();\n\n    if (!move) {\n      return 0;\n    }\n\n    return move.value;\n  }\n\n  getActiveEvasion() {\n    const move = this.getLastEndMoveOrSurrogate();\n\n    if (!move) {\n      return 0;\n    }\n\n    return move.evasion;\n  }\n\n  getThrustOutput() {\n    return this.ship.systems\n      .getSystems()\n      .reduce(\n        (acc, system) => system.callHandler(\"getThrustOutput\", null, acc),\n        0\n      );\n  }\n\n  getThrustRequired() {\n    return this.moves\n      .filter((move) => move.requiredThrust)\n      .reduce(\n        (total, move) => total + move.requiredThrust.getTotalAmountRequired(),\n        0\n      );\n  }\n\n  getRemainingThrustOutput() {\n    return this.getThrustOutput() - this.getThrustRequired();\n  }\n\n  getThrusters() {\n    return this.ship.systems\n      .getSystems()\n      .filter((system) => system.callHandler(\"isThruster\"))\n      .filter((system) => !system.isDisabled());\n  }\n\n  getMaxEvasion() {\n    return this.ship.systems\n      .getSystems()\n      .reduce(\n        (acc, system) => system.callHandler(\"getMaxEvasion\", null, acc),\n        0\n      );\n  }\n\n  isOverlapping(otherShip) {\n    const shipPosition = this.ship.getHexPosition();\n    const shipFacing = this.ship.getFacing();\n    const otherShipPosition = otherShip.getHexPosition();\n    const otherShipFacing = otherShip.getFacing();\n\n    return this.ship.hexSizes.some((hex) => {\n      return otherShip.hexSizes.some((otherHex) =>\n        shipPosition\n          .add(hex.rotate(shipFacing))\n          .equals(otherShipPosition.add(otherHex.rotate(otherShipFacing)))\n      );\n    });\n  }\n\n  hasValidMovement() {\n    const bill = new ThrustBill(this.ship, this.getMovement());\n\n    const result = bill.pay();\n    return result;\n  }\n\n  revertMovementsUntilValidMovement() {\n    const canRevert = () =>\n      this.getMovement().some((move) => move.isPlayerAdded());\n\n    while (true) {\n      if (this.hasValidMovement()) {\n        const bill = new ThrustBill(this.ship, this.getMovement());\n        bill.pay();\n        const newMovement = bill.getMoves();\n        this.ship.movement.replaceMovement(newMovement);\n        return;\n      }\n\n      if (!canRevert()) {\n        throw new Error(\n          \"Ship does not have valid movement, but can not revert either\"\n        );\n      }\n\n      this.removeMovement(\n        this.getMovement()\n          .filter((move) => move.isCancellable())\n          .pop()\n      );\n    }\n  }\n\n  applyRoll() {\n    const endMove = this.getLastEndMove();\n    const rollMove = this.getRollMove();\n    if (rollMove) {\n      endMove.rolled = !endMove.rolled;\n    }\n\n    this.replaceLastMove(endMove);\n  }\n\n  getFuel() {\n    return this.ship.systems\n      .getSystems()\n      .reduce((all, system) => all + system.callHandler(\"getFuel\", null, 0), 0);\n  }\n\n  getFuelSpace() {\n    return this.ship.systems\n      .getSystems()\n      .reduce(\n        (all, system) => all + system.callHandler(\"getFuelSpace\", null, 0),\n        0\n      );\n  }\n\n  getFuelCost() {\n    return this.ship.systems\n      .getSystems()\n      .reduce(\n        (all, system) =>\n          all + system.callHandler(\"getFuelRequirement\", null, 0),\n        0\n      );\n  }\n\n  payFuelCost() {\n    const shipFuel = this.getFuel();\n    const fuelCost = this.getFuelCost();\n\n    let paid = 0;\n\n    if (fuelCost > shipFuel) {\n      throw new Error(\n        \"Unable to pay fuel cost. This should not happen since moves should be validated!:E\"\n      );\n    }\n\n    const payFuel = () => {\n      const tank = this.ship.systems\n        .getSystems()\n        .filter((system) => system.callHandler(\"getFuel\", null, 0) > 0)\n        .sort((a, b) => {\n          const aFuel = a.callHandler(\"getFuel\", null, 0);\n          const bFuel = b.callHandler(\"getFuel\", null, 0);\n\n          if (aFuel > bFuel) {\n            return 1;\n          }\n\n          if (aFuel < bFuel) {\n            return -1;\n          }\n\n          return 0;\n        })\n        .pop();\n\n      if (!tank) {\n        throw new Error(\n          \"Unable to pay fuel cost. This should not happen since moves should be validated!:E\"\n        );\n      }\n\n      tank.callHandler(\"takeFuel\", 1);\n    };\n\n    while (paid < fuelCost) {\n      payFuel();\n      paid++;\n    }\n  }\n\n  deserialize(data = []) {\n    this.moves = data.map((moveData) =>\n      new MovementOrder().deserialize(moveData)\n    );\n\n    return this;\n  }\n\n  serialize() {\n    return this.moves.map((move) => move.serialize());\n  }\n}\n\nexport default ShipMovement;\n","import ShipSystems from \"./ShipSystems.mjs\";\nimport ShipElectronicWarfare from \"./ShipElectronicWarfare.mjs\";\nimport ShipPlayer from \"./ShipPlayer.mjs\";\nimport ShipMovement from \"./ShipMovement.mjs\";\nimport {\n  getCompassHeadingOfPoint,\n  addToDirection,\n  hexFacingToAngle,\n} from \"../utils/math.mjs\";\nimport coordinateConverter from \"../utils/CoordinateConverter.mjs\";\n\nclass Ship {\n  constructor(data = {}) {\n    this.systems = new ShipSystems(this);\n    this.pointCost = 0;\n    this.accelcost = 1;\n    this.rollcost = 1;\n    this.pivotcost = 1;\n    this.maxPivots = null;\n    this.evasioncost = 1;\n    this.frontHitProfile = 30;\n    this.sideHitProfile = 50;\n    this.hexSizes = [];\n\n    this.shipModel = null;\n    this.shipTypeName = \"\";\n    this.setShipProperties();\n    this.deserialize(data);\n  }\n\n  setShipProperties() {}\n\n  getFrontHitProfile() {\n    return (\n      this.frontHitProfile +\n      this.systems\n        .callAllSystemHandlers(\"getHitProfile\", { front: true })\n        .reduce((total, entry) => total + entry, 0)\n    );\n  }\n\n  getSideHitProfile() {\n    return (\n      this.sideHitProfile +\n      this.systems\n        .callAllSystemHandlers(\"getHitProfile\", { front: false })\n        .reduce((total, entry) => total + entry, 0)\n    );\n  }\n\n  getHitProfile(position) {\n    const heading = addToDirection(\n      getCompassHeadingOfPoint(this.getPosition(), position),\n      -hexFacingToAngle(this.getFacing())\n    );\n\n    if (heading >= 330 || heading <= 30 || (heading >= 150 && heading <= 210)) {\n      return this.getFrontHitProfile();\n    } else {\n      return this.getSideHitProfile();\n    }\n  }\n\n  getPointCost() {\n    return this.pointCost;\n  }\n\n  getFacing() {\n    const lastMove = this.movement.getLastEndMoveOrSurrogate();\n    if (!lastMove) {\n      return null;\n    }\n\n    return lastMove.getFacing();\n  }\n\n  getPosition() {\n    const lastMove = this.movement.getLastEndMoveOrSurrogate();\n    if (!lastMove) {\n      return null;\n    }\n\n    return lastMove.getPosition();\n  }\n\n  getHexPosition() {\n    return coordinateConverter.fromGameToHex(this.getPosition());\n  }\n\n  distanceTo(target) {\n    return this.getPosition().distanceTo(target.getPosition());\n  }\n\n  hexDistanceTo(target) {\n    return this.getHexPosition().distanceTo(target.getHexPosition());\n  }\n\n  getVelocity() {\n    const lastMove = this.movement.getLastEndMoveOrSurrogate();\n    if (!lastMove) {\n      return null;\n    }\n\n    return lastMove.getVelocity();\n  }\n\n  getIconHexas(hexFacing = 0) {\n    return this.hexSizes.map((hex) => hex.rotate(hexFacing));\n  }\n\n  deserialize(data = {}) {\n    const shipData = data.shipData || {};\n    this.id = data.id || null;\n    this.name = data.name || \"Unnamed ship \";\n    this.shipClass = this.constructor.name;\n    this.slotId = data.slotId || null;\n\n    this.systems.deserialize(shipData.systems);\n    this.player = new ShipPlayer(this).deserialize(shipData.player);\n    this.movement = new ShipMovement(this).deserialize(data.movement);\n    this.electronicWarfare = new ShipElectronicWarfare(this).deserialize(\n      shipData.electronicWarfare\n    );\n    this.destroyedThisTurn = shipData.destroyedThisTurn || false;\n\n    return this;\n  }\n\n  serialize() {\n    /*\n    NOTE: shipData gets serialized normally. Everything else has custom handling\n    If you want to serialize something, serialize it inside of shipData\n    (This is like the fifth time I am wondering why stuff doesnt get serialized:P)  \n    */\n    return {\n      id: this.id,\n      gameId: this.gameId,\n      name: this.name,\n      shipClass: this.shipClass,\n      slotId: this.slotId,\n      movement: this.movement.serialize(),\n      shipData: {\n        systems: this.systems.serialize(),\n        player: this.player.serialize(),\n        electronicWarfare: this.electronicWarfare.serialize(),\n        destroyedThisTurn: this.destroyedThisTurn,\n      },\n    };\n  }\n\n  isDestroyed() {\n    return this.systems.isDestroyed();\n  }\n\n  isDestroyedThisTurn() {\n    return this.destroyedThisTurn;\n  }\n\n  markDestroyedThisTurn() {\n    this.destroyedThisTurn = true;\n  }\n\n  censorForUser(user, mine) {\n    if (!mine) {\n      this.movement.removeMovementExceptEnd(this.turn);\n    }\n    this.systems.censorForUser(user, mine);\n  }\n\n  endTurn(turn) {\n    this.systems.endTurn(turn);\n  }\n\n  advanceTurn(turn) {\n    this.movement.removeMovementForOtherTurns(turn);\n    this.systems.advanceTurn(turn);\n    this.electronicWarfare.activatePlannedElectronicWarfare();\n    this.electronicWarfare.removeAll();\n\n    this.destroyedThisTurn = false;\n    return this;\n  }\n\n  getRequiredPhasesForReceivingPlayerData() {\n    return this.systems.getRequiredPhasesForReceivingPlayerData();\n  }\n\n  receivePlayerData(clientShip, gameData, phase) {\n    this.systems.receivePlayerData(clientShip, gameData, phase);\n  }\n\n  setShipLoadout() {\n    this.systems.callAllSystemHandlers(\"onGameStart\");\n    this.systems.callAllSystemHandlers(\"loadTargetInstant\");\n    this.systems.callAllSystemHandlers(\"setMaxFuel\");\n  }\n}\n\nexport default Ship;\n","import Ship from \"../unit/Ship.mjs\";\r\nimport ShipSystem from \"../unit/system/ShipSystem.mjs\";\r\n\r\nclass FireOrder {\r\n  constructor(shooterId, targetId, weaponId, weaponSettigs = {}) {\r\n    this.id = null;\r\n    this.shooterId = shooterId instanceof Ship ? shooterId.id : shooterId;\r\n    this.targetId = shooterId instanceof Ship ? targetId.id : targetId;\r\n    this.weaponId = weaponId instanceof ShipSystem ? weaponId.id : weaponId;\r\n    this.weaponSettigs = weaponSettigs;\r\n    this.resolved = false;\r\n  }\r\n\r\n  setId(id) {\r\n    this.id = id;\r\n    return this;\r\n  }\r\n\r\n  setResolved() {\r\n    this.resolved = true;\r\n    return this;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      id: this.id,\r\n      shooterId: this.shooterId,\r\n      targetId: this.targetId,\r\n      weaponId: this.weaponId,\r\n      weaponSettigs: this.weaponSettigs,\r\n      resolved: this.resolved\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.id = data.id || null;\r\n    this.shooterId = data.shooterId;\r\n    this.targetId = data.targetId;\r\n    this.weaponId = data.weaponId;\r\n    this.weaponSettigs = data.weaponSettigs || {};\r\n    this.resolved = data.resolved;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default FireOrder;\r\n","import FireOrder from \"./FireOrder.mjs\";\r\n\r\nclass WeaponFireService {\r\n  constructor() {\r\n    this.gamedata = null;\r\n  }\r\n\r\n  update(gamedata) {\r\n    this.gamedata = gamedata;\r\n\r\n    return this;\r\n  }\r\n\r\n  getAllFireOrders() {\r\n    return this.gamedata.ships\r\n      .getShips()\r\n      .reduce(\r\n        (all, ship) => [...all, ...this.getAllFireOrdersForShip(ship)],\r\n        []\r\n      );\r\n  }\r\n\r\n  getFireOrderById(id) {\r\n    return this.getAllFireOrders().find(order => order.id === id);\r\n  }\r\n\r\n  getAllFireOrdersForShip(shooter) {\r\n    return shooter.systems\r\n      .getSystems()\r\n      .reduce(\r\n        (all, system) => [\r\n          ...all,\r\n          ...system.callHandler(\"getFireOrders\", {}, [])\r\n        ],\r\n        []\r\n      );\r\n  }\r\n\r\n  systemHasFireOrder(system) {\r\n    const fireOrders = system.callHandler(\"getFireOrders\");\r\n    return fireOrders && fireOrders.length > 0;\r\n  }\r\n\r\n  getSystemFireOrderTargetId(system) {\r\n    const fireOrders = system.callHandler(\"getFireOrders\");\r\n    return fireOrders && fireOrders.length > 0 ? fireOrders[0].targetId : null;\r\n  }\r\n\r\n  systemHasFireOrderAgainstShip(system, target) {\r\n    const fireOrders = system.callHandler(\"getFireOrders\", null, []);\r\n\r\n    return fireOrders.some(order => order.targetId === target.id);\r\n  }\r\n\r\n  addFireOrder(shooter, target, weapon) {\r\n    if (!this.canFire(shooter, target, weapon)) {\r\n      throw new Error(\"Check validity first\");\r\n    }\r\n\r\n    return weapon.callHandler(\"addFireOrder\", {\r\n      shooter,\r\n      target\r\n    });\r\n  }\r\n\r\n  removeFireOrders(shooter, weapon) {\r\n    weapon.callHandler(\"removeFireOrders\");\r\n  }\r\n\r\n  canFire(shooter, target, weapon) {\r\n    if (\r\n      shooter.isDestroyed() ||\r\n      target.isDestroyed() ||\r\n      weapon.isDisabled() ||\r\n      !weapon.callHandler(\"usesFireOrders\", null, false)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    if (!weapon.callHandler(\"isOnArc\", { target }, true)) {\r\n      return false;\r\n    }\r\n\r\n    if (!weapon.callHandler(\"canFire\", null, true)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default WeaponFireService;\r\n","class PhaseState {\r\n  constructor() {\r\n    this.state = {};\r\n  }\r\n\r\n  set(key, payload) {\r\n    this.state[key] = payload;\r\n  }\r\n\r\n  get(key) {\r\n    return this.state[key];\r\n  }\r\n}\r\n\r\nexport default PhaseState;\r\n","const starVertexShader = `\r\n    attribute vec3 color;\r\n    attribute float opacity;\r\n    attribute float size;\r\n    attribute float sizeChange;\r\n    attribute float angle;\r\n    attribute float angleChange;\r\n    attribute float activationGameTime;\r\n    attribute float textureNumber;\r\n    attribute float parallaxFactor;\r\n    attribute float sineFrequency;\r\n    attribute float sineAmplitude;\r\n    uniform float gameTime;\r\n    varying vec4  vColor;\r\n    varying float vAngle;\r\n    varying float textureN;\r\n    void main()\r\n    {\r\n    \r\n        float elapsedTime = gameTime - activationGameTime;\r\n\r\n        if (elapsedTime < 0.0) {\r\n            gl_PointSize = 0.0;\r\n            gl_Position = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n            vColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n            textureN = textureNumber;\r\n            return;\r\n        }\r\n        \r\n\r\n        float currentOpacity = opacity;\r\n        if (sineFrequency > 0.0) {\r\n            currentOpacity = opacity + (sineAmplitude * 0.5 * sin(gameTime/sineFrequency) + sineAmplitude);\r\n        }\r\n\r\n        if ( currentOpacity > 0.0 && elapsedTime >= 0.0)\r\n        {\r\n            vColor = vec4( color, currentOpacity );\r\n        } else {\r\n            vColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n        }\r\n\r\n        vAngle = angle + angleChange * elapsedTime;\r\n        textureN = textureNumber;\r\n\r\n        vec3 modPos = vec3( position.x - (cameraPosition.x * parallaxFactor), position.y - (cameraPosition.y * parallaxFactor), position.z );\r\n\r\n\r\n        gl_PointSize = clamp(size + (sizeChange * elapsedTime), 0.0, 1024.0);\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( modPos, 1.0 );\r\n        \r\n    }\r\n`;\r\n\r\nexport default starVertexShader;\r\n","const starFragmentShader = `\r\n    uniform sampler2D texture;\r\n    varying vec4 vColor;\r\n    varying float vAngle;\r\n    varying float textureN;\r\n    void main()\r\n    {\r\n        gl_FragColor = vColor;\r\n        if (gl_FragColor.a == 0.0) {\r\n            return;\r\n        }\r\n\r\n        float c = cos(vAngle);\r\n        float s = sin(vAngle);\r\n        float textureAmount = 8.0;\r\n        vec2 tPos = vec2((mod(textureN, textureAmount) * (1.0 / textureAmount)), (floor(textureN / textureAmount) * (1.0 / textureAmount)));\r\n\r\n        vec2 pos = vec2(gl_PointCoord.x, gl_PointCoord.y);\r\n        vec2 tCen = vec2(0.5, 0.5);\r\n\r\n        vec2 rPos = vec2(\r\n            tCen.x + c * (pos.x - tCen.x) - s * (pos.y - tCen.y),\r\n            tCen.y + s * (pos.x - tCen.x) + c * (pos.y - tCen.y)\r\n        );\r\n\r\n        rPos = clamp(rPos, 0.0, 1.0);\r\n\r\n        vec2 finalPos = vec2(\r\n            (rPos.x / textureAmount + tPos.x),\r\n            1.0 - (rPos.y / textureAmount + tPos.y)\r\n        );\r\n\r\n        vec4 rotatedTexture = texture2D(texture, finalPos);\r\n        gl_FragColor = gl_FragColor * rotatedTexture;\r\n    }\r\n`;\r\n\r\nexport default starFragmentShader;\r\n","const effectVertexShader = `\r\n    attribute vec3 color;\r\n    attribute float opacity;\r\n    attribute float fadeInTime;\r\n    attribute float fadeInSpeed;\r\n    attribute float fadeOutTime;\r\n    attribute float fadeOutSpeed;\r\n    attribute float size;\r\n    attribute float sizeChange;\r\n    attribute float angle;\r\n    attribute vec3 velocity;\r\n    attribute vec3 acceleration;\r\n    attribute float activationGameTime;\r\n    attribute float textureNumber;\r\n    attribute float sine;\r\n    attribute float repeat;\r\n    uniform float zoomLevel;\r\n    uniform float gameTime;\r\n    varying vec4  vColor;\r\n    varying float vAngle;\r\n    varying float textureN;\r\n\r\n\r\n    //500432\r\n    vec2 getAngleAndChange() {\r\n        float finalChange = floor(angle / 10000.0) / 1000.0;\r\n        float finalAngle = (angle - floor(angle / 10000.0) * 10000.0) / 1000.0;\r\n\r\n        return vec2(finalAngle, finalChange);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float modGameTime = gameTime;\r\n        if (repeat > 0.0) {\r\n            modGameTime = gameTime - (repeat * floor(gameTime/repeat));\r\n        }\r\n\r\n        float elapsedTime = modGameTime - activationGameTime;\r\n\r\n        if (elapsedTime < 0.0 || (fadeOutTime > 0.0 && modGameTime - (fadeOutTime + fadeOutSpeed) > 0.0)) {\r\n            gl_PointSize = 0.0;\r\n            gl_Position = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n            vColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n            textureN = textureNumber;\r\n            return;\r\n        }\r\n\r\n        float currentOpacity = 0.0;\r\n        if (fadeInSpeed == 0.0) {\r\n            currentOpacity = opacity;\r\n        }\r\n\r\n\r\n        if (fadeInSpeed > 0.0 && modGameTime > fadeInTime)\r\n        {\r\n            float fadeIn = (modGameTime - fadeInTime) / fadeInSpeed;\r\n        if (fadeIn > 1.0) fadeIn = 1.0;\r\n            currentOpacity =  opacity * fadeIn;\r\n        }\r\n\r\n        if (fadeOutSpeed > 0.0 && modGameTime > fadeOutTime)\r\n        {\r\n            float fadeOut = (modGameTime - fadeOutTime) / fadeOutSpeed;\r\n        if (fadeOut > 1.0) fadeOut = 1.0;\r\n            currentOpacity =  currentOpacity * (1.0 - fadeOut);\r\n        }\r\n\r\n        if ( currentOpacity > 0.0 && elapsedTime >= 0.0)\r\n        {\r\n            float sineAmplitude = sine - floor(sine);\r\n            float sineFrequency = floor(sine);\r\n\r\n            if (sineFrequency > 0.0) {\r\n                currentOpacity *= (sineAmplitude * 0.5 * sin(elapsedTime/sineFrequency) + sineAmplitude);\r\n            }\r\n            \r\n            vColor = vec4( color, currentOpacity );\r\n        } else {\r\n            vColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n        }\r\n\r\n        vec2 angleData = getAngleAndChange();\r\n        vAngle = angleData.x + angleData.y * elapsedTime;\r\n        textureN = textureNumber;\r\n\r\n        vec3 displacement = velocity * elapsedTime;\r\n        vec3 accelerationDisplacement  = elapsedTime * elapsedTime * 0.5 * acceleration;\r\n\r\n        vec3 modPos = position + displacement + accelerationDisplacement;\r\n\r\n\r\n        gl_PointSize = clamp(size + (sizeChange * elapsedTime), 0.0, 1024.0) * zoomLevel;\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( modPos, 1.0 );\r\n    }\r\n`;\r\n\r\nexport default effectVertexShader;\r\n","const effectFragmentShader = `\r\n    uniform sampler2D texture;\r\n    varying vec4 vColor;\r\n    varying float vAngle;\r\n    varying float textureN;\r\n    void main()\r\n    {\r\n        gl_FragColor = vColor;\r\n        if (gl_FragColor.a == 0.0) {\r\n            return;\r\n        }\r\n\r\n        float c = cos(vAngle);\r\n        float s = sin(vAngle);\r\n        float textureAmount = 8.0;\r\n        vec2 tPos = vec2((mod(textureN, textureAmount) * (1.0 / textureAmount)), (floor(textureN / textureAmount) * (1.0 / textureAmount)));\r\n\r\n        vec2 pos = vec2(gl_PointCoord.x, gl_PointCoord.y);\r\n        vec2 tCen = vec2(0.5, 0.5);\r\n\r\n        vec2 rPos = vec2(\r\n            tCen.x + c * (pos.x - tCen.x) - s * (pos.y - tCen.y),\r\n            tCen.y + s * (pos.x - tCen.x) + c * (pos.y - tCen.y)\r\n        );\r\n\r\n        rPos = clamp(rPos, 0.0, 1.0);\r\n\r\n        vec2 finalPos = vec2(\r\n            (rPos.x / textureAmount + tPos.x),\r\n            1.0 - (rPos.y / textureAmount + tPos.y)\r\n        );\r\n\r\n        vec4 rotatedTexture = texture2D(texture, finalPos);\r\n        gl_FragColor = gl_FragColor * rotatedTexture;\r\n    }\r\n`;\r\n\r\nexport default effectFragmentShader;\r\n","const spriteFragmentShader = `\r\n    uniform sampler2D texture;\r\n    uniform float overlayAlpha;\r\n    uniform vec3 overlayColor;\r\n    uniform float opacity;\r\n\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n        vec4 textureColor = texture2D(texture, vUv);\r\n        vec4 finalColor = textureColor;\r\n\r\n        if (overlayAlpha > 0.0 && textureColor.a > 0.0){\r\n            //finalColor = vec4(overlayColor, textureColor.a);\r\n            //finalColor = mix(textureColor, overlayColor, overlayAlpha);\r\n            //finalColor = (1.0 - t1.a) * t0 + t1.a * t1;\r\n            finalColor = (1.0 - overlayAlpha) * textureColor + overlayAlpha * vec4(overlayColor, 1.0);\r\n            finalColor.a = textureColor.a;\r\n        }\r\n\r\n        if (finalColor.a > 0.0) {\r\n            finalColor.a *= opacity;\r\n        }\r\n\r\n        gl_FragColor = finalColor;\r\n    }\r\n`;\r\n\r\nexport default spriteFragmentShader;\r\n","const spriteVertexShader = `\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n        vUv = uv;\r\n\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\r\n    }\r\n`;\r\n\r\nexport default spriteVertexShader;\r\n","const lineFragmentShader = `\r\n\r\n    uniform float time;\r\n    varying vec3 vColor;\r\n    varying vec2 vUv;\r\n    varying float vOpacity;\r\n    varying float vDashRatio;\r\n    varying vec2 vPulse;\r\n\r\n    vec4 getPulse(vec4 color) {\r\n        float pulseAmount = vPulse.x;\r\n        float pulseSpeed = vPulse.y;\r\n\r\n        if (pulseAmount == 0.0 || pulseSpeed == 0.0) {\r\n            return color;\r\n        }\r\n\r\n        float pulseTime = mod(time * pulseSpeed, 1.0);\r\n        float y = mod(vUv.y * pulseAmount, 1.0);\r\n   \r\n        float diff = y - pulseTime;\r\n        if (diff < 0.0) {\r\n            diff = 1.0 + diff;\r\n        }\r\n\r\n        if (diff > 0.9) {\r\n            diff = 1.0 - ((diff - 0.9) * 10.0);\r\n        }\r\n    \r\n        color += diff * 0.1;\r\n\r\n        return color;\r\n    }\r\n\r\n    vec4 blendSides(vec4 color) {\r\n        float treshold = 0.4;\r\n        if (vUv.x < treshold) {\r\n            color.a *= vUv.x * 1.0 / treshold;\r\n        } else if (vUv.x > 1.0 - treshold) {\r\n            color.a *= (1.0 - vUv.x) * 1.0 / treshold;;\r\n        }\r\n\r\n        return color;\r\n    }\r\n\r\n    vec4 getDashedColor(vec4 color) {\r\n\r\n        if (vDashRatio == 0.0) {\r\n            return color;\r\n        }\r\n\r\n        float y = vUv.y;\r\n\r\n        if ( mod(floor(y * 10.0 / (vDashRatio * 10.0)), 2.0) == 0.0 ) {\r\n            discard;\r\n        }\r\n\r\n        float modulus = mod(y, vDashRatio) / vDashRatio;\r\n        if (modulus < 0.2) {\r\n            color.a *= modulus * 5.0;\r\n        } else if (modulus > 0.8) {\r\n            color.a *= (1.0 - modulus) * 5.0;\r\n        }\r\n\r\n        return color;\r\n    }\r\n\r\n    void main() {\r\n        vec4 finalColor = vec4(vColor, 1.0);\r\n\r\n        if (finalColor.a > 0.0) {\r\n            finalColor.a *= vOpacity;\r\n        }\r\n\r\n        finalColor = getDashedColor(finalColor);\r\n        finalColor = blendSides(finalColor);\r\n        finalColor = getPulse(finalColor);\r\n       \r\n        gl_FragColor = finalColor; \r\n    }\r\n`;\r\n\r\nexport default lineFragmentShader;\r\n","const lineVertexShader = `\r\n\r\n    attribute vec3 color;\r\n    attribute float opacity;\r\n    attribute float dashRatio;\r\n    attribute vec2 pulse;\r\n    varying float vOpacity;\r\n    varying vec3 vColor;\r\n    varying vec2 vUv;\r\n    varying float vDashRatio;\r\n    varying vec2 vPulse;\r\n\r\n    void main() {\r\n        vUv = uv;\r\n        vColor = color;\r\n        vPulse = pulse;\r\n        vOpacity = opacity;\r\n        vDashRatio = dashRatio;\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\r\n    }\r\n`;\r\n\r\nexport default lineVertexShader;\r\n","const boltVertexShader = `\n    precision highp float;\n    uniform mat4 modelMatrix;\n    uniform mat4 viewMatrix;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform float gameTime;\n    uniform float zoomLevel;\n    attribute vec3 position;\n    attribute vec3 offset;\n    attribute float opacity;\n    attribute vec2 uv;\n    attribute float textureNumber;\n    attribute vec3 scale;\n    attribute vec4 quaternion;\n    attribute vec3 color;\n    attribute vec3 velocity;\n    attribute float activationGameTime;\n    attribute float deactivationGameTime;\n    attribute float deactivationFade;\n    attribute float repeat;\n    varying float vActivationGameTime;\n    varying float vDeactivationGameTime;\n    varying vec3 vColor;\n    varying vec2 vUv;\n    varying float vOpacity;\n    varying float vRepeat;\n\n    float getGameTime() {\n        float modGameTime = gameTime;\n        if (repeat > 0.0) {\n            modGameTime = gameTime - (repeat * floor(gameTime/repeat));\n        }\n\n        return modGameTime;\n    }\n\n    float getScale() {\n        return 1.0;\n    }\n\n    vec2 resolveUv() {\n        float textureAmount = 8.0;\n        vec2 tPos = vec2(\n            (mod(textureNumber, textureAmount) * (1.0 / textureAmount)),\n            (floor(textureNumber / textureAmount) * (1.0 / textureAmount))\n        );\n        \n        vec2 finalPos = vec2((uv.x / textureAmount + tPos.x), 1.0 - (uv.y / textureAmount + tPos.y));\n\n        return finalPos;\n    }\n\n    // http://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\n    vec3 applyQuaternionToVector(vec3 v ){\n        return v + 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, v ) + quaternion.w * v );\n    }\n\n    float getTimeToEnd() {\n        float speed = length(velocity);\n\n        if (speed > 0.0) {  \n            float length = scale.x;\n            float timeToEnd = length / speed;\n            return timeToEnd ;\n        } else {  \n            return 0.0;\n        }\n    }\n\n    float getFadeOpacity() {\n\n        float modGameTime = getGameTime();\n\n        if (deactivationFade == 0.0) {\n            return 1.0;\n        }\n\n        if (modGameTime < (deactivationGameTime - deactivationFade)) {\n            return 1.0;\n        }\n\n        float fade = modGameTime - (deactivationGameTime - deactivationFade);\n\n        if (fade > deactivationFade) {\n            fade = deactivationFade;\n        }\n\n        float ratio = fade / deactivationFade;\n\n        return 1.0 - ratio;\n        \n    }\n\n    int active(float vertexDeltaTime) {\n        \n        float modGameTime = getGameTime();\n\n        if (opacity == 0.0) {\n            return 0;\n        }\n\n        if (activationGameTime > modGameTime) {\n            return 0;\n        }\n\n        if (deactivationGameTime + vertexDeltaTime < modGameTime) {\n            return 0;\n        }\n        \n        return 1;\n    }\n\n    void main() {\n\n        float timeToEnd = getTimeToEnd();\n\n        if (active(timeToEnd) == 0) {\n            gl_Position = vec4(0.0);\n            vOpacity = 0.0;\n            return;\n        }\n\n        float currentOpacity = opacity;\n\n        if (zoomLevel < 1.0) {\n            currentOpacity += (1.0 - zoomLevel) * 0.5;\n        }\n\n        float modGameTime = getGameTime();\n\n        float elapsedTime = modGameTime - activationGameTime;\n\n        vOpacity = currentOpacity * getFadeOpacity();\n        vUv = resolveUv();\n        vColor = color;\n        vActivationGameTime = activationGameTime + timeToEnd * uv.y;\n        vDeactivationGameTime = deactivationGameTime + timeToEnd * uv.y;\n        \n\n        vRepeat = repeat;\n        \n        gl_Position = projectionMatrix * modelViewMatrix * vec4((offset + velocity * elapsedTime) + applyQuaternionToVector(position * scale), 1.0 );      \n     \n        //gl_Position = projectionMatrix * modelViewMatrix * vec4( offset + applyQuaternionToVector(position) * scale, 1.0 );      \n      }\n\n`;\n\nexport default boltVertexShader;\n","const boltFragmentShader = `\r\n    precision highp float;\r\n    uniform sampler2D map;\r\n    uniform float gameTime;\r\n    varying vec2 vUv;\r\n    varying float vOpacity;\r\n    varying vec3 vColor;\r\n    varying float vActivationGameTime;\r\n    varying float vDeactivationGameTime;\r\n    varying float vRepeat;\r\n\r\n    float getGameTime() {\r\n        float modGameTime = gameTime;\r\n        if (vRepeat > 0.0) {\r\n            modGameTime = gameTime - (vRepeat * floor(gameTime/vRepeat));\r\n        }\r\n\r\n        return modGameTime;\r\n    }\r\n\r\n    void main() {\r\n\r\n        float modGameTime = getGameTime();\r\n\r\n        if (vOpacity == 0.0) {\r\n            discard;\r\n        }\r\n\r\n        if (vActivationGameTime > modGameTime) {\r\n            discard;\r\n        }\r\n\r\n        if (vDeactivationGameTime < modGameTime) {\r\n            discard;\r\n        }\r\n\r\n        vec4 finalColor = vec4(vColor.rgb, texture2D(map, vUv).a * vOpacity);\r\n        gl_FragColor = finalColor;\r\n    }\r\n`;\r\n\r\nexport default boltFragmentShader;\r\n","const line2dVertexShader = `\r\n    precision highp float;\r\n    uniform mat4 modelMatrix;\r\n    uniform mat4 viewMatrix;\r\n    uniform mat4 modelViewMatrix;\r\n    uniform mat4 projectionMatrix;\r\n    uniform vec3 color;\r\n    uniform float opacity;\r\n    attribute vec3 position;\r\n    attribute vec2 uv;\r\n    varying vec2 vUv;\r\n    varying float vOpacity;\r\n    varying vec3 vColor;\r\n\r\n    void main() {\r\n       \r\n        vUv = uv;\r\n        vOpacity = opacity;\r\n        vColor = color;\r\n        /*\r\n        vPulse = pulse;\r\n        vDashRatio = dashRatio;\r\n        */\r\n       \r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \r\n    }\r\n`;\r\n\r\nexport default line2dVertexShader;\r\n","const line2dFragmentShader = `\r\n    precision highp float;\r\n    uniform sampler2D map;\r\n    uniform float textureRepeat;\r\n    uniform vec2 pulse;\r\n    uniform float time;\r\n    varying vec2 vUv;\r\n    varying float vOpacity;\r\n    varying vec3 vColor;\r\n\r\n    vec4 getPulse(vec4 color) {\r\n        float pulseAmount = pulse.x;\r\n        float pulseSpeed = pulse.y;\r\n\r\n        if (pulseAmount == 0.0 || pulseSpeed == 0.0) {\r\n            return color;\r\n        }\r\n\r\n        float pulseTime = mod(time * pulseSpeed, 1.0);\r\n        float y = mod(vUv.y * pulseAmount, 1.0);\r\n   \r\n        float diff = y - pulseTime;\r\n        if (diff < 0.0) {\r\n            diff = 1.0 + diff;\r\n        }\r\n\r\n        if (diff > 0.9) {\r\n            diff = 1.0 - ((diff - 0.9) * 10.0);\r\n        }\r\n    \r\n        color.a *= 1.0 + (diff);\r\n\r\n        return color;\r\n    }\r\n\r\n    vec4 repeatTexture() {\r\n        vec2 textureUv = vec2(\r\n            vUv.x,\r\n            vUv.y * textureRepeat\r\n        );\r\n\r\n        return texture2D(map, textureUv);\r\n    }\r\n\r\n    void main() {\r\n       \r\n      \r\n        float finalOpacity = repeatTexture().a * vOpacity;\r\n        vec4 finalColor = vec4(vColor, finalOpacity);\r\n        gl_FragColor = getPulse(finalColor);\r\n        \r\n    }\r\n`;\r\n\r\nexport default line2dFragmentShader;\r\n","const effectSpriteFragmentShader = `\r\n    uniform sampler2D texture;\r\n    uniform vec3 overlayColor;\r\n    uniform float opacity;\r\n    uniform float textureNumber;\r\n\r\n    varying vec2 vUv;\r\n\r\n    vec4 sampleTexture() {\r\n        float textureAmount = 8.0;\r\n        vec2 tPos = vec2((mod(textureNumber, textureAmount) * (1.0 / textureAmount)), (floor(textureNumber / textureAmount) * (1.0 / textureAmount)));\r\n\r\n        vec2 finalPos = vec2(\r\n            (vUv.x / textureAmount + tPos.x),\r\n            1.0 - (vUv.y / textureAmount + tPos.y)\r\n        );\r\n\r\n        return texture2D(texture, finalPos);\r\n    }\r\n\r\n    void main() {\r\n        vec4 textureColor = sampleTexture();\r\n        vec4 finalColor = textureColor;\r\n\r\n        if (textureColor.a > 0.0){\r\n            //finalColor = vec4(overlayColor, textureColor.a);\r\n            //finalColor = mix(textureColor, overlayColor, overlayAlpha);\r\n            //finalColor = (1.0 - t1.a) * t0 + t1.a * t1;\r\n\r\n            finalColor =  textureColor * vec4(overlayColor, 1.0);\r\n            finalColor.a = textureColor.a;\r\n        }\r\n\r\n        if (finalColor.a > 0.0) {\r\n            finalColor.a *= opacity;\r\n        }\r\n\r\n        gl_FragColor = finalColor;\r\n    }\r\n`;\r\n\r\nexport default effectSpriteFragmentShader;\r\n","const effectSpriteVertexShader = `\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n        vUv = uv;\r\n\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\r\n    }\r\n`;\r\n\r\nexport default effectSpriteVertexShader;\r\n","import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\n\r\nconst loader = new GLTFLoader();\r\n\r\nconst entities = [];\r\n\r\nexport const cloneObject = (source, cloneMaterial = true) => {\r\n  const sourceLookup = new Map();\r\n  const cloneLookup = new Map();\r\n\r\n  const clone = source.scene.clone();\r\n  const animations = source.animations;\r\n\r\n  parallelTraverse(source.scene, clone, function(sourceNode, clonedNode) {\r\n    sourceLookup.set(clonedNode, sourceNode);\r\n    cloneLookup.set(sourceNode, clonedNode);\r\n  });\r\n\r\n  clone.traverse(function(node) {\r\n    if (!node.isSkinnedMesh) return;\r\n\r\n    const clonedMesh = node;\r\n    const sourceMesh = sourceLookup.get(node);\r\n    const sourceBones = sourceMesh.skeleton.bones;\r\n\r\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\r\n    clonedMesh.bindMatrix.copy(sourceMesh.bindMatrix);\r\n\r\n    clonedMesh.skeleton.bones = sourceBones.map(function(bone) {\r\n      return cloneLookup.get(bone);\r\n    });\r\n\r\n    clonedMesh.bind(clonedMesh.skeleton, clonedMesh.bindMatrix);\r\n  });\r\n\r\n  if (cloneMaterial) {\r\n    clone.traverse(node => {\r\n      if (node.isMesh) {\r\n        node.material = node.material.clone();\r\n      }\r\n    });\r\n  }\r\n\r\n  return { scene: clone, animations };\r\n};\r\n\r\nconst parallelTraverse = (a, b, callback) => {\r\n  callback(a, b);\r\n\r\n  for (var i = 0; i < a.children.length; i++) {\r\n    parallelTraverse(a.children[i], b.children[i], callback);\r\n  }\r\n};\r\n\r\nexport const loadObject = async url => {\r\n  const cached = entities.find(entity => entity.url === url);\r\n\r\n  if (cached) {\r\n    const object = await cached.value;\r\n    return cloneObject(object);\r\n  }\r\n\r\n  const entity = {\r\n    url: url,\r\n    value: new Promise((resolve, reject) => {\r\n      try {\r\n        loader.load(url, object => {\r\n          resolve(object);\r\n        });\r\n      } catch (e) {\r\n        throw new Error(`Unable to load asset ${url}`);\r\n      }\r\n    })\r\n  };\r\n\r\n  entities.push(entity);\r\n\r\n  const object = await entity.value;\r\n  return cloneObject(object);\r\n};\r\n","import * as THREE from \"three\";\n\nimport { line2dVertexShader, line2dFragmentShader } from \"../shader\";\nimport { loadObject } from \"../../utils/objectLoader\";\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\n\nconst GEOMETRY = loadObject(\"/img/3d/line3/scene.gltf\");\n\nconst getTexture = (type = \"\") => {\n  switch (type) {\n    case \"dashed\":\n      return new THREE.TextureLoader().load(\"/img/line/dash.png\");\n    case \"dashed-arrow\":\n      return new THREE.TextureLoader().load(\"/img/line/dashArrow.png\");\n    case \"dashed-circle\":\n      return new THREE.TextureLoader().load(\"/img/line/dashCircle.png\");\n    default:\n      return new THREE.TextureLoader().load(\"/img/line/full.png\");\n  }\n};\n\nclass LineSprite {\n  constructor(start, end, lineWidth, args = {}) {\n    this.args = args;\n    this.mesh = null;\n\n    this.color = args.color || new THREE.Color(1, 1, 1);\n    this.opacity = args.opacity || 1;\n\n    this.material = new THREE.RawShaderMaterial({\n      uniforms: {\n        map: {\n          value: getTexture(args.type)\n        },\n        time: { type: \"f\", value: 0.0 },\n        zoom: { type: \"f\", value: 0.0 },\n        color: { type: \"v3\", value: this.color },\n        opacity: { type: \"f\", value: this.opacity },\n        textureRepeat: { type: \"f\", value: 1.0 },\n        pulse: {\n          type: \"v2\",\n          value: [args.pulseAmount || 0, args.pulseSpeed || 1]\n        }\n      },\n      transparent: true,\n      depthWrite: false,\n      depthTest: true,\n      side: THREE.DoubleSide,\n      blending: args.blending || THREE.NormalBlending,\n      vertexShader: line2dVertexShader,\n      fragmentShader: line2dFragmentShader\n      //wireframe: true\n    });\n\n    this.start = start;\n    this.end = end;\n    this.lineWidth = lineWidth;\n\n    this.create();\n    this.update(start, end, lineWidth, true);\n    this.animate();\n  }\n\n  animate() {\n    const now = Date.now();\n    this.material.uniforms.time.value = (now % 1000) * 0.001;\n    this.material.needsUpdate = true;\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  async addTo(scene) {\n    this.scene = scene;\n    await GEOMETRY;\n    scene.add(this.mesh);\n  }\n\n  async create() {\n    this.material.uniforms.map.value.wrapT = THREE.RepeatWrapping;\n    this.material.uniforms.map.value.minFilter =\n      this.args.minFilter || THREE.LinearMipmapNearestFilter;\n\n    this.material.needsUpdate = true;\n\n    const geometry = await GEOMETRY;\n    this.mesh = new THREE.Mesh(\n      geometry.scene.children[0].geometry.clone(),\n      this.material\n    );\n  }\n\n  async updateTextureSize(size) {\n    this.args.textureSize = size;\n    const distance = this.start.distanceTo(this.end);\n    let textureRepeat = this.args.textureSize\n      ? distance / this.args.textureSize\n      : 1;\n\n    if (this.args.roundTestureRepeate) {\n      textureRepeat = Math.round(textureRepeat);\n    }\n\n    this.material.uniforms.textureRepeat.value = textureRepeat;\n  }\n\n  async update(start, end, lineWidth = 1, force) {\n    await GEOMETRY;\n\n    if (lineWidth !== this.lineWidth || force) {\n      this.mesh.scale.setY(this.lineWidth);\n    }\n\n    if (!start.equals(this.start) || !end.equals(this.end) || force) {\n      const direction = end.sub(start);\n\n      this.mesh.quaternion.setFromUnitVectors(\n        new THREE.Vector3(1, 0, 0).normalize(),\n        direction.normalize()\n      );\n\n      const distance = start.distanceTo(end);\n      this.mesh.scale.setX(distance);\n      const position = start.add(direction.multiplyScalar(0.5));\n      this.mesh.position.set(position.x, position.y, position.z);\n      let testureRepeat = this.args.textureSize\n        ? distance / this.args.textureSize\n        : 1;\n\n      if (this.args.roundTestureRepeate) {\n        testureRepeat = Math.round(testureRepeat);\n      }\n      this.material.uniforms.textureRepeat.value = testureRepeat;\n      this.material.needsUpdate = true;\n    }\n\n    this.start = start;\n    this.end = end;\n    this.lineWidth = lineWidth;\n\n    return this;\n  }\n\n  render(zoom) {\n    /*\n    if (zoom > 1) {\n      this.material.uniforms.opacity.value =\n        this.opacity * (1 + (zoom - 1) * 0.5);\n    }\n    */\n    //this.mesh.scale.setY(this.lineWidth * (zoom * 0.5));\n    /*\n    const distance = this.start.distanceTo(this.end) / zoom;\n\n    this.material.uniforms.textureRepeat.value = this.args.textureSize\n      ? distance / this.args.textureSize\n      : 1;\n      */\n  }\n\n  async hide() {\n    await GEOMETRY;\n    this.mesh.visible = false;\n    return this;\n  }\n\n  async show() {\n    await GEOMETRY;\n    this.mesh.visible = true;\n    return this;\n  }\n\n  async destroy() {\n    await GEOMETRY;\n    this.scene.remove(this.mesh);\n    this.mesh.material.dispose();\n  }\n}\n\nexport default LineSprite;\n","import * as THREE from \"three\";\nimport { spriteFragmentShader, spriteVertexShader } from \"../shader\";\nimport {\n  degreeToRadian,\n  radianToDegree\n} from \"../../../../../model/utils/math\";\n\nconst textureLoader = new THREE.TextureLoader();\nconst geometries = {};\n\nconst baseMaterial = new THREE.ShaderMaterial({\n  vertexShader: spriteVertexShader,\n  fragmentShader: spriteFragmentShader,\n  transparent: true,\n  depthWrite: false\n});\n\nclass Sprite {\n  constructor(image, size, z) {\n    this.z = z || 0;\n    this.mesh = null;\n    this.size = size;\n    this.opacity = 1;\n    this.uniforms = {\n      texture: { type: \"t\", value: new THREE.DataTexture(null, 0, 0) },\n      overlayAlpha: { type: \"f\", value: 0.0 },\n      overlayColor: { type: \"v3\", value: new THREE.Color(0, 0, 0) },\n      opacity: { type: \"f\", value: 1.0 }\n    };\n\n    this.color = null;\n\n    this.mesh = this.create(size, image);\n  }\n\n  getMaterial() {\n    return baseMaterial;\n  }\n\n  hide() {\n    this.mesh.visible = false;\n    return this;\n  }\n\n  show() {\n    this.mesh.visible = true;\n    return this;\n  }\n\n  replaceColor(color) {\n    this.uniforms.overlayColor.value = color;\n    return this;\n  }\n\n  revertColor() {\n    if (!this.color) {\n      return;\n    }\n\n    this.uniforms.overlayColor.value = this.color;\n  }\n\n  setPosition(pos) {\n    this.mesh.position.x = pos.x;\n    this.mesh.position.y = pos.y;\n    return this;\n  }\n\n  getPosition() {\n    return this.mesh.position;\n  }\n\n  isPosition(position) {\n    return (\n      this.mesh.position.x === position.x &&\n      this.mesh.position.y === position.y &&\n      this.mesh.position.z === position.z\n    );\n  }\n\n  setOpacity(opacity) {\n    this.opacity = opacity;\n    this.uniforms.opacity.value = opacity;\n    return this;\n  }\n\n  multiplyOpacity(m) {\n    this.uniforms.opacity.value = this.opacity * m;\n    return this;\n  }\n\n  setOverlayColorAlpha(alpha) {\n    this.uniforms.overlayAlpha.value = alpha;\n    return this;\n  }\n\n  setOverlayColor(color) {\n    this.color = color;\n    this.uniforms.overlayColor.value = color;\n    return this;\n  }\n\n  isOverlayColor(color) {\n    return (\n      this.color.r === color.r &&\n      this.color.g === color.g &&\n      this.color.b === color.b\n    );\n  }\n\n  setScale(width, height) {\n    this.mesh.scale.set(width, height, 1);\n    return this;\n  }\n\n  destroy() {\n    this.mesh.material.dispose();\n  }\n\n  setFacing(facing) {\n    this.mesh.rotation.z = degreeToRadian(facing);\n    return this;\n  }\n\n  getFacing() {\n    return radianToDegree(this.mesh.rotation.z);\n  }\n\n  create(size, image) {\n    const material = this.getMaterial();\n    const geometry =\n      geometries[\"\" + size.width + \"-\" + size.height] ||\n      (() => {\n        const geometry = new THREE.PlaneGeometry(size.width, size.height, 1, 1);\n        geometries[\"\" + size.width + \"-\" + size.height] = geometry;\n        return geometry;\n      })();\n\n    if (typeof image == \"string\") {\n      image = textureLoader.load(\"img/spritesheet.png\");\n    }\n\n    this.uniforms.texture.value = image;\n\n    this.material = material.clone();\n    this.material.uniforms = this.uniforms;\n\n    this.material.depthTest = true;\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.position.z = this.z;\n    return mesh;\n  }\n}\n\nexport default Sprite;\n","import * as mathlib from \"../../../../model/utils/math\";\r\n\r\nconst clearCanvas = canvasid => {\r\n  const canvas = document.getElementById(canvasid);\r\n  canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\r\n};\r\n\r\nconst clearContext = (context, canvas) => {\r\n  context.clearRect(0, 0, canvas.width, canvas.height);\r\n};\r\n\r\nconst clearSmallCanvas = context => {\r\n  context.clearRect(0, 0, 100, 100);\r\n};\r\n\r\nconst getCanvas = canvasid => {\r\n  //console.log(canvasid);\r\n  var canvas = document.getElementById(canvasid);\r\n  if (!canvas) {\r\n    console.log(\"Canvas is null\");\r\n    console.trace();\r\n    return null;\r\n  }\r\n\r\n  var context = canvas.getContext(\"2d\");\r\n  return context;\r\n};\r\n\r\nconst drawCone = (canvas, start, p1, p2, arcs, w) => {\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.moveTo(start.x, start.y);\r\n  canvas.lineTo(p1.x, p1.y);\r\n  canvas.arc(\r\n    start.x,\r\n    start.y,\r\n    mathlib.distance(start, p1),\r\n    mathlib.degreeToRadian(arcs.start),\r\n    mathlib.degreeToRadian(arcs.end),\r\n    false\r\n  );\r\n  //canvas.lineTo(start.x,start.y);\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawBox = (canvas, p, w, h, lw) => {\r\n  canvas.lineWidth = lw;\r\n  canvas.beginPath();\r\n  canvas.moveTo(p.x - w / 2, p.y + h / 2);\r\n  canvas.lineTo(p.x + w / 2, p.y + h / 2);\r\n  canvas.lineTo(p.x + w / 2, p.y - h / 2);\r\n  canvas.lineTo(p.x - w / 2, p.y - h / 2);\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawCircle = (canvas, x, y, r, w) => {\r\n  if (r < 1) r = 1;\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.arc(x, y, r, 0, Math.PI * 2, true);\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n};\r\n\r\nconst drawHollowCircleAndFill = (canvas, x, y, r, r2, w) => {\r\n  canvas.beginPath();\r\n  canvas.arc(x, y, r2, 0, Math.PI * 2, false); // outer (filled)\r\n  canvas.moveTo(x + r, y);\r\n  canvas.arc(x, y, r, 0, Math.PI * 2, true); // inner (unfills it)\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawEllipseSegment = (canvas, x, y, rx, ry, s, e) => {\r\n  canvas.beginPath();\r\n  //.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle [, anticlockwise]);\r\n  canvas.ellipse(x, y, rx, ry, 0, s, e, false);\r\n\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n};\r\n\r\nconst drawCircleSegment = (canvas, x, y, r, r2, s, e) => {\r\n  canvas.beginPath();\r\n  canvas.arc(x, y, r2, s, e, false); // outer (filled)\r\n\r\n  const p1 = mathlib.getPointInDirection(r, -mathlib.radianToDegree(e), x, y);\r\n  canvas.lineTo(p1.x, p1.y);\r\n  canvas.arc(x, y, r, e, s, true); // inner (unfills it)\r\n  const p2 = mathlib.getPointInDirection(r2, -mathlib.radianToDegree(s), x, y);\r\n  canvas.lineTo(p2.x, p2.y);\r\n\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawDottedCircle = (canvas, x, y, r, r2, segments, gapratio) => {\r\n  const deg = 360 / segments;\r\n  const gap = deg * gapratio;\r\n\r\n  for (let d = 0; d < 360; d += deg) {\r\n    drawCircleSegment(\r\n      canvas,\r\n      x,\r\n      y,\r\n      r,\r\n      r2,\r\n      mathlib.degreeToRadian(d),\r\n      mathlib.degreeToRadian(d + deg - gap)\r\n    );\r\n  }\r\n};\r\n\r\nconst drawFilledCircle = (canvas, x, y, r1, r2) => {\r\n  drawCircleSegment(\r\n    canvas,\r\n    x,\r\n    y,\r\n    r1,\r\n    r2,\r\n    mathlib.degreeToRadian(0),\r\n    mathlib.degreeToRadian(360)\r\n  );\r\n};\r\n\r\nconst drawFilledEllipse = (canvas, x, y, r1, r2) => {\r\n  drawEllipseSegment(\r\n    canvas,\r\n    x,\r\n    y,\r\n    r1,\r\n    r2,\r\n    mathlib.degreeToRadian(0),\r\n    mathlib.degreeToRadian(360)\r\n  );\r\n};\r\n\r\nconst drawCircleAndFill = (canvas, x, y, r, w) => {\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.arc(x, y, r, 0, Math.PI * 2, true);\r\n  canvas.closePath();\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawCircleNoStroke = (canvas, x, y, r, w) => {\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.arc(x, y, r, 0, Math.PI * 2, true);\r\n  canvas.closePath();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawLine = (canvas, x1, y1, x2, y2, w) => {\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.moveTo(x1, y1);\r\n  canvas.lineTo(x2, y2);\r\n  canvas.stroke();\r\n};\r\n\r\nconst drawArrow = (canvas, x, y, a, s, w) => {\r\n  var p1, p2, p3, p4, p5, p6, p7;\r\n\r\n  p1 = mathlib.getPointInDirection(s * 0.5, -a, x, y);\r\n  p2 = mathlib.getPointInDirection(\r\n    s * 0.5,\r\n    -mathlib.addToDirection(a, -140),\r\n    p1.x,\r\n    p1.y\r\n  );\r\n  p3 = mathlib.getPointInDirection(\r\n    s * 0.15,\r\n    -mathlib.addToDirection(a, 90),\r\n    p2.x,\r\n    p2.y\r\n  );\r\n  p4 = mathlib.getPointInDirection(\r\n    s * 0.5,\r\n    -mathlib.addToDirection(a, 180),\r\n    p3.x,\r\n    p3.y\r\n  );\r\n\r\n  p7 = mathlib.getPointInDirection(\r\n    s * 0.5,\r\n    -mathlib.addToDirection(a, 140),\r\n    p1.x,\r\n    p1.y\r\n  );\r\n  p6 = mathlib.getPointInDirection(\r\n    s * 0.15,\r\n    -mathlib.addToDirection(a, -90),\r\n    p7.x,\r\n    p7.y\r\n  );\r\n  p5 = mathlib.getPointInDirection(\r\n    s * 0.5,\r\n    -mathlib.addToDirection(a, 180),\r\n    p6.x,\r\n    p6.y\r\n  );\r\n\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.moveTo(p1.x, p1.y);\r\n  canvas.lineTo(p2.x, p2.y);\r\n  canvas.lineTo(p3.x, p3.y);\r\n  canvas.lineTo(p4.x, p4.y);\r\n  canvas.lineTo(p5.x, p5.y);\r\n  canvas.lineTo(p6.x, p6.y);\r\n  canvas.lineTo(p7.x, p7.y);\r\n  canvas.closePath();\r\n  canvas.fill();\r\n  canvas.stroke();\r\n};\r\n\r\nconst drawX = (canvas, x, y, l, w) => {\r\n  x = parseInt(x);\r\n  y = parseInt(y);\r\n  l = parseInt(l);\r\n\r\n  canvas.lineWidth = w;\r\n  canvas.beginPath();\r\n  canvas.moveTo(x - l, y - l);\r\n  canvas.lineTo(x + l, y + l);\r\n  canvas.stroke();\r\n\r\n  canvas.beginPath();\r\n  canvas.moveTo(x - l, y + l);\r\n  canvas.lineTo(x + l, y - l);\r\n  canvas.stroke();\r\n};\r\n\r\nconst drawCenteredHexagon = (canvas, x, y, l, leftside, topleft, topright) => {\r\n  const a = l * Math.sin((30 / 180) * Math.PI);\r\n  const b = l * Math.cos((30 / 180) * Math.PI);\r\n\r\n  x = x - b;\r\n  y = y - a * 2;\r\n  drawHexagon(canvas, x, y, l, leftside, topleft, topright);\r\n};\r\n\r\nconst drawHexagon = (canvas, x, y, l, leftside, topleft, topright) => {\r\n  const a = l * Math.sin((30 / 180) * Math.PI);\r\n  const b = l * Math.cos((30 / 180) * Math.PI);\r\n\r\n  let p1, p2, p3, p4, p5, p6;\r\n\r\n  p1 = { x: x, y: y + a + l };\r\n  p2 = { x: x, y: y + a };\r\n  p3 = { x: x + b, y: y };\r\n  p4 = { x: x + 2 * b, y: y + a };\r\n  p5 = { x: x + 2 * b, y: y + a + l };\r\n  p6 = { x: x + b, y: y + 2 * l };\r\n\r\n  canvas.beginPath();\r\n\r\n  if (leftside) {\r\n    canvas.moveTo(p1.x, p1.y);\r\n    canvas.lineTo(p2.x, p2.y);\r\n  } else {\r\n    canvas.moveTo(p2.x, p2.y);\r\n  }\r\n\r\n  if (topleft) {\r\n    canvas.lineTo(p3.x, p3.y);\r\n  } else {\r\n    canvas.moveTo(p3.x, p3.y);\r\n  }\r\n\r\n  if (topright) {\r\n    canvas.lineTo(p4.x, p4.y);\r\n  } else {\r\n    canvas.moveTo(p4.x, p4.y);\r\n  }\r\n\r\n  canvas.lineTo(p5.x, p5.y);\r\n  canvas.lineTo(p6.x, p6.y);\r\n  canvas.lineTo(p1.x, p1.y);\r\n  canvas.closePath();\r\n\r\n  canvas.stroke();\r\n  canvas.fill();\r\n};\r\n\r\nconst drawAndRotate = (canvas, w, h, iw, ih, angle, img, rolled) => {\r\n  const x = Math.round(w / 2);\r\n  const y = Math.round(h / 2);\r\n  const width = iw / 2;\r\n  const height = ih / 2;\r\n\r\n  if (rolled) angle = 360 - angle;\r\n\r\n  angle = (angle * Math.PI) / 180;\r\n  canvas.save();\r\n  canvas.translate(x, y);\r\n  if (rolled) canvas.scale(1, -1);\r\n  canvas.rotate(angle);\r\n  canvas.drawImage(img, -width / 2, -height / 2, width, height);\r\n  canvas.rotate(-angle);\r\n  canvas.translate(-x, -y);\r\n  canvas.restore();\r\n};\r\n\r\nexport {\r\n  clearCanvas,\r\n  clearContext,\r\n  clearSmallCanvas,\r\n  getCanvas,\r\n  drawCone,\r\n  drawBox,\r\n  drawCircle,\r\n  drawHollowCircleAndFill,\r\n  drawDottedCircle,\r\n  drawCircleSegment,\r\n  drawCircleAndFill,\r\n  drawFilledCircle,\r\n  drawCircleNoStroke,\r\n  drawLine,\r\n  drawArrow,\r\n  drawX,\r\n  drawCenteredHexagon,\r\n  drawHexagon,\r\n  drawAndRotate,\r\n  drawFilledEllipse\r\n};\r\n","const create = (width, height, debug) => {\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  canvas.style.zIndex = 1000;\r\n  canvas.style.position = \"absolute\";\r\n  canvas.style.top = \"3px\";\r\n  canvas.style.left = \"3px\";\r\n  canvas.style.border = \"1px solid red\";\r\n\r\n  if (debug) {\r\n    document.body.appendChild(canvas);\r\n  }\r\n\r\n  return canvas;\r\n};\r\n\r\nexport default {\r\n  create\r\n};\r\n","import * as THREE from \"three\";\r\nimport { drawCenteredHexagon } from \"../../utils/graphics\";\r\nimport abstractCanvas from \"../../utils/abstractCanvas\";\r\nimport HexagonMath from \"../../../../../model/utils/HexagonMath\";\r\n\r\nconst createCanvas = (width, height, debug) => {\r\n  return abstractCanvas.create(width, height, debug);\r\n};\r\n\r\nconst getTexture = function(canvas, gridWidth, gridHeight) {\r\n  if (gridWidth === undefined) {\r\n    gridWidth = 1;\r\n  }\r\n\r\n  if (gridHeight === undefined) {\r\n    gridHeight = 1;\r\n  }\r\n\r\n  var texture = new THREE.Texture(canvas);\r\n  texture.needsUpdate = true;\r\n  texture.wrapS = THREE.RepeatWrapping;\r\n  texture.wrapT = THREE.RepeatWrapping;\r\n  texture.repeat.set(\r\n    getHorizontalRepeat(gridWidth),\r\n    getVerticalRepeat(gridHeight)\r\n  );\r\n\r\n  texture.offset.set(0, 0.16666);\r\n\r\n  return texture;\r\n};\r\n\r\nconst getHorizontalRepeat = hexagons => 3 / 4 + ((hexagons - 1) * 2) / 4;\r\n\r\nconst getVerticalRepeat = hexagons => 4 / 6 + ((hexagons - 1) * 3) / 6;\r\n\r\nconst renderHexGrid = (canvasSize, lineColor, fillColor, lineWidth, repeat) => {\r\n  var scale = { x: 1, y: 1 };\r\n  var width = canvasSize;\r\n  var hl = width / 4 / Math.cos((30 / 180) * Math.PI);\r\n  var a = HexagonMath.getHexA(hl);\r\n  var b = HexagonMath.getHexB(hl);\r\n  var x = b;\r\n\r\n  var height = HexagonMath.getTextureHeight(hl);\r\n\r\n  var canvas = createCanvas(width, height, false);\r\n  var context = canvas.getContext(\"2d\", { antialias: true });\r\n  context.fillStyle = lineColor;\r\n  context.strokeStyle = lineColor;\r\n  context.fillStyle = fillColor;\r\n  context.lineWidth = lineWidth;\r\n\r\n  context.scale(scale.x, scale.y);\r\n\r\n  if (repeat) {\r\n    drawCenteredHexagon(context, x, 0, hl, true, true, true);\r\n    drawCenteredHexagon(context, x * 3, 0, hl, true, true, true);\r\n  }\r\n\r\n  drawCenteredHexagon(context, x * 2, hl + a, hl, true, true, true);\r\n\r\n  if (repeat) {\r\n    drawCenteredHexagon(context, x, hl * 3, hl, true, true, true);\r\n    drawCenteredHexagon(context, x * 3, hl * 3, hl, true, true, true);\r\n  }\r\n\r\n  var canvas2 = createCanvas(width, width, false);\r\n\r\n  canvas2\r\n    .getContext(\"2d\", { antialias: true })\r\n    .drawImage(canvas, 0, 0, width, height, 0, 0, width, width);\r\n\r\n  return canvas2;\r\n};\r\n\r\nconst getHexGridTexture = (\r\n  canvasSize,\r\n  gridWidth,\r\n  gridHeight,\r\n  lineColor,\r\n  fillColor,\r\n  lineWidth\r\n) => {\r\n  return getTexture(\r\n    renderHexGrid(canvasSize, lineColor, fillColor, lineWidth, true),\r\n    gridWidth,\r\n    gridHeight\r\n  );\r\n};\r\n\r\nconst getHexTexture = (canvasSize, lineColor, fillColor, lineWidth) => {\r\n  return getTexture(\r\n    renderHexGrid(canvasSize, lineColor, fillColor, lineWidth),\r\n    1,\r\n    1\r\n  );\r\n};\r\n\r\nexport default {\r\n  renderHexGrid,\r\n  getHexGridTexture,\r\n  getHexTexture\r\n};\r\n","import Sprite from \"./Sprite\";\nimport * as THREE from \"three\";\nimport HexagonTexture from \"../hexgrid/HexagonTexture\";\nimport HexagonMath from \"../../../../../model/utils/HexagonMath\";\n\nconst TEXTURE_SIZE = 512;\nlet TEXTURE = null;\n\nconst createTexture = () => {\n  const canvas = HexagonTexture.renderHexGrid(\n    TEXTURE_SIZE,\n    getStrokeColor(),\n    getFillColor(),\n    10\n  );\n\n  const tex = new THREE.Texture(canvas);\n  tex.needsUpdate = true;\n  TEXTURE = tex;\n};\n\nconst getStrokeColor = () => {\n  return \"rgba(255,255,255,0.50)\";\n};\n\nconst getFillColor = () => {\n  return \"rgba(255,255,255,0.15)\";\n};\n\nclass HexagonSprite extends Sprite {\n  constructor(position, z = 0, scale = 1) {\n    super(\n      null,\n      {\n        width: HexagonMath.getTextureWidth() * scale,\n        height: HexagonMath.getTextureHeight() * scale\n      },\n      z\n    );\n\n    if (!TEXTURE) {\n      createTexture();\n    }\n\n    this.uniforms.texture.value = TEXTURE;\n\n    this.setPosition(position);\n  }\n}\n\nexport default HexagonSprite;\n","import * as THREE from \"three\";\nimport Sprite from \"./Sprite\";\nimport abstractCanvas from \"../../utils/abstractCanvas\";\nimport { drawFilledEllipse } from \"../../utils/graphics\";\n\nconst TEXTURE_SIZE = 1028;\n\nconst getDEWWidth = (DEW) => {\n  if (DEW === 0) {\n    return 0;\n  }\n\n  return DEW * 3 + 5;\n};\n\nconst getEvasionWidth = (evasion) => {\n  if (evasion === 0) {\n    return 0;\n  }\n\n  return evasion * 3 + 5;\n};\n\nconst getCCEWWidth = (CCEW) => {\n  if (CCEW === 0) {\n    return 0;\n  }\n\n  return CCEW * 3 + 5;\n};\n\nconst drawDEW = (context, DEW, ratios) => {\n  if (!DEW) {\n    return;\n  }\n\n  var a = 0.4;\n\n  if (DEW < 3) {\n    a = 0.7;\n  }\n\n  context.strokeStyle = \"rgba(144,185,208, 0.7)\";\n  context.lineWidth = getDEWWidth(DEW);\n\n  const { r1, r2 } = getDEWRadiuses(DEW, ratios);\n  drawFilledEllipse(context, TEXTURE_SIZE / 2, TEXTURE_SIZE / 2, r1, r2);\n};\n\nconst getDEWRadiuses = (DEW, ratios) => {\n  return {\n    r1: (TEXTURE_SIZE * 0.7 * ratios.x) / 2 + getDEWWidth(DEW),\n    r2: (TEXTURE_SIZE * 0.7 * ratios.y) / 2 + getDEWWidth(DEW),\n  };\n};\n\nconst getCCEWRadiuses = (DEW, evasion, CCEW, ratios) => {\n  const { r1, r2 } = getDEWRadiuses(DEW, ratios);\n\n  return {\n    r1:\n      r1 +\n      getDEWWidth(DEW) / 2 +\n      15 +\n      getEvasionWidth(evasion) / 2 +\n      15 +\n      getCCEWWidth(CCEW) / 2,\n    r2:\n      r2 +\n      getDEWWidth(DEW) / 2 +\n      15 +\n      getEvasionWidth(evasion) / 2 +\n      15 +\n      getCCEWWidth(CCEW) / 2,\n  };\n};\n\nconst getEvasionRadiuses = (DEW, evasion, ratios) => {\n  const { r1, r2 } = getDEWRadiuses(DEW, ratios);\n\n  return {\n    r1: r1 + getDEWWidth(DEW) / 2 + 15 + getEvasionWidth(evasion) / 2,\n    r2: r2 + getDEWWidth(DEW) / 2 + 15 + getEvasionWidth(evasion) / 2,\n  };\n};\n\nconst drawEvasion = (context, DEW, evasion, ratios) => {\n  if (!evasion) {\n    return;\n  }\n\n  var a = 0.7;\n\n  if (evasion < 3) {\n    a = 0.9;\n  }\n\n  context.strokeStyle = \"rgba(20,140,128, 0.9)\";\n  context.lineWidth = getEvasionWidth(evasion);\n  context.setLineDash([15, 5]);\n\n  const { r1, r2 } = getEvasionRadiuses(DEW, evasion, ratios);\n  drawFilledEllipse(context, TEXTURE_SIZE / 2, TEXTURE_SIZE / 2, r1, r2);\n\n  context.setLineDash([]);\n};\n\nconst drawCCEW = (context, DEW, evasion, CCEW, ratios) => {\n  if (!CCEW) {\n    return;\n  }\n\n  var a = 0.7;\n\n  if (CCEW < 3) {\n    a = 0.9;\n  }\n\n  context.strokeStyle = \"rgba(20,80,128, 0.9)\";\n  context.lineWidth = getCCEWWidth(CCEW);\n  context.setLineDash([15, 5]);\n\n  const { r1, r2 } = getCCEWRadiuses(DEW, evasion, CCEW, ratios);\n  drawFilledEllipse(context, TEXTURE_SIZE / 2, TEXTURE_SIZE / 2, r1, r2);\n\n  context.setLineDash([]);\n};\n\nclass ShipEWSprite extends Sprite {\n  constructor(size, z, dimensions) {\n    super(null, size, z);\n    this.DEW = 0;\n    this.CCEW = 0;\n    this.dimensions = dimensions;\n  }\n\n  calculateRadiusRatios() {\n    const max =\n      this.dimensions.x > this.dimensions.y\n        ? this.dimensions.x\n        : this.dimensions.y;\n\n    const ratios = {\n      x: this.dimensions.x / max,\n      y: this.dimensions.y / max,\n    };\n\n    return ratios;\n  }\n\n  update(DEW, CCEW, evasion) {\n    if (this.DEW === DEW && this.CCEW === CCEW && this.evasion === evasion) {\n      return;\n    }\n\n    this.DEW = DEW;\n    this.CCEW = CCEW;\n    this.evasion = evasion;\n\n    const canvas = abstractCanvas.create(TEXTURE_SIZE, TEXTURE_SIZE);\n    const context = canvas.getContext(\"2d\");\n    drawDEW(context, DEW, this.calculateRadiusRatios());\n    drawEvasion(context, DEW, evasion, this.calculateRadiusRatios());\n    drawCCEW(context, DEW, evasion, CCEW, this.calculateRadiusRatios());\n\n    const texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true;\n    this.uniforms.texture.value = texture;\n  }\n}\n\nexport default ShipEWSprite;\n","import * as THREE from \"three\";\r\nimport Sprite from \"./Sprite\";\r\nimport abstractCanvas from \"../../utils/abstractCanvas\";\r\nimport { drawArrow } from \"../../utils/graphics\";\r\n\r\nlet texture = null;\r\nconst TEXTURE_SIZE = 256;\r\n\r\nconst createTexture = () => {\r\n  if (texture) {\r\n    return;\r\n  }\r\n\r\n  const canvas = abstractCanvas.create(TEXTURE_SIZE, TEXTURE_SIZE);\r\n  const context = canvas.getContext(\"2d\");\r\n  context.strokeStyle = \"rgba(0,0,255,1.0)\";\r\n  context.fillStyle = \"rgba(0,0,255,0.5)\";\r\n\r\n  drawArrow(\r\n    context,\r\n    TEXTURE_SIZE / 2,\r\n    TEXTURE_SIZE / 2,\r\n    0,\r\n    TEXTURE_SIZE / 2,\r\n    1\r\n  );\r\n\r\n  texture = new THREE.Texture(canvas);\r\n  texture.needsUpdate = true;\r\n};\r\n\r\nclass ShipFacingSprite extends Sprite {\r\n  constructor(size, z, opacity) {\r\n    super(null, size, z);\r\n\r\n    this.setOpacity(opacity);\r\n\r\n    createTexture();\r\n    this.uniforms.texture.value = texture;\r\n  }\r\n}\r\n\r\nexport default ShipFacingSprite;\r\n","import * as THREE from \"three\";\r\nimport Sprite from \"./Sprite\";\r\nimport abstractCanvas from \"../../utils/abstractCanvas\";\r\nimport { drawDottedCircle } from \"../../utils/graphics\";\r\n\r\nlet texture = null;\r\nconst TEXTURE_SIZE = 512;\r\n\r\nconst createTexture = () => {\r\n  if (texture) {\r\n    return;\r\n  }\r\n\r\n  const canvas = abstractCanvas.create(TEXTURE_SIZE, TEXTURE_SIZE);\r\n  const context = canvas.getContext(\"2d\");\r\n  context.strokeStyle = \"rgba(78,220,25,1.0)\";\r\n  context.fillStyle = \"rgba(78,220,25,0.5)\";\r\n\r\n  drawDottedCircle(\r\n    context,\r\n    TEXTURE_SIZE / 2,\r\n    TEXTURE_SIZE / 2,\r\n    TEXTURE_SIZE * 0.4,\r\n    TEXTURE_SIZE * 0.5,\r\n    12,\r\n    0.3\r\n  );\r\n\r\n  texture = new THREE.Texture(canvas);\r\n  texture.needsUpdate = true;\r\n};\r\n\r\nclass DottedCircleSprite extends Sprite {\r\n  constructor(size, z, opacity) {\r\n    super(null, size, z);\r\n\r\n    this.setOpacity(opacity);\r\n\r\n    createTexture();\r\n    this.uniforms.texture.value = texture;\r\n  }\r\n}\r\n\r\nexport default DottedCircleSprite;\r\n","import * as THREE from \"three\";\nimport abstractCanvas from \"../../utils/abstractCanvas\";\n\nconst TEXTURE_SIZE = 256;\n\nclass TextSprite {\n  constructor(text, color, z, args) {\n    if (!args) {\n      args = {};\n    }\n\n    this.z = z || 0;\n\n    const size = args.size || TEXTURE_SIZE;\n\n    this.color = color || \"rgba(255,255,255,1)\";\n\n    this.fontSize = args.fontSize || \"32px\";\n    this.font = args.font || \"Arial Black\";\n\n    var canvas = abstractCanvas.create(size, size);\n    var context = canvas.getContext(\"2d\");\n    context.save();\n    context.fillStyle = this.color;\n    context.font = this.fontSize + \" \" + this.font;\n    context.textAlign = \"center\";\n    context.textBaseline = \"middle\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n\n    context.shadowColor = \"rgba(0,0,0,1)\";\n\n    context.shadowBlur = 8;\n    context.fillText(text, Math.round(size / 2), Math.round(size / 2));\n    context.restore();\n\n    var geometry = new THREE.PlaneGeometry(size, size, 1, 1);\n\n    var texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true;\n\n    this.material = new THREE.MeshBasicMaterial({\n      map: texture,\n      transparent: true,\n      depthTest: false,\n      depthWrite: false\n    });\n\n    this.mesh = new THREE.Mesh(geometry, this.material);\n  }\n\n  setScale(width, height) {\n    this.mesh.scale.set(width, height, 1);\n  }\n\n  hide() {\n    this.mesh.visible = false;\n    return this;\n  }\n\n  show() {\n    this.mesh.visible = true;\n    return this;\n  }\n\n  setOpacity(opacity) {\n    this.material.opacity = opacity;\n  }\n\n  setPosition(pos) {\n    this.mesh.position.x = pos.x;\n    this.mesh.position.y = pos.y;\n    this.mesh.position.z = this.z;\n    return this;\n  }\n\n  destroy() {\n    this.mesh.material.dispose();\n  }\n}\n\nexport default TextSprite;\n","import * as THREE from \"three\";\nimport Sprite from \"./Sprite\";\nimport abstractCanvas from \"../../utils/abstractCanvas\";\nimport { drawCircleAndFill } from \"../../utils/graphics\";\n\nlet texture = null;\nconst TEXTURE_SIZE = 256;\n\nconst createTexture = () => {\n  if (texture) {\n    return;\n  }\n\n  const canvas = abstractCanvas.create(TEXTURE_SIZE, TEXTURE_SIZE);\n  const context = canvas.getContext(\"2d\");\n  context.strokeStyle = \"rgba(255,255,255,1.0)\";\n  context.fillStyle = \"rgba(255,255,255,0.5)\";\n\n  drawCircleAndFill(\n    context,\n    TEXTURE_SIZE / 2,\n    TEXTURE_SIZE / 2,\n    TEXTURE_SIZE * 0.3,\n    4\n  );\n\n  texture = new THREE.Texture(canvas);\n  texture.needsUpdate = true;\n};\n\nclass CircleSprite extends Sprite {\n  constructor(position, size, z, opacity) {\n    super(null, size, z);\n\n    this.setOpacity(opacity);\n\n    createTexture();\n\n    this.uniforms.texture.value = texture;\n    this.setPosition(position);\n  }\n}\n\nexport default CircleSprite;\n","import * as THREE from \"three\";\r\nimport Sprite from \"./Sprite\";\r\nimport abstractCanvas from \"../../utils/abstractCanvas\";\r\nimport { drawCircleAndFill } from \"../../utils/graphics\";\r\nimport { spriteFragmentShader, spriteVertexShader } from \"../shader\";\r\n\r\nconst baseMaterial = new THREE.ShaderMaterial({\r\n  vertexShader: spriteVertexShader,\r\n  fragmentShader: spriteFragmentShader,\r\n  transparent: true,\r\n  depthWrite: false\r\n  //blending: THREE.AdditiveBlending\r\n});\r\n\r\nlet texture = new THREE.TextureLoader().load(\"/img/shipMapIcon.png\");\r\nlet textureMovementTarget = new THREE.TextureLoader().load(\r\n  \"/img/shipMapIconMovementTarget.png\"\r\n);\r\n\r\nclass ShipMapSprite extends Sprite {\r\n  constructor(position, size, z, opacity, movementTarget = false) {\r\n    super(null, size, z);\r\n\r\n    this.setOpacity(opacity);\r\n\r\n    if (movementTarget) {\r\n      this.uniforms.texture.value = textureMovementTarget;\r\n    } else {\r\n      this.uniforms.texture.value = texture;\r\n    }\r\n    this.setPosition(position);\r\n  }\r\n\r\n  getMaterial() {\r\n    return baseMaterial;\r\n  }\r\n}\r\n\r\nexport default ShipMapSprite;\r\n","import * as THREE from \"three\";\r\n\r\nimport { loadObject, cloneObject } from \"../utils/objectLoader\";\r\nimport { lineFragmentShader, lineVertexShader } from \"./shader\";\r\nimport { degreeToRadian } from \"../../../../model/utils/math.mjs\";\r\n\r\nlet hexagonMesh = null;\r\n\r\nconst baseMaterial = new THREE.ShaderMaterial({\r\n  vertexShader: lineVertexShader,\r\n  fragmentShader: lineFragmentShader,\r\n  transparent: true,\r\n  depthWrite: false,\r\n  //depthTest: false,\r\n  side: THREE.DoubleSide,\r\n  blending: THREE.AdditiveBlending\r\n});\r\n\r\nconst uniforms = {\r\n  time: { type: \"f\", value: 0.0 }\r\n};\r\n\r\nbaseMaterial.uniforms = uniforms;\r\n/*\r\nconst baseMaterial = new THREE.MeshBasicMaterial({\r\n  color: new THREE.Color(0, 1, 0)\r\n});\r\n*/\r\n\r\nconst animate = () => {\r\n  const now = Date.now();\r\n  baseMaterial.uniforms.time.value = (now % 1000) * 0.001;\r\n  baseMaterial.needsUpdate = true;\r\n  requestAnimationFrame(animate);\r\n};\r\n\r\nconst verticeAmount = 16;\r\n\r\nanimate();\r\n\r\nclass Line {\r\n  constructor(scene, args = {}) {\r\n    if (!args) {\r\n      args = {};\r\n    }\r\n\r\n    this.scene = scene;\r\n    this.mesh = null;\r\n    this.start = args.start;\r\n    this.end = args.end;\r\n    this.width = args.width || 10;\r\n    this.pulseAmount = args.pulseAmount || 0;\r\n    this.pulseSpeed = args.pulseSpeed || 1;\r\n    this.dashSize = args.dashSize || 0;\r\n    this.length = new THREE.Vector3().subVectors(this.start, this.end).length();\r\n    this.type = args.type || \"laser\";\r\n\r\n    this.ready = new Promise(resolve => {\r\n      this.resolveReady = resolve;\r\n    });\r\n\r\n    this.color = args.color;\r\n    this.opacity = args.opacity;\r\n\r\n    this.currentRotationMatrix = null;\r\n\r\n    this.create(this.start, this.end, this.width);\r\n  }\r\n\r\n  async getGeometry() {\r\n    if (!hexagonMesh) {\r\n      const object = await loadObject(\"/img/3d/line2/scene.gltf\");\r\n      hexagonMesh = object.scene.children[0];\r\n      hexagonMesh.rotation.set(\r\n        hexagonMesh.rotation.x + degreeToRadian(90),\r\n        hexagonMesh.rotation.y,\r\n        hexagonMesh.rotation.z\r\n      );\r\n      hexagonMesh.material = baseMaterial;\r\n    }\r\n\r\n    return hexagonMesh;\r\n  }\r\n\r\n  async createMesh(width, height) {\r\n    let mesh = await this.getGeometry();\r\n    mesh = mesh.clone();\r\n    mesh.geometry = mesh.geometry.clone();\r\n    //mesh.material = baseMaterial.clone();\r\n    mesh.scale.set(width, width, height);\r\n\r\n    return mesh;\r\n  }\r\n\r\n  getVertexAmount() {\r\n    switch (this.type) {\r\n      case \"cylinder\":\r\n        return 14;\r\n      case \"laser\":\r\n        return 16;\r\n    }\r\n  }\r\n\r\n  setPulse(amount, speed = 1) {\r\n    this.pulseAmount = amount;\r\n    this.pulseSpeed = speed;\r\n\r\n    if (!this.pulseAttribute) {\r\n      const pulses = [];\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        pulses.push(this.pulseAmount, this.pulseSpeed);\r\n      }\r\n      this.pulseAttribute = new THREE.BufferAttribute(\r\n        new Float32Array(pulses),\r\n        2\r\n      ).setDynamic(true);\r\n      this.mesh.geometry.setAttribute(\"pulse\", this.pulseAttribute);\r\n    } else {\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        this.pulseAttribute.setXY(i, this.pulseAmount, this.pulseSpeed);\r\n      }\r\n    }\r\n\r\n    this.dashAttribute.needsUpdate = true;\r\n  }\r\n\r\n  setDashed(dashSize) {\r\n    this.dashRatio = dashSize / this.length;\r\n\r\n    if (!this.dashAttribute) {\r\n      const dashes = [];\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        dashes.push(this.dashRatio);\r\n      }\r\n      this.dashAttribute = new THREE.BufferAttribute(\r\n        new Float32Array(dashes),\r\n        1\r\n      ).setDynamic(true);\r\n      this.mesh.geometry.setAttribute(\"dashRatio\", this.dashAttribute);\r\n    } else {\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        this.dashAttribute.setX(i, this.dashAttribute);\r\n      }\r\n    }\r\n\r\n    this.dashAttribute.needsUpdate = true;\r\n  }\r\n\r\n  setColorAttribute(color) {\r\n    const colors = [];\r\n    for (let i = 0; i < this.getVertexAmount(); i++) {\r\n      colors.push(color.r, color.g, color.b);\r\n    }\r\n    this.colorAttribute = new THREE.BufferAttribute(\r\n      new Float32Array(colors),\r\n      3\r\n    ).setDynamic(true);\r\n    this.mesh.geometry.setAttribute(\"color\", this.colorAttribute);\r\n\r\n    this.colorAttribute.needsUpdate = true;\r\n  }\r\n\r\n  async setColor(color) {\r\n    await this.ready;\r\n    this.color = color;\r\n    for (let i = 0; i < this.getVertexAmount(); i++) {\r\n      this.colorAttribute.setXYZ(i, this.color.r, this.color.g, this.color.b);\r\n    }\r\n\r\n    this.colorAttribute.needsUpdate = true;\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    this.opacity = opacity;\r\n    if (!this.opacityAttribute) {\r\n      const opacitys = [];\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        opacitys.push(opacity);\r\n      }\r\n      this.opacityAttribute = new THREE.BufferAttribute(\r\n        new Float32Array(opacitys),\r\n        1\r\n      ).setDynamic(true);\r\n      this.mesh.geometry.setAttribute(\"opacity\", this.opacityAttribute);\r\n    } else {\r\n      for (let i = 0; i < this.getVertexAmount(); i++) {\r\n        this.opacityAttribute.setX(i, this.opacity);\r\n      }\r\n    }\r\n\r\n    this.opacityAttribute.needsUpdate = true;\r\n  }\r\n\r\n  getOrientation(pointX, pointY) {\r\n    const orientation = new THREE.Matrix4();\r\n    orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\r\n    orientation.multiply(\r\n      new THREE.Matrix4().set(1, 0, 0, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 0, 0, 1)\r\n    );\r\n\r\n    return orientation;\r\n  }\r\n\r\n  async create(pointX, pointY, lineWidth) {\r\n    const mesh = await this.createMesh(lineWidth, this.length);\r\n    const orientation = this.getOrientation(pointX, pointY);\r\n\r\n    mesh.applyMatrix(orientation);\r\n    this.currentRotationMatrix = orientation;\r\n\r\n    mesh.position.x = (pointY.x + pointX.x) / 2;\r\n    mesh.position.y = (pointY.y + pointX.y) / 2;\r\n    mesh.position.z = (pointY.z + pointX.z) / 2;\r\n\r\n    this.scene.add(mesh);\r\n    this.mesh = mesh;\r\n    this.resolveReady(true);\r\n    this.setColorAttribute(this.color);\r\n    this.setOpacity(this.opacity);\r\n    this.setDashed(this.dashSize);\r\n    this.setPulse(this.pulseAmount, this.pulseSpeed);\r\n  }\r\n\r\n  updateMesh() {\r\n    const orientation = this.getOrientation(this.start, this.end);\r\n\r\n    this.mesh.applyMatrix(\r\n      new THREE.Matrix4().getInverse(this.currentRotationMatrix)\r\n    );\r\n\r\n    this.mesh.scale.set(this.width, this.width, this.length);\r\n\r\n    this.mesh.applyMatrix(orientation);\r\n    this.currentRotationMatrix = orientation;\r\n    this.mesh.position.x = (this.end.x + this.start.x) / 2;\r\n    this.mesh.position.y = (this.end.y + this.start.y) / 2;\r\n    this.mesh.position.z = (this.end.z + this.start.z) / 2;\r\n  }\r\n\r\n  async update(start, end, lineWidth) {\r\n    await this.ready;\r\n    this.width = lineWidth;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.length = new THREE.Vector3().subVectors(this.start, this.end).length();\r\n    this.updateMesh();\r\n  }\r\n\r\n  setEnd(end) {\r\n    this.update(this.start, end, this.width);\r\n  }\r\n\r\n  setLineWidth(lineWidth) {\r\n    this.width = lineWidth;\r\n\r\n    this.mesh.scale.set(this.width, this.width, this.length);\r\n  }\r\n\r\n  multiplyOpacity(m) {\r\n    this.setOpacity(this.opacity * m);\r\n  }\r\n\r\n  async hide() {\r\n    await this.ready;\r\n    this.mesh.visible = false;\r\n    return this;\r\n  }\r\n\r\n  async show() {\r\n    await this.ready;\r\n    this.mesh.visible = true;\r\n    return this;\r\n  }\r\n\r\n  async destroy() {\r\n    await this.ready;\r\n    this.scene.remove(this.mesh);\r\n  }\r\n}\r\n\r\nexport default Line;\r\n","import { ShipMapSprite } from \"../sprite\";\r\n\r\nclass ShipMapIcon {\r\n  constructor(icon) {\r\n    this.icon = icon;\r\n\r\n    this.size = { width: 25, height: 25 };\r\n\r\n    this.normalSprite = new ShipMapSprite(\r\n      { x: 0, y: 0, z: 0 },\r\n      this.size,\r\n      0,\r\n      1\r\n    );\r\n    this.movementTargetSprite = new ShipMapSprite(\r\n      { x: 0, y: 0, z: 0 },\r\n      { width: 30, height: 30 },\r\n      0,\r\n      1,\r\n      true\r\n    );\r\n\r\n    this.sprite = this.normalSprite;\r\n    this.sprite.mesh.userData = { icon };\r\n    this.sprite.hide();\r\n    this.normalSprite.hide();\r\n    this.movementTargetSprite.hide();\r\n\r\n    this.scene = null;\r\n  }\r\n\r\n  setMovementTarget() {\r\n    this.scene.remove(this.sprite.mesh);\r\n    this.sprite = this.movementTargetSprite;\r\n    this.scene.add(this.sprite.mesh);\r\n    return this;\r\n  }\r\n\r\n  replaceColor(color) {\r\n    this.sprite.replaceColor(color);\r\n    return this;\r\n  }\r\n\r\n  revertColor() {\r\n    this.sprite.revertColor(this.color);\r\n    return this;\r\n  }\r\n\r\n  addTo(scene) {\r\n    this.scene = scene;\r\n    scene.add(this.sprite.mesh);\r\n  }\r\n\r\n  setScale(scale) {\r\n    this.sprite.setScale(scale, scale);\r\n    return this;\r\n  }\r\n\r\n  setRotation(rotation) {\r\n    this.normalSprite.setFacing(rotation);\r\n    this.movementTargetSprite.setFacing(rotation);\r\n    return this;\r\n  }\r\n\r\n  setOverlayColor(color) {\r\n    this.sprite.setOverlayColor(color);\r\n    return this;\r\n  }\r\n\r\n  setOverlayColorAlpha(alpha) {\r\n    this.sprite.setOverlayColorAlpha(alpha);\r\n    return this;\r\n  }\r\n\r\n  show() {\r\n    this.sprite.show();\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.sprite.hide();\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default ShipMapIcon;\r\n","import Vector from \"../../../../model/utils/Vector\";\n\nclass Animation {\n  constructor(getRandom) {\n    this.getRandom = getRandom || Math.random;\n    this.active = false;\n    this.started = false;\n    this.done = false;\n  }\n\n  start() {\n    this.active = true;\n  }\n\n  stop() {\n    this.active = false;\n  }\n\n  setIsDone(done) {\n    this.done = done;\n    return this;\n  }\n\n  setStartCallback(callback) {\n    this.startCallback = callback;\n    return this;\n  }\n\n  setDoneCallback(callback) {\n    this.doneCallback = callback;\n    return this;\n  }\n\n  callStartCallback(total) {\n    if (!this.started && total > this.time) {\n      this.startCallback && this.startCallback();\n      this.started = true;\n    }\n  }\n\n  callDoneCallback(total) {\n    if (total > this.time + this.duration && !this.done) {\n      this.doneCallback && this.doneCallback();\n      this.done = true;\n    }\n  }\n\n  getDuration() {\n    return 0;\n  }\n\n  deactivate() {}\n\n  reset() {}\n\n  cleanUp() {}\n\n  update(gameData) {}\n\n  render(now, total, last, delta, goingBack) {}\n\n  getRandomPosition(distance) {\n    return new Vector(\n      this.getRandom() * distance - distance * 0.5,\n      this.getRandom() * distance - distance * 0.5,\n      this.getRandom() * distance - distance * 0.5\n    );\n  }\n}\n\nexport default Animation;\n","import * as THREE from \"three\";\r\nimport { degreeToRadian } from \"../../../../../model/utils/math\";\r\nimport { radianToDegree } from \"../../../../../model/utils/math.mjs\";\r\n\r\nconst changeAttribute = (geometry, index, key, values) => {\r\n  values = [].concat(values);\r\n\r\n  var target = geometry.attributes[key].array;\r\n\r\n  values.forEach(function (value, i) {\r\n    target[index * values.length + i] = value;\r\n  });\r\n\r\n  geometry.attributes[key].needsUpdate = true;\r\n};\r\n\r\nexport const TEXTURE_GAS = 0;\r\nexport const TEXTURE_BOLT = 1;\r\nexport const TEXTURE_GLOW = 2;\r\nexport const TEXTURE_RING = 3;\r\nexport const TEXTURE_STARLINE = 4;\r\n\r\nclass BaseParticle {\r\n  constructor(material, geometry) {\r\n    this.material = material;\r\n    this.geometry = geometry;\r\n    this.index = 0;\r\n    this.emitter = null;\r\n\r\n    this.texture = {\r\n      gas: TEXTURE_GAS,\r\n      bolt: TEXTURE_BOLT,\r\n      glow: TEXTURE_GLOW,\r\n      ring: TEXTURE_RING,\r\n      starLine: TEXTURE_STARLINE,\r\n    };\r\n  }\r\n\r\n  create(index, emitter) {\r\n    this.index = index;\r\n    this.emitter = emitter;\r\n    this.setInitialValues();\r\n    return this;\r\n  }\r\n\r\n  aquire(index, emitter) {\r\n    this.index = index;\r\n    this.emitter = emitter;\r\n    return this;\r\n  }\r\n\r\n  setInitialValues() {\r\n    this.setPosition({ x: 0, y: 0, z: 0 });\r\n    this.setColor(new THREE.Color(0, 0, 0));\r\n    this.setOpacity(0.0);\r\n    this.setFadeIn(0.0, 0.0);\r\n    this.setFadeOut(0.0, 0.0);\r\n    this.setSize(0.0);\r\n    this.setSizeChange(0.0);\r\n    this.setAngle(0.0, 0.0);\r\n    this.setActivationTime(0.0);\r\n    this.setVelocity(new THREE.Vector3(0, 0, 0));\r\n    this.setAcceleration(new THREE.Vector3(0, 0, 0));\r\n    this.setTexture(this.texture.glow);\r\n    this.setRepeat(0);\r\n\r\n    return this;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      index: this.index,\r\n      emitter: this.emitter,\r\n      opacity: this.geometry.attributes[\"opacity\"].array[this.index],\r\n    };\r\n  }\r\n\r\n  getIndex() {\r\n    return this.index;\r\n  }\r\n\r\n  setRepeat(repeat) {\r\n    changeAttribute(this.geometry, this.index, \"repeat\", repeat);\r\n    return this;\r\n  }\r\n\r\n  setSine(frequency, amplitude) {\r\n    const value = Math.floor(frequency) + amplitude;\r\n    changeAttribute(this.geometry, this.index, \"sine\", value);\r\n    return this;\r\n  }\r\n\r\n  setTexture(tex) {\r\n    changeAttribute(this.geometry, this.index, \"textureNumber\", tex);\r\n\r\n    return this;\r\n  }\r\n\r\n  setSize(size) {\r\n    changeAttribute(this.geometry, this.index, \"size\", size);\r\n    return this;\r\n  }\r\n\r\n  setSizeChange(size) {\r\n    changeAttribute(this.geometry, this.index, \"sizeChange\", size);\r\n    return this;\r\n  }\r\n\r\n  setColor(color) {\r\n    changeAttribute(this.geometry, this.index, \"color\", [\r\n      color.r,\r\n      color.g,\r\n      color.b,\r\n    ]);\r\n    return this;\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    changeAttribute(this.geometry, this.index, \"opacity\", opacity);\r\n    return this;\r\n  }\r\n\r\n  setFadeIn(time, speed = 1000) {\r\n    changeAttribute(this.geometry, this.index, \"fadeInTime\", time);\r\n    changeAttribute(this.geometry, this.index, \"fadeInSpeed\", speed);\r\n    return this;\r\n  }\r\n\r\n  setFadeOut(time, speed = 1000) {\r\n    changeAttribute(this.geometry, this.index, \"fadeOutTime\", time);\r\n    changeAttribute(this.geometry, this.index, \"fadeOutSpeed\", speed);\r\n    return this;\r\n  }\r\n\r\n  setPosition(pos) {\r\n    changeAttribute(\r\n      this.geometry,\r\n      this.index,\r\n      \"position\",\r\n      [pos.x, pos.y, pos.z],\r\n      true\r\n    );\r\n    return this;\r\n  }\r\n\r\n  setAngle(angle, change = 0) {\r\n    const value =\r\n      Math.floor(degreeToRadian(angle) * 1000) +\r\n      Math.floor(degreeToRadian(change) * 1000) * 10000;\r\n\r\n    changeAttribute(this.geometry, this.index, \"angle\", value);\r\n    return this;\r\n  }\r\n\r\n  setVelocity(velocity) {\r\n    changeAttribute(this.geometry, this.index, \"velocity\", [\r\n      velocity.x,\r\n      velocity.y,\r\n      velocity.z,\r\n    ]);\r\n    return this;\r\n  }\r\n\r\n  setAcceleration(acceleration) {\r\n    changeAttribute(this.geometry, this.index, \"acceleration\", [\r\n      acceleration.x,\r\n      acceleration.y,\r\n      acceleration.z,\r\n    ]);\r\n    return this;\r\n  }\r\n\r\n  deactivate() {\r\n    this.setInitialValues();\r\n    return this;\r\n  }\r\n\r\n  setActivationTime(gameTime) {\r\n    changeAttribute(this.geometry, this.index, \"activationGameTime\", gameTime);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default BaseParticle;\r\n","import * as THREE from \"three\";\nimport Animation from \"../Animation\";\nimport BaseParticle from \"./BaseParticle\";\nimport {\n  effectVertexShader,\n  effectFragmentShader,\n} from \"../../renderer/shader\";\n\nconst texture = new THREE.TextureLoader().load(\n  \"/img/effect/effectTextures1024.png\"\n);\n\nclass ParticleEmitter extends Animation {\n  constructor(scene, particleCount, args = {}) {\n    super();\n\n    var blending = args.blending || THREE.AdditiveBlending;\n\n    if (!particleCount) {\n      particleCount = 1000;\n    }\n\n    this.scene = scene;\n\n    this.free = [];\n    for (var i = 0; i < particleCount; i++) {\n      this.free.push(i);\n    }\n\n    this.effects = 0;\n\n    var uniforms = {\n      gameTime: { type: \"f\", value: 0.0 },\n      zoomLevel: { type: \"f\", value: 1.0 },\n      texture: { type: \"t\", value: texture },\n    };\n\n    this.particleGeometry = new THREE.BufferGeometry();\n\n    this.particleGeometry.setAttribute(\n      \"position\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"size\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"sizeChange\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"color\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"opacity\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"fadeInTime\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"fadeInSpeed\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"fadeOutTime\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"fadeOutSpeed\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"activationGameTime\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"velocity\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"acceleration\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"textureNumber\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"angle\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"sine\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n\n    this.particleGeometry.setAttribute(\n      \"repeat\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n\n    this.particleGeometry.dynamic = true;\n\n    this.particleGeometry.setDrawRange(0, particleCount);\n\n    this.particleMaterial = new THREE.ShaderMaterial({\n      uniforms: uniforms,\n      vertexShader: effectVertexShader,\n      fragmentShader: effectFragmentShader,\n      transparent: true,\n      blending: blending,\n      depthWrite: false,\n      depthTest: false,\n    });\n\n    /*\n        THREE.NormalBlending = 0;\n        THREE.AdditiveBlending = 1;\n        THREE.SubtractiveBlending = 2;\n        THREE.MultiplyBlending = 3;\n        THREE.AdditiveAlphaBlending = 4;\n        */\n\n    this.flyParticle = new BaseParticle(\n      this.particleMaterial,\n      this.particleGeometry\n    );\n\n    while (particleCount--) {\n      this.flyParticle.create(particleCount).setInitialValues();\n    }\n\n    this.mesh = new THREE.Points(this.particleGeometry, this.particleMaterial);\n    this.mesh.position.set(0, 0, 0);\n    this.mesh.frustumCulled = false;\n    this.needsUpdate = false;\n\n    this.scene.add(this.mesh);\n  }\n\n  setPosition({ x, y, z }) {\n    this.mesh.position.set(x, y, z);\n    this.needsUpdate = true;\n  }\n\n  cleanUp() {\n    this.mesh.material.dispose();\n    this.scene.remove(this.mesh);\n  }\n\n  render({ total, zoom }) {\n    this.particleMaterial.uniforms.gameTime.value = total;\n    this.particleMaterial.uniforms.zoomLevel.value = 1 / zoom;\n    this.mesh.material.needsUpdate = true;\n  }\n\n  hasFree() {\n    return this.free.length > 0;\n  }\n\n  getParticle() {\n    if (this.free.length === 0) {\n      return false;\n    }\n\n    var i = this.free.pop();\n\n    return this.flyParticle.create(i, this);\n  }\n\n  getByIndex(index) {\n    return this.flyParticle.aquire(index, this);\n  }\n\n  freeParticles(particleIndices) {\n    particleIndices = [].concat(particleIndices);\n\n    particleIndices.forEach(function (i) {\n      this.flyParticle.create(i).setInitialValues();\n    }, this);\n    this.free = this.free.concat(particleIndices);\n  }\n}\n\nexport default ParticleEmitter;\n","import * as THREE from \"three\";\r\nimport { degreeToRadian } from \"../../../../../../model/utils/math.mjs\";\r\nimport Vector from \"../../../../../../model/utils/Vector.mjs\";\r\n\r\nclass BoltInstance {\r\n  constructor(boltContainer) {\r\n    this.boltContainer = boltContainer;\r\n    this.index = null;\r\n    this.emitter = null;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      index: this.index,\r\n      emitter: this.emitter,\r\n    };\r\n  }\r\n\r\n  setIndex(index) {\r\n    this.index = index;\r\n    return this;\r\n  }\r\n\r\n  setEmitter(emitter) {\r\n    this.emitter = emitter;\r\n    return this;\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    this.boltContainer.setOpacity(this.index, opacity);\r\n    return this;\r\n  }\r\n\r\n  setPosition(position) {\r\n    this.boltContainer.setPosition(this.index, position);\r\n    return this;\r\n  }\r\n\r\n  setScale(length = 1, width = 1) {\r\n    this.boltContainer.setScale(this.index, { x: length, y: width, z: width });\r\n    return this;\r\n  }\r\n\r\n  setRotation(rotation) {\r\n    const quaternion = new THREE.Quaternion();\r\n    quaternion.setFromUnitVectors(\r\n      new THREE.Vector3(1, 0, 0).normalize(),\r\n      new Vector(rotation).normalize()\r\n    );\r\n\r\n    this.boltContainer.setQuaternion(this.index, quaternion);\r\n    return this;\r\n  }\r\n\r\n  unsetTexture() {\r\n    this.boltContainer.setTexture(this.index, -1);\r\n    return this;\r\n  }\r\n\r\n  setGasTexture() {\r\n    this.boltContainer.setTexture(this.index, 0);\r\n    return this;\r\n  }\r\n\r\n  setBoltTexture() {\r\n    this.boltContainer.setTexture(this.index, 1);\r\n    return this;\r\n  }\r\n\r\n  setHaloTexture() {\r\n    this.boltContainer.setTexture(this.index, 2);\r\n    return this;\r\n  }\r\n\r\n  setRayTexture() {\r\n    this.boltContainer.setTexture(this.index, 3);\r\n    return this;\r\n  }\r\n\r\n  setColor(color) {\r\n    this.boltContainer.setColor(this.index, color);\r\n    return this;\r\n  }\r\n\r\n  setVelocity(velocity) {\r\n    this.boltContainer.setVelocity(this.index, velocity);\r\n    return this;\r\n  }\r\n\r\n  setActivationTime(time) {\r\n    this.boltContainer.setActivationTime(this.index, time);\r\n    return this;\r\n  }\r\n\r\n  setDeactivationTime(time, fade) {\r\n    this.boltContainer.setDeactivationTime(this.index, time, fade);\r\n    return this;\r\n  }\r\n\r\n  setRepeat(repeat) {\r\n    this.boltContainer.setRepeat(this.index, repeat);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default BoltInstance;\r\n","import BoltInstance from \"./BoltInstance\";\n\nclass BoltContainer {\n  constructor(\n    offsetAttribute,\n    opacityAttribute,\n    textureNumberAttribute,\n    scaleAttribute,\n    quaternionAttribute,\n    colorAttribute,\n    velocityAttribute,\n    activationGameTimeAttribute,\n    deactivationGameTimeAttribute,\n    deactivationFadeAttribute,\n    repeatAttribute,\n    amount,\n    mesh,\n    scene,\n    numberCreated\n  ) {\n    this.amount = amount;\n    this.offsetAttribute = offsetAttribute;\n    this.opacityAttribute = opacityAttribute;\n    this.textureNumberAttribute = textureNumberAttribute;\n    this.scaleAttribute = scaleAttribute;\n    this.quaternionAttribute = quaternionAttribute;\n    this.colorAttribute = colorAttribute;\n    this.velocityAttribute = velocityAttribute;\n    this.activationGameTimeAttribute = activationGameTimeAttribute;\n    this.deactivationGameTimeAttribute = deactivationGameTimeAttribute;\n    this.deactivationFadeAttribute = deactivationFadeAttribute;\n    this.repeatAttribute = repeatAttribute;\n    this.mesh = mesh;\n    this.scene = scene;\n    this.numberCreated = numberCreated;\n\n    this.free = [];\n    for (let i = 0; i < this.amount; i++) {\n      this.free.push(i);\n    }\n\n    this.flyBolt = new BoltInstance(this);\n  }\n\n  setRenderOrder(order) {\n    //console.log(this.mesh.renderOrder);\n    //console.log(\"setting renderOrder \", order);\n    //this.mesh.renderOrder = order;\n  }\n\n  hasFree() {\n    return this.free.length > 0;\n  }\n\n  discard() {\n    this.scene.remove(this.mesh);\n  }\n\n  resetIndex() {\n    this.used = 0;\n  }\n\n  unassignEverything() {\n    const opacitys = [];\n\n    for (let i = 0; i < this.amount; i++) {\n      opacitys.push(0);\n    }\n\n    this.opacityAttribute.setArray(opacitys);\n    this.opacityAttribute.needsUpdate = true;\n\n    this.used = 0;\n  }\n\n  freeParticles(particleIndices) {\n    particleIndices = [].concat(particleIndices);\n\n    particleIndices = particleIndices.filter(\n      (index) => !this.free.includes(index)\n    );\n\n    particleIndices.forEach(function (i) {\n      this.opacityAttribute.setX(i, 0);\n    }, this);\n\n    this.opacityAttribute.needsUpdate = true;\n\n    this.free = this.free.concat(particleIndices);\n  }\n\n  getParticle() {\n    if (this.free.length === 0) {\n      throw new Error(\"Container is full\");\n    }\n\n    return this.flyBolt.setIndex(this.free.pop()).setEmitter(this);\n  }\n\n  setOpacity(index, opacity) {\n    this.opacityAttribute.setX(index, opacity);\n    this.opacityAttribute.needsUpdate = true;\n  }\n\n  setPosition(index, position) {\n    this.offsetAttribute.setXYZ(index, position.x, position.y, position.z);\n    this.offsetAttribute.needsUpdate = true;\n  }\n\n  setParentPosition({ x, y, z }) {\n    this.mesh.position.set(x, y, z);\n  }\n\n  setScale(index, scale) {\n    this.scaleAttribute.setXYZ(index, scale.x, scale.y, scale.z);\n    this.scaleAttribute.needsUpdate = true;\n  }\n\n  setQuaternion(index, quaternion) {\n    this.quaternionAttribute.setXYZW(\n      index,\n      quaternion.x,\n      quaternion.y,\n      quaternion.z,\n      quaternion.w\n    );\n\n    this.quaternionAttribute.needsUpdate = true;\n  }\n\n  setTexture(index, texture) {\n    this.textureNumberAttribute.setX(index, texture);\n    this.textureNumberAttribute.needsUpdate = true;\n  }\n\n  setColor(index, color) {\n    this.colorAttribute.setXYZ(index, color.r, color.g, color.b);\n    this.colorAttribute.needsUpdate = true;\n  }\n\n  setVelocity(index, velocity) {\n    this.velocityAttribute.setXYZ(index, velocity.x, velocity.y, velocity.z);\n    this.velocityAttribute.needsUpdate = true;\n  }\n\n  setActivationTime(index, time) {\n    this.activationGameTimeAttribute.setX(index, time);\n    this.activationGameTimeAttribute.needsUpdate = true;\n  }\n\n  setDeactivationTime(index, time, fade = 0) {\n    this.deactivationGameTimeAttribute.setX(index, time);\n    this.deactivationFadeAttribute.setX(index, fade);\n    this.deactivationGameTimeAttribute.needsUpdate = true;\n    this.deactivationFadeAttribute.needsUpdate = true;\n  }\n\n  setRepeat(index, repeat) {\n    this.repeatAttribute.setX(index, repeat);\n    this.repeatAttribute.needsUpdate = true;\n  }\n}\n\nexport default BoltContainer;\n","import * as THREE from \"three\";\r\n\r\nimport { boltVertexShader, boltFragmentShader } from \"../../../renderer/shader\";\r\nimport BoltContainer from \"./BoltContainer\";\r\nimport { loadObject } from \"../../../utils/objectLoader\";\r\n\r\nlet loadedCube = null;\r\nlet numberCreated = 0;\r\n\r\nclass BoltInstanceFactory {\r\n  constructor(scene) {\r\n    this.scene = scene;\r\n    this.ready = new Promise(async (resolve) => {\r\n      if (!loadedCube) {\r\n        loadedCube = await this.loadCube();\r\n      }\r\n\r\n      resolve(true);\r\n    });\r\n\r\n    const texture = new THREE.TextureLoader().load(\r\n      //\"/img/offline.png\"\r\n      \"/img/effect/effectTextures1024.png\"\r\n    );\r\n\r\n    //texture.minFilter = THREE.LinearMipMapNearestFilter;\r\n\r\n    /*\r\n    THREE.NearestFilter\r\nTHREE.NearestMipMapNearestFilter\r\nTHREE.NearestMipMapLinearFilter\r\nTHREE.LinearFilter\r\nTHREE.LinearMipMapNearestFilter\r\nTHREE.LinearMipMapLinearFilter\r\n*/\r\n\r\n    this.material = new THREE.RawShaderMaterial({\r\n      uniforms: {\r\n        map: { value: texture },\r\n        gameTime: { type: \"f\", value: 0.0 },\r\n        zoomLevel: { type: \"f\", value: 0.0 },\r\n      },\r\n      transparent: true,\r\n      depthWrite: false,\r\n      depthTest: false,\r\n      side: THREE.DoubleSide,\r\n      blending: THREE.AdditiveBlending,\r\n      vertexShader: boltVertexShader,\r\n      fragmentShader: boltFragmentShader,\r\n      //wireframe: true\r\n    });\r\n\r\n    this.start = Date.now() / 3000;\r\n  }\r\n\r\n  render({ total, zoom }) {\r\n    this.material.uniforms.gameTime.value = total;\r\n    this.material.uniforms.zoomLevel.value = 1 / zoom;\r\n    this.material.needsUpdate = true;\r\n  }\r\n\r\n  create(size = 2000) {\r\n    return this.makeInstanced(loadedCube, size);\r\n  }\r\n\r\n  async loadCube() {\r\n    if (loadedCube) {\r\n      return loadedCube;\r\n    }\r\n\r\n    const cube = await loadObject(\"/img/3d/effect/bolt/scene.gltf\");\r\n    const cubeGeometry = cube.scene.children[0].geometry;\r\n    //cubeGeometry.rotateY((90 * Math.PI) / 180);\r\n    //cubeGeometry.scale(0.5, 0.5, 0.5);\r\n\r\n    loadedCube = cubeGeometry;\r\n    return loadedCube;\r\n  }\r\n\r\n  makeInstanced(original, amount) {\r\n    original = original.clone();\r\n\r\n    let offsetAttribute,\r\n      opacityAttribute,\r\n      textureNumberAttribute,\r\n      scaleAttribute,\r\n      quaternionAttribute,\r\n      colorAttribute,\r\n      velocityAttribute,\r\n      activationGameTimeAttribute,\r\n      deactivationGameTimeAttribute,\r\n      deactivationFadeAttribute,\r\n      repeatAttribute;\r\n\r\n    const geometry = new THREE.InstancedBufferGeometry();\r\n    geometry.index = original.index;\r\n    geometry.attributes.position = original.attributes.position;\r\n    geometry.attributes.uv = original.attributes.uv;\r\n\r\n    const offsets = [];\r\n    const opacitys = [];\r\n    const textureNumbers = [];\r\n    const scales = [];\r\n    const quaternions = [];\r\n    const colors = [];\r\n    const velocitys = [];\r\n    const activations = [];\r\n    const deactivations = [];\r\n    const fades = [];\r\n    const repeats = [];\r\n\r\n    for (let i = 0; i < amount; i++) {\r\n      offsets.push(0, 0, 0.5);\r\n      opacitys.push(0);\r\n      textureNumbers.push(-1);\r\n      scales.push(1, 1, 1);\r\n      quaternions.push(0, 1, 0, 0);\r\n      colors.push(0, 0, 0);\r\n      velocitys.push(0, 0, 0);\r\n      activations.push(0);\r\n      deactivations.push(0);\r\n      fades.push(0);\r\n      repeats.push(0);\r\n    }\r\n\r\n    offsetAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(offsets),\r\n      3\r\n    ).setDynamic(true);\r\n\r\n    opacityAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(opacitys),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    textureNumberAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(textureNumbers),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    scaleAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(scales),\r\n      3\r\n    ).setDynamic(true);\r\n\r\n    quaternionAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(quaternions),\r\n      4\r\n    ).setDynamic(true);\r\n\r\n    colorAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(colors),\r\n      3\r\n    ).setDynamic(true);\r\n\r\n    velocityAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(velocitys),\r\n      3\r\n    ).setDynamic(true);\r\n\r\n    activationGameTimeAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(activations),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    deactivationGameTimeAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(deactivations),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    deactivationFadeAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(fades),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    repeatAttribute = new THREE.InstancedBufferAttribute(\r\n      new Float32Array(repeats),\r\n      1\r\n    ).setDynamic(true);\r\n\r\n    geometry.setAttribute(\"offset\", offsetAttribute);\r\n    geometry.setAttribute(\"opacity\", opacityAttribute);\r\n    geometry.setAttribute(\"textureNumber\", textureNumberAttribute);\r\n    geometry.setAttribute(\"scale\", scaleAttribute);\r\n    geometry.setAttribute(\"quaternion\", quaternionAttribute);\r\n    geometry.setAttribute(\"color\", colorAttribute);\r\n    geometry.setAttribute(\"velocity\", velocityAttribute);\r\n    geometry.setAttribute(\"activationGameTime\", activationGameTimeAttribute);\r\n    geometry.setAttribute(\r\n      \"deactivationGameTime\",\r\n      deactivationGameTimeAttribute\r\n    );\r\n    geometry.setAttribute(\"deactivationFade\", deactivationFadeAttribute);\r\n    geometry.setAttribute(\"repeat\", repeatAttribute);\r\n\r\n    const mesh = new THREE.Mesh(geometry, this.material);\r\n    mesh.frustumCulled = false;\r\n\r\n    this.scene.add(mesh);\r\n\r\n    numberCreated++;\r\n\r\n    return new BoltContainer(\r\n      offsetAttribute,\r\n      opacityAttribute,\r\n      textureNumberAttribute,\r\n      scaleAttribute,\r\n      quaternionAttribute,\r\n      colorAttribute,\r\n      velocityAttribute,\r\n      activationGameTimeAttribute,\r\n      deactivationGameTimeAttribute,\r\n      deactivationFadeAttribute,\r\n      repeatAttribute,\r\n      amount,\r\n      mesh,\r\n      this.scene,\r\n      numberCreated\r\n    );\r\n  }\r\n}\r\n\r\nexport default BoltInstanceFactory;\r\n","import ParticleEmitter from \"./ParticleEmitter\";\nimport { StarParticleEmitter } from \".\";\nimport BoltInstanceFactory from \"./BoltParticleEmitter/BoltInstanceFactory\";\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\nimport * as THREE from \"three\";\n\nclass ParticleEmitterContainer {\n  constructor(scene, defaultParticleAmount) {\n    this.scene = scene;\n    this.defaultParticleAmount = defaultParticleAmount;\n\n    this.boltInstanceFactory = new BoltInstanceFactory(this.scene);\n\n    this.reservations = [];\n\n    this.emitters = {\n      star: [],\n      bolt: [],\n      effect: [],\n      normal: [],\n    };\n\n    this._isReady = false;\n    this.readyPromise = new Promise(async (resolve) => {\n      await this.boltInstanceFactory.ready;\n      this._isReady = true;\n      resolve(true);\n    });\n\n    this.position = new Vector();\n  }\n\n  ready() {\n    return this.readyPromise;\n  }\n\n  isReady() {\n    return this._isReady;\n  }\n\n  createParticleEmitter(type) {\n    switch (type) {\n      case \"star\":\n        return this.createStarParticleEmitter();\n      case \"bolt\":\n        return this.createBoltParticleEmitter();\n      case \"normal\":\n        return this.createNormalParticleEmitter();\n      case \"effect\":\n      default:\n        return this.createEffectParticleEmitter();\n    }\n  }\n\n  createStarParticleEmitter() {\n    const emitter = new StarParticleEmitter(\n      this.scene,\n      this.defaultParticleAmount\n    );\n    emitter.setPosition(this.position);\n    return emitter;\n  }\n\n  createEffectParticleEmitter() {\n    const emitter = new ParticleEmitter(this.scene, this.defaultParticleAmount);\n    emitter.setPosition(this.position);\n    return emitter;\n  }\n\n  createNormalParticleEmitter() {\n    const emitter = new ParticleEmitter(\n      this.scene,\n      this.defaultParticleAmount,\n      { blending: THREE.NormalBlending }\n    );\n    emitter.setPosition(this.position);\n    return emitter;\n  }\n\n  createBoltParticleEmitter() {\n    const emitter = this.boltInstanceFactory.create(this.defaultParticleAmount);\n    emitter.setParentPosition(this.position);\n    return emitter;\n  }\n\n  getParticle(reserver, type = \"effect\") {\n    let emitter = this.emitters[type].find((emitter) => emitter.hasFree());\n\n    if (!emitter) {\n      emitter = this.createParticleEmitter(type);\n      this.emitters[type].push(emitter);\n    }\n\n    const particle = emitter.getParticle();\n\n    this.reservations.push({ reserver, emitter, index: particle.index });\n\n    return particle;\n  }\n\n  getStarParticle(reserver) {\n    return this.getParticle(reserver, \"star\");\n  }\n\n  getBoltParticle(reserver) {\n    return this.getParticle(reserver, \"bolt\");\n  }\n\n  getEffectParticle(reserver) {\n    return this.getParticle(reserver, \"effect\");\n  }\n\n  getNormalParticle(reserver) {\n    return this.getParticle(reserver, \"normal\");\n  }\n\n  setPosition(position) {\n    this.position = position;\n    this.emitters.bolt.forEach((emitter) =>\n      emitter.setParentPosition(position)\n    );\n    this.emitters.star.forEach((emitter) => emitter.setPosition(position));\n    this.emitters.effect.forEach((emitter) => emitter.setPosition(position));\n    this.emitters.normal.forEach((emitter) => emitter.setPosition(position));\n  }\n\n  cleanUp() {\n    this.emitters.star.forEach((emitter) => {\n      emitter.cleanUp();\n    });\n\n    this.emitters.bolt.forEach((emitter) => {\n      emitter.cleanUp();\n    });\n\n    this.emitters.effect.forEach((emitter) => {\n      emitter.cleanUp();\n    });\n\n    this.emitters.normal.forEach((emitter) => {\n      emitter.cleanUp();\n    });\n\n    this.emitters = {\n      star: [],\n      bolt: [],\n      effect: [],\n      normal: [],\n    };\n  }\n\n  release(reserver) {\n    this.reservations.forEach((reservation) => {\n      if (reservation.reserver === reserver) {\n        reservation.emitter.freeParticles(reservation.index);\n      }\n    });\n  }\n\n  render(payload) {\n    this.emitters.star.forEach((emitter) => {\n      emitter.render(payload);\n    });\n\n    this.emitters.effect.forEach((emitter) => {\n      emitter.render(payload);\n    });\n\n    this.emitters.normal.forEach((emitter) => {\n      emitter.render(payload);\n    });\n\n    this.boltInstanceFactory.render(payload);\n  }\n}\n\nexport default ParticleEmitterContainer;\n","import * as THREE from \"three\";\nimport { degreeToRadian } from \"../../../../../model/utils/math\";\n\nconst changeAttribute = (geometry, index, key, values) => {\n  values = [].concat(values);\n\n  var target = geometry.attributes[key].array;\n\n  values.forEach(function (value, i) {\n    target[index * values.length + i] = value;\n  });\n\n  geometry.attributes[key].needsUpdate = true;\n};\n\nclass StarParticle {\n  constructor(material, geometry) {\n    this.material = material;\n    this.geometry = geometry;\n    this.index = 0;\n    this.emitter = null;\n\n    this.texture = {\n      gas: 0,\n      bolt: 1,\n      glow: 2,\n      ring: 3,\n      starLine: 4,\n    };\n  }\n\n  create(index, emitter) {\n    this.index = index;\n    this.emitter = emitter;\n    return this;\n  }\n\n  setInitialValues() {\n    this.setPosition({ x: 0, y: 0 });\n    this.setColor(new THREE.Color(0, 0, 0));\n    this.setOpacity(0.0);\n    this.setSize(0.0);\n    this.setSizeChange(0.0);\n    this.setAngle(0.0);\n    this.setAngleChange(0.0);\n    this.setActivationTime(0.0);\n    this.setTexture(this.texture.glow);\n    this.setParallaxFactor(0.0);\n    this.setSineFrequency(0.0);\n    this.setSineAmplitude(1);\n\n    return this;\n  }\n\n  serialize() {\n    return {\n      index: this.index,\n      emitter: this.emitter,\n    };\n  }\n\n  setTexture(tex) {\n    changeAttribute(this.geometry, this.index, \"textureNumber\", tex);\n\n    return this;\n  }\n\n  setParallaxFactor(parallaxFactor) {\n    changeAttribute(\n      this.geometry,\n      this.index,\n      \"parallaxFactor\",\n      -1.0 + parallaxFactor\n    );\n    return this;\n  }\n\n  setSineFrequency(sineFrequency) {\n    changeAttribute(this.geometry, this.index, \"sineFrequency\", sineFrequency);\n    return this;\n  }\n\n  setSineAmplitude(sineAmplitude) {\n    changeAttribute(this.geometry, this.index, \"sineAmplitude\", sineAmplitude);\n    return this;\n  }\n\n  setSize(size) {\n    changeAttribute(this.geometry, this.index, \"size\", size);\n    return this;\n  }\n\n  setSizeChange(size) {\n    changeAttribute(this.geometry, this.index, \"sizeChange\", size);\n    return this;\n  }\n\n  setColor(color) {\n    changeAttribute(this.geometry, this.index, \"color\", [\n      color.r,\n      color.g,\n      color.b,\n    ]);\n    return this;\n  }\n\n  setOpacity(opacity) {\n    changeAttribute(this.geometry, this.index, \"opacity\", opacity);\n    return this;\n  }\n\n  setPosition(pos) {\n    changeAttribute(\n      this.geometry,\n      this.index,\n      \"position\",\n      [pos.x, pos.y, pos.z || 0],\n      true\n    );\n    return this;\n  }\n\n  setAngle(angle) {\n    changeAttribute(this.geometry, this.index, \"angle\", degreeToRadian(angle));\n    return this;\n  }\n\n  setAngleChange(angle) {\n    changeAttribute(\n      this.geometry,\n      this.index,\n      \"angleChange\",\n      degreeToRadian(angle)\n    );\n    return this;\n  }\n\n  deactivate() {\n    this.setInitialValues();\n    return this;\n  }\n\n  setActivationTime(gameTime) {\n    changeAttribute(this.geometry, this.index, \"activationGameTime\", gameTime);\n    return this;\n  }\n}\n\nexport default StarParticle;\n","import * as THREE from \"three\";\nimport Animation from \"../Animation\";\nimport StarParticle from \"./StarParticle\";\nimport { starVertexShader, starFragmentShader } from \"../../renderer/shader\";\n\nconst texture = new THREE.TextureLoader().load(\n  \"/img/effect/effectTextures1024.png\"\n);\n\nclass StarParticleEmitter extends Animation {\n  constructor(scene, particleCount, args) {\n    super();\n\n    if (!args) {\n      args = {};\n    }\n\n    var blending = args.blending || THREE.AdditiveBlending;\n\n    if (!particleCount) {\n      particleCount = 1000;\n    }\n\n    this.scene = scene;\n\n    this.free = [];\n    for (var i = 0; i < particleCount; i++) {\n      this.free.push(i);\n    }\n\n    this.effects = 0;\n\n    var uniforms = {\n      gameTime: { type: \"f\", value: 0.0 },\n      texture: { type: \"t\", value: texture },\n    };\n\n    this.particleGeometry = new THREE.BufferGeometry();\n\n    this.particleGeometry.setAttribute(\n      \"position\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"size\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"sizeChange\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"color\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount * 3),\n        3\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"opacity\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"activationGameTime\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"textureNumber\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"angle\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"angleChange\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"parallaxFactor\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"sineFrequency\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n    this.particleGeometry.setAttribute(\n      \"sineAmplitude\",\n      new THREE.Float32BufferAttribute(\n        new Float32Array(particleCount),\n        1\n      ).setDynamic(true)\n    );\n\n    this.particleGeometry.dynamic = true;\n\n    this.particleGeometry.setDrawRange(0, particleCount);\n\n    this.particleMaterial = new THREE.ShaderMaterial({\n      uniforms: uniforms,\n      vertexShader: starVertexShader,\n      fragmentShader: starFragmentShader,\n      transparent: true,\n      blending: blending,\n      depthWrite: false, //Try removing this if problems with transparency\n    });\n\n    /*\n        THREE.NormalBlending = 0;\n        THREE.AdditiveBlending = 1;\n        THREE.SubtractiveBlending = 2;\n        THREE.MultiplyBlending = 3;\n        THREE.AdditiveAlphaBlending = 4;\n        */\n\n    this.flyParticle = new StarParticle(\n      this.particleMaterial,\n      this.particleGeometry\n    );\n\n    while (particleCount--) {\n      this.flyParticle.create(particleCount).setInitialValues();\n    }\n\n    this.mesh = new THREE.Points(this.particleGeometry, this.particleMaterial);\n    this.mesh.frustumCulled = false;\n    //this.mesh.matrixAutoUpdate = false;\n    this.mesh.position.set(0, 0, args.z || -10);\n\n    this.needsUpdate = false;\n\n    this.scene.add(this.mesh);\n  }\n\n  setPosition({ x, y, z }) {\n    this.mesh.position.set(x, y, z);\n    this.needsUpdate = true;\n  }\n\n  cleanUp() {\n    this.mesh.material.dispose();\n    this.scene.remove(this.mesh);\n  }\n\n  render({ total }) {\n    this.particleMaterial.uniforms.gameTime.value = total;\n    this.mesh.material.needsUpdate = true;\n  }\n\n  hasFree() {\n    return this.free.length > 0;\n  }\n\n  getParticle() {\n    if (this.free.length === 0) {\n      return false;\n    }\n\n    var i = this.free.pop();\n\n    return this.flyParticle.create(i);\n  }\n\n  freeParticles(particleIndices) {\n    particleIndices = [].concat(particleIndices);\n\n    particleIndices.forEach(function (i) {\n      this.flyParticle.create(i).setInitialValues();\n    }, this);\n    this.free = this.free.concat(particleIndices);\n  }\n}\n\nexport default StarParticleEmitter;\n","import {\r\n  FrontSection,\r\n  PrimarySection,\r\n  AftSection,\r\n  StarboardFrontSection,\r\n  PortFrontSection,\r\n  StarboardAftSection,\r\n  PortAftSection,\r\n} from \"../../../../../model/unit/system/systemSection/index.mjs\";\r\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\r\n\r\nclass ShipObjectBoundingBox {\r\n  constructor(ship) {\r\n    this.ship = ship;\r\n  }\r\n\r\n  init(dimensions) {\r\n    this.dimensions = dimensions;\r\n  }\r\n\r\n  getAmountOfVerticalSections() {\r\n    let amount = 1;\r\n\r\n    if (this.ship.systems.sections.hasFrontSectionWithStructure()) {\r\n      amount++;\r\n    }\r\n\r\n    if (this.ship.systems.sections.hasAftSectionWithStructure()) {\r\n      amount++;\r\n    }\r\n\r\n    return amount;\r\n  }\r\n\r\n  getAmountOfHorizontalSections(section) {\r\n    let amount = 1;\r\n\r\n    if (section instanceof FrontSection) {\r\n      if (this.ship.systems.sections.hasStarboardFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasPortFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    } else if (section instanceof PrimarySection) {\r\n      return 1;\r\n    } else if (section instanceof AftSection) {\r\n      if (this.ship.systems.sections.hasStarboardAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasPortAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    } else if (section instanceof PortFrontSection) {\r\n      if (this.ship.systems.sections.hasStarboardFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    } else if (section instanceof StarboardFrontSection) {\r\n      if (this.ship.systems.sections.hasPortFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasFrontSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    } else if (section instanceof PortAftSection) {\r\n      if (this.ship.systems.sections.hasStarboardAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    } else if (section instanceof StarboardAftSection) {\r\n      if (this.ship.systems.sections.hasPortAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      if (this.ship.systems.sections.hasAftSectionWithStructure()) {\r\n        amount++;\r\n      }\r\n\r\n      return amount;\r\n    }\r\n  }\r\n\r\n  getBoundsForSectionDisregardStructure(section) {\r\n    const { start: startX, end: endX } = this.getX(section, true);\r\n    const { start: startY, end: endY } = this.getY(section, true);\r\n    return {\r\n      start: new Vector(startX, startY, -this.dimensions.z / 2),\r\n      end: new Vector(endX, endY, this.dimensions.z / 2),\r\n    };\r\n  }\r\n\r\n  getBoundsForSection(section) {\r\n    const { start: startX, end: endX } = this.getX(section);\r\n    const { start: startY, end: endY } = this.getY(section);\r\n    return {\r\n      start: new Vector(startX, startY, -this.dimensions.z / 2),\r\n      end: new Vector(endX, endY, this.dimensions.z / 2),\r\n    };\r\n  }\r\n\r\n  getY(section, disregardStructure = false) {\r\n    const horizontal = disregardStructure\r\n      ? 3\r\n      : this.getAmountOfHorizontalSections(section);\r\n    if (section instanceof FrontSection || section instanceof AftSection) {\r\n      return {\r\n        start: -this.dimensions.y / horizontal / 2,\r\n        end: this.dimensions.y / horizontal / 2,\r\n      };\r\n    } else if (\r\n      section instanceof StarboardFrontSection ||\r\n      section instanceof StarboardAftSection\r\n    ) {\r\n      return {\r\n        start: -this.dimensions.y / 2, // -50\r\n        end: -this.dimensions.y / 2 + this.dimensions.y / horizontal, // -50 + (100, 50, 33) = 50, 0, -17\r\n      };\r\n    } else if (\r\n      section instanceof PortFrontSection ||\r\n      section instanceof PortAftSection\r\n    ) {\r\n      return {\r\n        start: this.dimensions.y / 2 - this.dimensions.y / horizontal, // 50 - (100, 50, 33) = -50, 0, 17\r\n        end: this.dimensions.y / 2, // 50\r\n      };\r\n    } else if (section instanceof PrimarySection) {\r\n      return {\r\n        start: -this.dimensions.y / 2,\r\n        end: this.dimensions.y / 2,\r\n      };\r\n    }\r\n  }\r\n\r\n  getX(section, disregardStructure = false) {\r\n    const vertical = disregardStructure\r\n      ? 3\r\n      : this.getAmountOfVerticalSections();\r\n    if (\r\n      section instanceof FrontSection ||\r\n      section instanceof StarboardFrontSection ||\r\n      section instanceof PortFrontSection\r\n    ) {\r\n      return {\r\n        start: this.dimensions.x / 2 - this.dimensions.x / vertical, //50 - (100, 50, 33) = -50, 0, 17,\r\n        end: this.dimensions.x / 2, // 50\r\n      };\r\n    } else if (section instanceof PrimarySection) {\r\n      return {\r\n        start: -this.dimensions.x / vertical / 2,\r\n        end: this.dimensions.x / vertical / 2,\r\n      };\r\n    } else if (\r\n      section instanceof AftSection ||\r\n      section instanceof StarboardAftSection ||\r\n      section instanceof PortAftSection\r\n    ) {\r\n      return {\r\n        start: -this.dimensions.x / 2, // -50\r\n        end: -this.dimensions.x / 2 + this.dimensions.x / vertical, // -50 + (100, 50, 33) = 50, 0, -33\r\n      };\r\n    }\r\n  }\r\n\r\n  getRandomPositionForSystem(system, getRandom = Math.random) {\r\n    const section = this.ship.systems.sections.getSectionBySystem(system);\r\n    const bounds = this.getBoundsForSectionDisregardStructure(section);\r\n    const boundSize = new Vector(\r\n      Math.abs(bounds.end.x - bounds.start.x),\r\n      Math.abs(bounds.end.y - bounds.start.y),\r\n      Math.abs(bounds.end.z - bounds.start.z)\r\n    );\r\n\r\n    const offset = new Vector(\r\n      boundSize.x * getRandom(),\r\n      boundSize.y * getRandom(),\r\n      boundSize.z * getRandom()\r\n    );\r\n\r\n    return bounds.start.add(offset).setZ(0);\r\n  }\r\n\r\n  getRandomPositionOnShip(getRandom = Math.random) {\r\n    return new Vector(\r\n      getRandom() * this.dimensions.x - this.dimensions.x / 2,\r\n      getRandom() * this.dimensions.y - this.dimensions.y / 2\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShipObjectBoundingBox;\r\n","import * as THREE from \"three\";\nimport Vector from \"../../../../../model/utils/Vector\";\n\nclass BoltEffect {\n  create(\n    startTime,\n    startPosition,\n    endPosition,\n    speed,\n    fade,\n    duration,\n    args,\n    getRandom,\n    particleEmitterContainer,\n    context\n  ) {\n    this.particleEmitterContainer = particleEmitterContainer;\n\n    const velocity = new Vector(endPosition)\n      .sub(startPosition)\n      .normalize()\n      .multiplyScalar(speed);\n\n    this.duration = this.createBolt(\n      startTime,\n      startPosition,\n      endPosition,\n      duration,\n      velocity,\n      speed,\n      fade,\n      args,\n      particleEmitterContainer,\n      getRandom,\n      context\n    );\n  }\n\n  createBolt(\n    startTime,\n    startPosition,\n    endPosition,\n    duration,\n    velocity,\n    speed,\n    fade,\n    args,\n    particleEmitterContainer,\n    getRandom,\n    context\n  ) {\n    const size = args.size || 10;\n    const directionNormal = endPosition.sub(startPosition).normalize();\n    const color = args.color\n      ? new THREE.Color(args.color[0], args.color[1], args.color[2])\n      : new THREE.Color(1, 0, 0);\n\n    const tailLength = args.length ? args.length : size * 2;\n\n    const repeat = args.repeat || 0;\n\n    particleEmitterContainer\n      .getBoltParticle(context)\n      .setScale(tailLength, size)\n      .setOpacity(0.5)\n      .setPosition(startPosition)\n      .setBoltTexture()\n      .setRotation(directionNormal)\n      .setColor(color)\n      .setVelocity(velocity)\n      .setActivationTime(startTime)\n      .setDeactivationTime(startTime + duration, fade)\n      .setRepeat(repeat);\n\n    const coreLength = (args.length ? args.length : size * 2) * 0.5;\n\n    const corePosition = coreLength * 0.2;\n    const coreTime = corePosition / speed;\n\n    const coreOpacity = args.coreOpacity || 0.5;\n\n    particleEmitterContainer\n      .getBoltParticle(context)\n      //.setActivationTime(0)\n      .setScale(coreLength, size * 0.5)\n      .setOpacity(coreOpacity)\n      .setPosition(startPosition)\n      .setBoltTexture()\n      .setRotation(directionNormal)\n      //.setVelocity(velocity)\n      .setColor(new THREE.Color(1, 1, 1))\n      .setVelocity(velocity)\n      .setActivationTime(startTime + coreTime)\n      .setDeactivationTime(startTime + duration + coreTime, fade)\n      .setRepeat(repeat);\n\n    return duration + coreTime;\n  }\n}\n\nexport default BoltEffect;\n","import BaseParticle, {\n  TEXTURE_GAS,\n  TEXTURE_BOLT,\n  TEXTURE_GLOW,\n  TEXTURE_RING,\n  TEXTURE_STARLINE,\n} from \"../particle/BaseParticle\";\nimport Animation from \"../Animation\";\nimport { getPointInDirection } from \"../../../../../model/utils/math.mjs\";\nimport * as THREE from \"three\";\nimport BoltEffect from \"./BoltEffect\";\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\n\nconst boltEffect = new BoltEffect();\n\nclass ExplosionEffect extends Animation {\n  constructor(emitterContainer, getRandom, args = {}, context) {\n    super(getRandom);\n\n    this.emitterContainer = emitterContainer;\n    this.position = args.position || new Vector();\n    this.time = args.time || 0;\n    this.type = args.type || \"gas\";\n    this.size = args.size || 16;\n    this.speed = args.speed || 1;\n    this.ring = args.ring || false;\n    this.duration = args.duration;\n    this.color = args.color;\n    this.opacity = args.opacity || 1;\n    this.repeat = args.repeat || 0;\n\n    this.movement = args.velocity || new Vector();\n\n    this.context = context;\n    this.create();\n  }\n\n  create() {\n    switch (this.type) {\n      case \"gas\":\n        this.createGas();\n        break;\n\n      case \"glow\":\n        this.createGlow();\n        break;\n\n      case \"emp\":\n        this.createEMP();\n        break;\n\n      case \"pillar\":\n        this.createPillar();\n        break;\n      default:\n        this.createGas();\n        break;\n    }\n  }\n\n  createGlow() {\n    var amount = 3;\n\n    this.createMainGlow(amount, this.size);\n    this.createCore(this.size, TEXTURE_GLOW);\n    this.createWhiteCenter(this.size * 2, 0.8);\n  }\n\n  createGas() {\n    var amount = Math.ceil(this.size / 4);\n    if (amount > 6) {\n      amount = 6;\n    }\n\n    var shootoffs = Math.ceil(Math.random() * 20 + 10);\n\n    this.createShootOffs(shootoffs, this.size);\n    this.createMainGlow(1, this.size);\n    this.createCore(this.size, TEXTURE_GLOW);\n    this.createMain(amount, this.size);\n    this.createWhiteCenter(this.size * 2, 0.5);\n  }\n\n  createPillar() {\n    //if ( this.ring)\n    //\tthis.createRing(this.size, emitter);\n\n    var amount = Math.ceil(this.size / 4);\n    if (amount > 6) {\n      amount = 6;\n    }\n\n    var shootoffs = Math.ceil(Math.random() * 20 + 10);\n\n    this.createPillars(shootoffs, this.size);\n    this.createMainGlow(Math.ceil(amount / 2), this.size);\n  }\n\n  createEMP() {\n    //if ( this.ring)\n    //\tthis.createRing(this.size, emitter);\n\n    var amount = Math.ceil(this.size / 4);\n    if (amount > 6) {\n      amount = 6;\n    }\n\n    this.createEmpGlow(Math.ceil(amount / 2), this.size);\n    this.createWhiteCenter(this.size * 4, 0.5);\n    this.createEmpCore(this.size, TEXTURE_GAS);\n  }\n\n  createWhiteCenter(size, opacity) {\n    if (!opacity) {\n      opacity = 1.0;\n    }\n\n    var activation = this.time;\n    var fadeInSpeed = 100;\n    var fadeOutAt = activation + fadeInSpeed;\n    //amount = 1;\n\n    this.emitterContainer\n      .getParticle(this.context)\n      .setSize(size / 4)\n      //.setSizeChange(128)\n      .setOpacity(opacity * this.opacity)\n      .setFadeIn(activation, fadeInSpeed)\n      .setFadeOut(fadeOutAt, 500)\n      .setColor({ r: 1, g: 1, b: 1 })\n      .setPosition({\n        x: this.position.x,\n        y: this.position.y,\n        z: this.position.z,\n      })\n      .setTexture(TEXTURE_GLOW)\n      .setActivationTime(activation)\n      .setRepeat(this.repeat)\n      .setVelocity(this.speed);\n  }\n\n  createShootOffs(amount, radius, args) {\n    while (amount--) {\n      this.createShootOff(radius, args);\n    }\n  }\n\n  createShootOff(radius, args) {\n    if (!args) {\n      args = {};\n    }\n\n    const speed = (Math.random() * 0.2 + 0.1) * this.speed * this.size * 0.01;\n\n    const startPosition = args.position || this.position;\n    const endPosition =\n      args.target ||\n      new Vector(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5)\n        .normalize()\n        .multiplyScalar((Math.random() * 10 + 3) * this.size)\n        .add(startPosition);\n\n    const color = this.getRandomColor();\n    boltEffect.create(\n      this.time + Math.floor((Math.random() * 30) / this.speed),\n      new Vector(startPosition),\n      new Vector(endPosition),\n      speed * 1.5,\n      args.fadeOutSpeed || Math.random() * 500 + 250,\n      Math.floor(Math.random() * 500 + 250) / this.speed,\n      {\n        size: radius / 3,\n        color: [color.r, color.g, color.b],\n        coreOpacity: 0.1,\n        repeat: this.repeat,\n      },\n      this.getRandom,\n      this.emitterContainer,\n      this.context\n    );\n  }\n\n  createPillars(amount, radius) {\n    var size = radius;\n    //amount = 1;\n    while (amount--) {\n      var particle = this.emitterContainer.getParticle(this.context);\n      var activationTime =\n        this.time + Math.floor((Math.random() * 30) / this.speed);\n      var fadeOutAt =\n        activationTime + Math.floor((Math.random() * 50) / this.speed);\n\n      var angle = Math.floor(Math.random() * 360);\n      var target = getPointInDirection(0.1, -angle, 0, 0);\n\n      particle\n        .setSize(Math.floor(Math.random() * size) + size / 2)\n        .setOpacity(Math.random() * 0.1 + 0.9)\n        .setFadeIn(activationTime, Math.random() * 50 + 25)\n        .setFadeOut(\n          fadeOutAt,\n          (Math.random() * 500) / this.speed + 250 / this.speed\n        )\n        .setColor(getYellowColor())\n        .setPosition({\n          x: this.position.x,\n          y: this.position.y,\n          z: this.position.z,\n        })\n        .setVelocity(target)\n        .setAngle(angle)\n        .setTexture(TEXTURE_BOLT)\n        .setActivationTime(activationTime)\n        .setRepeat(this.repeat);\n\n      this.createShootOff(radius, {\n        angle: angle,\n        activationTime: activationTime,\n      });\n    }\n  }\n\n  createCore(radius, texture) {\n    var size = radius;\n\n    var particle = this.emitterContainer.getParticle(this.context);\n    var activationTime = this.time + (Math.random() * 0.005) / this.speed;\n    var fadeOutAt =\n      activationTime + (Math.random() * 0.02) / this.speed + 0.03 / this.speed;\n\n    particle\n      .setSize(Math.floor((Math.random() * size) / 2) + size)\n      .setOpacity(Math.random() * 0.2 + 0.6)\n      .setFadeIn(activationTime, Math.random() * 0.005 + 0.0025)\n      .setFadeOut(\n        fadeOutAt,\n        (Math.random() * 0.05) / this.speed + 0.025 / this.speed\n      )\n      .setOpacity(this.opacity * 0.5)\n      .setColor(getCoreColor())\n      .setPosition({\n        x: this.position.x, // + Math.floor(Math.random()*radius/10)-radius/5,\n        y: this.position.y, // + Math.floor(Math.random()*radius/10)-radius/5,\n        z: this.position.z,\n      })\n      .setAngle(45)\n      .setTexture(texture)\n      .setVelocity(this.movement)\n      .setAngle(\n        Math.floor(Math.random() * 360),\n        Math.floor(Math.random() * 20 * this.speed) - 10 * this.speed\n      )\n\n      .setActivationTime(activationTime)\n      .setRepeat(this.repeat);\n  }\n\n  createEmpGlow(amount, radius) {\n    var size = radius * 2;\n    while (amount--) {\n      var particle = this.emitterContainer.getParticle(this.context);\n      var activationTime = this.time;\n      var fadeOutAt = activationTime;\n\n      particle\n        .setSize(size)\n        .setSizeChange(0.004 * this.size)\n        .setOpacity(Math.random() * 0.1 + 0.2)\n        .setFadeIn(activationTime, Math.random() * 0.005 + 0.0025)\n        .setFadeOut(fadeOutAt, (Math.random() * 200 + 800) / this.speed)\n        .setColor({ r: 122 / 255, g: 221 / 255, b: 255 / 255 })\n        .setVelocity(this.movement)\n        .setPosition({\n          x: this.position.x,\n          y: this.position.y,\n          z: this.position.z,\n        })\n        .setTexture(TEXTURE_GLOW)\n        .setActivationTime(activationTime)\n        .setRepeat(this.repeat);\n    }\n  }\n\n  createEmpCore(radius, texture) {\n    var size = radius;\n\n    var particle = this.emitterContainer.getParticle(this.context);\n    var activationTime = this.time;\n    var fadeOutAt = activationTime;\n\n    particle\n      .setSize(size * 0.9)\n      .setSizeChange(0.0039 * this.size)\n      .setOpacity(Math.random() * 0.2 + 0.6)\n      .setFadeIn(activationTime, 0.1)\n      .setFadeOut(fadeOutAt, (Math.random() * 200 + 800) / this.speed)\n      .setColor(getCoreColor())\n      .setPosition({\n        x: this.position.x, // + Math.floor(Math.random()*radius/10)-radius/5,\n        y: this.position.y, // + Math.floor(Math.random()*radius/10)-radius/5,\n        z: this.position.z,\n      })\n      .setAngle(45)\n      .setTexture(texture)\n      .setVelocity(this.movement)\n      .setAngle(Math.floor(Math.random() * 360), 5 * this.speed)\n      .setActivationTime(activationTime)\n      .setRepeat(this.repeat);\n  }\n\n  createMain(amount, radius) {\n    var size = radius;\n\n    this.emitterContainer\n      .getNormalParticle(this.context)\n      .setSize(this.size)\n      .setOpacity(1)\n      .setFadeOut(this.time + 500)\n      .setColor(getCoreColor())\n      .setPosition({\n        x: this.position.x + (Math.floor(Math.random() * radius) - radius) / 8,\n        y: this.position.y + (Math.floor(Math.random() * radius) - radius) / 8,\n        z: this.position.z + (Math.floor(Math.random() * radius) - radius) / 8,\n      })\n      .setTexture(TEXTURE_GLOW)\n      .setActivationTime(this.time);\n\n    this.emitterContainer\n      .getNormalParticle(this.context)\n      .setSize(this.size * 2)\n      .setOpacity(0.5)\n      .setFadeOut(this.time + 500)\n      .setColor(getYellowColor())\n      .setPosition({\n        x: this.position.x + (Math.floor(Math.random() * radius) - radius) / 8,\n        y: this.position.y + (Math.floor(Math.random() * radius) - radius) / 8,\n        z: this.position.z + (Math.floor(Math.random() * radius) - radius) / 8,\n      })\n      .setTexture(TEXTURE_GLOW)\n      .setActivationTime(this.time);\n\n    while (amount--) {\n      var particle = this.emitterContainer.getParticle(this.context);\n      var activationTime =\n        this.time + Math.floor((Math.random() * 300) / this.speed);\n      var fadeOutAt =\n        activationTime + Math.floor((Math.random() * 500) / this.speed);\n\n      particle\n        .setSize(Math.floor(Math.random() * size) + size / 2)\n        .setSizeChange(this.size * 0.003)\n        .setOpacity(Math.random() * 0.1 + 0.05)\n        .setFadeIn(activationTime, Math.random() * 50 + 25)\n        .setFadeOut(\n          fadeOutAt,\n          (Math.random() * 500) / this.speed + 500 / this.speed\n        )\n        .setColor(this.getRandomColor())\n        .setPosition({\n          x:\n            this.position.x + (Math.floor(Math.random() * radius) - radius) / 8,\n          y:\n            this.position.y + (Math.floor(Math.random() * radius) - radius) / 8,\n          z:\n            this.position.z + (Math.floor(Math.random() * radius) - radius) / 8,\n        })\n        .setVelocity(this.movement)\n        .setAngle(Math.floor(Math.random() * 360))\n        .setActivationTime(activationTime)\n        .setTexture(TEXTURE_GAS)\n        .setRepeat(this.repeat);\n    }\n  }\n\n  createMainGlow(amount, radius) {\n    var size = radius * 2;\n    while (amount--) {\n      var particle = this.emitterContainer.getParticle(this.context);\n      var activationTime =\n        this.time + Math.floor((Math.random() * 0.03) / this.speed);\n      var fadeOutAt = this.duration\n        ? activationTime + this.duration\n        : activationTime + Math.floor((Math.random() * 0.05) / this.speed);\n\n      particle\n        .setSize(Math.floor((Math.random() * size) / 2) + size)\n        .setOpacity(Math.random() * 0.1 + 0.4)\n        .setFadeIn(activationTime, Math.random() * 0.005 + 0.0025)\n        .setFadeOut(fadeOutAt, (Math.random() * 200 + 800) / this.speed)\n        .setColor(this.getRandomColor())\n        .setVelocity(this.movement)\n        .setOpacity(this.opacity)\n        .setPosition({\n          x: this.position.x,\n          y: this.position.y,\n          z: this.position.z,\n        })\n        .setTexture(TEXTURE_GLOW)\n        .setActivationTime(activationTime)\n        .setRepeat(this.repeat);\n    }\n  }\n\n  getRandomColor = function () {\n    if (this.color) {\n      return this.color;\n    }\n\n    return new THREE.Color().setRGB(\n      1,\n      (155 - Math.floor(Math.random() * 75)) / 255,\n      Math.floor(Math.random() * 155) / 255\n    );\n  };\n\n  getSmokeColor = function () {\n    var c = (Math.random() * 50 + 20) / 255;\n    return new THREE.Color().setRGB(c, c, c + 0.05);\n  };\n\n  deactivate() {\n    this.emitterContainer.release(this);\n  }\n}\n\nconst getCoreColor = () => {\n  return new THREE.Color().setRGB(255, 255, 255);\n};\n\nconst getYellowColor = () => {\n  return new THREE.Color().setRGB(\n    1,\n    (Math.floor(Math.random() * 20) + 235) / 255,\n    (Math.floor(Math.random() * 10) + 130) / 255\n  );\n};\n\nexport default ExplosionEffect;\n","import { getSeededRandomGenerator } from \"../../../../../model/utils/math.mjs\";\r\nimport ExplosionEffect from \"../../animation/effect/ExplosionEffect\";\r\nimport * as THREE from \"three\";\r\nimport {\r\n  TEXTURE_GAS,\r\n  TEXTURE_BOLT,\r\n  TEXTURE_GLOW,\r\n  TEXTURE_RING,\r\n  TEXTURE_STARLINE,\r\n} from \"../../animation/particle/BaseParticle\";\r\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\r\n\r\nclass ShipObjectSectionDamageEffect {\r\n  constructor(ship) {\r\n    this.ship = ship;\r\n    this.damageCache = [];\r\n    this.animationTime = 0;\r\n    this.center = null;\r\n    this.scene = null;\r\n  }\r\n\r\n  init(boundingBox, particleContainer, shipZ, center, scene) {\r\n    this.boundingBox = boundingBox;\r\n    this.particleContainer = particleContainer;\r\n    this.shipZ = shipZ;\r\n    this.center = center;\r\n\r\n    this.particleContainer.setPosition({\r\n      ...this.center,\r\n      z: this.center.z + this.shipZ,\r\n    });\r\n    this.scene = scene;\r\n  }\r\n\r\n  createDamage() {\r\n    this.removeDamage();\r\n    this.ship.systems.sections\r\n      .getSectionsWithStructure()\r\n      .filter((section) => section.getStructure().isDestroyed())\r\n      .forEach(this.createDamageForSection.bind(this));\r\n  }\r\n\r\n  createDamageForSections(sections) {\r\n    this.removeDamage();\r\n    sections.forEach(this.createDamageForSection.bind(this));\r\n  }\r\n\r\n  removeDamage() {\r\n    this.damageCache.forEach(({ particles }) =>\r\n      particles.forEach(({ index, emitter }) =>\r\n        emitter.getByIndex(index).setOpacity(0)\r\n      )\r\n    );\r\n  }\r\n\r\n  setShipZ(shipZ) {\r\n    this.shipZ = shipZ;\r\n    this.particleContainer.setPosition({\r\n      ...this.center,\r\n      z: this.center.z + this.shipZ,\r\n    });\r\n  }\r\n\r\n  activateFromCache(section) {\r\n    const cached = this.damageCache.find(\r\n      ({ location }) => section.location === location\r\n    );\r\n\r\n    if (!cached) {\r\n      return false;\r\n    }\r\n\r\n    cached.particles.forEach(({ index, emitter, opacity }) =>\r\n      emitter.getByIndex(index).setOpacity(opacity)\r\n    );\r\n\r\n    return true;\r\n  }\r\n\r\n  createDamageForSection(section) {\r\n    if (this.activateFromCache(section)) {\r\n      return;\r\n    }\r\n\r\n    const getRandom = getSeededRandomGenerator(this.ship.id + section.location);\r\n    const bounds = this.boundingBox.getBoundsForSection(section);\r\n\r\n    let particles = [];\r\n\r\n    const dimensionDebugCube = () => {\r\n      const getColor = () => {\r\n        switch (section.location) {\r\n          case 0:\r\n            return 0x0000ff;\r\n          case 1:\r\n            return 0x00ff00;\r\n          case 2:\r\n            return 0x000000;\r\n          case 31:\r\n            return 0xffff00;\r\n          case 32:\r\n            return 0x00ffff;\r\n          case 41:\r\n            return 0x990000;\r\n          case 42:\r\n            return 0x000099;\r\n        }\r\n      };\r\n\r\n      const cube = new THREE.Mesh(\r\n        new THREE.BoxGeometry(1, 1, 1),\r\n        new THREE.MeshBasicMaterial({\r\n          color: getColor(),\r\n          wireframe: true,\r\n        })\r\n      );\r\n\r\n      const c = bounds.start\r\n        .add(bounds.end)\r\n        .multiplyScalar(0.5)\r\n        .add(this.center);\r\n\r\n      cube.scale.set(\r\n        Math.abs(bounds.end.x - bounds.start.x),\r\n        Math.abs(bounds.end.y - bounds.start.y),\r\n        Math.abs(bounds.end.z - bounds.start.z)\r\n      );\r\n      cube.position.set(c.x, c.y, c.z + this.shipZ);\r\n      this.scene.add(cube);\r\n    };\r\n\r\n    //dimensionDebugCube();\r\n\r\n    const boundSize = new Vector(\r\n      Math.abs(bounds.end.x - bounds.start.x),\r\n      Math.abs(bounds.end.y - bounds.start.y),\r\n      Math.abs(bounds.end.z - bounds.start.z)\r\n    );\r\n\r\n    let count =\r\n      Math.ceil((boundSize.x * boundSize.y) / 500) +\r\n      Math.floor(getRandom() * 3);\r\n\r\n    while (count--) {\r\n      const offset = new Vector(\r\n        boundSize.x * getRandom(),\r\n        boundSize.y * getRandom(),\r\n        boundSize.z * getRandom()\r\n      );\r\n\r\n      const size = getRandom() * 0.5 + 0.5;\r\n\r\n      const position = bounds.start.add(offset).setZ(0);\r\n\r\n      const random = getRandom();\r\n      particles = [\r\n        ...particles,\r\n        ...createGlow(position, size, this.particleContainer, getRandom, this),\r\n      ];\r\n\r\n      particles = [\r\n        ...particles,\r\n        ...createSmoke(position, size, this.particleContainer, getRandom, this),\r\n      ];\r\n\r\n      if (random < 0.5) {\r\n        let sparkCount = Math.floor(getRandom() * 10) + 5;\r\n\r\n        while (sparkCount--) {\r\n          particles = [\r\n            ...particles,\r\n            ...createSpark(position, this.particleContainer, getRandom, this),\r\n          ];\r\n        }\r\n      }\r\n    }\r\n\r\n    this.damageCache.push({\r\n      location: section.location,\r\n      particles,\r\n    });\r\n  }\r\n\r\n  render(payload) {\r\n    this.animationTime += payload.delta;\r\n    this.particleContainer.render({ ...payload, total: this.animationTime });\r\n  }\r\n}\r\n\r\nconst createSmoke = (position, size, particleContainer, getRandom, context) => {\r\n  let activation = 0;\r\n\r\n  let count = Math.floor(getRandom() * 2) + 2;\r\n  let particles = [];\r\n\r\n  particles = [\r\n    ...particles,\r\n    particleContainer\r\n      .getNormalParticle(context)\r\n      .setSize((getRandom() * 3 + 15) * size)\r\n      .setOpacity(0.8)\r\n      .setColor({ r: 0, g: 0, b: 0 })\r\n      .setPosition(position.toObject())\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setAngle(getRandom() * 360, (getRandom() - 0.5) * 0.01)\r\n      .setActivationTime(activation)\r\n      .serialize(),\r\n  ];\r\n\r\n  while (count--) {\r\n    const fadeInSpeed = getRandom() * 1000 + 3000;\r\n    const fadeOutAt = activation + fadeInSpeed;\r\n    const fadeOutSpeed = getRandom() * 1000 + 3000;\r\n\r\n    const repeat = fadeOutAt + fadeOutSpeed;\r\n\r\n    particles = [\r\n      ...particles,\r\n      particleContainer\r\n        .getNormalParticle(context)\r\n        .setSize((getRandom() * 10 + 5) * size)\r\n        .setSizeChange(getRandom() * 0.002 + 0.002)\r\n        .setOpacity(1)\r\n        .setFadeIn(activation, fadeInSpeed)\r\n        .setFadeOut(fadeOutAt, fadeOutSpeed)\r\n        .setColor(getSmokeColor())\r\n        .setPosition(position.toObject())\r\n        .setTexture(TEXTURE_GAS)\r\n        .setAngle(getRandom() * 360, (getRandom() - 0.5) * 0.001 + 0.001)\r\n        .setActivationTime(activation)\r\n        .setRepeat(repeat)\r\n        .serialize(),\r\n    ];\r\n\r\n    activation += getRandom() * 1000;\r\n  }\r\n\r\n  return particles;\r\n};\r\n\r\nconst createGlow = (position, size, particleContainer, getRandom, context) => {\r\n  let activation = 0;\r\n\r\n  let count = Math.floor(getRandom() * 2) + 2;\r\n  let particles = [];\r\n\r\n  particles = [\r\n    ...particles,\r\n    particleContainer\r\n      .getNormalParticle(context)\r\n      .setSize((getRandom() * 5 + 10) * size)\r\n      .setOpacity(0.6)\r\n      .setColor(getYellowRandomColor())\r\n      .setPosition(position.toObject())\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(activation)\r\n      .serialize(),\r\n  ];\r\n\r\n  particles = [\r\n    ...particles,\r\n    particleContainer\r\n      .getParticle(context)\r\n      .setSize((getRandom() * 3 + 4) * size)\r\n      .setOpacity(0.6)\r\n      .setColor({ r: 1, g: 1, b: 1 })\r\n      .setPosition(position.toObject())\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(activation)\r\n      .serialize(),\r\n  ];\r\n\r\n  while (count--) {\r\n    const fadeInSpeed = getRandom() * 500;\r\n    const fadeOutAt = activation + fadeInSpeed;\r\n    const fadeOutSpeed = getRandom() * 1000 + 500;\r\n\r\n    const repeat = fadeOutAt + fadeOutSpeed;\r\n\r\n    const modPosition = position.add(\r\n      new Vector(getRandom() - 0.5, getRandom() - 0.5, getRandom() - 0.5)\r\n        .normalize()\r\n        .multiplyScalar(getRandom() * 2 * size)\r\n    );\r\n\r\n    particles = [\r\n      ...particles,\r\n      particleContainer\r\n        .getParticle(context)\r\n        .setSize((getRandom() * 10 + 5) * size)\r\n        .setSizeChange(-0.002)\r\n        .setOpacity(0.3)\r\n        .setFadeIn(activation, fadeInSpeed)\r\n        .setFadeOut(fadeOutAt, fadeOutSpeed)\r\n        .setColor(getYellowRandomColor())\r\n        .setPosition(modPosition.toObject())\r\n        .setTexture(TEXTURE_GLOW)\r\n        .setAngle(getRandom() * 360, (getRandom() - 0.5) * 0.1)\r\n        .setActivationTime(activation)\r\n        .setRepeat(repeat)\r\n        .serialize(),\r\n    ];\r\n\r\n    activation += getRandom() * 1000;\r\n  }\r\n\r\n  return particles;\r\n};\r\n\r\nconst createSpark = (position, particleContainer, getRandom, context) => {\r\n  const activation = 0;\r\n  const fadeInSpeed = 100;\r\n  const fadeOutAt = activation + fadeInSpeed;\r\n  const fadeOutSpeed = getRandom() * 1000 + 500;\r\n  let particles = [];\r\n\r\n  const velocity = new Vector(\r\n    getRandom() - 0.5,\r\n    getRandom() - 0.5,\r\n    getRandom() - 0.5\r\n  )\r\n    .normalize()\r\n    .multiplyScalar(0.005 + getRandom() * 0.005);\r\n\r\n  const repeat = fadeOutAt + fadeOutSpeed;\r\n\r\n  particles = [\r\n    ...particles,\r\n    particleContainer\r\n      .getParticle(context)\r\n      .setSize(2)\r\n      .setSizeChange(-0.002)\r\n      .setOpacity(0.6)\r\n      .setFadeIn(activation, fadeInSpeed)\r\n      .setFadeOut(fadeOutAt, fadeOutSpeed)\r\n      .setColor(getYellowRandomColor())\r\n      .setPosition(position.toObject())\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(activation)\r\n      .setRepeat(repeat)\r\n      .setVelocity(velocity)\r\n      .serialize(),\r\n  ];\r\n\r\n  particles = [\r\n    ...particles,\r\n    particleContainer\r\n      .getParticle(context)\r\n      .setSize(1)\r\n      .setSizeChange(-0.005)\r\n      .setOpacity(1)\r\n      .setFadeIn(activation, fadeInSpeed)\r\n      .setFadeOut(fadeOutAt, fadeOutSpeed)\r\n      .setColor({ r: 1, g: 1, b: 1 })\r\n      .setPosition(position.toObject())\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(activation)\r\n      .setRepeat(repeat)\r\n      .setVelocity(velocity)\r\n      .serialize(),\r\n  ];\r\n\r\n  return particles;\r\n};\r\n\r\nconst getYellowRandomColor = () => {\r\n  return new THREE.Color().setRGB(\r\n    1,\r\n    (155 - Math.floor(Math.random() * 75)) / 255,\r\n    Math.floor(Math.random() * 20) / 255\r\n  );\r\n};\r\n\r\nconst getRandomColor = () => {\r\n  return new THREE.Color().setRGB(\r\n    1,\r\n    (155 - Math.floor(Math.random() * 75)) / 255,\r\n    Math.floor(Math.random() * 155) / 255\r\n  );\r\n};\r\n\r\nconst getSmokeColor = () => {\r\n  var c = (Math.random() * 50 + 20) / 255;\r\n  return new THREE.Color().setRGB(c, c, c + 0.05);\r\n};\r\n\r\nexport default ShipObjectSectionDamageEffect;\r\n","import * as THREE from \"three\";\nimport * as shipObjects from \".\";\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\n\nimport { degreeToRadian } from \"../../../../../model/utils/math\";\n\nimport { ShipEWSprite, DottedCircleSprite, HexagonSprite } from \"../sprite\";\n\nimport Line from \"../Line\";\nimport coordinateConverter from \"../../../../../model/utils/CoordinateConverter.mjs\";\nimport ShipMapIcon from \"./ShipMapIcon\";\nimport { angleToHexFacing } from \"../../../../../model/utils/math.mjs\";\nimport { ParticleEmitterContainer } from \"../../animation/particle\";\nimport ShipObjectBoundingBox from \"./ShipObjectBoundingBox\";\nimport ShipObjectSectionDamageEffect from \"./ShipObjectSectionDamageEffect\";\n\nclass ShipObject {\n  constructor(ship, scene) {\n    this.shipId = ship.id;\n    this.ship = ship;\n    this.systemLocations = {};\n\n    this.bumpMap = null;\n\n    this.scene = scene;\n    this.mesh = new THREE.Object3D();\n    //this.mesh.castShadow = true;\n    //this.mesh.receiveShadow = true;\n    this.shipObject = null;\n    this.systemObjects = [];\n\n    this.resolveShipObjectLoaded = null;\n    this.isShipObjectLoaded = new Promise((resolve, reject) => {\n      this.resolveShipObjectLoaded = resolve;\n    });\n\n    this.mapIcon = null;\n    this.hexSprites = [];\n    this.hexSpriteContainer = new THREE.Object3D();\n    this.ghostShipObject = null;\n    this.shipSideSprite = null;\n    this.shipEWSprite = null;\n    this.shipSelectedSprite = null;\n    this.line = null;\n\n    this.defaultHeight = 50;\n    this.sideSpriteSize = 100;\n    this.position = { x: 0, y: 0, z: 0 };\n    this.shipZ = null;\n\n    this.hidden = false;\n\n    this.emissiveReplaced = [];\n\n    this.ghost = false;\n    this.forcedEmissiveColor = null;\n    this.opacity = 1;\n\n    this.rotation = 0;\n    this.roll = 0;\n    this.dimensions = { x: 100, y: 100 };\n    this.center = { x: 0, y: 0 };\n    this.ewSpriteDimensions = null;\n\n    this.shipObjectBoundingBox = new ShipObjectBoundingBox(ship);\n    this.shipObjectSectionDamageEffect = new ShipObjectSectionDamageEffect(\n      ship\n    );\n\n    this.consumeShipdata(this.ship);\n  }\n\n  setShipObject(object) {\n    this.shipObject = object;\n\n    if (this.bumpMap) {\n      object.scene.children.forEach((mesh) => {\n        mesh.material.bumpMap = this.bumpMap;\n        mesh.material.bumpScale = 0.5;\n        mesh.material.bumpMap.flipY = false;\n        mesh.material.needsUpdate = true;\n      });\n    }\n\n    this.shipObject.traverse((child) => {\n      child.userData = { icon: this };\n    });\n\n    object.addTo(this.mesh);\n    this.resolveShipObjectLoaded(true);\n  }\n\n  clone() {\n    return new shipObjects[this.ship.shipModel](this.ship, this.scene);\n  }\n\n  consumeShipdata(ship) {\n    this.ship = ship;\n  }\n\n  createMesh() {\n    if (this.shipZ === null) {\n      this.shipZ = this.defaultHeight;\n    }\n\n    const opacity = 0.5;\n\n    this.line = new Line(this.mesh, {\n      start: { x: 0, y: 0, z: 0 },\n      end: { x: 0, y: 0, z: this.defaultHeight },\n      width: 5,\n      color: new THREE.Color(1, 1, 1),\n      opacity: 0.1,\n    });\n    this.line.hide();\n\n    this.shipSelectedSprite = new DottedCircleSprite(\n      { width: this.overlaySpriteSize, height: this.overlaySpriteSize },\n      this.defaultHeight,\n      opacity\n    );\n\n    //this.ship.hexSizes.forEach(position => {\n    const sprite = new HexagonSprite(new Vector(0, 0))\n      .setOpacity(0.5)\n      .setOverlayColorAlpha(1);\n    this.hexSprites.push(sprite);\n    this.hexSpriteContainer.add(sprite.mesh);\n    //});\n\n    this.hexSpriteContainer.visible = false;\n\n    this.mapIcon = new ShipMapIcon(this);\n    this.mapIcon.addTo(this.mesh);\n\n    this.mesh.add(this.hexSpriteContainer);\n    /*\n    this.shipSelectedSprite.setOverlayColor(COLOR_MINE);\n    this.shipSelectedSprite.setOverlayColorAlpha(1);\n    this.mesh.add(this.shipSelectedSprite.mesh);\n    //shipSelectedSprite.hide();\n    */\n\n    /*\n    this.shipSideSprite = new CircleSprite(\n      { width: this.sideSpriteSize, height: this.sideSpriteSize },\n      0.01,\n      opacity\n    );\n    this.mesh.add(this.shipSideSprite.mesh);\n    */\n\n    //this.mesh.name = \"ship\";\n    //this.mesh.userData = { icon: this };\n\n    const dimensionDebugCube = () => {\n      const cube = new THREE.Mesh(\n        new THREE.BoxGeometry(1, 1, 1),\n        new THREE.MeshBasicMaterial({\n          color: 0xffffff,\n          wireframe: true,\n        })\n      );\n\n      cube.scale.set(this.dimensions.x, this.dimensions.y, this.dimensions.z);\n      cube.position.set(\n        this.center.x,\n        this.center.y,\n        this.center.z + this.shipZ\n      );\n      this.hexSpriteContainer.add(cube);\n    };\n\n    //dimensionDebugCube();\n\n    const particleContainer = new ParticleEmitterContainer(\n      this.hexSpriteContainer,\n      1000\n    );\n\n    this.shipObjectBoundingBox.init(this.dimensions);\n    this.shipObjectSectionDamageEffect.init(\n      this.shipObjectBoundingBox,\n      particleContainer,\n      this.shipZ,\n      this.center,\n      this.hexSpriteContainer\n    );\n    this.scene.add(this.mesh);\n    this.hide();\n  }\n\n  async showEwSprite(dew, ccew, evasion) {\n    await this.isShipObjectLoaded;\n\n    if (!this.shipEWSprite) {\n      const dimensions = this.ewSpriteDimensions || this.dimensions;\n      const max = dimensions.x > dimensions.y ? dimensions.x : dimensions.y;\n\n      this.shipEWSprite = new ShipEWSprite(\n        { width: max * 1.5, height: max * 1.5 },\n        this.shipZ,\n        dimensions\n      );\n      this.shipEWSprite.setPosition(this.center);\n      this.hexSpriteContainer.add(this.shipEWSprite.mesh);\n      this.shipEWSprite.hide();\n    }\n\n    this.shipEWSprite.update(dew, ccew, evasion);\n    this.shipEWSprite.show();\n  }\n\n  async hideEwSprite() {\n    await this.isShipObjectLoaded;\n    this.shipEWSprite.hide();\n  }\n\n  create() {\n    this.createMesh();\n  }\n\n  async setPosition(x, y) {\n    if (typeof x === \"object\") {\n      y = x.y;\n      x = x.x;\n    }\n\n    this.position = { x, y, z: 0 };\n\n    if (this.mesh) {\n      this.mesh.position.set(x, y, 0);\n    }\n\n    await this.isShipObjectLoaded;\n    this.shipObject.object.position.set(0, 0, this.shipZ);\n  }\n\n  setShipZ(z) {\n    this.shipZ = z;\n    this.setPosition(this.position);\n    this.shipObjectSectionDamageEffect.setShipZ(z);\n  }\n\n  getPosition() {\n    return new Vector(this.position);\n  }\n\n  async setRotation() {\n    await this.isShipObjectLoaded;\n\n    this.shipObject.object.quaternion.setFromAxisAngle(\n      new THREE.Vector3(0, 0, 1),\n      degreeToRadian(this.rotation)\n    );\n\n    const tmpQuaternion = new THREE.Quaternion();\n    tmpQuaternion\n      .setFromAxisAngle(\n        new THREE.Vector3(1, 0, 0).normalize(),\n        degreeToRadian(this.roll)\n      )\n      .normalize();\n\n    this.shipObject.object.quaternion.multiply(tmpQuaternion);\n    this.hexSpriteContainer.rotation.z = degreeToRadian(this.rotation);\n    this.mapIcon.setRotation(this.rotation);\n  }\n\n  async setFacing(rotation) {\n    if (this.rotation === rotation) {\n      return;\n    }\n\n    this.rotation = rotation;\n    this.setRotation();\n  }\n\n  getFacing() {\n    return -this.rotation;\n  }\n\n  async setRoll(roll) {\n    if (this.roll === roll) {\n      return;\n    }\n\n    this.roll = roll;\n    this.setRotation();\n  }\n\n  getRoll() {\n    return this.roll;\n  }\n\n  async setOpacity(opacity) {\n    await this.isShipObjectLoaded;\n    this.opacity = opacity;\n    this.replaceOpacity(opacity);\n  }\n\n  hideShip() {\n    if (!this.shipObject) {\n      return;\n    }\n\n    this.shipObject.object.visible = false;\n  }\n\n  showShip() {\n    if (!this.shipObject) {\n      return;\n    }\n\n    this.shipObject.object.visible = true;\n  }\n\n  hide() {\n    if (this.hidden) {\n      return;\n    }\n\n    this.scene.remove(this.mesh);\n    this.hidden = true;\n  }\n\n  show() {\n    if (!this.hidden) {\n      return;\n    }\n\n    this.scene.add(this.mesh);\n    this.hidden = false;\n  }\n\n  setOverlayColorAlpha(alpha) {}\n\n  /*\n  getMovements(turn) {\n    return this.movements.filter(function(movement) {\n      return turn === undefined || movement.turn === turn;\n    }, this);\n  }\n*/\n\n  setScale(width, height) {}\n\n  showSideSprite(value) {}\n\n  setHighlighted(value) {}\n\n  setSideSpriteOpacity(opacity) {}\n\n  /*\n  showBDEW() {\n    var BDEW = this.ship.ew.getBDEW();\n    if (!BDEW || this.BDEWSprite) {\n      return;\n    }\n\n    var hexDistance = window.coordinateConverter.getHexDistance();\n    var dis = 20 * hexDistance;\n\n    var color = this.ship.player.isMine()\n      ? new THREE.Color(160 / 255, 250 / 255, 100 / 255)\n      : new THREE.Color(255 / 255, 157 / 255, 0 / 255);\n\n    var geometry = new THREE.CircleGeometry(dis, 64, 0);\n    var material = new THREE.MeshBasicMaterial({\n      color: color,\n      opacity: 0.2,\n      transparent: true\n    });\n    var circle = new THREE.Mesh(geometry, material);\n    circle.position.z = -1;\n    this.mesh.add(circle);\n    this.BDEWSprite = circle;\n\n    return null;\n  }\n\n  hideBDEW() {\n    this.mesh.remove(this.BDEWSprite);\n    this.BDEWSprite = null;\n  }\n\n*/\n  async replaceSocketByName(names, entity) {\n    names = [].concat(names);\n\n    await this.isShipObjectLoaded;\n\n    names.forEach(({ name, id }) => {\n      const slot = this.shipObject.scene.children.find((child) => {\n        if (!child.name) {\n          return false;\n        }\n\n        if (child.name === name) {\n          return true;\n        }\n      });\n\n      if (!slot) {\n        return;\n      }\n\n      if (!entity) {\n        this.shipObject.scene.remove(slot);\n        return;\n      }\n\n      const newEntity = entity.clone().setId(id);\n      newEntity.object.position.copy(slot.position);\n      newEntity.object.rotation.copy(slot.rotation);\n      newEntity.object.quaternion.copy(slot.quaternion);\n      this.shipObject.scene.remove(slot);\n      newEntity.addTo(this.shipObject.object);\n\n      this.systemObjects.push(newEntity);\n      this.systemLocations[id] = slot.position;\n    });\n  }\n\n  async replaceOpacity(opacity) {\n    await this.isShipObjectLoaded;\n\n    this.shipObject.traverse((child) => {\n      child.material.transparent = true;\n      child.material.opacity = opacity;\n      child.material.needsUpdate = true;\n    });\n  }\n\n  async revertOpacity() {\n    await this.isShipObjectLoaded;\n\n    this.shipObject.traverse((child) => {\n      child.material.opacity = this.opacity;\n      child.material.needsUpdate = true;\n    });\n  }\n\n  forceEmissive(color) {\n    this.forcedEmissiveColor = color;\n    this.replaceEmissive(color);\n    this.emissiveReplaced = [];\n  }\n\n  async replaceEmissive(color) {\n    await this.isShipObjectLoaded;\n\n    this.shipObject.traverse((child) => {\n      const replacement = this.emissiveReplaced.find(\n        (replacement) => replacement.object === child\n      );\n\n      if (!replacement) {\n        this.emissiveReplaced.push({\n          object: child,\n          color: child.material.emissive,\n          map: child.material.emissiveMap,\n        });\n      }\n\n      child.material.emissiveMap = null;\n      child.material.emissive = color;\n      child.material.needsUpdate = true;\n    });\n  }\n\n  async revertEmissive() {\n    await this.isShipObjectLoaded;\n    this.shipObject.traverse((child) => {\n      const replacement = this.emissiveReplaced.find(\n        (replacement) => replacement.object === child\n      );\n\n      if (this.forcedEmissiveColor) {\n        child.material.emissiveMap = null;\n        child.material.emissive = this.forcedEmissiveColor;\n        child.material.needsUpdate = true;\n      } else if (replacement) {\n        child.material.emissiveMap = replacement.map;\n        child.material.emissive = replacement.color;\n        child.material.needsUpdate = true;\n      }\n    });\n  }\n\n  setGhostShip(mine) {\n    this.ghost = true;\n    //this.setGhostShipEmissive(mine);\n    //this.setOpacity(0.2);\n  }\n\n  async setGhostShipEmissive(color) {\n    await this.isShipObjectLoaded;\n\n    this.forceEmissive(color);\n    this.hexSprites.forEach((hexSprite) =>\n      hexSprite.setOverlayColor(new THREE.Color(color))\n    );\n  }\n\n  showMapIcon(color) {\n    this.mapIcon.setOverlayColor(color).setOverlayColorAlpha(1).show();\n    this.hideShip();\n  }\n\n  hideMapIcon() {\n    this.mapIcon.hide();\n    this.showShip();\n  }\n\n  isGhostShip() {\n    return this.ghost;\n  }\n\n  render(renderPayload) {\n    this.systemObjects.forEach((object) => object.render(renderPayload));\n    this.shipObjectSectionDamageEffect.render(renderPayload);\n  }\n\n  playSystemAnimation(system, name) {\n    const object = this.systemObjects.find((object) => object.id === system.id);\n\n    if (!object) {\n      return;\n    }\n\n    //console.log(\"animate\", name, system);\n    object.playAnimation(name);\n  }\n\n  setSystemAnimation(system, name, time) {\n    const object = this.systemObjects.find((object) => object.id === system.id);\n\n    if (!object) {\n      return;\n    }\n\n    //console.log(\"set animation\", name, system);\n    object.setAnimation(name, time);\n  }\n\n  disableSystemAnimation(system, name) {\n    const object = this.systemObjects.find((object) => object.id === system.id);\n\n    if (!object) {\n      return;\n    }\n\n    //console.log(\"disable\", name, system);\n    object.disableAnimation(name);\n  }\n\n  getShipHexas() {\n    const iconPosition = this.getPosition();\n    const iconFacing = this.getFacing();\n    const hexFacing = angleToHexFacing(iconFacing);\n\n    return this.ship\n      .getIconHexas(hexFacing)\n      .map((hex) => coordinateConverter.fromHexToGame(hex).add(iconPosition));\n  }\n\n  getCenter() {\n    const hexas = this.getShipHexas();\n\n    const lowest = new Vector();\n    const highest = new Vector();\n\n    hexas.forEach((position) => {\n      if (position.x < lowest.x) {\n        lowest.x = position.x;\n      }\n\n      if (position.y < lowest.y) {\n        lowest.y = position.y;\n      }\n\n      if (position.x > highest.x) {\n        highest.x = position.x;\n      }\n\n      if (position.y < highest.y) {\n        highest.y = position.y;\n      }\n    });\n\n    return lowest.add(highest).multiplyScalar(0.5);\n  }\n}\n\nexport default ShipObject;\n","import ShipObject from \"../ShipObject\";\n//import * as THREE from \"three\";\n\nclass Gunship extends ShipObject {\n  constructor(ship, scene) {\n    super(ship, scene);\n    this.defaultHeight = 30;\n    this.sideSpriteSize = 50;\n    this.create();\n  }\n\n  create() {\n    super.create();\n\n    window.Loader.loadObject(\"img/3d/gunship/gunship.obj\", object => {\n      window.Loader.loadTexturesAndAssign(\n        object.children[0],\n        {},\n        null,\n        \"img/3d/gunship/normal.png\"\n      );\n\n      window.Loader.loadTexturesAndAssign(\n        object.children[1],\n        {},\n        null,\n        \"img/3d/turretNormal.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[2],\n        {},\n        null,\n        \"img/3d/turretNormal.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[3],\n        {},\n        null,\n        \"img/3d/turretNormal.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[6],\n        {},\n        null,\n        \"img/3d/turretNormal.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[7],\n        {},\n        null,\n        \"img/3d/turretNormal.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[4],\n        {},\n        \"img/3d/diffuseThruster.png\",\n        \"img/3d/normalThruster.png\"\n      );\n      window.Loader.loadTexturesAndAssign(\n        object.children[5],\n        {},\n        \"img/3d/diffuseThruster.png\",\n        \"img/3d/normalThruster.png\"\n      );\n\n      object.scale.set(5, 5, 5);\n      this.startRotation = { x: 90, y: 90, z: 0 };\n      this.shipObject = object;\n      this.setRotation(this.rotation.x, this.rotation.y, this.rotation.z);\n      this.mesh.add(this.shipObject);\n      object.position.set(0, 0, this.shipZ);\n    });\n  }\n}\n\nexport default Gunship;\n","import ShipObject from \"../ShipObject\";\nimport { loadObject, cloneObject } from \"../../../utils/objectLoader\";\nimport * as THREE from \"three\";\n\nclass Rhino extends ShipObject {\n  constructor(ship, scene) {\n    super(ship, scene);\n    this.defaultHeight = 50;\n    this.sideSpriteSize = 30;\n    this.overlaySpriteSize = 80;\n    this.create();\n  }\n\n  async create() {\n    super.create();\n\n    const object = await loadObject(\"/img/3d/caliope/scene.gltf\");\n    //object.scale.set(2, 2, 2);\n    this.startRotation = { x: 90, y: 90, z: 0 };\n\n    this.shipObject = object;\n    this.setRotation(this.rotation.x, this.rotation.y, this.rotation.z);\n    this.mesh.add(this.shipObject);\n    object.position.set(0, 0, this.shipZ);\n\n    const radiator = await loadObject(\"/img/3d/radiator/scene.gltf\");\n    const autoCannon = await loadObject(\n      \"/img/3d/systems/weapons/conventional/85mmAutoCannon/scene.gltf\"\n    );\n\n    super.replaceSocketByName(\n      [\n        \"engine_pylon_top_front\",\n        \"engine_pylon_left_front\",\n        \"engine_pylon_right_front\",\n      ],\n      radiator\n    );\n\n    super.replaceSocketByName(\n      [\n        \"engine_pylon_top\",\n        \"engine_pylon_left\",\n        \"engine_pylon_right\",\n        \"main_hull_front_left_bottom\",\n        \"main_hull_front_left_top\",\n        \"main_hull_front_right_bottom\",\n        \"main_hull_front_right_top\",\n      ],\n      autoCannon\n    );\n\n    super.replaceSocketByName(\n      [\n        \"font_hull_bottom\",\n        \"font_hull_top\",\n        \"main_hull_front_left_side\",\n        \"main_hull_front_right_side\",\n      ],\n      await loadObject(\n        \"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\n      )\n    );\n\n    super.replaceSocketByName(\n      [\"thruster_top\", \"thruster_right\", \"thruster_left\"],\n      await loadObject(\"/img/3d/systems/thrusters/5mThruster/scene.gltf\")\n    );\n\n    const shipMaterial = this.shipObject.children[0].material;\n\n    shipMaterial.emissive = new THREE.Color(1, 1, 1);\n    shipMaterial.emissiveMap = new THREE.TextureLoader().load(\n      \"/img/3d/caliope/emissiveMap.png\"\n    );\n    shipMaterial.emissiveMap.flipY = false;\n\n    /*\n    this.shipObject.traverse(o => {\n      if (o.isMesh) {\n        o.material.emissive = new THREE.Color(1, 1, 1);\n        o.material.emissiveMap = new THREE.TextureLoader().load(\n          \"/img/3d/caliope/baseColor.png\"\n        );\n        o.material.emissiveMap.flipY = false;\n\n\n      }\n    });\n\n    */\n  }\n\n  render() {\n    super.render();\n\n    if (this.shipObject) {\n      this.shipObject.rotation.y += 0.006;\n    }\n  }\n}\n\nexport default Rhino;\n","import ShipObject from \"../ShipObject\";\nimport * as THREE from \"three\";\n\nclass Capital extends ShipObject {\n  constructor(ship, scene) {\n    super(ship, scene);\n    this.defaultHeight = 50;\n    this.sideSpriteSize = 50;\n    this.create();\n  }\n\n  create() {\n    super.create();\n\n    window.Loader.loadObject(\"img/3d/capital/capital.obj\", object => {\n      window.Loader.loadTexturesAndAssign(\n        object.children[0],\n        {\n          normalScale: new THREE.Vector2(0.5, 0.5),\n          shininess: 10,\n          color: new THREE.Color(1, 1, 1)\n        },\n        \"img/3d/capital/diffuse.png\",\n        \"img/3d/capital/normalEdit.png\"\n      );\n\n      object.scale.set(3, 3, 3);\n      this.startRotation = { x: 90, y: 90, z: 0 };\n      this.shipObject = object;\n      this.setRotation(this.rotation.x, this.rotation.y, this.rotation.z);\n      this.mesh.add(this.shipObject);\n      object.position.set(0, 0, this.shipZ);\n    });\n  }\n}\n\nexport default Capital;\n","import { loadObject, cloneObject } from \"../../utils/objectLoader\";\r\nimport * as THREE from \"three\";\r\n\r\nexport const loadObject3d = async url => {\r\n  const object = await loadObject(url);\r\n  return new Object3d(object.scene, object.animations);\r\n};\r\n\r\nclass Object3d {\r\n  constructor(scene, animations) {\r\n    this.id = null;\r\n\r\n    this.object = new THREE.Object3D();\r\n    this.scene = scene;\r\n    this.animations = animations;\r\n    this.actions = [];\r\n\r\n    this.object.add(this.scene);\r\n\r\n    this.animationMixer = new THREE.AnimationMixer(this.scene);\r\n    this.loopAnimation(\"ambient\");\r\n  }\r\n\r\n  traverse(callBack) {\r\n    this.object.traverse(child => {\r\n      if (child.isMesh) {\r\n        callBack(child);\r\n      }\r\n\r\n      if (child instanceof Object3d) {\r\n        child.traverse(callBack);\r\n      }\r\n    });\r\n  }\r\n\r\n  disableAnimation(name) {\r\n    const clip = THREE.AnimationClip.findByName(this.animations, name);\r\n\r\n    if (!clip) {\r\n      return;\r\n    }\r\n\r\n    const action = this.animationMixer.clipAction(clip);\r\n    action.reset();\r\n    action.weight = 0;\r\n    action.paused = true;\r\n  }\r\n\r\n  playAnimation(name) {\r\n    const clip = THREE.AnimationClip.findByName(this.animations, name);\r\n\r\n    if (!clip) {\r\n      return;\r\n    }\r\n    const action = this.animationMixer.clipAction(clip);\r\n    action.reset();\r\n    action.weight = 1;\r\n    action.clampWhenFinished = true;\r\n    action.loop = THREE.LoopOnce;\r\n    action.time = 0;\r\n    action.paused = false;\r\n    action.play();\r\n  }\r\n\r\n  loopAnimation(name) {\r\n    const clip = THREE.AnimationClip.findByName(this.animations, name);\r\n\r\n    if (!clip) {\r\n      return;\r\n    }\r\n    const action = this.animationMixer.clipAction(clip);\r\n    action.reset();\r\n    action.weight = 1;\r\n    action.clampWhenFinished = true;\r\n    action.loop = THREE.LoopRepeat;\r\n    action.time = 0;\r\n    action.paused = false;\r\n    action.play();\r\n  }\r\n\r\n  setAnimation(name, time) {\r\n    const clip = THREE.AnimationClip.findByName(this.animations, name);\r\n\r\n    if (!clip) {\r\n      return;\r\n    }\r\n    const action = this.animationMixer.clipAction(clip);\r\n    action.reset();\r\n    action.weight = 1;\r\n    action.clampWhenFinished = true;\r\n    action.loop = THREE.LoopOnce;\r\n    action.time = time;\r\n    action.paused = true;\r\n    action.play();\r\n  }\r\n\r\n  addTo(scene) {\r\n    scene.add(this.object);\r\n  }\r\n\r\n  removeFrom(scene) {\r\n    scene.remove(this.object);\r\n  }\r\n\r\n  clone() {\r\n    const clone = cloneObject(this);\r\n    const object = new Object3d(clone.scene, clone.animations);\r\n    object.setId(this.id);\r\n    return object;\r\n  }\r\n\r\n  setId(id) {\r\n    this.id = id;\r\n    return this;\r\n  }\r\n\r\n  render({ delta }) {\r\n    this.animationMixer.update(delta * 0.001);\r\n  }\r\n}\r\n\r\nexport default Object3d;\r\n","import ShipObject from \"../ShipObject\";\r\nimport { loadObject3d } from \"../../object3d/Object3d\";\r\nimport * as THREE from \"three\";\r\nimport Vector from \"../../../../../../model/utils/Vector.mjs\";\r\n\r\nconst textureLoader = new THREE.TextureLoader();\r\n\r\nclass Haka extends ShipObject {\r\n  constructor(ship, scene) {\r\n    super(ship, scene);\r\n    this.defaultHeight = 80;\r\n    this.sideSpriteSize = 30;\r\n    this.overlaySpriteSize = 80;\r\n    this.dimensions = new Vector(150, 40, 40);\r\n    this.center = new Vector(0, 0, 0);\r\n    this.ewSpriteDimensions = new Vector(180, 80);\r\n\r\n    this.create();\r\n  }\r\n\r\n  async create() {\r\n    super.create();\r\n    const object = await loadObject3d(\"/img/3d/ships/uc/haka/scene.gltf\");\r\n\r\n    this.bumpMap = await textureLoader.load(\r\n      \"/img/3d/ships/uc/haka/heightMap.png\"\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_middle_pylon_top\", id: 602 },\r\n        { name: \"socket_front_top_1\", id: 606 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/coilgun/turreted32GwRailgun/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [{ name: \"socket_middle_pylon_bottom\", id: 202 }],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/railgun/2x140mmRailgunTurret/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_main_pylon_left\", id: 118 },\r\n        { name: \"socket_main_pylon_right\", id: 119 },\r\n        { name: \"socket_front_top_2\", id: 603 },\r\n        { name: \"socket_front_top_3\", id: 604 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/railgun/140mmRailgunTurret/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_engine_1\", id: 123 },\r\n        { name: \"socket_engine_2\", id: 123 },\r\n        { name: \"socket_engine_3\", id: 123 },\r\n        { name: \"socket_engine_4\", id: 123 },\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/thrusters/10mThruster/scene.gltf\")\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_engine_pylon_1\", id: 550 },\r\n        { name: \"socket_engine_pylon_2\", id: 551 },\r\n        { name: \"socket_engine_pylon_3\", id: 554 },\r\n        { name: \"socket_engine_pylon_4\", id: 555 },\r\n        { name: \"socket_engine_pylon_5\", id: 352 },\r\n        { name: \"socket_engine_pylon_6\", id: 353 },\r\n        { name: \"socket_engine_pylon_7\", id: 356 },\r\n        { name: \"socket_engine_pylon_8\", id: 357 },\r\n        { name: \"socket_engine_pylon_9\", id: 451 },\r\n        { name: \"socket_engine_pylon_10\", id: 456 },\r\n        { name: \"socket_engine_pylon_11\", id: 450 },\r\n        { name: \"socket_engine_pylon_12\", id: 452 },\r\n        { name: \"socket_engine_pylon_13\", id: 457 },\r\n        { name: \"socket_engine_pylon_14\", id: 455 },\r\n        { name: \"socket_engine_pylon_15\", id: 453 },\r\n        { name: \"socket_engine_pylon_16\", id: 454 },\r\n        { name: \"socket_main_right_1\", id: 114 },\r\n        { name: \"socket_main_right_2\", id: 115 },\r\n        { name: \"socket_main_left_1\", id: 116 },\r\n        { name: \"socket_main_left_2\", id: 117 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_radiator_5\", id: 301 },\r\n        { name: \"socket_radiator_6\", id: 302 },\r\n        { name: \"socket_radiator_7\", id: 502 },\r\n        { name: \"socket_radiator_8\", id: 503 },\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/radiators/10x40/scene.gltf\")\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"socket_radiator_1\", id: 416 },\r\n        { name: \"socket_radiator_2\", id: 216 },\r\n        { name: \"socket_radiator_3\", id: 416 },\r\n        { name: \"socket_radiator_4\", id: 216 },\r\n      ],\r\n      null\r\n    );\r\n\r\n    /*\r\n     new systems.PDC30mm({ id: 450 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 451 }, { start: 160, end: 340 }),\r\n\r\n      new systems.PDC30mm({ id: 452 }, { start: 40, end: 200 }),\r\n      new systems.PDC30mm({ id: 453 }, { start: 40, end: 200 }),\r\n\r\n      new systems.PDC30mm({ id: 454 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 455 }, { start: 160, end: 340 }),\r\n\r\n      new systems.PDC30mm({ id: 456 }, { start: 40, end: 200 }),\r\n      new systems.PDC30mm({ id: 457 }, { start: 40, end: 200 })\r\n      */\r\n\r\n    this.setShipObject(object);\r\n  }\r\n}\r\n\r\nexport default Haka;\r\n","import ShipObject from \"../ShipObject\";\r\nimport { loadObject3d } from \"../../object3d/Object3d\";\r\nimport * as THREE from \"three\";\r\nimport Vector from \"../../../../../../model/utils/Vector.mjs\";\r\n\r\nconst textureLoader = new THREE.TextureLoader();\r\n\r\nclass Caliope extends ShipObject {\r\n  constructor(ship, scene) {\r\n    super(ship, scene);\r\n    this.defaultHeight = 80;\r\n    this.sideSpriteSize = 30;\r\n    this.overlaySpriteSize = 80;\r\n    this.dimensions = new Vector(80, 22, 8);\r\n    this.center = new Vector(0, 0, 0);\r\n    this.ewSpriteDimensions = new Vector(95, 40);\r\n    this.create();\r\n  }\r\n\r\n  async create() {\r\n    super.create();\r\n    const object = await loadObject3d(\"/img/3d/caliope/scene.gltf\");\r\n    this.bumpMap = await textureLoader.load(\"/img/3d/caliope/heightMap.png\");\r\n\r\n    object.object.position.set(0, 0, this.defaultHeight);\r\n\r\n    const radiator = await loadObject3d(\"/img/3d/radiator/scene.gltf\");\r\n    const autoCannon = await loadObject3d(\r\n      \"/img/3d/systems/weapons/conventional/85mmAutoCannon/scene.gltf\"\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"engine_pylon_top_front\", id: 412 },\r\n        { name: \"engine_pylon_left_front\", id: 501 },\r\n        { name: \"engine_pylon_right_front\", id: 301 },\r\n      ],\r\n      radiator\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"engine_pylon_top\", id: 421 },\r\n        { name: \"engine_pylon_left\", id: 521 },\r\n        { name: \"engine_pylon_right\", id: 321 },\r\n      ],\r\n      autoCannon\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"main_hull_front_left_bottom\", id: 603 },\r\n        { name: \"main_hull_front_left_top\", id: 604 },\r\n        { name: \"main_hull_front_right_bottom\", id: 203 },\r\n        { name: \"main_hull_front_right_top\", id: 204 },\r\n      ],\r\n      autoCannon\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"front_hull_right_side\", id: 213 },\r\n        { name: \"front_hull_left_side\", id: 612 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/railgun/2x140mmRailgunTurret/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"font_hull_bottom\", id: 115 },\r\n        { name: \"font_hull_top\", id: 114 },\r\n        { name: \"main_hull_front_left_side\", id: 602 },\r\n        { name: \"main_hull_front_right_side\", id: 202 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"thruster_top\", id: 123 },\r\n        { name: \"thruster_right\", id: 123 },\r\n        { name: \"thruster_left\", id: 123 },\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/thrusters/5mThruster/scene.gltf\")\r\n    );\r\n\r\n    this.setShipObject(object);\r\n\r\n    /*\r\n    const shipMaterial = this.shipObject.children[0].material;\r\n\r\n    shipMaterial.emissive = new THREE.Color(1, 1, 1);\r\n    shipMaterial.emissiveMap = new THREE.TextureLoader().load(\r\n      \"/img/3d/caliope/emissiveMap.png\"\r\n    );\r\n    shipMaterial.emissiveMap.flipY = false;\r\n*/\r\n    /*\r\n    this.shipObject.traverse(o => {\r\n      if (o.isMesh) {\r\n        o.material.emissive = new THREE.Color(1, 1, 1);\r\n        o.material.emissiveMap = new THREE.TextureLoader().load(\r\n          \"/img/3d/caliope/baseColor.png\"\r\n        );\r\n        o.material.emissiveMap.flipY = false;\r\n\r\n\r\n      }\r\n    });\r\n\r\n    */\r\n  }\r\n}\r\n\r\nexport default Caliope;\r\n","import ShipObject from \"../ShipObject\";\r\nimport { loadObject3d } from \"../../object3d/Object3d\";\r\nimport * as THREE from \"three\";\r\nimport Vector from \"../../../../../../model/utils/Vector.mjs\";\r\n\r\nconst textureLoader = new THREE.TextureLoader();\r\n\r\nclass Fulcrum extends ShipObject {\r\n  constructor(ship, scene) {\r\n    super(ship, scene);\r\n    this.defaultHeight = 100;\r\n    this.sideSpriteSize = 30;\r\n    this.overlaySpriteSize = 80;\r\n    this.dimensions = new Vector(55, 12, 12);\r\n    this.center = new Vector(0, 0, 0);\r\n    this.ewSpriteDimensions = new Vector(65, 30);\r\n    this.create();\r\n  }\r\n\r\n  async create() {\r\n    super.create();\r\n    const object = await loadObject3d(\r\n      \"/img/3d/ships/protectorate/fulcrum/scene.gltf\"\r\n    );\r\n    this.bumpMap = await textureLoader.load(\r\n      \"/img/3d/ships/protectorate/fulcrum/heightMap.png\"\r\n    );\r\n\r\n    object.object.position.set(0, 0, this.defaultHeight);\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"rear_hull_radiator_left\", id: 416 },\r\n        { name: \"rear_hull_radiator_right\", id: 216 },\r\n        { name: \"rear_hull_radiator_bottom\", id: 316 },\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/radiators/5x40mSail/scene.gltf\")\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [{ name: \"front_plate_center\", id: 102 }],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/coilgun/fixed22GwCoilgun/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"front_hull_pdc_bottom\", id: 14 },\r\n        { name: \"front_hull_pdc_left\", id: 13 },\r\n        { name: \"front_hull_pdc_right\", id: 15 },\r\n        { name: \"rear_hull_pdc_top\", id: 214 },\r\n        { name: \"rear_hull_pdc_right\", id: 215 },\r\n        { name: \"rear_hull_pdc_left\", id: 213 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [{ name: \"thruster\", id: 123 }],\r\n      await loadObject3d(\"/img/3d/systems/thrusters/5mThruster/scene.gltf\")\r\n    );\r\n\r\n    this.setShipObject(object);\r\n  }\r\n}\r\n\r\nexport default Fulcrum;\r\n","import ShipObject from \"../ShipObject\";\r\nimport { loadObject3d } from \"../../object3d/Object3d\";\r\nimport * as THREE from \"three\";\r\n\r\nclass Mouros extends ShipObject {\r\n  constructor(ship, scene) {\r\n    super(ship, scene);\r\n    this.defaultHeight = 10;\r\n    this.sideSpriteSize = 30;\r\n    this.overlaySpriteSize = 80;\r\n    this.create();\r\n  }\r\n\r\n  async create() {\r\n    super.create();\r\n    const object = await loadObject3d(\r\n      \"/img/3d/ships/protectorate/Mouros/scene.gltf\"\r\n    );\r\n\r\n    //this.startRotation = { x: 90, y: 90, z: 0 };\r\n\r\n    this.setRotation(this.rotation.x, this.rotation.y, this.rotation.z);\r\n\r\n    object.object.position.set(0, 0, this.defaultHeight);\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"Middle_hull_depress_top\", id: 123 },\r\n        { name: \"Middle_hull_depress_left\", id: 123 },\r\n        { name: \"Middle_hull_depress_right\", id: 123 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/85mmAutoCannon/scene.gltf\"\r\n        //\"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"Middle_hull_frame_top\", id: 123 },\r\n        { name: \"Middle_hull_frame_left\", id: 123 },\r\n        { name: \"Middle_hull_frame_right\", id: 123 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/140mmCannonTurret/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"railgun_turret_mount_right\", id: 123 },\r\n        ,\r\n        { name: \"railgun_turret_mount_left\", id: 123 },\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/coilgun/turreted32GwRailgun/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"thruster_1\", id: 123 },\r\n        { name: \"thruster_6\", id: 123 },\r\n        { name: \"thruster_2\", id: 123 },\r\n        { name: \"thruster_4\", id: 123 },\r\n        { name: \"thruster_3\", id: 123 },\r\n        { name: \"thruster_5\", id: 123 },\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/thrusters/8mThruster/scene.gltf\")\r\n    );\r\n\r\n    this.setShipObject(object);\r\n  }\r\n}\r\n\r\nexport default Mouros;\r\n","import ShipObject from \"../ShipObject\";\r\nimport { loadObject3d } from \"../../object3d/Object3d\";\r\nimport * as THREE from \"three\";\r\n\r\nclass Impetous extends ShipObject {\r\n  constructor(ship, scene) {\r\n    super(ship, scene);\r\n    this.defaultHeight = 15;\r\n    this.sideSpriteSize = 30;\r\n    this.overlaySpriteSize = 80;\r\n    this.create();\r\n  }\r\n\r\n  async create() {\r\n    super.create();\r\n    const object = await loadObject3d(\r\n      \"/img/3d/ships/federation/Impetous/scene.gltf\"\r\n    );\r\n\r\n    //object.scale.set(2, 2, 2);\r\n    this.startRotation = { x: 90, y: 90, z: 0 };\r\n\r\n    this.setRotation(this.rotation.x, this.rotation.y, this.rotation.z);\r\n\r\n    object.object.position.set(0, 0, this.defaultHeight);\r\n    /*\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"Middle_hull_depress_top\", id: 123 },\r\n        { name: \"Middle_hull_frame_top\", id: 123 },\r\n        { name: \"Middle_hull_depress_left\", id: 123 },\r\n        { name: \"Middle_hull_depress_right\", id: 123 },\r\n        { name: \"Middle_hull_frame_left\", id: 123 },\r\n        { name: \"Middle_hull_frame_right\", id: 123 }\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"railgun_turret_mount_right\", id: 123 },\r\n        ,\r\n        { name: \"railgun_turret_mount_left\", id: 123 }\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/coilgun/turreted64GwRailgun/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    */\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"engine_mount_2\", id: 123 },\r\n        { name: \"engine_mount_3\", id: 123 },\r\n        { name: \"engine_mount_4\", id: 123 },\r\n        { name: \"engine_mount_5\", id: 123 }\r\n      ],\r\n      await loadObject3d(\"/img/3d/systems/thrusters/10mThruster/scene.gltf\")\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"front-wing-left-mount1\", id: 501 },\r\n        { name: \"front-wing-left-mount2\", id: 502 },\r\n        { name: \"front-wing-left-mount3\", id: 503 },\r\n        { name: \"front-wing-right-mount1\", id: 101 },\r\n        { name: \"front-wing-right-mount2\", id: 102 },\r\n        { name: \"front-wing-right-mount3\", id: 103 }\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/2x30mmPDC/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [{ name: \"middle-top-mount1\", id: 623 }],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/coilgun/turreted64GwRailgun/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"front-wing-left-top-mount1\", id: 623 },\r\n        { name: \"front-wing-left-bottom-mount1\", id: 623 },\r\n        { name: \"aft-wing-left-top-mount1\", id: 623 },\r\n        { name: \"aft-wing-left-bottom-mount1\", id: 623 }\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/2x140mmCannonTurret/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    super.replaceSocketByName(\r\n      [\r\n        { name: \"front-wing-left-top-mount2\", id: 623 },\r\n        { name: \"front-wing-left-bottom-mount2\", id: 623 }\r\n      ],\r\n      await loadObject3d(\r\n        \"/img/3d/systems/weapons/conventional/85mmAutoCannon/scene.gltf\"\r\n      )\r\n    );\r\n\r\n    this.setShipObject(object);\r\n  }\r\n}\r\n\r\nexport default Impetous;\r\n","import * as shipObjects from \"../ships\";\r\nimport { distance } from \"../../../../../model/utils/math\";\r\n\r\nconst buildShipArray = iconsAsObject => {\r\n  return Object.keys(iconsAsObject).map(key => iconsAsObject[key]);\r\n};\r\n\r\nconst createIcon = (ship, scene) => {\r\n  return new shipObjects[ship.shipModel](ship, scene);\r\n};\r\n\r\nconst createGhostShipIcon = (ship, scene, currentUser) => {\r\n  const icon = new shipObjects[ship.shipModel](ship, scene);\r\n  icon.setGhostShip(ship.player.is(currentUser));\r\n  icon.hide();\r\n\r\n  return icon;\r\n};\r\n\r\nclass ShipIconContainer {\r\n  constructor(scene, currentUser) {\r\n    this.iconsAsObject = {};\r\n    this.iconsAsArray = [];\r\n    this.scene = scene;\r\n    this.currentUser = currentUser;\r\n\r\n    this.ghostShipIcons = [];\r\n  }\r\n\r\n  shipsLoaded() {\r\n    return Promise.all(this.iconsAsArray.map(icon => icon.isShipObjectLoaded));\r\n  }\r\n\r\n  getGhostShipIconByShip(ship) {\r\n    let icon = this.ghostShipIcons.find(icon => icon.ship === ship);\r\n\r\n    if (!icon) {\r\n      icon = createGhostShipIcon(ship, this.scene, this.currentUser);\r\n      this.ghostShipIcons.push(icon);\r\n    }\r\n\r\n    return icon;\r\n  }\r\n\r\n  update(gamedata) {\r\n    gamedata.ships.getShips().forEach(ship => {\r\n      if (!this.hasIcon(ship.id)) {\r\n        this.iconsAsObject[ship.id] = createIcon(ship, this.scene);\r\n      } else {\r\n        this.iconsAsObject[ship.id].consumeShipdata(ship);\r\n      }\r\n\r\n      const ghost = this.ghostShipIcons.find(icon => icon.ship.id === ship.id);\r\n      if (ghost) {\r\n        ghost.consumeShipdata(ship);\r\n      }\r\n    });\r\n\r\n    this.iconsAsArray = buildShipArray(this.iconsAsObject);\r\n  }\r\n\r\n  getByShip(ship) {\r\n    return this.iconsAsObject[ship.id];\r\n  }\r\n\r\n  getById(id) {\r\n    return this.iconsAsObject[id];\r\n  }\r\n\r\n  onEvent(name, payload) {\r\n    var target = this[\"on\" + name];\r\n    if (target && typeof target === \"function\") {\r\n      target.call(this, payload);\r\n    }\r\n  }\r\n\r\n  onZoomEvent(payload) {\r\n    var zoom = payload.zoom;\r\n\r\n    var alpha = zoom > 2 ? zoom - 2 : 0;\r\n    if (alpha > 1) {\r\n      alpha = 1;\r\n    }\r\n    this.iconsAsArray.forEach(function(icon) {\r\n      icon.setOverlayColorAlpha(alpha);\r\n    });\r\n  }\r\n\r\n  getArray() {\r\n    return this.iconsAsArray;\r\n  }\r\n\r\n  hasIcon(shipId) {\r\n    return Boolean(this.iconsAsObject[shipId]);\r\n  }\r\n\r\n  getIconById(shipId) {\r\n    return this.iconsAsObject[shipId];\r\n  }\r\n\r\n  getIconsInProximity(payload) {\r\n    var hexHeight = this.coordinateConverter.getHexHeightViewport();\r\n    var currentDistance = hexHeight / 10;\r\n\r\n    var icons = [];\r\n\r\n    if (currentDistance < 30) {\r\n      icons = this.getIconsInSameHex(payload.hex);\r\n    } else {\r\n      var closest = null;\r\n      var closestDistance = null;\r\n\r\n      this.iconsAsArray.forEach(function(shipIcon) {\r\n        var currentDistance = distance(shipIcon.getPosition(), payload.game);\r\n\r\n        if (\r\n          currentDistance < 10 &&\r\n          (!closest || currentDistance < closestDistance)\r\n        ) {\r\n          closest = shipIcon;\r\n          closestDistance = currentDistance;\r\n        }\r\n      }, this);\r\n\r\n      if (closest) icons.push(closest);\r\n    }\r\n\r\n    return icons;\r\n  }\r\n\r\n  getIconsInSameHex(hex) {\r\n    return this.iconsAsArray.filter(function(shipIcon) {\r\n      return this.coordinateConverter\r\n        .fromGameToHex(shipIcon.getPosition())\r\n        .equals(hex);\r\n    }, this);\r\n  }\r\n\r\n  getFinalMovementInSameHex(hex) {\r\n    return this.iconsAsArray.filter(function(shipIcon) {\r\n      return (\r\n        !shipIcon.ship.isDestroyed() &&\r\n        shipIcon.getLastMovement().position.equals(hex)\r\n      );\r\n    }, this);\r\n  }\r\n\r\n  render(renderPayload) {\r\n    this.iconsAsArray.forEach(icon => icon.render(renderPayload));\r\n  }\r\n}\r\n\r\nexport default ShipIconContainer;\r\n","import * as THREE from \"three\";\r\nimport Line from \"../Line\";\r\nimport LineSprite from \"../sprite/LineSprite\";\r\nimport {\r\n  COLOR_OEW_FRIENDLY,\r\n  COLOR_OEW_ENEMY,\r\n  COLOR_FRIENDLY_HIGHLIGHT,\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass OEWIndicator {\r\n  constructor(\r\n    shipIcon,\r\n    targetIcon,\r\n    targetGhost,\r\n    shipGhost,\r\n    amount,\r\n    mine,\r\n    scene\r\n  ) {\r\n    this.scene = scene;\r\n    this.shipIcon = shipIcon;\r\n    this.targetIcon = targetIcon;\r\n    this.targetGhost = targetGhost;\r\n    this.shipGhost = shipGhost;\r\n    this.amount = amount;\r\n    this.mine = mine;\r\n\r\n    this.visible = false;\r\n\r\n    this.targetPosition =\r\n      !this.targetGhost || this.targetGhost.hidden\r\n        ? targetIcon.getPosition()\r\n        : targetGhost.getPosition();\r\n\r\n    this.shipPosition =\r\n      !this.shipGhost || this.shipGhost.hidden\r\n        ? this.shipIcon.getPosition()\r\n        : this.shipGhost.getPosition();\r\n\r\n    this.line = this.createLine();\r\n  }\r\n\r\n  createLine() {\r\n    const line = new LineSprite(\r\n      this.shipIcon.getPosition().setZ(this.getZ()),\r\n      this.targetPosition.setZ(this.getZ()),\r\n      this.amount * 1 + 5,\r\n      {\r\n        color: this.mine ? COLOR_OEW_FRIENDLY : COLOR_OEW_ENEMY,\r\n        opacity: 0.5,\r\n        type: \"dashed-circle\",\r\n        textureSize: this.amount * 1 + 5,\r\n        //minFilter: THREE.NearestFilter,\r\n        pulseAmount: 1,\r\n      }\r\n    );\r\n\r\n    line.addTo(this.scene);\r\n\r\n    return line;\r\n  }\r\n\r\n  getZ() {\r\n    return 0;\r\n  }\r\n\r\n  remove() {\r\n    this.line.destroy();\r\n  }\r\n\r\n  render(zoom) {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    //this.line.render(zoom);\r\n\r\n    const newTargetPosition =\r\n      !this.targetGhost || this.targetGhost.hidden\r\n        ? this.targetIcon.getPosition()\r\n        : this.targetGhost.getPosition();\r\n\r\n    const newShipPosition =\r\n      !this.shipGhost || this.shipGhost.hidden\r\n        ? this.shipIcon.getPosition()\r\n        : this.shipGhost.getPosition();\r\n\r\n    if (\r\n      !this.shipPosition.equals(newShipPosition) ||\r\n      !this.targetPosition.equals(newTargetPosition)\r\n    ) {\r\n      this.shipPosition = newShipPosition;\r\n      this.targetPosition = newTargetPosition;\r\n      this.line.update(\r\n        this.shipPosition.setZ(this.getZ()),\r\n        this.targetPosition.setZ(this.getZ()),\r\n        this.amount * 1 + 5\r\n      );\r\n\r\n      if (this.line && this.line.updateTextureSize) {\r\n        this.line.updateTextureSize(this.amount * 1 + 5);\r\n      }\r\n    }\r\n  }\r\n\r\n  update(ship, amount) {\r\n    this.ship = ship;\r\n\r\n    if (this.amount !== amount) {\r\n      this.amount = amount;\r\n      this.line.update(\r\n        this.shipPosition.setZ(this.getZ()),\r\n        this.targetPosition.setZ(this.getZ()),\r\n        this.amount * 1 + 5\r\n      );\r\n\r\n      if (this.line && this.line.updateTextureSize) {\r\n        this.line.updateTextureSize(this.amount * 1 + 5);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  show() {\r\n    this.visible = true;\r\n    this.line.show();\r\n  }\r\n\r\n  hide() {\r\n    this.visible = false;\r\n    this.line.hide();\r\n  }\r\n}\r\n\r\nexport default OEWIndicator;\r\n","import OEWIndicator from \"./OEWIndicator\";\r\n\r\nclass ShipEWIndicators {\r\n  constructor(ship, shipIconContainer, currentUser, scene) {\r\n    this.ship = ship;\r\n    this.icon = shipIconContainer.getByShip(ship);\r\n    this.shipIconContainer = shipIconContainer;\r\n    this.currentUser = currentUser;\r\n    this.scene = scene;\r\n    this.oew = [];\r\n\r\n    this.update(this.ship);\r\n  }\r\n\r\n  update(ship, useGhost) {\r\n    this.ship = ship;\r\n    this.createOEW(useGhost);\r\n\r\n    return this;\r\n  }\r\n\r\n  show() {\r\n    this.oew.forEach((oew) => oew.show());\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.oew.forEach((oew) => oew.hide());\r\n    return this;\r\n  }\r\n\r\n  isShip(ship) {\r\n    return this.ship.id === ship.id;\r\n  }\r\n\r\n  render(zoom) {\r\n    this.oew.forEach((oew) => oew.render(zoom));\r\n  }\r\n\r\n  async createOEW() {\r\n    await this.shipIconContainer.shipsLoaded();\r\n    const old = this.oew;\r\n    const newOew = this.ship.electronicWarfare.getAllOew().map((ewEntry) => {\r\n      const targetIcon = this.shipIconContainer.getById(ewEntry.targetShipId);\r\n      const targetGhost = this.shipIconContainer.getGhostShipIconByShip(\r\n        targetIcon.ship\r\n      );\r\n      const shipGhost = this.shipIconContainer.getGhostShipIconByShip(\r\n        this.icon.ship\r\n      );\r\n\r\n      let indicator = this.oew.find((oew) => oew.targetIcon === targetIcon);\r\n\r\n      if (!indicator) {\r\n        indicator = new OEWIndicator(\r\n          this.icon,\r\n          targetIcon,\r\n          targetGhost,\r\n          shipGhost,\r\n          ewEntry.amount,\r\n          this.ship.player.is(this.currentUser),\r\n          this.scene\r\n        );\r\n      }\r\n\r\n      return indicator.update(this.ship, ewEntry.amount);\r\n    });\r\n\r\n    old\r\n      .filter((indicator) =>\r\n        newOew.every((indicatorNew) => indicatorNew !== indicator)\r\n      )\r\n      .forEach((indicator) => indicator.remove());\r\n\r\n    this.oew = newOew;\r\n  }\r\n}\r\n\r\nexport default ShipEWIndicators;\r\n","import * as THREE from \"three\";\r\nimport Line from \"../Line\";\r\nimport OEWIndicator from \"./OEWIndicator\";\r\n\r\nconst COLOR_OEW_FRIENDLY = new THREE.Color(100 / 255, 90 / 255, 250 / 255);\r\nconst COLOR_OEW_ENEMY = new THREE.Color(255 / 255, 40 / 255, 40 / 255);\r\n\r\nclass CurrentOEWIndicator extends OEWIndicator {\r\n  constructor(shipIcon, targetIcon, amount, mine, scene) {\r\n    super(shipIcon, targetIcon, null, null, amount, mine, scene);\r\n  }\r\n\r\n  createLine() {\r\n    return new Line(this.scene, {\r\n      start: { ...this.shipIcon.getPosition(), z: this.getZ() },\r\n      end: { ...this.targetPosition, z: this.getZ() },\r\n      width: this.amount * 1 + 5,\r\n      color: this.mine ? COLOR_OEW_FRIENDLY : COLOR_OEW_ENEMY,\r\n      opacity: 0.1,\r\n      pulseAmount: 1,\r\n      dashSize: 0,\r\n    });\r\n  }\r\n\r\n  getZ() {\r\n    return 0;\r\n    return this.mine ? 15 : 30;\r\n  }\r\n}\r\n\r\nexport default CurrentOEWIndicator;\r\n","import CurrentOEWIndicator from \"./CurrentOEWIndicator\";\r\n\r\nclass ShipCurrentEWIndicators {\r\n  constructor(ship, shipIconContainer, currentUser, scene) {\r\n    this.ship = ship;\r\n    this.icon = shipIconContainer.getByShip(ship);\r\n    this.shipIconContainer = shipIconContainer;\r\n    this.currentUser = currentUser;\r\n    this.scene = scene;\r\n    this.oew = [];\r\n\r\n    this.update(this.ship);\r\n  }\r\n\r\n  update(ship) {\r\n    this.ship = ship;\r\n    this.oew = this.createOEW();\r\n\r\n    return this;\r\n  }\r\n\r\n  show() {\r\n    this.oew.forEach((oew) => oew.show());\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.oew.forEach((oew) => oew.hide());\r\n    return this;\r\n  }\r\n\r\n  isShip(ship) {\r\n    return this.ship.id === ship.id;\r\n  }\r\n\r\n  render(zoom) {\r\n    this.oew.forEach((oew) => oew.render(zoom));\r\n  }\r\n\r\n  createOEW() {\r\n    const old = this.oew;\r\n    const newOew = this.ship.electronicWarfare.inEffect\r\n      .getAllOew()\r\n      .map((ewEntry) => {\r\n        const targetIcon = this.shipIconContainer.getById(ewEntry.targetShipId);\r\n\r\n        let indicator = this.oew.find((oew) => oew.targetIcon === targetIcon);\r\n\r\n        if (!indicator) {\r\n          indicator = new CurrentOEWIndicator(\r\n            this.icon,\r\n            targetIcon,\r\n            ewEntry.amount,\r\n            this.ship.player.is(this.currentUser),\r\n            this.scene\r\n          );\r\n        }\r\n\r\n        return indicator.update(this.ship, ewEntry.amount);\r\n      });\r\n\r\n    old\r\n      .filter((indicator) =>\r\n        newOew.every((indicatorNew) => indicatorNew !== indicator)\r\n      )\r\n      .forEach((indicator) => indicator.remove());\r\n\r\n    return newOew;\r\n  }\r\n}\r\n\r\nexport default ShipCurrentEWIndicators;\r\n","import * as THREE from \"three\";\r\nimport ShipEWIndicators from \"./ShipEWIndicators\";\r\nimport ShipCurrentEWIndicators from \"./ShipCurrentEWIndicators\";\r\n\r\nconst COLOR_OEW_DIST = new THREE.Color(255 / 255, 157 / 255, 0 / 255);\r\nconst COLOR_SDEW = new THREE.Color(109 / 255, 189 / 255, 255 / 255);\r\nconst COLOR_OEW_SOEW = new THREE.Color(1, 1, 1);\r\n\r\nclass ElectronicWarfareIndicatorService {\r\n  constructor(scene, iconContainer, currentUser) {\r\n    this.scene = scene;\r\n    this.shipIconContainer = iconContainer;\r\n    this.currentUser = currentUser;\r\n\r\n    this.indicators = [];\r\n    this.currentIndicators = [];\r\n  }\r\n\r\n  getCurrentIndicators(ship) {\r\n    let indicator = this.currentIndicators.find(indicator =>\r\n      indicator.isShip(ship)\r\n    );\r\n\r\n    if (!indicator) {\r\n      indicator = new ShipCurrentEWIndicators(\r\n        ship,\r\n        this.shipIconContainer,\r\n        this.currentUser,\r\n        this.scene\r\n      );\r\n\r\n      this.currentIndicators.push(indicator);\r\n    }\r\n\r\n    return indicator;\r\n  }\r\n\r\n  getIndicators(ship) {\r\n    let indicator = this.indicators.find(indicator => indicator.isShip(ship));\r\n\r\n    if (!indicator) {\r\n      indicator = new ShipEWIndicators(\r\n        ship,\r\n        this.shipIconContainer,\r\n        this.currentUser,\r\n        this.scene\r\n      );\r\n\r\n      this.indicators.push(indicator);\r\n    }\r\n\r\n    return indicator;\r\n  }\r\n\r\n  render(zoom) {\r\n    this.indicators.forEach(indicator => indicator.render(zoom));\r\n    this.currentIndicators.forEach(indicator => indicator.render(zoom));\r\n  }\r\n\r\n  showCurrentForShip(ship) {\r\n    this.getCurrentIndicators(ship)\r\n      .update(ship)\r\n      .show();\r\n  }\r\n\r\n  hideCurrentForShip(ship) {\r\n    this.getCurrentIndicators(ship)\r\n      .update(ship)\r\n      .hide();\r\n  }\r\n\r\n  showForShip(ship) {\r\n    this.getIndicators(ship)\r\n      .update(ship)\r\n      .show();\r\n  }\r\n\r\n  hideForShip(ship) {\r\n    this.getIndicators(ship)\r\n      .update(ship)\r\n      .hide();\r\n  }\r\n\r\n  hideAll() {\r\n    this.indicators.forEach(indicators => indicators.hide());\r\n  }\r\n\r\n  hideAllCurrent() {\r\n    this.currentIndicators.forEach(indicators => indicators.hide());\r\n  }\r\n}\r\n\r\nexport default ElectronicWarfareIndicatorService;\r\n","import { loadObject } from \"../utils/objectLoader\";\r\nimport * as THREE from \"three\";\r\n\r\nimport HexagonMath from \"../../../../model/utils/HexagonMath\";\r\n\r\nclass TerrainRenderer {\r\n  constructor(scene) {\r\n    this.scene = scene;\r\n    this.terrain = null;\r\n    this.terrainObjects = [];\r\n  }\r\n\r\n  init() {}\r\n\r\n  update(terrain) {\r\n    //TODO: This creates new objects every time gamedata updates.\r\n    return;\r\n\r\n    this.terrain = terrain;\r\n\r\n    this.terrainObjects = this.terrain.getEntities().forEach(entity => ({\r\n      entity,\r\n      object: this.createObject(entity)\r\n    }));\r\n  }\r\n\r\n  async createObject(entity) {\r\n    const object = await loadObject(\"/img/3d/sphere/scene.gltf\");\r\n\r\n    const material = object.children[0].material;\r\n\r\n    material.emissive = new THREE.Color(1, 1, 1);\r\n\r\n    object.position.set(0, 0, 0);\r\n    const scale = HexagonMath.getHexWidth() * entity.diameter;\r\n    object.scale.set(scale, scale, scale);\r\n    this.scene.add(object);\r\n  }\r\n\r\n  render() {}\r\n}\r\n\r\nexport default TerrainRenderer;\r\n","class ShipWindowManager {\r\n  constructor(uiState, movementService) {\r\n    this.uiState = uiState;\r\n    this.movementService = movementService;\r\n    this.ships = [];\r\n  }\r\n\r\n  open(ship) {\r\n    this.ships = this.ships.filter(function(otherShip) {\r\n      return otherShip.player.user !== ship.player.user;\r\n    });\r\n\r\n    if (!this.ships.includes(ship)) {\r\n      this.ships.push(ship);\r\n    }\r\n\r\n    this.uiState.setShipWindows({\r\n      ships: this.ships,\r\n      movementService: this.movementService\r\n    });\r\n  }\r\n\r\n  close(ship) {\r\n    this.ships = this.ships.filter(function(openShip) {\r\n      return openShip !== ship;\r\n    });\r\n\r\n    this.uiState.setShipWindows({\r\n      ships: this.ships,\r\n      movementService: this.movementService\r\n    });\r\n  }\r\n\r\n  closeAll() {\r\n    this.ships = [];\r\n\r\n    this.uiState.setShipWindows({\r\n      ships: this.ships,\r\n      movementService: this.movementService\r\n    });\r\n  }\r\n\r\n  update() {\r\n    this.uiState.setShipWindows({\r\n      ships: this.ships,\r\n      movementService: this.movementService\r\n    });\r\n  }\r\n}\r\n\r\nexport default ShipWindowManager;\r\n","import * as THREE from \"three\";\nimport {\n  getPointBetweenInDistance,\n  hexFacingToAngle,\n} from \"../../../../model/utils/math\";\nimport coordinateConverter from \"../../../../model/utils/CoordinateConverter\";\n\nimport { CircleSprite, LineSprite } from \"../renderer/sprite\";\n\nimport Line from \"../renderer/Line\";\nimport { COLOR_FRIENDLY, COLOR_ENEMY } from \"../../../../model/gameConfig.mjs\";\nimport Vector from \"../../../../model/utils/Vector.mjs\";\nimport MovementService from \"../../../../model/movement/MovementService.mjs\";\n\nclass MovementPath {\n  constructor(ship, scene, terrain, ghost, mine) {\n    this.ship = ship;\n    this.scene = scene;\n    this.terrain = terrain;\n    this.ghost = ghost;\n\n    this.color = mine ? COLOR_FRIENDLY : COLOR_ENEMY;\n\n    //this.color = new THREE.Color(19 / 255, 96 / 255, 19 / 255);\n\n    this.objects = [];\n\n    this.movementService = new MovementService();\n\n    this.create();\n  }\n\n  remove() {\n    this.objects.forEach((object3d) => {\n      this.scene.remove(object3d.mesh);\n      object3d.destroy();\n    });\n    this.ghost.hide();\n  }\n\n  create() {\n    /*\n    const startMove = this.movementService.getNewEndMove(\n      this.ship,\n      this.terrain\n    );\n    */\n\n    const startMove = this.ship.movement.getLastEndMoveOrSurrogate();\n    const start = startMove.position;\n    const endMove = this.movementService.getNewEndMove(this.ship, this.terrain);\n    const end = endMove.position;\n\n    const line = createMovementLine(\n      this.scene,\n      start,\n      end,\n      this.color,\n      0.5,\n      this.ghost.shipZ\n    );\n\n    this.objects.push(line);\n\n    createMovementFacing(this.ghost, endMove.facing, end, this.color);\n  }\n}\n\nconst createMovementLine = (\n  scene,\n  position,\n  target,\n  color,\n  opacity = 0.8,\n  z\n) => {\n  const line = new LineSprite(\n    new Vector({ x: position.x, y: position.y, z }),\n    new Vector({ x: target.x, y: target.y, z }),\n    30,\n    {\n      color,\n      opacity,\n      type: \"dashed-arrow\",\n      textureSize: 30,\n      pulseAmount: 1,\n      roundTestureRepeate: true,\n    }\n  );\n\n  line.addTo(scene);\n\n  return line;\n};\n\nconst createMovementFacing = (ghost, facing, target, color) => {\n  ghost.show();\n  ghost.setPosition(target);\n  ghost.setFacing(-hexFacingToAngle(facing));\n  ghost.setGhostShipEmissive(color);\n  ghost.setOpacity(0.2);\n\n  ghost.mapIcon\n    .setMovementTarget()\n    .replaceColor(color)\n    .setOverlayColorAlpha(1)\n    .show();\n  /*\n  const size = coordinateConverter.getHexDistance() * 1.5;\n  const facingSprite = new ShipFacingSprite(\n    { width: size, height: size },\n    0.01,\n    1.6,\n    facing\n  );\n  facingSprite.setPosition(target);\n  facingSprite.setOverlayColor(color);\n  facingSprite.setOverlayColorAlpha(1);\n  facingSprite.setFacing(hexFacingToAngle(facing));\n\n  return facingSprite;\n  */\n};\n\nexport { createMovementLine };\n\nexport default MovementPath;\n","import MovementPath from \"./MovementPath\";\r\n\r\nclass MovementPathService {\r\n  constructor(scene, shipIconContainer, currentUser) {\r\n    this.scene = scene;\r\n    this.shipIconContainer = shipIconContainer;\r\n    this.terrain = null;\r\n    this.currentUser = currentUser;\r\n\r\n    this.paths = [];\r\n  }\r\n\r\n  getPath(ship) {\r\n    return this.paths.find(path => path.ship.id === ship.id);\r\n  }\r\n\r\n  update(gameData) {\r\n    this.terrain = gameData.terrain;\r\n  }\r\n\r\n  hideAllMovementPaths() {\r\n    this.paths.forEach(path => path.movementPath.remove(this.scene));\r\n    this.paths = [];\r\n  }\r\n\r\n  hideMovementPath(ship) {\r\n    const path = this.getPath(ship);\r\n    if (!path) {\r\n      return;\r\n    }\r\n\r\n    path.movementPath.remove(this.scene);\r\n    this.paths = this.paths.filter(path => path.ship !== ship);\r\n  }\r\n\r\n  showMovementPath(ship) {\r\n    let path = this.getPath(ship);\r\n\r\n    if (!path) {\r\n      path = {\r\n        ship,\r\n        ghost: this.shipIconContainer.getGhostShipIconByShip(ship),\r\n        movementPath: null\r\n      };\r\n      this.paths.push(path);\r\n    }\r\n\r\n    if (path.movementPath) {\r\n      //TODO: this is inefficient and causes flickering\r\n      path.movementPath.remove(this.scene);\r\n    }\r\n\r\n    path.ship = ship;\r\n\r\n    path.movementPath = new MovementPath(\r\n      ship,\r\n      this.scene,\r\n      this.terrain,\r\n      path.ghost,\r\n      ship.player.is(this.currentUser)\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovementPathService;\r\n","export const LOBBY = \"lobby\";\r\nexport const ACTIVE = \"active\";\r\nexport const FINISHED = \"finished\";\r\nexport const ABANDONED = \"abandoned\";\r\n","export const DEPLOYMENT = \"deployment\";\r\nexport const GAME = \"game\";\r\n","const getInterestingStuffInPosition = (payload, shipIconContainer) => {\n  const mouseovered = payload.entities.filter(\n    (entity) =>\n      entity instanceof window.ShipObject && !entity.ship.isDestroyed()\n  );\n\n  if (mouseovered.length > 0) {\n    return mouseovered;\n  }\n\n  return shipIconContainer\n    .getIconsInProximity(payload)\n    .filter((icon) => !icon.ship.isDestroyed());\n};\n\nclass PhaseStrategy {\n  constructor(services) {\n    this.services = services;\n    this.strategies = [];\n    this.inactive = true;\n\n    this.gameData = null;\n\n    this.animationPaused = true;\n    this.animationReversed = false;\n    this.currentDeltaTime = 0;\n    this.animationStartTime = 0;\n    this.totalAnimationTime = 0;\n    this.lastAnimationTime = 0;\n    this.animationEndtime = 0;\n    this.animationTurnLength = null;\n  }\n\n  onEvent(name, payload) {\n    this.callStrategies(name, payload);\n  }\n\n  updateStrategies(gamedata) {\n    this.strategies.forEach((strategy) => strategy.update(gamedata));\n  }\n\n  activateStrategies() {\n    this.strategies.forEach((strategy) => strategy.activate(this.services));\n  }\n\n  callStrategies(functionName, payload) {\n    this.strategies.forEach((strategy) => {\n      if (strategy[functionName] && (!payload || !payload.stopped)) {\n        strategy[functionName](payload);\n      }\n    });\n  }\n\n  render(coordinateConverter, scene, zoom) {\n    this.updateDeltaTime(this.animationPaused);\n    this.updateTotalAnimationTime(this.animationPaused);\n\n    const { shipIconContainer, torpedoIconContainer } = this.services;\n\n    const renderPayload = {\n      delta: this.currentDeltaTime,\n      total: this.totalAnimationTime,\n      last: this.lastAnimationTime,\n      zoom,\n    };\n    this.callStrategies(\"render\", renderPayload);\n    shipIconContainer && shipIconContainer.render(renderPayload);\n    torpedoIconContainer && torpedoIconContainer.render(renderPayload);\n    return renderPayload;\n  }\n\n  animateFromTo(start, end) {\n    this.animationStartTime = start;\n    this.totalAnimationTime = start;\n    this.animationReversed = false;\n    this.lastAnimationTime = null;\n    this.currentDeltaTime = 0;\n    this.animationEndtime = end;\n    this.animationPaused = false;\n  }\n\n  pauseAnimation() {\n    this.animationPaused = true;\n  }\n\n  unpauseAnimation() {\n    this.animationReversed = false;\n    this.animationPaused = false;\n  }\n\n  unpauseAndRewindAnimation() {\n    this.animationReversed = true;\n    this.animationPaused = false;\n  }\n\n  setAnimationTime(time) {\n    this.totalAnimationTime = time;\n    this.lastAnimationTime = null;\n    this.currentDeltaTime = 0;\n  }\n\n  updateTotalAnimationTime() {\n    if (this.animationPaused) {\n      return;\n    }\n\n    if (this.animationReversed) {\n      this.totalAnimationTime -= this.currentDeltaTime;\n      if (this.totalAnimationTime < this.animationStartTime) {\n        this.totalAnimationTime = this.animationStartTime;\n        this.animationPaused = true;\n      }\n    } else {\n      this.totalAnimationTime += this.currentDeltaTime;\n      if (\n        this.animationEndtime &&\n        this.totalAnimationTime >= this.animationEndtime\n      ) {\n        this.totalAnimationTime = this.animationEndtime;\n        this.animationPaused = true;\n      }\n    }\n  }\n\n  updateDeltaTime() {\n    const now = Date.now();\n\n    if (!this.lastAnimationTime) {\n      this.lastAnimationTime = now;\n      this.currentDeltaTime = 0;\n    }\n\n    this.currentDeltaTime = now - this.lastAnimationTime;\n\n    this.lastAnimationTime = now;\n  }\n\n  update(gamedata) {\n    const { uiState } = this.services;\n\n    this.gameData = gamedata;\n    uiState.setGameData(gamedata);\n    this.updateStrategies(gamedata);\n\n    return this;\n  }\n\n  activate() {\n    this.inactive = false;\n    this.activateStrategies();\n    return this;\n  }\n\n  deactivate() {\n    this.inactive = true;\n    this.callStrategies(\"deactivate\");\n\n    return this;\n  }\n\n  triggerEvent(name, payload) {\n    this.callStrategies(name, payload);\n  }\n\n  onScrollEvent(payload) {\n    this.callStrategies(\"onScroll\", payload);\n  }\n\n  onZoomEvent(payload) {\n    this.callStrategies(\"onZoom\", payload);\n  }\n\n  canDisturb() {\n    return true;\n  }\n\n  commitTurn(gameConnector) {}\n}\n\nexport default PhaseStrategy;\n","import PhaseStrategy from \"./PhaseStrategy\";\r\n\r\nclass LobbyPhaseStrategy extends PhaseStrategy {\r\n  update(gamedata) {\r\n    super.update(gamedata);\r\n    const { uiState } = this.services;\r\n    uiState.setLobby(true);\r\n\r\n    return this;\r\n  }\r\n\r\n  onEvent(name, payload) {\r\n    switch (name) {\r\n      case \"takeSlot\":\r\n        return this.services.gameConnector.takeSlot(payload.id);\r\n      case \"leaveSlot\":\r\n        return this.services.gameConnector.leaveSlot(payload.id);\r\n      case \"buyShips\":\r\n        return this.services.gameConnector.buyShips(\r\n          payload.slot.id,\r\n          payload.ships\r\n        );\r\n      default:\r\n        return super.onEvent(name, payload);\r\n    }\r\n  }\r\n\r\n  deactivate() {\r\n    super.deactivate();\r\n    const { uiState } = this.services;\r\n    uiState.setLobby(false);\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default LobbyPhaseStrategy;\r\n","class UiStrategy {\r\n  constructor() {\r\n    this.services = null;\r\n    this.gameData = null;\r\n  }\r\n\r\n  deactivate() {}\r\n\r\n  activate(services) {\r\n    this.services = services;\r\n  }\r\n\r\n  update(gameData) {\r\n    this.gameData = gameData;\r\n  }\r\n\r\n  stopEvent(payload) {\r\n    payload.stopped = true;\r\n  }\r\n}\r\n\r\nexport default UiStrategy;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass MouseOverShowsMovementPath extends UiStrategy {\r\n  deactivate() {\r\n    const { movementPathService } = this.services;\r\n    movementPathService.hideAllMovementPaths();\r\n  }\r\n\r\n  mouseOverShip(payload) {\r\n    const { movementPathService } = this.services;\r\n    movementPathService.hideAllMovementPaths();\r\n    movementPathService.showMovementPath(payload.entity.ship);\r\n  }\r\n\r\n  mouseOutShip() {\r\n    const { movementPathService } = this.services;\r\n    movementPathService.hideAllMovementPaths();\r\n  }\r\n}\r\n\r\nexport default MouseOverShowsMovementPath;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nconst hideAllMovementPaths = shipIconContainer => {\r\n  shipIconContainer.getArray().forEach(function(icon) {\r\n    icon.hideMovementPath();\r\n  });\r\n};\r\n\r\nclass SelectedShipMovementPath extends UiStrategy {\r\n  deactivate() {\r\n    const { shipIconContainer } = this.services;\r\n    hideAllMovementPaths(shipIconContainer);\r\n  }\r\n\r\n  update(gameData) {\r\n    const { uiState } = this.services;\r\n    super.update(gameData);\r\n\r\n    const ship = uiState.getSelectedShip();\r\n    if (ship) {\r\n      this.shipStateChanged(ship);\r\n    }\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    const { shipIconContainer, uiState } = this.services;\r\n\r\n    if (uiState.getSelectedShip() !== ship || !this.gameData) {\r\n      return;\r\n    }\r\n\r\n    hideAllMovementPaths(shipIconContainer);\r\n    shipIconContainer.getByShip(ship).showMovementPath(this.gameData.terrain);\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { shipIconContainer } = this.services;\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    hideAllMovementPaths(shipIconContainer);\r\n    shipIconContainer.getByShip(ship).showMovementPath(this.gameData.terrain);\r\n  }\r\n\r\n  mouseOutShip(payload) {\r\n    const { uiState } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n    if (ship) {\r\n      this.shipStateChanged(ship);\r\n    }\r\n  }\r\n\r\n  shipDeselected() {\r\n    const { shipIconContainer } = this.services;\r\n    hideAllMovementPaths(shipIconContainer);\r\n  }\r\n}\r\n\r\nexport default SelectedShipMovementPath;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport * as THREE from \"three\";\r\nimport {\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  COLOR_FRIENDLY_HIGHLIGHT,\r\n  COLOR_ENEMY_HIGHLIGHT\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass HighlightSelectedShip extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.active = false;\r\n    this.activeTime = 0;\r\n    this.icon = null;\r\n    //currentOpacity = opacity + (sineAmplitude * 0.5 * sin(gameTime/sineFrequency) + sineAmplitude)\r\n  }\r\n\r\n  hide() {\r\n    const { shipIconContainer } = this.services;\r\n    if (this.icon) {\r\n      this.icon.revertEmissive();\r\n      this.icon.mapIcon.revertColor();\r\n      this.icon.hexSprites.forEach(sprite => sprite.revertColor());\r\n      const ghost = shipIconContainer.getGhostShipIconByShip(this.icon.ship);\r\n      ghost.revertOpacity();\r\n      ghost.mapIcon.setMovementTarget();\r\n      ghost.mapIcon.revertColor();\r\n    }\r\n\r\n    this.icon = null;\r\n  }\r\n\r\n  deactivate() {\r\n    this.hide();\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { shipIconContainer } = this.services;\r\n    this.active = true;\r\n    this.activeTime = 0;\r\n    this.icon = shipIconContainer.getByShip(ship);\r\n  }\r\n\r\n  shipDeselected(ship) {\r\n    const { shipIconContainer } = this.services;\r\n    this.active = true;\r\n    this.activeTime = 0;\r\n\r\n    this.hide();\r\n  }\r\n\r\n  render({ delta }) {\r\n    const { shipIconContainer } = this.services;\r\n\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n\r\n    const sineAmplitude = 1;\r\n    const sineFrequency = 200;\r\n\r\n    let opacity =\r\n      0.5 * Math.sin(this.activeTime / sineFrequency) + sineAmplitude * 0.5;\r\n    opacity = 0.2 + 0.6 * opacity;\r\n\r\n    const ghost = shipIconContainer.getGhostShipIconByShip(this.icon.ship);\r\n\r\n    //if (ghost.hidden) {\r\n\r\n    const color = COLOR_FRIENDLY_HIGHLIGHT.clone().multiplyScalar(opacity);\r\n\r\n    this.icon.replaceEmissive(color);\r\n\r\n    ghost.setGhostShipEmissive(color);\r\n    ghost.replaceOpacity(opacity);\r\n    ghost.mapIcon\r\n      .setMovementTarget()\r\n      .replaceColor(color)\r\n      .setOverlayColorAlpha(1);\r\n    this.icon.hexSprites.forEach(sprite => sprite.replaceColor(color.clone()));\r\n    this.icon.mapIcon.replaceColor(color);\r\n    this.activeTime += delta;\r\n  }\r\n}\r\n\r\nexport default HighlightSelectedShip;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass SelectedShipMovementUi extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.hideShipMovement();\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.shipStateChanged();\r\n  }\r\n\r\n  shipStateChanged() {\r\n    const { uiState } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n\r\n    if (ship) {\r\n      uiState.showShipMovement(ship, true);\r\n    }\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { uiState } = this.services;\r\n    uiState.showShipMovement(ship, true);\r\n  }\r\n\r\n  shipDeselected() {\r\n    const { uiState } = this.services;\r\n    uiState.hideShipMovement();\r\n  }\r\n}\r\n\r\nexport default SelectedShipMovementUi;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport * as THREE from \"three\";\r\nimport { HexagonSprite } from \"../../renderer/sprite\";\r\n\r\nclass ShowDeploymentAreas extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.areas = [];\r\n  }\r\n\r\n  deactivate() {\r\n    const { scene } = this.services;\r\n    this.areas.forEach(area => {\r\n      area.sprites.forEach(sprite => {\r\n        scene.remove(sprite.mesh);\r\n        sprite.destroy();\r\n      });\r\n    });\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    const { scene, coordinateConverter, currentUser } = this.services;\r\n\r\n    this.areas = gameData.slots.getSlots().map(slot => {\r\n      const hexagons = slot.deploymentLocation.spiral(slot.deploymentRadius);\r\n\r\n      let color = new THREE.Color(1, 1, 1);\r\n      if (slot.isUsers(currentUser)) {\r\n        color = new THREE.Color(39 / 255, 196 / 255, 39 / 255);\r\n      } else if (!gameData.slots.isUsersTeamSlot(slot, currentUser)) {\r\n        color = new THREE.Color(196 / 255, 39 / 255, 39 / 255);\r\n      }\r\n\r\n      return {\r\n        slot,\r\n        sprites: hexagons.map(hex => {\r\n          const sprite = new HexagonSprite(\r\n            coordinateConverter.fromHexToGame(hex)\r\n          );\r\n\r\n          sprite.setOpacity(0.5);\r\n          sprite.setOverlayColor(color);\r\n          sprite.setOverlayColorAlpha(0.5);\r\n\r\n          scene.add(sprite.mesh);\r\n\r\n          return sprite;\r\n        })\r\n      };\r\n    });\r\n  }\r\n\r\n  selectShip(ship) {}\r\n}\r\n\r\nexport default ShowDeploymentAreas;\r\n","import * as THREE from \"three\";\r\nimport { getSeededRandomGenerator } from \"../../../../../model/utils/math.mjs\";\r\n\r\nconst getRandomPosition = (maxDistance, getRandom) => ({\r\n  x: getRandom() * maxDistance - maxDistance / 2,\r\n  y: getRandom() * maxDistance - maxDistance / 2\r\n});\r\n\r\nconst constructFirstCurve = nextPosition => {\r\n  return new THREE.CubicBezierCurve(\r\n    new THREE.Vector2(0, 0),\r\n    new THREE.Vector2(0, 0),\r\n    new THREE.Vector2(nextPosition.x * -1, nextPosition.y * -1),\r\n    new THREE.Vector2(0, 0)\r\n  );\r\n};\r\n\r\nconst constructEvasionCurve = (currentPosition, nextPosition) => {\r\n  return new THREE.CubicBezierCurve(\r\n    new THREE.Vector2(0, 0),\r\n    new THREE.Vector2(currentPosition.x, currentPosition.y),\r\n    new THREE.Vector2(nextPosition.x * -1, nextPosition.y * -1),\r\n    new THREE.Vector2(0, 0)\r\n  );\r\n};\r\n\r\nconst constructEvasionCurves = (evasion, maxDistance, getRandom) => {\r\n  const curves = [];\r\n\r\n  if (evasion === 0) {\r\n    return [];\r\n  }\r\n\r\n  const positions = new Array(evasion + 1)\r\n    .fill(0)\r\n    .map(i => getRandomPosition(maxDistance, getRandom));\r\n\r\n  for (let i = 0; i < positions.length; i++) {\r\n    const position = positions[i];\r\n    const nextPosition =\r\n      i === positions.length - 1 ? { x: 0, y: 0 } : positions[i + 1];\r\n\r\n    if (i === 0) {\r\n      curves.push(constructFirstCurve(nextPosition));\r\n    } else {\r\n      curves.push(constructEvasionCurve(position, nextPosition));\r\n    }\r\n  }\r\n\r\n  return curves;\r\n};\r\n\r\nclass ShipEvasionMovementPath {\r\n  constructor(seed, evasion) {\r\n    this.evasion = evasion;\r\n\r\n    this.curves = constructEvasionCurves(\r\n      this.evasion,\r\n      100 / this.evasion,\r\n      getSeededRandomGenerator(seed)\r\n    );\r\n  }\r\n\r\n  getOffset(percent) {\r\n    if (this.evasion === 0) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n\r\n    const point = (this.curves.length - 1) * percent;\r\n    const curveNumber = Math.floor(point);\r\n    const decimal = point - Math.floor(point);\r\n\r\n    const curve = this.curves[curveNumber];\r\n    return curve.getPoint(decimal);\r\n  }\r\n}\r\n\r\nexport default ShipEvasionMovementPath;\r\n","import {\r\n  addToDirection,\r\n  hexFacingToAngle\r\n} from \"../../../../../model/utils/math.mjs\";\r\n\r\nconst shouldEaseIn = (\r\n  startsAndEnds,\r\n  startEndIndex,\r\n  between,\r\n  betweenIndex,\r\n  move\r\n) => {\r\n  if (!between[betweenIndex - 1]) {\r\n    if (!startsAndEnds[startEndIndex - 1]) {\r\n      return true;\r\n    } else {\r\n      const lastBetween = startsAndEnds[startEndIndex - 1].between;\r\n      const lastMove = lastBetween[lastBetween.length - 1];\r\n      if (!lastMove.isPivot() || lastMove.value !== move.value) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  } else {\r\n    const lastMove = between[betweenIndex - 1];\r\n    if (!lastMove.isPivot() || lastMove.value !== move.value) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\nconst shouldEaseOut = (\r\n  startsAndEnds,\r\n  startEndIndex,\r\n  between,\r\n  betweenIndex,\r\n  move\r\n) => {\r\n  if (!between[betweenIndex + 1]) {\r\n    if (!startsAndEnds[startEndIndex + 1]) {\r\n      return true;\r\n    } else {\r\n      const nextBetween = startsAndEnds[startEndIndex + 1].between;\r\n      const nextMove = nextBetween[0];\r\n      if (!nextMove.isPivot() || nextMove.value !== move.value) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  } else {\r\n    const nextMove = between[betweenIndex + 1];\r\n    if (!nextMove.isPivot() || nextMove.value !== move.value) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\nconst betweenMap = (\r\n  startsAndEnds,\r\n  startEndIndex,\r\n  between,\r\n  betweenIndex,\r\n  move\r\n) => {\r\n  if (!move.isPivot()) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    pivot: move.value === 1 ? 60 : -60,\r\n    easeIn: shouldEaseIn(\r\n      startsAndEnds,\r\n      startEndIndex,\r\n      between,\r\n      betweenIndex,\r\n      move\r\n    ),\r\n    easeOut: shouldEaseOut(\r\n      startsAndEnds,\r\n      startEndIndex,\r\n      between,\r\n      betweenIndex,\r\n      move\r\n    )\r\n  };\r\n};\r\n\r\nconst startsAndEndsToSteps = startsAndEnds => {\r\n  return startsAndEnds.map(({ start, end, between }, startEndIndex) => {\r\n    return {\r\n      startFacing: hexFacingToAngle(start.facing),\r\n      endFacing: hexFacingToAngle(end.facing),\r\n      steps: between.map((move, i) => {\r\n        return betweenMap(startsAndEnds, startEndIndex, between, i, move);\r\n      })\r\n    };\r\n  });\r\n};\r\n\r\nconst setStartFacings = path => {\r\n  return path.map(({ startFacing, endFacing, steps }) => {\r\n    return {\r\n      startFacing,\r\n      endFacing,\r\n      steps: steps.map(step => {\r\n        if (step === null) {\r\n          return { facing: startFacing };\r\n        }\r\n\r\n        const newStep = {\r\n          ...step,\r\n          startFacing\r\n        };\r\n\r\n        startFacing = addToDirection(startFacing, step.pivot);\r\n        return newStep;\r\n      })\r\n    };\r\n  });\r\n};\r\n\r\nconst movesToSteps = moves => {\r\n  const startsAndEnds = [];\r\n  let between = [];\r\n  let start = null;\r\n\r\n  moves.forEach(move => {\r\n    if (move.isDeploy()) {\r\n      start = move;\r\n    } else if (move.isEnd() && !start) {\r\n      start = move;\r\n    } else if (move.isEnd()) {\r\n      startsAndEnds.push({\r\n        start: start,\r\n        between: [...between],\r\n        end: move\r\n      });\r\n\r\n      start = move;\r\n      between = [];\r\n    } else if (start && move.isPivot()) {\r\n      between.push(move);\r\n    } else if (start && move.isSpeed()) {\r\n      between.push(move);\r\n    }\r\n  });\r\n\r\n  return setStartFacings(startsAndEndsToSteps(startsAndEnds));\r\n};\r\n\r\nclass PivotPath {\r\n  constructor(moves) {\r\n    this.moves = moves;\r\n    this.path = movesToSteps(moves);\r\n  }\r\n\r\n  getFacing(turn, percentDone) {\r\n    const steps = this.path[turn] || this.path[this.path.length - 1];\r\n    const length = steps.steps.length;\r\n\r\n    if (length === 0) {\r\n      return steps.endFacing;\r\n    } else {\r\n      const stepIndex = this.path[turn]\r\n        ? Math.floor(length * percentDone)\r\n        : length - 1;\r\n      const stepDone = this.path[turn] ? (length * percentDone) % 1 : 1;\r\n\r\n      const step = steps.steps[stepIndex];\r\n      if (step.facing !== undefined) {\r\n        return step.facing;\r\n      }\r\n      return addToDirection(step.startFacing, step.pivot * stepDone);\r\n    }\r\n  }\r\n}\r\n\r\nexport default PivotPath;\r\n","import * as THREE from \"three\";\nimport Animation from \"../Animation\";\nimport ShipEvasionMovementPath from \"./ShipEvasionMovementPath\";\nimport PivotSteps from \"./PivotSteps\";\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\nimport { getAngleBetween } from \"../../../../../model/utils/math.mjs\";\nimport { addToDirection } from \"../../../../../model/utils/math.mjs\";\n\nclass ShipMovementAnimation extends Animation {\n  constructor(shipIcon, moves, start, end) {\n    super();\n\n    this.shipIcon = shipIcon;\n    this.moves = moves;\n\n    this.doneCallback = null;\n\n    this.start = start;\n    this.end = end;\n\n    this.duration = end - start;\n\n    this.positionCurves = this.movesToCurves(moves);\n    this.pivotSteps = new PivotSteps(moves);\n\n    this.startRoll = moves[0].rolled ? 180 : 0;\n    this.endRoll =\n      moves[0].rolled === moves[moves.length - 1].rolled\n        ? this.startRoll\n        : this.startRoll + 180;\n\n    this.easeInOut = new THREE.CubicBezierCurve(\n      new THREE.Vector2(0, 0),\n      new THREE.Vector2(0.75, 0),\n      new THREE.Vector2(0.25, 1),\n      new THREE.Vector2(1, 1)\n    );\n\n    /*\n\n    this.positionCurve = this.buildPositionCurve();\n    this.rotations = this.buildRotations();\n    this.evasionOffset = new ShipEvasionMovementPath(\n      this.turn * this.ship.id,\n      this.movementService.getEvasion(this.ship)\n    );\n\n    /*\n    this.turnCurve = new THREE.CubicBezierCurve(\n      new THREE.Vector2(0, 0),\n      new THREE.Vector2(0.25, 0.25),\n      new THREE.Vector2(0.75, 0.75),\n      new THREE.Vector2(1, 1)\n    );\n\n    */\n\n    Animation.call(this);\n  }\n\n  doesMove() {\n    return !new Vector(this.positionCurves[0].getPoint(0)).equals(\n      new Vector(this.positionCurves[0].getPoint(1))\n    );\n  }\n\n  deactivate() {}\n\n  update(gameData) {}\n\n  cleanUp() {}\n\n  getEndPosition() {\n    return this.getPositionAndFacing(1, 1);\n  }\n\n  getPositionAt(time) {\n    const turnDone = this.getMovementTurnDone({ total: time });\n\n    const turn = Math.floor(turnDone);\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\n\n    return this.getPositionAndFacing(turn, percentDone);\n  }\n\n  getMovementTurnDone({ total }) {\n    if (total < this.start) {\n      return 0;\n    }\n\n    if (total > this.end) {\n      return 1;\n    }\n\n    const time = total - this.start;\n    return time / this.duration;\n  }\n\n  getCurrentRoll(turnDone) {\n    const between = -getAngleBetween(this.startRoll, this.endRoll);\n    if (between === 0) {\n      return this.endRoll;\n    }\n\n    return addToDirection(\n      this.startRoll,\n      between * this.easeInOut.getPoint(turnDone).y\n    );\n  }\n\n  render(payload) {\n    if (\n      this.shipIcon.ship.isDestroyed() &&\n      !this.shipIcon.ship.isDestroyedThisTurn()\n    ) {\n      this.shipIcon.hide();\n      return;\n    }\n\n    const turnDone = this.getMovementTurnDone(payload);\n\n    const turn = Math.floor(turnDone);\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\n\n    const { position, facing } = this.getPositionAndFacing(turn, percentDone);\n\n    const roll = this.getCurrentRoll(turnDone);\n    this.shipIcon.setPosition(position);\n    this.shipIcon.setFacing(-facing);\n    this.shipIcon.setRoll(roll);\n  }\n\n  getPositionAndFacing(turn, percentDone) {\n    const position = this.positionCurves[turn]\n      ? this.positionCurves[turn].getPoint(percentDone)\n      : this.positionCurves[this.positionCurves.length - 1].getPoint(1);\n\n    const facing = this.pivotSteps.getFacing(turn, percentDone);\n\n    return { position, facing };\n  }\n\n  movesToCurves(moves) {\n    const startsAndEnds = [];\n    let start = null;\n\n    moves.forEach((move) => {\n      if (move.isDeploy()) {\n        start = move;\n      } else if (move.isEnd() && !start) {\n        start = move;\n      } else if (move.isEnd()) {\n        startsAndEnds.push({\n          start: start,\n          end: move,\n        });\n\n        start = move;\n      }\n    });\n\n    const curves = startsAndEnds.map(({ start, end }) =>\n      this.buildPositionCurve(start, end)\n    );\n\n    return curves;\n  }\n\n  buildPositionCurve(start, end) {\n    const startPosition = start.position;\n\n    const point1 = startPosition.roundToHexCenter();\n    const control1 = startPosition.roundToHexCenter();\n    const control2 = end.position.roundToHexCenter();\n    const point2 = end.position.roundToHexCenter();\n\n    /*\n    const point1 = start.position.roundToHexCenter();\n    const control1 = start.position.add(start.velocity.multiplyScalar(0.5));\n    const control2 = end.position.sub(end.velocity.multiplyScalar(0.5));\n    const point2 = end.position.roundToHexCenter();\n    */\n\n    /*\n    return new THREE.QuadraticBezierCurve3(\n      new THREE.Vector3(point1.x, point1.y, point1.z),\n      new THREE.Vector3(control1.x, control1.y, control1.z),\n      new THREE.Vector3(point2.x, point2.y, point2.z)\n    );\n    */\n\n    return new THREE.CubicBezierCurve3(\n      new THREE.Vector3(point1.x, point1.y, point1.z),\n      new THREE.Vector3(control1.x, control1.y, control1.z),\n      new THREE.Vector3(control2.x, control2.y, control2.z),\n      new THREE.Vector3(point2.x, point2.y, point2.z)\n    );\n  }\n}\n\nexport default ShipMovementAnimation;\n","import ShipMovementAnimation from \"./ShipMovementAnimation\";\r\n\r\nexport default ShipMovementAnimation;\r\n","import { hexFacingToAngle } from \"../../../../model/utils/math.mjs\";\r\n\r\nimport Animation from \"./Animation\";\r\nimport MovementService from \"../../../../model/movement/MovementService.mjs\";\r\n\r\nclass ShipIdleMovementAnimation extends Animation {\r\n  constructor(shipIcon, gameTerrain) {\r\n    super();\r\n\r\n    this.gameTerrain = gameTerrain;\r\n\r\n    this.shipIcon = shipIcon;\r\n    this.ship = shipIcon.ship;\r\n\r\n    this.duration = 0;\r\n    this.movementService = new MovementService();\r\n\r\n    this.position = this.getPosition();\r\n    this.facing = this.getFacing();\r\n    this.roll = this.getRoll();\r\n  }\r\n\r\n  update() {\r\n    this.position = this.getPosition();\r\n    this.facing = this.getFacing();\r\n    this.roll = this.getRoll();\r\n  }\r\n\r\n  deactivate() {}\r\n\r\n  render(now, total, last, delta, zoom, back, paused) {\r\n    this.shipIcon.setPosition(this.position);\r\n    this.shipIcon.setFacing(-this.facing);\r\n    this.shipIcon.setFacing(-this.facing);\r\n    this.shipIcon.setRoll(this.roll);\r\n  }\r\n\r\n  getRoll() {\r\n    const roll = this.shipIcon.ship.movement.isRolled() ? 180 : 0;\r\n\r\n    if (this.shipIcon.ship.movement.isRolling()) {\r\n      return roll + 90;\r\n    }\r\n\r\n    return roll;\r\n  }\r\n\r\n  getPosition() {\r\n    const end = this.ship.movement.getLastEndMoveOrSurrogate();\r\n    return end.position;\r\n  }\r\n\r\n  getFacing() {\r\n    return hexFacingToAngle(\r\n      this.ship.movement.getLastEndMoveOrSurrogate().facing\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShipIdleMovementAnimation;\r\n","import Animation from \"./Animation\";\r\n\r\nclass ShipSystemAnimation extends Animation {\r\n  constructor(icon, ship) {\r\n    super();\r\n    this.icon = icon;\r\n    this.ship = ship || icon.ship;\r\n\r\n    this.updateAll();\r\n  }\r\n\r\n  updateAll() {\r\n    this.ship.systems\r\n      .getSystems()\r\n      .forEach((system) => this.updateSystem(system));\r\n  }\r\n\r\n  updateSystem(system) {\r\n    if (system.power.isGoingOffline()) {\r\n      this.icon.disableSystemAnimation(system, \"online\");\r\n      this.icon.playSystemAnimation(system, \"offline\");\r\n    } else if (system.power.isGoingOnline()) {\r\n      this.icon.disableSystemAnimation(system, \"offline\");\r\n      this.icon.playSystemAnimation(system, \"online\");\r\n    } else if (system.isDisabled()) {\r\n      this.icon.disableSystemAnimation(system, \"online\");\r\n      this.icon.setSystemAnimation(system, \"offline\", 100);\r\n    } else if (system.power.isOffline()) {\r\n      this.icon.disableSystemAnimation(system, \"online\");\r\n      this.icon.setSystemAnimation(system, \"offline\", 100);\r\n    } else if (system.power.isOnline()) {\r\n      this.icon.disableSystemAnimation(system, \"offline\");\r\n      this.icon.setSystemAnimation(system, \"online\", 100);\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default ShipSystemAnimation;\r\n","import * as THREE from \"three\";\r\nimport Animation from \"../Animation\";\r\nimport Vector from \"../../../../../model/utils/Vector\";\r\nimport { degreeToRadian } from \"../../../../../model/utils/math.mjs\";\r\nimport { hexFacingToAngle } from \"../../../../../model/utils/math.mjs\";\r\n\r\nclass ShipWeaponAnimation extends Animation {\r\n  constructor(props) {\r\n    super(props.getRandom);\r\n    this.particleEmitterContainer = props.particleEmitterContainer;\r\n    this.props = props;\r\n  }\r\n\r\n  transformLocation(location, icon, facing, roll) {\r\n    const object = new THREE.Object3D();\r\n    object.quaternion.setFromAxisAngle(\r\n      new THREE.Vector3(0, 0, 1),\r\n      degreeToRadian(-hexFacingToAngle(facing))\r\n    );\r\n\r\n    const tmpQuaternion = new THREE.Quaternion();\r\n    tmpQuaternion\r\n      .setFromAxisAngle(\r\n        new THREE.Vector3(1, 0, 0).normalize(),\r\n        degreeToRadian(roll)\r\n      )\r\n      .normalize();\r\n\r\n    object.quaternion.multiply(tmpQuaternion);\r\n\r\n    const result = location.clone();\r\n    result.applyQuaternion(object.quaternion);\r\n    result.z += icon.shipZ;\r\n    return result;\r\n  }\r\n\r\n  getLocationForSystemOrRandomLocationOnSection(\r\n    system,\r\n    icon,\r\n    facing,\r\n    roll = 0\r\n  ) {\r\n    if (roll !== 0) {\r\n      throw new Error(\"Roll is not yet implemented\");\r\n    }\r\n\r\n    let location = this.getLocationForSystem(system, icon, facing, (roll = 0));\r\n    if (!location.equals(new Vector())) {\r\n      return location;\r\n    }\r\n\r\n    location = icon.shipObjectBoundingBox.getRandomPositionForSystem(\r\n      system,\r\n      this.getRandom\r\n    );\r\n\r\n    return this.transformLocation(location.toThree(), icon, facing, roll);\r\n  }\r\n\r\n  getRandomLocationOnShip(icon, facing, roll = 0) {\r\n    const location = icon.shipObjectBoundingBox.getRandomPositionOnShip(\r\n      this.getRandom\r\n    );\r\n\r\n    if (roll !== 0) {\r\n      throw new Error(\"Roll is not yet implemented\");\r\n    }\r\n\r\n    if (!location) {\r\n      return new Vector();\r\n    }\r\n\r\n    return this.transformLocation(location.toThree(), icon, facing, roll);\r\n  }\r\n\r\n  getLocationForSystem(system, icon, facing, roll = 0) {\r\n    const location = icon.systemLocations[system.id];\r\n\r\n    if (roll !== 0) {\r\n      throw new Error(\"Roll is not yet implemented\");\r\n    }\r\n\r\n    if (!location) {\r\n      return new Vector();\r\n    }\r\n\r\n    return this.transformLocation(location, icon, facing, roll);\r\n  }\r\n}\r\n\r\nexport default ShipWeaponAnimation;\r\n","import * as THREE from \"three\";\r\nimport Vector from \"../../../../../model/utils/Vector\";\r\nimport ShipWeaponAnimation from \"./ShipWeaponAnimation\";\r\nimport BoltEffect from \"../effect/BoltEffect\";\r\nimport ExplosionEffect from \"../effect/ExplosionEffect\";\r\n\r\nclass ShipWeaponBoltAnimation extends ShipWeaponAnimation {\r\n  constructor(\r\n    time,\r\n    combatLogEntry,\r\n    fireOrder,\r\n    weapon,\r\n    shooterIcon,\r\n    targetIcon,\r\n    getPosition,\r\n    getRandom,\r\n    particleEmitterContainer,\r\n    args,\r\n    weaponAnimationService\r\n  ) {\r\n    super(getRandom);\r\n\r\n    const hit = Boolean(combatLogEntry.shotsHit);\r\n\r\n    this.particleEmitterContainer = particleEmitterContainer;\r\n\r\n    this.extraWait = getRandom() * 2000;\r\n    let startTime = time + this.extraWait;\r\n    const speed = args.speed || 1;\r\n\r\n    const startPosition = getPosition(shooterIcon, startTime).position.add(\r\n      this.getLocationForSystem(\r\n        weapon,\r\n        shooterIcon,\r\n        getPosition(shooterIcon, startTime).facing\r\n      )\r\n    );\r\n    startPosition.z += shooterIcon.shipZ;\r\n\r\n    const endPosition = getPosition(targetIcon, startTime).position.add(\r\n      this.getRandomPosition(20)\r\n    );\r\n    endPosition.z += targetIcon.shipZ;\r\n\r\n    const distance = startPosition.distanceTo(endPosition);\r\n    this.duration = distance / speed;\r\n\r\n    let fade = 0;\r\n\r\n    if (!hit) {\r\n      const extra = getRandom() * 300 + 300;\r\n      this.duration += extra;\r\n      fade = extra * 0.8;\r\n    }\r\n\r\n    this.animations = [];\r\n\r\n    this.animations.push(\r\n      weaponAnimationService.getBoltEffect(\r\n        startTime,\r\n        startPosition,\r\n        endPosition.clone(),\r\n        speed,\r\n        fade,\r\n        this.duration,\r\n        args,\r\n        this\r\n      )\r\n    );\r\n\r\n    this.explosion = null;\r\n\r\n    if (!combatLogEntry.causedDamage()) {\r\n      return;\r\n    }\r\n\r\n    if (hit) {\r\n      weaponAnimationService.getDamageExplosion(\r\n        args.explosionSize,\r\n        endPosition,\r\n        startTime + this.duration,\r\n        this\r\n      );\r\n\r\n      this.duration += 1000;\r\n    }\r\n  }\r\n\r\n  getDuration() {\r\n    return this.duration + this.extraWait;\r\n  }\r\n\r\n  deactivate() {\r\n    this.particleEmitterContainer.release(this);\r\n  }\r\n}\r\n\r\nexport default ShipWeaponBoltAnimation;\r\n","import * as THREE from \"three\";\r\nimport Vector from \"../../../../../model/utils/Vector\";\r\nimport ShipWeaponAnimation from \"./ShipWeaponAnimation\";\r\nimport BoltEffect from \"../effect/BoltEffect\";\r\nimport ExplosionEffect from \"../effect/ExplosionEffect\";\r\n\r\nclass ShipWeaponBoltBurstAnimation extends ShipWeaponAnimation {\r\n  constructor(\r\n    time,\r\n    combatLogEntry,\r\n    fireOrder,\r\n    weapon,\r\n    shooterIcon,\r\n    targetIcon,\r\n    getPosition,\r\n    getRandom,\r\n    particleEmitterContainer,\r\n    args,\r\n    weaponAnimationService\r\n  ) {\r\n    super(getRandom);\r\n    this.animations = [];\r\n    this.particleEmitterContainer = particleEmitterContainer;\r\n\r\n    const missesFirst = this.getRandom() > 0.5;\r\n    const speed = args.speed || 1;\r\n\r\n    this.extraWait = getRandom() * 2000;\r\n    let startTime = time + this.extraWait;\r\n\r\n    const startPosition = getPosition(shooterIcon, startTime).position.add(\r\n      this.getLocationForSystem(\r\n        weapon,\r\n        shooterIcon,\r\n        getPosition(shooterIcon, startTime).facing\r\n      )\r\n    );\r\n    startPosition.z += shooterIcon.shipZ;\r\n\r\n    let endPosition = getPosition(targetIcon, startTime).position.add(\r\n      this.getRandomPosition(20)\r\n    );\r\n    endPosition.z += targetIcon.shipZ;\r\n\r\n    const distance = startPosition.distanceTo(endPosition);\r\n    this.duration = distance / speed;\r\n\r\n    let offsetVector = this.getRandomPosition(5);\r\n\r\n    const missExtra = getRandom() * 300 + 300;\r\n    const missFade = missExtra * 0.8;\r\n\r\n    const totalShots = combatLogEntry.totalShots;\r\n    const shotsHit = combatLogEntry.shotsHit;\r\n\r\n    this.startExtra = 0;\r\n    for (let shotNumber = 1; shotNumber <= totalShots; shotNumber++) {\r\n      this.startExtra = (30 / speed) * shotNumber;\r\n\r\n      if (\r\n        (missesFirst && shotNumber <= totalShots - shotsHit) ||\r\n        (!missesFirst && shotNumber > shotsHit)\r\n      ) {\r\n        this.animations.push(\r\n          weaponAnimationService.getBoltEffect(\r\n            this.startExtra + startTime,\r\n            startPosition,\r\n            endPosition.clone(),\r\n            speed,\r\n            missFade,\r\n            this.duration + missExtra,\r\n            args,\r\n            this\r\n          )\r\n        );\r\n      } else {\r\n        this.animations.push(\r\n          weaponAnimationService.getBoltEffect(\r\n            this.startExtra + startTime,\r\n            startPosition,\r\n            endPosition.clone(),\r\n            speed,\r\n            0,\r\n            this.duration,\r\n            args,\r\n            this\r\n          )\r\n        );\r\n\r\n        weaponAnimationService.getDamageExplosion(\r\n          args.explosionSize,\r\n          endPosition,\r\n          this.startExtra + startTime + this.duration,\r\n          this\r\n        );\r\n      }\r\n\r\n      endPosition = endPosition.add(offsetVector);\r\n    }\r\n  }\r\n\r\n  getDuration() {\r\n    return this.duration + this.extraWait + this.startExtra + 1000;\r\n  }\r\n\r\n  deactivate() {\r\n    this.particleEmitterContainer.release(this);\r\n  }\r\n}\r\n\r\nexport default ShipWeaponBoltBurstAnimation;\r\n","import * as THREE from \"three\";\nimport Vector from \"../../../../../model/utils/Vector\";\nimport ShipWeaponAnimation from \"./ShipWeaponAnimation\";\nimport BoltEffect from \"../effect/BoltEffect\";\nimport ExplosionEffect from \"../effect/ExplosionEffect\";\n\nclass ShipWeaponUniversalBoltAnimation extends ShipWeaponAnimation {\n  constructor(props) {\n    super(props);\n    const { args, weaponAnimationService, omitHitExplosion } = props;\n\n    this.animations = [];\n    this.speed = args.speed || 1;\n    this.duration = 0;\n    this.setShots();\n    this.setStartPosition();\n    this.setEndPosition();\n    this.setStartTime();\n\n    const missExtra = this.getRandom() * 300 + 300;\n    const missFade = missExtra * 0.8;\n\n    this.shots.forEach((shot) => {\n      const duration =\n        this.startPosition.distanceTo(this.endPosition.add(shot.offset)) /\n        this.speed;\n\n      this.animations.push(\n        weaponAnimationService.getBoltEffect(\n          this.startTime + shot.startExtra,\n          this.startPosition.clone(),\n          this.endPosition.clone(),\n          this.speed,\n          shot.hit ? 0 : missFade,\n          shot.hit ? duration : duration + missExtra,\n          props.args,\n          this\n        )\n      );\n\n      if (shot.hit && !omitHitExplosion) {\n        this.animations.push(\n          weaponAnimationService.getDamageExplosion(\n            props.args.explosionSize,\n            props.args.explosionType,\n            this.endPosition.add(shot.offset),\n            this.startTime + shot.startExtra + duration,\n            this\n          )\n        );\n      }\n    });\n  }\n\n  setShots() {\n    const { totalShots, shotsHit, args } = this.props;\n\n    let startExtra = 0;\n    this.shots = [];\n    const hitsStart = Math.floor(this.getRandom() * (totalShots - shotsHit));\n\n    const offsetVector = this.getRandomPosition(args.size);\n\n    const length = args.length || 10;\n\n    for (let currentShot = 0; currentShot < totalShots; currentShot++) {\n      const hit =\n        currentShot >= hitsStart && currentShot < hitsStart + shotsHit;\n\n      startExtra = ((5 * length) / this.speed) * currentShot;\n\n      const n = currentShot - hitsStart;\n\n      let offset = new Vector();\n      if (n < 0) {\n        offset = offset.sub(offsetVector.multiplyScalar(Math.abs(n)));\n      } else if (n > 0) {\n        offset = offset.add(offsetVector.multiplyScalar(Math.abs(n)));\n      }\n\n      this.shots.push({\n        startExtra: startExtra,\n        hit,\n        offset,\n      });\n    }\n  }\n\n  getFirstHit() {\n    return this.shots.find((shot) => shot.hit);\n  }\n\n  setEndPosition() {\n    const {\n      targetIcon,\n      impactPosition,\n      getPosition,\n      shotsHit,\n      fireEntry,\n    } = this.props;\n\n    if (impactPosition) {\n      if (shotsHit === 0) {\n        this.endPosition = impactPosition.add(this.getRandomPosition(20));\n      } else {\n        this.endPosition = impactPosition;\n      }\n    } else {\n      const { position, facing } = getPosition(targetIcon.ship);\n      if (shotsHit === 0) {\n        this.endPosition = this.getRandomLocationOnShip(targetIcon, facing)\n          .add(position)\n          .add(this.getRandomPosition(50));\n      } else {\n        const damage =\n          fireEntry.damages.length > 0\n            ? fireEntry.damages[\n                Math.floor(this.getRandom() * fireEntry.damages.length)\n              ]\n            : null;\n\n        const damageEntry =\n          damage && damage.entries.length > 0\n            ? damage.entries[\n                Math.floor(this.getRandom() * damage.entries.length)\n              ]\n            : null;\n\n        if (damageEntry) {\n          const system = targetIcon.ship.systems.getSystemById(\n            damageEntry.systemId\n          );\n\n          this.endPosition = this.getLocationForSystemOrRandomLocationOnSection(\n            system,\n            targetIcon,\n            facing\n          ).add(position);\n        } else {\n          this.endPosition = getPosition(targetIcon.ship).position.add(\n            this.getRandomPosition(20)\n          );\n          this.endPosition.z += targetIcon.shipZ;\n        }\n      }\n    }\n  }\n\n  setStartTime() {\n    const { animationStartTime, impactTime } = this.props;\n\n    if (impactTime) {\n      this.startWait = 0;\n      const firstHit = this.getFirstHit();\n      const startExtra = firstHit ? firstHit.startExtra : 0;\n\n      const distance = this.startPosition.distanceTo(this.endPosition);\n      this.duration = distance / this.speed;\n      this.startTime = impactTime - (startExtra + this.duration);\n    } else {\n      this.startWait = this.getRandom() * 2000;\n      this.startTime = animationStartTime + this.startWait;\n      const distance = this.startPosition.distanceTo(this.endPosition);\n      this.duration = distance / this.speed;\n    }\n  }\n\n  setStartPosition() {\n    const { shooterIcon, weapon, getPosition } = this.props;\n\n    this.startPosition = getPosition(shooterIcon.ship).position.add(\n      this.getLocationForSystem(\n        weapon,\n        shooterIcon,\n        getPosition(shooterIcon.ship).facing\n      )\n    );\n  }\n\n  getDuration() {\n    return this.duration + this.startWait + 1000;\n  }\n\n  deactivate() {\n    this.particleEmitterContainer.release(this);\n  }\n}\n\nexport default ShipWeaponUniversalBoltAnimation;\n","import ShipWeaponBoltAnimation from \"./ShipWeaponBoltAnimation\";\r\nimport ShipWeaponBoltBurstAnimation from \"./ShipWeaponBoltBurstAnimation\";\r\nimport ShipWeaponUniversalBoltAnimation from \"./ShipWeaponUniversalBoltAnimation\";\r\nimport ShipWeaponAnimation from \"./ShipWeaponAnimation\";\r\n\r\nexport default {\r\n  ShipWeaponAnimation,\r\n  ShipWeaponBoltAnimation,\r\n  ShipWeaponBoltBurstAnimation,\r\n  ShipWeaponUniversalBoltAnimation,\r\n};\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass AnimationUiStrategy extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n    this.animations = [];\r\n  }\r\n\r\n  deactivate() {\r\n    this.removeAllAnimations();\r\n    super.deactivate();\r\n  }\r\n\r\n  render(payload) {\r\n    this.animations.forEach(animation => animation.render(payload));\r\n  }\r\n\r\n  removeAllAnimations() {\r\n    this.animations.forEach(animation => animation.deactivate());\r\n    this.animations = [];\r\n  }\r\n\r\n  removeAnimation(toRemove) {\r\n    this.animations = this.animations.filter(function(animation) {\r\n      return animation !== animation;\r\n    });\r\n\r\n    toRemove.deactivate();\r\n  }\r\n}\r\n\r\nexport default AnimationUiStrategy;\r\n","import Animation from \"./Animation\";\r\n\r\nclass ShipDamageAnimation extends Animation {\r\n  constructor(icon, sections, start = 0, end = null) {\r\n    super();\r\n    this.icon = icon;\r\n    this.sections = sections;\r\n    this.start = start;\r\n    this.end = end;\r\n\r\n    this.active = false;\r\n  }\r\n\r\n  render({ total }) {\r\n    if (this.end && total >= this.end && !this.active) {\r\n      return;\r\n    }\r\n\r\n    if (this.end && total >= this.end && this.active) {\r\n      this.deactivate();\r\n      return;\r\n    }\r\n\r\n    if (this.active && total < this.start) {\r\n      this.deactivate();\r\n      return;\r\n    }\r\n\r\n    if (!this.active && total >= this.start) {\r\n      this.activate();\r\n    }\r\n  }\r\n\r\n  async activate() {\r\n    this.active = true;\r\n    await this.icon.isShipObjectLoaded;\r\n    if (this.sections) {\r\n      this.icon.shipObjectSectionDamageEffect.createDamageForSections(\r\n        this.sections\r\n      );\r\n    } else {\r\n      this.icon.shipObjectSectionDamageEffect.createDamage();\r\n    }\r\n  }\r\n\r\n  async deactivate() {\r\n    this.active = false;\r\n    await this.icon.isShipObjectLoaded;\r\n    this.icon.shipObjectSectionDamageEffect.removeDamage();\r\n  }\r\n}\r\n\r\nexport default ShipDamageAnimation;\r\n","import {\r\n  ShipIdleMovementAnimation,\r\n  ShipSystemAnimation,\r\n} from \"../../animation\";\r\n\r\nimport AnimationUiStrategy from \"./AnimationUiStrategy\";\r\nimport ShipDamageAnimation from \"../../animation/ShipDamageAnimation\";\r\n\r\nclass ShowShipObjects extends AnimationUiStrategy {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  async update(gamedata) {\r\n    super.update(gamedata);\r\n    const { shipIconContainer } = this.services;\r\n\r\n    await shipIconContainer.shipsLoaded();\r\n\r\n    shipIconContainer.getArray().forEach((icon) => {\r\n      const ship = icon.ship;\r\n\r\n      if (ship.isDestroyed()) {\r\n        icon.hide();\r\n      } else {\r\n        icon.show();\r\n        this.animations.push(\r\n          new ShipIdleMovementAnimation(icon, gamedata.terrain)\r\n        );\r\n        this.animations.push(new ShipSystemAnimation(icon));\r\n        this.animations.push(new ShipDamageAnimation(icon));\r\n      }\r\n      return this;\r\n    });\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    this.animations\r\n      .filter((animation) => animation.ship === ship)\r\n      .forEach((animation) => {\r\n        animation.update();\r\n      });\r\n  }\r\n\r\n  shipSystemStateChanged({ ship, system }) {\r\n    this.animations\r\n      .filter((animation) => animation.ship === ship)\r\n      .forEach((animation) => {\r\n        if (animation.updateSystem) {\r\n          animation.updateSystem(system);\r\n        }\r\n      });\r\n  }\r\n\r\n  deactivate() {\r\n    const { shipIconContainer } = this.services;\r\n    shipIconContainer.getArray().forEach((icon) => {\r\n      icon.hide();\r\n    }, this);\r\n\r\n    return super.deactivate();\r\n  }\r\n}\r\n\r\nexport default ShowShipObjects;\r\n","import UiStrategy from \"./UiStrategy\";\n\nclass RightClickShowsShipWindow extends UiStrategy {\n  shipRightClicked(payload) {\n    const { uiState } = this.services;\n    //TODO: open tooltip in ship window mode?\n  }\n}\n\nexport default RightClickShowsShipWindow;\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass MouseOverShowsShipTooltip extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.clickedShip = null;\r\n    this.clickedEnemy = null;\r\n    this.mouseOveredShip = null;\r\n  }\r\n\r\n  shipTooltipClosed(ship) {\r\n    if (this.clickedShip === ship) {\r\n      this.clickedShip = null;\r\n    }\r\n\r\n    if (this.clickedEnemy === ship) {\r\n      this.clickedEnemy = null;\r\n    }\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    const { uiState, shipIconContainer, currentUser } = this.services;\r\n\r\n    const isMine = ship.player.is(currentUser);\r\n\r\n    if (this.clickedShip === ship) {\r\n      uiState.showShipTooltip(ship, true, isMine);\r\n    }\r\n    if (this.clickedEnemy === ship) {\r\n      uiState.showShipTooltip(ship, true, isMine);\r\n    }\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    if (this.clickedShip) {\r\n      uiState.hideShipTooltip(this.clickedShip);\r\n    }\r\n\r\n    if (this.clickedEnemy) {\r\n      uiState.hideShipTooltip(this.clickedEnemy);\r\n    }\r\n  }\r\n\r\n  shipClicked(payload) {\r\n    const { uiState, currentUser } = this.services;\r\n\r\n    const ship = payload.entity.ship;\r\n    const isMine = ship.player.is(currentUser);\r\n\r\n    if (isMine && this.clickedShip) {\r\n      uiState.hideShipTooltip(this.clickedShip);\r\n    }\r\n\r\n    if (!isMine && this.clickedEnemy) {\r\n      uiState.hideShipTooltip(this.clickedEnemy);\r\n    }\r\n\r\n    uiState.showShipTooltip(payload.entity.ship, true, isMine);\r\n    if (isMine) {\r\n      this.clickedShip = ship;\r\n    } else {\r\n      this.clickedEnemy = ship;\r\n    }\r\n\r\n    if (\r\n      this.mouseOveredShip === this.clickedShip ||\r\n      this.mouseOveredShip === this.clickedEnemy\r\n    ) {\r\n      this.mouseOveredShip = null;\r\n    }\r\n  }\r\n  /*\r\n  hexClicked() {\r\n    const { uiState } = this.services;\r\n\r\n    if (uiState.state.systemMenu.activeSystem) {\r\n      return;\r\n    }\r\n\r\n    if (this.clickedShip) {\r\n      uiState.hideShipTooltip(this.clickedShip);\r\n      this.clickedShip = null;\r\n    }\r\n\r\n    if (this.clickedEnemy) {\r\n      uiState.hideShipTooltip(this.clickedEnemy);\r\n      this.clickedEnemy = null;\r\n    }\r\n  }\r\n  */\r\n\r\n  mouseOverShip(payload) {\r\n    const { uiState, currentUser } = this.services;\r\n\r\n    const ship = payload.entity.ship;\r\n    const isMine = ship.player.is(currentUser);\r\n\r\n    if (isMine && this.clickedShip === ship) {\r\n      return;\r\n    }\r\n\r\n    if (!isMine && this.clickedEnemy === ship) {\r\n      return;\r\n    }\r\n\r\n    if (this.mouseOveredShip) {\r\n      uiState.hideShipTooltip(this.mouseOveredShip);\r\n    }\r\n\r\n    if (isMine && this.clickedShip) {\r\n      uiState.hideShipTooltip(this.clickedShip);\r\n    }\r\n\r\n    if (!isMine && this.clickedEnemy) {\r\n      uiState.hideShipTooltip(this.clickedEnemy);\r\n    }\r\n\r\n    uiState.showShipTooltip(payload.entity.ship, false, isMine);\r\n    this.mouseOveredShip = payload.entity.ship;\r\n  }\r\n\r\n  mouseOutShip(payload) {\r\n    const { shipIconContainer, currentUser } = this.services;\r\n\r\n    const ship = payload.entity.ship;\r\n    const isMine = ship.player.is(currentUser);\r\n\r\n    if (isMine && this.clickedShip === payload.entity.ship) {\r\n      return;\r\n    }\r\n\r\n    if (!isMine && this.clickedEnemy === payload.entity.ship) {\r\n      return;\r\n    }\r\n\r\n    const { uiState } = this.services;\r\n    uiState.hideShipTooltip(payload.entity.ship);\r\n    this.mouseOveredShip = null;\r\n\r\n    if (isMine && this.clickedShip) {\r\n      uiState.showShipTooltip(this.clickedShip, true, isMine);\r\n    }\r\n\r\n    if (!isMine && this.clickedEnemy) {\r\n      uiState.showShipTooltip(this.clickedEnemy, true, isMine);\r\n    }\r\n  }\r\n}\r\n\r\nexport default MouseOverShowsShipTooltip;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport {\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  COLOR_FRIENDLY_HIGHLIGHT,\r\n  COLOR_ENEMY_HIGHLIGHT\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass MouseOverHighlightsShip extends UiStrategy {\r\n  deactivate(payload) {\r\n    this.hide();\r\n  }\r\n\r\n  show(payload) {\r\n    const { currentUser } = this.services;\r\n    if (payload.entity.ship.player.isUsers(currentUser)) {\r\n      payload.entity.replaceEmissive(COLOR_FRIENDLY);\r\n    } else {\r\n      payload.entity.replaceEmissive(COLOR_ENEMY);\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    const { shipIconContainer } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      icon.revertEmissive();\r\n    });\r\n  }\r\n\r\n  mouseOverShip(payload) {\r\n    this.show(payload);\r\n  }\r\n\r\n  mouseOutShip(payload) {\r\n    this.hide();\r\n  }\r\n\r\n  mouseOut() {\r\n    this.hide();\r\n  }\r\n}\r\n\r\nexport default MouseOverHighlightsShip;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass SelectUndeployedShip extends UiStrategy {\r\n  update(gameData) {\r\n    const { uiState, currentUser } = this.services;\r\n\r\n    if (uiState.getSelectedShip()) {\r\n      return;\r\n    }\r\n\r\n    const ships = gameData.getShipsForUser(currentUser);\r\n    let ship = ships.find(s => s.movement.getDeployMove());\r\n\r\n    if (!ship) {\r\n      ship = ships[0];\r\n    }\r\n\r\n    if (!ship) {\r\n      return;\r\n    }\r\n\r\n    uiState.selectShip(ship);\r\n  }\r\n}\r\n\r\nexport default SelectUndeployedShip;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass DeployShipOnHexClick extends UiStrategy {\r\n  hexClicked({ hex }) {\r\n    const { uiState, movementService } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n\r\n    if (!ship || !this.gameData) {\r\n      return;\r\n    }\r\n\r\n    const slot = this.gameData.slots.getSlotByShip(ship);\r\n\r\n    if (!slot.isValidShipDeployment(ship, hex)) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      this.gameData.ships\r\n        .getShips()\r\n        .find(\r\n          otherShip =>\r\n            otherShip !== ship && otherShip.getHexPosition().equals(hex)\r\n        )\r\n    ) {\r\n      return;\r\n    }\r\n    movementService.deploy(ship, hex);\r\n    uiState.shipStateChanged(ship);\r\n  }\r\n}\r\n\r\nexport default DeployShipOnHexClick;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass AllowSubmittingWhenDeploymentDone extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.setTurnReady(false);\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.checkDeployment();\r\n  }\r\n\r\n  shipStateChanged() {\r\n    this.checkDeployment();\r\n  }\r\n\r\n  checkDeployment() {\r\n    const { currentUser, uiState } = this.services;\r\n    const result = this.gameData.ships.getShips().every(ship => {\r\n      if (!ship.player.isUsers(currentUser)) {\r\n        return true;\r\n      }\r\n\r\n      const slot = this.gameData.slots.getSlotByShip(ship);\r\n\r\n      if (slot.isValidShipDeployment(ship, ship.getHexPosition())) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    });\r\n\r\n    uiState.setTurnReady(result);\r\n  }\r\n}\r\n\r\nexport default AllowSubmittingWhenDeploymentDone;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport * as THREE from \"three\";\r\nimport { HexagonSprite } from \"../../renderer/sprite\";\r\n\r\nclass DebugDrawLineFromSelectedShip extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.sprites = [];\r\n  }\r\n\r\n  mouseOverHex(hex) {\r\n    const { uiState, coordinateConverter, scene } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n    if (!ship) {\r\n      return;\r\n    }\r\n\r\n    const positions = hex.drawLine(ship.getHexPosition(), 5);\r\n\r\n    this.sprites = positions.map(position => {\r\n      const sprite = new HexagonSprite(\r\n        coordinateConverter.fromHexToGame(position)\r\n      );\r\n      scene.add(sprite.mesh);\r\n      return sprite;\r\n    });\r\n  }\r\n\r\n  mouseOutHex(hex) {\r\n    const { scene } = this.services;\r\n    this.sprites.forEach(sprite => {\r\n      scene.remove(sprite.mesh);\r\n      sprite.destroy();\r\n    });\r\n    this.sprites = [];\r\n  }\r\n}\r\n\r\nexport default DebugDrawLineFromSelectedShip;\r\n","import * as THREE from \"three\";\r\nimport { CircleSprite, LineSprite, ShipFacingSprite } from \"../renderer/sprite\";\r\n\r\nclass NavigationalMovementPath {\r\n  constructor(terrain, position, velocity, turns, coordinateConverter, scene) {\r\n    this.terrain = terrain;\r\n    this.position = position;\r\n    this.velocity = velocity;\r\n    this.turns = turns;\r\n    this.coordinateConverter = coordinateConverter;\r\n    this.scene = scene;\r\n\r\n    this.objects = [];\r\n\r\n    this.create();\r\n  }\r\n\r\n  remove() {\r\n    this.objects.forEach((object3d) => {\r\n      this.scene.remove(object3d.mesh);\r\n      object3d.destroy();\r\n    });\r\n  }\r\n\r\n  create() {\r\n    let turns = 1000;\r\n    const start = performance.now();\r\n    let position = this.position;\r\n    let velocity = this.velocity;\r\n\r\n    while (turns--) {\r\n      const {\r\n        position: newPosition,\r\n        velocity: newVelocity,\r\n        positions,\r\n        collision,\r\n      } = this.terrain.getGravityVectorForTurn(position, velocity, 1);\r\n\r\n      velocity = newVelocity;\r\n      position = newPosition;\r\n      //this.createLine(positions);\r\n\r\n      if (collision) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    console.log(\"building path took\", performance.now() - start, \"ms\");\r\n  }\r\n\r\n  createLine(positions) {\r\n    //positions.forEach(pos => console.log(pos.toString()));\r\n\r\n    let start = positions.shift();\r\n\r\n    positions.forEach((end) => {\r\n      const line = new LineSprite(\r\n        start,\r\n        end,\r\n        5,\r\n        new THREE.Color(132 / 255, 165 / 255, 206 / 255),\r\n        0.5\r\n      );\r\n\r\n      this.scene.add(line.mesh);\r\n      this.objects.push(line);\r\n\r\n      start = end;\r\n    });\r\n  }\r\n}\r\n\r\nexport default NavigationalMovementPath;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport NavigationalMovementPath from \"../../../game/movement/NavigationalMovementPath\";\r\n\r\nclass SelectedShipNavigationPath extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.ship = null;\r\n    this.path = null;\r\n  }\r\n\r\n  deactivate() {\r\n    if (this.path) {\r\n      this.path.remove();\r\n    }\r\n  }\r\n\r\n  update(gameData) {\r\n    const { uiState } = this.services;\r\n    super.update(gameData);\r\n    this.show(uiState.getSelectedShip());\r\n  }\r\n\r\n  shipStateChanged() {\r\n    if (this.ship) {\r\n      if (this.path) {\r\n        this.path.remove();\r\n      }\r\n\r\n      this.show(this.ship);\r\n    }\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    this.show(ship);\r\n  }\r\n\r\n  show(ship) {\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    const { coordinateConverter, scene } = this.services;\r\n\r\n    if (!ship) {\r\n      return;\r\n    }\r\n\r\n    this.ship = ship;\r\n\r\n    const move = ship.movement.getLastEndMoveOrSurrogate();\r\n    this.path = new NavigationalMovementPath(\r\n      this.gameData.terrain,\r\n      move.position,\r\n      move.velocity,\r\n      100,\r\n      coordinateConverter,\r\n      scene\r\n    );\r\n  }\r\n\r\n  shipDeselected(ship) {\r\n    if (this.path) {\r\n      this.path.remove();\r\n    }\r\n  }\r\n}\r\n\r\nexport default SelectedShipNavigationPath;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass SelectedShipDeploymentMovementUi extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.hideShipMovement();\r\n  }\r\n\r\n  shipStateChanged() {\r\n    const { uiState } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n\r\n    if (ship) {\r\n      uiState.showShipDeploymentMovement(ship, true);\r\n    }\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { uiState } = this.services;\r\n    uiState.showShipDeploymentMovement(ship, true);\r\n  }\r\n\r\n  shipDeselected() {\r\n    const { uiState } = this.services;\r\n    uiState.hideShipMovement();\r\n  }\r\n}\r\n\r\nexport default SelectedShipDeploymentMovementUi;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass ShowWaitingStatus extends UiStrategy {\r\n  activate(services) {\r\n    super.activate(services);\r\n    const { uiState } = this.services;\r\n    uiState.setWaiting(true);\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.setWaiting(false);\r\n  }\r\n}\r\n\r\nexport default ShowWaitingStatus;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass SelectFirstActiveShip extends UiStrategy {\r\n  async update(gameData) {\r\n    const {\r\n      uiState,\r\n      currentUser,\r\n      gameCamera,\r\n      shipIconContainer\r\n    } = this.services;\r\n\r\n    if (\r\n      uiState.getSelectedShip() &&\r\n      gameData.activeShips.isActive(uiState.getSelectedShip())\r\n    ) {\r\n      const oldShip = uiState.getSelectedShip();\r\n      const newShip = gameData.ships.getShipById(oldShip.id);\r\n      if (oldShip !== newShip) {\r\n        uiState.selectShip(newShip);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const ship = gameData.getActiveShipsForUser(currentUser).pop();\r\n\r\n    if (ship) {\r\n      uiState.selectShip(ship);\r\n      await shipIconContainer.shipsLoaded();\r\n      const icon = shipIconContainer.getByShip(ship);\r\n      gameCamera.setByLookAtPosition(icon.getPosition());\r\n    }\r\n  }\r\n}\r\n\r\nexport default SelectFirstActiveShip;\r\n","export const WEAPONS = \"weapons\";\r\nexport const ENEMY_WEAPONS = \"enemy_weapons\";\r\nexport const MOVEMENT = \"movement\";\r\nexport const EW = \"ew\";\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport * as gameUiModes from \"../gameUiModes\";\r\n\r\nclass AllShipsMovementPaths extends UiStrategy {\r\n  deactivate() {\r\n    const { movementPathService } = this.services;\r\n    movementPathService.hideAllMovementPaths();\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.show();\r\n  }\r\n\r\n  uiStateChanged() {\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    const { movementPathService, uiState } = this.services;\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !uiState.hasGameUiMode(gameUiModes.MOVEMENT) ||\r\n      uiState.getSelectedShip() !== ship\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    movementPathService.showMovementPath(ship);\r\n  }\r\n\r\n  mouseOutShip() {\r\n    this.show();\r\n  }\r\n\r\n  show() {\r\n    const { movementPathService, uiState } = this.services;\r\n\r\n    if (uiState.hasGameUiMode(gameUiModes.MOVEMENT)) {\r\n      const ships = this.gameData.ships.getAliveShips();\r\n      ships.forEach(ship => movementPathService.showMovementPath(ship));\r\n    } else {\r\n      movementPathService.hideAllMovementPaths();\r\n\r\n      /*\r\n      const ship = uiState.getSelectedShip();\r\n      if (ship) {\r\n        movementPathService.showMovementPath(ship);\r\n      }\r\n      */\r\n    }\r\n  }\r\n}\r\n\r\nexport default AllShipsMovementPaths;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass AllowSubmittingOnValidGameState extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.setTurnReady(false);\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n\r\n    const { uiState } = this.services;\r\n    uiState.setTurnReady(true);\r\n  }\r\n}\r\n\r\nexport default AllowSubmittingOnValidGameState;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass AutomaticReplay extends UiStrategy {\r\n  constructor(phaseStrategy, replayContext) {\r\n    super();\r\n    this.phaseStrategy = phaseStrategy;\r\n    this.replayContext = replayContext;\r\n  }\r\n\r\n  async newTurn(gameDatas) {\r\n    const { shipIconContainer } = this.services;\r\n\r\n    await shipIconContainer.shipsLoaded();\r\n\r\n    setTimeout(() => {\r\n      this.phaseStrategy.animateFromTo(0);\r\n    }, 500);\r\n  }\r\n\r\n  render({ delta, total }) {\r\n    if (total >= this.replayContext.getTurnLength() + 2000) {\r\n      const { uiState } = this.services;\r\n      uiState.closeReplay();\r\n    }\r\n  }\r\n}\r\n\r\nexport default AutomaticReplay;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass ShowReplayUi extends UiStrategy {\r\n  constructor(replayContext) {\r\n    super();\r\n    this.replayContext = replayContext;\r\n  }\r\n\r\n  activate(services) {\r\n    super.activate(services);\r\n    const { uiState } = this.services;\r\n    uiState.showReplayUi(this.replayContext);\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.showReplayUi(false);\r\n  }\r\n}\r\n\r\nexport default ShowReplayUi;\r\n","const blue = \"#deebff\";\r\nconst darkBlue = \"#04161C\";\r\nconst border = \"#496791\";\r\nconst borderDark = \"#37465a\";\r\nconst text = \"#DEEBFF\";\r\nconst textDanger = \"#da5656\";\r\nconst lightBlue = \"#6daaff\";\r\nconst red = \"#a82a2a\";\r\nconst systemWindowBorder = \"#6e6c6c\";\r\nconst systemWindowPrimaryBorder = \"#aaaaaa\";\r\nconst systemBorder = \"#bebebe\";\r\nconst tooltipButtonColor = \"#3b3b60\";\r\nconst mediumBlue = \"#142b4b\";\r\nconst hitpoints = \"#427231\";\r\nconst hitpointsCritical = \"#ed6738\";\r\nconst fuel = \"#295591\";\r\n\r\nexport {\r\n  blue,\r\n  darkBlue,\r\n  border,\r\n  borderDark,\r\n  text,\r\n  textDanger,\r\n  lightBlue,\r\n  systemWindowBorder,\r\n  systemBorder,\r\n  systemWindowPrimaryBorder,\r\n  tooltipButtonColor,\r\n  mediumBlue,\r\n  hitpoints,\r\n  hitpointsCritical,\r\n  red,\r\n  fuel,\r\n};\r\n","import * as React from \"react\";\r\n\r\nclass Arrow extends React.Component {\r\n  render() {\r\n    const { size = \"90%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        id=\"arrow\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 32.75 32.75\"\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M30.434,15.938c-0.791,0.933-1.917,1.411-3.052,1.411c-0.913,0-1.834-0.312-2.587-0.951l-4.421-3.753V28.75 c0,2.209-1.791,4-4,4c-2.209,0-4-1.791-4-4V12.646l-4.42,3.754c-1.683,1.431-4.208,1.226-5.639-0.459 c-1.43-1.684-1.224-4.208,0.46-5.638l11.01-9.351c1.493-1.27,3.686-1.27,5.178,0l11.011,9.351 C31.658,11.73,31.863,14.255,30.434,15.938z\"\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Arrow;\r\n","import * as React from \"react\";\r\n\r\nclass ArrowSmall extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        id=\"Capa_1\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 438.533 438.533\"\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0 c-39.781,0-76.47,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267 c0,39.78,9.804,76.463,29.407,110.062c19.607,33.592,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407 s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.596,29.403-70.284,29.403-110.062 C438.533,179.485,428.732,142.795,409.133,109.203z M334.332,232.111L204.71,361.736c-3.617,3.613-7.896,5.428-12.847,5.428 c-4.952,0-9.235-1.814-12.85-5.428l-29.121-29.13c-3.617-3.613-5.426-7.898-5.426-12.847c0-4.941,1.809-9.232,5.426-12.847 l87.653-87.646l-87.657-87.65c-3.617-3.612-5.426-7.898-5.426-12.845c0-4.949,1.809-9.231,5.426-12.847l29.121-29.13 c3.619-3.615,7.898-5.424,12.85-5.424c4.95,0,9.233,1.809,12.85,5.424l129.622,129.621c3.613,3.614,5.42,7.898,5.42,12.847 C339.752,224.213,337.945,228.498,334.332,232.111z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ArrowSmall;\r\n","import * as React from \"react\";\r\n\r\nclass Roll extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        id=\"roll\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 420.995 420.995\"\r\n        width={size}\r\n        height={size}\r\n      >\r\n        <g fill=\"#010002\">\r\n          <path\r\n            id=\"svg-path\"\r\n            d=\"M127.505,196.313c22.15,0,27.45-12.827,11.77-28.458l-31.165-31.197 c4.406-6.194,9.234-12.006,14.599-17.257c1.878-1.788,3.796-3.512,5.763-5.17c2.3-2.008,4.715-3.861,7.145-5.698 c2.146-1.561,4.292-3.146,6.487-4.593c3.65-2.341,7.364-4.511,11.226-6.454c1.723-0.87,3.438-1.626,5.194-2.439 c4.04-1.837,8.202-3.471,12.494-4.926c0.845-0.236,1.626-0.602,2.463-0.845c5.194-1.561,10.478-2.707,15.875-3.617 c1.39-0.244,2.78-0.455,4.17-0.634c5.601-0.764,11.25-1.301,17.013-1.301c0.179,0,0.358,0.065,0.536,0.065 c4.113,0,8.096,0.171,12.103,0.593c1.967,0.187,3.861,0.585,5.763,0.862c2.292,0.358,4.552,0.593,6.755,1.024 c1.626,0.366,3.195,0.813,4.771,1.203c2.552,0.602,5.154,1.211,7.657,2.016c1.138,0.333,2.235,0.813,3.349,1.179 c2.991,1.032,5.918,2.057,8.787,3.325c14.534,6.218,27.946,15.2,39.464,26.735c12.372,12.315,21.85,26.784,28.182,42.927 c6.942,17.607,26.776,26.223,44.358,19.313c17.623-6.901,26.255-26.751,19.305-44.317c-9.779-24.987-24.435-47.325-43.447-66.329 c-17.322-17.289-37.416-30.775-59.143-40.399c-0.301-0.154-0.536-0.333-0.845-0.455c-0.252-0.122-0.488-0.187-0.732-0.301 c-4.885-2.089-9.868-3.894-14.932-5.584c-1.211-0.423-2.382-0.935-3.617-1.292c-4.804-1.52-9.665-2.731-14.55-3.812 c-1.544-0.366-3.073-0.87-4.617-1.171c-4.885-0.992-9.836-1.65-14.81-2.252c-1.544-0.187-3.048-0.553-4.625-0.732 c-6.519-0.634-13.152-0.975-19.785-0.975c-0.358,0-0.788,0.065-1.179,0.065c-5.462,0-10.835,0.309-16.151,0.788 c-1.861,0.13-3.739,0.366-5.601,0.602c-4.081,0.488-8.12,1.097-12.128,1.821c-1.813,0.301-3.585,0.626-5.373,0.992 c-5.064,1.057-10.136,2.325-15.054,3.78c-0.463,0.146-0.943,0.236-1.423,0.382c-5.796,1.756-11.469,3.837-17.013,6.096 c-0.585,0.219-1.089,0.488-1.634,0.699c-5.259,2.227-10.437,4.674-15.452,7.332c-0.333,0.154-0.658,0.325-1.016,0.504 C95.69,50.6,75.409,67.191,58.997,87.602l-30.539-30.58C12.803,41.391,0,46.674,0,68.825v87.211 c0,22.183,18.102,40.277,40.228,40.277C40.228,196.313,127.505,196.313,127.505,196.313z\"\r\n            fill={color}\r\n          />\r\n          <path\r\n            id=\"svg-path\"\r\n            d=\"M380.783,224.706h-87.268c-22.118,0-27.393,12.786-11.77,28.45l31.197,31.206 c-4.406,6.121-9.161,11.86-14.542,17.111c-1.902,1.861-3.894,3.642-5.918,5.357c-2.235,1.935-4.536,3.715-6.844,5.43 c-2.3,1.691-4.593,3.406-6.999,4.926c-3.536,2.252-7.153,4.373-10.9,6.235c-1.74,0.894-3.495,1.723-5.267,2.536 c-4.024,1.821-8.12,3.438-12.282,4.828c-0.91,0.301-1.756,0.658-2.658,0.91c-5.162,1.593-10.445,2.715-15.843,3.617 c-1.39,0.236-2.812,0.423-4.202,0.658c-5.568,0.699-11.217,1.203-16.948,1.203c-4.284,0-8.511-0.179-12.729-0.602 c-1.788-0.179-3.56-0.536-5.316-0.788c-2.406-0.301-4.82-0.658-7.243-1.122c-1.504-0.26-3.016-0.788-4.519-1.105 c-2.626-0.675-5.251-1.276-7.852-2.065c-1.146-0.366-2.268-0.845-3.438-1.203c-2.894-1.024-5.763-2.048-8.633-3.284 c-14.534-6.243-27.97-15.2-39.489-26.702c-12.404-12.429-21.874-26.881-28.214-42.96c-6.877-17.623-26.767-26.255-44.358-19.346 c-17.566,6.917-26.263,26.767-19.313,44.39c9.803,24.857,24.435,47.186,43.504,66.248c17.322,17.33,37.391,30.848,59.144,40.383 c0.301,0.171,0.545,0.358,0.813,0.455c0.236,0.146,0.496,0.203,0.707,0.293c4.999,2.187,10.136,4.056,15.314,5.771 c1.097,0.358,2.113,0.813,3.211,1.154c4.975,1.561,10.047,2.772,15.135,3.95c1.333,0.317,2.658,0.723,4.048,0.992 c5.121,1.089,10.405,1.813,15.688,2.414c1.26,0.179,2.463,0.455,3.707,0.569c6.544,0.634,13.12,1.032,19.793,1.032 c0.358,0,0.691-0.073,1.049-0.073c5.527-0.033,10.99-0.325,16.387-0.813c1.788-0.154,3.601-0.366,5.406-0.577 c4.17-0.504,8.299-1.105,12.396-1.845c1.723-0.293,3.406-0.626,5.105-0.984c5.243-1.065,10.437-2.357,15.509-3.894 c0.358-0.057,0.658-0.163,1.024-0.236c5.82-1.756,11.591-3.869,17.2-6.153l1.325-0.585c5.373-2.219,10.616-4.731,15.753-7.446 c0.268-0.154,0.545-0.301,0.845-0.455c22.809-12.193,43.09-28.783,59.509-49.21l30.539,30.531 c15.664,15.696,28.45,10.372,28.45-11.762v-87.187C421.011,242.801,402.901,224.706,380.783,224.706z\"\r\n            fill={color}\r\n          />\r\n        </g>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Roll;\r\n","import * as React from \"react\";\r\n\r\nclass X extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"80%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        id=\"Capa_1\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 348.333 348.334\"\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85 c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563 c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85 l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554 L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default X;\r\n","import * as React from \"react\";\r\n\r\nclass Evade extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 512 512\"\r\n        width={size}\r\n        height={size}\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M501.608,384.478L320.497,51.476C291.376,2.451,220.139,2.41,191.21,52.003L10.647,383.951 c-29.706,49.989,6.259,113.291,64.482,113.291h361.689C495.436,497.242,530.688,433.393,501.608,384.478z M331,332.242 c0,22.516-23.688,36.693-43.403,26.836L211,320.787v101.455c0,8.284-6.716,15-15,15h-30c-8.284,0-15-6.716-15-15v-150 c0-22.516,23.69-36.667,43.418-26.836L271,283.698V182.242c0-8.286,6.716-15,15-15h30c8.284,0,15,6.714,15,15V332.242z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Evade;\r\n\r\n/*\r\n<svg xmlns='http://www.w3.org/2000/svg' id='Capa_1' viewBox='0 0 214.32 214.32'\r\nwidth='512' height='512'>\r\n    <path d='M183.673,128.681c-8.297,9.305-19.722,14.821-32.169,15.534c-12.432,0.712-24.425-3.466-33.73-11.764L81.312,99.937 c-8.919-7.954-22.649-7.17-30.603,1.751l-1.404,1.574c-7.953,8.919-7.167,22.647,1.752,30.602l35.191,31.382l5.02-5.532 c2.399-2.645,6.031-3.81,9.521-3.054c3.492,0.756,6.315,3.317,7.406,6.72l11.951,37.267c0.449,1.137,0.696,2.377,0.696,3.675 c0,5.488-4.421,9.943-9.896,9.999c-0.041,0.001-0.082,0.001-0.124,0.001c-0.704,0-1.413-0.074-2.116-0.227l-38.887-8.422 c-3.492-0.756-6.315-3.317-7.406-6.72s-0.284-7.128,2.117-9.773l4.917-5.419l-35.031-31.238 c-19.208-17.129-20.899-46.691-3.771-65.899l1.404-1.574c17.127-19.207,46.688-20.899,65.898-3.77l36.462,32.515 c8.92,7.954,22.648,7.17,30.603-1.751c7.954-8.92,7.168-22.647-1.751-30.602L126.96,49.067l-5.027,5.54 c-1.916,2.112-4.617,3.28-7.405,3.28c-0.704,0-1.413-0.074-2.117-0.227c-3.491-0.756-6.314-3.317-7.405-6.72L92.856,13.054 c-1.091-3.402-0.284-7.128,2.117-9.773c2.399-2.645,6.032-3.81,9.521-3.054l38.887,8.421c3.492,0.756,6.315,3.317,7.406,6.72 s0.284,7.128-2.117,9.773l-4.911,5.412l36.142,32.23C199.11,79.911,200.802,109.474,183.673,128.681z'\r\n    fill='#D80027' />\r\n</svg>\r\n*/\r\n","import * as React from \"react\";\r\n\r\nclass Pivot extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        id=\"pivot\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 511.612 511.612\"\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M433.822,126.876l-113.28-113.28c-18.048-18.112-49.632-18.144-67.744,0c-18.752,18.752-18.752,49.312,0,68.064 l29.984,29.952h-18.976c-110.272,0-200,89.728-200,200s89.728,200,200,200h8c8.832,0,16-7.168,16-16v-64c0-8.832-7.168-16-16-16 h-8c-57.344,0-104-46.656-104-104s46.656-104,104-104h21.216l-32.224,32.192c-18.752,18.784-18.752,49.312,0,68.064 c17.984,17.952,50.304,17.536,67.744,0l113.312-113.28c8.864-8.896,13.952-21.152,13.952-33.696 C447.806,148.444,442.974,136.476,433.822,126.876z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Pivot;\r\n","import * as React from \"react\";\r\n\r\nclass Cancel extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"90%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        id=\"cancel\"\r\n        viewBox=\"0 0 512 512\"\r\n        width={size}\r\n        height={size}\r\n      >\r\n        <path\r\n          id=\"svg-path\"\r\n          d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M256,426.667 c-94.104,0-170.667-76.563-170.667-170.667c0-31.596,8.785-61.112,23.814-86.52L342.52,402.853 C317.112,417.882,287.596,426.667,256,426.667z M402.853,342.52L169.48,109.147c25.408-15.029,54.923-23.814,86.52-23.814 c94.104,0,170.667,76.563,170.667,170.667C426.667,287.596,417.882,317.112,402.853,342.52z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Cancel;\r\n","import * as React from \"react\";\r\n\r\nclass CheckMark extends React.Component {\r\n  render() {\r\n    const { color = \"#fff\", size = \"90%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        id=\"CheckMark\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 442.533 442.533\"\r\n      >\r\n        <path\r\n          d=\"M434.539,98.499l-38.828-38.828c-5.324-5.328-11.799-7.993-19.41-7.993c-7.618,0-14.093,2.665-19.417,7.993L169.59,247.248 l-83.939-84.225c-5.33-5.33-11.801-7.992-19.412-7.992c-7.616,0-14.087,2.662-19.417,7.992L7.994,201.852 C2.664,207.181,0,213.654,0,221.269c0,7.609,2.664,14.088,7.994,19.416l103.351,103.349l38.831,38.828 c5.327,5.332,11.8,7.994,19.414,7.994c7.611,0,14.084-2.669,19.414-7.994l38.83-38.828L434.539,137.33 c5.325-5.33,7.994-11.802,7.994-19.417C442.537,110.302,439.864,103.829,434.539,98.499z\"\r\n          fill={color}\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CheckMark;\r\n","import React from \"react\";\r\n\r\nclass Play extends React.PureComponent {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 373.008 373.008\"\r\n      >\r\n        <path\r\n          d=\"M61.792 2.588A19.258 19.258 0 0171.444 0c3.33 0 6.663.864 9.655 2.588l230.116 167.2a19.327 19.327 0 019.656 16.719 19.293 19.293 0 01-9.656 16.713L81.099 370.427a19.336 19.336 0 01-19.302 0 19.333 19.333 0 01-9.66-16.724V19.305a19.308 19.308 0 019.655-16.717z\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","import React from \"react\";\r\n\r\nclass Pause extends React.PureComponent {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 792 792\"\r\n      >\r\n        <path\r\n          d=\"M282.856 0H169.714c-31.228 0-56.571 25.344-56.571 56.571v678.857c0 31.228 25.344 56.571 56.571 56.571h113.143c31.256 0 56.572-25.315 56.572-56.571V56.571C339.428 25.344 314.112 0 282.856 0zm339.429 0H509.143c-31.256 0-56.572 25.344-56.572 56.571v678.857c0 31.228 25.316 56.571 56.572 56.571h113.143c31.256 0 56.572-25.315 56.572-56.571V56.571C678.857 25.344 653.541 0 622.285 0z\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Pause;\r\n","import React from \"react\";\r\n\r\nclass Replay extends React.PureComponent {\r\n  render() {\r\n    const { color = \"#fff\", size = \"100%\" } = this.props;\r\n\r\n    return (\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 400.548 400.548\"\r\n      >\r\n        <path\r\n          d=\"M383.86 99.79a27.04 27.04 0 00-29.466 5.86l-51.507 51.512v-31.397c0-22.359-18.13-40.491-40.493-40.491H40.493C18.131 85.274 0 103.406 0 125.765v149.018c0 22.359 18.131 40.491 40.493 40.491h221.901c22.363 0 40.493-18.132 40.493-40.491v-31.398l51.507 51.512a27.04 27.04 0 0019.126 7.924c3.481 0 6.995-.678 10.34-2.063a27.04 27.04 0 0016.688-24.978V124.767A27.037 27.037 0 00383.86 99.79zM190.309 210.764l-55.191 42.403a13.21 13.21 0 01-8.06 2.738 13.223 13.223 0 01-13.226-13.228V157.87a13.22 13.22 0 017.38-11.864 13.22 13.22 0 0113.905 1.375l55.191 42.402a13.228 13.228 0 01.001 20.981z\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Replay;\r\n","import styled from \"styled-components\";\r\n\r\nconst IconAndLabel = styled.div`\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: 30px;\r\n  height: 30px;\r\n\r\n  background-color: \"transparent\";\r\n  background-image: ${props => `url(${props.background})`};\r\n  background-size: cover;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n  font-family: arial;\r\n  font-size: 10px;\r\n`;\r\n\r\nexport default IconAndLabel;\r\n","import styled, { css } from \"styled-components\";\nimport { darkBlue } from \"./Colors\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #496791;\n  color: #deebff;\n  background-color: #0a3340;\n  font-family: arial;\n  margin-bottom: 10px;\n\n  :last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst Backdrop = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 99999;\n  background-color: rgba(0, 0, 0, 0.5);\n`;\n\nconst ContainerRoundedRightBottom = styled(Container)`\n  border-radius: 0px 0px 30px 0px;\n  box-shadow: 5px 5px 10px black;\n`;\n\nconst ContainerRounded = styled(Container)`\n  border-radius: 0px 0px 30px 30px;\n  box-shadow: 5px 5px 10px black;\n`;\n\nconst ContainerRoundedRightSide = styled(Container)`\n  border-radius: 30px 0px 0px 30px;\n  box-shadow: 5px 5px 10px black;\n`;\n\nconst defaultPadding = css`\n  padding: 10px;\n`;\n\nconst defaultWidth = css`\n  width: 500px;\n`;\n\nconst DarkContainer = styled(Container)`\n  ${defaultPadding}\n  background-color: ${darkBlue}\n`;\n\nconst Section = styled.div`\n  display: flex;\n  margin: 0;\n  padding: 0;\n  flex-wrap: wrap;\n`;\n\nconst SectionRight = styled(Section)`\n  flex-grow: 1;\n  justify-content: flex-end;\n`;\n\nconst Cell50 = styled.div`\n  display: flex;\n  margin: 0;\n  flex-grow: 1;\n  flex-basis: calc(50% - 16px);\n`;\n\nexport {\n  Cell50,\n  Container,\n  ContainerRoundedRightBottom,\n  Backdrop,\n  ContainerRounded,\n  ContainerRoundedRightSide,\n  defaultPadding,\n  DarkContainer,\n  Section,\n  SectionRight,\n};\n","import styled from \"styled-components\";\r\nimport { lightBlue } from \"./Colors\";\r\n\r\nconst Paragraph = styled.p`\r\n  font-family: arial;\r\n  font-size: 12px;\r\n  color: #deebff;\r\n  padding: 10px;\r\n`;\r\n\r\nconst Label = styled.span`\r\n  font-family: arial;\r\n  font-size: 12px;\r\n  color: white;\r\n`;\r\n\r\nconst Value = styled.span`\r\n  color: ${lightBlue};\r\n  padding: 0;\r\n  margin: 0;\r\n  padding-left: 5px;\r\n`;\r\n\r\nexport { Paragraph, Label, Value };\r\n","import styled from \"styled-components\";\n\nconst Title = styled.span`\n  font-family: arial;\n  font-size: 16px;\n  text-transform: uppercase;\n  color: #deebff;\n  padding: 10px;\n  font-weight: bold;\n`;\n\nconst SubTitle = styled(Title)`\n  font-weight: normal;\n`;\n\nexport { Title, SubTitle };\n","import { css } from \"styled-components\";\n\nconst Clickable = css`\n  ${props => !props.disabled && \"cursor: pointer;\"}\n\n  &:hover {\n    text-shadow: white 0 0 10px, white 0 0 3px;\n    opacity: 2;\n    ${props => props.disabled && \"opacity: 0.5;\"}\n    color: #deebff;\n  }\n`;\n\nexport { Clickable };\n","import styled from \"styled-components\";\r\nimport { Section, colors } from \".\";\r\n\r\nconst Error = styled(Section)`\r\n  color: ${colors.textDanger};\r\n  font-size: 12px;\r\n  height: 18px;\r\n  overflow: hidden;\r\n  font-weight: bolder;\r\n`;\r\n\r\nexport { Error };\r\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Error } from \"./Error\";\n\nclass InputAndLabel extends React.Component {\n  render() {\n    const {\n      id,\n      label,\n      type,\n      value,\n      placeholder,\n      onKeyDown,\n      onChange,\n      error,\n      ...rest\n    } = this.props;\n\n    return (\n      <Container>\n        <SubContainer>\n          {label && <Label htmlFor={id}>{label}</Label>}\n          <Input\n            id={id}\n            type={type || \"text\"}\n            value={value}\n            placeholder={placeholder}\n            onKeyDown={onKeyDown}\n            onChange={onChange}\n            tabIndex=\"0\"\n            {...rest}\n          />\n        </SubContainer>\n        <Error>{error}</Error>\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div`\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 5px 8px;\n`;\n\nconst SubContainer = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1 1 100%;\n  margin: 0;\n  padding: 0;\n  flex-wrap: wrap;\n  align-items: center;\n`;\n\nconst Label = styled.div`\n  display: flex;\n  max-width: 300px;\n  color: #deebff;\n  align-items: center;\n  padding: 4px 10px 4px 0;\n`;\n\nconst Input = styled.input`\n  display: flex;\n  color: #0a3340;\n  background-color: white;\n  padding: 3px 6px;\n  border: 1px solid #04161c;\n  border-radius: 3px;\n  width: calc(70% - 12px);\n  height: 16px;\n\n  min-width: 150px;\n  max-width: 100%;\n  flex-grow: 1;\n`;\n\nexport { InputAndLabel };\n","import * as React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { colors } from \"./index\";\nimport { tooltipButtonColor } from \"./Colors\";\n\nconst TooltipContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  opacity: 0.95;\n  text-align: center;\n  font-family: arial;\n  font-size: 12px;\n  color: white;\n  background-color: black;\n  border-radius: 7px;\n  padding: 3px 8px 8px 8px;\n  border: 1px solid #121212;\n  filter: brightness(1);\n  cursor: initial;\n`;\n\nconst Tooltip = styled(TooltipContainer)`\n  z-index: 7001;\n  position: absolute;\n`;\n\nconst RelativeTooltipContainer = styled(Tooltip)`\n  position: absolute;\n  z-index: 20000;\n  ${(props) =>\n    Object.keys(props.position).reduce((style, key) => {\n      return style + \"\\n\" + key + \":\" + props.position[key] + \"px;\";\n    }, \"\")}\n  text-align: left;\n  filter: brightness(1);\n`;\n\nconst TooltipValue = styled.div`\n  color: ${colors.lightBlue};\n`;\n\nexport class RelativeTooltip extends React.Component {\n  render() {\n    const { element, children, ...rest } = this.props;\n\n    const getPosition = (element) => {\n      const boundingBox = element.getBoundingClientRect\n        ? element.getBoundingClientRect()\n        : element.get(0).getBoundingClientRect();\n\n      const position = {};\n\n      if (boundingBox.top > window.innerHeight / 2) {\n        position.bottom = 32;\n      } else {\n        position.top = 32;\n      }\n\n      if (boundingBox.left > window.innerWidth / 2) {\n        position.right = 0;\n      } else {\n        position.left = 0;\n      }\n\n      return position;\n    };\n\n    return (\n      <RelativeTooltipContainer position={getPosition(element)} {...rest}>\n        {children}\n      </RelativeTooltipContainer>\n    );\n  }\n}\n\nconst TooltipHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  text-transform: uppercase;\n  border-bottom: 1px solid #aaaaaa;\n  width: calc(100% - 16px);\n  margin: 5px 8px;\n  font-weight: bold;\n  font-size: 12px;\n`;\n\nconst TooltipSubHeader = styled.div`\n  display: flex;\n  border-bottom: 1px solid #aaaaaa;\n  width: calc(100% - 16px);\n  margin: 5px 8px;\n  font-weight: bold;\n  font-size: 12px;\n  color: white;\n`;\n\nconst TooltipValueHeader = styled.div`\n  padding-right: 5px;\n  color: white;\n`;\n\nconst TooltipEntry = styled.div`\n  display: flex;\n  box-sizing: border-box;\n  margin: 2px 8px;\n\n  ${(props) => props.noMargin && \"margin: 0;\"}\n  font-weight: ${(props) => (props.important ? \"bold\" : \"inherit\")};\n  font-size: ${(props) => (props.important ? \"14px\" : \"11px\")};\n  ${(props) => props.space && \"margin-top: 14px\"};\n  text-align: left;\n  color: #5e85bc;\n  font-family: arial;\n  \n  ${(props) =>\n    props.clickable &&\n    css`\n      cursor: pointer;\n      color: white;\n      background-color: ${tooltipButtonColor};\n      border: 1px solid black;\n    `}\n\n  &:hover {\n    ${(props) =>\n      props.clickable &&\n      css`\n        border: 1px solid white;\n      `}\n  }\n`;\n\nconst CenteredTooltipEntry = styled(TooltipEntry)`\n  justify-content: center;\n  ${TooltipValueHeader} {\n    padding-right: 0;\n  }\n`;\n\nconst InlineTooltipEntry = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n`;\n\nconst TooltipMenu = styled.div`\n  margin: 0 8px;\n  display: flex;\n`;\n\nconst selectedTooltipButton = css`\n  filter: brightness(5) grayscale(100%);\n  opacity: 1;\n`;\n\nconst disabledTooltipButton = css`\n  filter: brightness(0.25) grayscale(100%);\n`;\n\nconst hoverTooltipButton = css`\n  opacity: 1;\n  filter: brightness(5) grayscale(100%);\n`;\n\nconst TooltipButton = styled.button`\n  border: none;\n  width: 40px;\n  height: 40px;\n  background-color: transparent;\n  margin: 0;\n  cursor: pointer;\n  background-image: ${(props) => props.img && `url(${props.img})`};\n  background-size: cover;\n  opacity: 0.5;\n  filter: brightness(3) grayscale(100%);\n\n  ${(props) => props.selected && !props.disabled && selectedTooltipButton}\n\n  ${(props) => props.disabled && disabledTooltipButton}\n\n  &:hover {\n    ${(props) => !props.disabled && hoverTooltipButton}\n  }\n\n  &:focus {\n    outline: 0;\n  }\n\n  svg #svg-path {\n    fill: white;\n    ${(props) => props.disabled && \"fill:#ff0000;\"}\n  }\n`;\n\nconst buildTooltipEntries = (\n  entries,\n  componentHandler = null,\n  subKey = \"\",\n  noMargin = false\n) => {\n  return entries\n    .sort((a, b) => {\n      if (!a.sort && b.sort) {\n        return 1;\n      }\n\n      if (a.sort && !b.sort) {\n        return -1;\n      }\n\n      if (a.sort > b.sort) {\n        return 1;\n      }\n\n      if (a.sort < b.sort) {\n        return -1;\n      }\n\n      return 0;\n    })\n    .map(({ value, header, component, props }, index) => {\n      const isValue = (value) => value !== undefined && value !== null;\n      if (value && value.replace) {\n        value = value.replace(/<br>/gm, \"\\n\");\n      }\n\n      if (component && componentHandler) {\n        return componentHandler(\n          component,\n          props,\n          `shiptoolitip-${index}-${subKey}`\n        );\n      }\n\n      return (\n        <TooltipEntry\n          noMargin={subKey !== \"\" || noMargin}\n          key={`shiptoolitip-${index}-${subKey}`}\n        >\n          {header && <TooltipValueHeader>{header}: </TooltipValueHeader>}\n          {isValue(value) && Array.isArray(value) && (\n            <InlineTooltipEntry>\n              {buildTooltipEntries(\n                value,\n                componentHandler,\n                subKey + \"-\" + index\n              )}\n            </InlineTooltipEntry>\n          )}\n          {isValue(value) && !Array.isArray(value) && (\n            <TooltipValue>{value}</TooltipValue>\n          )}\n        </TooltipEntry>\n      );\n    });\n};\n\nconst SystemTooltip = styled(Tooltip)`\n  top: 0px;\n\n  ${(props) => (props.right ? \"right: 340px;\" : \"left: 340px;\")}\n\n  width: 202px;\n\n  ${(props) => props.tab && \"width: 302px;\"}\n  transition: width 0.25s;\n  transition-timing-function: ease-in-out;\n`;\n\nconst RelativeOrStaticTooltip = ({ relative, children, ...rest }) => {\n  if (relative) {\n    return <RelativeTooltip {...rest}>{children}</RelativeTooltip>;\n  }\n\n  return <SystemTooltip {...rest}>{children}</SystemTooltip>;\n};\n\nexport {\n  TooltipContainer,\n  buildTooltipEntries,\n  Tooltip,\n  TooltipHeader,\n  TooltipEntry,\n  TooltipMenu,\n  TooltipButton,\n  TooltipSubHeader,\n  TooltipValue,\n  TooltipValueHeader,\n  InlineTooltipEntry,\n  CenteredTooltipEntry,\n  RelativeOrStaticTooltip,\n};\n","import styled, { css } from \"styled-components\";\r\nimport React from \"react\";\r\nimport { TooltipButton } from \"./Tooltip\";\r\nimport { X } from \"./icon\";\r\n\r\nconst text = css`\r\n  display: inline;\r\n  border: none;\r\n  background-color: transparent;\r\n  color: #deebff;\r\n\r\n  &:hover,\r\n  &:active {\r\n    text-shadow: white 0 0 10px, white 0 0 3px;\r\n    opacity: 2;\r\n    color: #deebff;\r\n  }\r\n`;\r\n\r\nconst greyButton = css`\r\n  background-color: #222;\r\n  padding: 5px 0px;\r\n  color: white;\r\n  text-decoration: none;\r\n  font-family: arial;\r\n  font-size: 12px;\r\n  text-transform: uppercase;\r\n  display: flex;\r\n  flex-grow: 1;\r\n  flex-basis: 100%;\r\n  border: none;\r\n  margin: 0 8px;\r\n\r\n  flex-grow: 1;\r\n  flex-basis: calc(50% - 16px);\r\n\r\n  justify-content: center;\r\n\r\n  &:hover,\r\n  &:active {\r\n    background-color: #deebff;\r\n    color: black;\r\n    text-decoration: none;\r\n  }\r\n`;\r\n\r\nconst iconStyle = css`\r\n  display: flex;\r\n  border: 0;\r\n  padding: 3px;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  background-color: transparent;\r\n\r\n  &:hover,\r\n  &:active {\r\n    color: #0a3340;\r\n  }\r\n`;\r\n\r\nconst button = css`\r\n  display: flex;\r\n  text-transform: uppercase;\r\n  color: #0a3340;\r\n  border: 1px solid black;\r\n  background-color: #6792ce;\r\n  max-width: 240px;\r\n  justify-content: center;\r\n  box-shadow: 2px 3px 5px 2px rgba(0, 0, 0, 0.5);\r\n  border-radius: 1px;\r\n  padding: 3px;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n\r\n  &:hover,\r\n  &:active {\r\n    box-shadow: 0px 0px 3px 3px rgba(222, 235, 255, 0.5);\r\n    color: #0a3340;\r\n    background-color: #deebff;\r\n  }\r\n`;\r\n\r\nconst IconContainer = styled.div`\r\n  width: 25px;\r\n  height: 25px;\r\n`;\r\n\r\nconst ButtonContainer = styled.button`\r\n  display: flex;\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin: 3px 5px;\r\n\r\n  ${(props) => {\r\n    if (props.icon) {\r\n      return iconStyle;\r\n    }\r\n    switch (props.buttonStyle) {\r\n      case \"text\":\r\n        return text;\r\n      case \"button-grey\":\r\n        return greyButton;\r\n      default:\r\n        return button;\r\n    }\r\n  }}\r\n`;\r\n\r\nexport const Button = (props) => (\r\n  <ButtonContainer {...props}>\r\n    {props.icon && (\r\n      <IconContainer>\r\n        <props.icon color=\"#deebff\" />\r\n      </IconContainer>\r\n    )}\r\n    {props.children}\r\n  </ButtonContainer>\r\n);\r\n\r\nconst CloseButtonContainer = styled(TooltipButton)`\r\n  height: 10px;\r\n  width: 10px;\r\n  padding: 0;\r\n  margin-left: 5px;\r\n\r\n  & svg {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`;\r\n\r\nexport const CloseButton = (props) => {\r\n  return (\r\n    <CloseButtonContainer {...props}>\r\n      <X />\r\n    </CloseButtonContainer>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nexport const Link = styled(RouterLink)`\r\n  text-decoration: none;\r\n  width: 100%;\r\n  display: flex;\r\n`;\r\n\r\nexport const LinkInline = styled(RouterLink)`\r\n  text-decoration: none;\r\n  color: inherit;\r\n`;\r\n","import * as React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Text = css`\r\n  color: white;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  font-family: arial;\r\n  font-size: 16px;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst ShipName = styled.div`\r\n  ${Text}\r\n  padding: 0 5px 0 30px;\r\n  width: 200px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Amount = styled.div`\r\n  ${Text}\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 25px;\r\n  height: 25px;\r\n`;\r\n\r\nclass OEWButtons extends React.PureComponent {\r\n  render() {\r\n    const { name, ship, target, uiState, oew } = this.props;\r\n\r\n    return (\r\n      <Container>\r\n        {name && <ShipName>{name}</ShipName>}\r\n        <TooltipButton\r\n          img=\"/img/removeOEW.png\"\r\n          onClick={() => {\r\n            if (ship.electronicWarfare.canAssignOffensiveEw(target, -1)) {\r\n              ship.electronicWarfare.assignOffensiveEw(target, -1);\r\n              uiState.shipStateChanged(ship);\r\n            }\r\n          }}\r\n        />\r\n        <Amount>{oew}</Amount>\r\n        <TooltipButton\r\n          img=\"/img/addOEW.png\"\r\n          onClick={() => {\r\n            if (ship.electronicWarfare.canAssignOffensiveEw(target, 1)) {\r\n              ship.electronicWarfare.assignOffensiveEw(target, 1);\r\n              uiState.shipStateChanged(ship);\r\n            }\r\n          }}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OEWButtons;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n`;\r\n\r\nclass GamePositionComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.containerRef = React.createRef();\r\n    this.renderCallback = this.onGameRender.bind(this);\r\n    this.position = null;\r\n    this.state = {\r\n      position: null\r\n    };\r\n  }\r\n\r\n  onGameRender() {\r\n    const { getPosition, marginTop = 0, marginLeft = 0 } = this.props;\r\n\r\n    if (!this.containerRef.current) {\r\n      return;\r\n    }\r\n\r\n    const newPosition = getPosition();\r\n\r\n    if (\r\n      !this.position ||\r\n      this.position.x !== newPosition.x ||\r\n      this.position.y !== newPosition.y\r\n    ) {\r\n      this.position = newPosition;\r\n\r\n      this.containerRef.current.style.left = `${newPosition.x + marginLeft}px`;\r\n      this.containerRef.current.style.top = `${newPosition.y + marginTop}px`;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { uiState } = this.props;\r\n\r\n    uiState.subscribeToRender(this.renderCallback);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { uiState } = this.props;\r\n\r\n    uiState.unsubscribeFromRender(this.renderCallback);\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n\r\n    /*\r\n    style={{\r\n          top: position.y + marginTop + \"px\",\r\n          left: position.x + marginLeft + \"px\"\r\n        }}\r\n        */\r\n\r\n    return <Container ref={this.containerRef}>{children}</Container>;\r\n  }\r\n}\r\n\r\nexport default GamePositionComponent;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  Tooltip,\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  colors,\r\n} from \"../../../../styled\";\r\n\r\nconst InfoHeader = styled(TooltipHeader)`\r\n  font-size: 12px;\r\n`;\r\n\r\nconst SystemInfoTooltip = styled(Tooltip)`\r\n  position: absolute;\r\n  z-index: 20000;\r\n  ${(props) =>\r\n    Object.keys(props.position).reduce((style, key) => {\r\n      return style + \"\\n\" + key + \":\" + props.position[key] + \"px;\";\r\n    }, \"\")}\r\n  width: ${(props) => (props.ship ? \"300px\" : \"200px\")};\r\n  text-align: left;\r\n  filter: brightness(1);\r\n`;\r\n\r\nexport const Entry = styled(TooltipEntry)`\r\n  text-align: left;\r\n  color: #5e85bc;\r\n  font-family: arial;\r\n  font-size: 11px;\r\n`;\r\n\r\nexport const Header = styled.span`\r\n  color: white;\r\n`;\r\n\r\nconst InfoValue = styled.span`\r\n  color: ${colors.lightBlue};\r\n`;\r\n\r\nclass SystemInfoWeaponTargeting extends React.Component {\r\n  render() {\r\n    const { ship, system, uiState, target, hitChance } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <InfoHeader>TARGET: {target.name}</InfoHeader>\r\n        <Entry>\r\n          <Header>Base hit change: </Header>\r\n          <InfoValue>{hitChance.baseToHit}%</InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>Fire control: </Header>\r\n          <InfoValue>+{hitChance.fireControl} to hit</InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>Distance: </Header>\r\n          <InfoValue>\r\n            {hitChance.distance} hexes,{\" \"}\r\n            {hitChance.outOfRange\r\n              ? `out of range`\r\n              : `${Math.round(hitChance.rangeModifier)} to hit`}\r\n          </InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>Evasion: </Header>\r\n          <InfoValue>{`+${hitChance.evasion * 10}% range penalty (${Math.round(\r\n            hitChance.evasionPenalty\r\n          )})`}</InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>OEW: </Header>\r\n          <InfoValue>+{hitChance.oew * 5} to hit</InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>DEW: </Header>\r\n          <InfoValue>-{hitChance.dew * 5} to hit</InfoValue>\r\n        </Entry>\r\n        <Entry>\r\n          <Header>Your evasion: </Header>\r\n          <InfoValue>{`${hitChance.ownEvasionPenalty} to hit`}</InfoValue>\r\n        </Entry>\r\n        {hitChance.noLockPenalty !== 0 && (\r\n          <Entry>\r\n            <Header>No lock on target: </Header>\r\n            <InfoValue>{`${hitChance.noLockPenalty} to hit`}</InfoValue>\r\n          </Entry>\r\n        )}\r\n\r\n        <Entry>\r\n          <Header>FINAL HIT CHANCE: </Header>\r\n          <InfoValue>{hitChance.result}%</InfoValue>\r\n        </Entry>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SystemInfoWeaponTargeting;\r\n","import React from \"react\";\r\nimport {\r\n  RelativeTooltip,\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  RelativeOrStaticTooltip,\r\n} from \"../../../../../../styled/index.js\";\r\nimport styled from \"styled-components\";\r\n\r\nconst CargoTooltipContainer = styled(RelativeOrStaticTooltip)`\r\n  width: 200px;\r\n`;\r\n\r\nclass CargoTooltip extends React.Component {\r\n  render() {\r\n    const { element, cargo, additionalContent, absoluteTooltip } = this.props;\r\n\r\n    return (\r\n      <CargoTooltipContainer\r\n        relative={!absoluteTooltip}\r\n        right={absoluteTooltip === \"right\"}\r\n        element={element}\r\n      >\r\n        <TooltipHeader>{cargo.getDisplayName()}</TooltipHeader>\r\n        {cargo.getCargoInfo().map(getEntry)}\r\n        {additionalContent}\r\n      </CargoTooltipContainer>\r\n    );\r\n  }\r\n}\r\n\r\nconst getEntry = ({ header, value }, i) => {\r\n  if (value.replace) {\r\n    value = value.replace(/<br>/gm, \"\\n\");\r\n  }\r\n\r\n  return (\r\n    <TooltipEntry key={`cargoTooltipEntry-${header}-${i}`}>\r\n      {header && <TooltipValueHeader>{header}: </TooltipValueHeader>}\r\n      {value && <TooltipValue>{value}</TooltipValue>}\r\n    </TooltipEntry>\r\n  );\r\n};\r\n\r\nexport default CargoTooltip;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { IconAndLabel } from \"../../../../../../styled\";\r\nimport CargoTooltip from \"./CargoTooltip\";\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  margin: 0;\r\n  padding: 0;\r\n  ${props => props.onClick && \"cursor: pointer;\"}\r\n`;\r\n\r\nclass CargoItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.element = React.createRef();\r\n    this.state = {\r\n      mouseOveredCargo: null\r\n    };\r\n  }\r\n\r\n  onCargoMouseOver(event) {\r\n    const { handleMouseOver = () => {} } = this.props;\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    this.setState({ mouseOveredCargo: this.element });\r\n    handleMouseOver();\r\n  }\r\n\r\n  onCargoMouseOut(event) {\r\n    const { handleMouseOut = () => {} } = this.props;\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    this.setState({ mouseOveredCargo: null });\r\n    handleMouseOut();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      cargo,\r\n      amount,\r\n      handleOnClick = () => {},\r\n      tooltipAdditionalContent,\r\n      text,\r\n      absoluteTooltip,\r\n      ...rest\r\n    } = this.props;\r\n    const { mouseOveredCargo } = this.state;\r\n\r\n    return (\r\n      <>\r\n        {absoluteTooltip && mouseOveredCargo && (\r\n          <CargoTooltip\r\n            absoluteTooltip={absoluteTooltip}\r\n            element={mouseOveredCargo}\r\n            cargo={cargo}\r\n            additionalContent={tooltipAdditionalContent}\r\n          />\r\n        )}\r\n        <Container\r\n          onClick={handleOnClick}\r\n          onMouseOver={this.onCargoMouseOver.bind(this)}\r\n          onMouseOut={this.onCargoMouseOut.bind(this)}\r\n          {...rest}\r\n        >\r\n          {!absoluteTooltip && mouseOveredCargo && (\r\n            <CargoTooltip\r\n              absoluteTooltip={absoluteTooltip}\r\n              element={mouseOveredCargo}\r\n              cargo={cargo}\r\n              additionalContent={tooltipAdditionalContent}\r\n            />\r\n          )}\r\n          <IconAndLabel\r\n            ref={c => (this.element = c)}\r\n            background={cargo.getBackgroundImage()}\r\n          >\r\n            {text ? text : amount}\r\n          </IconAndLabel>\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CargoItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { IconAndLabel, TooltipSubHeader } from \"../../../../../../styled\";\r\nimport CargoItem from \"./CargoItem\";\r\n\r\nconst CargoListContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nclass CargoList extends React.Component {\r\n  onSystemMouseOver(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    let { uiState, system, ship } = this.props;\r\n\r\n    uiState.customEvent(\"systemMouseOver\", {\r\n      ship,\r\n      system,\r\n      element: this.element\r\n    });\r\n\r\n    this.setState({ mouseOveredSystem: this.element });\r\n  }\r\n\r\n  onSystemMouseOut(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    let { uiState } = this.props;\r\n\r\n    uiState.customEvent(\"systemMouseOut\");\r\n\r\n    this.setState({ mouseOveredSystem: null });\r\n  }\r\n\r\n  render() {\r\n    const { list } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <TooltipSubHeader>Current cargo</TooltipSubHeader>\r\n        <CargoListContainer>\r\n          {list.map(({ object, amount }, i) => (\r\n            <CargoItem key={`cargo-item-${i}`} cargo={object} amount={amount} />\r\n          ))}\r\n        </CargoListContainer>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CargoList;\r\n","import React from \"react\";\n\nimport {\n  IconAndLabel,\n  TooltipHeader,\n  TooltipSubHeader,\n  TooltipEntry,\n  TooltipValueHeader,\n  TooltipValue,\n  InlineTooltipEntry\n} from \"../../../../../../styled\";\nimport styled from \"styled-components\";\nimport CargoItem from \"../cargo/CargoItem\";\nimport NoAmmunitionLoaded from \"../../../../../../../model/unit/system/weapon/ammunition/NoAmmunitionLoaded.mjs\";\n\nconst TorpedoList = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst TorpedoCargoItem = styled(CargoItem)`\n  ${IconAndLabel} {\n    ${props => {\n      const { target } = props;\n\n      if (target) {\n        return \"filter: hue-rotate(0deg) brightness(4) grayscale(0);\";\n      }\n    }}\n  }\n`;\n\nclass TorpedoLauncher extends React.PureComponent {\n  systemChangedCallback(ship, system) {\n    if (\n      ship.id === this.props.ship.id &&\n      system.id === this.props.launcher.system.id\n    ) {\n      this.forceUpdate();\n    }\n  }\n\n  componentDidMount() {\n    const { uiState } = this.props;\n    this.systemChangedCallbackInstance = this.systemChangedCallback.bind(this);\n    uiState.subscribeToSystemChange(this.systemChangedCallbackInstance);\n  }\n\n  componentWillUnmount() {\n    const { uiState } = this.props;\n    uiState.unsubscribeFromSystemChange(this.systemChangedCallbackInstance);\n  }\n\n  unloadAmmo() {\n    return e => {\n      e.preventDefault();\n      e.stopPropagation();\n      const { ship, launcher, uiState, launcherIndex } = this.props;\n\n      launcher.unloadAmmo({ launcherIndex });\n      uiState.shipSystemStateChanged(ship, launcher.system);\n    };\n  }\n\n  loadTorpedo(torpedo) {\n    return e => {\n      e.preventDefault();\n      e.stopPropagation();\n      const { ship, launcher, uiState, launcherIndex } = this.props;\n\n      launcher.loadAmmo({ ammo: torpedo, launcherIndex });\n      uiState.shipSystemStateChanged(ship, launcher.system);\n    };\n  }\n\n  torpedoMouseOut(ship, torpedo) {\n    return () => {\n      const { uiState } = this.props;\n\n      uiState.customEvent(\"torpedoMouseOut\", {\n        ship,\n        torpedo\n      });\n    };\n  }\n\n  torpedoMouseOver(ship, torpedo) {\n    return () => {\n      const { uiState } = this.props;\n\n      uiState.customEvent(\"torpedoMouseOver\", {\n        ship,\n        torpedo,\n        target: this.getLoadedTorpedoTarget()\n      });\n    };\n  }\n\n  getLoadedTorpedoTarget() {\n    const { loadedTorpedo, launcher, uiState } = this.props;\n\n    if (!loadedTorpedo) {\n      return null;\n    }\n\n    const targetId = launcher.launchTarget;\n\n    if (!targetId) {\n      return null;\n    }\n\n    const { gameData } = uiState;\n\n    return gameData.ships.getShipById(targetId);\n  }\n\n  render() {\n    const {\n      launcherIndex,\n      loadedTorpedo,\n      loadingTime,\n      turnsLoaded,\n      launcher\n    } = this.props;\n\n    return (\n      <>\n        <TooltipHeader>Torpedo tube {launcherIndex}</TooltipHeader>\n        <InlineTooltipEntry>\n          <TooltipEntry>\n            <TooltipValueHeader>Loading: </TooltipValueHeader>\n            <TooltipValue>{`${turnsLoaded}/${loadingTime}`}</TooltipValue>\n          </TooltipEntry>\n\n          <InlineTooltipEntry>\n            <TooltipValueHeader>Loaded torpedo:</TooltipValueHeader>\n            <TorpedoCargoItem\n              cargo={loadedTorpedo ? loadedTorpedo : new NoAmmunitionLoaded()}\n              amount={null}\n              target={this.getLoadedTorpedoTarget()}\n              handleMouseOver={this.torpedoMouseOver(\n                launcher.system.shipSystems.ship,\n                loadedTorpedo\n              ).bind(this)}\n              handleMouseOut={this.torpedoMouseOut(\n                launcher.system.shipSystems.ship,\n                loadedTorpedo\n              ).bind(this)}\n            />\n          </InlineTooltipEntry>\n        </InlineTooltipEntry>\n\n        <TooltipEntry>\n          <TooltipValueHeader>Select torpedo to load: </TooltipValueHeader>\n        </TooltipEntry>\n\n        <TorpedoList>\n          {launcher.getPossibleTorpedosToLoad().map(({ object, amount }, i) => (\n            <CargoItem\n              handleOnClick={this.loadTorpedo(object).bind(this)}\n              key={`torpedo-launcer-${i}-possible-torpedo-${object.constructor.name}`}\n              cargo={object}\n              amount={amount}\n              handleMouseOver={this.torpedoMouseOver(\n                launcher.system.shipSystems.ship,\n                object\n              ).bind(this)}\n              handleMouseOut={this.torpedoMouseOut(\n                launcher.system.shipSystems.ship,\n                object\n              ).bind(this)}\n            />\n          ))}\n          {loadedTorpedo && (\n            <CargoItem\n              handleOnClick={this.unloadAmmo().bind(this)}\n              key={`torpedo-launcer-unload`}\n              cargo={new NoAmmunitionLoaded()}\n              amount={null}\n            />\n          )}\n        </TorpedoList>\n      </>\n    );\n  }\n}\n\nexport default TorpedoLauncher;\n","import React from \"react\";\r\n\r\nimport {\r\n  IconAndLabel,\r\n  TooltipHeader,\r\n  TooltipSubHeader,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n  CenteredTooltipEntry,\r\n  TooltipButton\r\n} from \"../../../../../../styled\";\r\nimport styled from \"styled-components\";\r\nimport CargoItem from \"../cargo/CargoItem\";\r\nimport NoAmmunitionLoaded from \"../../../../../../../model/unit/system/weapon/ammunition/NoAmmunitionLoaded.mjs\";\r\n\r\nconst LoadingList = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n`;\r\n\r\nconst NewTargetContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst MagazineTooltipEntry = styled(InlineTooltipEntry)`\r\n  justify-content: flex-start;\r\n`;\r\n\r\nconst LoadingButton = styled(TooltipButton)`\r\n  width: 20px;\r\n  height: 20px;\r\n`;\r\n\r\nclass Ammo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { loadingOpen: false };\r\n  }\r\n\r\n  systemChangedCallback(ship, system) {\r\n    if (\r\n      ship.id === this.props.ship.id &&\r\n      system.id === this.props.ammoStrategy.system.id\r\n    ) {\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { uiState } = this.props;\r\n    this.systemChangedCallbackInstance = this.systemChangedCallback.bind(this);\r\n    uiState.subscribeToSystemChange(this.systemChangedCallbackInstance);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { uiState } = this.props;\r\n    uiState.unsubscribeFromSystemChange(this.systemChangedCallbackInstance);\r\n  }\r\n\r\n  getNewLoadOutButtons() {\r\n    const { ammoStrategy, uiState, ship } = this.props;\r\n\r\n    const loadingTarget = ammoStrategy.getLoadingTarget();\r\n    ammoStrategy.ammunitionClasses\r\n      .filter(\r\n        className =>\r\n          !loadingTarget.find(entry => entry.object instanceof className)\r\n      )\r\n      .forEach(notFound => {\r\n        loadingTarget.push({\r\n          object: new notFound(),\r\n          amount: 0\r\n        });\r\n      });\r\n\r\n    loadingTarget.sort((a, b) => {\r\n      if (a.object.constructor.name > b.object.constructor.name) {\r\n        return 1;\r\n      }\r\n\r\n      if (a.object.constructor.name < b.object.constructor.name) {\r\n        return -1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n    return (\r\n      <LoadingList>\r\n        {loadingTarget.map(({ object, amount }, i) => (\r\n          <NewTargetContainer key={`new-loading-${i}`}>\r\n            <LoadingButton\r\n              img=\"/img/minus.png\"\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                ammoStrategy.addToLoading({ object, amount: -1 });\r\n                this.forceUpdate();\r\n              }}\r\n            />\r\n            <CargoItem\r\n              key={`torpedo-launcer-${i}-possible-torpedo-${object.constructor.name}`}\r\n              cargo={object}\r\n              amount={amount}\r\n            />\r\n            <LoadingButton\r\n              img=\"/img/plus.png\"\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                ammoStrategy.addToLoading({ object, amount: 1 });\r\n                this.forceUpdate();\r\n              }}\r\n            />\r\n          </NewTargetContainer>\r\n        ))}\r\n      </LoadingList>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { ammoStrategy, uiState, ship } = this.props;\r\n    const { loadingOpen } = this.state;\r\n\r\n    if (!ship.player.isUsers(uiState.services.currentUser)) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {!loadingOpen && (\r\n          <>\r\n            <TooltipHeader>AMMO MAGAZINE</TooltipHeader>\r\n            <TooltipEntry>\r\n              <TooltipValueHeader>Ammo needed to fire</TooltipValueHeader>\r\n              <TooltipValue>{ammoStrategy.ammoPerFireOrder}</TooltipValue>\r\n            </TooltipEntry>\r\n            <MagazineTooltipEntry>\r\n              <TooltipEntry>\r\n                <TooltipValueHeader>Current ammo: </TooltipValueHeader>\r\n                <TooltipValue>\r\n                  {ammoStrategy.getSelectedAmmo().getShortDisplayName()}\r\n                </TooltipValue>\r\n              </TooltipEntry>\r\n            </MagazineTooltipEntry>\r\n            <MagazineTooltipEntry>\r\n              <TooltipEntry>\r\n                <TooltipValueHeader>Ammo in magazine: </TooltipValueHeader>\r\n              </TooltipEntry>\r\n\r\n              {ammoStrategy.getAmmoInMagazine().map(({ object, amount }, i) => (\r\n                <CargoItem\r\n                  key={`torpedo-launcer-${i}-possible-torpedo-${object.constructor.name}`}\r\n                  cargo={object}\r\n                  amount={amount}\r\n                />\r\n              ))}\r\n            </MagazineTooltipEntry>\r\n\r\n            <TooltipEntry>\r\n              <TooltipValue>NOTE: Magazine reloaded only offline</TooltipValue>\r\n            </TooltipEntry>\r\n\r\n            <CenteredTooltipEntry\r\n              clickable\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.setState({ loadingOpen: true });\r\n              }}\r\n            >\r\n              <TooltipValueHeader>CLICK TO LOAD NEW AMMO</TooltipValueHeader>\r\n            </CenteredTooltipEntry>\r\n          </>\r\n        )}\r\n\r\n        {loadingOpen && (\r\n          <>\r\n            <TooltipHeader>New loadout</TooltipHeader>\r\n            <TooltipEntry>\r\n              <TooltipValue>NOTE: Magazine reloaded only offline</TooltipValue>\r\n            </TooltipEntry>\r\n            <TooltipEntry>\r\n              <TooltipValueHeader>Cooldown before loading:</TooltipValueHeader>\r\n              <TooltipValue>\r\n                {ammoStrategy.startLoadingAfter} turn(s)\r\n              </TooltipValue>\r\n            </TooltipEntry>\r\n            <TooltipEntry>\r\n              <TooltipValueHeader>Turns offline:</TooltipValueHeader>\r\n              <TooltipValue>{ammoStrategy.turnsOffline} turn(s)</TooltipValue>\r\n            </TooltipEntry>\r\n            <TooltipEntry>\r\n              <TooltipValueHeader>Ammo transfer per turn:</TooltipValueHeader>\r\n              <TooltipValue>{ammoStrategy.intakeInTurn}</TooltipValue>\r\n            </TooltipEntry>\r\n            <TooltipEntry>\r\n              <TooltipValueHeader>Magazine capacity:</TooltipValueHeader>\r\n              <TooltipValue>\r\n                {`${ammoStrategy.getLoadingTargetAmount()}/${\r\n                  ammoStrategy.capacity\r\n                }`}\r\n              </TooltipValue>\r\n            </TooltipEntry>\r\n\r\n            {this.getNewLoadOutButtons()}\r\n            <CenteredTooltipEntry\r\n              clickable\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.setState({ loadingOpen: false });\r\n              }}\r\n            >\r\n              <TooltipValueHeader>CLOSE</TooltipValueHeader>\r\n            </CenteredTooltipEntry>\r\n            <CenteredTooltipEntry\r\n              clickable\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                ship.systems\r\n                  .getSystems()\r\n                  .filter(\r\n                    system =>\r\n                      system.constructor === ammoStrategy.system.constructor\r\n                  )\r\n                  .forEach(system =>\r\n                    system.callHandler(\r\n                      \"setNewLoadingTarget\",\r\n                      ammoStrategy.getLoadingTarget()\r\n                    )\r\n                  );\r\n                this.setState({ loadingOpen: false });\r\n              }}\r\n            >\r\n              <TooltipValueHeader>COPY FOR ALL WEAPONS</TooltipValueHeader>\r\n            </CenteredTooltipEntry>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Ammo;\r\n","import React from \"react\";\r\n\r\nimport {\r\n  IconAndLabel,\r\n  TooltipHeader,\r\n  TooltipSubHeader,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n  CenteredTooltipEntry,\r\n  TooltipButton,\r\n  colors\r\n} from \"../../../../../../styled\";\r\nimport styled from \"styled-components\";\r\nimport CargoItem from \"../cargo/CargoItem\";\r\nimport NoAmmunitionLoaded from \"../../../../../../../model/unit/system/weapon/ammunition/NoAmmunitionLoaded.mjs\";\r\n\r\nconst RangeContainer = styled.div`\r\n  display: flex;\r\n  width: calc(100% - 16px);\r\n  height: 32px;\r\n  align-items: flex-end;\r\n  margin: 0 8px;\r\n`;\r\n\r\nconst RangeNumbersContainer = styled.div`\r\n  width: calc(100% - 16px);\r\n  margin: 0 8px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst RangeStep = styled.div`\r\n  width: 1%;\r\n  height: 100%;\r\n  background-image: url(\"/img/lightBluePixel.png\");\r\n  background-size: 100% ${props => `${props.height}%`};\r\n  background-repeat: no-repeat;\r\n  background-position: bottom 0 left 0;\r\n  opacity: 0.25;\r\n  filter: blur(1px);\r\n\r\n  &:hover {\r\n    opacity: 0.5;\r\n  }\r\n`;\r\n\r\nclass RangePenalty extends React.Component {\r\n  /*\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { mouseOveredStep: null };\r\n  }\r\n  systemChangedCallback(ship, system) {\r\n    if (\r\n      ship.id === this.props.ship.id &&\r\n      system.id === this.props.rangeStrategy.system.id\r\n    ) {\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { uiState } = this.props;\r\n    this.systemChangedCallbackInstance = this.systemChangedCallback.bind(this);\r\n    uiState.subscribeToSystemChange(this.systemChangedCallbackInstance);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { uiState } = this.props;\r\n    uiState.unsubscribeFromSystemChange(this.systemChangedCallbackInstance);\r\n  }\r\n*/\r\n  render() {\r\n    const { rangeStrategy } = this.props;\r\n\r\n    const step = getMaxRange(rangeStrategy) / 100;\r\n    const steps = [];\r\n    for (let i = 0; i < 100; i++) {\r\n      const rangePenalty = rangeStrategy.getRangeModifier({\r\n        distance: i * step\r\n      });\r\n\r\n      steps.push({\r\n        range: i,\r\n        rangePenalty,\r\n        height: Math.abs(rangePenalty / 200) * 100\r\n      });\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <TooltipEntry>\r\n          <TooltipValueHeader>Range penalty:</TooltipValueHeader>\r\n        </TooltipEntry>\r\n        <RangeContainer>\r\n          {steps.map((entry, i) => (\r\n            <RangeStep key={`rangestep-${i}`} height={entry.height} />\r\n          ))}\r\n        </RangeContainer>\r\n        <RangeNumbersContainer>\r\n          <TooltipValue>0</TooltipValue>\r\n          <TooltipValue>distance</TooltipValue>\r\n          <TooltipValue>{getMaxRange(rangeStrategy)}</TooltipValue>\r\n        </RangeNumbersContainer>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst getMaxRange = rangeStrategy => {\r\n  const ranges = rangeStrategy.rangesAndPenalties;\r\n  return ranges[ranges.length - 1].range;\r\n};\r\n\r\nexport default RangePenalty;\r\n","import React, { useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  systemWindowPrimaryBorder,\r\n  lightBlue,\r\n  textDanger,\r\n  mediumBlue,\r\n  hitpoints,\r\n  hitpointsCritical,\r\n  red,\r\n  fuel,\r\n} from \"../../../../styled/Colors\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n`;\r\n\r\nconst BarContainer = styled.div`\r\n    width: 100%\r\n    border: 1px solid ${systemWindowPrimaryBorder};\r\n    display: flex;\r\n    height: 10px;\r\n    position: relative;\r\n`;\r\n\r\nconst Bar = styled.div`\r\n  height: 8px;\r\n  margin: 1px;\r\n  width: ${({ percent }) => `calc(${percent * 100}% - 2px);`};\r\n  background-color: ${({ color }) => color};\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  z-index: 2;\r\n`;\r\n\r\nconst ChangeBar = styled(Bar)`\r\n  background-color: ${({ more, barDecreaseColor, barIncreaseColor }) =>\r\n    more ? barIncreaseColor : barDecreaseColor};\r\n  z-index: ${({ more }) => (more ? 1 : 3)};\r\n  ${({ more, oldPercent, percent }) =>\r\n    !more &&\r\n    `width:calc(${(oldPercent - percent) * 100}% - 2px); left:calc(${\r\n      percent * 100\r\n    }% - 0px);`}\r\n`;\r\n\r\nconst DividerBar = styled(Bar)`\r\n  border-right: 3px solid white;\r\n  margin: 0 1px;\r\n  background-color: transparent;\r\n  height: 100%;\r\n  z-index: 4;\r\n`;\r\n\r\nconst HeatBar = ({\r\n  percent,\r\n  newPercent,\r\n  divider = null,\r\n  barColor = hitpointsCritical,\r\n  barDecreaseColor = hitpoints,\r\n  barIncreaseColor = red,\r\n}) => {\r\n  if (percent > 1) {\r\n    percent = 1;\r\n  }\r\n\r\n  if (newPercent > 1) {\r\n    newPercent = 1;\r\n  }\r\n\r\n  if (newPercent < 0) {\r\n    newPercent = 0;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <BarContainer>\r\n        <Bar percent={percent} color={barColor} />\r\n        {newPercent !== undefined && (\r\n          <ChangeBar\r\n            percent={newPercent}\r\n            oldPercent={percent}\r\n            more={newPercent > percent}\r\n            barDecreaseColor={barDecreaseColor}\r\n            barIncreaseColor={barIncreaseColor}\r\n          />\r\n        )}\r\n        {Boolean(divider) && <DividerBar percent={divider} />}\r\n      </BarContainer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst FuelBar = (props) => {\r\n  return (\r\n    <HeatBar\r\n      {...props}\r\n      barColor={fuel}\r\n      barIncreaseColor={hitpoints}\r\n      barDecreaseColor={red}\r\n    />\r\n  );\r\n};\r\n\r\nexport { HeatBar, FuelBar };\r\n","import React, { useState, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { HeatBar } from \"./Bar\";\r\nimport {\r\n  buildTooltipEntries,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n} from \"../../../../styled\";\r\nimport { formatNumber } from \"../../../../../model/utils/format.mjs\";\r\nimport { HeaderMenuItem } from \"../system/SystemInfo\";\r\n\r\nconst Container = styled.div`\r\n  ${TooltipEntry} {\r\n    margin-left: 0;\r\n  }\r\n`;\r\n\r\nconst HeatBarContainer = styled.div``;\r\n\r\nconst SystemHeatBar = ({ className, system, currentOverheat, prediction }) => {\r\n  const [details, setDetails] = useState(false);\r\n\r\n  const {\r\n    overheat,\r\n    overheatPercentage,\r\n    cooling,\r\n    overHeatThreshold,\r\n    newHeat,\r\n    maximumPossibleOverheatReduction,\r\n    maxCooling,\r\n  } = prediction;\r\n\r\n  const messages = useMemo(\r\n    () =>\r\n      details\r\n        ? [\r\n            {\r\n              header: \"Predicted cooling\",\r\n              value: `${Math.round(cooling)}/${Math.round(maxCooling)}`,\r\n            },\r\n            {\r\n              header: \"Predicted heat generation\",\r\n              value: Math.round(newHeat),\r\n            },\r\n            {\r\n              header: \"Predicted overheat\",\r\n              value: `${Math.round(overheat)} (${Math.round(\r\n                overheatPercentage * 100\r\n              )}%)`,\r\n            },\r\n            {\r\n              header: \"Maximum overheat cooling\",\r\n              value: `${Math.round(maximumPossibleOverheatReduction * 100)}%`,\r\n            },\r\n          ]\r\n        : [],\r\n    [details, prediction]\r\n  );\r\n\r\n  return (\r\n    <Container>\r\n      <InlineTooltipEntry>\r\n        <TooltipEntry noMargin>\r\n          <TooltipValueHeader>Overheat: </TooltipValueHeader>\r\n          <TooltipValue>\r\n            {`${formatNumber(system.heat.getOverheat())}/${formatNumber(\r\n              overHeatThreshold\r\n            )} (${Math.round(system.heat.getOverheatPercentage() * 100)}%)`}\r\n          </TooltipValue>\r\n        </TooltipEntry>\r\n        <TooltipEntry noMargin>\r\n          <HeaderMenuItem onClick={() => setDetails(!details)} active={details}>\r\n            ?\r\n          </HeaderMenuItem>\r\n        </TooltipEntry>\r\n      </InlineTooltipEntry>\r\n      <HeatBarContainer>\r\n        <HeatBar\r\n          className={className}\r\n          percent={currentOverheat * 0.5}\r\n          newPercent={overheatPercentage * 0.5}\r\n          divider={0.5}\r\n        />\r\n      </HeatBarContainer>\r\n      {buildTooltipEntries(messages, null, \"\")}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SystemHeatBar;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  buildTooltipEntries,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n} from \"../../../../styled\";\r\nimport { formatNumber } from \"../../../../../model/utils/format.mjs\";\r\nimport { HeaderMenuItem } from \"../system/SystemInfo\";\r\nimport { FuelBar } from \"./Bar\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  margin: 0 8px;\r\n\r\n  ${TooltipEntry} {\r\n    display: flex;\r\n    flex-grow: 1;\r\n    margin-left: 0;\r\n    margin-right: 0;\r\n  }\r\n`;\r\n\r\nconst FuelBarContainer = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst SystemFuelBar = ({ space, fuel }) => {\r\n  const percent = fuel / space;\r\n\r\n  return (\r\n    <Container>\r\n      <TooltipEntry>\r\n        <TooltipValueHeader>Fuel: </TooltipValueHeader>\r\n        <TooltipValue>{`${fuel}/${space}`}</TooltipValue>\r\n      </TooltipEntry>\r\n      <FuelBarContainer>\r\n        <FuelBar percent={percent} />\r\n      </FuelBarContainer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SystemFuelBar;\r\n","import React from \"react\";\r\nimport CargoList from \"./cargo/CargoList\";\r\nimport TorpedoLauncher from \"./torpedo/TorpedoLauncher\";\r\nimport Ammo from \"./ammo/Ammo\";\r\nimport RangePenalty from \"./range/RangePenalty\";\r\nimport SystemHeatBar from \"../../HeatBar/SystemHeatBar\";\r\nimport SystemFuelBar from \"../../HeatBar/SystemFuelBar\";\r\n\r\nconst SystemStrategyUiComponent = ({ name, ...props }) => {\r\n  switch (name) {\r\n    case \"RangePenalty\":\r\n      return <RangePenalty {...props} />;\r\n    case \"Ammo\":\r\n      return <Ammo {...props} />;\r\n    case \"CargoList\":\r\n      return <CargoList {...props} />;\r\n    case \"TorpedoLauncher\":\r\n      return <TorpedoLauncher {...props} />;\r\n    case \"SystemHeatBar\":\r\n      return <SystemHeatBar {...props} />;\r\n    case \"SystemFuelBar\":\r\n      return <SystemFuelBar {...props} />;\r\n    default:\r\n      throw Error(`SystemUiComponent \"${name}\" not found`);\r\n  }\r\n};\r\n\r\nexport default SystemStrategyUiComponent;\r\n","import React from \"react\";\r\nimport CargoList from \"./cargo/CargoList\";\r\nimport TorpedoLauncher from \"./torpedo/TorpedoLauncher\";\r\nimport Ammo from \"./ammo/Ammo\";\r\nimport RangePenalty from \"./range/RangePenalty\";\r\nimport SystemStrategyUiComponent from \"./SystemStrategyUiComponent\";\r\n\r\nclass SystemStrategyUi extends React.Component {\r\n  render() {\r\n    const { ship, uiState, system } = this.props;\r\n    const { currentUser } = uiState.services;\r\n\r\n    const myShip = ship.player.is(currentUser);\r\n\r\n    return system\r\n      .callHandler(\"getUiComponents\", { myShip }, [])\r\n      .map(({ name, props }, i) => (\r\n        <SystemStrategyUiComponent\r\n          key={`system-stragey-${name}-${system.id}-${i}`}\r\n          uiState={uiState}\r\n          ship={ship}\r\n          system={system}\r\n          name={name}\r\n          {...props}\r\n        />\r\n      ));\r\n  }\r\n}\r\n\r\nexport default SystemStrategyUi;\r\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport SystemInfoWeaponTargeting from \"./SystemInfoWeaponTargeting\";\nimport {\n  TooltipHeader,\n  TooltipEntry,\n  colors,\n  TooltipValue,\n  buildTooltipEntries,\n  TooltipSubHeader,\n  RelativeOrStaticTooltip,\n} from \"../../../../styled\";\nimport SystemStrategyUi from \"./SystemStrategyUi\";\nimport SystemStrategyUiComponent from \"./SystemStrategyUi/SystemStrategyUiComponent\";\n\nconst TooltipContainer = styled(RelativeOrStaticTooltip)`\n  max-height: 85vh;\n`;\n\nconst Warning = styled.div`\n  color: ${colors.textDanger};\n  font-weight: bold;\n\n  animation: blinker 2s linear infinite;\n\n  @keyframes blinker {\n    50% {\n      opacity: 0.5;\n    }\n  }\n`;\n\nconst HeaderMenu = styled.div`\n  line-height: 14px;\n  display: flex;\n  flex-direction: row;\n  color: #5e85bc;\n`;\n\nexport const HeaderMenuItem = styled.div`\n  cursor: pointer;\n  font-weight: bolder;\n  margin-right: 4px;\n  font-size: 12px;\n\n  ${(props) => props.active && `color: white;`}\n  &:last-child {\n    margin: 0;\n  }\n  :hover {\n    color: white;\n  }\n`;\n\nconst SystemStrategyUiComponentContainer = styled.div`\n  margin: 0 8px;\n  position: relative;\n`;\n\nconst LogContainer = styled.div`\n  overflow-y: scroll;\n  scrollbar-width: 0;\n\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n`;\n\nclass SystemInfo extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tab: null,\n    };\n  }\n\n  systemChangedCallback(ship, system) {\n    if (ship.id === this.props.ship.id && system.id === this.props.system.id) {\n      this.forceUpdate();\n    }\n  }\n\n  componentDidMount() {\n    const { uiState } = this.props;\n    this.systemChangedCallbackInstance = this.systemChangedCallback.bind(this);\n    uiState.subscribeToSystemChange(this.systemChangedCallbackInstance);\n  }\n\n  componentWillUnmount() {\n    const { uiState } = this.props;\n    uiState.unsubscribeFromSystemChange(this.systemChangedCallbackInstance);\n  }\n\n  getWarnings() {\n    const { system } = this.props;\n    const warnings = [];\n    if (system.isDestroyed()) {\n      warnings.push(\"DESTROYED\");\n    }\n    if (system.power.isOffline()) {\n      warnings.push(\"OFFLINE\");\n    }\n\n    const criticals = system.damage\n      .getCriticals()\n      .map((critical) => critical.getMessage());\n\n    return [...warnings, ...criticals].join(\", \");\n  }\n\n  getComponentHandler() {\n    const { system, uiState, ship } = this.props;\n\n    return (component, props, key) => (\n      <SystemStrategyUiComponentContainer key={key}>\n        <SystemStrategyUiComponent\n          name={component}\n          system={system}\n          uiState={uiState}\n          ship={ship}\n          {...props}\n        />\n      </SystemStrategyUiComponentContainer>\n    );\n  }\n\n  getInfoTab() {\n    const { system } = this.props;\n\n    return buildTooltipEntries([\n      {\n        value: system.getSystemDescription(),\n      },\n    ]);\n  }\n\n  getLogTab() {\n    const { system } = this.props;\n\n    const messages = system.log.getWithTurns();\n\n    return messages.reverse().map(({ turn, messages }, index) => (\n      <LogContainer key={`systemlog-turn-${turn}-${index}`}>\n        <TooltipSubHeader>{`Log, turn ${turn}`}</TooltipSubHeader>\n        {messages.map((message, messageIndex) => (\n          <TooltipEntry key={`logmessage-${turn}-${index}-${messageIndex}`}>\n            <TooltipValue>{message}</TooltipValue>\n          </TooltipEntry>\n        ))}\n      </LogContainer>\n    ));\n  }\n\n  getDefaultTab() {\n    const {\n      ship,\n      system,\n      systemInfoMenuProvider,\n      uiState,\n      weaponTargeting,\n    } = this.props;\n\n    const Menu = systemInfoMenuProvider ? systemInfoMenuProvider() : null;\n\n    const warnings = this.getWarnings();\n\n    return (\n      <>\n        {Menu && <Menu uiState={uiState} ship={ship} system={system} />}\n\n        {warnings && (\n          <TooltipEntry>\n            <Warning>{warnings}</Warning>\n          </TooltipEntry>\n        )}\n\n        {buildTooltipEntries(\n          system.getSystemInfo(ship),\n          this.getComponentHandler()\n        )}\n        <SystemStrategyUi ship={ship} system={system} uiState={uiState} />\n        {weaponTargeting && (\n          <SystemInfoWeaponTargeting\n            uiState={uiState}\n            ship={ship}\n            system={system}\n            target={weaponTargeting.target}\n            hitChance={weaponTargeting.hitChance}\n          />\n        )}\n      </>\n    );\n  }\n  render() {\n    const { system, element, scs, right } = this.props;\n\n    const { tab } = this.state;\n\n    return (\n      <TooltipContainer\n        relative={!scs}\n        element={element}\n        right={right}\n        onClick={(e) => {\n          e.stopPropagation();\n          e.preventDefault();\n        }}\n      >\n        <TooltipHeader>\n          {system.getDisplayName()}\n          <HeaderMenu>\n            <HeaderMenuItem\n              active={tab === \"log\"}\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                this.setState({ tab: \"log\" });\n              }}\n            >\n              L\n            </HeaderMenuItem>\n            <HeaderMenuItem\n              active={tab === \"info\"}\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                this.setState({ tab: \"info\" });\n              }}\n            >\n              ?\n            </HeaderMenuItem>\n\n            <HeaderMenuItem\n              active={!tab}\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                this.setState({ tab: null });\n              }}\n            >\n              D\n            </HeaderMenuItem>\n          </HeaderMenu>\n        </TooltipHeader>\n\n        {!tab && this.getDefaultTab()}\n        {tab === \"log\" && this.getLogTab()}\n        {tab === \"info\" && this.getInfoTab()}\n      </TooltipContainer>\n    );\n  }\n}\n\nexport default SystemInfo;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport SystemInfo from \"./SystemInfo\";\n\nimport { colors } from \"../../../../styled\";\n\nconst HealthBar = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 7px;\n  border: 2px solid black;\n  box-sizing: border-box;\n\n  ${(props) => props.destroyed && \"display: none;\"}\n  background-color: #7a2020;\n\n  :before {\n    content: \"\";\n    position: absolute;\n    width: ${(props) => `${props.health}%`};\n    height: 100%;\n    left: 0;\n    bottom: 0;\n    background-color: ${(props) =>\n      props.criticals ? colors.hitpointsCritical : colors.hitpoints};\n  }\n`;\n\nconst SystemText = styled.div`\n  position: absolute;\n  top: 0px;\n  width: 100%;\n  height: calc(100% - 5px);\n  font-family: arial;\n  font-size: 10px;\n  color: white;\n  display: flex;\n  ${(props) => props.destroyed && \"display: none;\"}\n  align-items: flex-end;\n  justify-content: center;\n  text-shadow: black 0 0 6px, black 0 0 6px, black 0 0 6px, black 0 0 6px;\n`;\n\nconst System = styled.div`\n  position: relative;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n\n  background-color: \"transparent\";\n  background-image: ${(props) => `url(${props.background})`};\n  background-size: cover;\n  filter: ${(props) => {\n    if (props.targeting) {\n      return \"hue-rotate(0deg) brightness(4) grayscale(0)\";\n    } else if (props.reserved) {\n      return \"hue-rotate(0deg) brightness(1) grayscale(0.7)\";\n    } else if (props.firing) {\n      return \"hue-rotate(0deg) brightness(4) grayscale(0)\"; //\"grayscale(100%) brightness(6) drop-shadow(0px 0px 5px white)\";\n    } else if (props.destroyed) {\n      return \"blur(1px) brightness(0.5)\";\n    } else {\n      return \"none\";\n    }\n  }};\n  cursor: pointer;\n\n  ${SystemText} {\n    display: ${(props) => (props.offline ? \"none\" : \"flex\")};\n  }\n\n  ${({ boosted }) =>\n    boosted &&\n    `\n    :before {\n      content: \"\";\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      opacity: 0.95;\n      background-image: url(/img/boosted.png);\n    `}\n\n  :before {\n    content: \"\";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    opacity: ${(props) => {\n      if (props.destroyed || props.offline || props.loading) {\n        return \"0.8\";\n      }\n\n      return \"0\";\n    }};\n\n    background-color: transparent;\n\n    background-image: ${(props) => {\n      if (props.offline) {\n        return \"url(/img/offline.png)\";\n      }\n\n      return \"none\";\n    }};\n  }\n`;\n\nconst Overheat = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0.95;\n  background-image: url(/img/overheat.png);\n\n  ${({ overheat }) =>\n    overheat >= 1 &&\n    `\n    animation: blinker 1s linear infinite;\n\n    @keyframes blinker {\n      50% {\n        opacity: 0.3;\n      }\n    }\n  `}\n`;\n\nconst Container = styled.div`\n  cursor: pointer;\n  position: relative;\n  margin: 3px 0px;\n  padding: 0 1px;\n`;\n\nclass SystemIcon extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.element = React.createRef();\n    this.state = {\n      mouseOveredSystem: null,\n      clickedSystem: null,\n    };\n  }\n\n  clickSystem(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const { uiState, system, ship, scs } = this.props;\n\n    uiState.customEvent(\"systemClicked\", {\n      ship,\n      system,\n      element: this.element,\n      scs,\n    });\n  }\n\n  onSystemMouseOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    let { uiState, system, ship, target } = this.props;\n\n    const { weaponFireService } = uiState.services;\n    const { gameData } = uiState;\n\n    if (!target) {\n      const targetId = weaponFireService.getSystemFireOrderTargetId(system);\n      if (targetId) {\n        target = gameData.ships.getShipById(targetId);\n      }\n    }\n\n    uiState.customEvent(\"systemMouseOver\", {\n      ship,\n      system,\n      element: this.element,\n      target,\n    });\n\n    this.setState({ mouseOveredSystem: this.element });\n  }\n\n  onSystemMouseOut(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    let { uiState } = this.props;\n\n    uiState.customEvent(\"systemMouseOut\");\n\n    this.setState({ mouseOveredSystem: null });\n  }\n\n  onContextMenu(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    let { uiState, system, ship } = this.props;\n\n    uiState.customEvent(\"systemRightClicked\", { system, ship });\n  }\n\n  render() {\n    let {\n      uiState,\n      system,\n      ship,\n      scs,\n      destroyed,\n      systemMenu: {\n        systemInfoMenuProvider,\n        activeSystem,\n        activeSystemElement,\n      } = {\n        systemInfoMenuProvider: null,\n        activeSystem: null,\n        activeSystemElement: null,\n      },\n      onSystemClicked = this.clickSystem,\n      selected = false,\n      text = null,\n      target = null,\n      ...rest\n    } = this.props;\n    const { mouseOveredSystem } = this.state;\n    const { weaponFireService } = uiState.services;\n\n    if (!text) {\n      text = system.getIconText();\n    }\n\n    const menu = activeSystem ? systemInfoMenuProvider : null;\n\n    const displayMenu = Boolean(\n      (!activeSystem && mouseOveredSystem) ||\n        (activeSystem &&\n          activeSystem === system &&\n          activeSystemElement === this.element)\n    );\n\n    const firing = weaponFireService.systemHasFireOrder(system);\n    const reserved =\n      target &&\n      weaponFireService.systemHasFireOrder(system) &&\n      !weaponFireService.systemHasFireOrderAgainstShip(system, target);\n    const targeting =\n      target && weaponFireService.systemHasFireOrderAgainstShip(system, target);\n\n    const disabled = system.isDisabled();\n    const oldOverheat = system.heat.getOverheatPercentage();\n    const { overheatPercentage: newOverheat } = system.heat.predictHeatChange();\n\n    const overheat = newOverheat > oldOverheat ? newOverheat : oldOverheat;\n\n    return (\n      <>\n        {displayMenu && scs && (\n          <SystemInfo\n            scs\n            uiState={uiState}\n            ship={ship}\n            system={system}\n            systemInfoMenuProvider={menu}\n            element={mouseOveredSystem || activeSystemElement}\n            target={target}\n            {...rest}\n          />\n        )}\n        <Container\n          onClick={onSystemClicked.bind(this)}\n          onMouseOver={this.onSystemMouseOver.bind(this)}\n          onMouseOut={this.onSystemMouseOut.bind(this)}\n          onContextMenu={this.onContextMenu.bind(this)}\n          scs\n        >\n          {displayMenu && !scs && (\n            <SystemInfo\n              scs\n              uiState={uiState}\n              ship={ship}\n              system={system}\n              systemInfoMenuProvider={menu}\n              element={mouseOveredSystem || activeSystemElement}\n              target={target}\n              {...rest}\n            />\n          )}\n          <System\n            ref={(c) => (this.element = c)}\n            scs={scs}\n            background={system.getBackgroundImage()}\n            offline={isOffline(ship, system)}\n            loading={isLoading(system)}\n            selected={selected}\n            firing={firing}\n            targeting={targeting}\n            reserved={reserved}\n            destroyed={system.isDestroyed()}\n            boosted={system.callHandler(\"getBoost\", 0, false)}\n          >\n            {overheat > 0.25 && Boolean(!disabled) && (\n              <Overheat overheat={overheat} />\n            )}\n          </System>\n\n          <SystemText destroyed={system.isDestroyed()} selected={selected}>\n            {text}\n          </SystemText>\n          <HealthBar\n            destroyed={system.isDestroyed()}\n            criticals={system.hasAnyCritical()}\n            health={getStructureLeft(system)}\n          />\n        </Container>\n      </>\n    );\n  }\n}\n\nconst isLoading = (system) => undefined; //ASK FROM SYSTEM system.weapon && !weaponManager.isLoaded(system);\n\nconst isOffline = (ship, system) => system.power.isOffline();\n\nconst getStructureLeft = (system) =>\n  ((system.hitpoints - system.getTotalDamage()) / system.hitpoints) * 100;\n\nexport default SystemIcon;\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SystemInfo from \"./SystemInfo\";\r\n\r\nimport { colors } from \"../../../../styled\";\r\n\r\nconst HealthBar = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 7px;\r\n  border: 2px solid black;\r\n  box-sizing: border-box;\r\n\r\n  background-color: #7a2020;\r\n\r\n  :before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: ${props => `${props.health}%`};\r\n    height: 100%;\r\n    left: 0;\r\n    bottom: 0;\r\n    background-color: ${props => (props.criticals ? \"#ed6738\" : \"#427231\")};\r\n  }\r\n`;\r\n\r\nconst SystemText = styled.div`\r\n  position: absolute;\r\n  top: 0px;\r\n  width: 100%;\r\n  height: calc(100% - 5px);\r\n  font-family: arial;\r\n  font-size: 10px;\r\n  color: white;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n  text-shadow: black 0 0 6px, black 0 0 6px, black 0 0 6px, black 0 0 6px;\r\n`;\r\n\r\nconst System = styled.div`\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: 30px;\r\n  height: 30px;\r\n\r\n  background-color: \"transparent\";\r\n  background-image: ${props => `url(${props.background})`};\r\n  background-size: cover;\r\n  filter: ${props => {\r\n    if (props.targeting) {\r\n      return \"hue-rotate(0deg) brightness(4) grayscale(0)\";\r\n    } else if (props.reserved) {\r\n      return \"hue-rotate(0deg) brightness(1) grayscale(0.7)\";\r\n    } else if (props.firing) {\r\n      return \"hue-rotate(0deg) brightness(4) grayscale(0)\"; //\"grayscale(100%) brightness(6) drop-shadow(0px 0px 5px white)\";\r\n    } else if (props.destroyed) {\r\n      return \"blur(1px)\";\r\n    } else {\r\n      return \"none\";\r\n    }\r\n  }};\r\n  cursor: pointer;\r\n\r\n  ${SystemText} {\r\n    display: ${props => (props.offline ? \"none\" : \"flex\")};\r\n  }\r\n\r\n  :before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    opacity: ${props => {\r\n      if (props.destroyed || props.offline || props.loading) {\r\n        return \"0.5\";\r\n      }\r\n\r\n      return \"0\";\r\n    }};\r\n\r\n    background-color: ${props => {\r\n      if (props.destroyed || props.offline) {\r\n        return \"black\";\r\n      } else if (props.loading) {\r\n        return \"orange\";\r\n      }\r\n\r\n      return \"transparent\";\r\n    }};\r\n\r\n    background-image: ${props => {\r\n      if (props.offline) {\r\n        return \"url(/img/offline.png)\";\r\n      }\r\n\r\n      return \"none\";\r\n    }};\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin: 3px 1px;\r\n`;\r\n\r\nconst StructureText = styled.div`\r\n  z-index: 1;\r\n`;\r\n\r\nconst StructureContainer = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-sizing: border-box;\r\n  width: calc(100% - 4px);\r\n  height: 16px;\r\n  background-color: #081313;\r\n  color: ${props => (props.health === 0 ? \"transparent\" : \"white\")};\r\n  font-family: arial;\r\n  font-size: 11px;\r\n  text-shadow: black 0 0 6px, black 0 0 6px;\r\n  margin: 1px;\r\n  filter: ${props => (props.health === 0 ? \"blur(1px)\" : \"none\")};\r\n  border: 1px solid black;\r\n\r\n  :before {\r\n    box-sizing: border-box;\r\n    content: \"\";\r\n    position: absolute;\r\n    width: ${props => `${props.health}%`};\r\n    height: 100%;\r\n    left: 0;\r\n    bottom: 0;\r\n    z-index: 0;\r\n    background-color: ${props => (props.criticals ? \"#ed6738\" : \"#427231\")};\r\n  }\r\n`;\r\n\r\nclass StructureIcon extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.element = React.createRef();\r\n    this.state = {\r\n      mouseOveredSystem: null,\r\n      clickedSystem: null\r\n    };\r\n  }\r\n\r\n  clickSystem(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    const { uiState, system, ship } = this.props;\r\n\r\n    uiState.customEvent(\"systemClicked\", {\r\n      ship,\r\n      system,\r\n      element: this.element,\r\n      scs: true\r\n    });\r\n  }\r\n\r\n  onSystemMouseOver(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    let { uiState, system, ship } = this.props;\r\n\r\n    uiState.customEvent(\"systemMouseOver\", {\r\n      ship,\r\n      system,\r\n      element: this.element\r\n    });\r\n\r\n    this.setState({ mouseOveredSystem: this.element });\r\n  }\r\n\r\n  onSystemMouseOut(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    let { uiState } = this.props;\r\n\r\n    uiState.customEvent(\"systemMouseOut\");\r\n\r\n    this.setState({ mouseOveredSystem: null });\r\n  }\r\n\r\n  onContextMenu(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    let { uiState, system, ship } = this.props;\r\n\r\n    uiState.customEvent(\"systemRightClicked\", { system, ship });\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      uiState,\r\n      system,\r\n      ship,\r\n      scs,\r\n      destroyed,\r\n      systemMenu: {\r\n        systemInfoMenuProvider,\r\n        activeSystem,\r\n        activeSystemElement\r\n      } = {\r\n        systemInfoMenuProvider: null,\r\n        activeSystem: null,\r\n        activeSystemElement: null\r\n      },\r\n      onSystemClicked = this.clickSystem,\r\n      selected = false,\r\n      text = null,\r\n      target = null,\r\n      ...rest\r\n    } = this.props;\r\n    const { mouseOveredSystem } = this.state;\r\n\r\n    const menu = activeSystem ? systemInfoMenuProvider : null;\r\n\r\n    const displayMenu = Boolean(\r\n      (!activeSystem && mouseOveredSystem) ||\r\n        (activeSystem &&\r\n          activeSystem === system &&\r\n          activeSystemElement === this.element)\r\n    );\r\n\r\n    return (\r\n      <>\r\n        {displayMenu && (\r\n          <SystemInfo\r\n            scs\r\n            uiState={uiState}\r\n            ship={ship}\r\n            system={system}\r\n            systemInfoMenuProvider={menu}\r\n            element={mouseOveredSystem || activeSystemElement}\r\n            target={target}\r\n            {...rest}\r\n          />\r\n        )}\r\n        <StructureContainer\r\n          ref={c => (this.element = c)}\r\n          onClick={onSystemClicked.bind(this)}\r\n          onMouseOver={this.onSystemMouseOver.bind(this)}\r\n          onMouseOut={this.onSystemMouseOut.bind(this)}\r\n          onContextMenu={this.onContextMenu.bind(this)}\r\n          health={getStructureLeft(system)}\r\n          criticals={system.hasAnyCritical()}\r\n        >\r\n          <StructureText>\r\n            {system.getRemainingHitpoints()} / {system.hitpoints} A{\" \"}\r\n            {system.getArmor()}\r\n          </StructureText>\r\n        </StructureContainer>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst getStructureLeft = system =>\r\n  ((system.hitpoints - system.getTotalDamage()) / system.hitpoints) * 100;\r\n\r\nexport default StructureIcon;\r\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport SystemIcon from \"../system/SystemIcon\";\nimport { colors } from \"../../../../styled\";\nimport * as systemLocation from \"../../../../../model/unit/system/systemSection/systemLocation\";\nimport StructureIcon from \"../system/StructureIcon\";\n\nconst ShipSectionContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap-reverse;\n  width: calc(100% - 2px);\n  align-items: end;\n  justify-content: space-around;\n  box-sizing: border-box;\n  margin: 1px;\n  flex-grow: 1;\n\n  border: ${props => {\n    switch (props.location) {\n      case 0:\n        return `1px solid ${colors.systemWindowPrimaryBorder}`;\n      default:\n        return `1px dashed ${colors.systemWindowBorder}`;\n    }\n  }};\n`;\n\nconst StructureText = styled.div`\n  z-index: 1;\n`;\n\nconst StructureContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: calc(100% - 4px);\n  height: 16px;\n  background-color: #081313;\n  color: ${props => (props.health === 0 ? \"transparent\" : \"white\")};\n  font-family: arial;\n  font-size: 11px;\n  text-shadow: black 0 0 6px, black 0 0 6px;\n  margin: 1px;\n  filter: ${props => (props.health === 0 ? \"blur(1px)\" : \"none\")};\n  border: 1px solid black;\n\n  :before {\n    box-sizing: border-box;\n    content: \"\";\n    position: absolute;\n    width: ${props => `${props.health}%`};\n    height: 100%;\n    left: 0;\n    bottom: 0;\n    z-index: 0;\n    background-color: ${props => (props.criticals ? \"#ed6738\" : \"#427231\")};\n  }\n`;\n\nclass ShipSection extends React.Component {\n  render() {\n    const { ship, section, uiState, ...rest } = this.props;\n    const location = section.location;\n    const structure = section.getStructure();\n\n    return (\n      <ShipSectionContainer location={location}>\n        {section.getNonStructureSystems().map(system => (\n          <SystemIcon\n            scs\n            uiState={uiState}\n            key={`system-scs-${location}-${ship.id}-${system.id}`}\n            system={system}\n            ship={ship}\n            selected={uiState.isSelectedSystem(system)}\n            {...rest}\n          />\n        ))}\n\n        {structure && (\n          <StructureIcon\n            uiState={uiState}\n            system={structure}\n            ship={ship}\n            selected={uiState.isSelectedSystem(structure)}\n            {...rest}\n          />\n        )}\n      </ShipSectionContainer>\n    );\n  }\n}\n\nexport default ShipSection;\n","import React, { useCallback, useMemo } from \"react\";\nimport styled from \"styled-components\";\n\nimport ShipSection from \"./ShipSection\";\n\nconst ShipWindowContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  max-width: 400px;\n  height: auto;\n  opacity: 0.95;\n  z-index: 10001;\n  font-size: 10px;\n  color: white;\n  font-family: arial;\n  max-height: 100vh;\n  overflow-y: scroll;\n  margin: 0 8px;\n  scrollbar-width: 0;\n\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n`;\n\nconst Column = styled.div`\n  width: 25%;\n  max-height: calc(33.3333333% - 11px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst ColumnMiddle = styled(Column)`\n  width: 50%;\n`;\n\nconst ShipWindow = ({ ship, uiState, ...rest }) => {\n  const shipWindowClicked = useCallback(() => {\n    uiState.customEvent(\"closeSystemInfo\");\n  }, []);\n\n  return (\n    <ShipWindowContainer\n      onClick={shipWindowClicked}\n      onContextMenu={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      }}\n      team={ship.team}\n    >\n      <Column>\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getPortFrontSection()}\n          {...rest}\n        />\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getPortAftSection()}\n          {...rest}\n        />\n      </Column>\n\n      <ColumnMiddle>\n        <ShipSection\n          uiState={uiState}\n          section={ship.systems.sections.getFrontSection()}\n          ship={ship}\n          {...rest}\n        />\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getPrimarySection()}\n          {...rest}\n        />\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getAftSection()}\n          {...rest}\n        />\n      </ColumnMiddle>\n\n      <Column>\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getStarboardFrontSection()}\n          {...rest}\n        />\n        <ShipSection\n          uiState={uiState}\n          ship={ship}\n          section={ship.systems.sections.getStarboardAftSection()}\n          {...rest}\n        />\n      </Column>\n    </ShipWindowContainer>\n  );\n};\n\nexport default ShipWindow;\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SystemIcon from \"../system/SystemIcon\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nclass WeaponTargeting extends React.Component {\r\n  render() {\r\n    const { uiState, ship, target, system, ...rest } = this.props;\r\n    const { weaponFireService } = uiState.services;\r\n\r\n    if (!weaponFireService.canFire(ship, target, system)) {\r\n      return null;\r\n    }\r\n\r\n    const hitChance = system.callHandler(\"getHitChance\", {\r\n      shooter: ship,\r\n      target\r\n    });\r\n\r\n    return (\r\n      <Container>\r\n        <SystemIcon\r\n          scs\r\n          targeting\r\n          uiState={uiState}\r\n          key={`system-weaponTargeting-${ship.id}-${system.id}`}\r\n          system={system}\r\n          ship={ship}\r\n          selected={false}\r\n          target={target}\r\n          weaponTargeting={{\r\n            target: target,\r\n            hitChance: hitChance\r\n          }}\r\n          text={hitChance.result + \"%\"}\r\n          {...rest}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WeaponTargeting;\r\n","import Vector from \"../utils/Vector.mjs\";\nimport { cargoClasses } from \"./system/cargo/cargo.mjs\";\nimport uuidv4 from \"uuid/v4.js\";\nimport HexagonMath from \"../utils/HexagonMath.mjs\";\n\nclass TorpedoFlight {\n  constructor(torpedo, targetId, shooterId, weaponId, launcherIndex) {\n    this.id = uuidv4();\n    this.torpedo = torpedo;\n    this.targetId = targetId;\n    this.shooterId = shooterId;\n    this.weaponId = weaponId;\n    this.launcherIndex = launcherIndex;\n    this.launchPosition = new Vector();\n    this.strikePosition = new Vector();\n    this.intercepted = false;\n    this.done = false;\n  }\n\n  setDone() {\n    this.done = true;\n  }\n\n  isDone() {\n    return this.done;\n  }\n\n  setIntercepted() {\n    this.intercepted = true;\n  }\n\n  getStrikeDistance(target) {\n    return this.torpedo.getStrikeDistance(this, target);\n  }\n\n  setStrikePosition(position) {\n    this.strikePosition = position;\n    return this;\n  }\n\n  setLaunchPosition(position) {\n    this.launchPosition = position;\n    return this;\n  }\n\n  serialize() {\n    return {\n      id: this.id,\n      torpedo: this.torpedo.constructor.name,\n      targetId: this.targetId,\n      strikePosition: this.strikePosition,\n      shooterId: this.shooterId,\n      weaponId: this.weaponId,\n      launcherIndex: this.launcherIndex,\n      intercepted: this.intercepted,\n      launchPosition: this.launchPosition\n    };\n  }\n\n  deserialize(data) {\n    this.id = data.id;\n    this.torpedo = new cargoClasses[data.torpedo]();\n    this.targetId = data.targetId;\n    this.strikePosition = new Vector(data.strikePosition);\n    this.launchPosition = new Vector(data.launchPosition);\n    this.shooterId = data.shooterId;\n    this.weaponId = data.weaponId;\n    this.launcherIndex = data.launcherIndex;\n    this.intercepted = data.intercepted || false;\n\n    return this;\n  }\n\n  clone() {\n    return new TorpedoFlight().deserialize(this.serialize());\n  }\n}\n\nexport default TorpedoFlight;\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\nimport { cargoClasses } from \"../../cargo/cargo.mjs\";\nimport NoAmmunitionLoaded from \"../../weapon/ammunition/NoAmmunitionLoaded.mjs\";\nimport TorpedoFlight from \"../../../TorpedoFlight.mjs\";\n\nclass TorpedoLauncherStrategy extends ShipSystemStrategy {\n  constructor(launcherIndex, loadedTorpedo, torpedoClass, loadingTime) {\n    super();\n    this.loadingTime = loadingTime;\n    this.launcherIndex = launcherIndex;\n    this.loadedTorpedo = loadedTorpedo;\n    this.nextTorpedoClass = null;\n    this.torpedoClass = torpedoClass;\n    this.turnsLoaded = loadingTime;\n\n    this.changeAmmo = null;\n    this.previousTorpedo = null;\n    this.launchTarget = null;\n  }\n\n  getUiComponents(payload, previousResponse = []) {\n    return [\n      ...previousResponse,\n      {\n        name: \"TorpedoLauncher\",\n        props: {\n          launcherIndex: this.launcherIndex,\n          loadedTorpedo: this.loadedTorpedo,\n          loadingTime: this.loadingTime,\n          turnsLoaded:\n            this.turnsLoaded > this.loadingTime\n              ? this.loadingTime\n              : this.turnsLoaded,\n          torpedoClass: this.torpedoClass,\n          launchTarget: this.launchTarget,\n          launcher: this,\n        },\n      },\n    ];\n  }\n\n  serialize(payload, previousResponse = []) {\n    const response = {\n      ...previousResponse,\n    };\n\n    response[`torpedoLauncherStrategy${this.launcherIndex}`] = {\n      turnsLoaded: this.turnsLoaded,\n      loadedTorpedo: this.loadedTorpedo\n        ? this.loadedTorpedo.constructor.name\n        : null,\n      changeAmmo: this.changeAmmo,\n      launchTarget: this.launchTarget,\n    };\n\n    return response;\n  }\n\n  deserialize(data = {}) {\n    const launcherData =\n      data[`torpedoLauncherStrategy${this.launcherIndex}`] || {};\n\n    this.turnsLoaded = launcherData.turnsLoaded || 0;\n    this.loadedTorpedo = launcherData.loadedTorpedo\n      ? new cargoClasses[launcherData.loadedTorpedo]()\n      : null;\n\n    this.changeAmmo = launcherData.changeAmmo || null;\n    this.launchTarget = launcherData.launchTarget || null;\n\n    return this;\n  }\n\n  loadAmmoInstant({ ammo, launcherIndex }) {\n    if (\n      launcherIndex !== this.launcherIndex ||\n      (this.loadedTorpedo &&\n        this.loadedTorpedo.constructor.name === ammo.constructor.name)\n    ) {\n      return;\n    }\n\n    this.loadedTorpedo = ammo;\n    this.turnsLoaded = this.loadingTime;\n  }\n\n  unloadAmmo({ launcherIndex }) {\n    if (launcherIndex !== this.launcherIndex) {\n      return;\n    }\n\n    //TODO: unload ammo\n  }\n\n  canLaunchAgainst({ target }) {\n    if (this.turnsLoaded < this.loadingTime || !this.loadedTorpedo) {\n      return false;\n    }\n\n    const distance = this.system.shipSystems.ship.hexDistanceTo(target);\n\n    if (\n      this.loadedTorpedo.minRange > distance ||\n      this.loadedTorpedo.maxRange < distance\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  setLaunchTarget(shipId) {\n    if (this.turnsLoaded < this.loadingTime || !this.loadedTorpedo) {\n      return;\n    }\n\n    this.launchTarget = shipId;\n  }\n\n  launchTorpedo(payload, previousResponse) {\n    if (\n      this.turnsLoaded < this.loadingTime ||\n      !this.loadedTorpedo ||\n      !this.launchTarget\n    ) {\n      return previousResponse;\n    }\n\n    const result = new TorpedoFlight(\n      this.loadedTorpedo,\n      this.launchTarget,\n      this.system.shipSystems.ship.id,\n      this.system.id,\n      this.launcherIndex\n    );\n\n    const possibleNewTorpedos = this.getPossibleTorpedosToLoad();\n    let newAmmo = null;\n\n    const same = possibleNewTorpedos.find(\n      (torpedo) => torpedo.object.constructor === this.loadedTorpedo.constructor\n    );\n\n    if (same) {\n      const cargoBay = this.system.shipSystems\n        .getSystems()\n        .find((system) =>\n          system.callHandler(\"hasCargo\", { object: same.object }, false)\n        );\n      newAmmo = {\n        ammo: same.object.constructor.name,\n        from: cargoBay.id,\n      };\n    } else if (possibleNewTorpedos.length > 0) {\n      const newTorpedo = possibleNewTorpedos.pop().object;\n      const cargoBay = this.system.shipSystems\n        .getSystems()\n        .find((system) =>\n          system.callHandler(\"hasCargo\", { object: newTorpedo }, false)\n        );\n      newAmmo = {\n        ammo: newTorpedo.constructor.name,\n        from: cargoBay.id,\n      };\n    }\n\n    this.loadedTorpedo = null;\n    this.turnsLoaded = 0;\n\n    if (newAmmo) {\n      this.receiveAmmoChange(newAmmo);\n    }\n\n    return [...previousResponse, result];\n  }\n\n  loadAmmo({ ammo, launcherIndex }) {\n    if (\n      launcherIndex !== this.launcherIndex ||\n      (this.loadedTorpedo &&\n        this.loadedTorpedo.constructor.name === ammo.constructor.name)\n    ) {\n      return;\n    }\n\n    const system = this.system.shipSystems\n      .getSystems()\n      .find((system) =>\n        system.callHandler(\"hasCargo\", { object: ammo }, false)\n      );\n\n    system.callHandler(\"removeCargo\", { object: ammo });\n\n    if (this.loadedTorpedo) {\n      system.callHandler(\"addCargo\", { object: this.loadedTorpedo });\n    }\n\n    if (\n      this.previousTorpedo &&\n      this.previousTorpedo.constructor.name === ammo.constructor.name\n    ) {\n      this.loadedTorpedo = this.previousTorpedo;\n      this.turnsLoaded = this.previousTurnsLoaded;\n      this.changeAmmo = null;\n    } else {\n      if (!this.previousTorpedo) {\n        this.previousTorpedo = this.loadedTorpedo;\n        this.previousTurnsLoaded = this.turnsLoaded;\n      }\n\n      this.turnsLoaded = 0;\n      this.changeAmmo = {\n        ammo: ammo.constructor.name,\n        from: system.id,\n      };\n      this.loadedTorpedo = ammo;\n    }\n\n    this.launchTarget = null;\n  }\n\n  getLoadedLaunchers(payload, previousResponse) {\n    if (this.turnsLoaded >= this.loadingTime && this.loadedTorpedo) {\n      return [...previousResponse, this];\n    }\n\n    return previousResponse;\n  }\n\n  receiveAmmoChange(changeAmmo) {\n    const ammo = new cargoClasses[changeAmmo.ammo]();\n\n    const cargoBay = this.system.shipSystems.getSystemById(changeAmmo.from);\n    if (!cargoBay.callHandler(\"hasCargo\", { object: ammo })) {\n      throw new Error(\n        `Trying to take cargo form ${cargoBay.id}, but no appropriate cargo found`\n      );\n    }\n\n    cargoBay.callHandler(\"removeCargo\", { object: ammo });\n\n    if (this.loadedTorpedo) {\n      cargoBay.callHandler(\"addCargo\", { object: this.loadedTorpedo });\n    }\n\n    this.loadedTorpedo = ammo;\n    this.turnsLoaded = 0;\n  }\n\n  receivePlayerData({ clientSystem, gameData, phase }) {\n    if (phase !== 1) {\n      return;\n    }\n\n    if (!clientSystem) {\n      return;\n    }\n\n    if (this.system.isDisabled()) {\n      return;\n    }\n\n    const clientStrategy = getThisStrategy(clientSystem, this.launcherIndex);\n    const changeAmmo = clientStrategy.changeAmmo;\n\n    if (changeAmmo) {\n      this.receiveAmmoChange(changeAmmo);\n    }\n\n    if (clientStrategy.launchTarget) {\n      const target = gameData.ships.getShipById(clientStrategy.launchTarget);\n\n      if (!target) {\n        throw new Error(\n          `Did not find launch target ship id '${clientStrategy.launchTarget}'`\n        );\n      }\n\n      if (!this.canLaunchAgainst({ target })) {\n        throw new Error(`Can not launch torpedo`);\n      }\n\n      this.launchTarget = clientStrategy.launchTarget;\n    }\n  }\n\n  getPossibleTorpedosToLoad() {\n    const ammo = [];\n    this.system.shipSystems.getSystems().forEach((system) => {\n      const possibleAmmo = system.callHandler(\n        \"getCargoByParentClass\",\n        this.torpedoClass,\n        []\n      );\n\n      possibleAmmo.forEach((cargo) => {\n        const entry = ammo.find(\n          (ammoEntry) =>\n            ammoEntry.object.constructor.name === cargo.object.constructor.name\n        );\n\n        if (entry) {\n          entry.amount += cargo.amount;\n        } else {\n          ammo.push({\n            object: cargo.object,\n            amount: cargo.amount,\n          });\n        }\n      });\n    });\n\n    return ammo;\n  }\n\n  advanceTurn() {\n    this.changeAmmo = null;\n    this.previousTorpedo = null;\n    this.launchTarget = null;\n\n    if (this.system.isDisabled() || !this.loadedTorpedo) {\n      this.turnsLoaded = 0;\n      return;\n    }\n\n    this.turnsLoaded++;\n  }\n}\n\nconst getThisStrategy = (system, launcherIndex) => {\n  return system.strategies.find(\n    (strategy) =>\n      strategy instanceof TorpedoLauncherStrategy &&\n      strategy.launcherIndex === launcherIndex\n  );\n};\n\nexport default TorpedoLauncherStrategy;\n","class TorpedoAttackService {\r\n  update(gameData) {\r\n    this.gameData = gameData;\r\n    return this;\r\n  }\r\n\r\n  getPossibleInterceptors(ship, torpedoFlight) {\r\n    return ship.systems\r\n      .getSystems()\r\n      .filter(system => !system.isDisabled())\r\n      .filter(system => system.callHandler(\"canIntercept\"))\r\n      .filter(weapon => {\r\n        // only weapons that have arcs facing to the correct direction\r\n        return weapon.callHandler(\r\n          \"isPositionOnArc\",\r\n          { targetPosition: torpedoFlight.strikePosition },\r\n          true\r\n        );\r\n      })\r\n      .filter(weapon => {\r\n        const fireOrders = weapon.callHandler(\"getFireOrders\", null, []);\r\n\r\n        return fireOrders.length === 0;\r\n      });\r\n  }\r\n\r\n  getPossibleTorpedosFrom(ship, target) {\r\n    let allLaunchers = [];\r\n\r\n    ship.systems.getSystems().forEach(system => {\r\n      const launchers = system\r\n        .callHandler(\"getLoadedLaunchers\", null, [])\r\n        .filter(launcher => launcher.canLaunchAgainst({ target }));\r\n\r\n      if (launchers.length === 0) {\r\n        return;\r\n      }\r\n\r\n      allLaunchers = [...allLaunchers, ...launchers];\r\n    });\r\n\r\n    return allLaunchers;\r\n  }\r\n\r\n  getPossibleTorpedos(currentUser, target) {\r\n    const torpedoAttackShips = [];\r\n\r\n    if (target.player.isUsers(currentUser)) {\r\n      return [];\r\n    }\r\n\r\n    this.gameData.ships\r\n      .getShips()\r\n      .filter(ship => ship.player.isUsers(currentUser))\r\n      .forEach(ship => {\r\n        ship.systems.getSystems().forEach(system => {\r\n          const launchers = system.callHandler(\"getLoadedLaunchers\", null, []);\r\n\r\n          if (launchers.length === 0) {\r\n            return;\r\n          }\r\n\r\n          let entry = torpedoAttackShips.find(attack => attack.ship === ship);\r\n\r\n          if (entry) {\r\n            entry.launchers = [...entry.launchers, ...launchers];\r\n          } else {\r\n            torpedoAttackShips.push({\r\n              ship,\r\n              launchers: launchers,\r\n              distance: this.target\r\n                .getHexPosition()\r\n                .distanceTo(ship.getHexPosition()),\r\n              deltaDistance: getDeltaVelocty(this.target, ship)\r\n            });\r\n          }\r\n        });\r\n      });\r\n\r\n    torpedoAttackShips.sort((a, b) => {\r\n      if (a.distance > b.distance) {\r\n        return 1;\r\n      }\r\n\r\n      if (a.distance < b.distance) {\r\n        return -1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n    return torpedoAttackShips;\r\n  }\r\n}\r\n\r\nconst getDeltaVelocty = (a, b) => {\r\n  const distance = a.getHexPosition().distanceTo(b.getHexPosition());\r\n  const aLastMove = a.movement.getLastMove();\r\n  const bLastMove = b.movement.getLastMove();\r\n\r\n  if (!aLastMove || !bLastMove) {\r\n    return 0;\r\n  }\r\n\r\n  const aPosition = a.getHexPosition().add(aLastMove.getHexVelocity());\r\n  const bPosition = b.getHexPosition().add(bLastMove.getHexVelocity());\r\n\r\n  const newDistance = aPosition.distanceTo(bPosition);\r\n\r\n  return newDistance - distance;\r\n};\r\n\r\nexport default TorpedoAttackService;\r\n","import React from \"react\";\r\nimport {\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue\r\n} from \"../../../../styled\";\r\nimport coordinateConverter from \"../../../../../model/utils/CoordinateConverter.mjs\";\r\nimport HexagonMath from \"../../../../../model/utils/HexagonMath.mjs\";\r\n\r\nconst getTorpedoTooltip = (shooter, target, torpedo, strikePrediction) => {\r\n  if (strikePrediction) {\r\n    const entries = [\r\n      {\r\n        value:\r\n          \"Following prediction depends on relative velocity, position of target, launched torpedo and is subject to change\"\r\n      },\r\n      {\r\n        header: `Impact in`,\r\n        value: `+${Math.floor(strikePrediction.impactTurn)} turns`\r\n      },\r\n      {\r\n        header: \"Relative velocity\",\r\n        value: `${strikePrediction.impactVelocity} h/t`\r\n      }\r\n      /*\r\n      {\r\n        header: \"Strike position\",\r\n        value: coordinateConverter\r\n          .fromGameToHex(strikePrediction.impactPosition)\r\n          .toString()\r\n      },\r\n      {\r\n        header: \"Strike effectiveness\",\r\n        value: `${Math.round(strikePrediction.effectiveness * 100)}%`\r\n      }\r\n      */\r\n    ];\r\n\r\n    if (strikePrediction.note) {\r\n      entries.push({\r\n        value: strikePrediction.note\r\n      });\r\n    }\r\n\r\n    return entries;\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\nclass TorpedoAttackTooltip extends React.Component {\r\n  render() {\r\n    const { shooter, target, torpedo } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <TooltipHeader>TARGET: {target.name}</TooltipHeader>\r\n        {getTorpedoTooltip(shooter, target, torpedo).map(getEntry)}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst getEntry = ({ header, value }, i) => {\r\n  if (value.replace) {\r\n    value = value.replace(/<br>/gm, \"\\n\");\r\n  }\r\n\r\n  return (\r\n    <TooltipEntry key={`cargoTooltipEntry-${header}-${i}`}>\r\n      {header && <TooltipValueHeader>{header}: </TooltipValueHeader>}\r\n      {value && <TooltipValue>{value}</TooltipValue>}\r\n    </TooltipEntry>\r\n  );\r\n};\r\n\r\nexport default TorpedoAttackTooltip;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { IconAndLabel } from \"../../../../styled\";\r\nimport CargoItem from \"../system/SystemStrategyUi/cargo/CargoItem\";\r\nimport TorpedoAttackTooltip from \"./TorpedoAttackTooltip\";\r\n\r\nconst TorpedoCargoItem = styled(CargoItem)`\r\n  ${IconAndLabel} {\r\n    ${props => {\r\n      const { launcher, target } = props;\r\n\r\n      if (launcher.launchTarget === target.id) {\r\n        return \"filter: hue-rotate(0deg) brightness(4) grayscale(0);\";\r\n      } else if (\r\n        launcher.launchTarget !== null &&\r\n        launcher.launchTarget !== target.id\r\n      ) {\r\n        return \"filter: hue-rotate(0deg) brightness(1) grayscale(0.7);\";\r\n      }\r\n    }}\r\n  }\r\n`;\r\n\r\nclass TorpedoAttackEntry extends React.Component {\r\n  torpedoMouseOut() {\r\n    const { uiState, launcher, target } = this.props;\r\n\r\n    uiState.customEvent(\"torpedoMouseOut\", {\r\n      ship: launcher.system.shipSystems.ship,\r\n      torpedo: launcher.loadedTorpedo,\r\n      target\r\n    });\r\n  }\r\n\r\n  torpedoMouseOver() {\r\n    const { uiState, launcher, target } = this.props;\r\n\r\n    uiState.customEvent(\"torpedoMouseOver\", {\r\n      ship: launcher.system.shipSystems.ship,\r\n      torpedo: launcher.loadedTorpedo,\r\n      target\r\n    });\r\n  }\r\n\r\n  launcherClick() {\r\n    const { target, launcher, onLauncherClick = () => {} } = this.props;\r\n\r\n    if (launcher.launchTarget === null || launcher.launchTarget !== target.id) {\r\n      launcher.setLaunchTarget(target.id);\r\n    } else if (launcher.launchTarget && launcher.launchTarget === target.id) {\r\n      launcher.setLaunchTarget(null);\r\n    }\r\n\r\n    this.forceUpdate();\r\n    onLauncherClick();\r\n  }\r\n\r\n  render() {\r\n    const { target, launcher, absoluteTooltip } = this.props;\r\n\r\n    return (\r\n      <TorpedoCargoItem\r\n        launcher={launcher}\r\n        target={target}\r\n        ship={launcher.system.shipSystems.ship}\r\n        handleOnClick={this.launcherClick.bind(this)}\r\n        handleMouseOver={this.torpedoMouseOver.bind(this)}\r\n        handleMouseOut={this.torpedoMouseOut.bind(this)}\r\n        cargo={launcher.loadedTorpedo}\r\n        amount={null}\r\n        text={``}\r\n        absoluteTooltip={absoluteTooltip}\r\n        tooltipAdditionalContent={\r\n          <TorpedoAttackTooltip\r\n            shooter={launcher.system.shipSystems.ship}\r\n            target={target}\r\n            torpedo={launcher.loadedTorpedo}\r\n          />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TorpedoAttackEntry;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport WeaponTargeting from \"./WeaponTargeting\";\r\nimport {\r\n  Tooltip,\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  colors,\r\n  TooltipValue\r\n} from \"../../../../styled\";\r\nimport TorpedoLauncherStrategy from \"../../../../../model/unit/system/strategy/weapon/TorpedoLauncherStrategy.mjs\";\r\nimport TorpedoAttackService from \"../../../../../model/weapon/TorpedoAttackService.mjs\";\r\nimport TorpedoAttackEntry from \"./TorpedoAttackEntry\";\r\n\r\nconst InfoHeader = styled(TooltipHeader)`\r\n  border: none;\r\n  margin-bottom: 0;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 0 8px;\r\n`;\r\n\r\nclass WeaponTargetingList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.torpedoAttackService = new TorpedoAttackService();\r\n  }\r\n\r\n  getSystemIcons(systems, weaponFireService, uiState, shooter, ship, rest) {\r\n    return systems.map((system, i) => {\r\n      if (system instanceof TorpedoLauncherStrategy) {\r\n        return (\r\n          <TorpedoAttackEntry\r\n            key={`weaponTargeting-torpedo-${i}`}\r\n            target={ship}\r\n            launcher={system}\r\n            uiState={uiState}\r\n            absoluteTooltip=\"right\"\r\n          />\r\n        );\r\n      }\r\n      return (\r\n        <WeaponTargeting\r\n          key={`weaponTargeting-${system.id}`}\r\n          uiState={uiState}\r\n          system={system}\r\n          target={ship}\r\n          ship={shooter}\r\n          onSystemClicked={\r\n            !weaponFireService.systemHasFireOrderAgainstShip(system, ship)\r\n              ? this.targetShip(system, shooter, ship, uiState)\r\n              : this.unTargetShip(system, shooter, ship, uiState)\r\n          }\r\n          {...rest}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  targetShip(system, ship, target, uiState) {\r\n    const { weaponFireService } = uiState.services;\r\n\r\n    return () => {\r\n      weaponFireService.removeFireOrders(ship, system);\r\n      weaponFireService.addFireOrder(ship, target, system);\r\n\r\n      uiState.shipSystemStateChanged(ship, system);\r\n      uiState.shipStateChanged(ship);\r\n    };\r\n  }\r\n\r\n  unTargetShip(system, ship, target, uiState) {\r\n    const { weaponFireService } = uiState.services;\r\n\r\n    return () => {\r\n      weaponFireService.removeFireOrders(ship, system);\r\n      uiState.shipSystemStateChanged(ship, system);\r\n      uiState.shipStateChanged(ship);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { ship, uiState, ...rest } = this.props;\r\n    let { shooter } = this.props;\r\n    const { weaponFireService } = uiState.services;\r\n\r\n    if (!shooter) {\r\n      shooter = uiState.getSelectedShip();\r\n    }\r\n\r\n    if (!shooter || uiState.gameData.ships.isSameTeam(ship, shooter)) {\r\n      return null;\r\n    }\r\n\r\n    const systems = [\r\n      ...shooter.systems.getSystems().filter(\r\n        system =>\r\n          weaponFireService.canFire(shooter, ship, system) &&\r\n          system.callHandler(\"getHitChance\", {\r\n            shooter,\r\n            target: ship\r\n          }).result > 0\r\n      ),\r\n      ...this.torpedoAttackService\r\n        .getPossibleTorpedosFrom(shooter, ship)\r\n        .sort((a, b) => {\r\n          if (a.loadedTorpedo.maxRange < b.loadedTorpedo.maxRange) {\r\n            return 1;\r\n          }\r\n\r\n          if (a.loadedTorpedo.maxRange > b.loadedTorpedo.maxRange) {\r\n            return -1;\r\n          }\r\n\r\n          if (\r\n            a.loadedTorpedo.damageStrategy.constructor.name <\r\n            b.loadedTorpedo.damageStrategy.constructor.name\r\n          ) {\r\n            return 1;\r\n          }\r\n\r\n          if (\r\n            a.loadedTorpedo.damageStrategy.constructor.name >\r\n            b.loadedTorpedo.damageStrategy.constructor.name\r\n          ) {\r\n            return -1;\r\n          }\r\n\r\n          if (\r\n            a.loadedTorpedo.getDisplayName() < b.loadedTorpedo.getDisplayName()\r\n          ) {\r\n            return 1;\r\n          }\r\n\r\n          if (\r\n            a.loadedTorpedo.getDisplayName() > b.loadedTorpedo.getDisplayName()\r\n          ) {\r\n            return -1;\r\n          }\r\n\r\n          return 0;\r\n        })\r\n    ];\r\n\r\n    if (systems.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const icons = this.getSystemIcons(\r\n      systems,\r\n      weaponFireService,\r\n      uiState,\r\n      shooter,\r\n      ship,\r\n      rest\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <TooltipHeader>\r\n          {ship.name} <TooltipValue>available weapons</TooltipValue>\r\n        </TooltipHeader>\r\n        <Container>{icons}</Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WeaponTargetingList;\r\n","import coordinateConverter from \"../utils/CoordinateConverter.mjs\";\nimport HexagonMath from \"../utils/HexagonMath.mjs\";\nimport Vector from \"../utils/Vector.mjs\";\nimport THREE from \"three\";\nimport { radianToDegree } from \"../utils/math.mjs\";\n\nclass TorpedoMovementService {\n  reachesTargetThisTurn(flight, target) {\n    const { impactTurn } = this.torpedoMath(\n      flight.position,\n      flight.velocity,\n      target.getPosition(),\n      target.getVelocity(),\n      flight.getTorpedoGameDeltaVelocity()\n    );\n\n    return impactTurn < 1;\n  }\n\n  moveTorpedo(flight, target) {\n    const { accelerationVector, ...rest } = this.torpedoMath(\n      flight.position,\n      flight.velocity,\n      target.getPosition().sub(target.getVelocity()),\n      target.getVelocity(),\n      flight.getTorpedoGameDeltaVelocity()\n    );\n\n    flight.position = flight.position\n      .add(flight.velocity)\n      .add(\n        accelerationVector.multiplyScalar(\n          0.5 * flight.getTorpedoGameDeltaVelocity()\n        )\n      );\n\n    flight.velocity = flight.velocity.add(\n      accelerationVector.multiplyScalar(flight.getTorpedoGameDeltaVelocity())\n    );\n  }\n\n  buildPredictions(flight, result) {\n    const maxInterceptVelocity = flight.torpedo.maxInterceptVelocity;\n\n    let velocity = result.impactVelocity / HexagonMath.getHexWidth();\n\n    if (velocity > maxInterceptVelocity) {\n      velocity = maxInterceptVelocity;\n    }\n\n    let effectiveness = velocity / maxInterceptVelocity;\n    let notes = \"\";\n\n    if (\n      Math.floor(result.impactTurn) + flight.turnsActive <\n      flight.torpedo.armingTime\n    ) {\n      effectiveness = 0;\n      notes = \"Insufficient time to arm torpedo\";\n    }\n\n    if (\n      Math.floor(result.impactTurn) + flight.turnsActive >\n      flight.torpedo.turnsToLive\n    ) {\n      effectiveness = 0;\n      notes = \"Out of range\";\n    }\n\n    return {\n      ...result,\n      notes,\n      impactVelocity: Math.round(\n        result.impactVelocity / HexagonMath.getHexWidth()\n      ),\n      effectiveness\n    };\n  }\n\n  predictTorpedoHitPositionAndTurnAfterMovement(flight, target) {\n    const result = this.torpedoMath(\n      flight.position,\n      flight.velocity,\n      target.getPosition().sub(target.getVelocity()),\n      target.getVelocity(),\n      flight.getTorpedoGameDeltaVelocity()\n    );\n\n    return this.buildPredictions(flight, result);\n  }\n\n  predictTorpedoHitPositionAndTurn(flight, target) {\n    const result = this.torpedoMath(\n      flight.position,\n      flight.velocity,\n      target.getPosition(),\n      target.getVelocity(),\n      flight.getTorpedoGameDeltaVelocity()\n    );\n\n    return this.buildPredictions(flight, result);\n  }\n\n  standardize(\n    shooterPosition,\n    shooterVelocity,\n    targetPosition,\n    targetVelocity\n  ) {\n    const Δpos = targetPosition.sub(shooterPosition);\n    const φ = Math.atan2(Δpos.y, Δpos.x);\n    const rotationMatrix = new THREE.Matrix4().makeRotationZ(-φ);\n    const newTargetPosition = Δpos.applyMatrix4(rotationMatrix);\n    const newShooterVelocity = shooterVelocity\n      .sub(targetVelocity)\n      .applyMatrix4(rotationMatrix);\n\n    return {\n      newTargetPosition,\n      newShooterVelocity,\n      φ\n    };\n  }\n\n  torpedoMath(\n    shooterPosition,\n    shooterVelocity,\n    targetPosition,\n    targetVelocity,\n    torpedoAcceleration\n  ) {\n    if (torpedoAcceleration <= 0) {\n      throw new Error(\"Torpedoacceleration is <= 0\");\n    }\n\n    if (shooterPosition.equals(targetPosition)) {\n      throw new Error(\"Shooter and target positions can not be same\");\n    }\n\n    const { newTargetPosition, newShooterVelocity, φ } = this.standardize(\n      shooterPosition,\n      shooterVelocity,\n      targetPosition,\n      targetVelocity\n    );\n\n    const x = newTargetPosition.x;\n\n    let result = null;\n\n    if (\n      Math.pow(newShooterVelocity.y, 2) / (torpedoAcceleration * x) <\n      Math.pow(10, -7)\n    ) {\n      const impactTurn =\n        (-newShooterVelocity.x +\n          Math.sqrt(\n            Math.pow(newShooterVelocity.x, 2) + 2 * torpedoAcceleration * x\n          )) /\n        torpedoAcceleration;\n\n      result = {\n        accelerationAngle: φ,\n        impactTurn\n      };\n    } else if (newShooterVelocity.y > 0) {\n      const θ = this.findRoot(\n        newTargetPosition.x,\n        newShooterVelocity.x,\n        newShooterVelocity.y,\n        torpedoAcceleration\n      );\n\n      const impactTurn =\n        -(2 * newShooterVelocity.y) / (torpedoAcceleration * Math.sin(θ));\n\n      result = {\n        accelerationAngle: θ + φ,\n        impactTurn\n      };\n    } else {\n      const θ = this.findRoot(\n        newTargetPosition.x,\n        newShooterVelocity.x,\n        -newShooterVelocity.y,\n        torpedoAcceleration\n      );\n\n      const impactTurn =\n        (2 * newShooterVelocity.y) / (torpedoAcceleration * Math.sin(θ));\n\n      result = {\n        accelerationAngle: 2 * Math.PI - θ + φ,\n        impactTurn\n      };\n    }\n\n    const impactVelocity = Math.sqrt(\n      Math.pow(\n        -newShooterVelocity.x +\n          targetVelocity.x -\n          torpedoAcceleration *\n            result.impactTurn *\n            Math.cos(result.accelerationAngle),\n        2\n      ) +\n        Math.pow(\n          -newShooterVelocity.y +\n            targetVelocity.y -\n            torpedoAcceleration *\n              result.impactTurn *\n              Math.sin(result.accelerationAngle),\n          2\n        )\n    );\n\n    const accelerationVector = new Vector(\n      Math.cos(result.accelerationAngle),\n      Math.sin(result.accelerationAngle)\n    ).normalize();\n\n    if (\n      Number.isNaN(result.accelerationAngle) ||\n      Number.isNaN(result.impactTurn) ||\n      Number.isNaN(accelerationVector) ||\n      Number.isNaN(impactVelocity)\n    ) {\n      throw new Error(\n        `Torpedo math encountered NaN with values '${shooterPosition.toString()}, '${shooterVelocity.toString()}, '${targetPosition.toString()}, '${targetVelocity.toString()},'${torpedoAcceleration}'`\n      );\n    }\n\n    const impactPosition = shooterPosition\n      .add(shooterVelocity.multiplyScalar(result.impactTurn))\n      .add(\n        accelerationVector.multiplyScalar(\n          0.5 * torpedoAcceleration * Math.pow(result.impactTurn, 2)\n        )\n      );\n\n    return { ...result, accelerationVector, impactVelocity, impactPosition };\n  }\n\n  findRoot(x, vx, vy, a) {\n    if (vx / vy - (a * x) / (2 * Math.pow(vy, 2) < 0)) {\n      return this.findRoot2(\n        x,\n        vx,\n        vy,\n        a,\n        (3 * Math.PI) / 2,\n        this.findUpperLimit(x, vx, vy, a)\n      );\n    }\n\n    return this.findRoot2(\n      x,\n      vx,\n      vy,\n      a,\n      this.findLowerLimit(x, vx, vy, a),\n      (3 * Math.PI) / 2\n    );\n  }\n\n  f(x, vx, vy, a, θ) {\n    return (\n      Math.cos(θ) / Math.pow(Math.sin(θ), 2) -\n      vx / (vy * Math.sin(θ)) -\n      (a * x) / (2 * Math.pow(vy, 2))\n    );\n  }\n\n  findRoot2(x, vx, vy, a, θ1, θ2) {\n    let θlow = θ1;\n    let θhigh = θ2;\n    let θmid = 0;\n\n    while (θhigh - θlow > Math.pow(10, -8)) {\n      θmid = (θlow + θhigh) / 2;\n      if (this.f(x, vx, vy, a, θmid) > 0) {\n        θhigh = θmid;\n      } else {\n        θlow = θmid;\n      }\n    }\n\n    return (θlow + θhigh) / 2;\n  }\n\n  findUpperLimit(x, vx, vy, a) {\n    let i = 1;\n\n    while (true) {\n      const argument = 2 * Math.PI - Math.PI / Math.pow(2, i);\n      const result = this.f(x, vx, vy, a, argument);\n\n      if (result > 0) {\n        return argument;\n      }\n      i++;\n    }\n  }\n\n  findLowerLimit(x, vx, vy, a) {\n    let i = 1;\n\n    while (true) {\n      const argument = Math.PI + Math.PI / Math.pow(2, i);\n      const result = this.f(x, vx, vy, a, argument);\n\n      if (result < 0) {\n        return argument;\n      }\n      i++;\n    }\n  }\n}\n\nexport default TorpedoMovementService;\n","import React from \"react\";\r\nimport TorpedoAttackService from \"../../../../../model/weapon/TorpedoAttackService.mjs\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  Tooltip,\r\n  TooltipHeader,\r\n  TooltipSubHeader,\r\n  TooltipEntry,\r\n  colors,\r\n  IconAndLabel\r\n} from \"../../../../styled\";\r\nimport CargoItem from \"../system/SystemStrategyUi/cargo/CargoItem\";\r\nimport TorpedoAttackTooltip from \"./TorpedoAttackTooltip\";\r\nimport TorpedoMovementService from \"../../../../../model/movement/TorpedoMovementService.mjs\";\r\nimport TorpedoFlight from \"../../../../../model/unit/TorpedoFlight.mjs\";\r\nimport WeaponTargetingList from \"./WeaponTargetingList\";\r\n\r\nconst Container = styled.div`\r\n  z-index: 3;\r\n`;\r\n\r\nconst Cell = styled.div`\r\n  width: 25%;\r\n  display: flex;\r\n\r\n  justify-content: center;\r\n\r\n  :first-child {\r\n    width: 50%;\r\n    justify-content: flex-start;\r\n  }\r\n\r\n  :last-child {\r\n    justify-content: flex-end;\r\n  }\r\n`;\r\n\r\nconst TorpedoList = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nclass TorpedoAttack extends React.Component {\r\n  render() {\r\n    const { uiState, ship: target } = this.props;\r\n\r\n    const gameData = uiState.gameData;\r\n\r\n    const ships = gameData.ships\r\n      .getShips()\r\n      .filter(otherShip => !gameData.ships.isSameTeam(target, otherShip))\r\n      .sort((a, b) => {\r\n        if (a.distanceTo(target) < b.distanceTo(target)) {\r\n          return 1;\r\n        }\r\n\r\n        if (a.distanceTo(target) > b.distanceTo(target)) {\r\n          return -1;\r\n        }\r\n\r\n        return 0;\r\n      });\r\n\r\n    return (\r\n      <Container>\r\n        {ships.map(shooter => (\r\n          <WeaponTargetingList\r\n            shooter={shooter}\r\n            uiState={uiState}\r\n            ship={target}\r\n            key={`weaponTargetingList-${shooter.id}`}\r\n          />\r\n        ))}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TorpedoAttack;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { HeatBar } from \"./Bar\";\r\nimport {\r\n  buildTooltipEntries,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n} from \"../../../../styled\";\r\nimport { formatNumber } from \"../../../../../model/utils/format.mjs\";\r\nimport { HeaderMenuItem } from \"../system/SystemInfo\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  ${TooltipEntry} {\r\n    width: 50px;\r\n    display: flex;\r\n    flex-grow: 1;\r\n    margin-left: 0;\r\n    margin-right: 0;\r\n  }\r\n`;\r\n\r\nconst HeatBarContainer = styled.div``;\r\n\r\nconst ShipHeatBar = ({ percent, newPercent }) => {\r\n  return (\r\n    <Container>\r\n      <TooltipEntry>\r\n        <TooltipEntry noMargin>\r\n          <TooltipValueHeader>Heat: </TooltipValueHeader>\r\n        </TooltipEntry>\r\n        <HeatBar percent={percent} newPercent={newPercent} />\r\n      </TooltipEntry>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ShipHeatBar;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { FuelBar } from \"./Bar\";\r\nimport {\r\n  buildTooltipEntries,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  InlineTooltipEntry,\r\n} from \"../../../../styled\";\r\nimport { formatNumber } from \"../../../../../model/utils/format.mjs\";\r\nimport { HeaderMenuItem } from \"../system/SystemInfo\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  ${TooltipEntry} {\r\n    width: 50px;\r\n    display: flex;\r\n    flex-grow: 1;\r\n    margin-left: 0;\r\n    margin-right: 0;\r\n  }\r\n`;\r\n\r\nconst ShipFuelBar = ({ fuel, space, newFuel }) => {\r\n  const percent = fuel / space;\r\n  const newPercent = newFuel / space;\r\n  return (\r\n    <Container>\r\n      <TooltipEntry>\r\n        <TooltipEntry noMargin>\r\n          <TooltipValueHeader>Fuel: </TooltipValueHeader>\r\n        </TooltipEntry>\r\n        <FuelBar percent={percent} newPercent={newPercent} />\r\n      </TooltipEntry>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ShipFuelBar;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  TooltipEntry,\r\n  TooltipValue,\r\n  TooltipValueHeader,\r\n} from \"../../../../styled\";\r\nimport ShipHeatBar from \"../HeatBar/ShipHeatBar\";\r\nimport ShipFuelBar from \"../HeatBar/ShipFuelBar\";\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  margin: 0 8px 5px 8px;\r\n`;\r\n\r\nconst ShipDetailsTooltipEntry = styled(TooltipEntry)`\r\n  margin: 2px 0;\r\n`;\r\n\r\nclass ShipTooltipDetails extends React.Component {\r\n  getEntry(header, value) {\r\n    return (\r\n      <ShipDetailsTooltipEntry>\r\n        {header && <TooltipValueHeader>{header}: </TooltipValueHeader>}\r\n        {value && <TooltipValue>{value}</TooltipValue>}\r\n      </ShipDetailsTooltipEntry>\r\n    );\r\n  }\r\n  render() {\r\n    const { ship, uiState } = this.props;\r\n\r\n    const { currentUser } = uiState.services;\r\n\r\n    const heatPercent =\r\n      ship.systems.getTotalHeatStored() / ship.systems.getTotalHeatStorage();\r\n\r\n    const heatChange = ship.systems.getPassiveHeatChange();\r\n\r\n    const newHeatPercent =\r\n      (ship.systems.getTotalHeatStored() + heatChange) /\r\n      ship.systems.getTotalHeatStorage();\r\n\r\n    const shipFuel = ship.movement.getFuel();\r\n    const shipFuelSpace = ship.movement.getFuelSpace();\r\n    const shipNewFuel = shipFuel - ship.movement.getFuelCost();\r\n\r\n    return (\r\n      <Container>\r\n        <Row>\r\n          {this.getEntry(\r\n            \"Hit profile\",\r\n            `Front: ${ship.getFrontHitProfile()}, Side: ${ship.getSideHitProfile()}`\r\n          )}\r\n          {this.getEntry(\r\n            \"DEW\",\r\n            ship.electronicWarfare.inEffect.getDefensiveEw()\r\n          )}\r\n          {this.getEntry(\"CCEW\", ship.electronicWarfare.inEffect.getCcEw())}\r\n        </Row>\r\n        <Row>\r\n          {this.getEntry(\r\n            \"Movement costs\",\r\n            `Acc: ${ship.accelcost}, Pivot: ${ship.pivotcost}, Evasion: ${ship.evasioncost}, Roll: ${ship.rollcost}`\r\n          )}\r\n        </Row>\r\n        <Row>\r\n          {ship.player.isUsers(currentUser) &&\r\n            this.getEntry(\r\n              \"Power available\",\r\n              ship.systems.power.getRemainingPowerOutput()\r\n            )}\r\n\r\n          {ship.player.isUsers(currentUser) &&\r\n            this.getEntry(\r\n              \"Planned DEW\",\r\n              ship.electronicWarfare.getDefensiveEw()\r\n            )}\r\n\r\n          {ship.player.isUsers(currentUser) &&\r\n            this.getEntry(\"Planned CCEW\", ship.electronicWarfare.getCcEw())}\r\n        </Row>\r\n\r\n        <Row>\r\n          <ShipHeatBar percent={heatPercent} newPercent={newHeatPercent} />\r\n        </Row>\r\n        <Row>\r\n          <ShipFuelBar\r\n            fuel={shipFuel}\r\n            space={shipFuelSpace}\r\n            newFuel={shipNewFuel}\r\n          />\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShipTooltipDetails;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\nimport { Play } from \"../../../../styled/icon\";\r\n\r\nconst BackTooltipMenu = styled(TooltipMenu)``;\r\n\r\nconst RotatedButton = styled(TooltipButton)`\r\n  transform: rotate(180deg);\r\n  height: 30px;\r\n`;\r\n\r\nclass GameShipTooltipMenuBack extends React.PureComponent {\r\n  render() {\r\n    const { selectTooltipTab } = this.props;\r\n\r\n    return (\r\n      <BackTooltipMenu>\r\n        <RotatedButton onClick={() => selectTooltipTab(null)}>\r\n          <Play />\r\n        </RotatedButton>\r\n      </BackTooltipMenu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameShipTooltipMenuBack;\r\n","import React from \"react\";\r\nimport {\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  TooltipValueHeader,\r\n  TooltipValue,\r\n  buildTooltipEntries,\r\n} from \"../../../../../styled\";\r\n\r\nconst getAttackRunMessages = (shooter, target, torpedoFlight) => {\r\n  return [\r\n    ...torpedoFlight.torpedo.damageStrategy.getAttackRunMessages({\r\n      shooter,\r\n      target,\r\n      torpedoFlight,\r\n    }),\r\n    {\r\n      header: \"CCEW\",\r\n      value: shooter.electronicWarfare.getCcEw(),\r\n    },\r\n  ];\r\n};\r\n\r\nconst getInterceptors = (shooter, target, torpedoFlight, uiState) => {\r\n  const interceptors = uiState.services.torpedoAttackService.getPossibleInterceptors(\r\n    shooter,\r\n    torpedoFlight\r\n  );\r\n\r\n  const interceptChance = interceptors\r\n    .map((interceptor) => ({\r\n      interceptor: interceptor,\r\n      interceptChance: interceptor.callHandler(\"getInterceptChance\", {\r\n        target,\r\n        torpedoFlight,\r\n      }),\r\n    }))\r\n    .sort((a, b) => {\r\n      if (a.interceptChance.result > b.interceptChance.result) {\r\n        return 1;\r\n      }\r\n\r\n      if (a.interceptChance.result < b.interceptChance.result) {\r\n        return -1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n  const interceptorGroups = [];\r\n\r\n  interceptChance.forEach((intercept) => {\r\n    let entry = interceptorGroups.find(\r\n      (group) => group.name === intercept.interceptor.getDisplayName()\r\n    );\r\n\r\n    if (!entry) {\r\n      entry = {\r\n        name: intercept.interceptor.getDisplayName(),\r\n        intercepts: intercept.interceptor.callHandler(\r\n          \"getNumberOfIntercepts\",\r\n          null,\r\n          1\r\n        ),\r\n        min: null,\r\n        max: null,\r\n        amount: 0,\r\n      };\r\n\r\n      interceptorGroups.push(entry);\r\n    }\r\n\r\n    if (intercept.interceptChance.result < entry.min || entry.min === null) {\r\n      entry.min = intercept.interceptChance.result;\r\n    }\r\n\r\n    if (intercept.interceptChance.result > entry.max || entry.max === null) {\r\n      entry.max = intercept.interceptChance.result;\r\n    }\r\n\r\n    entry.amount++;\r\n  });\r\n\r\n  const getInterceptValue = (min, max) => {\r\n    if (min < 0) {\r\n      min = 0;\r\n    }\r\n\r\n    if (max < 0) {\r\n      max = 0;\r\n    }\r\n\r\n    if (min === max) {\r\n      return `${max}%`;\r\n    }\r\n\r\n    return `${min}% - ${max}%`;\r\n  };\r\n\r\n  return interceptorGroups.map((group) => {\r\n    return {\r\n      header: `${group.amount * group.intercepts}x ${group.name}`,\r\n      value: getInterceptValue(group.min, group.max),\r\n    };\r\n  });\r\n};\r\n\r\nclass TorpedoDefenseTooltip extends React.Component {\r\n  render() {\r\n    const { shooter, target, torpedoFlight, uiState } = this.props;\r\n\r\n    const interceptorEntries = buildTooltipEntries(\r\n      getInterceptors(shooter, target, torpedoFlight, uiState)\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <TooltipHeader>TORPEDO DEFENSE</TooltipHeader>\r\n        {buildTooltipEntries(\r\n          getAttackRunMessages(shooter, target, torpedoFlight)\r\n        )}\r\n\r\n        <TooltipHeader>INTERCEPTORS</TooltipHeader>\r\n        {interceptorEntries.length > 0\r\n          ? interceptorEntries\r\n          : \"No available interceptors\"}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TorpedoDefenseTooltip;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport CargoItem from \"../../system/SystemStrategyUi/cargo/CargoItem\";\r\nimport TorpedoDefenseTooltip from \"./TorpedoDefenseTooltip\";\r\n\r\nconst TorpedoCargoItem = styled(CargoItem)`\r\n  display: inline-flex;\r\n`;\r\n\r\nexport default function IncomingTorpedo({\r\n  uiState,\r\n  torpedoFlight,\r\n  ship,\r\n  shooter\r\n}) {\r\n  const torpedoMouseOut = () => {\r\n    /*\r\n    uiState.customEvent(\"torpedoMouseOut\", {\r\n      ship: launcher.system.shipSystems.ship,\r\n      torpedo: launcher.loadedTorpedo,\r\n      target\r\n    });\r\n    */\r\n  };\r\n\r\n  const torpedoMouseOver = () => {\r\n    /*\r\n    uiState.customEvent(\"torpedoMouseOver\", {\r\n      ship: launcher.system.shipSystems.ship,\r\n      torpedo: launcher.loadedTorpedo,\r\n      target\r\n    });\r\n    */\r\n  };\r\n\r\n  return (\r\n    <TorpedoCargoItem\r\n      ship={ship}\r\n      handleOnClick={() => {}}\r\n      handleMouseOver={torpedoMouseOver}\r\n      handleMouseOut={torpedoMouseOut}\r\n      cargo={torpedoFlight.torpedo}\r\n      amount={null}\r\n      text={``}\r\n      absoluteTooltip=\"left\"\r\n      tooltipAdditionalContent={\r\n        <TorpedoDefenseTooltip\r\n          shooter={shooter}\r\n          target={ship}\r\n          torpedoFlight={torpedoFlight}\r\n          uiState={uiState}\r\n        />\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  Tooltip,\r\n  TooltipHeader,\r\n  TooltipSubHeader,\r\n  TooltipEntry,\r\n  colors,\r\n  IconAndLabel,\r\n  TooltipValue,\r\n} from \"../../../../../styled\";\r\nimport IncomingTorpedo from \"./IncomingTorpedo\";\r\n\r\nconst TorpedoList = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst sortFlights = (a, b) => {\r\n  if (a.torpedo.maxRange < b.torpedo.maxRange) {\r\n    return 1;\r\n  }\r\n\r\n  if (a.torpedo.maxRange > b.torpedo.maxRange) {\r\n    return -1;\r\n  }\r\n\r\n  if (\r\n    a.torpedo.damageStrategy.constructor.name <\r\n    b.torpedo.damageStrategy.constructor.name\r\n  ) {\r\n    return 1;\r\n  }\r\n\r\n  if (\r\n    a.torpedo.damageStrategy.constructor.name >\r\n    b.torpedo.damageStrategy.constructor.name\r\n  ) {\r\n    return -1;\r\n  }\r\n\r\n  if (a.torpedo.getDisplayName() < b.torpedo.getDisplayName()) {\r\n    return 1;\r\n  }\r\n\r\n  if (a.torpedo.getDisplayName() > b.torpedo.getDisplayName()) {\r\n    return -1;\r\n  }\r\n\r\n  return 0;\r\n};\r\n\r\nconst getTorpedosAgainstThisShip = (ship, gameData) =>\r\n  gameData.torpedos\r\n    .getTorpedoFlights()\r\n    .filter((flight) => flight.targetId === ship.id)\r\n    .sort(sortFlights);\r\n\r\nconst getTorpedosAgainstFriendlyShips = (\r\n  ship,\r\n  gameData,\r\n  torpedoAttackService\r\n) => {\r\n  const entries = [];\r\n  gameData.torpedos\r\n    .getTorpedoFlights()\r\n    .filter(\r\n      (flight) =>\r\n        flight.targetId !== ship.id &&\r\n        gameData.ships.isSameTeam(\r\n          ship,\r\n          gameData.ships.getShipById(flight.targetId)\r\n        )\r\n    )\r\n    .forEach((flight) => {\r\n      const target = gameData.ships.getShipById(flight.targetId);\r\n\r\n      let entry = entries.find(\r\n        ({ ship: entryShip }) => entryShip.id === target.id\r\n      );\r\n\r\n      if (!entry) {\r\n        entry = {\r\n          ship: target,\r\n          flights: [],\r\n        };\r\n        entries.push(entry);\r\n      }\r\n\r\n      entry.flights.push(flight);\r\n    });\r\n\r\n  return entries\r\n    .filter(({ ship: targetShip, flights }) =>\r\n      flights.some((flight) => {\r\n        torpedoAttackService\r\n          .getPossibleInterceptors(ship, flight)\r\n          .some(\r\n            (interceptor) =>\r\n              interceptor.callHandler(\r\n                \"getInterceptChance\",\r\n                { target: targetShip, torpedoFlight: flight },\r\n                0\r\n              ) > 0\r\n          );\r\n      })\r\n    )\r\n    .map(({ ship: targetShip, flights }) => ({\r\n      ship: targetShip,\r\n      flights: flights.sort(sortFlights),\r\n    }));\r\n};\r\n\r\nclass TorpedoDefense extends React.Component {\r\n  render() {\r\n    const { uiState, ship } = this.props;\r\n\r\n    const gameData = uiState.gameData;\r\n    const torpedos = getTorpedosAgainstThisShip(ship, gameData);\r\n\r\n    const friendlyEntries = getTorpedosAgainstFriendlyShips(\r\n      ship,\r\n      gameData,\r\n      uiState.services.torpedoAttackService\r\n    );\r\n    console.log(\"friendlyEntries\", friendlyEntries);\r\n\r\n    return (\r\n      <>\r\n        <TooltipHeader>\r\n          {ship.name} <TooltipValue>This ship</TooltipValue>\r\n        </TooltipHeader>\r\n        <div>\r\n          {torpedos.map((flight) => (\r\n            <IncomingTorpedo\r\n              key={`incoming-torpedo-${flight.id}`}\r\n              ship={ship}\r\n              torpedoFlight={flight}\r\n              shooter={ship}\r\n              uiState={uiState}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div>\r\n          {friendlyEntries.map(({ ship: targetShip, flights }) => (\r\n            <div\r\n              key={`incoming-torpedo-friendly-defense-${ship.id}-${targetShip.id}`}\r\n            >\r\n              <TooltipHeader>{targetShip.name}</TooltipHeader>\r\n              {flights.map((flight) => (\r\n                <IncomingTorpedo\r\n                  key={`incoming-torpedo-friendly-${flight.id}`}\r\n                  ship={targetShip}\r\n                  torpedoFlight={flight}\r\n                  shooter={ship}\r\n                  uiState={uiState}\r\n                />\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TorpedoDefense;\r\n","import TorpedoDefense from \"./TorpedoDefense.js\";\r\n\r\nexport default TorpedoDefense;\r\n","const SERVER_URL = \"http://localhost:4000\";\nconst SERVER_WEBSOCKET_URL = \"ws://localhost:4000/game/\";\n\nexport { SERVER_URL, SERVER_WEBSOCKET_URL };\n","import axios from \"axios\";\r\nimport { SERVER_URL } from \"../config\";\r\n\r\nconst axiosConfig = {\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\"\r\n  }\r\n};\r\n\r\nexport const login = async (username, password) => {\r\n  try {\r\n    return await axios.post(\r\n      `${SERVER_URL}/login`,\r\n      {\r\n        username,\r\n        password\r\n      },\r\n      axiosConfig\r\n    );\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n\r\nexport const register = async (username, password) => {\r\n  try {\r\n    return await axios.post(\r\n      `${SERVER_URL}/register`,\r\n      {\r\n        username,\r\n        password\r\n      },\r\n      axiosConfig\r\n    );\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n\r\nexport const getCurrentUser = async () => {\r\n  try {\r\n    return await axios.get(`${SERVER_URL}/user`, axiosConfig);\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    return await axios.get(`${SERVER_URL}/logout`, axiosConfig);\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport { SERVER_URL } from \"../config\";\r\n\r\nconst axiosConfig = {\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const createGame = async (gameData) => {\r\n  try {\r\n    return axios.post(`${SERVER_URL}/game`, gameData.serialize(), axiosConfig);\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n\r\nexport const createTestGameGame = async (gameData) => {\r\n  try {\r\n    return axios.post(`${SERVER_URL}/testGame`, {}, axiosConfig);\r\n  } catch (error) {\r\n    throw error.response;\r\n  }\r\n};\r\n","import { user } from \"../api\";\r\nimport User from \"../../model/User.mjs\";\r\n\r\nconst actionTypes = {\r\n  GET_CURRENT_USER: \"GET_CURRENT_USER\"\r\n};\r\n\r\nexport const getCurrentUser = async dispatch => {\r\n  const payload = await user.getCurrentUser();\r\n  dispatch({\r\n    type: actionTypes.GET_CURRENT_USER,\r\n    payload: payload\r\n  });\r\n};\r\n\r\nexport const reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"GET_CURRENT_USER\":\r\n      const user = action.payload.data\r\n        ? new User().deserialize(action.payload.data)\r\n        : null;\r\n      return {\r\n        ...state,\r\n        currentUser: user\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { useReducer, useEffect } from \"react\";\r\nimport { reducer, getCurrentUser } from \"./actions\";\r\n\r\nexport const StateStore = React.createContext({});\r\nexport const DispatchStore = React.createContext({});\r\n\r\nconst initialState = {\r\n  currentUser: undefined,\r\n};\r\n\r\nconst StoreProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  useEffect(() => {\r\n    getCurrentUser(dispatch);\r\n  }, []);\r\n\r\n  return (\r\n    <DispatchStore.Provider value={dispatch}>\r\n      <StateStore.Provider value={state}>{children}</StateStore.Provider>\r\n    </DispatchStore.Provider>\r\n  );\r\n};\r\n\r\nexport default StoreProvider;\r\n","import React, { useContext } from \"react\";\r\nimport { StateStore } from \"../../../state/StoreProvider\";\r\nimport styled from \"styled-components\";\r\nimport { colors } from \"../../../styled\";\r\n\r\nconst ShipNameContainer = styled.span`\r\n  color: ${props => (props.isMine ? colors.lightBlue : colors.textDanger)};\r\n`;\r\n\r\nexport default function ShipName({ ship }) {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  const isMine = ship.player.isUsers(currentUser);\r\n\r\n  return (\r\n    <ShipNameContainer isMine={isMine}>\r\n      {ship.name || \"Unnamed ship\"}\r\n    </ShipNameContainer>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Text = css`\r\n  color: white;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  font-family: arial;\r\n  font-size: 16px;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst ShipName = styled.div`\r\n  ${Text}\r\n  padding: 0 5px 0 30px;\r\n  width: 200px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Amount = styled.div`\r\n  ${Text}\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 25px;\r\n  height: 25px;\r\n`;\r\n\r\nclass CCEWButtons extends React.PureComponent {\r\n  render() {\r\n    const { name, ship, uiState, ccew, ...rest } = this.props;\r\n\r\n    return (\r\n      <Container {...rest}>\r\n        {name && <ShipName>{name}</ShipName>}\r\n        <TooltipButton\r\n          img=\"/img/removeCCEW.png\"\r\n          onClick={() => {\r\n            if (ship.electronicWarfare.canAssignCcEw(-1)) {\r\n              ship.electronicWarfare.assignCcEw(-1);\r\n              uiState.shipStateChanged(ship);\r\n            }\r\n          }}\r\n        />\r\n        <Amount>{ccew}</Amount>\r\n        <TooltipButton\r\n          img=\"/img/addCCEW.png\"\r\n          onClick={() => {\r\n            if (ship.electronicWarfare.canAssignCcEw(1)) {\r\n              ship.electronicWarfare.assignCcEw(1);\r\n              uiState.shipStateChanged(ship);\r\n            }\r\n          }}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CCEWButtons;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\nimport { Play } from \"../../../../styled/icon\";\r\nimport CCEWButtons from \"../electronicWarfare/CCEWButtons\";\r\n\r\nconst BackTooltipMenu = styled(TooltipMenu)``;\r\n\r\nconst RotatedButton = styled(TooltipButton)`\r\n  transform: rotate(180deg);\r\n  height: 30px;\r\n`;\r\n\r\nclass GameShipTooltipMenuTorpedoDefense extends React.PureComponent {\r\n  render() {\r\n    const { selectTooltipTab, ship, uiState } = this.props;\r\n\r\n    return (\r\n      <BackTooltipMenu>\r\n        <RotatedButton onClick={() => selectTooltipTab(null)}>\r\n          <Play />\r\n        </RotatedButton>\r\n        <CCEWButtons\r\n          ship={ship}\r\n          uiState={uiState}\r\n          ccew={ship.electronicWarfare.getCcEw()}\r\n        />\r\n      </BackTooltipMenu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameShipTooltipMenuTorpedoDefense;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GamePositionComponent from \"../GamePositionComponent\";\r\nimport ShipWindow from \"../shipWindow/ShipWindow\";\r\nimport WeaponTargetingList from \"./WeaponTargetingList\";\r\nimport {\r\n  Tooltip,\r\n  TooltipHeader,\r\n  TooltipEntry,\r\n  TooltipValue,\r\n  TooltipValueHeader,\r\n  TooltipButton,\r\n} from \"../../../../styled\";\r\nimport TorpedoAttack from \"./TorpedoAttack\";\r\nimport ShipTooltipDetails from \"./ShipTooltipDetails\";\r\nimport { X } from \"../../../../styled/icon\";\r\nimport GameShipTooltipMenuBack from \"./GameShipTooltipMenuBack\";\r\nimport TorpedoDefense from \"./TorpedoDefense\";\r\nimport ShipName from \"../ShipName\";\r\nimport GameShipTooltipMenuTorpedoDefense from \"./GameShipTooltipMenuTorpedoDefense\";\r\nimport { CloseButton } from \"../../../../styled/Button\";\r\n\r\nconst InfoHeader = styled(TooltipHeader)`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ShipTooltipContainer = styled(Tooltip)`\r\n  width: 315px;\r\n  text-align: left;\r\n  opacity: 0.95;\r\n  position: absolute;\r\n  top: 50px;\r\n  ${(props) => (props.right ? \"right: 220px;\" : \"left: 220px;\")}\r\n\r\n  ${(props) => (props.interactable ? \"z-index: 4;\" : \"z-index: 1;\")}\r\n`;\r\n\r\nexport const Entry = styled(TooltipEntry)`\r\n  text-align: left;\r\n  color: #5e85bc;\r\n  font-family: arial;\r\n  font-size: 11px;\r\n`;\r\n\r\nexport const Header = styled.span`\r\n  color: white;\r\n`;\r\n\r\nexport const TOOLTIP_TAB_TORPEDO_ATTACK = \"tooltip_tab_torpedo_attack\";\r\nexport const TOOLTIP_TAB_TORPEDO_DEFENSE = \"tooltip_tab_torpedo_defense\";\r\n\r\nclass ShipTooltip extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { tooltipTab: null };\r\n  }\r\n\r\n  selectTooltipTab(name) {\r\n    this.setState({ tooltipTab: name });\r\n  }\r\n\r\n  getMenu() {\r\n    const { ui, shipTooltipMenuProvider } = this.props;\r\n\r\n    const tooltipTab = this.getTooltipTab();\r\n\r\n    if (!tooltipTab) {\r\n      const Menu =\r\n        ui && shipTooltipMenuProvider ? shipTooltipMenuProvider() : null;\r\n      return Menu;\r\n    }\r\n\r\n    if (tooltipTab && ui) {\r\n      if (tooltipTab === TOOLTIP_TAB_TORPEDO_DEFENSE) {\r\n        return GameShipTooltipMenuTorpedoDefense;\r\n      }\r\n      return GameShipTooltipMenuBack;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  getTabHeader() {\r\n    const { tooltipTab } = this.state;\r\n\r\n    switch (tooltipTab) {\r\n      case TOOLTIP_TAB_TORPEDO_ATTACK:\r\n        return \"Weapon assignment\";\r\n      case TOOLTIP_TAB_TORPEDO_DEFENSE:\r\n        return \"Torpedo defense\";\r\n      default:\r\n        return \"Ship details\";\r\n    }\r\n  }\r\n\r\n  getTooltipTab() {\r\n    const { ship, uiState } = this.props;\r\n    const { tooltipTab } = this.state;\r\n    const { currentUser } = uiState.services;\r\n\r\n    const myShip = ship.player.isUsers(currentUser);\r\n\r\n    if (tooltipTab === TOOLTIP_TAB_TORPEDO_ATTACK && myShip) {\r\n      return null;\r\n    }\r\n\r\n    return tooltipTab;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      ship,\r\n      getPosition,\r\n      uiState,\r\n      ui,\r\n      shipTooltipMenuProvider,\r\n      className,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    const tooltipTab = this.getTooltipTab();\r\n\r\n    const Menu = this.getMenu();\r\n    const interactable = Boolean(Menu) || tooltipTab;\r\n\r\n    return (\r\n      <ShipTooltipContainer\r\n        right={rest.right}\r\n        className={className}\r\n        interactable={interactable}\r\n      >\r\n        <InfoHeader>\r\n          <div>\r\n            <ShipName ship={ship} />\r\n          </div>{\" \"}\r\n          <div>\r\n            {this.getTabHeader()}{\" \"}\r\n            <CloseButton\r\n              onClick={() => {\r\n                uiState.hideShipTooltip(ship);\r\n                uiState.customEvent(\"shipTooltipClosed\", ship);\r\n              }}\r\n            />\r\n          </div>\r\n        </InfoHeader>\r\n        {Menu && (\r\n          <Menu\r\n            uiState={uiState}\r\n            ship={ship}\r\n            selectTooltipTab={this.selectTooltipTab.bind(this)}\r\n            {...rest}\r\n          />\r\n        )}\r\n        {!tooltipTab && (\r\n          <>\r\n            {Menu && (\r\n              <WeaponTargetingList uiState={uiState} ship={ship} {...rest} />\r\n            )}\r\n            <ShipTooltipDetails ship={ship} uiState={uiState} />\r\n            <ShipWindow ship={ship} uiState={uiState} {...rest} />\r\n          </>\r\n        )}\r\n\r\n        {tooltipTab === TOOLTIP_TAB_TORPEDO_ATTACK && (\r\n          <TorpedoAttack ship={ship} uiState={uiState} {...rest} />\r\n        )}\r\n\r\n        {tooltipTab === TOOLTIP_TAB_TORPEDO_DEFENSE && (\r\n          <TorpedoDefense ship={ship} uiState={uiState} {...rest} />\r\n        )}\r\n      </ShipTooltipContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShipTooltip;\r\n","import * as React from \"react\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\nimport OEWButtons from \"../electronicWarfare/OEWButtons\";\r\nimport {\r\n  TOOLTIP_TAB_TORPEDO_ATTACK,\r\n  TOOLTIP_TAB_TORPEDO_DEFENSE,\r\n} from \"./ShipTooltip\";\r\nimport CCEWButtons from \"../electronicWarfare/CCEWButtons\";\r\n\r\nconst toggleRadiators = (ship, uiState, on = false) => {\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"isRadiator\", null, false))\r\n    .filter((system) => {\r\n      if (on) {\r\n        return system.power.canSetOnline();\r\n      } else {\r\n        return system.power.canSetOffline();\r\n      }\r\n    })\r\n    .forEach((system) => {\r\n      if (on) {\r\n        system.power.setOnline();\r\n      } else {\r\n        system.power.setOffline();\r\n      }\r\n\r\n      uiState.shipSystemStateChanged(ship, system);\r\n    });\r\n};\r\n\r\nconst hasRadiators = (ship) =>\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"isRadiator\", null, false)).length >\r\n  0;\r\n\r\nconst hasOnlineradiators = (ship) =>\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"isRadiator\", null, false))\r\n    .filter((system) => system.power.canSetOffline())\r\n    .filter((system) => system.power.isOnline()).length > 0;\r\n\r\nconst toggleInterceptors = (ship, uiState, on = false) => {\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"canIntercept\", null, false))\r\n    .filter((system) => {\r\n      if (on) {\r\n        return system.power.canSetOnline();\r\n      } else {\r\n        return system.power.canSetOffline();\r\n      }\r\n    })\r\n    .forEach((system) => {\r\n      if (on) {\r\n        system.power.setOnline();\r\n      } else {\r\n        system.power.setOffline();\r\n      }\r\n\r\n      uiState.shipSystemStateChanged(ship, system);\r\n    });\r\n};\r\n\r\nconst hasInterceptors = (ship) =>\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"canIntercept\", null, false))\r\n    .length > 0;\r\n\r\nconst hasOnlineInterceptors = (ship) =>\r\n  ship.systems\r\n    .getSystems()\r\n    .filter((system) => !system.isDestroyed())\r\n    .filter((system) => system.callHandler(\"canIntercept\", null, false))\r\n    .filter((system) => system.power.canSetOffline())\r\n    .filter((system) => system.power.isOnline()).length > 0;\r\n\r\nclass GameShipTooltipMenu extends React.PureComponent {\r\n  render() {\r\n    const { ship, uiState, selectTooltipTab } = this.props;\r\n    const { currentUser } = uiState.services;\r\n\r\n    const selectedShip = uiState.getSelectedShip();\r\n\r\n    return (\r\n      <TooltipMenu>\r\n        {ship.player.isUsers(currentUser) && !uiState.isSelected(ship) && (\r\n          <TooltipButton\r\n            img=\"/img/selectShip.png\"\r\n            onClick={() => uiState.selectShip(ship)}\r\n          />\r\n        )}\r\n\r\n        {ship.player.isUsers(currentUser) && selectedShip && (\r\n          <CCEWButtons\r\n            ship={ship}\r\n            uiState={uiState}\r\n            ccew={selectedShip.electronicWarfare.getCcEw()}\r\n          />\r\n        )}\r\n\r\n        {!ship.player.isUsers(currentUser) && selectedShip && (\r\n          <OEWButtons\r\n            ship={selectedShip}\r\n            target={ship}\r\n            uiState={uiState}\r\n            oew={selectedShip.electronicWarfare.getOffensiveEw(ship)}\r\n          />\r\n        )}\r\n\r\n        {ship.player.isUsers(currentUser) && hasRadiators(ship) && (\r\n          <TooltipButton\r\n            img=\"/img/system/radiator.png\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n\r\n              toggleRadiators(\r\n                ship,\r\n                uiState,\r\n                hasOnlineradiators(ship) ? false : true\r\n              );\r\n              uiState.shipStateChanged(ship);\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {ship.player.isUsers(currentUser) && hasInterceptors(ship) && (\r\n          <TooltipButton\r\n            img=\"/img/system/gatlingPulseCannon.png\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n\r\n              toggleInterceptors(\r\n                ship,\r\n                uiState,\r\n                hasOnlineInterceptors(ship) ? false : true\r\n              );\r\n              uiState.shipStateChanged(ship);\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {!ship.player.isUsers(currentUser) && (\r\n          <TooltipButton\r\n            img=\"/img/system/missile1.png\"\r\n            onClick={() => selectTooltipTab(TOOLTIP_TAB_TORPEDO_ATTACK)}\r\n          />\r\n        )}\r\n\r\n        {ship.player.isUsers(currentUser) && (\r\n          <TooltipButton\r\n            img=\"/img/torpedoDefense.png\"\r\n            onClick={() => selectTooltipTab(TOOLTIP_TAB_TORPEDO_DEFENSE)}\r\n          />\r\n        )}\r\n      </TooltipMenu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameShipTooltipMenu;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport GameShipTooltipMenu from \"../shipTooltip/GameShipTooltipMenu\";\r\n\r\nclass GameShipTooltipMenuStrategy extends UiStrategy {\r\n  activate(services) {\r\n    super.activate(services);\r\n    const { uiState } = this.services;\r\n\r\n    uiState.setTooltipMenuProvider(this.getTooltipComponent);\r\n  }\r\n\r\n  deactivate() {\r\n    super.deactivate();\r\n    const { uiState } = this.services;\r\n\r\n    uiState.setTooltipMenuProvider(null);\r\n  }\r\n\r\n  getTooltipComponent() {\r\n    return GameShipTooltipMenu;\r\n  }\r\n}\r\n\r\nexport default GameShipTooltipMenuStrategy;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass ShowUiModeButtons extends UiStrategy {\r\n  activate(services) {\r\n    super.activate(services);\r\n    const { uiState } = this.services;\r\n    uiState.showUiModeButtons(true);\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.showUiModeButtons(false);\r\n  }\r\n}\r\n\r\nexport default ShowUiModeButtons;\r\n","import UiStrategy from \"../UiStrategy\";\r\nimport * as gameUiModes from \"../../gameUiModes\";\r\n\r\nclass OwnedShipEw extends UiStrategy {\r\n  deactivate() {\r\n    const { electronicWarfareIndicatorService } = this.services;\r\n    electronicWarfareIndicatorService.hideAll();\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.show();\r\n  }\r\n\r\n  uiStateChanged() {\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    const { electronicWarfareIndicatorService, uiState } = this.services;\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !uiState.hasGameUiMode(gameUiModes.EW) &&\r\n      uiState.getSelectedShip() !== ship\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    electronicWarfareIndicatorService.showForShip(ship);\r\n  }\r\n\r\n  mouseOutShip() {\r\n    this.show();\r\n  }\r\n\r\n  show() {\r\n    const {\r\n      electronicWarfareIndicatorService,\r\n      uiState,\r\n      currentUser\r\n    } = this.services;\r\n\r\n    electronicWarfareIndicatorService.hideAll();\r\n\r\n    if (uiState.hasGameUiMode(gameUiModes.EW)) {\r\n      this.gameData.ships\r\n        .getUsersShips(currentUser)\r\n        .forEach(ship => electronicWarfareIndicatorService.showForShip(ship));\r\n    }\r\n\r\n    if (\r\n      !uiState.hasGameUiMode([gameUiModes.ENEMY_WEAPONS, gameUiModes.WEAPONS])\r\n    ) {\r\n      const ship = uiState.getSelectedShip();\r\n      if (ship) {\r\n        electronicWarfareIndicatorService.showForShip(ship);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default OwnedShipEw;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass MouseOverShowsElectronicWarfare extends UiStrategy {\r\n  deactivate() {\r\n    const { electronicWarfareIndicatorService } = this.services;\r\n    electronicWarfareIndicatorService.hideAll();\r\n  }\r\n\r\n  mouseOverShip(payload) {\r\n    const { electronicWarfareIndicatorService } = this.services;\r\n    electronicWarfareIndicatorService.hideAll();\r\n    electronicWarfareIndicatorService.showForShip(payload.entity.ship);\r\n  }\r\n\r\n  mouseOutShip() {\r\n    const { electronicWarfareIndicatorService } = this.services;\r\n    electronicWarfareIndicatorService.hideAll();\r\n  }\r\n}\r\n\r\nexport default MouseOverShowsElectronicWarfare;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass ShipClickSelectsShip extends UiStrategy {\r\n  shipClicked(payload) {\r\n    const { uiState, currentUser } = this.services;\r\n    const ship = payload.entity.ship;\r\n\r\n    if (ship.player.isUsers(currentUser) && !uiState.isSelected(ship)) {\r\n      uiState.selectShip(ship);\r\n    }\r\n  }\r\n}\r\n\r\nexport default ShipClickSelectsShip;\r\n","import UiStrategy from \"../UiStrategy\";\r\nimport * as gameUiModes from \"../../gameUiModes\";\r\n\r\nclass CurrentEW extends UiStrategy {\r\n  deactivate() {\r\n    const { electronicWarfareIndicatorService } = this.services;\r\n    electronicWarfareIndicatorService.hideAllCurrent();\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.show();\r\n  }\r\n\r\n  uiStateChanged() {\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  mouseOutShip() {\r\n    this.show();\r\n  }\r\n\r\n  show() {\r\n    const {\r\n      electronicWarfareIndicatorService,\r\n      uiState,\r\n      currentUser\r\n    } = this.services;\r\n\r\n    electronicWarfareIndicatorService.hideAllCurrent();\r\n\r\n    if (uiState.hasGameUiMode(gameUiModes.ENEMY_WEAPONS)) {\r\n      this.gameData.ships\r\n        .getShipsEnemyTeams(currentUser)\r\n        .forEach(ship =>\r\n          electronicWarfareIndicatorService.showCurrentForShip(ship)\r\n        );\r\n    }\r\n\r\n    if (uiState.hasGameUiMode(gameUiModes.WEAPONS)) {\r\n      this.gameData.ships\r\n        .getShipsInSameTeam(currentUser)\r\n        .forEach(ship =>\r\n          electronicWarfareIndicatorService.showCurrentForShip(ship)\r\n        );\r\n    }\r\n  }\r\n}\r\n\r\nexport default CurrentEW;\r\n","import * as THREE from \"three\";\r\nimport UiStrategy from \"../UiStrategy\";\r\nimport {\r\n  degreeToRadian,\r\n  addToDirection,\r\n  getArcLength,\r\n} from \"../../../../../../model/utils/math\";\r\nimport abstractCanvas from \"../../../utils/abstractCanvas\";\r\n\r\nclass WeaponArcsOnSystemMouseOver extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n    this.weaponArcs = [];\r\n  }\r\n\r\n  deactivate() {\r\n    this.hide();\r\n  }\r\n\r\n  systemMouseOver({ ship, system }) {\r\n    if (!system.callHandler(\"hasArcs\")) {\r\n      return;\r\n    }\r\n\r\n    this.show(ship, system);\r\n  }\r\n\r\n  torpedoMouseOver({ ship, torpedo }) {\r\n    const { coordinateConverter, shipIconContainer } = this.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n\r\n    const maxRange = torpedo.maxRange;\r\n    const distance = maxRange * coordinateConverter.getHexDistance();\r\n\r\n    const canvas = abstractCanvas.create(maxRange + 1, 1);\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    for (let range = 0; range <= maxRange; range++) {\r\n      const opacity = range < torpedo.minRange ? 0 : 0.5;\r\n\r\n      context.fillStyle =\r\n        \"rgba(\" + 2 + \",\" + 80 + \",\" + 128 + \",\" + opacity + \")\";\r\n      context.fillRect(range, 0, 1, 1);\r\n    }\r\n\r\n    const texture = new THREE.CanvasTexture(canvas);\r\n\r\n    const material = new THREE.MeshBasicMaterial({\r\n      color: new THREE.Color(\"rgb(20,80,128)\"),\r\n      opacity: 1,\r\n      transparent: true,\r\n      map: texture,\r\n    });\r\n\r\n    const geometry = new THREE.CircleGeometry(\r\n      distance,\r\n      32,\r\n      degreeToRadian(0),\r\n      degreeToRadian(360)\r\n    );\r\n\r\n    geometry.faceVertexUvs = [\r\n      geometry.faceVertexUvs[0].map((_) => [\r\n        new THREE.Vector2(1, 0),\r\n        new THREE.Vector2(1, 0),\r\n        new THREE.Vector2(0, 0),\r\n      ]),\r\n    ];\r\n\r\n    geometry.uvsNeedUpdate = true;\r\n    const circle = new THREE.Mesh(geometry, material);\r\n    circle.position.z = -1;\r\n    icon.mesh.add(circle);\r\n    this.weaponArcs.push({ mesh: icon.mesh, circle });\r\n  }\r\n\r\n  torpedoMouseOut() {\r\n    this.hide();\r\n  }\r\n\r\n  systemMouseOut() {\r\n    this.hide();\r\n  }\r\n\r\n  hide() {\r\n    const { scene } = this.services;\r\n    this.weaponArcs = this.weaponArcs.filter(({ mesh, circle }) => {\r\n      mesh.remove(circle);\r\n    });\r\n  }\r\n\r\n  show(ship, system) {\r\n    const { coordinateConverter, shipIconContainer } = this.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n\r\n    const maxRange = system.callHandler(\"getMaxRange\");\r\n    const distance = maxRange * coordinateConverter.getHexDistance();\r\n\r\n    const arcsList = system.callHandler(\"getArcs\", {\r\n      facing: icon.getFacing(),\r\n    });\r\n\r\n    const canvas = abstractCanvas.create(maxRange + 1, 1);\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    for (let range = 0; range <= maxRange; range++) {\r\n      const rangePenalty = system.callHandler(\"getRangeModifier\", {\r\n        distance: range,\r\n      });\r\n\r\n      const opacity = (100 + rangePenalty) / 100;\r\n\r\n      if (opacity < 0) {\r\n        opacity = 0;\r\n      }\r\n\r\n      context.fillStyle =\r\n        \"rgba(\" + 2 + \",\" + 80 + \",\" + 128 + \",\" + opacity + \")\";\r\n      context.fillRect(range, 0, 1, 1);\r\n    }\r\n\r\n    const texture = new THREE.CanvasTexture(canvas);\r\n\r\n    const material = new THREE.MeshBasicMaterial({\r\n      color: new THREE.Color(\"rgb(20,80,128)\"),\r\n      opacity: 1,\r\n      transparent: true,\r\n      map: texture,\r\n    });\r\n\r\n    arcsList.forEach((arcs) => {\r\n      const arcLenght =\r\n        arcs.start === arcs.end ? 360 : getArcLength(arcs.start, arcs.end);\r\n\r\n      const geometry = new THREE.CircleGeometry(\r\n        distance,\r\n        32,\r\n        degreeToRadian(addToDirection(360, -arcs.end)),\r\n        degreeToRadian(arcLenght)\r\n      );\r\n\r\n      geometry.faceVertexUvs = [\r\n        geometry.faceVertexUvs[0].map((intial) => [\r\n          new THREE.Vector2(1, 0),\r\n          new THREE.Vector2(1, 0),\r\n          new THREE.Vector2(0, 0),\r\n        ]),\r\n      ];\r\n\r\n      geometry.uvsNeedUpdate = true;\r\n      const circle = new THREE.Mesh(geometry, material);\r\n      circle.position.z = -1;\r\n      icon.mesh.add(circle);\r\n      this.weaponArcs.push({ mesh: icon.mesh, circle });\r\n    });\r\n  }\r\n}\r\n\r\nexport default WeaponArcsOnSystemMouseOver;\r\n","import * as THREE from \"three\";\r\nimport UiStrategy from \"../UiStrategy\";\r\nimport {\r\n  degreeToRadian,\r\n  addToDirection,\r\n  getArcLength\r\n} from \"../../../../../../model/utils/math\";\r\n\r\nconst material = new THREE.MeshBasicMaterial({\r\n  color: new THREE.Color(\"rgb(20,80,128)\"),\r\n  opacity: 0.5,\r\n  transparent: true\r\n});\r\n\r\nclass SelectWeaponOnSystemClick extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n    this.weaponArcs = [];\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n\r\n    uiState.deselectAllSystems();\r\n  }\r\n\r\n  systemClicked({ ship, system, scs }) {\r\n    const { uiState, currentUser } = this.services;\r\n\r\n    if (scs || !system.isWeapon() || !ship.player.is(currentUser)) {\r\n      return;\r\n    }\r\n\r\n    if (uiState.isSelectedSystem(system)) {\r\n      uiState.deselectSystem(system);\r\n    } else {\r\n      uiState.selectSystem(ship, system);\r\n    }\r\n\r\n    uiState.updateState();\r\n  }\r\n}\r\n\r\nexport default SelectWeaponOnSystemClick;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass SelectedShipSystemList extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.setSystemList([]);\r\n  }\r\n\r\n  update(gameData) {\r\n    const { uiState } = this.services;\r\n    super.update(gameData);\r\n\r\n    const ship = uiState.getSelectedShip();\r\n    if (ship) {\r\n      uiState.setSystemList(\r\n        ship.systems.getSystems().filter(system => system.showOnSystemList())\r\n      );\r\n    }\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { uiState } = this.services;\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    uiState.setSystemList(\r\n      ship.systems.getSystems().filter(system => system.showOnSystemList())\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectedShipSystemList;\r\n","import * as React from \"react\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../../styled\";\r\n\r\nclass GameSystemTooltipMenu extends React.Component {\r\n  render() {\r\n    const { ship, system, uiState } = this.props;\r\n    const { currentUser } = uiState.services;\r\n\r\n    const myShip = ship.player.is(currentUser);\r\n    const selectedShip = uiState.getSelectedShip();\r\n\r\n    if (system.isDestroyed()) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <TooltipMenu>\r\n        {system\r\n          .callHandler(\r\n            \"getTooltipMenuButton\",\r\n            { uiState, myShip, selectedShip },\r\n            []\r\n          )\r\n          .sort((a, b) => {\r\n            if (a.sort > b.sort) {\r\n              return 1;\r\n            }\r\n\r\n            if (a.sort < b.sort) {\r\n              return -1;\r\n            }\r\n\r\n            return 0;\r\n          })\r\n          .map(({ img, disabledHandler, onClickHandler }, i) => (\r\n            <TooltipButton\r\n              key={`custom-system-tooltip-button-${i}`}\r\n              img={img}\r\n              disabled={disabledHandler ? disabledHandler() : false}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                onClickHandler();\r\n                uiState.shipSystemStateChanged(ship, system);\r\n                uiState.shipStateChanged(ship);\r\n                this.forceUpdate();\r\n              }}\r\n            />\r\n          ))}\r\n      </TooltipMenu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameSystemTooltipMenu;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport GameSystemTooltipMenu from \"../system/GameSystemTooltipMenu\";\r\n\r\nclass GameSystemInfoMenuStrategy extends UiStrategy {\r\n  activate(services) {\r\n    super.activate(services);\r\n    const { uiState } = this.services;\r\n\r\n    uiState.setSystemInfoMenuProvider(this.getTooltipComponent);\r\n  }\r\n\r\n  deactivate() {\r\n    super.deactivate();\r\n    const { uiState } = this.services;\r\n\r\n    uiState.setSystemInfoMenuProvider(null);\r\n  }\r\n\r\n  getTooltipComponent() {\r\n    return GameSystemTooltipMenu;\r\n  }\r\n}\r\n\r\nexport default GameSystemInfoMenuStrategy;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass SystemClickShowsSystemMenu extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.clickedSystem = null;\r\n  }\r\n\r\n  shipStateChanged() {\r\n    const { uiState } = this.services;\r\n    if (this.clickedSystem) {\r\n      uiState.setSystemMenuActiveSystem(this.clickedSystem, this.element);\r\n    }\r\n  }\r\n\r\n  closeSystemInfo() {\r\n    this.hide();\r\n  }\r\n\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    if (this.clickedShip) {\r\n      uiState.setSystemMenuActiveSystem(null, null);\r\n    }\r\n  }\r\n\r\n  systemClicked({ system, element, scs }) {\r\n    const { uiState } = this.services;\r\n\r\n    if (!scs) {\r\n      return;\r\n    }\r\n\r\n    this.clickedSystem = system;\r\n    this.element = element;\r\n    uiState.setSystemMenuActiveSystem(this.clickedSystem, this.element);\r\n  }\r\n\r\n  hexClicked() {\r\n    this.hide();\r\n  }\r\n\r\n  mouseOverShip(payload) {\r\n    this.hide();\r\n  }\r\n\r\n  mouseOutShip() {\r\n    this.hide();\r\n  }\r\n\r\n  hide() {\r\n    if (!this.clickedSystem) {\r\n      return;\r\n    }\r\n\r\n    const { uiState } = this.services;\r\n    uiState.setSystemMenuActiveSystem(null, null);\r\n    this.clickedSystem = null;\r\n    this.element = null;\r\n  }\r\n}\r\n\r\nexport default SystemClickShowsSystemMenu;\r\n","import UiStrategy from \"../UiStrategy\";\r\n\r\nclass SelectedShipEwList extends UiStrategy {\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    uiState.setEwList([]);\r\n  }\r\n\r\n  shipStateChanged() {\r\n    const { uiState } = this.services;\r\n    const ship = uiState.getSelectedShip();\r\n\r\n    uiState.setEwList(ship.electronicWarfare.getAllOew());\r\n  }\r\n\r\n  shipSelected(ship) {\r\n    const { uiState } = this.services;\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    uiState.setEwList(ship.electronicWarfare.getAllOew());\r\n  }\r\n}\r\n\r\nexport default SelectedShipEwList;\r\n","import UiStrategy from \"./UiStrategy\";\r\nimport {\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  ZOOM_FOR_MAPICONS\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass UnderHexForShips extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.showing = false;\r\n  }\r\n\r\n  show() {\r\n    const { shipIconContainer, currentUser } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      icon.hexSpriteContainer.visible = true;\r\n      const color = icon.ship.player.isUsers(currentUser)\r\n        ? COLOR_FRIENDLY\r\n        : COLOR_ENEMY;\r\n\r\n      icon.hexSprites.forEach(sprite => sprite.setOverlayColor(color));\r\n      icon.line.setColor(color);\r\n      icon.line.show();\r\n    });\r\n\r\n    this.showing = true;\r\n  }\r\n\r\n  hide() {\r\n    const { shipIconContainer } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      icon.hexSpriteContainer.visible = false;\r\n\r\n      icon.line.hide();\r\n    });\r\n\r\n    this.showing = false;\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n    this.show();\r\n  }\r\n\r\n  render({ zoom }) {\r\n    if (zoom > ZOOM_FOR_MAPICONS && this.showing) {\r\n      this.hide();\r\n    }\r\n\r\n    if (zoom <= ZOOM_FOR_MAPICONS && !this.showing) {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  deactivate() {\r\n    this.hide();\r\n  }\r\n}\r\n\r\nexport default UnderHexForShips;\r\n","import AnimationUiStrategy from \"./AnimationUiStrategy\";\r\nimport {\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  ZOOM_FOR_MAPICONS,\r\n  COLOR_FRIENDLY_HIGHLIGHT,\r\n  COLOR_ENEMY_HIGHLIGHT,\r\n  ZOOM_MAX\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass ShowMapIcons extends AnimationUiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.zoom = 1;\r\n    this.showingIcons = false;\r\n  }\r\n\r\n  showHighligh(icon) {\r\n    const { currentUser } = this.services;\r\n    const color = icon.ship.player.isUsers(currentUser)\r\n      ? COLOR_FRIENDLY_HIGHLIGHT\r\n      : COLOR_ENEMY_HIGHLIGHT;\r\n\r\n    icon.mapIcon.replaceColor(color);\r\n  }\r\n\r\n  hideHighligh() {\r\n    const { shipIconContainer, currentUser } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      const ghost = shipIconContainer.getGhostShipIconByShip(icon.ship);\r\n      ghost.mapIcon.revertColor();\r\n      icon.mapIcon.revertColor();\r\n    });\r\n  }\r\n\r\n  mouseOverShip(payload) {\r\n    const icon = payload.entity;\r\n    this.showHighligh(icon);\r\n  }\r\n\r\n  uiStateChanged() {\r\n    this.shouldShow(this.zoom, true);\r\n  }\r\n\r\n  shipStateChanged() {\r\n    this.shouldShow(this.zoom, true);\r\n  }\r\n\r\n  mouseOutShip() {\r\n    this.hideHighligh();\r\n    this.shouldShow(this.zoom, true);\r\n  }\r\n\r\n  mouseOut() {\r\n    this.hideHighligh();\r\n  }\r\n\r\n  showIcons() {\r\n    this.changeScale(1);\r\n    const { shipIconContainer, currentUser, gameCamera } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      const color = icon.ship.player.isUsers(currentUser)\r\n        ? COLOR_FRIENDLY\r\n        : COLOR_ENEMY;\r\n\r\n      const ghost = shipIconContainer.getGhostShipIconByShip(icon.ship);\r\n      ghost.showMapIcon(color);\r\n      icon.showMapIcon(color);\r\n    });\r\n    this.showingIcons = true;\r\n    gameCamera.changeToMapView();\r\n  }\r\n\r\n  hideIcons() {\r\n    this.changeScale(1);\r\n    const { shipIconContainer, gameCamera } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      icon.hideMapIcon();\r\n      const ghost = shipIconContainer.getGhostShipIconByShip(icon.ship);\r\n      ghost.hideMapIcon();\r\n    });\r\n\r\n    this.showingIcons = false;\r\n    gameCamera.changeToCloseView();\r\n  }\r\n\r\n  changeScale(scale) {\r\n    const { shipIconContainer } = this.services;\r\n    shipIconContainer.getArray().forEach(icon => {\r\n      icon.mapIcon.setScale(scale);\r\n      const ghost = shipIconContainer.getGhostShipIconByShip(icon.ship);\r\n      ghost.mapIcon.setScale(scale);\r\n    });\r\n  }\r\n\r\n  shouldShow(zoom, force = false) {\r\n    if (!this.services) {\r\n      return;\r\n    }\r\n\r\n    if (zoom > ZOOM_FOR_MAPICONS && (force || !this.showingIcons)) {\r\n      this.showIcons();\r\n    }\r\n\r\n    if (zoom <= ZOOM_FOR_MAPICONS && (force || this.showingIcons)) {\r\n      this.hideIcons();\r\n    }\r\n\r\n    if (zoom > ZOOM_FOR_MAPICONS) {\r\n      /*\r\n      const extraScale =\r\n        ((zoom - ZOOM_FOR_MAPICONS) / (ZOOM_MAX - ZOOM_FOR_MAPICONS)) * 5 + 1;\r\n        */\r\n\r\n      const extraScale = zoom;\r\n\r\n      this.changeScale(extraScale);\r\n    }\r\n  }\r\n\r\n  render({ zoom }) {\r\n    if (zoom === this.zoom) {\r\n      return;\r\n    }\r\n\r\n    this.zoom = zoom;\r\n\r\n    this.shouldShow(zoom);\r\n  }\r\n\r\n  deactivate() {\r\n    super.deactivate();\r\n    this.hideIcons();\r\n  }\r\n}\r\n\r\nexport default ShowMapIcons;\r\n","import AnimationUiStrategy from \"./AnimationUiStrategy\";\r\nimport {\r\n  COLOR_FRIENDLY,\r\n  COLOR_ENEMY,\r\n  ZOOM_FOR_MAPICONS,\r\n  ZOOM_FOR_SHIPBADGE,\r\n  ZOOM_FOR_SHIPBADGE_NAME,\r\n  ZOOM_MAX,\r\n} from \"../../../../../model/gameConfig.mjs\";\r\n\r\nclass ShowShipBadges extends AnimationUiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.zoom = 1;\r\n    this.showing = false;\r\n    this.showingName = false;\r\n  }\r\n\r\n  /*\r\n  uiStateChanged() {\r\n    this.shouldShow(this.zoom, true);\r\n  }*/\r\n\r\n  shipStateChanged(ship) {\r\n    this.show(ship);\r\n  }\r\n\r\n  updateShip(ship) {\r\n    const { shipIconContainer, uiState } = this.services;\r\n\r\n    if (ship.isDestroyed()) {\r\n      return;\r\n    }\r\n\r\n    const icon = shipIconContainer.getByShip(ship);\r\n    uiState.showShipBadge(icon);\r\n  }\r\n\r\n  /*\r\n\r\n  mouseOutShip() {\r\n    this.shouldShow(this.zoom, true);\r\n  }\r\n  */\r\n\r\n  show(showName) {\r\n    const { shipIconContainer, uiState } = this.services;\r\n\r\n    shipIconContainer\r\n      .getArray()\r\n      .filter((icon) => !icon.ship.isDestroyed())\r\n      .forEach((icon) => {\r\n        uiState.showShipBadge(icon, showName);\r\n      });\r\n    this.showing = true;\r\n    this.showingName = showName;\r\n  }\r\n\r\n  hide() {\r\n    const { shipIconContainer, uiState } = this.services;\r\n    shipIconContainer.getArray().forEach((icon) => {\r\n      uiState.hideShipBadge(icon);\r\n    });\r\n    this.showing = false;\r\n  }\r\n\r\n  shouldShow(zoom, force = false) {\r\n    if (!this.services) {\r\n      return;\r\n    }\r\n\r\n    if (zoom > ZOOM_FOR_SHIPBADGE && (force || this.showing)) {\r\n      this.hide();\r\n    }\r\n\r\n    if (zoom <= ZOOM_FOR_SHIPBADGE) {\r\n      //const showName = zoom <= ZOOM_FOR_SHIPBADGE_NAME;\r\n\r\n      if (/* this.showingName !== showName || */ force || !this.showing) {\r\n        this.show(/* showName */);\r\n      }\r\n    }\r\n  }\r\n\r\n  render({ zoom }) {\r\n    this.zoom = zoom;\r\n\r\n    this.shouldShow(zoom);\r\n  }\r\n\r\n  deactivate() {\r\n    const { shipIconContainer, uiState } = this.services;\r\n    shipIconContainer.getArray().forEach((icon) => {\r\n      uiState.removeShipBadge(icon);\r\n    });\r\n  }\r\n}\r\n\r\nexport default ShowShipBadges;\r\n","import * as THREE from \"three\";\r\nimport AnimationUiStrategy from \"./AnimationUiStrategy\";\r\nimport { getCompassHeadingOfPoint } from \"../../../../../model/utils/math.mjs\";\r\nimport { getSeededRandomGenerator } from \"../../../../../model/utils/math.mjs\";\r\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\r\nimport MovementService from \"../../../../../model/movement/MovementService.mjs\";\r\nimport Line from \"../../renderer/Line\";\r\nimport { HexagonSprite } from \"../../renderer/sprite\";\r\nimport { COLOR_FRIENDLY } from \"../../../../../model/gameConfig.mjs\";\r\nimport { COLOR_ENEMY } from \"../../../../../model/gameConfig.mjs\";\r\nimport Sprite from \"../../renderer/sprite/Sprite\";\r\nimport HexagonMath from \"../../../../../model/utils/HexagonMath.mjs\";\r\n\r\nconst TEXTURE = new THREE.TextureLoader().load(\"/img/torpedoMarker.png\");\r\n\r\nclass ShowTorpedoObjects extends AnimationUiStrategy {\r\n  constructor() {\r\n    super();\r\n    this.movementService = new MovementService();\r\n    this.lines = [];\r\n    this.hexes = [];\r\n    this.zoom = 1;\r\n  }\r\n\r\n  markHexes(gameData) {\r\n    const hexPositions = [];\r\n    const { scene, currentUser } = this.services;\r\n    gameData.torpedos.getTorpedoFlights().forEach(flight => {\r\n      const hexPosition = flight.strikePosition.toOffset();\r\n      const target = gameData.ships.getShipById(flight.targetId);\r\n      const spriteFacing = getCompassHeadingOfPoint(\r\n        flight.strikePosition,\r\n        target.movement.getLastEndMoveOrSurrogate().position\r\n      );\r\n\r\n      if (\r\n        !hexPositions.find(\r\n          ({ position, target, facing }) =>\r\n            position.equals(hexPosition) &&\r\n            target === target &&\r\n            facing === spriteFacing\r\n        )\r\n      ) {\r\n        hexPositions.push({\r\n          position: hexPosition,\r\n          target: target,\r\n          facing: spriteFacing\r\n        });\r\n      }\r\n    });\r\n\r\n    hexPositions.forEach(({ position, target, facing }) => {\r\n      const pos = position.toVector();\r\n      const color = gameData.slots.isShipInUsersTeam(currentUser, target)\r\n        ? COLOR_ENEMY\r\n        : COLOR_FRIENDLY;\r\n\r\n      if (\r\n        !this.hexes.find(\r\n          hex => hex.isPosition(pos) && hex.isOverlayColor(color)\r\n        )\r\n      ) {\r\n        const sprite = new Sprite(\r\n          TEXTURE,\r\n          {\r\n            width: HexagonMath.getTextureWidth() * 0.8,\r\n            height: HexagonMath.getTextureHeight() * 0.8\r\n          },\r\n          0\r\n        )\r\n          .setPosition(pos)\r\n          .setOpacity(0.5)\r\n          .setOverlayColorAlpha(1)\r\n          .setOverlayColor(color)\r\n          .setFacing(-facing)\r\n          .show();\r\n        this.hexes.push(sprite);\r\n        scene.add(sprite.mesh);\r\n      }\r\n    });\r\n\r\n    this.hexes = this.hexes.filter(sprite => {\r\n      if (\r\n        !hexPositions.find(({ position }) =>\r\n          sprite.isPosition(position.toVector())\r\n        )\r\n      ) {\r\n        scene.remove(sprite.mesh);\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  update(gameData) {\r\n    super.update(gameData);\r\n\r\n    gameData.torpedos.getTorpedoFlights().forEach(flight => {\r\n      const target = gameData.ships.getShipById(flight.targetId);\r\n      this.handleImpactingTorpedo(flight, target);\r\n    });\r\n\r\n    this.markHexes(gameData);\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    if (!this.gameData) {\r\n      return;\r\n    }\r\n\r\n    this.gameData.torpedos\r\n      .getTorpedoFlights()\r\n      .filter(flight => flight.targetId === ship.id)\r\n      .forEach(flight => {\r\n        this.handleImpactingTorpedo(flight, ship);\r\n      });\r\n\r\n    this.markHexes(this.gameData);\r\n  }\r\n\r\n  handleImpactingTorpedo(flight, target) {\r\n    const { torpedoIconContainer, scene, shipIconContainer } = this.services;\r\n\r\n    const icon = torpedoIconContainer.getIconByTorpedoFlight(flight);\r\n    const getRandom = getSeededRandomGenerator(icon.torpedoFlight.id);\r\n    const variance = new Vector(\r\n      getRandom() * 25 - 12.5,\r\n      getRandom() * 25 - 12.5,\r\n      getRandom() * 10 - 5\r\n    );\r\n\r\n    const targetPosition = target.movement.getLastEndMoveOrSurrogate().position;\r\n\r\n    const torpedoPosition = flight.strikePosition\r\n      .setZ(shipIconContainer.getByShip(target).shipZ)\r\n      .add(variance);\r\n\r\n    icon.setPosition(torpedoPosition);\r\n    icon.setFacing(-getCompassHeadingOfPoint(torpedoPosition, targetPosition));\r\n\r\n    let line = this.lines.find(\r\n      ({ flightId, targetId }) =>\r\n        flightId === flight.id && targetId === target.id\r\n    );\r\n\r\n    if (!line) {\r\n      line = new Line(scene, {\r\n        start: torpedoPosition,\r\n        end: targetPosition.setZ(shipIconContainer.getByShip(target).shipZ),\r\n        width: 2,\r\n        color: new THREE.Color(255 / 255, 40 / 255, 40 / 255),\r\n        opacity: 0.01,\r\n        pulseAmount: 1\r\n      });\r\n      line.show();\r\n      this.lines.push({\r\n        targetId: target.id,\r\n        flightId: flight.id,\r\n        line\r\n      });\r\n    } else {\r\n      line.line.update(\r\n        torpedoPosition,\r\n        targetPosition.setZ(shipIconContainer.getByShip(target).shipZ),\r\n        2\r\n      );\r\n    }\r\n\r\n    icon.show();\r\n  }\r\n\r\n  deactivate() {\r\n    const { torpedoIconContainer, scene } = this.services;\r\n    torpedoIconContainer.getArray().forEach(icon => {\r\n      icon.hide();\r\n    }, this);\r\n\r\n    this.lines.forEach(line => line.line.destroy());\r\n    this.hexes.forEach(sprite => scene.remove(sprite.mesh));\r\n    return super.deactivate();\r\n  }\r\n\r\n  render({ zoom }) {\r\n    if (zoom === this.zoom) {\r\n      return;\r\n    }\r\n\r\n    this.zoom = zoom;\r\n\r\n    if (zoom > 1) {\r\n      this.hexes.forEach(sprite => {\r\n        sprite.setScale(zoom * 0.8, zoom * 0.8);\r\n      });\r\n    } else {\r\n      this.hexes.forEach(sprite => {\r\n        sprite.setScale(1, 1);\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default ShowTorpedoObjects;\r\n","import * as THREE from \"three\";\r\nimport UiStrategy from \"../UiStrategy\";\r\nimport Line from \"../../../renderer/Line\";\r\n\r\nclass WeaponTargetingMouseoverShowsLine extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n\r\n    this.lines = [];\r\n  }\r\n\r\n  systemMouseOver({ ship, target }) {\r\n    this.show(ship, target);\r\n  }\r\n\r\n  torpedoMouseOver({ ship, target }) {\r\n    this.show(ship, target);\r\n  }\r\n\r\n  systemMouseOut() {\r\n    this.hide();\r\n  }\r\n\r\n  torpedoMouseOut() {\r\n    this.hide();\r\n  }\r\n\r\n  hide() {\r\n    this.lines.forEach(line => line.destroy());\r\n    this.lines = [];\r\n  }\r\n\r\n  show(shooter, target) {\r\n    if (!target) {\r\n      return;\r\n    }\r\n\r\n    const { scene, shipIconContainer } = this.services;\r\n\r\n    const shooterIcon = shipIconContainer.getByShip(shooter);\r\n    const targetIcon = shipIconContainer.getByShip(target);\r\n\r\n    const line = new Line(scene, {\r\n      start: { ...shooterIcon.getPosition(), z: shooterIcon.shipZ },\r\n      end: { ...targetIcon.getPosition(), z: targetIcon.shipZ },\r\n      width: 20,\r\n      color: new THREE.Color(196 / 255, 196 / 255, 39 / 255),\r\n      opacity: 0.1,\r\n      pulseAmount: 1,\r\n      dashSize: 0\r\n    });\r\n\r\n    this.lines.push(line);\r\n  }\r\n  deactivate() {\r\n    const { uiState } = this.services;\r\n    if (this.clickedShip) {\r\n      uiState.hideShipTooltip(this.clickedShip);\r\n    }\r\n\r\n    if (this.clickedEnemy) {\r\n      uiState.hideShipTooltip(this.clickedEnemy);\r\n    }\r\n  }\r\n}\r\n\r\nexport default WeaponTargetingMouseoverShowsLine;\r\n","import UiStrategy from \"./UiStrategy\";\r\n\r\nclass ShowShipDEWandCCEW extends UiStrategy {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  update(gamedata) {\r\n    super.update(gamedata);\r\n    const { shipIconContainer } = this.services;\r\n\r\n    shipIconContainer.getArray().forEach(async (icon) => {\r\n      await icon.isShipObjectLoaded;\r\n      const ship = icon.ship;\r\n      this.show(ship);\r\n    });\r\n  }\r\n\r\n  shipStateChanged(ship) {\r\n    this.show(ship);\r\n  }\r\n\r\n  //shipSystemStateChanged({ ship, system }) {}\r\n\r\n  show(ship) {\r\n    const { shipIconContainer, currentUser } = this.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n\r\n    let dew, ccew, evasion;\r\n\r\n    if (ship.player.isUsers(currentUser)) {\r\n      dew = ship.electronicWarfare.getDefensiveEw();\r\n      ccew = ship.electronicWarfare.getCcEw();\r\n      evasion = ship.movement.getEvasion();\r\n    } else {\r\n      dew = ship.electronicWarfare.inEffect.getDefensiveEw();\r\n      ccew = ship.electronicWarfare.inEffect.getCcEw();\r\n      evasion = ship.movement.getActiveEvasion();\r\n    }\r\n\r\n    icon.showEwSprite(dew, ccew, evasion);\r\n  }\r\n\r\n  deactivate() {\r\n    const { shipIconContainer } = this.services;\r\n    shipIconContainer.getArray().forEach((icon) => {\r\n      icon.hideEwSprite();\r\n    }, this);\r\n\r\n    return super.deactivate();\r\n  }\r\n}\r\n\r\nexport default ShowShipDEWandCCEW;\r\n","import PhaseStrategy from \"./PhaseStrategy\";\nimport {\n  ShowDeploymentAreas,\n  ShowShipObjects,\n  RightClickShowsShipWindow,\n  MouseOverHighlightsShip,\n  MouseOverShowsMovementPath,\n  MouseOverShowsShipTooltip,\n  SelectUndeployedShip,\n  HighlightSelectedShip,\n  DeployShipOnHexClick,\n  AllowSubmittingWhenDeploymentDone,\n  DebugDrawLineFromSelectedShip,\n  SelectedShipNavigationPath,\n  SelectedShipDeploymentMovementUi,\n  ShipClickSelectsShip\n} from \"../../ui/uiStrategy\";\n\nclass DeploymentPhaseStrategy extends PhaseStrategy {\n  constructor(services) {\n    super(services);\n\n    this.strategies = [\n      new ShipClickSelectsShip(),\n      new RightClickShowsShipWindow(),\n      new ShowDeploymentAreas(),\n      new MouseOverHighlightsShip(),\n      new MouseOverShowsMovementPath(),\n      new ShowShipObjects(),\n      new MouseOverShowsShipTooltip(),\n      new SelectUndeployedShip(),\n      new HighlightSelectedShip(),\n      new DeployShipOnHexClick(),\n      new AllowSubmittingWhenDeploymentDone(),\n      //new SelectedShipNavigationPath(),\n      new SelectedShipDeploymentMovementUi()\n    ];\n  }\n\n  commitTurn(gameConnector) {\n    gameConnector.commitDeployment(this.gameData);\n  }\n}\n\nexport default DeploymentPhaseStrategy;\n","import PhaseStrategy from \"./PhaseStrategy\";\n\nclass ReplayPhaseStrategy extends PhaseStrategy {}\n\nexport default ReplayPhaseStrategy;\n","import PhaseStrategy from \"./PhaseStrategy\";\n\nimport {\n  ShowShipObjects,\n  RightClickShowsShipWindow,\n  MouseOverHighlightsShip,\n  MouseOverShowsMovementPath,\n  MouseOverShowsShipTooltip,\n  ShowWaitingStatus,\n  SystemClickShowsSystemMenu,\n  WeaponArcsOnSystemMouseOver,\n  UnderHexForShips,\n  ShowMapIcons,\n} from \"../../ui/uiStrategy\";\n\nclass WaitingPhaseStrategy extends PhaseStrategy {\n  constructor(services) {\n    super(services);\n\n    this.strategies = [\n      new ShowWaitingStatus(),\n      new RightClickShowsShipWindow(),\n      new MouseOverHighlightsShip(),\n      new MouseOverShowsMovementPath(),\n      new ShowShipObjects(),\n      new MouseOverShowsShipTooltip(),\n      new SystemClickShowsSystemMenu(),\n      new WeaponArcsOnSystemMouseOver(),\n      new UnderHexForShips(),\n      new ShowMapIcons(),\n    ];\n  }\n}\n\nexport default WaitingPhaseStrategy;\n","import PhaseStrategy from \"./PhaseStrategy\";\nimport {\n  ShowShipObjects,\n  MouseOverHighlightsShip,\n  MouseOverShowsShipTooltip,\n  HighlightSelectedShip,\n  SelectedShipMovementUi,\n  SelectFirstActiveShip,\n  AllShipsMovementPaths,\n  AllowSubmittingOnValidGameState,\n  GameShipTooltipMenuStrategy,\n  ShowUiModeButtons,\n  OwnedShipEw,\n  ShipClickSelectsShip,\n  CurrentEW,\n  WeaponArcsOnSystemMouseOver,\n  SelectWeaponOnSystemClick,\n  SelectedShipSystemList,\n  GameSystemInfoMenuStrategy,\n  SystemClickShowsSystemMenu,\n  SelectedShipEwList,\n  UnderHexForShips,\n  ShowMapIcons,\n  ShowShipBadges,\n  ShowTorpedoObjects,\n  WeaponTargetingMouseoverShowsLine,\n  ShowShipDEWandCCEW\n} from \"../../ui/uiStrategy\";\n\nclass GamePhaseStrategy extends PhaseStrategy {\n  constructor(services) {\n    super(services);\n\n    this.strategies = [\n      new WeaponTargetingMouseoverShowsLine(),\n      new ShipClickSelectsShip(),\n      new MouseOverHighlightsShip(),\n      new ShowShipObjects(),\n      new MouseOverShowsShipTooltip(),\n      new SelectFirstActiveShip(),\n      new HighlightSelectedShip(),\n      new SelectedShipMovementUi(),\n      new AllShipsMovementPaths(),\n      new AllowSubmittingOnValidGameState(),\n      new GameShipTooltipMenuStrategy(),\n      new ShowUiModeButtons(),\n      new OwnedShipEw(),\n      new CurrentEW(),\n      new WeaponArcsOnSystemMouseOver(),\n      new SelectWeaponOnSystemClick(),\n      new SelectedShipSystemList(),\n      new GameSystemInfoMenuStrategy(),\n      new SystemClickShowsSystemMenu(),\n      new SelectedShipEwList(),\n      new UnderHexForShips(),\n      new ShowMapIcons(),\n      new ShowShipBadges(),\n      new ShowTorpedoObjects(),\n      new ShowShipDEWandCCEW()\n    ];\n  }\n\n  commitTurn(gameConnector) {\n    gameConnector.commitTurn(this.gameData);\n  }\n}\n\nexport default GamePhaseStrategy;\n","import * as THREE from \"three\";\r\nimport Animation from \"./Animation\";\r\nimport { hexFacingToAngle } from \"../../../../model/utils/math.mjs\";\r\n\r\nclass ShipVelocityAnimation extends Animation {\r\n  constructor(shipIcon, endMove, start, end) {\r\n    super();\r\n\r\n    this.shipIcon = shipIcon;\r\n    this.endMove = endMove;\r\n\r\n    this.start = start;\r\n    this.end = end;\r\n\r\n    this.duration = end - start;\r\n\r\n    this.positionCurve = this.buildPositionCurve(\r\n      endMove.position,\r\n      endMove.position.add(endMove.velocity)\r\n    );\r\n\r\n    Animation.call(this);\r\n  }\r\n\r\n  deactivate() {}\r\n\r\n  update(gameData) {}\r\n\r\n  cleanUp() {}\r\n\r\n  getPositionAt(time) {\r\n    const turnDone = this.getMovementTurnDone({ total: time });\r\n\r\n    if (turnDone === -1) {\r\n      throw new Error(\"Don't ask ShipVelocityAnimation\");\r\n    }\r\n\r\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\r\n\r\n    return {\r\n      facing: this.endMove.facing,\r\n      position: this.positionCurve.getPoint(percentDone)\r\n    };\r\n  }\r\n\r\n  getMovementTurnDone({ total }) {\r\n    if (total < this.start) {\r\n      return -1;\r\n    }\r\n\r\n    if (total > this.end) {\r\n      return 1;\r\n    }\r\n    const time = total - this.start;\r\n    return time / this.duration;\r\n  }\r\n\r\n  render(payload) {\r\n    const turnDone = this.getMovementTurnDone(payload);\r\n\r\n    if (turnDone === -1) {\r\n      return;\r\n    }\r\n\r\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\r\n    this.shipIcon.setPosition(this.positionCurve.getPoint(percentDone));\r\n    this.shipIcon.setFacing(-hexFacingToAngle(this.endMove.facing));\r\n  }\r\n\r\n  buildPositionCurve(start, end) {\r\n    const point1 = start.roundToHexCenter();\r\n    const control1 = start.roundToHexCenter();\r\n    const control2 = end.roundToHexCenter();\r\n    const point2 = end.roundToHexCenter();\r\n\r\n    return new THREE.CubicBezierCurve3(\r\n      new THREE.Vector3(point1.x, point1.y, point1.z),\r\n      new THREE.Vector3(control1.x, control1.y, control1.z),\r\n      new THREE.Vector3(control2.x, control2.y, control2.z),\r\n      new THREE.Vector3(point2.x, point2.y, point2.z)\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShipVelocityAnimation;\r\n","import { ShipMovementAnimation } from \"../../../animation\";\r\nimport ShipVelocityAnimation from \"../../../animation/ShipVelocityAnimation\";\r\nimport Structure from \"../../../../../../model/unit/system/structure/Structure.mjs\";\r\n\r\nclass ReplayContext {\r\n  constructor(phaseStrategy) {\r\n    this.firingDuration = 0;\r\n    this.movementDuration = 0;\r\n    this.torpedoAttackDuration = 0;\r\n    this.destroyedShipsDuration = 0;\r\n    this.phaseStrategy = phaseStrategy;\r\n    this.systemsDestroyed = [];\r\n  }\r\n\r\n  getDestroyedShipsStart() {\r\n    return (\r\n      this.firingDuration +\r\n      this.torpedoAttackDuration +\r\n      this.movementDuration +\r\n      this.destroyedShipsDuration\r\n    );\r\n  }\r\n\r\n  addDestroyedShipsDuration(duration) {\r\n    this.destroyedShipsDuration += duration;\r\n  }\r\n\r\n  getDestroyedShipsDuration() {\r\n    return this.destroyedShipsDuration;\r\n  }\r\n\r\n  getMovementStart() {\r\n    return this.firingDuration + this.torpedoAttackDuration;\r\n  }\r\n\r\n  setMovementDuration(duration) {\r\n    this.movementDuration = duration;\r\n  }\r\n\r\n  getNextFireStart() {\r\n    return this.firingDuration;\r\n  }\r\n\r\n  addFireAnimationDuration(duration) {\r\n    this.firingDuration += duration;\r\n  }\r\n\r\n  getNextTorpedoAttackStart() {\r\n    return this.movementDuration + this.firingDuration;\r\n  }\r\n\r\n  addTorpedoAttackAnimationDuration(duration) {\r\n    this.torpedoAttackDuration += duration;\r\n  }\r\n\r\n  resumeReplayRewind() {\r\n    this.phaseStrategy.unpauseAndRewindAnimation();\r\n  }\r\n\r\n  pauseReplay() {\r\n    this.phaseStrategy.pauseAnimation();\r\n  }\r\n\r\n  resumeReplay() {\r\n    this.phaseStrategy.unpauseAnimation();\r\n  }\r\n\r\n  rewindToFiring() {\r\n    this.phaseStrategy.setAnimationTime(\r\n      this.firingDuration + this.torpedoAttackDuration + this.movementDuration\r\n    );\r\n  }\r\n\r\n  rewindToMovement() {}\r\n\r\n  getTurnLength() {\r\n    return (\r\n      this.firingDuration +\r\n      this.torpedoAttackDuration +\r\n      this.movementDuration +\r\n      this.destroyedShipsDuration\r\n    );\r\n  }\r\n\r\n  noteDestroyedSystem(ship, time, systems) {\r\n    this.systemsDestroyed.push({ ship, time, systems });\r\n  }\r\n\r\n  getDestroyedStructuresByShip(ship) {\r\n    return this.systemsDestroyed\r\n      .filter(({ ship: systemShip }) => ship === systemShip)\r\n      .filter(({ systems }) =>\r\n        systems.some((system) => system instanceof Structure)\r\n      );\r\n  }\r\n}\r\n\r\nexport default ReplayContext;\r\n","import BoltEffect from \"../../../animation/effect/BoltEffect\";\nimport ExplosionEffect from \"../../../animation/effect/ExplosionEffect\";\n\nconst boltEffect = new BoltEffect();\n\nclass ShipWeaponAnimationService {\n  constructor(getRandom, particleEmitterContainer) {\n    this.getRandom = getRandom;\n    this.particleEmitterContainer = particleEmitterContainer;\n  }\n\n  getBoltEffect(\n    startTime,\n    startPosition,\n    endPosition,\n    speed,\n    fade,\n    duration,\n    args,\n    context\n  ) {\n    return boltEffect.create(\n      startTime,\n      startPosition,\n      endPosition,\n      speed,\n      fade,\n      duration,\n      args,\n      this.getRandom,\n      this.particleEmitterContainer,\n      context\n    );\n  }\n\n  getDamageExplosion(size, type = \"glow\", endPosition, startTime, context) {\n    return new ExplosionEffect(\n      this.particleEmitterContainer,\n      this.getRandom,\n      {\n        position: endPosition.clone(),\n        time: startTime,\n        duration: 250 + this.getRandom() * 250,\n        type,\n        size: size || 10\n      },\n      context\n    );\n  }\n}\n\nexport default ShipWeaponAnimationService;\n","class CombatLogShipMovement {\r\n  constructor(shipId) {\r\n    this.shipId = shipId;\r\n    this.replayOrder = 20;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      shipId: this.shipId,\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.shipId = data.shipId;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogShipMovement;\r\n","import { Animation } from \".\";\nimport * as THREE from \"three\";\nimport { getPointBetween } from \"../../../../model/utils/math.mjs\";\n\nclass CameraPositionAnimation extends Animation {\n  constructor(position, time, endTime, gameCamera) {\n    super();\n    Animation.call(this);\n    this.time = time;\n    this.position = position;\n    this.lastTime = null;\n    this.endTime = 0;\n\n    this.gameCamera = gameCamera;\n\n    this.duration = 1000;\n\n    if (endTime === undefined) {\n      this.endTime = 300;\n    }\n\n    this.startPosition = null;\n\n    this.curve = new THREE.CubicBezierCurve(\n      new THREE.Vector2(0, 0),\n      new THREE.Vector2(0.5, 0.0),\n      new THREE.Vector2(0.5, 1),\n      new THREE.Vector2(1, 1)\n    );\n  }\n\n  render({ now, total, last, delta, zoom, back, paused }) {\n    this.smoothMove(now, total, last, delta, zoom, back);\n  }\n\n  smoothMove(now, total, last, delta, zoom, back, paused) {\n    if (back) {\n      return;\n    }\n\n    if (total > this.time && total < this.time + this.duration && !paused) {\n      if (this.startPosition === null) {\n        this.startPosition = this.gameCamera.getLookAtPosition();\n      }\n      var done = 1 - (this.time + this.duration - total) / this.duration;\n      var point = this.curve.getPoint(done).y;\n\n      var position = getPointBetween(\n        this.startPosition,\n        this.position,\n        point,\n        true\n      );\n\n      this.doMove(position);\n    } else {\n      this.startPosition = null;\n    }\n  }\n\n  instantMove(now, total, last, delta, zoom, back) {\n    if (back) {\n      return;\n    }\n\n    if (\n      this.lastTime !== null &&\n      this.lastTime < this.time &&\n      total > this.time\n    ) {\n      this.doMove(this.position);\n    }\n\n    this.lastTime = total;\n  }\n\n  doMove(position) {\n    this.gameCamera.setByLookAtPosition(position);\n  }\n}\n\nexport default CameraPositionAnimation;\n","class WeaponHitChance {\r\n  constructor(data) {\r\n    this.deserialize(data);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      baseToHit: this.baseToHit,\r\n      fireControl: this.fireControl,\r\n      dew: this.dew,\r\n      oew: this.oew,\r\n      distance: this.distance,\r\n      evasion: this.evasion,\r\n      rangeModifier: this.rangeModifier,\r\n      result: this.result,\r\n      absoluteResult: this.absoluteResult,\r\n      outOfRange: this.outOfRange,\r\n      rollingPenalty: this.rollingPenalty,\r\n      noLockPenalty: this.noLockPenalty,\r\n      ownEvasionPenalty: this.ownEvasionPenalty,\r\n      evasionPenalty: this.evasionPenalty,\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.baseToHit = data.baseToHit || 0;\r\n    this.fireControl = data.fireControl || 0;\r\n    this.dew = data.dew || 0;\r\n    this.oew = data.oew || 0;\r\n    this.distance = data.distance || 0;\r\n    this.rangeModifier = data.rangeModifier || 0;\r\n    this.result = data.result || 0;\r\n    this.absoluteResult = data.absoluteResult || 0;\r\n    this.outOfRange = data.outOfRange || false;\r\n    this.evasion = data.evasion || 0;\r\n    this.rollingPenalty = data.rollingPenalty || 0;\r\n    this.noLockPenalty = data.noLockPenalty || 0;\r\n    this.ownEvasionPenalty = data.ownEvasionPenalty || 0;\r\n    this.evasionPenalty = data.evasionPenalty || 0;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default WeaponHitChance;\r\n","import WeaponHitChance from \"../weapon/WeaponHitChance.mjs\";\r\n\r\nclass CombatLogWeaponFireHitResult {\r\n  constructor(result, hitChance, hitRoll) {\r\n    this.result = result;\r\n    this.hitChance = hitChance;\r\n    this.hitRoll = hitRoll;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      result: this.result,\r\n      hitChance: this.hitChance.serialize(),\r\n      hitRoll: this.hitRoll\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.result = data.result || false;\r\n    this.hitChance = new WeaponHitChance().deserialize(data.hitChance);\r\n    this.hitRoll = data.hitRoll || 1;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogWeaponFireHitResult;\r\n","import CombatLogDamageEntry from \"./CombatLogDamageEntry.mjs\";\r\nimport CombatLogWeaponFireHitResult from \"./CombatLogWeaponFireHitResult.mjs\";\r\n\r\nclass CombatLogWeaponFire {\r\n  constructor(fireOrderId, targetId, shooterId, ammo) {\r\n    this.fireOrderId = fireOrderId;\r\n    this.targetId = targetId;\r\n    this.shooterId = shooterId;\r\n    this.damages = [];\r\n    this.notes = [];\r\n    this.hitResult = null;\r\n    this.ammoName = ammo ? ammo.getShortDisplayName() : null;\r\n  }\r\n\r\n  addNote(note) {\r\n    this.notes.push(note);\r\n  }\r\n\r\n  addDamage(damageEntry) {\r\n    this.damages.push(damageEntry);\r\n  }\r\n\r\n  addHitResult(hitResult) {\r\n    this.hitResult = hitResult;\r\n  }\r\n\r\n  setShots(shotsHit, totalShots) {\r\n    this.shotsHit = shotsHit;\r\n    this.totalShots = totalShots;\r\n  }\r\n\r\n  causedDamage() {\r\n    return this.damages.length > 0;\r\n  }\r\n\r\n  getDamages(target) {\r\n    return this.damages.reduce((all, current) => {\r\n      return [\r\n        ...all,\r\n        ...current.entries.reduce((all, damageEntry) => {\r\n          const system = target.systems.getSystemById(damageEntry.systemId);\r\n\r\n          return [\r\n            ...all,\r\n            ...damageEntry.damageIds.map(id => system.damage.getDamageById(id))\r\n          ];\r\n        }, [])\r\n      ];\r\n    }, []);\r\n  }\r\n\r\n  getDestroyedSystems(target) {\r\n    return this.getDamages(target)\r\n      .filter(damage => damage.destroyedSystem)\r\n      .map(damage => damage.system);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      fireOrderId: this.fireOrderId,\r\n      targetId: this.targetId,\r\n      shooterId: this.shooterId,\r\n      damages: this.damages.map(damage => damage.serialize()),\r\n      notes: this.notes,\r\n      hitResult: this.hitResult ? this.hitResult.serialize() : null,\r\n      shotsHit: this.shotsHit,\r\n      totalShots: this.totalShots,\r\n      ammoName: this.ammoName\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.fireOrderId = data.fireOrderId;\r\n    this.targetId = data.targetId;\r\n    this.shooterId = data.shooterId;\r\n    this.damages = data.damages.map(damage =>\r\n      new CombatLogDamageEntry().deserialize(damage)\r\n    );\r\n\r\n    this.notes = data.notes || [];\r\n\r\n    this.hitResult = data.hitResult\r\n      ? new CombatLogWeaponFireHitResult().deserialize(data.hitResult)\r\n      : null;\r\n\r\n    this.shotsHit = data.shotsHit || 0;\r\n    this.totalShots = data.totalShots || 0;\r\n\r\n    this.ammoName = data.ammoName || null;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogWeaponFire;\r\n","import CombatLogWeaponFire from \"./CombatLogWeaponFire.mjs\";\r\n\r\nclass CombatLogGroupedWeaponFire {\r\n  constructor(targetId) {\r\n    this.targetId = targetId;\r\n    this.entries = [];\r\n    this.replayOrder = 5;\r\n  }\r\n\r\n  addEntry(fire) {\r\n    this.entries.push(fire);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      entries: this.entries.map(entry => entry.serialize())\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.targetId = data.targetId;\r\n    this.entries = data.entries\r\n      ? data.entries.map(entry => new CombatLogWeaponFire().deserialize(entry))\r\n      : [];\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogGroupedWeaponFire;\r\n","import TextSprite from \"../renderer/sprite/TextSprite\";\nimport Animation from \"./Animation\";\nimport coordinateConverter from \"../../../../model/utils/CoordinateConverter.mjs\";\n\nconst TEXTURE_SIZE = 256;\n\nconst getKey = (position, time) => time + \"-\" + position.x + \"-\" + position.y;\n\nconst getSprite = (name, position, scene) => {\n  let sprite = null;\n\n  if (name.structure) {\n    sprite = new TextSprite(\n      name.toUpperCase(),\n      \"rgba(255, 100, 45, 0.7)\",\n      position.z + 30,\n      {\n        fontSize: \"24px\",\n        size: 512\n      }\n    );\n  } else {\n    sprite = new TextSprite(\n      name.toUpperCase(),\n      \"rgba(255, 255, 255, 0.7)\",\n      position.z + 30,\n      {\n        fontSize: \"18px\",\n        size: 512\n      }\n    );\n  }\n\n  sprite.setPosition(position);\n  sprite.setOpacity(0);\n  scene.add(sprite.mesh);\n\n  return sprite;\n};\n\nconst changeTimeIfNeccessary = (position, time, texts) => {\n  const inSameHex = getInSameHex(position, texts);\n\n  if (inSameHex.length === 0) {\n    return time;\n  }\n\n  while (isTooClose(time, inSameHex)) {\n    time += 200;\n  }\n\n  return time;\n};\n\nconst getInSameHex = (position, texts) => {\n  const gamePosition = coordinateConverter.fromGameToHex(position);\n\n  return texts.filter(text =>\n    coordinateConverter.fromGameToHex(text.position).equals(gamePosition)\n  );\n};\n\nconst isTooClose = (time, texts) => {\n  return texts.some(text => text.time - time < 200 && text.time - time > -200);\n};\n\nclass SystemDestroyedTextAnimation extends Animation {\n  constructor(scene) {\n    super();\n\n    this.scene = scene;\n\n    this.duration = 1000;\n    this.fadeOutSpeed = 2000;\n    this.velocity = 0.1;\n    this.destroyedTexts = [];\n  }\n\n  deactivate() {\n    this.destroyedTexts.forEach(destroyedText => {\n      this.scene.remove(destroyedText.sprite.mesh);\n      destroyedText.sprite.destroy();\n    }, this);\n\n    this.destroyedTexts = [];\n  }\n\n  add(position, names, time) {\n    names = [].concat(names);\n    names.filter(Boolean).forEach(name => {\n      this.destroyedTexts.push({\n        time: changeTimeIfNeccessary(position, time, this.destroyedTexts),\n        position,\n        sprite: getSprite(name, position, this.scene)\n      });\n    }, this);\n  }\n\n  render({ now, total, last, delta, zoom }) {\n    this.destroyedTexts.forEach(text => {\n      const time = text.time;\n      const sprite = text.sprite;\n\n      if (total < time || total > time + this.duration + this.fadeOutSpeed) {\n        sprite.setOpacity(0);\n        return;\n      }\n\n      sprite.setScale(zoom, zoom);\n      const ellapsedTime = total - time;\n      const newPos = {\n        ...text.position,\n        y: text.position.y + this.velocity * zoom * ellapsedTime\n      };\n      sprite.setPosition(newPos);\n\n      const fadeTime = total - (time + this.duration);\n\n      if (fadeTime < 0) {\n        sprite.setOpacity(1);\n      } else {\n        const opacity = 1 - fadeTime / this.fadeOutSpeed;\n        sprite.setOpacity(opacity);\n      }\n    }, this);\n  }\n\n  getDuration() {\n    return 0;\n  }\n}\n\nexport default SystemDestroyedTextAnimation;\n","import * as THREE from \"three\";\r\nimport Animation from \"./Animation\";\r\nimport { hexFacingToAngle } from \"../../../../model/utils/math.mjs\";\r\nimport { getCompassHeadingOfPoint } from \"../../../../model/utils/math.mjs\";\r\nimport Vector from \"../../../../model/utils/Vector.mjs\";\r\nimport { getSeededRandomGenerator } from \"../../../../model/utils/math.mjs\";\r\n\r\nclass TorpedoMovementAnimation extends Animation {\r\n  constructor(\r\n    icon,\r\n    startPosition,\r\n    endPosition,\r\n    start,\r\n    end,\r\n    launch = false,\r\n    interceptTime = null,\r\n    impact = false\r\n  ) {\r\n    super();\r\n\r\n    this.icon = icon;\r\n\r\n    this.start = start;\r\n    this.end = end;\r\n    this.duration = end - start;\r\n\r\n    this.startPosition = startPosition;\r\n    this.endPosition = endPosition;\r\n    this.interceptTime = interceptTime;\r\n\r\n    this.launch = launch;\r\n    this.impact = impact;\r\n\r\n    this.positionCurve = this.buildPositionCurve(startPosition, endPosition);\r\n\r\n    const getRandom = getSeededRandomGenerator(icon.torpedoFlight.id);\r\n    this.variance = new Vector(getRandom() * 30 - 15, getRandom() * 30 - 15);\r\n\r\n    Animation.call(this);\r\n  }\r\n\r\n  deactivate() {\r\n    this.icon.hide();\r\n  }\r\n\r\n  update(gameData) {}\r\n\r\n  cleanUp() {}\r\n\r\n  getPositionAt(time) {\r\n    const turnDone = this.getMovementTurnDone({ total: time });\r\n\r\n    if (turnDone === -1) {\r\n      throw new Error(\"Don't ask ShipVelocityAnimation\");\r\n    }\r\n\r\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\r\n\r\n    return {\r\n      facing: this.endMove.facing,\r\n      position: this.positionCurve.getPoint(percentDone)\r\n    };\r\n  }\r\n\r\n  getInterceptPosition() {\r\n    const turnDone = this.getMovementTurnDone({ total: this.interceptTime });\r\n\r\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\r\n    const position = this.positionCurve.getPoint(percentDone);\r\n\r\n    return new Vector(position);\r\n  }\r\n\r\n  getMovementTurnDone({ total }) {\r\n    if (total < this.start) {\r\n      return 0;\r\n    }\r\n\r\n    if (total > this.end) {\r\n      return 1;\r\n    }\r\n    const time = total - this.start;\r\n    return time / this.duration;\r\n  }\r\n\r\n  render({ total }) {\r\n    const turnDone = this.getMovementTurnDone({ total });\r\n\r\n    if (this.interceptTime !== null && total > this.interceptTime) {\r\n      this.icon.hide();\r\n      return;\r\n    }\r\n\r\n    if (turnDone === 0 && this.launch) {\r\n      this.icon.hide();\r\n      return;\r\n    }\r\n\r\n    const percentDone = turnDone < 1 ? turnDone % 1 : 1;\r\n\r\n    if (turnDone === 1 && this.impact) {\r\n      this.icon.hide();\r\n      return;\r\n    }\r\n\r\n    this.icon.show();\r\n    const position = this.positionCurve.getPoint(percentDone);\r\n\r\n    this.icon.setPosition({\r\n      x: position.x + this.variance.x,\r\n      y: position.y + this.variance.y,\r\n      z: position.z\r\n    });\r\n    this.icon.setFacing(\r\n      -getCompassHeadingOfPoint(this.startPosition, this.endPosition)\r\n    );\r\n  }\r\n\r\n  buildPositionCurve(start, end) {\r\n    /*\r\n    const point1 = start.roundToHexCenter();\r\n    const control1 = start.roundToHexCenter();\r\n    const control2 = end.roundToHexCenter();\r\n    const point2 = end.roundToHexCenter();\r\n    */\r\n\r\n    const point1 = start;\r\n    const control1 = start;\r\n    const control2 = end;\r\n    const point2 = end;\r\n\r\n    if (!this.impact) {\r\n      return new THREE.CubicBezierCurve3(\r\n        new THREE.Vector3(point1.x, point1.y, point1.z),\r\n        new THREE.Vector3(control1.x, control1.y, control1.z),\r\n        new THREE.Vector3(control2.x, control2.y, control2.z),\r\n        new THREE.Vector3(point2.x, point2.y, point2.z)\r\n      );\r\n    }\r\n\r\n    return new THREE.LineCurve3(\r\n      new THREE.Vector3(point1.x, point1.y, point1.z),\r\n      new THREE.Vector3(point2.x, point2.y, point2.z)\r\n    );\r\n  }\r\n}\r\n\r\nexport default TorpedoMovementAnimation;\r\n","import CombatLogDamageEntry from \"./CombatLogDamageEntry.mjs\";\r\n\r\nclass CombatLogTorpedoAttack {\r\n  constructor(torpedoFlightId, targetId) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n    this.targetId = targetId;\r\n    this.damages = [];\r\n    this.notes = [];\r\n  }\r\n\r\n  addNote(note) {\r\n    this.notes.push(note);\r\n  }\r\n\r\n  addDamage(damageEntry) {\r\n    this.damages.push(damageEntry);\r\n  }\r\n\r\n  getDamages(target) {\r\n    return this.damages.reduce((all, current) => {\r\n      return [\r\n        ...all,\r\n        ...current.entries.reduce((all, damageEntry) => {\r\n          const system = target.systems.getSystemById(damageEntry.systemId);\r\n\r\n          return [\r\n            ...all,\r\n            ...damageEntry.damageIds.map(id => system.damage.getDamageById(id))\r\n          ];\r\n        }, [])\r\n      ];\r\n    }, []);\r\n  }\r\n\r\n  getDestroyedSystems(target) {\r\n    return this.getDamages(target)\r\n      .filter(damage => damage.destroyedSystem)\r\n      .map(damage => damage.system);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId,\r\n      damages: this.damages.map(damage => damage.serialize()),\r\n      notes: this.notes,\r\n      targetId: this.targetId\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    this.targetId = data.targetId;\r\n    this.damages = data.damages.map(damage =>\r\n      new CombatLogDamageEntry().deserialize(damage)\r\n    );\r\n\r\n    this.notes = data.notes || [];\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoAttack;\r\n","import CombatLogTorpedoAttack from \"./CombatLogTorpedoAttack.mjs\";\r\n\r\nclass CombatLogGroupedTorpedoAttack {\r\n  constructor(targetId) {\r\n    this.targetId = targetId;\r\n    this.entries = [];\r\n    this.replayOrder = 10;\r\n  }\r\n\r\n  addEntry(attack) {\r\n    this.entries.push(attack);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      entries: this.entries.map((entry) => entry.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.targetId = data.targetId;\r\n    this.entries = data.entries\r\n      ? data.entries.map((entry) =>\r\n          new CombatLogTorpedoAttack().deserialize(entry)\r\n        )\r\n      : [];\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogGroupedTorpedoAttack;\r\n","import * as THREE from \"three\";\r\nimport ExplosionEffect from \"../effect/ExplosionEffect\";\r\nimport Animation from \"../Animation\";\r\nimport ShipWeaponAnimation from \"../ShipWeaponAnimation/ShipWeaponAnimation\";\r\n\r\nclass TorpedoExplosionHE extends ShipWeaponAnimation {\r\n  constructor(\r\n    getPosition,\r\n    time,\r\n    particleEmitterContainer,\r\n    getRandom,\r\n    torpedo,\r\n    targetIcon\r\n  ) {\r\n    super({ getRandom, particleEmitterContainer });\r\n    this.animations = [];\r\n\r\n    const { position: targetPosition, facing } = getPosition(targetIcon.ship);\r\n    const position = this.getRandomLocationOnShip(targetIcon, facing).add(\r\n      targetPosition\r\n    );\r\n\r\n    const explosionSize = torpedo.visuals.explosionSize;\r\n\r\n    this.animations.push(\r\n      new ExplosionEffect(\r\n        particleEmitterContainer,\r\n        getRandom,\r\n        {\r\n          position,\r\n          time: time,\r\n          duration: 250 + getRandom() * 250,\r\n          type: \"gas\",\r\n          size: getRandom() * (explosionSize * 0.3) + explosionSize,\r\n          color: new THREE.Color(51 / 255, 163 / 255, 255 / 255),\r\n        },\r\n        this\r\n      )\r\n    );\r\n\r\n    this.animations.push(\r\n      new ExplosionEffect(\r\n        particleEmitterContainer,\r\n        getRandom,\r\n        {\r\n          position,\r\n          time: time,\r\n          duration: 250 + getRandom() * 250,\r\n          type: \"glow\",\r\n          size: getRandom() * (explosionSize * 0.2) + explosionSize * 0.4,\r\n        },\r\n        this\r\n      )\r\n    );\r\n  }\r\n\r\n  deactivate() {\r\n    this.particleEmitterContainer.release(this);\r\n\r\n    return super.deactivate();\r\n  }\r\n}\r\n\r\nexport default TorpedoExplosionHE;\r\n","import * as THREE from \"three\";\r\nimport ExplosionEffect from \"../effect/ExplosionEffect\";\r\nimport BoltEffect from \"../effect/BoltEffect\";\r\nimport ShipWeaponAnimation from \"../ShipWeaponAnimation/ShipWeaponAnimation\";\r\nimport { TEXTURE_GLOW } from \"../particle/BaseParticle\";\r\n\r\nclass TorpedoExplosionMSV extends ShipWeaponAnimation {\r\n  constructor(\r\n    position,\r\n    startTime,\r\n    time,\r\n    particleEmitterContainer,\r\n    getRandom,\r\n    torpedo,\r\n    damages,\r\n    targetIcon,\r\n    getPosition,\r\n    msvPosition,\r\n    speed = 0.2\r\n  ) {\r\n    super({ getRandom, particleEmitterContainer });\r\n    this.particleEmitterContainer = particleEmitterContainer;\r\n    this.animations = [];\r\n\r\n    const amount = damages.length;\r\n\r\n    const color = new THREE.Color(\r\n      torpedo.visuals.engineColor[0] * 1.5,\r\n      torpedo.visuals.engineColor[1] * 1.5,\r\n      torpedo.visuals.engineColor[2] * 1.5\r\n    );\r\n\r\n    const boltArgs = {\r\n      color: [color.r, color.g, color.b],\r\n      size: 3,\r\n      length: 4,\r\n      coreOpacity: 0.01,\r\n    };\r\n\r\n    const boltEffect = new BoltEffect();\r\n\r\n    const { position: targetPosition, facing } = getPosition(targetIcon.ship);\r\n    damages.forEach((damage) => {\r\n      const system = targetIcon.ship.systems.getSystemById(\r\n        damage.entries[0].systemId\r\n      );\r\n\r\n      const explosionPosition = this.getLocationForSystemOrRandomLocationOnSection(\r\n        system,\r\n        targetIcon,\r\n        facing\r\n      ).add(targetPosition);\r\n\r\n      const duration = msvPosition.distanceTo(explosionPosition) / speed;\r\n\r\n      boltEffect.create(\r\n        startTime,\r\n        msvPosition,\r\n        explosionPosition.clone(),\r\n        speed,\r\n        200,\r\n        duration,\r\n        boltArgs,\r\n        getRandom,\r\n        particleEmitterContainer,\r\n        this\r\n      );\r\n\r\n      this.animations.push(\r\n        new ExplosionEffect(\r\n          particleEmitterContainer,\r\n          getRandom,\r\n          {\r\n            position: explosionPosition,\r\n            time: startTime + duration,\r\n            duration: 100 + getRandom() * 250,\r\n            type: \"gas\",\r\n            size: 8,\r\n            opacity: 0.25,\r\n          },\r\n          this\r\n        )\r\n      );\r\n    });\r\n\r\n    let missAmount = torpedo.damageStrategy.numberOfShots - amount;\r\n    if (amount < 0) {\r\n      amount = 0;\r\n    }\r\n\r\n    for (let i = 0; i < missAmount; i++) {\r\n      const explosionPosition = this.getRandomLocationOnShip(\r\n        targetIcon,\r\n        facing\r\n      ).add(targetPosition);\r\n\r\n      boltEffect.create(\r\n        startTime,\r\n        msvPosition,\r\n        explosionPosition,\r\n        speed,\r\n        1000,\r\n        time - startTime + getRandom() * 1000 + 500,\r\n        boltArgs,\r\n        getRandom,\r\n        particleEmitterContainer,\r\n        this\r\n      );\r\n    }\r\n  }\r\n\r\n  deactivate() {\r\n    this.particleEmitterContainer.release(this);\r\n\r\n    return super.deactivate();\r\n  }\r\n}\r\n\r\nexport default TorpedoExplosionMSV;\r\n","class CombatLogTorpedoLaunch {\r\n  constructor(torpedoFlightId) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n    this.replayOrder = 15;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoLaunch;\r\n","import * as THREE from \"three\";\r\nimport {\r\n  effectSpriteFragmentShader,\r\n  effectSpriteVertexShader,\r\n} from \"../shader\";\r\nimport {\r\n  degreeToRadian,\r\n  radianToDegree,\r\n} from \"../../../../../model/utils/math\";\r\n\r\nexport const TEXTURE_GAS = 0;\r\nexport const TEXTURE_BOLT = 1;\r\nexport const TEXTURE_GLOW = 2;\r\nexport const TEXTURE_RING = 3;\r\nexport const TEXTURE_STARLINE = 4;\r\nexport const TEXTURE_FILLED_RING = 5;\r\n\r\nconst textureLoader = new THREE.TextureLoader();\r\nconst texture = textureLoader.load(\"/img/effect/effectTextures1024.png\");\r\n\r\nclass EffecSprite {\r\n  constructor(scene, args = {}) {\r\n    this.activationTime = args.activationTime || 0;\r\n    this.fadeInDuration = args.fadeInDuration || 0;\r\n    this.fadeOutDuration = args.fadeOutDuration || 0;\r\n    this.fadeOutTime = args.fadeOutTime || null;\r\n    this.blending = args.blending || THREE.AdditiveBlending;\r\n    this.scale = args.scale || { width: 1, height: 1 };\r\n    this.position = args.position.toThree() || THREE.Vector3(0, 0, 0);\r\n    this.textureNumber = args.texture || 0;\r\n    this.color = args.color || new THREE.Color(1, 1, 1);\r\n    this.opacity = args.opacity || 1.0;\r\n    this.scaleChange = args.scaleChange || null;\r\n\r\n    this.mesh = null;\r\n    this.scene = scene;\r\n\r\n    this.uniforms = {\r\n      texture: {\r\n        type: \"t\",\r\n        value: texture,\r\n      },\r\n      overlayColor: { type: \"v3\", value: this.color },\r\n      opacity: { type: \"f\", value: 1.0 },\r\n      textureNumber: { type: \"f\", value: this.textureNumber },\r\n    };\r\n\r\n    this.mesh = this.create();\r\n    this.setPosition(this.position);\r\n    this.setScale(this.scale.width, this.scale.height);\r\n  }\r\n\r\n  getOpacity(total) {\r\n    if (\r\n      this.fadeOutTime !== null &&\r\n      total >= this.activationTime + this.fadeOutTime + this.fadeOutDuration\r\n    ) {\r\n      return 0.0;\r\n    }\r\n\r\n    if (\r\n      this.fadeOutTime !== null &&\r\n      total > this.activationTime + this.fadeOutTime &&\r\n      total < this.activationTime + this.fadeOutTime + this.fadeOutDuration\r\n    ) {\r\n      return (\r\n        (this.activationTime +\r\n          this.fadeOutTime +\r\n          this.fadeOutDuration -\r\n          total) /\r\n        this.fadeOutDuration\r\n      );\r\n    }\r\n\r\n    if (total > this.activationTime + this.fadeInDuration) {\r\n      return 1.0;\r\n    }\r\n\r\n    if (\r\n      total > this.activationTime &&\r\n      total < this.activationTime + this.fadeInDuration\r\n    ) {\r\n      return (\r\n        1 -\r\n        (this.activationTime + this.fadeInDuration - total) /\r\n          this.fadeInDuration\r\n      );\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  render({ total }) {\r\n    if (this.activationTime > total) {\r\n      this.hide();\r\n      return;\r\n    }\r\n\r\n    const activeTime = total - this.activationTime;\r\n\r\n    const opacity = this.getOpacity(total);\r\n\r\n    if (opacity === 0) {\r\n      this.hide();\r\n      return;\r\n    }\r\n\r\n    this.setOpacity(opacity);\r\n\r\n    if (this.scaleChange !== null) {\r\n      this.setScale(\r\n        this.scale.width * this.scaleChange * activeTime,\r\n        this.scale.height * this.scaleChange * activeTime\r\n      );\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  setTexture(tex) {\r\n    this.uniforms.textureNumber.value = tex;\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.mesh.visible = false;\r\n    return this;\r\n  }\r\n\r\n  show() {\r\n    this.mesh.visible = true;\r\n    return this;\r\n  }\r\n\r\n  setPosition(pos) {\r\n    this.mesh.position.x = pos.x;\r\n    this.mesh.position.y = pos.y;\r\n    this.mesh.position.z = pos.z;\r\n    return this;\r\n  }\r\n\r\n  getPosition() {\r\n    return this.mesh.position;\r\n  }\r\n\r\n  isPosition(position) {\r\n    return (\r\n      this.mesh.position.x === position.x &&\r\n      this.mesh.position.y === position.y &&\r\n      this.mesh.position.z === position.z\r\n    );\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    this.uniforms.opacity.value = opacity * this.opacity;\r\n    return this;\r\n  }\r\n\r\n  multiplyOpacity(m) {\r\n    this.uniforms.opacity.value = this.opacity * m;\r\n    return this;\r\n  }\r\n\r\n  setColor(color) {\r\n    this.color = color;\r\n    this.uniforms.overlayColor.value = color;\r\n    return this;\r\n  }\r\n\r\n  setScale(width, height) {\r\n    this.mesh.scale.set(width, height, 1);\r\n    return this;\r\n  }\r\n\r\n  destroy() {\r\n    this.mesh.material.dispose();\r\n    this.scene.remove(this.mesh);\r\n  }\r\n\r\n  setFacing(facing) {\r\n    this.mesh.rotation.z = degreeToRadian(facing);\r\n    return this;\r\n  }\r\n\r\n  getFacing() {\r\n    return radianToDegree(this.mesh.rotation.z);\r\n  }\r\n\r\n  create() {\r\n    this.material = new THREE.ShaderMaterial({\r\n      vertexShader: effectSpriteVertexShader,\r\n      fragmentShader: effectSpriteFragmentShader,\r\n      transparent: true,\r\n      depthWrite: false,\r\n      depthTest: false,\r\n      blending: this.blending,\r\n    });\r\n\r\n    const geometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n    this.material.uniforms = this.uniforms;\r\n\r\n    const mesh = new THREE.Mesh(geometry, this.material);\r\n    this.scene.add(mesh);\r\n    return mesh;\r\n  }\r\n}\r\n\r\nexport default EffecSprite;\r\n","import ShipWeaponAnimation from \"./ShipWeaponAnimation/ShipWeaponAnimation\";\r\nimport ExplosionEffect from \"./effect/ExplosionEffect\";\r\nimport * as THREE from \"three\";\r\nimport EffecSprite, {\r\n  TEXTURE_GLOW,\r\n  TEXTURE_RING,\r\n  TEXTURE_FILLED_RING,\r\n} from \"../renderer/sprite/EffectSprite\";\r\nimport BoltEffect from \"./effect/BoltEffect\";\r\n\r\nconst boltEffect = new BoltEffect();\r\n\r\nclass ShipDestroyedAnimation extends ShipWeaponAnimation {\r\n  constructor(\r\n    icon,\r\n    facing,\r\n    position,\r\n    start,\r\n    getRandom,\r\n    particleEmitterContainer,\r\n    scene\r\n  ) {\r\n    super({ getRandom, particleEmitterContainer });\r\n\r\n    this.animations = [];\r\n    const size =\r\n      icon.dimensions.x > icon.dimensions.y\r\n        ? icon.dimensions.x\r\n        : icon.dimensions.y;\r\n\r\n    this.hideTime = 2500;\r\n\r\n    this.icon = icon;\r\n    this.start = start;\r\n\r\n    let explosionCount =\r\n      Math.ceil(\r\n        (this.icon.dimensions.x *\r\n          this.icon.dimensions.y *\r\n          this.icon.dimensions.z) /\r\n          10000\r\n      ) + Math.round(getRandom() * 5);\r\n\r\n    while (explosionCount--) {\r\n      const explosionPosition = this.getRandomLocationOnShip(\r\n        this.icon,\r\n        facing\r\n      ).add(position);\r\n\r\n      new ExplosionEffect(\r\n        this.particleEmitterContainer,\r\n        this.getRandom,\r\n        {\r\n          position: explosionPosition,\r\n          time: start + this.getRandom() * 3000,\r\n          duration: 250 + getRandom() * 250,\r\n          type: \"gas\",\r\n          size: getRandom() * 30 + 10,\r\n          color: new THREE.Color(51 / 255, 163 / 255, 255 / 255),\r\n        },\r\n        this\r\n      );\r\n    }\r\n\r\n    const mainExplosionGlow = new EffecSprite(scene, {\r\n      position: position.setZ(icon.shipZ),\r\n      scale: { width: size * 4, height: size * 4 },\r\n      color: new THREE.Color(51 / 255, 163 / 255, 255 / 255),\r\n      texture: TEXTURE_GLOW,\r\n      fadeInDuration: 500,\r\n      fadeOutTime: 1000,\r\n      fadeOutDuration: 1000,\r\n      activationTime: start + 2000,\r\n      scaleChange: 0.001,\r\n      blending: THREE.NormalBlending,\r\n      opacity: 1.0,\r\n    });\r\n    this.animations.push(mainExplosionGlow);\r\n\r\n    const secondaryExplosionGlow = new EffecSprite(scene, {\r\n      position: position.setZ(icon.shipZ),\r\n      scale: { width: size * 3, height: size * 3 },\r\n      color: new THREE.Color(1, 1, 1),\r\n      texture: TEXTURE_GLOW,\r\n      fadeInDuration: 500,\r\n      fadeOutTime: 1000,\r\n      fadeOutDuration: 1000,\r\n      activationTime: start + 2000,\r\n      scaleChange: 0.001,\r\n      blending: THREE.AdditiveBlending,\r\n      opacity: 1.0,\r\n    });\r\n    this.animations.push(secondaryExplosionGlow);\r\n\r\n    const ring = new EffecSprite(scene, {\r\n      position: position.setZ(icon.shipZ),\r\n      scale: { width: size * 0.8, height: size * 0.8 },\r\n      color: new THREE.Color(51 / 255, 163 / 255, 255 / 255),\r\n      texture: TEXTURE_FILLED_RING,\r\n      fadeInDuration: 0,\r\n      fadeOutTime: 200,\r\n      fadeOutDuration: 300,\r\n      activationTime: start + 3000,\r\n      scaleChange: 0.03,\r\n      opacity: 0.5,\r\n    });\r\n    this.animations.push(ring);\r\n\r\n    /*\r\n    let shootOffs = getRandom() * 100 + 50;\r\n\r\n    while (shootOffs--) {\r\n      boltEffect.create(\r\n        this.hideTime,\r\n        position.setZ(icon.shipZ),\r\n        new Vector(endPosition),\r\n        speed * 1.5,\r\n        args.fadeOutSpeed || Math.random() * 500 + 250,\r\n        Math.floor(Math.random() * 500 + 250) / this.speed,\r\n        {\r\n          size: radius / 3,\r\n          color: [color.r, color.g, color.b],\r\n          coreOpacity: 0.1,\r\n          repeat: this.repeat,\r\n        },\r\n        this.getRandom,\r\n        this.emitterContainer,\r\n        this.context\r\n      );\r\n    }\r\n\r\n    */\r\n  }\r\n\r\n  render(payload) {\r\n    if (payload.total > this.start + this.hideTime) {\r\n      this.icon.hide();\r\n    } else {\r\n      this.icon.show();\r\n    }\r\n    this.animations.forEach((a) => a.render(payload));\r\n  }\r\n\r\n  deactivate() {\r\n    this.particleEmitterContainer.release(this);\r\n    this.animations.forEach((a) => a.destroy());\r\n\r\n    return super.deactivate();\r\n  }\r\n}\r\n\r\nexport default ShipDestroyedAnimation;\r\n","import {\n  ShipWeaponAnimations,\n  ShipMovementAnimation,\n  ShipSystemAnimation,\n} from \"../../../animation\";\n\nimport * as THREE from \"three\";\n\nimport AnimationUiStrategy from \"../AnimationUiStrategy\";\nimport WeaponFireService from \"../../../../../../model/weapon/WeaponFireService.mjs\";\nimport { getSeededRandomGenerator } from \"../../../../../../model/utils/math.mjs\";\nimport ShipWeaponAnimationService from \"./ShipWeaponAnimationService\";\nimport CombatLogShipMovement from \"../../../../../../model/combatLog/CombatLogShipMovement.mjs\";\nimport CameraPositionAnimation from \"../../../animation/CameraPositionAnimation\";\nimport CombatLogGroupedWeaponFire from \"../../../../../../model/combatLog/CombatLogGroupedWeaponFire.mjs\";\nimport SystemDestroyedTextAnimation from \"../../../animation/SystemDestroyedTextAnimation\";\nimport Vector from \"../../../../../../model/utils/Vector.mjs\";\nimport TorpedoMovementAnimation from \"../../../animation/TorpedoMovementAnimation\";\nimport CombatLogGroupedTorpedoAttack from \"../../../../../../model/combatLog/CombatLogGroupedTorpedoAttack.mjs\";\nimport { TORPEDO_Z } from \"../../../../../../model/gameConfig.mjs\";\nimport ExplosionEffect from \"../../../animation/effect/ExplosionEffect\";\nimport TorpedoExplosionHE from \"../../../animation/TorpedoExplosion/TorpedoExplosionHE\";\nimport TorpedoExplosionMSV from \"../../../animation/TorpedoExplosion/TorpedoExplosionMSV\";\nimport CombatLogTorpedoLaunch from \"../../../../../../model/combatLog/CombatLogTorpedoLaunch.mjs\";\nimport ShipDamageAnimation from \"../../../animation/ShipDamageAnimation\";\nimport ShipDestroyedAnimation from \"../../../animation/ShipDestroyedAnimation\";\n\nconst getMovesForShip = (gameDatas, ship) =>\n  gameDatas.reduce((moves, gameData) => {\n    return [\n      ...moves,\n      ...gameData.ships.getShipById(ship.id).movement.getMovement(),\n    ];\n  }, []);\n\nconst getEndMoveForShip = (gameDatas, ship) =>\n  getMovesForShip(gameDatas, ship).pop();\n\nconst getStartMoveForShip = (gameDatas, ship) =>\n  getMovesForShip(gameDatas, ship).shift();\n\nconst getShipStartPositionAndFacingForShip = (gameDatas, ship) => {\n  const move = getStartMoveForShip(gameDatas, ship);\n\n  return {\n    position: move.position,\n    facing: move.facing,\n  };\n};\n\nclass ReplayTurnActions extends AnimationUiStrategy {\n  constructor(replayContext) {\n    super();\n    this.replayContext = replayContext;\n\n    this.systemDestroyedTextAnimation = null;\n    this.ready = false;\n  }\n\n  async newTurn(gameDatas) {\n    const {\n      shipIconContainer,\n      particleEmitterContainer,\n      uiState,\n      scene,\n    } = this.services;\n\n    await shipIconContainer.shipsLoaded();\n    await particleEmitterContainer.ready();\n\n    const gameData = gameDatas[0];\n\n    this.getRandom = getSeededRandomGenerator(\n      \"id\" + gameData.id + \"turn\" + gameData.turn\n    );\n\n    uiState.startCombatLog(this.replayContext, gameData);\n\n    this.systemDestroyedTextAnimation = new SystemDestroyedTextAnimation(scene);\n    this.animations.push(this.systemDestroyedTextAnimation);\n\n    gameData.combatLog.getForReplay().forEach((combatLogEntry) => {\n      if (combatLogEntry instanceof CombatLogShipMovement) {\n        this.buildMovementAnimation(combatLogEntry, gameDatas);\n      } else if (combatLogEntry instanceof CombatLogGroupedWeaponFire) {\n        this.buildWeaponFireAnimation(combatLogEntry, gameDatas);\n      } else if (combatLogEntry instanceof CombatLogTorpedoLaunch) {\n        this.buildTorpedoMoveAnimation(combatLogEntry, gameDatas);\n      } else if (combatLogEntry instanceof CombatLogGroupedTorpedoAttack) {\n        this.buildTorpedoAttackAnimation(combatLogEntry, gameDatas);\n      }\n    });\n\n    this.buildShipDamageAnimations(gameDatas);\n  }\n\n  buildDestroyedShipsAnimation(gameDatas, ship) {\n    const {\n      gameCamera,\n      shipIconContainer,\n      particleEmitterContainer,\n      scene,\n    } = this.services;\n\n    const start = this.replayContext.getDestroyedShipsStart();\n    const cameraDuration = 2000;\n    const effectStart = start + cameraDuration;\n\n    const endMove = getEndMoveForShip(gameDatas, ship);\n    const position = endMove.getPosition();\n    const icon = shipIconContainer.getByShip(ship);\n\n    this.animations.push(\n      new CameraPositionAnimation(position, start, effectStart, gameCamera)\n    );\n\n    this.animations.push(\n      new ShipDestroyedAnimation(\n        icon,\n        endMove.getFacing(),\n        endMove.getPosition(),\n        effectStart,\n        this.getRandom,\n        particleEmitterContainer,\n        scene\n      )\n    );\n\n    this.replayContext.addDestroyedShipsDuration(cameraDuration + 5000);\n  }\n\n  buildShipDamageAnimations(gameDatas) {\n    const { shipIconContainer } = this.services;\n\n    gameDatas[0].ships.getShips().forEach((ship) => {\n      const icon = shipIconContainer.getByShip(ship);\n      const systemsDestroyed = this.replayContext.getDestroyedStructuresByShip(\n        ship\n      );\n\n      let end = null;\n\n      if (ship.isDestroyedThisTurn()) {\n        end = this.replayContext.getDestroyedShipsStart() + 2000;\n        this.buildDestroyedShipsAnimation(gameDatas, ship);\n      }\n\n      let destroyedSections = ship.systems.sections\n        .getSectionsWithStructure()\n        .filter((section) => {\n          const structure = section.getStructure();\n          return (\n            structure.isDestroyed() &&\n            systemsDestroyed.every(({ systems }) =>\n              systems.every((system) => system.id !== structure.id)\n            )\n          );\n        });\n\n      const destroyedAnimations = [];\n\n      if (destroyedSections.length > 0) {\n        destroyedAnimations.push({\n          sections: destroyedSections,\n          start: 0,\n          end: null,\n        });\n      }\n\n      systemsDestroyed.forEach(({ time, systems }) => {\n        const newDestroyed = ship.systems.sections\n          .getSectionsWithStructure()\n          .filter((section) => {\n            const structure = section.getStructure();\n            return systems.some((system) => system.id === structure.id);\n          });\n\n        time += this.getRandom() * 500 + 500;\n        destroyedSections = [...destroyedSections, ...newDestroyed];\n\n        if (destroyedAnimations[destroyedAnimations.length - 1]) {\n          destroyedAnimations[destroyedAnimations.length - 1].end = time;\n        }\n\n        destroyedAnimations.push({\n          sections: destroyedSections,\n          start: time,\n          end: end,\n        });\n      });\n\n      destroyedAnimations.forEach(({ sections, start, end }) => {\n        this.animations.push(\n          new ShipDamageAnimation(icon, sections, start, end)\n        );\n      });\n    });\n  }\n\n  buildInterceptAnimation(\n    gameData,\n    targetIcon,\n    intercepts,\n    interceptTime,\n    interceptPosition,\n    gameDatas\n  ) {\n    const { particleEmitterContainer, shipIconContainer } = this.services;\n\n    const weaponAnimationService = new ShipWeaponAnimationService(\n      this.getRandom,\n      particleEmitterContainer\n    );\n\n    intercepts.forEach((intercept) => {\n      const ship = gameData.ships.getShipById(intercept.shipId);\n      const weapon = ship.systems.getSystemById(intercept.weaponId);\n\n      if (!intercept.isSucessfull()) {\n        return;\n      }\n\n      const animationName = weapon.callHandler(\"getWeaponFireAnimationName\");\n\n      if (!animationName) {\n        return;\n      }\n\n      const animation = new ShipWeaponAnimations[\n        `ShipWeapon${\n          animationName.charAt(0).toUpperCase() + animationName.slice(1)\n        }Animation`\n      ]({\n        getRandom: this.getRandom,\n        particleEmitterContainer: particleEmitterContainer,\n        weapon,\n        getPosition: (ship) =>\n          getShipStartPositionAndFacingForShip(gameDatas, ship),\n        args: weapon.callHandler(\"getWeaponFireAnimationArguments\"),\n        weaponAnimationService,\n        targetIcon,\n        shooterIcon: shipIconContainer.getByShip(ship),\n        animationStartTime: 0,\n        impactPosition: interceptPosition,\n        impactTime: interceptTime,\n        totalShots: weapon.callHandler(\"getTotalBurstSize\", null, 1),\n        shotsHit: intercept.isSucessfull() ? 1 : 0,\n        omitHitExplosion: true,\n      });\n\n      this.animations.push(animation);\n    });\n  }\n\n  buildTorpedoAttackAnimation(combatLogEntry, gameDatas) {\n    const {\n      shipIconContainer,\n      gameCamera,\n      particleEmitterContainer,\n      torpedoIconContainer,\n      uiState,\n    } = this.services;\n    const gameData = gameDatas[0];\n\n    const attackDuration = 3000;\n\n    const start = this.replayContext.getNextTorpedoAttackStart();\n    const cameraDuration = 2000;\n    const fireStart = start + cameraDuration;\n\n    let longestDuration = attackDuration;\n\n    const target = gameData.ships.getShipById(combatLogEntry.targetId);\n    const targetIcon = shipIconContainer.getByShip(target);\n\n    const position = getStartMoveForShip(\n      gameDatas,\n      targetIcon.ship\n    ).getPosition();\n\n    this.animations.push(\n      new CameraPositionAnimation(position, start, fireStart, gameCamera)\n    );\n\n    combatLogEntry.entries.forEach((torpedoEntry) => {\n      const flight = gameData.torpedos.getTorpedoFlightById(\n        torpedoEntry.torpedoFlightId\n      );\n\n      uiState.addToCombatLog(torpedoEntry);\n\n      const intercepts = gameData.combatLog.getInterceptsFor(torpedoEntry);\n\n      const intercepted = intercepts.some((intercept) =>\n        intercept.isSucessfull()\n      );\n\n      const interceptTime = intercepted\n        ? fireStart + (attackDuration - 1000) + this.getRandom() * 1000\n        : null;\n\n      const targetPosition = new Vector(position)\n        .setZ(targetIcon.shipZ)\n        .add(\n          new Vector(this.getRandom() * 30 - 15, this.getRandom() * 30 - 15, 0)\n        );\n\n      const attackDistance = 1000;\n      const launchPosition = flight.launchPosition;\n      const torpedoPosition = launchPosition\n        .sub(targetPosition)\n        .normalize()\n        .multiplyScalar(attackDistance)\n        .add(targetPosition)\n        .setZ(TORPEDO_Z);\n\n      const msvDistance = this.getRandom() * 200 + 300;\n      const msvPosition =\n        flight.torpedo.damageStrategy.msv && !intercepted\n          ? launchPosition\n              .sub(targetPosition)\n              .normalize()\n              .multiplyScalar(msvDistance)\n              .add(targetPosition)\n              .setZ(TORPEDO_Z)\n          : null;\n\n      const flightDuration = msvPosition\n        ? attackDuration * ((attackDistance - msvDistance) / attackDistance)\n        : attackDuration;\n\n      const randomFlightDuration = this.getRandom() * 500;\n      const endTime = fireStart + attackDuration + randomFlightDuration;\n      const flightEndTime = fireStart + flightDuration + randomFlightDuration;\n\n      const speed = attackDistance / attackDuration;\n\n      const animation = new TorpedoMovementAnimation(\n        torpedoIconContainer.getIconByTorpedoFlight(flight),\n        torpedoPosition,\n        msvPosition ? msvPosition : targetPosition,\n        fireStart,\n        flightEndTime,\n        flight.turnsActive === 1,\n        interceptTime,\n        true\n      );\n\n      const systemsDestroyed = torpedoEntry.getDestroyedSystems(target);\n\n      if (systemsDestroyed.length > 0) {\n        this.systemDestroyedTextAnimation.add(\n          new Vector(targetPosition.x, targetPosition.y, targetPosition.z),\n          systemsDestroyed.map((system) => system.getDisplayName()),\n          endTime\n        );\n      }\n\n      const velocity = targetPosition\n        .sub(launchPosition)\n        .normalize()\n        .multiplyScalar(attackDistance / attackDuration)\n        .multiplyScalar(0.5);\n\n      const interceptPosition = animation.getInterceptPosition();\n\n      this.animations.push(animation);\n\n      this.buildInterceptAnimation(\n        gameData,\n        targetIcon,\n        intercepts,\n        interceptTime,\n        interceptPosition,\n        gameDatas\n      );\n\n      if (intercepted) {\n        this.animations.push(\n          new ExplosionEffect(\n            particleEmitterContainer,\n            this.getRandom,\n            {\n              position: interceptPosition,\n              time: interceptTime,\n              duration: 250 + this.getRandom() * 250,\n              type: \"glow\",\n              size: this.getRandom() * 5 + 5,\n              color: new THREE.Color(1.0, 0.9, 0.8),\n              velocity,\n            },\n            this\n          )\n        );\n      } else {\n        switch (flight.torpedo.visuals.explosionType) {\n          case \"MSV\":\n            this.animations.push(\n              new TorpedoExplosionMSV(\n                targetPosition,\n                flightEndTime,\n                endTime,\n                particleEmitterContainer,\n                this.getRandom,\n                flight.torpedo,\n                torpedoEntry.damages,\n                targetIcon,\n                (ship) => getShipStartPositionAndFacingForShip(gameDatas, ship),\n                msvPosition,\n                speed\n              )\n            );\n            break;\n          case \"HE\":\n          default:\n            this.animations.push(\n              new TorpedoExplosionHE(\n                (ship) => getShipStartPositionAndFacingForShip(gameDatas, ship),\n                endTime,\n                particleEmitterContainer,\n                this.getRandom,\n                flight.torpedo,\n                targetIcon\n              )\n            );\n            break;\n        }\n      }\n    });\n\n    this.replayContext.addTorpedoAttackAnimationDuration(\n      cameraDuration + longestDuration + 1000\n    );\n  }\n\n  buildTorpedoMoveAnimation(combatLogEntry, gameDatas) {\n    const { torpedoIconContainer } = this.services;\n\n    const duration = 5000;\n    const start = this.replayContext.getMovementStart();\n    this.replayContext.setMovementDuration(duration);\n\n    const flight = gameDatas[0].torpedos.getTorpedoFlightById(\n      combatLogEntry.torpedoFlightId\n    );\n\n    const startTime = start + this.getRandom() * 2000;\n    const endTime = start + duration + this.getRandom() * 1000;\n    const animation = new TorpedoMovementAnimation(\n      torpedoIconContainer.getIconByTorpedoFlight(flight),\n      flight.launchPosition.setZ(TORPEDO_Z),\n      flight.strikePosition.setZ(TORPEDO_Z),\n      startTime,\n      endTime,\n      true\n    );\n\n    this.animations.push(animation);\n  }\n\n  buildWeaponFireAnimation(combatLogEntry, gameDatas) {\n    const {\n      shipIconContainer,\n      gameCamera,\n      particleEmitterContainer,\n      uiState,\n    } = this.services;\n    const gameData = gameDatas[0];\n\n    const weaponFireService = new WeaponFireService().update(gameData);\n    const weaponAnimationService = new ShipWeaponAnimationService(\n      this.getRandom,\n      particleEmitterContainer\n    );\n\n    const start = this.replayContext.getNextFireStart();\n    const cameraDuration = 2000;\n    const fireStart = start + cameraDuration;\n\n    let longestDuration = 0;\n\n    const target = gameData.ships.getShipById(combatLogEntry.targetId);\n    const targetIcon = shipIconContainer.getByShip(target);\n\n    const position = getStartMoveForShip(\n      gameDatas,\n      targetIcon.ship\n    ).getPosition();\n\n    this.animations.push(\n      new CameraPositionAnimation(position, start, fireStart, gameCamera)\n    );\n\n    combatLogEntry.entries.forEach((fireEntry) => {\n      const fireOrder = weaponFireService.getFireOrderById(\n        fireEntry.fireOrderId\n      );\n\n      uiState.addToCombatLog(fireEntry);\n\n      const shooter = gameData.ships.getShipById(fireOrder.shooterId);\n      const weapon = shooter.systems.getSystemById(fireOrder.weaponId);\n\n      const animationName = weapon.callHandler(\"getWeaponFireAnimationName\");\n\n      if (!animationName) {\n        return;\n      }\n\n      const animation = new ShipWeaponAnimations[\n        `ShipWeapon${\n          animationName.charAt(0).toUpperCase() + animationName.slice(1)\n        }Animation`\n      ]({\n        getRandom: this.getRandom,\n        particleEmitterContainer: particleEmitterContainer,\n        weapon,\n        getPosition: (ship) =>\n          getShipStartPositionAndFacingForShip(gameDatas, ship),\n        args: weapon.callHandler(\"getWeaponFireAnimationArguments\"),\n        weaponAnimationService,\n        targetIcon,\n        shooterIcon: shipIconContainer.getByShip(shooter),\n        animationStartTime: fireStart,\n        totalShots: fireEntry.totalShots,\n        shotsHit: fireEntry.shotsHit,\n        fireEntry,\n      });\n\n      this.animations.push(animation);\n      const duration = animation.getDuration();\n\n      if (duration > longestDuration) {\n        longestDuration = duration;\n      }\n\n      const systemsDestroyed = fireEntry.getDestroyedSystems(target);\n\n      if (systemsDestroyed.length > 0) {\n        const systemDestroyedTime = fireStart + duration - 1000;\n        this.replayContext.noteDestroyedSystem(\n          target,\n          systemDestroyedTime,\n          systemsDestroyed\n        );\n        this.systemDestroyedTextAnimation.add(\n          new Vector(position.x, position.y, position.z + targetIcon.shipZ),\n          systemsDestroyed.map((system) => system.getDisplayName()),\n          systemDestroyedTime\n        );\n      }\n    });\n\n    this.replayContext.addFireAnimationDuration(\n      cameraDuration + longestDuration\n    );\n  }\n\n  buildMovementAnimation(combatLogEntry, gameDatas) {\n    const { shipIconContainer } = this.services;\n\n    const duration = 5000;\n    const start = this.replayContext.getMovementStart();\n\n    const icon = shipIconContainer.getById(combatLogEntry.shipId);\n    const ship = icon.ship;\n\n    icon.show();\n\n    const animation = new ShipMovementAnimation(\n      icon,\n      getMovesForShip(gameDatas, ship),\n      start,\n      start + duration\n    );\n\n    if (animation.doesMove()) {\n      this.replayContext.setMovementDuration(duration);\n    }\n\n    this.animations.push(animation);\n\n    this.animations.push(\n      new ShipSystemAnimation(\n        icon,\n        gameDatas[0].ships.getShipById(icon.ship.id)\n      )\n    );\n  }\n\n  deactivate() {\n    const {\n      shipIconContainer,\n      uiState,\n      particleEmitterContainer,\n    } = this.services;\n    shipIconContainer.getArray().forEach(function (icon) {\n      icon.hide();\n    }, this);\n\n    uiState.hideCombatLog();\n\n    particleEmitterContainer.release(this);\n    this.animations.forEach((animation) => animation.deactivate());\n\n    return super.deactivate();\n  }\n}\n\nexport default ReplayTurnActions;\n","import PhaseStrategy from \"../PhaseStrategy\";\r\nimport {\r\n  AutomaticReplay,\r\n  ShowReplayUi,\r\n  MouseOverShowsShipTooltip,\r\n  ShowMapIcons,\r\n  UnderHexForShips\r\n} from \"../../../ui/uiStrategy\";\r\nimport ReplayContext from \"./ReplayContext\";\r\nimport ReplayTurnActions from \"../../../ui/uiStrategy/replay/ReplayTurnActions\";\r\n\r\nclass AutomaticReplayPhaseStrategy extends PhaseStrategy {\r\n  constructor(services) {\r\n    super(services);\r\n\r\n    this.emitterContainer = services.particleEmitterContainer;\r\n\r\n    this.replayContext = new ReplayContext(this);\r\n    this.replayTurnActions = new ReplayTurnActions(this.replayContext);\r\n\r\n    this.strategies = [\r\n      this.replayTurnActions,\r\n      new AutomaticReplay(this, this.replayContext),\r\n      new ShowReplayUi(this.replayContext),\r\n      new MouseOverShowsShipTooltip(),\r\n      new UnderHexForShips(),\r\n      new ShowMapIcons()\r\n    ];\r\n  }\r\n\r\n  render(coordinateConverter, scene, zoom) {\r\n    const payload = super.render(coordinateConverter, scene, zoom);\r\n    this.emitterContainer.render(payload);\r\n  }\r\n\r\n  canDisturb() {\r\n    return false;\r\n  }\r\n\r\n  update(gamedata) {\r\n    this.updateStrategies(gamedata);\r\n    return this;\r\n  }\r\n\r\n  deactivate() {\r\n    super.deactivate();\r\n  }\r\n}\r\n\r\nexport default AutomaticReplayPhaseStrategy;\r\n","import AutomaticReplayPhaseStrategy from \"./AutomaticReplayPhaseStrategy\";\r\n\r\nexport default AutomaticReplayPhaseStrategy;\r\n","class GameDataCache {\r\n  constructor() {\r\n    this.replays = [];\r\n    this.currentGameData = null;\r\n  }\r\n\r\n  getGameDatasForAutomaticReplay() {\r\n    if (!this.currentGameData) {\r\n      return null;\r\n    }\r\n\r\n    const lastGameData = this.replays.find(\r\n      replay => replay.turn === this.currentGameData.turn - 1\r\n    );\r\n\r\n    if (!lastGameData) {\r\n      return null;\r\n    }\r\n\r\n    return [lastGameData, this.currentGameData];\r\n  }\r\n\r\n  setCurrent(gameData) {\r\n    this.currentGameData = gameData;\r\n  }\r\n\r\n  getCurrent() {\r\n    return this.currentGameData;\r\n  }\r\n\r\n  setReplays(replays) {\r\n    this.replays = this.replays.filter(\r\n      replay => !replays.find(newReplay => newReplay.turn === replay.turn)\r\n    );\r\n\r\n    this.replays = [...this.replays, ...replays];\r\n  }\r\n}\r\n\r\nexport default GameDataCache;\r\n","import hexagon from \"../hexagon/index.mjs\";\r\nimport uuidv4 from \"uuid/v4.js\";\r\n\r\nclass GameSlot {\r\n  constructor(data = {}, gameData) {\r\n    this.id = uuidv4();\r\n    this.gameData = gameData;\r\n    this.deserialize(data);\r\n  }\r\n\r\n  getShips() {\r\n    if (!this.gameData) {\r\n      return [];\r\n    }\r\n\r\n    return this.gameData.ships\r\n      .getShips()\r\n      .filter(ship => this.shipIds.includes(ship.id));\r\n  }\r\n\r\n  includesShip(ship) {\r\n    return this.shipIds.includes(ship.id);\r\n  }\r\n\r\n  isUsers(user) {\r\n    return this.userId === user.id;\r\n  }\r\n\r\n  addShip(ship) {\r\n    this.shipIds.push(ship.id);\r\n  }\r\n\r\n  isTaken() {\r\n    return Boolean(this.userId);\r\n  }\r\n\r\n  takeSlot(user) {\r\n    this.userId = user.id;\r\n  }\r\n\r\n  leaveSlot(user) {\r\n    if (this.userId !== user.id) {\r\n      throw Error(\"Trying to leave slot that is not occupied by player\");\r\n    }\r\n\r\n    this.userId = null;\r\n  }\r\n\r\n  isOccupiedBy(user) {\r\n    return user && this.userId === user.id;\r\n  }\r\n\r\n  setBought() {\r\n    this.bought = true;\r\n  }\r\n\r\n  isBought() {\r\n    return this.bought;\r\n  }\r\n\r\n  validate() {\r\n    if (!this.name) {\r\n      return \"Slot needs to have a name\";\r\n    }\r\n\r\n    if (!(this.deploymentLocation instanceof hexagon.Offset)) {\r\n      return \"Slot needs to have deploymentlocation of type hexagon.Offset\";\r\n    }\r\n\r\n    if (\r\n      this.deploymentRadius !== parseInt(this.deploymentRadius, 10) ||\r\n      this.deploymentRadius < 0\r\n    ) {\r\n      return \"Slot needs to have greater than zero deploymentRadius\";\r\n    }\r\n\r\n    if (this.team !== parseInt(this.team, 10) || this.team < 0) {\r\n      return \"Slot needs to have greater than zero numeric team\";\r\n    }\r\n\r\n    if (!(this.deploymentVector instanceof hexagon.Offset)) {\r\n      return \"Slot needs to have deploymentVector of type hexagon.Offset\";\r\n    }\r\n\r\n    if (this.points !== parseInt(this.points, 10) || this.points <= 0) {\r\n      return \"Slot needs to have points more than 0\";\r\n    }\r\n  }\r\n\r\n  isValidShipDeployment(ship, hex) {\r\n    return (\r\n      this.includesShip(ship) &&\r\n      hex.distanceTo(this.deploymentLocation) <= this.deploymentRadius\r\n    );\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      userId: this.userId,\r\n      deploymentLocation: this.deploymentLocation,\r\n      deploymentRadius: this.deploymentRadius,\r\n      deploymentVector: this.deploymentVector,\r\n      points: this.points,\r\n      shipIds: this.shipIds,\r\n      team: this.team,\r\n      bought: this.bought,\r\n      facing: this.facing\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.id = data.id || this.id;\r\n    this.name = data.name;\r\n    this.userId = data.userId || null;\r\n    this.deploymentLocation = data.deploymentLocation\r\n      ? new hexagon.Offset(data.deploymentLocation)\r\n      : new hexagon.Offset(0, 0);\r\n    this.deploymentVector = data.deploymentVector\r\n      ? new hexagon.Offset(data.deploymentVector)\r\n      : new hexagon.Offset(0, 0);\r\n    this.deploymentRadius = data.deploymentRadius || 10;\r\n    //this.deploymentRadius = 10000;\r\n    this.shipIds = data.shipIds || [];\r\n    this.points = data.points || 0;\r\n    this.bought = data.bought || false;\r\n    this.team = data.team || 1;\r\n    this.facing = data.facing || 0;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default GameSlot;\r\n","import GameSlot from \"./GameSlot.mjs\";\r\n\r\nclass GameSlots {\r\n  constructor(gameData) {\r\n    this.gameData = gameData;\r\n    this.slots = [];\r\n  }\r\n\r\n  getTeamForShip(ship) {\r\n    const slot = this.slots.find(slot => slot.includesShip(ship));\r\n\r\n    return slot.team;\r\n  }\r\n\r\n  getSlotsByTeams() {\r\n    const teams = [];\r\n\r\n    this.slots.forEach(slot => {\r\n      let team = teams.find(t => t.team === slot.team);\r\n\r\n      if (!team) {\r\n        team = {\r\n          team: slot.team,\r\n          slots: [slot]\r\n        };\r\n        teams.push(team);\r\n      } else {\r\n        team.slots.push(slot);\r\n      }\r\n    });\r\n\r\n    return teams;\r\n  }\r\n\r\n  isShipInUsersTeam(user, ship) {\r\n    const userSlot = this.slots.find(s => s.userId === user.id);\r\n\r\n    if (!userSlot) {\r\n      return false;\r\n    }\r\n\r\n    return this.getSlotByShip(ship).team === userSlot.team;\r\n  }\r\n\r\n  isUsersTeam(user, team) {\r\n    const userSlot = this.slots.find(s => s.userId === user.id);\r\n\r\n    if (!userSlot) {\r\n      return false;\r\n    }\r\n\r\n    return team === userSlot.team;\r\n  }\r\n\r\n  isUsersTeamSlot(slot, user) {\r\n    const userSlot = this.slots.find(s => s.userId === user);\r\n\r\n    if (!userSlot) {\r\n      return false;\r\n    }\r\n\r\n    return slot.team === userSlot.team;\r\n  }\r\n\r\n  getUsersSlots(user) {\r\n    return this.slots.filter(slot => slot.isUsers(user));\r\n  }\r\n\r\n  getSlotByShip(ship) {\r\n    return this.slots.find(slot => slot.includesShip(ship));\r\n  }\r\n\r\n  getSlotById(id) {\r\n    return this.slots.find(slot => slot.id === id);\r\n  }\r\n\r\n  setSlots(slots) {\r\n    slots.forEach(this.addSlot.bind(this));\r\n  }\r\n\r\n  getSlots() {\r\n    return this.slots;\r\n  }\r\n\r\n  addSlot(slot) {\r\n    this.slots.push(slot);\r\n    return slot;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      slots: this.slots.map(slot => slot.serialize())\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.slots = data.slots\r\n      ? data.slots.map(slotData => new GameSlot(slotData, this.gameData))\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default GameSlots;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass BoostableSystemStrategy extends ShipSystemStrategy {\r\n  constructor(power = 0, maxLevel = null) {\r\n    super();\r\n    this.power = power;\r\n\r\n    this.maxLevel = maxLevel;\r\n    this.boostLevel = 0;\r\n  }\r\n\r\n  isBoostable(payload, previousResponse = true) {\r\n    if (previousResponse === false) {\r\n      return false;\r\n    }\r\n\r\n    return this.maxLevel !== 0;\r\n  }\r\n\r\n  canBoost(payload, previousResponse = true) {\r\n    if (previousResponse === false) {\r\n      return false;\r\n    }\r\n\r\n    const remainginPower = this.system.shipSystems.power.getRemainingPowerOutput();\r\n\r\n    if (this.system.isDisabled()) {\r\n      return false;\r\n    }\r\n\r\n    if (this.maxLevel !== null && this.boostLevel >= this.maxLevel) {\r\n      return false;\r\n    }\r\n\r\n    return remainginPower >= this.getPowerRequiredForBoost();\r\n  }\r\n\r\n  canDeBoost(payload, previousResponse) {\r\n    return this.boostLevel > 0;\r\n  }\r\n\r\n  getPowerRequiredForBoost(payload, previousResponse = 0) {\r\n    return this.power + previousResponse;\r\n  }\r\n\r\n  getBoost(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + this.boostLevel;\r\n  }\r\n\r\n  getPowerRequirement(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    const power = this.boostLevel * this.power;\r\n    return power + previousResponse;\r\n  }\r\n\r\n  boost(payload, previousResponse) {\r\n    if (!this.canBoost(payload)) {\r\n      return false;\r\n    }\r\n\r\n    this.boostLevel++;\r\n    this.system.callHandler(\"onSystemPowerLevelIncrease\");\r\n  }\r\n\r\n  deBoost(payload, previousResponse) {\r\n    if (this.boostLevel === 0) {\r\n      return false;\r\n    }\r\n\r\n    this.boostLevel--;\r\n    this.system.callHandler(\"onSystemPowerLevelDecrease\");\r\n  }\r\n\r\n  resetBoost() {\r\n    this.boostLevel = 0;\r\n    this.system.callHandler(\"onSystemPowerLevelDecrease\");\r\n  }\r\n\r\n  getRequiredPhasesForReceivingPlayerData(payload, previousResponse = 1) {\r\n    if (previousResponse > 2) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return 2;\r\n  }\r\n\r\n  receivePlayerData({ clientSystem, phase }) {\r\n    if (!clientSystem) {\r\n      return;\r\n    }\r\n\r\n    if (this.system.isDisabled()) {\r\n      return;\r\n    }\r\n\r\n    const clientStrategy = clientSystem.getStrategiesByInstance(\r\n      BoostableSystemStrategy\r\n    )[0];\r\n\r\n    const targetBoostlevel = clientStrategy.boostLevel;\r\n\r\n    if (this.boostLevel > targetBoostlevel && phase === 2) {\r\n      while (true) {\r\n        if (this.boostLevel === targetBoostlevel) {\r\n          return;\r\n        }\r\n\r\n        if (!this.canDeBoost()) {\r\n          return;\r\n        }\r\n\r\n        this.deBoost();\r\n      }\r\n    } else if (this.boostLevel < targetBoostlevel && phase === 1) {\r\n      while (true) {\r\n        if (this.boostLevel === targetBoostlevel) {\r\n          return;\r\n        }\r\n\r\n        if (!this.canBoost()) {\r\n          return;\r\n        }\r\n\r\n        this.boost();\r\n      }\r\n    }\r\n  }\r\n\r\n  getTooltipMenuButton({ myShip }, previousResponse = []) {\r\n    if (!myShip) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.system.isDisabled() || !this.system.callHandler(\"isBoostable\")) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        sort: 100,\r\n        img: \"/img/plus.png\",\r\n        onClickHandler: () => this.system.callHandler(\"boost\"),\r\n        disabledHandler: () => !this.system.callHandler(\"canBoost\", null, null),\r\n      },\r\n      {\r\n        sort: 100,\r\n        img: \"/img/minus.png\",\r\n        onClickHandler: () => this.system.callHandler(\"deBoost\"),\r\n        disabledHandler: () =>\r\n          !this.system.callHandler(\"canDeBoost\", null, null),\r\n      },\r\n    ];\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      boostableSystemStrategy: {\r\n        boostLevel: this.boostLevel,\r\n      },\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.boostLevel = data.boostableSystemStrategy\r\n      ? data.boostableSystemStrategy.boostLevel\r\n      : 0;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default BoostableSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\nimport {\r\n  OutputReduced2,\r\n  OutputReduced4,\r\n  OutputReduced6,\r\n  OutputReduced8\r\n} from \"../criticals/index.mjs\";\r\nimport OutputReduced from \"../criticals/OutputReduced.mjs\";\r\n\r\nclass ThrustOutputSystemStrategy extends ShipSystemStrategy {\r\n  constructor(output) {\r\n    super();\r\n\r\n    this.output = output || 0;\r\n  }\r\n\r\n  getOutputForBoost(payload, previousResponse = 0) {\r\n    if (previousResponse > this.output) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return this.output;\r\n  }\r\n\r\n  getThrustOutput(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    let output = this.output;\r\n\r\n    output -= this.system.damage\r\n      .getCriticals()\r\n      .filter(critical => critical instanceof OutputReduced)\r\n      .reduce((total, current) => total + current.getOutputReduction(), 0);\r\n\r\n    if (output < 0) {\r\n      output = 0;\r\n    }\r\n\r\n    return previousResponse + this.system.callHandler(\"getBoost\") + output;\r\n  }\r\n\r\n  getPossibleCriticals(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      { severity: 20, critical: new OutputReduced(2, 2) },\r\n      {\r\n        severity: 30,\r\n        critical: new OutputReduced(Math.ceil(this.output / 4), 2)\r\n      },\r\n      {\r\n        severity: 60,\r\n        critical: new OutputReduced(Math.ceil(this.output / 3), 2)\r\n      },\r\n      {\r\n        severity: 70,\r\n        critical: new OutputReduced(Math.ceil(this.output / 2), 2)\r\n      },\r\n      { severity: 30, critical: new OutputReduced(2) },\r\n      { severity: 70, critical: new OutputReduced(Math.ceil(this.output / 4)) },\r\n      { severity: 80, critical: new OutputReduced(Math.ceil(this.output / 3)) },\r\n      { severity: 90, critical: new OutputReduced(Math.ceil(this.output / 2)) }\r\n    ];\r\n  }\r\n\r\n  onSystemOffline() {\r\n    this.onSystemPowerLevelDecrease();\r\n  }\r\n\r\n  onSystemPowerLevelDecrease() {\r\n    if (\r\n      !this.system ||\r\n      !this.system.shipSystems ||\r\n      !this.system.shipSystems.ship\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.system.shipSystems.ship.movement.revertMovementsUntilValidMovement();\r\n  }\r\n}\r\n\r\nexport default ThrustOutputSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\nimport { ForcedOffline } from \"../criticals/index.mjs\";\r\n\r\nclass RequiresPowerSystemStrategy extends ShipSystemStrategy {\r\n  constructor(power, getsCriticals = true) {\r\n    super();\r\n    this.power = power || 0;\r\n    if (this.power <= 0) {\r\n      throw new Error(\"Power must be more than zero\");\r\n    }\r\n\r\n    this.getsCriticals = getsCriticals;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      sort: \"AAAA\",\r\n      header: \"Power requirement\",\r\n      value: this.system.callHandler(\"getPowerRequirement\", null, 0),\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getPowerRequirement(payload, previousResponse = 0) {\r\n    return this.power + previousResponse;\r\n  }\r\n\r\n  canSetOffline(payload, previousResponse = false) {\r\n    return true;\r\n  }\r\n\r\n  canSetOnline() {\r\n    return true;\r\n  }\r\n\r\n  shouldBeOffline(payload, previousResponse = false) {\r\n    if (previousResponse === true) {\r\n      return true;\r\n    }\r\n\r\n    return this.system.hasCritical(ForcedOffline);\r\n  }\r\n\r\n  getTooltipMenuButton({ myShip }, previousResponse = []) {\r\n    if (!myShip) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.system.shipSystems.power.canSetOnline(this.system)) {\r\n      return [\r\n        ...previousResponse,\r\n        {\r\n          sort: 0,\r\n          img: \"/img/goOnline.png\",\r\n          onClickHandler: () => this.system.power.setOnline(),\r\n        },\r\n      ];\r\n    } else if (this.system.shipSystems.power.canSetOffline(this.system)) {\r\n      return [\r\n        ...previousResponse,\r\n        {\r\n          sort: 0,\r\n          img: \"/img/goOffline.png\",\r\n          onClickHandler: () => this.system.power.setOffline(),\r\n        },\r\n      ];\r\n    }\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getPossibleCriticals(payload, previousResponse = []) {\r\n    if (!this.getsCriticals) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        severity: 20,\r\n        critical: new ForcedOffline(1),\r\n      },\r\n      {\r\n        severity: 40,\r\n        critical: new ForcedOffline(2),\r\n      },\r\n      {\r\n        severity: 60,\r\n        critical: new ForcedOffline(3),\r\n      },\r\n      {\r\n        severity: 80,\r\n        critical: new ForcedOffline(4),\r\n      },\r\n    ];\r\n  }\r\n}\r\n\r\nexport default RequiresPowerSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\nimport {\r\n  OutputReduced2,\r\n  OutputReduced4,\r\n  OutputReduced6,\r\n  OutputReduced8\r\n} from \"../criticals/index.mjs\";\r\n\r\nclass PowerOutputSystemStrategy extends ShipSystemStrategy {\r\n  constructor(output) {\r\n    super();\r\n\r\n    this.output = output || 0;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Power output\",\r\n      value: this.getPowerOutput()\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getPowerOutput(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    let output = this.output;\r\n\r\n    if (this.system.hasCritical(OutputReduced2)) {\r\n      output -= 2;\r\n    }\r\n\r\n    if (this.system.hasCritical(OutputReduced4)) {\r\n      output -= 4;\r\n    }\r\n\r\n    if (this.system.hasCritical(OutputReduced6)) {\r\n      output -= 6;\r\n    }\r\n\r\n    if (this.system.hasCritical(OutputReduced8)) {\r\n      output -= 8;\r\n    }\r\n\r\n    if (output < 0) {\r\n      output = 0;\r\n    }\r\n\r\n    return previousResponse + output;\r\n  }\r\n\r\n  getPossibleCriticals(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      { weight: 10, className: OutputReduced2 },\r\n      { weight: 7, className: OutputReduced4 },\r\n      { weight: 3, className: OutputReduced6 },\r\n      { weight: 1, className: OutputReduced8 }\r\n    ];\r\n  }\r\n}\r\n\r\nexport default PowerOutputSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\nimport ThrustChannelHeatIncreased from \"../criticals/ThrustChannelHeatIncreased.mjs\";\nimport { OutputReduced } from \"../criticals/index.mjs\";\n\nconst directionsToString = {\n  0: \"Thrust forward\",\n  3: \"Thrust aft\",\n  1: \"Thrust starboard\",\n  2: \"Thrust starboard\",\n  4: \"Thrust port\",\n  5: \"Thrust port\",\n  6: \"Pivot right\",\n  7: \"Pivot left\",\n  8: \"Roll, Evade\",\n};\n\nexport const THRUSTER_MODE_FUSION = \"fusion\";\nexport const THRUSTER_MODE_MANEUVER = \"maneuver\";\nexport const THRUSTER_MODE_CHEMICAL = \"chemical\";\n\nclass ThrustChannelSystemStrategy extends ShipSystemStrategy {\n  constructor(\n    output,\n    direction,\n    { thrustHeatExtra = 0.3, fuelExtra = 0.1 } = {},\n    mode = THRUSTER_MODE_FUSION,\n    alternateModes = []\n  ) {\n    super();\n\n    this.output = output || 0;\n    this.direction = direction || 0; // 0, 3, [4,5], [1,2], 6\n    this.channeled = 0;\n    this.thrustHeatExtra = thrustHeatExtra;\n    this.fuelExtra = fuelExtra;\n\n    this.mode = mode;\n    this.newMode = null;\n    this.alternateModes = alternateModes;\n\n    if (alternateModes.length > 0 && !alternateModes.includes(mode)) {\n      alternateModes.push(mode);\n    }\n  }\n\n  getBaseHeatPerThrustChanneled() {\n    switch (this.mode) {\n      case THRUSTER_MODE_FUSION:\n        return 0.5;\n      case THRUSTER_MODE_MANEUVER:\n        return 0.75;\n      case THRUSTER_MODE_CHEMICAL:\n        return 0.1;\n    }\n  }\n\n  getFuelPerThrustChanneled() {\n    switch (this.mode) {\n      case THRUSTER_MODE_FUSION:\n        return 1;\n      case THRUSTER_MODE_MANEUVER:\n        return 10;\n      case THRUSTER_MODE_CHEMICAL:\n        return 15;\n    }\n  }\n\n  isBoostable(payload, previousResponse = true) {\n    if (previousResponse === false) {\n      return false;\n    }\n\n    return this.mode === THRUSTER_MODE_FUSION;\n  }\n\n  canBoost(payload, previousResponse = true) {\n    if (previousResponse === false) {\n      return false;\n    }\n\n    return this.mode === THRUSTER_MODE_FUSION;\n  }\n\n  canChangeMode() {\n    return this.alternateModes.length > 1;\n  }\n\n  changeMode() {\n    if (!this.canChangeMode()) {\n      throw new Error(\"Check validity first\");\n    }\n\n    let index = this.alternateModes.indexOf(this.mode);\n\n    if (index === this.alternateModes.length - 1) {\n      index = 0;\n    } else {\n      index++;\n    }\n\n    this.mode = this.alternateModes[index];\n    this.newMode = this.mode;\n    this.system.callHandler(\"resetBoost\");\n  }\n\n  getHeatTransferPerStructure(payload, previousResponse = 0) {\n    if (this.mode === THRUSTER_MODE_FUSION) {\n      const boost = this.system.callHandler(\"getBoost\", null, 0);\n\n      return previousResponse + boost * 0.12;\n    }\n\n    return previousResponse;\n  }\n\n  getFuelRequirement(amount = null) {\n    let fuel = 0;\n    let extra = 1;\n\n    if (amount === null) {\n      amount = this.channeled;\n    }\n\n    while (amount--) {\n      const increase = this.getFuelPerThrustChanneled() * extra;\n      fuel += increase;\n      extra += this.fuelExtra;\n    }\n\n    return Math.round(fuel);\n  }\n\n  resetChanneledThrust() {\n    this.channeled = 0;\n  }\n\n  addChanneledThrust(channel) {\n    this.channeled += channel;\n  }\n\n  setChanneledThrust(channel) {\n    this.channeled = channel;\n  }\n\n  getChanneledThrust() {\n    return this.channeled;\n  }\n\n  getIconText() {\n    return this.channeled + \"/\" + this.getThrustOutput();\n  }\n\n  serialize(payload, previousResponse = []) {\n    return {\n      ...previousResponse,\n      thrustChannelSystemStrategy: {\n        channeled: this.channeled,\n        newMode: this.newMode,\n        mode: this.mode,\n      },\n    };\n  }\n\n  deserialize(data = {}) {\n    const thisData = data.thrustChannelSystemStrategy || {};\n    this.channeled = thisData.channeled || 0;\n    this.newMode = thisData.newMode || null;\n    this.mode = thisData.mode || this.mode;\n\n    return this;\n  }\n\n  getDirectionString() {\n    if (Array.isArray(this.direction)) {\n      return this.direction\n        .map((direction) => directionsToString[direction])\n        .join(\", \");\n    }\n\n    return directionsToString[this.direction];\n  }\n\n  getMessages(payload, previousResponse = []) {\n    previousResponse.push({\n      header: \"Mode\",\n      value: this.mode.charAt(0).toUpperCase() + this.mode.substring(1),\n    });\n\n    previousResponse.push({\n      header: \"Output\",\n      value: this.getThrustOutput(),\n    });\n\n    previousResponse.push({\n      header: \"Manouver(s)\",\n      value: this.getDirectionString(),\n    });\n\n    previousResponse.push({\n      header: \"Channeled\",\n      value: this.channeled,\n    });\n\n    previousResponse.push({\n      header: \"Fuel expended\",\n      value: this.getFuelRequirement(),\n    });\n\n    return previousResponse;\n  }\n\n  getBackgroundImage() {\n    if (this.mode === THRUSTER_MODE_FUSION) {\n      if (this.callHandler(\"isDirection\", 3, false)) {\n        return \"/img/system/thruster2.png\";\n      } else if (this.callHandler(\"isDirection\", 2, false)) {\n        return \"/img/system/thruster4.png\";\n      } else if (this.callHandler(\"isDirection\", 5, false)) {\n        return \"/img/system/thruster3.png\";\n      }\n      return \"/img/system/thruster1.png\";\n    } else {\n      if (this.callHandler(\"isDirection\", 3, false)) {\n        return \"/img/system/thrusterC2.png\";\n      } else if (this.callHandler(\"isDirection\", 2, false)) {\n        return \"/img/system/thrusterC4.png\";\n      } else if (this.callHandler(\"isDirection\", 5, false)) {\n        return \"/img/system/thrusterC3.png\";\n      }\n      return \"/img/system/thrusterC1.png\";\n    }\n  }\n\n  getTooltipMenuButton({ myShip }, previousResponse = []) {\n    if (!myShip) {\n      return previousResponse;\n    }\n\n    if (this.system.isDisabled()) {\n      return previousResponse;\n    }\n\n    if (!this.canChangeMode()) {\n      return previousResponse;\n    }\n\n    return [\n      ...previousResponse,\n      {\n        sort: 50,\n        img:\n          this.mode === THRUSTER_MODE_FUSION\n            ? \"/img/system/thrusterC1.png\"\n            : \"/img/system/thruster1.png\",\n        onClickHandler: this.changeMode.bind(this),\n        onDisabledHandler: () => false,\n      },\n    ];\n  }\n\n  generatesHeat() {\n    return true;\n  }\n\n  getHeatPerThrustChanneled() {\n    let heat = this.getBaseHeatPerThrustChanneled();\n\n    heat *=\n      1 +\n      this.system.damage\n        .getCriticals()\n        .filter((critical) => critical instanceof ThrustChannelHeatIncreased)\n        .reduce((total, current) => total + current.getHeatIncrease(), 0);\n\n    return heat;\n  }\n\n  getHeatGenerated(payload, previousResponse = 0) {\n    let count = this.channeled;\n    let extra = 1;\n    let heat = 0;\n\n    const boost = this.system.callHandler(\"getBoost\", null, 0) * 0.05;\n    let extraIncrement = this.thrustHeatExtra - boost * 0.01;\n\n    if (extraIncrement < 0.01) {\n      extraIncrement = 0.01;\n    }\n\n    while (count--) {\n      const increase = this.getHeatPerThrustChanneled() * extra;\n      heat += increase;\n      extra += extraIncrement;\n    }\n\n    return previousResponse + heat;\n  }\n\n  getThrustDirection(payload, previousResponse = null) {\n    return this.direction;\n  }\n\n  getThrustOutput(payload, previousResponse = 0) {\n    if (this.system.isDisabled()) {\n      return previousResponse;\n    }\n\n    let output = this.output;\n\n    output -= this.system.damage\n      .getCriticals()\n      .filter((critical) => critical instanceof OutputReduced)\n      .reduce((total, current) => total + current.getOutputReduction(), 0);\n\n    output += this.system.callHandler(\"getBoost\", null, 0);\n\n    if (output < 0) {\n      output = 0;\n    }\n\n    return previousResponse + output;\n  }\n\n  getMaxChannelAmount() {\n    return this.getThrustOutput();\n  }\n\n  canChannelAmount(amount) {\n    return amount <= this.getMaxChannelAmount();\n  }\n\n  getChannelCost(amount) {\n    return amount;\n  }\n\n  isThruster(payload, previousResponse = 0) {\n    return true;\n  }\n\n  isDirection(direction) {\n    return (\n      this.direction === direction ||\n      (Array.isArray(this.direction) && this.direction.includes(direction))\n    );\n  }\n\n  getRequiredPhasesForReceivingPlayerData(payload, previousResponse = 1) {\n    if (previousResponse > 3) {\n      return previousResponse;\n    }\n\n    return 3;\n  }\n\n  receivePlayerData({ clientSystem, phase }) {\n    if (phase !== 3) {\n      return;\n    }\n\n    if (!clientSystem) {\n      return;\n    }\n\n    if (this.system.isDisabled()) {\n      return;\n    }\n\n    const clientStrategy = clientSystem.getStrategiesByInstance(\n      ThrustChannelSystemStrategy\n    )[0];\n\n    const targetMode = clientStrategy.newMode;\n\n    if (targetMode === null) {\n      return;\n    }\n\n    if (!this.canChangeMode() || !this.alternateModes.includes(targetMode)) {\n      throw new Error(`This system can not change mode to ${targetMode}`);\n    }\n\n    this.mode = targetMode;\n    this.targetMode = null;\n    this.system.callHandler(\"resetBoost\");\n  }\n\n  advanceTurn() {\n    this.channeled = 0;\n    this.targetMode = null;\n  }\n\n  getPossibleCriticals(payload, previousResponse = []) {\n    return [\n      ...previousResponse,\n\n      { severity: 20, critical: new ThrustChannelHeatIncreased(0.5, 1) },\n      {\n        severity: 30,\n        critical: new OutputReduced(Math.ceil(this.output / 4), 2),\n      },\n      { severity: 40, critical: new ThrustChannelHeatIncreased(0.5, 3) },\n      { severity: 60, critical: new ThrustChannelHeatIncreased(0.5) },\n      { severity: 70, critical: new OutputReduced(Math.ceil(this.output / 4)) },\n      { severity: 80, critical: new OutputReduced(Math.ceil(this.output / 3)) },\n      { severity: 90, critical: new OutputReduced(Math.ceil(this.output / 2)) },\n    ];\n  }\n\n  onSystemOffline() {\n    this.onSystemPowerLevelDecrease();\n  }\n\n  onSystemPowerLevelIncrease() {\n    this.onSystemPowerLevelDecrease();\n  }\n\n  onSystemPowerLevelDecrease() {\n    if (\n      !this.system ||\n      !this.system.shipSystems ||\n      !this.system.shipSystems.ship\n    ) {\n      return;\n    }\n\n    this.system.shipSystems.ship.movement.revertMovementsUntilValidMovement();\n  }\n}\n\nexport default ThrustChannelSystemStrategy;\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass AllowsEvasionSystemStrategy extends ShipSystemStrategy {\r\n  constructor(evasion) {\r\n    super();\r\n\r\n    this.evasion = evasion || 0;\r\n  }\r\n\r\n  getMaxEvasion(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + this.evasion;\r\n  }\r\n}\r\n\r\nexport default AllowsEvasionSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\nimport {\r\n  OutputReduced2,\r\n  OutputReduced4,\r\n  OutputReduced6,\r\n  OutputReduced8\r\n} from \"../criticals/index.mjs\";\r\nimport * as ewTypes from \"../../../electronicWarfare/electronicWarfareTypes.mjs\";\r\nimport ElectronicWarfareEntry from \"../../../electronicWarfare/ElectronicWarfareEntry.mjs\";\r\nimport Ship from \"../../Ship.mjs\";\r\nimport OutputReduced from \"../criticals/OutputReduced.mjs\";\r\n\r\nconst typeAsString = type => {\r\n  switch (type) {\r\n    case ewTypes.EW_OFFENSIVE:\r\n      return \"Offensive EW\";\r\n    case ewTypes.EW_DEFENSIVE:\r\n      return \"Defensive EW\";\r\n    case ewTypes.EW_CC:\r\n      return \"Close combat EW\";\r\n    case ewTypes.EW_OFFENSIVE_SUPPORT:\r\n      return \"Offensive support EW\";\r\n    case ewTypes.EW_DEFENSIVE_SUPPORT:\r\n      return \"Defensive EW\";\r\n    case ewTypes.EW_DISRUPTION:\r\n      return \"Disruption EW\";\r\n    case ewTypes.EW_AREA_DEFENSIVE_SUPPORT:\r\n      return \"Area defensive EW\";\r\n  }\r\n};\r\n\r\nclass ElectronicWarfareProvider extends ShipSystemStrategy {\r\n  constructor(output, allowedEwTypes) {\r\n    super();\r\n\r\n    this.output = output || 0;\r\n    this.allowedEwTypes = allowedEwTypes || [\r\n      ewTypes.EW_OFFENSIVE,\r\n      ewTypes.EW_DEFENSIVE,\r\n      ewTypes.EW_CC\r\n    ];\r\n\r\n    this.entries = [];\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      electronicWarfareProvider: [\r\n        ...this.entries.map(entry => entry.serialize())\r\n      ]\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.entries = data.electronicWarfareProvider\r\n      ? data.electronicWarfareProvider.map(\r\n          entry =>\r\n            new ElectronicWarfareEntry(\r\n              entry.type,\r\n              entry.targetShipId,\r\n              entry.amount\r\n            )\r\n        )\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Usage/Output\",\r\n      value: this.getUsageVsOutputText()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"EW type(s)\",\r\n      value: this.allowedEwTypes.map(typeAsString).join(\", \")\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getUsageVsOutputText() {\r\n    return this.getTotalEwUsed() + \"/\" + this.getEwOutput();\r\n  }\r\n\r\n  getValidEwTypes() {\r\n    return this.getValidEwTypes;\r\n  }\r\n\r\n  getEwEntry(type, targetId) {\r\n    return this.entries.find(\r\n      entry => entry.type === type && entry.targetShipId === targetId\r\n    );\r\n  }\r\n\r\n  assignEw({ type, target, amount }) {\r\n    if (target instanceof Ship) {\r\n      target = target.id;\r\n    }\r\n\r\n    if (!this.canUseEw({ type, amount })) {\r\n      throw new Error(\"Check validity first!\");\r\n    }\r\n\r\n    let entry = this.getEwEntry(type, target);\r\n    if (!entry && amount <= 0) {\r\n      return;\r\n    } else if (!entry) {\r\n      entry = new ElectronicWarfareEntry(type, target, amount);\r\n      this.entries.push(entry);\r\n    } else {\r\n      entry.addAmount(amount);\r\n    }\r\n  }\r\n\r\n  getEwEntries() {\r\n    return this.entries.map(entry => entry.clone());\r\n  }\r\n\r\n  canUseEw({ type, amount }) {\r\n    return this.canUseEwType(type) && this.canUseEwAmount(amount);\r\n  }\r\n\r\n  canUseEwType(type) {\r\n    return this.allowedEwTypes.includes(type);\r\n  }\r\n\r\n  canUseEwAmount(amount) {\r\n    return this.getEwOutput() >= this.getTotalEwUsed() + amount;\r\n  }\r\n\r\n  getUnusedCapacity() {\r\n    return this.getEwOutput() - this.getTotalEwUsed();\r\n  }\r\n\r\n  getTotalEwUsedByType(type) {\r\n    if (type === ewTypes.EW_DEFENSIVE) {\r\n      if (!this.canUseEwType(ewTypes.EW_DEFENSIVE)) {\r\n        return 0;\r\n      }\r\n\r\n      return this.getUnusedCapacity();\r\n    }\r\n\r\n    return this.entries\r\n      .filter(entry => entry.type === type)\r\n      .reduce((total, entry) => total + entry.getAmount(), 0);\r\n  }\r\n\r\n  getTotalEwUsed() {\r\n    return this.entries.reduce((total, entry) => total + entry.getAmount(), 0);\r\n  }\r\n\r\n  getOutputForBoost(payload, previousResponse = 0) {\r\n    if (previousResponse > this.output) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return this.output;\r\n  }\r\n\r\n  getEwOutput(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    let output = this.output;\r\n\r\n    output -= this.system.damage\r\n      .getCriticals()\r\n      .filter(critical => critical instanceof OutputReduced)\r\n      .reduce((total, current) => total + current.getOutputReduction(), 0);\r\n\r\n    return (\r\n      previousResponse + this.system.callHandler(\"getBoost\", null, 0) + output\r\n    );\r\n  }\r\n\r\n  isEwArray(payload, previousResponse = 0) {\r\n    return true;\r\n  }\r\n\r\n  resetEw() {\r\n    this.entries = [];\r\n  }\r\n\r\n  getPossibleCriticals(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      { severity: 20, critical: new OutputReduced(1) },\r\n      {\r\n        severity: 40,\r\n        critical: new OutputReduced(Math.ceil(this.output / 4), 2)\r\n      },\r\n      {\r\n        severity: 50,\r\n        critical: new OutputReduced(Math.ceil(this.output / 3), 2)\r\n      },\r\n\r\n      {\r\n        severity: 60,\r\n        critical: new OutputReduced(Math.ceil(this.output / 2), 2)\r\n      },\r\n      { severity: 80, critical: new OutputReduced(Math.ceil(this.output / 4)) },\r\n      { severity: 90, critical: new OutputReduced(Math.ceil(this.output / 3)) },\r\n      { severity: 100, critical: new OutputReduced(Math.ceil(this.output / 2)) }\r\n    ];\r\n  }\r\n\r\n  censorForUser({ mine }) {\r\n    if (!mine) {\r\n      this.entries = [];\r\n    }\r\n  }\r\n\r\n  onSystemOffline() {\r\n    this.onSystemPowerLevelDecrease();\r\n  }\r\n\r\n  onSystemPowerLevelDecrease() {\r\n    if (\r\n      !this.system ||\r\n      !this.system.shipSystems ||\r\n      !this.system.shipSystems.ship\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.system.shipSystems.ship.electronicWarfare.repeatElectonicWarfare();\r\n  }\r\n}\r\n\r\nexport default ElectronicWarfareProvider;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass LargerHitProfileOnlineSystemStrategy extends ShipSystemStrategy {\r\n  constructor(front, side, hitSizeMultiplier = 0) {\r\n    super();\r\n\r\n    this.front = front;\r\n    this.side = side;\r\n    this.hitSizeMultiplier = hitSizeMultiplier;\r\n    this.turnsOffline = 0;\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      largerHitProfileOnlineSystemStrategy: {\r\n        turnsOffline: this.turnsOffline,\r\n      },\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    const thisData = data.largerHitProfileOnlineSystemStrategy || {};\r\n    this.turnsOffline = thisData.turnsOffline || 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  getHitSystemSizeMultiplier(payload, previousResponse = 1) {\r\n    if (\r\n      (this.system.isDestroyed() && this.turnsOffline > 0) ||\r\n      this.turnsOffline > 1\r\n    ) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + this.hitSizeMultiplier;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Increases profile when online\",\r\n      value: `${this.front}/${this.side}`,\r\n    });\r\n    previousResponse.push({\r\n      header: \"Modifies system hit allocation size\",\r\n      value: `x${this.hitSizeMultiplier}`,\r\n    });\r\n\r\n    if (!this.system.isDestroyed()) {\r\n      if (this.turnsOffline > 1) {\r\n        previousResponse.push({\r\n          value: `NOTE: System has been offline long enough for the profile increase to cease.`,\r\n        });\r\n      } else {\r\n        previousResponse.push({\r\n          value: `NOTE: System has to be offline ${\r\n            2 - this.turnsOffline\r\n          } turn(s) before profile increase ceases.`,\r\n        });\r\n      }\r\n    } else {\r\n      previousResponse.push({\r\n        value: `NOTE: Destroyed system will not increase ship profile.`,\r\n      });\r\n    }\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getHitProfile({ front = true }, previousResponse = 0) {\r\n    if (\r\n      (this.system.isDestroyed() && this.turnsOffline > 0) ||\r\n      this.turnsOffline > 1\r\n    ) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (front) {\r\n      return previousResponse + this.front;\r\n    } else {\r\n      return previousResponse + this.side;\r\n    }\r\n  }\r\n\r\n  advanceTurn() {\r\n    if (this.system.isDisabled()) {\r\n      this.turnsOffline++;\r\n    } else {\r\n      this.turnsOffline = 0;\r\n    }\r\n  }\r\n\r\n  onGameStart() {\r\n    console.log(\"is online\", this.system.power.isOnline());\r\n    if (this.system.power.isOnline()) {\r\n      console.log(\"set offline\");\r\n      this.system.power.setOffline();\r\n    }\r\n\r\n    this.turnsOffline = 99;\r\n  }\r\n}\r\n\r\nexport default LargerHitProfileOnlineSystemStrategy;\r\n","import BoostableSystemStrategy from \"./BoostableSystemStrategy.mjs\";\r\n\r\nclass BoostablePlusOneOutputSystemStrategy extends BoostableSystemStrategy {\r\n  constructor(maxLevel = null, basePowerRequirement = null) {\r\n    super(0, maxLevel);\r\n    this.basePowerRequirement = basePowerRequirement;\r\n  }\r\n\r\n  getPowerRequiredForBoost(payload, previousResponse = 0) {\r\n    const output =\r\n      this.basePowerRequirement !== null\r\n        ? this.basePowerRequirement\r\n        : this.system.callHandler(\"getOutputForBoost\", null, 0);\r\n    return output + this.boostLevel + previousResponse + 1;\r\n  }\r\n\r\n  getPowerRequirement(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    const output =\r\n      this.basePowerRequirement !== null\r\n        ? this.basePowerRequirement\r\n        : this.system.callHandler(\"getOutputForBoost\", null, 0);\r\n    const power = this.boostLevel * output + this.boostLevel;\r\n    return power + previousResponse;\r\n  }\r\n}\r\n\r\nexport default BoostablePlusOneOutputSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass ArmorBoostOfflineSystemStrategy extends ShipSystemStrategy {\r\n  constructor(armorBoost = 1) {\r\n    super();\r\n\r\n    this.armorBoost = armorBoost;\r\n  }\r\n\r\n  getArmorModifier(payload, previousResponse = 0) {\r\n    if (!this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + this.armorBoost;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Increased armor when offline\",\r\n      value: `+${this.armorBoost}`\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n}\r\n\r\nexport default ArmorBoostOfflineSystemStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass OutputHeatOnlineStrategy extends ShipSystemStrategy {\r\n  constructor(\r\n    heatOutput,\r\n    heatOutputPerBoostLevel = 1,\r\n    overheatTransferRatio = 0.5\r\n  ) {\r\n    super();\r\n    this.heatOutput = heatOutput;\r\n    this.heatOutputPerBoostLevel = heatOutputPerBoostLevel;\r\n    this.overheatTransferRatio = overheatTransferRatio;\r\n  }\r\n\r\n  getOverheatTransferRatio(payload, previousResponse = 0) {\r\n    if (previousResponse && previousResponse < this.overheatTransferRatio) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return this.overheatTransferRatio;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    return previousResponse;\r\n  }\r\n\r\n  generatesHeat() {\r\n    return true;\r\n  }\r\n\r\n  getHeatGenerated(payload, previousResponse = 0) {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    const boostLevel = this.system.callHandler(\"getBoost\", null, 0);\r\n\r\n    return (\r\n      previousResponse +\r\n      this.heatOutput +\r\n      boostLevel * this.heatOutputPerBoostLevel\r\n    );\r\n  }\r\n}\r\n\r\nexport default OutputHeatOnlineStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass FireOrderHeatStrategy extends ShipSystemStrategy {\r\n  constructor(heatPerFireOrder) {\r\n    super();\r\n    this.heatPerFireOrder = heatPerFireOrder;\r\n  }\r\n\r\n  generatesHeat() {\r\n    return true;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    return previousResponse;\r\n  }\r\n\r\n  getHeatGenerated(payload, previousResponse = 0) {\r\n    const fireOrders = this.system.callHandler(\"getFireOrders\", null, []);\r\n\r\n    if (fireOrders.length === 0) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return previousResponse + fireOrders * this.heatPerFireOrder;\r\n  }\r\n}\r\n\r\nexport default FireOrderHeatStrategy;\r\n","import ShipSystemStrategy from \"./ShipSystemStrategy.mjs\";\r\n\r\nclass AlwaysTargetableSystemStrategy extends ShipSystemStrategy {\r\n  constructor(turnsOfflineToCancel = null) {\r\n    super();\r\n\r\n    this.turnsOfflineToCancel = turnsOfflineToCancel;\r\n    this.turnsOffline = 0;\r\n  }\r\n\r\n  canBeTargeted(payload, previousResponse = false) {\r\n    if (this.system.isDestroyed()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (\r\n      this.turnsOfflineToCancel !== null &&\r\n      this.turnsOffline >= this.turnsOfflineToCancel\r\n    ) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      alwaysTargetableSystemStrategy: {\r\n        turnsOffline: this.turnsOffline\r\n      }\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    const thisData = data.alwaysTargetableSystemStrategy || {};\r\n    this.turnsOffline = thisData.turnsOffline || 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    if (this.system.isDestroyed()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.turnsOfflineToCancel === null) {\r\n      previousResponse.push({\r\n        value: `This system can always be hit, regardless of attack direction`\r\n      });\r\n    } else {\r\n      if (this.turnsOffline >= this.turnsOfflineToCancel) {\r\n        previousResponse.push({\r\n          value: `This system has been ofline long enough to not be a valid target`\r\n        });\r\n      } else {\r\n        previousResponse.push({\r\n          value: `This system has to be ofline ${this.turnsOfflineToCancel -\r\n            this.turnsOffline} more turn to not be a valid target`\r\n        });\r\n      }\r\n    }\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  advanceTurn() {\r\n    if (this.system.isDisabled()) {\r\n      this.turnsOffline++;\r\n    } else {\r\n      this.turnsOffline = 0;\r\n    }\r\n  }\r\n}\r\n\r\nexport default AlwaysTargetableSystemStrategy;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\nimport WeaponHitChance from \"../../../../weapon/WeaponHitChance.mjs\";\r\nimport CombatLogWeaponFireHitResult from \"../../../../combatLog/CombatLogWeaponFireHitResult.mjs\";\r\n\r\nclass StandardHitStrategy extends ShipSystemStrategy {\r\n  constructor(fireControl = 0, numberOfShots = 1) {\r\n    super();\r\n    this.fireControl = fireControl;\r\n    this.numberOfShots = numberOfShots;\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Fire control\",\r\n      value: this.fireControl,\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  getBaseHitChance({ shooter, target }) {\r\n    return target.getHitProfile(shooter.getPosition());\r\n  }\r\n\r\n  checkFireOrderHits({ shooter, target, weaponSettings, combatLogEntry }) {\r\n    const toHit = this.getHitChance({ shooter, target, weaponSettings });\r\n    const roll = Math.ceil(Math.random() * 100);\r\n\r\n    const hit = roll <= toHit.result;\r\n\r\n    const result = new CombatLogWeaponFireHitResult(hit, toHit, roll);\r\n    combatLogEntry.addHitResult(result);\r\n\r\n    return result;\r\n  }\r\n\r\n  getFireControl() {\r\n    return this.fireControl;\r\n  }\r\n\r\n  getHitChance({ shooter, target, weaponSettings = {} }) {\r\n    const baseToHit = this.system.callHandler(\"getBaseHitChance\", {\r\n      shooter,\r\n      target,\r\n      weaponSettings,\r\n    });\r\n\r\n    const dew = target.electronicWarfare.inEffect.getDefensiveEw();\r\n    const oew = shooter.electronicWarfare.inEffect.getOffensiveEw(target);\r\n\r\n    let distance = shooter.hexDistanceTo(target);\r\n\r\n    const initialRangeModifier = this.system.callHandler(\"getRangeModifier\", {\r\n      distance: distance,\r\n      weaponSettings,\r\n    });\r\n\r\n    const rangeModifier =\r\n      initialRangeModifier * (1 + target.movement.getActiveEvasion() / 10);\r\n\r\n    const evasionPenalty = rangeModifier - initialRangeModifier;\r\n\r\n    const rollingPenalty = shooter.movement.isRolling() ? -20 : 0;\r\n\r\n    const noLockPenalty = oew >= 1 ? 0 : -this.getFireControl();\r\n    const ownEvasionPenalty = -shooter.movement.getActiveEvasion() * 5;\r\n\r\n    let result =\r\n      baseToHit +\r\n      rollingPenalty +\r\n      this.getFireControl() +\r\n      oew * 5 -\r\n      dew * 5 +\r\n      rangeModifier +\r\n      noLockPenalty +\r\n      ownEvasionPenalty;\r\n\r\n    if (rangeModifier === false) {\r\n      result = 0;\r\n    }\r\n\r\n    const onRange = this.system.callHandler(\"isOnRange\", { distance });\r\n    const absoluteResult = result;\r\n    result = Math.floor(result);\r\n\r\n    if (result < 0) {\r\n      result = 0;\r\n    }\r\n\r\n    return new WeaponHitChance({\r\n      baseToHit,\r\n      fireControl: this.fireControl,\r\n      dew: dew,\r\n      oew: oew,\r\n      distance,\r\n      rangeModifier,\r\n      evasion: target.movement.getActiveEvasion(),\r\n      evasionPenalty: evasionPenalty,\r\n      result: onRange ? result : 0,\r\n      absoluteResult,\r\n      outOfRange: !onRange,\r\n      rollingPenalty,\r\n      noLockPenalty,\r\n      ownEvasionPenalty,\r\n    });\r\n  }\r\n}\r\n\r\nexport default StandardHitStrategy;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\n\r\nclass StandardRangeStrategy extends ShipSystemStrategy {\r\n  constructor(rangesAndPenalties) {\r\n    super();\r\n\r\n    this.rangesAndPenalties = rangesAndPenalties || [];\r\n  }\r\n\r\n  getUiComponents(payload, previousResponse = []) {\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        name: \"RangePenalty\",\r\n        props: {\r\n          rangeStrategy: this\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  isOnRange({ distance }) {\r\n    return distance <= this.getMaxRange();\r\n  }\r\n\r\n  getMaxRange() {\r\n    return this.rangesAndPenalties[this.rangesAndPenalties.length - 1].range;\r\n  }\r\n\r\n  getRangeModifier({ distance: currentRange }) {\r\n    const exactModifier = this.rangesAndPenalties.find(\r\n      ({ range }) => range === currentRange\r\n    );\r\n\r\n    if (exactModifier) {\r\n      return exactModifier.modifier;\r\n    }\r\n\r\n    let start = null;\r\n    let end = null;\r\n\r\n    this.rangesAndPenalties.forEach(({ range, modifier }) => {\r\n      if ((start === null || range > start.range) && range < currentRange) {\r\n        start = { range, modifier };\r\n      } else if ((end === null || range < end.range) && range > currentRange) {\r\n        end = { range, modifier };\r\n      }\r\n    });\r\n\r\n    if (!end) {\r\n      return -200;\r\n    }\r\n\r\n    const difference = end.modifier - start.modifier;\r\n    const distance = end.range - start.range;\r\n    return Math.round(\r\n      start.modifier + (difference * (currentRange - start.range)) / distance\r\n    );\r\n  }\r\n}\r\n\r\nexport default StandardRangeStrategy;\r\n","class CombatLogWeaponOutOfArc {\r\n  constructor(fireOrderId) {\r\n    this.fireOrderId = fireOrderId;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      fireOrderId: this.fireOrderId\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.fireOrderId = data.fireOrderId;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogWeaponOutOfArc;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\nimport FireOrder from \"../../../../weapon/FireOrder.mjs\";\r\nimport CombatLogWeaponOutOfArc from \"../../../../combatLog/CombatLogWeaponOutOfArc.mjs\";\r\nimport CombatLogWeaponFire from \"../../../../combatLog/CombatLogWeaponFire.mjs\";\r\n\r\nclass FireOrderStrategy extends ShipSystemStrategy {\r\n  constructor(numberOfShots = 1, resolutionPriority = 10) {\r\n    super();\r\n\r\n    this.numberOfShots = numberOfShots;\r\n    this.resolutionPriority = resolutionPriority;\r\n\r\n    this.fireOrders = [];\r\n  }\r\n\r\n  executeFireOrders({ gameData }) {\r\n    this.fireOrders.forEach((fireOrder) => {\r\n      const weapon = this.system;\r\n      const shooter = gameData.ships.getShipById(fireOrder.shooterId);\r\n      const target = gameData.ships.getShipById(fireOrder.targetId);\r\n      const weaponSettings = fireOrder.weaponSettings;\r\n\r\n      /*\r\n      if (!this.system.callHandler(\"isOnArc\", { shooter, target })) {\r\n        gameData.combatLog.addEntry(new CombatLogWeaponOutOfArc(fireOrder.id));\r\n        return false;\r\n      }\r\n      */\r\n\r\n      if (!this.system.callHandler(\"canFire\", { shooter, target }, true)) {\r\n        return false;\r\n      }\r\n\r\n      const combatLogEntry = new CombatLogWeaponFire(\r\n        fireOrder.id,\r\n        fireOrder.targetId,\r\n        fireOrder.shooterId,\r\n        weapon.callHandler(\"getSelectedAmmo\", null, null)\r\n      );\r\n\r\n      const hitResolution = weapon.callHandler(\"checkFireOrderHits\", {\r\n        shooter,\r\n        target,\r\n        weaponSettings,\r\n        gameData,\r\n        fireOrder,\r\n        combatLogEntry,\r\n      });\r\n\r\n      weapon.callHandler(\"applyDamageFromWeaponFire\", {\r\n        shooter,\r\n        target,\r\n        weaponSettings,\r\n        gameData,\r\n        fireOrder,\r\n        combatLogEntry,\r\n        hitResolution,\r\n      });\r\n\r\n      weapon.callHandler(\"onWeaponFired\");\r\n      fireOrder.setResolved();\r\n      gameData.combatLog.addEntry(combatLogEntry);\r\n    });\r\n  }\r\n\r\n  usesFireOrders() {\r\n    return true;\r\n  }\r\n\r\n  getNumberOfShots() {\r\n    return this.numberOfShots;\r\n  }\r\n\r\n  getFireOrderResolutionPriority() {\r\n    return this.resolutionPriority;\r\n  }\r\n\r\n  hasFireOrder() {\r\n    return this.fireOrders.length > 0;\r\n  }\r\n\r\n  getFireOrders() {\r\n    return this.fireOrders;\r\n  }\r\n\r\n  removeFireOrders() {\r\n    this.fireOrders = [];\r\n  }\r\n\r\n  addFireOrder({ shooter, target, weaponSettings }) {\r\n    this.fireOrders = [];\r\n\r\n    let shots = this.numberOfShots;\r\n    while (shots--) {\r\n      const order = new FireOrder(shooter, target, this.system, weaponSettings);\r\n      this.fireOrders.push(order);\r\n    }\r\n\r\n    return this.fireOrders;\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      fireOrderStrategy: this.fireOrders.map((fire) => fire.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.fireOrders = data.fireOrderStrategy\r\n      ? data.fireOrderStrategy.map((entry) =>\r\n          new FireOrder().deserialize(entry)\r\n        )\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  advanceTurn(turn) {\r\n    this.fireOrders = [];\r\n  }\r\n\r\n  censorForUser({ mine }) {\r\n    if (!mine) {\r\n      this.fireOrders = [];\r\n    }\r\n  }\r\n\r\n  onSystemOffline() {\r\n    this.removeFireOrders();\r\n  }\r\n}\r\n\r\nexport default FireOrderStrategy;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\nimport { LoadingTimeIncreased } from \"../../criticals/index.mjs\";\n\nclass StandardLoadingStrategy extends ShipSystemStrategy {\n  constructor(loadingTime) {\n    super();\n    this.loadingTime = loadingTime;\n    this.turnsLoaded = loadingTime;\n    this.firedThisTurn = false;\n  }\n\n  getMessages(payload, previousResponse = []) {\n    const boostLoading = this._getBoostLoading();\n    let loading = 1 + boostLoading;\n\n    if (!Number.isInteger(loading)) {\n      loading = loading.toFixed(1);\n    }\n\n    let turnsLoaded = this.turnsLoaded;\n\n    if (!Number.isInteger(turnsLoaded)) {\n      turnsLoaded = turnsLoaded.toFixed(1);\n    }\n\n    const loadingTime = this.getLoadingTime();\n\n    if (turnsLoaded > loadingTime) {\n      turnsLoaded = loadingTime;\n    }\n\n    previousResponse.push({\n      header: \"Charging\",\n      value: `${turnsLoaded} / ${loadingTime} +${loading} per turn`\n    });\n\n    const boostPower = this.system.callHandler(\n      \"getPowerRequiredForBoost\",\n      null,\n      0\n    );\n\n    if (boostPower) {\n      previousResponse.push({\n        header: \"Charging boostable\",\n        value: `${boostPower} power required`\n      });\n    }\n\n    return previousResponse;\n  }\n\n  _getTurnsUntilLoaded() {\n    const left = this.getLoadingTime() - this.turnsLoaded;\n    const loadingPerTurn = 1 + this._getBoostLoading();\n\n    return Math.ceil(left / loadingPerTurn);\n  }\n\n  getIconText(payload, previousResponse = \"\") {\n    if (this.system.isDisabled()) {\n      return previousResponse;\n    }\n\n    const left = this._getTurnsUntilLoaded();\n    if (left <= 0) {\n      return previousResponse;\n    }\n\n    return `-${left}T`;\n  }\n\n  canFire(payload, previousResponse = true) {\n    if (!this.isLoaded()) {\n      return false;\n    }\n\n    return previousResponse;\n  }\n\n  usesLoading() {\n    return true;\n  }\n\n  onWeaponFired() {\n    this.firedThisTurn = true;\n  }\n\n  getLoadingTime() {\n    const extra = this.system.damage\n      .getCriticals()\n      .filter(critical => critical instanceof LoadingTimeIncreased)\n      .reduce((total, current) => total + current.getLoadingTimeIncrease(), 0);\n\n    return this.loadingTime + extra;\n  }\n\n  getTurnsLoaded() {\n    return this.turnsLoaded;\n  }\n\n  isReady(payload, previousResponse = null) {\n    if (previousResponse === false) {\n      return false;\n    }\n\n    return this.isLoaded();\n  }\n\n  isLoaded() {\n    return this.turnsLoaded >= this.getLoadingTime();\n  }\n\n  serialize(payload, previousResponse = []) {\n    return {\n      ...previousResponse,\n      standardLoadingStrategy: {\n        turnsLoaded: this.turnsLoaded\n      }\n    };\n  }\n\n  deserialize(data = {}) {\n    this.turnsLoaded = data.standardLoadingStrategy\n      ? data.standardLoadingStrategy.turnsLoaded\n      : 0;\n\n    return this;\n  }\n\n  advanceTurn() {\n    if (this.system.isDisabled()) {\n      this.turnsLoaded = 0;\n      return;\n    }\n\n    if (this.firedThisTurn) {\n      this.turnsLoaded = 0;\n      this.firedThisTurn = false;\n    }\n\n    const loadingStep = 1 + this._getBoostLoading();\n    this.turnsLoaded += loadingStep;\n  }\n\n  _getBoostLoading() {\n    let boost = this.system.callHandler(\"getBoost\", null, 0);\n\n    if (!boost) {\n      return 0;\n    }\n\n    const targetLoading = this.getLoadingTime() - boost;\n    return this.getLoadingTime() / targetLoading - 1;\n  }\n\n  getPossibleCriticals(payload, previousResponse = []) {\n    return [\n      ...previousResponse,\n      {\n        severity: 40,\n        critical: new LoadingTimeIncreased(this.loadingTime, 1)\n      },\n      {\n        severity: 80,\n        critical: new LoadingTimeIncreased(this.loadingTime * 3, 1)\n      },\n      { severity: 100, critical: new LoadingTimeIncreased(null, 1) }\n    ];\n  }\n}\n\nexport default StandardLoadingStrategy;\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\nimport {\r\n  addToDirection,\r\n  getCompassHeadingOfPoint,\r\n  hexFacingToAngle,\r\n} from \"../../../../utils/math.mjs\";\r\n\r\nclass WeaponArcStrategy extends ShipSystemStrategy {\r\n  constructor(arcs = []) {\r\n    super();\r\n\r\n    this.arcs = [].concat(arcs);\r\n  }\r\n\r\n  hasArcs() {\r\n    return true;\r\n  }\r\n\r\n  isPositionOnArc({ targetPosition }) {\r\n    const shooter = this.system.shipSystems.ship;\r\n    const targetHeading = getCompassHeadingOfPoint(\r\n      shooter.getPosition(),\r\n      targetPosition\r\n    );\r\n\r\n    const shooterFacing = hexFacingToAngle(shooter.getFacing());\r\n    const arcs = this.getArcs({ facing: shooterFacing });\r\n\r\n    return arcs.some(({ start, end }) => {\r\n      if (end === start) {\r\n        return true;\r\n      } else if (end > start) {\r\n        return targetHeading >= start && targetHeading <= end;\r\n      } else if (start > end) {\r\n        return targetHeading <= end || targetHeading >= start;\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  isOnArc({ target }) {\r\n    return this.isPositionOnArc({ targetPosition: target.getPosition() });\r\n  }\r\n\r\n  getArcs({ facing = 0 }) {\r\n    return this.arcs.map(({ start, end }) => {\r\n      if (this.system.shipSystems.ship.movement.isRolled()) {\r\n        return {\r\n          start: addToDirection(addToDirection(0, -end), facing),\r\n          end: addToDirection(addToDirection(0, -start), facing),\r\n        };\r\n      }\r\n\r\n      return {\r\n        start: addToDirection(start, facing),\r\n        end: addToDirection(end, facing),\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nexport default WeaponArcStrategy;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { PowerOutputSystemStrategy } from \"../strategy/index.mjs\";\r\n\r\nclass Reactor extends ShipSystem {\r\n  constructor(args, output) {\r\n    super(args, [new PowerOutputSystemStrategy(output)]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Reactor\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/reactor.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getPowerOutput\");\r\n  }\r\n}\r\n\r\nexport default Reactor;\r\n","import StandardDamageStrategy from \"./StandardDamageStrategy.mjs\";\r\nimport Reactor from \"../../reactor/Reactor.mjs\";\r\n\r\nclass TestDamageStrategy extends StandardDamageStrategy {\r\n  constructor(damage) {\r\n    super();\r\n\r\n    this.damage = damage;\r\n  }\r\n\r\n  _getDamageForWeaponHit({ requiredToHit, rolledToHit }) {\r\n    return this.damage;\r\n  }\r\n\r\n  _chooseHitSystem({ target, shooterPosition }) {\r\n    const systems = target.systems.getSystemsForHit(shooterPosition);\r\n    return systems.find(system => system instanceof Reactor);\r\n  }\r\n\r\n  _getArmorPiercing() {\r\n    return 1000;\r\n  }\r\n}\r\n\r\nexport default TestDamageStrategy;\r\n","import StandardDamageStrategy from \"./StandardDamageStrategy.mjs\";\r\nimport CombatLogDamageEntry from \"../../../../combatLog/CombatLogDamageEntry.mjs\";\r\n\r\nclass BurstDamageStrategy extends StandardDamageStrategy {\r\n  constructor(\r\n    damageFormula,\r\n    armorPiercingFormula,\r\n    shotsFormula = 6,\r\n    maxShots = 6,\r\n    grouping = 10\r\n  ) {\r\n    super(damageFormula, armorPiercingFormula);\r\n\r\n    this.shotsFormula = shotsFormula;\r\n    this.maxShots = maxShots;\r\n    this.grouping = grouping;\r\n  }\r\n\r\n  getTotalBurstSize() {\r\n    return this.maxShots;\r\n  }\r\n\r\n  applyDamageFromWeaponFire(payload) {\r\n    const { fireOrder, combatLogEntry } = payload;\r\n    const shots = this._getNumberOfShots(payload);\r\n\r\n    combatLogEntry.setShots(shots, this.maxShots);\r\n\r\n    Array.from(Array(shots)).map(() => {\r\n      const result = new CombatLogDamageEntry();\r\n      combatLogEntry.addDamage(result);\r\n      this._doDamage(\r\n        { shooterPosition: payload.shooter.getPosition(), ...payload },\r\n        result\r\n      );\r\n      return result;\r\n    });\r\n  }\r\n\r\n  _getDamageTypeMessage() {\r\n    return \"Burst\";\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Damage type\",\r\n      value: this._getDamageTypeMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Burst size\",\r\n      value: this.maxShots\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Burst grouping\",\r\n      value: this.grouping\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Damage\",\r\n      value: this._getDamageMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Armor piercing\",\r\n      value: this._getArmorPiercingMessage()\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  _getNumberOfShots({ hitResolution }) {\r\n    const requiredToHit = hitResolution.hitChance.result;\r\n    const rolledToHit = hitResolution.hitRoll;\r\n\r\n    if (rolledToHit > requiredToHit) {\r\n      return 0;\r\n    }\r\n\r\n    if (rolledToHit <= requiredToHit - this.maxShots * this.grouping) {\r\n      return this.maxShots;\r\n    }\r\n\r\n    let shots = Math.floor((requiredToHit - rolledToHit) / this.grouping);\r\n\r\n    if (Number.isInteger(this.shotsFormula)) {\r\n      shots += this.shotsFormula;\r\n    } else {\r\n      shots += this.diceRoller.roll(this.shotsFormula).total;\r\n    }\r\n\r\n    if (shots > this.maxShots) {\r\n      shots = this.maxShots;\r\n    }\r\n\r\n    if (shots <= 0) {\r\n      shots = 1;\r\n    }\r\n\r\n    return shots;\r\n  }\r\n}\r\n\r\nexport default BurstDamageStrategy;\r\n","import StandardDamageStrategy from \"./StandardDamageStrategy.mjs\";\r\nimport Structure from \"../../structure/Structure.mjs\";\r\n\r\nclass PiercingDamageStrategy extends StandardDamageStrategy {\r\n  constructor(damageFormula, armorPiercingFormula) {\r\n    super(damageFormula, armorPiercingFormula);\r\n  }\r\n\r\n  _getDamageTypeMessage() {\r\n    return \"Piercing\";\r\n  }\r\n\r\n  getMessages(payload, previousResponse = []) {\r\n    previousResponse.push({\r\n      header: \"Damage type\",\r\n      value: this._getDamageTypeMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      value:\r\n        \"Piercing will cause damage multiple times applying new damage each time, until it runs out of armor piercing.\" +\r\n        \" Piercing will not damage other than structures multiple times.\"\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Damage\",\r\n      value: this._getDamageMessage()\r\n    });\r\n\r\n    previousResponse.push({\r\n      header: \"Armor piercing\",\r\n      value: this._getArmorPiercingMessage()\r\n    });\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  _getNumberOfShots() {\r\n    return this.maxDamages;\r\n  }\r\n\r\n  _chooseHitSystem({ target, shooterPosition }, systemsHit) {\r\n    const systems = target.systems\r\n      .getSystemsForHit(shooterPosition)\r\n      .filter(system => !systemsHit.some(hit => system.id === hit.id));\r\n    return this.hitSystemRandomizer.randomizeHitSystem(systems);\r\n  }\r\n\r\n  _doDamage(\r\n    payload,\r\n    damageResult,\r\n    armorPiercing = undefined,\r\n    shotsResolved = 0,\r\n    systemsHit = []\r\n  ) {\r\n    const { target, shooterPosition, combatLogEntry } = payload;\r\n\r\n    if (armorPiercing === 0) {\r\n      combatLogEntry.addNote(\r\n        `Pierced ${shotsResolved} times. Ran out of armor piercing.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (armorPiercing === undefined) {\r\n      armorPiercing = this._getArmorPiercing(payload);\r\n    }\r\n\r\n    const hitSystem = this._chooseHitSystem(\r\n      {\r\n        target,\r\n        shooterPosition\r\n      },\r\n      systemsHit\r\n    );\r\n\r\n    if (!hitSystem) {\r\n      return;\r\n    }\r\n\r\n    let result = this._doDamageToSystem(\r\n      payload,\r\n      damageResult,\r\n      hitSystem,\r\n      armorPiercing,\r\n      this._getDamageForWeaponHit(payload)\r\n    );\r\n\r\n    armorPiercing = result.armorPiercing;\r\n\r\n    if (!(hitSystem instanceof Structure)) {\r\n      systemsHit.push(hitSystem);\r\n    }\r\n\r\n    return this._doDamage(\r\n      payload,\r\n      damageResult,\r\n      armorPiercing,\r\n      shotsResolved + 1,\r\n      systemsHit\r\n    );\r\n  }\r\n}\r\n\r\nexport default PiercingDamageStrategy;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\nimport { getCompassHeadingOfPoint } from \"../../../../utils/math.mjs\";\nimport { getDistanceBetweenDirections } from \"../../../../utils/math.mjs\";\nimport WeaponHitChance from \"../../../../weapon/WeaponHitChance.mjs\";\n\nclass InterceptorStrategy extends ShipSystemStrategy {\n  constructor(numberOfIntercepts = 1, heatPerIntercept = 0) {\n    super();\n\n    this.numberOfIntercepts = numberOfIntercepts;\n    this.heatPerIntercept = heatPerIntercept;\n    this.timesIntercepted = 0;\n  }\n\n  getInterceptHeat() {\n    return this.timesIntercepted * this.heatPerIntercept;\n  }\n\n  getHeatPerIntercept() {\n    return this.heatPerIntercept;\n  }\n\n  addTimesIntercepted(amount = 1) {\n    this.timesIntercepted += amount;\n  }\n\n  getHeatGenerated(payload, previousResponse = 0) {\n    return previousResponse + this.timesIntercepted * this.heatPerIntercept;\n  }\n\n  canIntercept() {\n    return true;\n  }\n\n  getNumberOfIntercepts() {\n    return this.numberOfIntercepts;\n  }\n\n  getInterceptChance({ target, torpedoFlight }) {\n    const ship = this.system.shipSystems.ship;\n\n    let distance = torpedoFlight.torpedo.damageStrategy.getStrikeDistance({\n      target,\n      torpedoFlight,\n    });\n\n    if (target !== ship) {\n      distance = ship\n        .getHexPosition()\n        .distanceTo(torpedoFlight.strikePosition.toOffset());\n    }\n\n    const rangeModifier =\n      this.system.callHandler(\"getRangeModifier\", {\n        distance: distance,\n      }) *\n      (1 + torpedoFlight.torpedo.getEvasion() / 10);\n\n    const fireControl = this.system.callHandler(\"getFireControl\", null, 0);\n\n    const ccew = ship.electronicWarfare.getCcEw();\n\n    const torpedoHitSize = torpedoFlight.torpedo.getHitSize();\n\n    const rollingPenalty = ship.movement.isRolling() ? -20 : 0;\n\n    return new WeaponHitChance({\n      baseToHit: torpedoHitSize,\n      fireControl,\n      dew: 0,\n      oew: ccew,\n      distance,\n      rangeModifier,\n      evasion: torpedoFlight.torpedo.getEvasion(),\n      rollingPenalty,\n      result: Math.round(\n        torpedoHitSize + rangeModifier + fireControl + ccew * 5 + rollingPenalty\n      ),\n      absoluteResult:\n        torpedoHitSize +\n        rangeModifier +\n        fireControl +\n        ccew * 5 +\n        rollingPenalty,\n    });\n  }\n\n  advanceTurn() {\n    this.timesIntercepted = 0;\n  }\n}\n\nexport default InterceptorStrategy;\n","import ShipSystem from \"../ShipSystem.mjs\";\nimport {\n  AllowsEvasionSystemStrategy,\n  ThrustChannelSystemStrategy,\n} from \"../strategy/index.mjs\";\nimport { THRUSTER_MODE_MANEUVER } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\n\nclass ManeuveringThruster extends ShipSystem {\n  constructor(args, channel, evasion) {\n    super(args, [\n      new ThrustChannelSystemStrategy(\n        channel,\n        [6, 7, 8],\n        {},\n        THRUSTER_MODE_MANEUVER\n      ),\n      new AllowsEvasionSystemStrategy(evasion),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"Maneuvering Thruster\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/maneuveringThruster.png\";\n  }\n}\n\nexport default ManeuveringThruster;\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { ThrustChannelSystemStrategy } from \"../strategy/index.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport BoostableSystemStrategy from \"../strategy/BoostableSystemStrategy.mjs\";\r\nimport { THRUSTER_MODE_FUSION } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\r\nimport { THRUSTER_MODE_CHEMICAL } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\r\n\r\nclass Thruster extends ShipSystem {\r\n  constructor(\r\n    args,\r\n    output,\r\n    direction,\r\n    { power = 1, boostPower = 1, maxBoost = null, thrustHeatExtra } = {}\r\n  ) {\r\n    super(args, [\r\n      new ThrustChannelSystemStrategy(\r\n        output,\r\n        direction,\r\n        {\r\n          thrustHeatExtra,\r\n        },\r\n        THRUSTER_MODE_FUSION,\r\n        [THRUSTER_MODE_CHEMICAL]\r\n      ),\r\n      new RequiresPowerSystemStrategy(power),\r\n    ]);\r\n\r\n    if (maxBoost !== 0 && boostPower !== 0) {\r\n      if (maxBoost === null) {\r\n        maxBoost = Math.round(output / 2);\r\n      }\r\n\r\n      this.addStrategy(new BoostableSystemStrategy(boostPower, maxBoost));\r\n    }\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"C/Fusion Hybrid Thruster\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return this.callHandler(\"getBackgroundImage\");\r\n  }\r\n}\r\n\r\nexport default Thruster;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\nimport {\n  AllowsEvasionSystemStrategy,\n  ThrustChannelSystemStrategy,\n} from \"../strategy/index.mjs\";\nimport { THRUSTER_MODE_MANEUVER } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\n\nclass ManeuveringThrusterLeft extends ShipSystem {\n  constructor(args, channel, evasion) {\n    super(args, [\n      new ThrustChannelSystemStrategy(\n        channel,\n        [6, 8],\n        {},\n        THRUSTER_MODE_MANEUVER\n      ),\n      new AllowsEvasionSystemStrategy(evasion),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"Maneuvering Thruster\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/maneuveringThrusterLeft.png\";\n  }\n}\n\nexport default ManeuveringThrusterLeft;\n","import ShipSystem from \"../ShipSystem.mjs\";\nimport {\n  AllowsEvasionSystemStrategy,\n  ThrustChannelSystemStrategy,\n} from \"../strategy/index.mjs\";\nimport { THRUSTER_MODE_MANEUVER } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\n\nclass ManeuveringThrusterRight extends ShipSystem {\n  constructor(args, channel, evasion) {\n    super(args, [\n      new ThrustChannelSystemStrategy(\n        channel,\n        [7, 8],\n        {},\n        THRUSTER_MODE_MANEUVER\n      ),\n      new AllowsEvasionSystemStrategy(evasion),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"Maneuvering Thruster\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/maneuveringThrusterRight.png\";\n  }\n}\n\nexport default ManeuveringThrusterRight;\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { ThrustChannelSystemStrategy } from \"../strategy/index.mjs\";\r\nimport { THRUSTER_MODE_CHEMICAL } from \"../strategy/ThrustChannelSystemStrategy.mjs\";\r\n\r\nclass ChemicalThruster extends ShipSystem {\r\n  constructor(args, output, direction) {\r\n    super(args, [\r\n      new ThrustChannelSystemStrategy(\r\n        output,\r\n        direction,\r\n        {},\r\n        THRUSTER_MODE_CHEMICAL\r\n      ),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Chemical Thruster\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return this.callHandler(\"getBackgroundImage\");\r\n  }\r\n}\r\n\r\nexport default ChemicalThruster;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport {\r\n  BoostableSystemStrategy,\r\n  ThrustOutputSystemStrategy,\r\n  RequiresPowerSystemStrategy\r\n} from \"../strategy/index.mjs\";\r\n\r\nclass Engine extends ShipSystem {\r\n  constructor(args, output, power, boostPower) {\r\n    super(args, [\r\n      new BoostableSystemStrategy(boostPower),\r\n      new ThrustOutputSystemStrategy(output),\r\n      new RequiresPowerSystemStrategy(power)\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Engine\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/engine.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getThrustOutput\");\r\n  }\r\n}\r\n\r\nexport default Engine;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { ElectronicWarfareProvider } from \"../strategy/index.mjs\";\r\nimport BoostablePlusOneOutputSystemStrategy from \"../strategy/BoostablePlusOneOutputSystemStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport OutputHeatOnlineStrategy from \"../strategy/OutputHeatOnlineStrategy.mjs\";\r\n\r\nclass EwArray extends ShipSystem {\r\n  constructor(args, output) {\r\n    const {\r\n      heat,\r\n      boostHeat,\r\n      boostable = true,\r\n      power = 5,\r\n      overheatTransferRatio = 0.5,\r\n      boostPower = null,\r\n    } = args;\r\n    super(args, [\r\n      new ElectronicWarfareProvider(output),\r\n      new RequiresPowerSystemStrategy(power),\r\n      new OutputHeatOnlineStrategy(\r\n        heat || Math.ceil(output / 2),\r\n        boostHeat || Math.ceil(output / 3),\r\n        overheatTransferRatio\r\n      ),\r\n    ]);\r\n\r\n    if (boostable) {\r\n      this.addStrategy(\r\n        new BoostablePlusOneOutputSystemStrategy(null, boostPower)\r\n      );\r\n    }\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Electronic Warfare array\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/scanner.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getUsageVsOutputText\");\r\n  }\r\n}\r\n\r\nexport default EwArray;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport * as ewTypes from \"../../../electronicWarfare/electronicWarfareTypes.mjs\";\r\nimport { ElectronicWarfareProvider } from \"../strategy/index.mjs\";\r\n\r\nclass CQEWArray extends ShipSystem {\r\n  constructor(args, output) {\r\n    super(args, [new ElectronicWarfareProvider(output, [ewTypes.EW_CC])]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"CQEW array\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/scanner.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getUsageVsOutputText\");\r\n  }\r\n}\r\n\r\nexport default CQEWArray;\r\n","import EwArray from \"./EwArray.mjs\";\r\nimport * as ewTypes from \"../../../electronicWarfare/electronicWarfareTypes.mjs\";\r\nimport { ElectronicWarfareProvider } from \"../strategy/index.mjs\";\r\n\r\nclass ElintArray extends EwArray {\r\n  constructor(args, output) {\r\n    super(args, [\r\n      new ElectronicWarfareProvider(output, [\r\n        ewTypes.EW_OFFENSIVE_SUPPORT,\r\n        ewTypes.EW_DEFENSIVE_SUPPORT,\r\n        ewTypes.EW_DISRUPTION,\r\n        ewTypes.EW_AREA_DEFENSIVE_SUPPORT\r\n      ])\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"ELINT array\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/scanner.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getUsageVsOutputText\");\r\n  }\r\n}\r\n\r\nexport default ElintArray;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { ElectronicWarfareProvider } from \"../strategy/index.mjs\";\r\nimport BoostablePlusOneOutputSystemStrategy from \"../strategy/BoostablePlusOneOutputSystemStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport OutputHeatOnlineStrategy from \"../strategy/OutputHeatOnlineStrategy.mjs\";\r\nimport * as ewTypes from \"../../../electronicWarfare/electronicWarfareTypes.mjs\";\r\n\r\nclass OEWArray extends ShipSystem {\r\n  constructor(args, output) {\r\n    const {\r\n      heat,\r\n      boostHeat,\r\n      boostable = false,\r\n      power = 5,\r\n      overheatTransferRatio = 0.5,\r\n    } = args;\r\n    super(args, [\r\n      new ElectronicWarfareProvider(output, [ewTypes.EW_OFFENSIVE]),\r\n      new RequiresPowerSystemStrategy(power),\r\n      new OutputHeatOnlineStrategy(\r\n        heat || Math.ceil(output / 2),\r\n        boostHeat || Math.ceil(output / 3),\r\n        overheatTransferRatio\r\n      ),\r\n    ]);\r\n\r\n    if (boostable) {\r\n      this.addStrategy(new BoostablePlusOneOutputSystemStrategy());\r\n    }\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Offensive Electronic Warfare array\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/OEWArray.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return this.callHandler(\"getUsageVsOutputText\");\r\n  }\r\n}\r\n\r\nexport default OEWArray;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport AlwaysTargetableSystemStrategy from \"../strategy/AlwaysTargetableSystemStrategy.mjs\";\r\n\r\nclass Weapon extends ShipSystem {\r\n  constructor(args, strategies) {\r\n    super(args, strategies);\r\n\r\n    if (args.alwaysTargetable) {\r\n      this.addStrategy(new AlwaysTargetableSystemStrategy());\r\n    }\r\n  }\r\n\r\n  isWeapon() {\r\n    return true;\r\n  }\r\n\r\n  showOnSystemList() {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default Weapon;\r\n","import Weapon from \"./Weapon.mjs\";\r\nimport FireOrderStrategy from \"../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport TestDamageStrategy from \"../strategy/weapon/TestDamageStrategy.mjs\";\r\n\r\nclass TestWeapon extends Weapon {\r\n  constructor(args, arcs) {\r\n    super(args, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(10000),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: 0 },\r\n        { range: 300, modifier: -200 }\r\n      ]),\r\n      new StandardLoadingStrategy(2),\r\n      new TestDamageStrategy(10)\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default TestWeapon;\r\n","import Weapon from \"./Weapon.mjs\";\r\nimport FireOrderStrategy from \"../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport StandardDamageStrategy from \"../strategy/weapon/StandardDamageStrategy.mjs\";\r\n\r\nclass OverPoweredTestWeapon extends Weapon {\r\n  constructor(args, arcs) {\r\n    super(args, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(10000),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: 0 },\r\n        { range: 300, modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(2),\r\n      new StandardDamageStrategy(10000),\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default OverPoweredTestWeapon;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\n\r\nclass WeaponAnimationStrategy extends ShipSystemStrategy {\r\n  constructor(animationName, animationArguments = {}) {\r\n    super();\r\n    this.animationName = animationName;\r\n    this.animationArguments = animationArguments;\r\n  }\r\n\r\n  getWeaponFireAnimationName() {\r\n    return this.animationName;\r\n  }\r\n\r\n  getWeaponFireAnimationArguments() {\r\n    return this.animationArguments;\r\n  }\r\n}\r\n\r\nexport default WeaponAnimationStrategy;\r\n","import Weapon from \"../Weapon.mjs\";\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\nimport PiercingDamageStrategy from \"../../strategy/weapon/PiercingDamageStrategy.mjs\";\nimport BoostableSystemStrategy from \"../../strategy/BoostableSystemStrategy.mjs\";\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\nimport OutputHeatOnlineStrategy from \"../../strategy/OutputHeatOnlineStrategy.mjs\";\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\n\nclass CoilgunLightFixed extends Weapon {\n  constructor({ id }, arcs) {\n    super({ id, hitpoints: 10, armor: 5 }, [\n      new FireOrderStrategy(1),\n      new WeaponArcStrategy(arcs),\n      new StandardHitStrategy(20),\n      new StandardRangeStrategy([\n        { range: 0, modifier: -100 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.5), modifier: -20 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2), modifier: -40 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 3), modifier: -200 },\n      ]),\n      new StandardLoadingStrategy(4),\n      new RequiresPowerSystemStrategy(6),\n      new BoostableSystemStrategy(6, 2),\n      new PiercingDamageStrategy(\"d7+1\", \"d6+20\"),\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\n        size: 12,\n        length: 2000,\n        speed: 5,\n        color: [0.8, 0.1, 0.4],\n        explosionSize: 20,\n        explosionType: \"gas\",\n      }),\n      new OutputHeatOnlineStrategy(4, 2),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"Fixed light coilgun\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/matterCannon.png\";\n  }\n}\n\nexport default CoilgunLightFixed;\n","import Weapon from \"../Weapon.mjs\";\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\nimport PiercingDamageStrategy from \"../../strategy/weapon/PiercingDamageStrategy.mjs\";\nimport BoostableSystemStrategy from \"../../strategy/BoostableSystemStrategy.mjs\";\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\nimport OutputHeatOnlineStrategy from \"../../strategy/OutputHeatOnlineStrategy.mjs\";\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\n\nclass MediumCoilgunTurretedUC extends Weapon {\n  constructor({ id }, arcs) {\n    super({ id, hitpoints: 14, armor: 5 }, [\n      new FireOrderStrategy(1),\n      new WeaponArcStrategy(arcs),\n      new StandardHitStrategy(20),\n      new StandardRangeStrategy([\n        { range: 0, modifier: -200 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.6), modifier: -20 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2), modifier: -40 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2.5), modifier: -60 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 4), modifier: -200 },\n      ]),\n      new StandardLoadingStrategy(4),\n      new RequiresPowerSystemStrategy(10),\n      new BoostableSystemStrategy(8, 2),\n      new PiercingDamageStrategy(\"d7+1\", \"d9+25\"),\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\n        size: 12,\n        length: 2000,\n        speed: 5,\n        color: [0.8, 0.1, 0.4],\n        explosionSize: 20,\n        explosionType: \"gas\",\n      }),\n      new OutputHeatOnlineStrategy(6, 2),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"Medium coilgun\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/matterCannon.png\";\n  }\n}\n\nexport default MediumCoilgunTurretedUC;\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport PiercingDamageStrategy from \"../../strategy/weapon/PiercingDamageStrategy.mjs\";\r\n\r\nclass RailgunTurreted64gw extends Weapon {\r\n  constructor(args, arcs) {\r\n    super(args, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(35),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: -100 },\r\n        { range: 10, modifier: 0 },\r\n        { range: 300, modifier: -200 }\r\n      ]),\r\n      new StandardLoadingStrategy(4),\r\n      new PiercingDamageStrategy(\"6d3\", \"4d4 + 4\"),\r\n      new WeaponAnimationStrategy(\"Bolt\", {\r\n        size: 18,\r\n        length: 2000,\r\n        speed: 6,\r\n        color: [0.8, 0.1, 0.4]\r\n      })\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"64Gw turreted railgun\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/matterCannon.png\";\r\n  }\r\n}\r\n\r\nexport default RailgunTurreted64gw;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport PiercingDamageStrategy from \"../../strategy/weapon/PiercingDamageStrategy.mjs\";\r\n\r\nclass RailgunTurreted32gw extends Weapon {\r\n  constructor(args, arcs) {\r\n    super(args, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(20),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: -100 },\r\n        { range: 10, modifier: 0 },\r\n        { range: 220, modifier: -200 }\r\n      ]),\r\n      new StandardLoadingStrategy(3),\r\n      new PiercingDamageStrategy(\"4d3\", \"3d3 + 4\"),\r\n      new WeaponAnimationStrategy(\"Bolt\", {\r\n        size: 15,\r\n        length: 2000,\r\n        speed: 5,\r\n        color: [0.8, 0.1, 0.4]\r\n      })\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"32Gw turreted railgun\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/matterCannon.png\";\r\n  }\r\n}\r\n\r\nexport default RailgunTurreted32gw;\r\n","class CargoService {\r\n  divideCargo(ship, cargo) {\r\n    if (!this.hasSpaceFor(ship, cargo)) {\r\n      throw new Error(\r\n        \"Ship has no cargo space for this. Check validity first!\"\r\n      );\r\n    }\r\n    const cargoBays = this.getBaysWithSpace(ship);\r\n\r\n    let amount = cargo.amount;\r\n    while (amount > 0) {\r\n      cargoBays.forEach(system => {\r\n        if (\r\n          amount > 0 &&\r\n          system.callHandler(\r\n            \"hasSpaceFor\",\r\n            { object: cargo.object, amount: 1 },\r\n            false\r\n          )\r\n        ) {\r\n          system.callHandler(\"addCargo\", { object: cargo.object, amount: 1 });\r\n          amount--;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  hasSpaceForHowMany(ship, cargo) {\r\n    const space = this.getShipWideCargoSpaceAvailable(ship);\r\n    return Math.floor(space / cargo.object.getSpaceRequired());\r\n  }\r\n\r\n  hasSpaceFor(ship, cargo) {\r\n    return (\r\n      this.getShipWideCargoSpaceAvailable(ship) >=\r\n      cargo.object.getSpaceRequired() * cargo.amount\r\n    );\r\n  }\r\n\r\n  getShipWideCargoSpaceAvailable(ship) {\r\n    return this.getBaysWithSpace(ship).reduce(\r\n      (total, system) =>\r\n        total + system.callHandler(\"getAvailableCargoSpace\", {}, 0),\r\n      0\r\n    );\r\n  }\r\n\r\n  getBaysWithSpace(ship) {\r\n    return ship.systems\r\n      .getSystems()\r\n      .filter(\r\n        system => system.callHandler(\"getAvailableCargoSpace\", {}, 0) > 0\r\n      );\r\n  }\r\n}\r\n\r\nexport default CargoService;\r\n","import ShipSystemStrategy from \"../ShipSystemStrategy.mjs\";\r\nimport { cargoClasses } from \"../../cargo/cargo.mjs\";\r\nimport CargoService from \"../../../../cargo/CargoService.mjs\";\r\n\r\nclass AmmunitionStrategy extends ShipSystemStrategy {\r\n  constructor(\r\n    ammunitionClasses,\r\n    ammoPerFireOrder,\r\n    capacity,\r\n    intakeInTurn,\r\n    startLoadingAfter = 1\r\n  ) {\r\n    super();\r\n\r\n    this.ammunitionClasses = [].concat(ammunitionClasses);\r\n    this.capacity = capacity;\r\n    this.startLoadingAfter = startLoadingAfter;\r\n    this.intakeInTurn = intakeInTurn;\r\n    this.ammoPerFireOrder = ammoPerFireOrder;\r\n\r\n    this.selectedAmmo = new this.ammunitionClasses[\r\n      this.ammunitionClasses.length - 1\r\n    ]();\r\n    this.turnsOffline = 0;\r\n    this.targetLoad = this._buildInitialTargetLoad();\r\n\r\n    this.changeTargetLoad = null;\r\n    this.changeSelectedAmmo = null;\r\n\r\n    this.loaded = [];\r\n  }\r\n\r\n  _buildInitialTargetLoad() {\r\n    let amountUsed = 0;\r\n    return this.ammunitionClasses.map((className, index) => {\r\n      let amount = Math.floor(this.capacity / this.ammunitionClasses.length);\r\n      let over = amount % this.ammoPerFireOrder;\r\n      let under = over === 0 ? 0 : this.ammoPerFireOrder - over;\r\n\r\n      const last = index === this.ammunitionClasses.length - 1;\r\n\r\n      if (amount > this.capacity - amountUsed) {\r\n        amount = this.capacity - amountUsed;\r\n      } else if (last) {\r\n        amount = this.capacity - amountUsed;\r\n      } else if (over !== 0 && over <= under) {\r\n        amount -= over;\r\n      } else if (under !== 0 && amountUsed + amount + under <= this.capacity) {\r\n        amount += under;\r\n      }\r\n\r\n      amountUsed += amount;\r\n\r\n      return {\r\n        object: new className(),\r\n        amount,\r\n      };\r\n    });\r\n  }\r\n\r\n  getIconText(payload, previousResponse = \"\") {\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.system.callHandler(\"isLoaded\", null, null) === false) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return this.getSelectedAmmo().getIconText();\r\n  }\r\n\r\n  getUiComponents({ myShip }, previousResponse = []) {\r\n    if (!myShip) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.system.isDestroyed()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        name: \"Ammo\",\r\n        props: {\r\n          ammoStrategy: this,\r\n        },\r\n      },\r\n    ];\r\n  }\r\n\r\n  getTooltipMenuButton({ myShip }, previousResponse = []) {\r\n    if (!myShip) {\r\n      return previousResponse;\r\n    }\r\n\r\n    if (this.system.isDisabled()) {\r\n      return previousResponse;\r\n    }\r\n\r\n    return [\r\n      ...previousResponse,\r\n      {\r\n        img: this.getSelectedAmmo().getBackgroundImage(),\r\n        onClickHandler: () => {\r\n          this.toggleSelectedAmmo();\r\n        },\r\n        onDisabledHandler: () => false,\r\n      },\r\n    ];\r\n  }\r\n\r\n  serialize(payload, previousResponse = []) {\r\n    return {\r\n      ...previousResponse,\r\n      ammunitionStrategy: {\r\n        targetLoad: this.targetLoad.map((entry) => ({\r\n          className: entry.object.constructor.name,\r\n          amount: entry.amount,\r\n        })),\r\n        loaded: this.loaded.map((entry) => ({\r\n          className: entry.object.constructor.name,\r\n          amount: entry.amount,\r\n        })),\r\n        changeTargetLoad: this.changeTargetLoad\r\n          ? this.changeTargetLoad.map((entry) => ({\r\n              className: entry.object.constructor.name,\r\n              amount: entry.amount,\r\n            }))\r\n          : null,\r\n        turnsOffline: this.turnsOffline,\r\n        selectedAmmo: this.selectedAmmo.constructor.name,\r\n        changeSelectedAmmo: this.changeSelectedAmmo\r\n          ? this.changeSelectedAmmo.constructor.name\r\n          : null,\r\n      },\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    const ammoData = data.ammunitionStrategy || {};\r\n    this.targetLoad = ammoData.targetLoad\r\n      ? ammoData.targetLoad.map((entry) => ({\r\n          object: new cargoClasses[entry.className](),\r\n          amount: entry.amount,\r\n        }))\r\n      : [];\r\n\r\n    this.loaded = ammoData.loaded\r\n      ? ammoData.loaded.map((entry) => ({\r\n          object: new cargoClasses[entry.className](),\r\n          amount: entry.amount,\r\n        }))\r\n      : [];\r\n\r\n    this.changeTargetLoad = ammoData.changeTargetLoad\r\n      ? ammoData.changeTargetLoad.map((entry) => ({\r\n          object: new cargoClasses[entry.className](),\r\n          amount: entry.amount,\r\n        }))\r\n      : null;\r\n\r\n    this.turnsOffline = ammoData.turnsOffline || 0;\r\n    this.selectedAmmo = ammoData.selectedAmmo\r\n      ? new cargoClasses[ammoData.selectedAmmo]()\r\n      : new this.ammunitionClasses[this.ammunitionClasses.length - 1]();\r\n    this.changeSelectedAmmo = ammoData.changeSelectedAmmo\r\n      ? new cargoClasses[ammoData.changeSelectedAmmo]()\r\n      : null;\r\n\r\n    return this;\r\n  }\r\n\r\n  toggleSelectedAmmo() {\r\n    let index = null;\r\n    this.loaded.forEach((entry, i) => {\r\n      if (this.getSelectedAmmo().constructor === entry.object.constructor) {\r\n        index = i;\r\n      }\r\n    });\r\n\r\n    if (index + 1 > this.loaded.length - 1) {\r\n      index = 0;\r\n    } else {\r\n      index = index + 1;\r\n    }\r\n\r\n    this.changeSelectedAmmo = this.loaded[index].object;\r\n  }\r\n\r\n  getSelectedAmmo() {\r\n    return this.changeSelectedAmmo || this.selectedAmmo;\r\n  }\r\n\r\n  getLoadingTarget() {\r\n    return this.changeTargetLoad || this.targetLoad;\r\n  }\r\n\r\n  getAmmoInMagazine() {\r\n    return this.loaded;\r\n  }\r\n\r\n  loadTargetInstant() {\r\n    this.loaded = this.targetLoad;\r\n  }\r\n\r\n  getLoadingTargetAmount() {\r\n    return this.getLoadingTarget().reduce(\r\n      (total, { amount }) => total + amount,\r\n      0\r\n    );\r\n  }\r\n\r\n  addToLoading({ object, amount }) {\r\n    if (!this.changeTargetLoad) {\r\n      this.changeTargetLoad = this.targetLoad.map((entry) => ({\r\n        ...entry,\r\n      }));\r\n    }\r\n\r\n    let entry = this.changeTargetLoad.find(\r\n      (entry) => entry.object.constructor === object.constructor\r\n    );\r\n\r\n    if (!entry && amount > 0) {\r\n      entry = {\r\n        object,\r\n        amount: 0,\r\n      };\r\n\r\n      this.changeTargetLoad.push(entry);\r\n    } else if (!entry && amount < 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.getLoadingTargetAmount() + amount > this.capacity) {\r\n      return;\r\n    }\r\n\r\n    if (entry.amount + amount < 0) {\r\n      return;\r\n    }\r\n\r\n    entry.amount += amount;\r\n  }\r\n\r\n  setNewLoadingTarget(target) {\r\n    this.changeTargetLoad = target;\r\n  }\r\n\r\n  setNewSelectedAmmo(ammo) {\r\n    this.changeSelectedAmmo = ammo;\r\n  }\r\n\r\n  receivePlayerData({ clientShip, clientSystem }) {\r\n    if (!clientSystem) {\r\n      return;\r\n    }\r\n\r\n    if (this.system.power.isOffline()) {\r\n      //this is fine\r\n    } else if (this.system.isDisabled()) {\r\n      return;\r\n    }\r\n\r\n    const clientStrategy = clientSystem.getStrategiesByInstance(\r\n      AmmunitionStrategy\r\n    )[0];\r\n    const changeTargetLoad = clientStrategy.changeTargetLoad;\r\n    const changeSelectedAmmo = clientStrategy.changeSelectedAmmo;\r\n\r\n    if (changeTargetLoad) {\r\n      changeTargetLoad.forEach((entry) => {\r\n        if (\r\n          !this.ammunitionClasses.some(\r\n            (className) => entry.object instanceof className\r\n          )\r\n        ) {\r\n          throw new Error(\r\n            `Illegal ammo: '${\r\n              entry.object.constructor.name\r\n            }', allowed '${this.ammunitionClasses.join(\", \")}'`\r\n          );\r\n        }\r\n\r\n        if (!Number.isInteger(entry.amount) || entry.amount < 0) {\r\n          throw new Error(`Illegal ammo amount: '${entry.amount}'`);\r\n        }\r\n      });\r\n\r\n      if (\r\n        changeTargetLoad.reduce((total, current) => total + current.amount, 0) >\r\n        this.capacity\r\n      ) {\r\n        throw new Error(`Total capacity exeeded`);\r\n      }\r\n\r\n      this.targetLoad = changeTargetLoad;\r\n    }\r\n\r\n    if (changeSelectedAmmo) {\r\n      if (\r\n        !this.ammunitionClasses.some(\r\n          (ammoClass) => changeSelectedAmmo instanceof ammoClass\r\n        )\r\n      ) {\r\n        throw new Error(\r\n          `Illegal selected ammo: '${changeSelectedAmmo.constructor.name}'`\r\n        );\r\n      }\r\n\r\n      this.selectedAmmo = changeSelectedAmmo;\r\n    }\r\n  }\r\n\r\n  shouldBeOffline(payload, previousResponse = false) {\r\n    if (previousResponse === true) {\r\n      return true;\r\n    }\r\n\r\n    return this.loaded.every(({ amount }) => amount < this.ammoPerFireOrder);\r\n  }\r\n\r\n  canFire(payload, previousResponse = true) {\r\n    const entry = this.loaded.find(\r\n      (load) => load.object.constructor === this.selectedAmmo.constructor\r\n    );\r\n\r\n    if (!entry) {\r\n      return false;\r\n    }\r\n\r\n    if (entry.amount < this.ammoPerFireOrder) {\r\n      return false;\r\n    }\r\n\r\n    return previousResponse;\r\n  }\r\n\r\n  onIntercept() {\r\n    this.onWeaponFired();\r\n  }\r\n\r\n  onWeaponFired() {\r\n    const entry = this.loaded.find(\r\n      (load) => load.object.constructor === this.selectedAmmo.constructor\r\n    );\r\n\r\n    if (!entry) {\r\n      throw new Error(\r\n        \"Seems like you fired a weapon without ammo. That is not good\"\r\n      );\r\n    }\r\n\r\n    entry.amount -= this.ammoPerFireOrder;\r\n\r\n    this.system.log\r\n      .getGenericLogEntry()\r\n      .addMessage(\r\n        `Expended ordnance: ${\r\n          this.ammoPerFireOrder\r\n        } x ${this.selectedAmmo.getDisplayName()}`\r\n      );\r\n\r\n    this.loaded = this.loaded.filter((entry) => entry.amount > 0);\r\n    this._changeSelectedAmmoIfOutOfAmmo();\r\n  }\r\n\r\n  advanceTurn() {\r\n    if (this.system.power.isOffline()) {\r\n      this.turnsOffline++;\r\n    } else if (this.system.isDisabled()) {\r\n      return;\r\n    } else {\r\n      this.turnsOffline = 0;\r\n    }\r\n\r\n    if (this.turnsOffline > this.startLoadingAfter) {\r\n      this._load();\r\n    }\r\n  }\r\n\r\n  _changeSelectedAmmoIfOutOfAmmo() {\r\n    if (this.loaded.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !this.loaded.find(\r\n        (load) => load.object.constructor === this.selectedAmmo.constructor\r\n      )\r\n    ) {\r\n      const newAmmo = this.loaded.find(\r\n        (entry) => entry.amount > this.ammoPerFireOrder\r\n      );\r\n\r\n      if (newAmmo) {\r\n        this.selectedAmmo = newAmmo.object;\r\n      }\r\n    }\r\n  }\r\n\r\n  _load() {\r\n    let ammoTransferredIn = 0;\r\n    let ammoTransferredOut = 0;\r\n\r\n    const ship = this.system.shipSystems.ship;\r\n    const cargoService = new CargoService();\r\n\r\n    while (true) {\r\n      if (ammoTransferredOut === this.intakeInTurn) {\r\n        break;\r\n      }\r\n\r\n      if (\r\n        this.loaded.every((loaded) => {\r\n          const target = this.targetLoad.find(\r\n            (target) => target.object.constructor === loaded.object.constructor\r\n          );\r\n\r\n          if (target && target.amount >= loaded.amount) {\r\n            return true;\r\n          }\r\n\r\n          let extra = target ? loaded.amount - target.amount : loaded.amount;\r\n          if (extra > this.intakeInTurn - ammoTransferredOut) {\r\n            extra = this.intakeInTurn - ammoTransferredOut;\r\n          }\r\n\r\n          if (extra === 0) {\r\n            return true;\r\n          }\r\n\r\n          const spaceAvailable = cargoService.hasSpaceForHowMany(ship, {\r\n            object: loaded.object,\r\n            amount: extra,\r\n          });\r\n\r\n          if (spaceAvailable === 0) {\r\n            return true;\r\n          } else if (spaceAvailable < extra) {\r\n            extra = spaceAvailable;\r\n          }\r\n\r\n          cargoService.divideCargo(ship, {\r\n            object: loaded.object,\r\n            amount: extra,\r\n          });\r\n\r\n          ammoTransferredOut += extra;\r\n          loaded.amount -= extra;\r\n\r\n          return false;\r\n        })\r\n      ) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    this.loaded = this.loaded.filter((entry) => entry.amount > 0);\r\n\r\n    while (true) {\r\n      if (ammoTransferredIn === this.intakeInTurn) {\r\n        break;\r\n      }\r\n\r\n      if (\r\n        this.targetLoad.every((target) => {\r\n          let loaded = this.loaded.find(\r\n            (loaded) => target.object.constructor === loaded.object.constructor\r\n          );\r\n\r\n          if (!loaded && target.amount > 0) {\r\n            loaded = {\r\n              object: target.object,\r\n              amount: 0,\r\n            };\r\n\r\n            this.loaded.push(loaded);\r\n          } else if (!loaded && target.amount === 0) {\r\n            return true;\r\n          }\r\n\r\n          if (loaded.amount >= target.amount) {\r\n            return true;\r\n          }\r\n\r\n          const cargoSystem = this.system.shipSystems\r\n            .getSystems()\r\n            .find((system) =>\r\n              system.callHandler(\"getCargoEntry\", target.object, null)\r\n            );\r\n\r\n          if (!cargoSystem) {\r\n            return true;\r\n          }\r\n\r\n          const cargo = cargoSystem.callHandler(\r\n            \"getCargoEntry\",\r\n            target.object,\r\n            null\r\n          );\r\n\r\n          let missing = target.amount - loaded.amount;\r\n\r\n          if (missing > this.intakeInTurn - ammoTransferredIn) {\r\n            missing = this.intakeInTurn - ammoTransferredIn;\r\n          }\r\n\r\n          if (cargo.amount >= missing) {\r\n            loaded.amount += missing;\r\n            cargoSystem.callHandler(\"removeCargo\", {\r\n              object: cargo.object,\r\n              amount: missing,\r\n            });\r\n            ammoTransferredIn += missing;\r\n          } else if (cargo.amount < missing) {\r\n            loaded.amount += cargo.amount;\r\n            cargoSystem.callHandler(\"removeCargo\", {\r\n              object: cargo.object,\r\n              amount: cargo.amount,\r\n            });\r\n            ammoTransferredIn += cargo.amount;\r\n          }\r\n\r\n          return false;\r\n        })\r\n      ) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    this._changeSelectedAmmoIfOutOfAmmo();\r\n  }\r\n}\r\n\r\nexport default AmmunitionStrategy;\r\n","import Weapon from \"../Weapon.mjs\";\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\nimport InterceptorStrategy from \"../../strategy/weapon/InterceptorStrategy.mjs\";\nimport Ammo30mm from \"../ammunition/conventional/Ammo30mm.mjs\";\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\nimport ArmorBoostOfflineSystemStrategy from \"../../strategy/ArmorBoostOfflineSystemStrategy.mjs\";\nimport FireOrderHeatStrategy from \"../../strategy/FireOrderHeatStrategy.mjs\";\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\n\nclass PDC30mm extends Weapon {\n  constructor({ id }, arcs) {\n    super({ id, armor: 1, hitpoints: 4 }, [\n      new RequiresPowerSystemStrategy(1),\n      new FireOrderStrategy(1),\n      new WeaponArcStrategy(arcs),\n      new StandardHitStrategy(30),\n      new StandardRangeStrategy([\n        { range: 0, modifier: 0 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.3), modifier: -20 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.5), modifier: -50 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.6), modifier: -100 },\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.8), modifier: -200 },\n      ]),\n      new StandardLoadingStrategy(1),\n      new BurstDamageStrategy(null, null, 0, 6, 5),\n      new InterceptorStrategy(1, 2),\n      new AmmunitionStrategy([Ammo30mm], 6, 24, 12),\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\n        size: 6,\n        speed: 0.35,\n        color: [1.0, 0.9, 0.8],\n        explosionSize: 3,\n      }),\n      new ArmorBoostOfflineSystemStrategy(3),\n      new FireOrderHeatStrategy(3),\n    ]);\n  }\n\n  getDisplayName() {\n    return \"30mm PDC\";\n  }\n\n  getBackgroundImage() {\n    return \"/img/system/gatlingPulseCannon.png\";\n  }\n\n  getSystemDescription() {\n    return \"Fast tracking 30mm rotary autocannon for point defense. Uses conventional bullets with chemical propellant.\";\n  }\n}\n\nexport default PDC30mm;\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport StandardDamageStrategy from \"../../strategy/weapon/StandardDamageStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport BoostableSystemStrategy from \"../../strategy/BoostableSystemStrategy.mjs\";\r\nimport { Ammo120mmHE, Ammo120mmAP } from \"../ammunition/conventional/index.mjs\";\r\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\r\nimport OutputHeatOnlineStrategy from \"../../strategy/OutputHeatOnlineStrategy.mjs\";\r\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\r\n\r\nclass RailgunFixed120mm extends Weapon {\r\n  constructor({ id }, arcs) {\r\n    super({ id, hitpoints: 8, armor: 4 }, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(18),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: -100 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.5), modifier: -20 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.2), modifier: -50 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2), modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(3),\r\n      new RequiresPowerSystemStrategy(4),\r\n      new BoostableSystemStrategy(3, 1),\r\n      new BurstDamageStrategy(null, null, 0, 2, 20),\r\n      new AmmunitionStrategy([Ammo120mmAP, Ammo120mmHE], 1, 12, 4),\r\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\r\n        size: 13,\r\n        length: 25,\r\n        speed: 0.5,\r\n        color: [1.0, 0.8, 0.4],\r\n        explosionType: \"gas\",\r\n        explosionSize: 12,\r\n      }),\r\n      new OutputHeatOnlineStrategy(3, 2),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"120mm fixed railgun\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/stdParticleBeam.png\";\r\n  }\r\n}\r\n\r\nexport default RailgunFixed120mm;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport StandardDamageStrategy from \"../../strategy/weapon/StandardDamageStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport BoostableSystemStrategy from \"../../strategy/BoostableSystemStrategy.mjs\";\r\nimport Ammo140mmAP from \"../ammunition/conventional/Ammo140mmAP.mjs\";\r\nimport Ammo140mmHE from \"../ammunition/conventional/Ammo140mmHE.mjs\";\r\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\r\nimport OutputHeatOnlineStrategy from \"../../strategy/OutputHeatOnlineStrategy.mjs\";\r\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\r\n\r\nclass RailgunTurreted2x140mm extends Weapon {\r\n  constructor({ id }, arcs) {\r\n    super({ id, hitpoints: 12, armor: 3 }, [\r\n      new FireOrderStrategy(2),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(25),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: -50 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.2), modifier: -20 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.4), modifier: -70 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2.2), modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(3),\r\n      new RequiresPowerSystemStrategy(6),\r\n      new BoostableSystemStrategy(6, 1),\r\n      new BurstDamageStrategy(null, null, 0, 3, 20),\r\n      new AmmunitionStrategy([Ammo140mmAP, Ammo140mmHE], 1, 9, 4),\r\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\r\n        size: 13,\r\n        length: 30,\r\n        speed: 0.5,\r\n        color: [1.0, 0.8, 0.4],\r\n        explosionType: \"gas\",\r\n      }),\r\n      new OutputHeatOnlineStrategy(5, 3),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"2x140mm railgun\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/twinArray.png\";\r\n  }\r\n}\r\n\r\nexport default RailgunTurreted2x140mm;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport StandardDamageStrategy from \"../../strategy/weapon/StandardDamageStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport BoostableSystemStrategy from \"../../strategy/BoostableSystemStrategy.mjs\";\r\nimport Ammo140mmAP from \"../ammunition/conventional/Ammo140mmAP.mjs\";\r\nimport Ammo140mmHE from \"../ammunition/conventional/Ammo140mmHE.mjs\";\r\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\r\nimport OutputHeatOnlineStrategy from \"../../strategy/OutputHeatOnlineStrategy.mjs\";\r\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\r\n\r\nclass RailgunTurreted140mmUC extends Weapon {\r\n  constructor({ id }, arcs) {\r\n    super({ id, hitpoints: 9, armor: 3 }, [\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(25),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: -50 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.2), modifier: -20 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.6), modifier: -70 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 2.4), modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(3),\r\n      new RequiresPowerSystemStrategy(4),\r\n      new BoostableSystemStrategy(5, 2),\r\n      new BurstDamageStrategy(null, null, 0, 3, 15),\r\n      new AmmunitionStrategy([Ammo140mmAP, Ammo140mmHE], 1, 9, 4),\r\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\r\n        size: 15,\r\n        length: 30,\r\n        speed: 0.6,\r\n        color: [1.0, 0.8, 0.4],\r\n        explosionType: \"gas\",\r\n      }),\r\n      new OutputHeatOnlineStrategy(3, 2),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"140mm railgun\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/turretMedium1.png\";\r\n  }\r\n}\r\n\r\nexport default RailgunTurreted140mmUC;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport Torpedo158 from \"../ammunition/torpedo/Torpedo158.mjs\";\r\nimport TorpedoLauncherStrategy from \"../../strategy/weapon/TorpedoLauncherStrategy.mjs\";\r\n\r\nclass TorpedoLauncher158 extends Weapon {\r\n  constructor(args) {\r\n    super(args, [new TorpedoLauncherStrategy(1, null, Torpedo158, 10)]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"1.53m torpedo launcher\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/missile1.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default TorpedoLauncher158;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport TorpedoLauncherStrategy from \"../../strategy/weapon/TorpedoLauncherStrategy.mjs\";\r\nimport Torpedo72 from \"../ammunition/torpedo/Torpedo72.mjs\";\r\n\r\nclass TorpedoLauncherDual72 extends Weapon {\r\n  constructor(args) {\r\n    super(args, [\r\n      new TorpedoLauncherStrategy(1, null, Torpedo72, 8),\r\n      new TorpedoLauncherStrategy(2, null, Torpedo72, 8),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"0.72m dual torpedo launcher\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/missile2.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default TorpedoLauncherDual72;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport Torpedo158 from \"../ammunition/torpedo/Torpedo158.mjs\";\r\nimport TorpedoLauncherStrategy from \"../../strategy/weapon/TorpedoLauncherStrategy.mjs\";\r\n\r\nclass TorpedoLauncherDual158 extends Weapon {\r\n  constructor(args) {\r\n    super(args, [\r\n      new TorpedoLauncherStrategy(1, null, Torpedo158, 10),\r\n      new TorpedoLauncherStrategy(2, null, Torpedo158, 10),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"1.53m dual torpedo launcher\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/missile2.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default TorpedoLauncherDual158;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport Torpedo158 from \"../ammunition/torpedo/Torpedo158.mjs\";\r\nimport TorpedoLauncherStrategy from \"../../strategy/weapon/TorpedoLauncherStrategy.mjs\";\r\n\r\nclass TorpedoLauncherQuadruple158 extends Weapon {\r\n  constructor(args) {\r\n    super(args, [\r\n      new TorpedoLauncherStrategy(1, null, Torpedo158, 12),\r\n      new TorpedoLauncherStrategy(2, null, Torpedo158, 12),\r\n      new TorpedoLauncherStrategy(3, null, Torpedo158, 12),\r\n      new TorpedoLauncherStrategy(4, null, Torpedo158, 12),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"4x 1.53m torpedo launcher\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/missile4.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default TorpedoLauncherQuadruple158;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport InterceptorStrategy from \"../../strategy/weapon/InterceptorStrategy.mjs\";\r\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\r\nimport { Ammo85mmAP, Ammo85mmHE } from \"../ammunition/conventional/index.mjs\";\r\nimport ArmorBoostOfflineSystemStrategy from \"../../strategy/ArmorBoostOfflineSystemStrategy.mjs\";\r\nimport FireOrderHeatStrategy from \"../../strategy/FireOrderHeatStrategy.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\r\n\r\nclass AutoCannon85mm extends Weapon {\r\n  constructor({ id }, arcs) {\r\n    super({ id, armor: 1, hitpoints: 6 }, [\r\n      new RequiresPowerSystemStrategy(2),\r\n      new FireOrderStrategy(1),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(20),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: 0 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.5), modifier: -20 },\r\n        { range: MEDIUM_WEAPON_RANGE, modifier: -50 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 1.5), modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(1),\r\n      new BurstDamageStrategy(null, null, 0, 3, 10),\r\n      new InterceptorStrategy(),\r\n      new AmmunitionStrategy([Ammo85mmAP, Ammo85mmHE], 3, 15, 6),\r\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\r\n        size: 8,\r\n        speed: 0.5,\r\n        color: [1.0, 0.7, 0.7],\r\n        explosionSize: 5,\r\n      }),\r\n      new ArmorBoostOfflineSystemStrategy(3),\r\n      new FireOrderHeatStrategy(8),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"85mm Autocannon\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/lightParticleBeamShip.png\";\r\n  }\r\n}\r\n\r\nexport default AutoCannon85mm;\r\n","import TestWeapon from \"./TestWeapon.mjs\";\r\nimport OverPoweredTestWeapon from \"./OverPoweredTestWeapon.mjs\";\r\n\r\nimport * as coilguns from \"./coilgun/index.mjs\";\r\n\r\nimport PDC30mm from \"./pdc/PDC30mm.mjs\";\r\n\r\nimport * as railguns from \"./railgun/index.mjs\";\r\n\r\nimport * as launchers from \"./launcher/index.mjs\";\r\n\r\nimport AutoCannon85mm from \"./autocannon/AutoCannon85mm.mjs\";\r\n\r\nconst merged = {\r\n  TestWeapon,\r\n  PDC30mm,\r\n  ...coilguns,\r\n  ...railguns,\r\n  ...launchers,\r\n  AutoCannon85mm,\r\n  OverPoweredTestWeapon,\r\n};\r\n\r\nexport default merged;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport {\r\n  RequiresPowerSystemStrategy,\r\n  LargerHitProfileOnlineSystemStrategy\r\n} from \"../strategy/index.mjs\";\r\nimport RadiateHeatStrategy from \"../strategy/RadiateHeatStrategy.mjs\";\r\nimport ArmorBoostOfflineSystemStrategy from \"../strategy/ArmorBoostOfflineSystemStrategy.mjs\";\r\nimport AlwaysTargetableSystemStrategy from \"../strategy/AlwaysTargetableSystemStrategy.mjs\";\r\n\r\nclass Radiator extends ShipSystem {\r\n  constructor(args, radiationCapacity = 40, extraProfile = 20, armorBoost = 5) {\r\n    super(args, [\r\n      new RequiresPowerSystemStrategy(1, false),\r\n      new LargerHitProfileOnlineSystemStrategy(extraProfile, extraProfile, 5),\r\n      new RadiateHeatStrategy(radiationCapacity),\r\n      new ArmorBoostOfflineSystemStrategy(armorBoost),\r\n      new AlwaysTargetableSystemStrategy(2)\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Radiator\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/radiator.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default Radiator;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport StoreHeatStrategy from \"../strategy/StoreHeatStrategy.mjs\";\r\n\r\nclass HeatSink extends ShipSystem {\r\n  constructor(args, heatStorage) {\r\n    super(args, [new StoreHeatStrategy(heatStorage)]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"Heat sink\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/heatSink.png\";\r\n  }\r\n\r\n  getIconText() {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default HeatSink;\r\n","import Radiator from \"./Radiator.mjs\";\r\n\r\nclass Radiator5x40 extends Radiator {\r\n  constructor({ id }) {\r\n    super({ id, hitpoints: 5, armor: 0 }, 10, 10, 5);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"5x40m radiator sail\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/radiator.png\";\r\n  }\r\n}\r\n\r\nexport default Radiator5x40;\r\n","import Radiator from \"./Radiator.mjs\";\r\n\r\nclass Radiator10x40 extends Radiator {\r\n  constructor({ id }) {\r\n    super({ id, hitpoints: 10, armor: 0 }, 20, 20, 6);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"10x40m radiator sail\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/radiator.png\";\r\n  }\r\n}\r\n\r\nexport default Radiator10x40;\r\n","import Radiator from \"./Radiator.mjs\";\r\n\r\nclass Radiator10x50 extends Radiator {\r\n  constructor({ id }) {\r\n    super({ id, hitpoints: 12, armor: 0 }, 24, 24, 6);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"10x50m radiator panels\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/radiator.png\";\r\n  }\r\n}\r\n\r\nexport default Radiator10x50;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { CargoBaySystemStrategy } from \"../strategy/index.mjs\";\r\n\r\nclass CargoBay extends ShipSystem {\r\n  constructor(args, space) {\r\n    super(args, [new CargoBaySystemStrategy(space)]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return `Cargo bay ${this.callHandler(\"getTotalCargoSpace\")}m³`;\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/cargoBay.png\";\r\n  }\r\n}\r\n\r\nexport default CargoBay;\r\n","import ShipSystem from \"../ShipSystem.mjs\";\r\nimport { FuelTankSystemStrategy } from \"../strategy/index.mjs\";\r\n\r\nclass FuelTank extends ShipSystem {\r\n  constructor(args, space) {\r\n    super(args, [new FuelTankSystemStrategy(space)]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return `Fuel tank ${this.callHandler(\"getFuelSpace\")}m³`;\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/fuelTank.png\";\r\n  }\r\n}\r\n\r\nexport default FuelTank;\r\n","import * as thrusters from \"./thruster/index.mjs\";\r\nimport * as engines from \"./engine/index.mjs\";\r\nimport * as reactors from \"./reactor/index.mjs\";\r\nimport * as structures from \"./structure/index.mjs\";\r\nimport * as ewArrays from \"./electronicWarfare/index.mjs\";\r\nimport weapons from \"./weapon/index.mjs\";\r\nimport * as heat from \"./heat/index.mjs\";\r\nimport CargoBay from \"./cargo/CargoBay.mjs\";\r\nimport FuelTank from \"./cargo/FuelTank.mjs\";\r\n\r\nconst merged = {\r\n  ...thrusters,\r\n  ...engines,\r\n  ...reactors,\r\n  ...structures,\r\n  ...ewArrays,\r\n  ...weapons,\r\n  ...heat,\r\n  CargoBay,\r\n  FuelTank,\r\n};\r\n\r\nexport default merged;\r\n","import Ship from \"../../Ship.mjs\";\r\nimport systems from \"../../system/index.mjs\";\r\n\r\nclass UcRhino extends Ship {\r\n  constructor(data) {\r\n    super(data);\r\n\r\n    this.shipTypeName = 'Conley Shipyards RX11 \"Rhino\"';\r\n    this.shipModel = this.accelcost = 3;\r\n    this.rollcost = 3;\r\n    this.pivotcost = 3;\r\n    this.evasioncost = 3;\r\n\r\n    this.shipModel = \"Rhino\";\r\n    this.pointCost = 500;\r\n\r\n    this.systems.addFrontSystem([\r\n      new systems.ManeuveringThruster(\r\n        { id: 101, hitpoints: 10, armor: 3 },\r\n        3,\r\n        2\r\n      )\r\n    ]);\r\n\r\n    this.systems.addPrimarySystem([\r\n      new systems.Thruster({ id: 1, hitpoints: 10, armor: 3 }, 5, 0),\r\n      new systems.Thruster({ id: 2, hitpoints: 10, armor: 3 }, 5, 0),\r\n      new systems.Thruster({ id: 8, hitpoints: 10, armor: 3 }, 5, [1, 2]),\r\n      new systems.Thruster({ id: 9, hitpoints: 10, armor: 3 }, 5, [4, 5]),\r\n      new systems.Thruster({ id: 3, hitpoints: 10, armor: 3 }, 5, 3),\r\n      new systems.Thruster({ id: 4, hitpoints: 10, armor: 3 }, 5, 3),\r\n\r\n      new systems.Engine({ id: 5, hitpoints: 10, armor: 3 }, 12, 6, 2),\r\n      new systems.Engine({ id: 6, hitpoints: 10, armor: 3 }, 12, 6, 2),\r\n      new systems.Reactor({ id: 7, hitpoints: 10, armor: 3 }, 20),\r\n      new systems.Structure({ id: 11, hitpoints: 30, armor: 4 })\r\n    ]);\r\n\r\n    this.systems.addAftSystem([\r\n      new systems.ManeuveringThruster(\r\n        { id: 201, hitpoints: 10, armor: 3 },\r\n        3,\r\n        2\r\n      )\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default UcRhino;\r\n","import Ship from \"../../Ship.mjs\";\r\nimport systems from \"../../system/index.mjs\";\r\nimport Offset from \"../../../hexagon/Offset.mjs\";\r\nimport Torpedo72MSV from \"../../system/weapon/ammunition/torpedo/Torpedo72MSV.mjs\";\r\nimport Torpedo158MSV from \"../../system/weapon/ammunition/torpedo/Torpedo158MSV.mjs\";\r\nimport Torpedo158Nuclear from \"../../system/weapon/ammunition/torpedo/Torpedo158Nuclear.mjs\";\r\nimport Ammo140mmAP from \"../../system/weapon/ammunition/conventional/Ammo140mmAP.mjs\";\r\nimport Ammo120mmAP from \"../../system/weapon/ammunition/conventional/Ammo120mmAP.mjs\";\r\nimport Ammo140mmHE from \"../../system/weapon/ammunition/conventional/Ammo140mmHE.mjs\";\r\nimport Ammo85mmAP from \"../../system/weapon/ammunition/conventional/Ammo85mmAP.mjs\";\r\nimport Ammo85mmHE from \"../../system/weapon/ammunition/conventional/Ammo85mmHE.mjs\";\r\nimport CargoService from \"../../../cargo/CargoService.mjs\";\r\nimport Ammo30mm from \"../../system/weapon/ammunition/conventional/Ammo30mm.mjs\";\r\nimport Torpedo72HE from \"../../system/weapon/ammunition/torpedo/Torpedo72HE.mjs\";\r\nimport Torpedo158MSV2 from \"../../system/weapon/ammunition/torpedo/Torpedo158MSV2.mjs\";\r\nimport Torpedo158HE from \"../../system/weapon/ammunition/torpedo/Torpedo158HE.mjs\";\r\n\r\nclass Haka extends Ship {\r\n  setShipProperties() {\r\n    this.shipTypeName = \"Haka XCD-33 Battleship\";\r\n    this.hexSizes = [\r\n      new Offset(2, 0),\r\n      new Offset(1, 0),\r\n      new Offset(0, 0),\r\n      new Offset(-1, 0),\r\n    ];\r\n    this.accelcost = 5;\r\n    this.rollcost = 12;\r\n    this.pivotcost = 10;\r\n    this.evasioncost = 10;\r\n\r\n    this.frontHitProfile = 60;\r\n    this.sideHitProfile = 80;\r\n\r\n    this.description = ``;\r\n\r\n    this.shipModel = \"Haka\";\r\n    this.pointCost = 500;\r\n\r\n    this.systems.addFrontSystem([\r\n      new systems.ChemicalThruster({ id: 103, hitpoints: 10, armor: 3 }, 15, 0),\r\n\r\n      new systems.RailgunTurreted140mmUC({ id: 118 }, { start: 210, end: 150 }),\r\n      new systems.RailgunTurreted140mmUC({ id: 119 }, { start: 210, end: 150 }),\r\n      new systems.ChemicalThruster({ id: 104, hitpoints: 10, armor: 3 }, 15, 0),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 114, hitpoints: 5, armor: 3 },\r\n        { start: 200, end: 160 }\r\n      ),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 115, hitpoints: 5, armor: 3 },\r\n        { start: 200, end: 160 }\r\n      ),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 116, hitpoints: 5, armor: 3 },\r\n        { start: 200, end: 160 }\r\n      ),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 117, hitpoints: 5, armor: 3 },\r\n        { start: 200, end: 160 }\r\n      ),\r\n\r\n      new systems.EwArray(\r\n        {\r\n          id: 120,\r\n          hitpoints: 10,\r\n          armor: 5,\r\n          boostable: false,\r\n          heat: 7,\r\n          power: 13,\r\n          overheatTransferRatio: 0.2,\r\n        },\r\n        5\r\n      ),\r\n\r\n      new systems.OEWArray(\r\n        {\r\n          id: 121,\r\n          hitpoints: 10,\r\n          armor: 5,\r\n          boostable: false,\r\n          heat: 6,\r\n          power: 8,\r\n          overheatTransferRatio: 0.2,\r\n        },\r\n        5\r\n      ),\r\n\r\n      new systems.Structure({\r\n        id: 111,\r\n        hitpoints: 80,\r\n        armor: 4,\r\n        cargoSpace: 400,\r\n        radiator: 15,\r\n      }),\r\n    ]);\r\n\r\n    this.systems.addPrimarySystem([\r\n      new systems.Reactor({ id: 7, hitpoints: 10, armor: 8 }, 43),\r\n      new systems.Reactor({ id: 5, hitpoints: 10, armor: 8 }, 43),\r\n      new systems.Structure({\r\n        id: 11,\r\n        hitpoints: 80,\r\n        armor: 6,\r\n        cargoSpace: 300,\r\n        heatStorage: 50,\r\n      }),\r\n      new systems.EwArray({ id: 12, hitpoints: 25, armor: 6, heat: 10 }, 10),\r\n      new systems.HeatSink({ id: 13, hitpoints: 10, armor: 3 }, 100),\r\n      new systems.HeatSink({ id: 14, hitpoints: 10, armor: 3 }, 100),\r\n    ]);\r\n\r\n    this.systems.addStarboardFrontSystem([\r\n      new systems.ChemicalThruster({ id: 201, hitpoints: 10, armor: 3 }, 5, [\r\n        1,\r\n        2,\r\n      ]),\r\n\r\n      new systems.ManeuveringThrusterRight(\r\n        { id: 205, hitpoints: 10, armor: 3 },\r\n        10,\r\n        0\r\n      ),\r\n\r\n      new systems.RailgunTurreted2x140mm({ id: 202 }, { start: 345, end: 190 }),\r\n\r\n      new systems.TorpedoLauncherQuadruple158({\r\n        id: 210,\r\n        hitpoints: 15,\r\n        armor: 3,\r\n      }),\r\n      new systems.TorpedoLauncherQuadruple158({\r\n        id: 211,\r\n        hitpoints: 15,\r\n        armor: 3,\r\n      }),\r\n      new systems.TorpedoLauncherQuadruple158({\r\n        id: 212,\r\n        hitpoints: 15,\r\n        armor: 3,\r\n      }),\r\n      new systems.TorpedoLauncherQuadruple158({\r\n        id: 213,\r\n        hitpoints: 15,\r\n        armor: 3,\r\n      }),\r\n    ]);\r\n\r\n    this.systems.addPortFrontSystem([\r\n      new systems.Structure({\r\n        id: 600,\r\n        hitpoints: 60,\r\n        armor: 7,\r\n        radiator: 15,\r\n      }),\r\n\r\n      new systems.ChemicalThruster({ id: 601, hitpoints: 10, armor: 3 }, 5, [\r\n        4,\r\n        5,\r\n      ]),\r\n\r\n      new systems.MediumCoilgunTurretedUC({ id: 602 }, { start: 165, end: 0 }),\r\n\r\n      new systems.RailgunTurreted140mmUC(\r\n        { id: 603 },\r\n        { start: 195, end: 3.75 }\r\n      ),\r\n      new systems.RailgunTurreted140mmUC(\r\n        { id: 604 },\r\n        { start: 195, end: 3.75 }\r\n      ),\r\n\r\n      new systems.ManeuveringThrusterLeft(\r\n        { id: 605, hitpoints: 10, armor: 3 },\r\n        10,\r\n        0\r\n      ),\r\n\r\n      new systems.MediumCoilgunTurretedUC({ id: 606 }, { start: 190, end: 15 }),\r\n    ]);\r\n\r\n    this.systems.addAftSystem([\r\n      new systems.Structure({\r\n        id: 411,\r\n        hitpoints: 80,\r\n        armor: 5,\r\n        heatStorage: 100,\r\n        radiator: 5,\r\n        fuel: 12000,\r\n      }),\r\n\r\n      new systems.PDC30mm({ id: 450 }, { start: 160, end: 340 }),\r\n\r\n      new systems.Thruster({ id: 432, hitpoints: 15, armor: 3 }, 15, 3, {\r\n        power: 3,\r\n        boostPower: 2,\r\n      }),\r\n      new systems.Thruster({ id: 433, hitpoints: 15, armor: 3 }, 15, 3, {\r\n        power: 3,\r\n        boostPower: 2,\r\n      }),\r\n\r\n      new systems.PDC30mm({ id: 451 }, { start: 40, end: 200 }),\r\n\r\n      new systems.PDC30mm({ id: 452 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 453 }, { start: 160, end: 340 }),\r\n\r\n      new systems.PDC30mm({ id: 456 }, { start: 40, end: 200 }),\r\n      new systems.PDC30mm({ id: 457 }, { start: 40, end: 200 }),\r\n\r\n      new systems.PDC30mm({ id: 454 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 455 }, { start: 40, end: 200 }),\r\n    ]);\r\n\r\n    this.systems.addPortAftSystem([\r\n      new systems.Thruster({ id: 533, hitpoints: 15, armor: 3 }, 15, 3, {\r\n        power: 3,\r\n        boostPower: 2,\r\n      }),\r\n      new systems.ManeuveringThrusterRight(\r\n        { id: 501, hitpoints: 10, armor: 3 },\r\n        10,\r\n        0\r\n      ),\r\n      new systems.Radiator10x50({ id: 502 }),\r\n      new systems.Radiator10x50({ id: 503 }),\r\n      new systems.PDC30mm({ id: 550 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 551 }, { start: 160, end: 340 }),\r\n\r\n      new systems.PDC30mm({ id: 554 }, { start: 160, end: 340 }),\r\n      new systems.PDC30mm({ id: 555 }, { start: 160, end: 340 }),\r\n    ]);\r\n\r\n    this.systems.addStarboardAftSystem([\r\n      new systems.ManeuveringThrusterLeft(\r\n        { id: 305, hitpoints: 10, armor: 3 },\r\n        10,\r\n        0\r\n      ),\r\n      new systems.Thruster({ id: 333, hitpoints: 15, armor: 3 }, 15, 3, {\r\n        power: 3,\r\n        boostPower: 2,\r\n      }),\r\n      new systems.Radiator10x50({ id: 301 }),\r\n      new systems.Radiator10x50({ id: 302 }),\r\n      new systems.PDC30mm({ id: 352 }, { start: 40, end: 200 }),\r\n      new systems.PDC30mm({ id: 353 }, { start: 40, end: 200 }),\r\n      new systems.PDC30mm({ id: 356 }, { start: 40, end: 200 }),\r\n\r\n      new systems.PDC30mm({ id: 357 }, { start: 40, end: 200 }),\r\n    ]);\r\n  }\r\n\r\n  setShipLoadout() {\r\n    super.setShipLoadout();\r\n\r\n    const cargoService = new CargoService();\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Torpedo158MSV(),\r\n      amount: 24,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Torpedo158MSV2(),\r\n      amount: 20,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Torpedo158HE(),\r\n      amount: 36,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Torpedo158Nuclear(),\r\n      amount: 6,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo30mm(),\r\n      amount: 1700,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo140mmAP(),\r\n      amount: 220,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo140mmHE(),\r\n      amount: 550,\r\n    });\r\n\r\n    const launchers = [\r\n      this.systems.getSystemById(210),\r\n      this.systems.getSystemById(211),\r\n      this.systems.getSystemById(212),\r\n      this.systems.getSystemById(213),\r\n    ];\r\n\r\n    launchers.forEach((system) => {\r\n      system.callHandler(\"loadAmmoInstant\", {\r\n        ammo: new Torpedo158MSV(),\r\n        launcherIndex: 1,\r\n      });\r\n      system.callHandler(\"loadAmmoInstant\", {\r\n        ammo: new Torpedo158MSV(),\r\n        launcherIndex: 2,\r\n      });\r\n      system.callHandler(\"loadAmmoInstant\", {\r\n        ammo: new Torpedo158MSV2(),\r\n        launcherIndex: 3,\r\n      });\r\n\r\n      system.callHandler(\"loadAmmoInstant\", {\r\n        ammo: new Torpedo158HE(),\r\n        launcherIndex: 4,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default Haka;\r\n","import Ship from \"../../Ship.mjs\";\nimport systems from \"../../system/index.mjs\";\nimport Torpedo158MSV from \"../../system/weapon/ammunition/torpedo/Torpedo158MSV.mjs\";\nimport Torpedo72MSV from \"../../system/weapon/ammunition/torpedo/Torpedo72MSV.mjs\";\nimport Torpedo72HE from \"../../system/weapon/ammunition/torpedo/Torpedo72HE.mjs\";\n\nclass TestShip extends Ship {\n  setShipProperties() {\n    this.accelcost = 3;\n    this.rollcost = 3;\n    this.pivotcost = 3;\n    this.evasioncost = 3;\n\n    this.frontHitProfile = 100;\n    this.sideHitProfile = 100;\n\n    this.pointCost = 500;\n\n    this.systems.addFrontSystem([\n      new systems.OverPoweredTestWeapon({ id: 21, hitpoints: 6, armor: 2 }, [\n        { start: 270, end: 90 },\n      ]),\n      new systems.TestWeapon({ id: 20, hitpoints: 6, armor: 2 }, [\n        { start: 0, end: 180 },\n      ]),\n      new systems.RailgunTurreted2x140mm({ id: 101, hitpoints: 6, armor: 2 }, [\n        { start: 0, end: 180 },\n      ]),\n      new systems.PDC30mm({ id: 102 }, [{ start: 0, end: 0 }]),\n      new systems.PDC30mm({ id: 103 }, [{ start: 0, end: 0 }]),\n    ]);\n\n    this.systems.addPrimarySystem([\n      new systems.Thruster({ id: 1, hitpoints: 10, armor: 3 }, 5, 0),\n      new systems.Thruster({ id: 2, hitpoints: 10, armor: 3 }, 5, 0),\n      new systems.Thruster({ id: 8, hitpoints: 10, armor: 3 }, 5, [1, 2]),\n      new systems.Thruster({ id: 9, hitpoints: 10, armor: 3 }, 5, [4, 5]),\n      new systems.Thruster({ id: 3, hitpoints: 10, armor: 3 }, 15, 3),\n      new systems.Thruster({ id: 4, hitpoints: 10, armor: 3 }, 15, 3),\n      new systems.ManeuveringThruster(\n        { id: 10, hitpoints: 10, armor: 3 },\n        9,\n        3\n      ),\n      new systems.Engine({ id: 5, hitpoints: 10, armor: 3 }, 12, 6, 2),\n      new systems.Engine({ id: 6, hitpoints: 10, armor: 3 }, 12, 6, 2),\n      new systems.Reactor({ id: 7, hitpoints: 20, armor: 3 }, 35),\n      new systems.EwArray({ id: 11, hitpoints: 10, armor: 3 }, 10),\n      new systems.TorpedoLauncherDual158({ id: 202, hitpoints: 20, armor: 6 }),\n      new systems.TorpedoLauncherDual72({ id: 203, hitpoints: 20, armor: 6 }),\n      new systems.TorpedoLauncherDual72({ id: 206, hitpoints: 20, armor: 6 }),\n      new systems.CargoBay({ id: 204, hitpoints: 20, armor: 4 }, 500),\n      new systems.Structure({\n        id: 205,\n        hitpoints: 40,\n        armor: 5,\n        heatStorage: 200,\n        radiator: 5,\n        fuel: 4000,\n      }),\n    ]);\n  }\n\n  setShipLoadout() {\n    super.setShipLoadout();\n\n    this.systems.getSystemById(205).callHandler(\"setMaxFuel\");\n\n    const cargoBay = this.systems.getSystemById(204);\n\n    cargoBay.callHandler(\"addCargo\", {\n      object: new Torpedo158MSV(),\n      amount: 14,\n    });\n\n    cargoBay.callHandler(\"addCargo\", {\n      object: new Torpedo72MSV(),\n      amount: 14,\n    });\n\n    this.systems.getSystemById(202).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo158MSV(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(202).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo158MSV(),\n      launcherIndex: 2,\n    });\n\n    this.systems.getSystemById(203).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72MSV(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(203).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72MSV(),\n      launcherIndex: 2,\n    });\n\n    this.systems.getSystemById(206).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72HE(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(206).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72HE(),\n      launcherIndex: 2,\n    });\n\n    return this;\n  }\n}\n\nexport default TestShip;\n","import Ship from \"../../Ship.mjs\";\nimport systems from \"../../system/index.mjs\";\nimport Offset from \"../../../hexagon/Offset.mjs\";\nimport Torpedo72MSV from \"../../system/weapon/ammunition/torpedo/Torpedo72MSV.mjs\";\nimport Torpedo158MSV from \"../../system/weapon/ammunition/torpedo/Torpedo158MSV.mjs\";\nimport Torpedo158Nuclear from \"../../system/weapon/ammunition/torpedo/Torpedo158Nuclear.mjs\";\nimport Ammo140mmAP from \"../../system/weapon/ammunition/conventional/Ammo140mmAP.mjs\";\nimport Ammo120mmAP from \"../../system/weapon/ammunition/conventional/Ammo120mmAP.mjs\";\nimport Ammo140mmHE from \"../../system/weapon/ammunition/conventional/Ammo140mmHE.mjs\";\nimport Ammo85mmAP from \"../../system/weapon/ammunition/conventional/Ammo85mmAP.mjs\";\nimport Ammo85mmHE from \"../../system/weapon/ammunition/conventional/Ammo85mmHE.mjs\";\nimport CargoService from \"../../../cargo/CargoService.mjs\";\nimport Ammo30mm from \"../../system/weapon/ammunition/conventional/Ammo30mm.mjs\";\nimport Torpedo72HE from \"../../system/weapon/ammunition/torpedo/Torpedo72HE.mjs\";\n\nclass Caliope extends Ship {\n  setShipProperties() {\n    this.shipTypeName = \"OuterLight Industries Caliope OI-E1 cruiser\";\n    this.hexSizes = [\n      new Offset(2, 0),\n      new Offset(1, 0),\n      new Offset(0, 0),\n      new Offset(-1, 0),\n    ];\n    this.accelcost = 3;\n    this.rollcost = 3;\n    this.pivotcost = 3;\n    this.evasioncost = 3;\n\n    this.frontHitProfile = 45;\n    this.sideHitProfile = 60;\n\n    this.description = `\n        Caliope cruiser was initially conceived with grandiose goals of including\n        battleship capabilities on cruiser tonnage class spaceframe. \n\n        First two Caliope A1 prototypes built by Patria Space were equipped with three Silverbreak 12 fusion engines,\n        two kinetic batteries, two light PDCs, three medium PDCs, two Hayfire 45MW railgun turrets and\n        eight 1.2m and two 3.5m missile tubes.  The spaceframes were built around and powered by \n        two Langban-Zukov class III fusion generators.\n\n        On field testing the new ships failed to meet the required specifications. The spaceframe turned out unable to\n        provide stable enough firing platform for the railgun turrets causing buildup of micro fractures\n        and resulting in subpar accuracy and reliability for the guns. Caliope was also found under armored for\n        fighting in the battleship class. \n\n        One of the prototypes where modified to Caliope A2 by substituting the railgun turrets with fixed mount railguns. \n        Filed testing of Caliope A2 showed the ship too unmanouverable to use the fixed railguns efficiently and this \n        modification failed to save the design.\n\n        Caliope project was abandoned as a failure, but subsequently aquired by OuterLight Industries when Patria Space \n        ran into finiancial difficulties. An experienced ship designed Markov Mohammed saw promise in the Caliope. \n\n        Caliope was repurposed to a long range cruiser by removing the railgun turrets. Freed space was used for extra\n        crew quarters, cargo and fuel space. The armor of the ship was reduced to gain much needed manouverability and\n        bring the spaceframe to safe structural stress levels. Abandoning the railguns left the ship with considerable\n        surplus of energy production and heat management capacity. This allowed the upgrade of the engines to more\n        powerful Silverbreak 15R model. Armament wise the new Caliope OI-B1 was equiped with four Maltech 210mm Twin kinetic\n        cannon turrets and seven 20mm Maltech PDCs. The missile launchers and magazines were left untouched.\n\n        These changes resulted in a ship considerably different from the initial design goals. First four Caliope OL-B3 cruisers\n        delivered to the Protectorate found great success in counter piracy role. Even tough Caliope is considered underarmored and\n        less than ideally manouverable for a mainstay cruiser, it can operate extended durations without resupply and it has an excellent\n        acceleration and heat management for extended chases. Perfect for running down pirates. Caliopes missile capabilities has\n        found use in fleet action as a missile picket ship. Caliopes engage in missile barrages but avoid close fighting. If \n        fleets close in, Caliopes are kept in reserve to chase down and finish damaged enemy vessels. Caliopes are also \n        suited to supplying smaller ships, altough more specialized ships can perform this role better.\n    `;\n\n    this.shipModel = \"Caliope\";\n    this.pointCost = 500;\n\n    this.systems.addFrontSystem([\n      new systems.ChemicalThruster({ id: 103, hitpoints: 10, armor: 3 }, 15, 0),\n      new systems.PDC30mm(\n        { id: 114, hitpoints: 5, armor: 3 },\n        { start: 200, end: 160 }\n      ),\n\n      new systems.PDC30mm(\n        { id: 115, hitpoints: 5, armor: 3 },\n        { start: 200, end: 160 }\n      ),\n      new systems.ChemicalThruster({ id: 104, hitpoints: 10, armor: 3 }, 15, 0),\n      new systems.Structure({\n        id: 111,\n        hitpoints: 40,\n        armor: 5,\n        heatStorage: 20,\n        radiator: 3,\n      }),\n\n      new systems.ManeuveringThruster(\n        { id: 101, hitpoints: 10, armor: 3 },\n        10,\n        3\n      ),\n    ]);\n\n    this.systems.addPrimarySystem([\n      new systems.Reactor({ id: 7, hitpoints: 10, armor: 8 }, 20),\n      new systems.Structure({\n        id: 11,\n        hitpoints: 60,\n        armor: 4,\n        cargoSpace: 300,\n        heatStorage: 80,\n        radiator: 15,\n        fuel: 2000,\n      }),\n      new systems.EwArray({ id: 12, hitpoints: 15, armor: 6 }, 8),\n      new systems.HeatSink({ id: 13, hitpoints: 10, armor: 3 }, 100),\n    ]);\n\n    this.systems.addStarboardFrontSystem([\n      new systems.ChemicalThruster({ id: 201, hitpoints: 10, armor: 3 }, 15, [\n        1,\n        2,\n      ]),\n\n      new systems.RailgunTurreted2x140mm(\n        { id: 213, hitpoints: 8, armor: 4 },\n        { start: 330, end: 90 }\n      ),\n      new systems.PDC30mm(\n        { id: 202, hitpoints: 4, armor: 3 },\n        { start: 0, end: 180 }\n      ),\n      new systems.AutoCannon85mm(\n        { id: 203, hitpoints: 6, armor: 3 },\n        { start: 330, end: 160 }\n      ),\n      new systems.AutoCannon85mm(\n        { id: 204, hitpoints: 6, armor: 3 },\n        { start: 330, end: 160 }\n      ),\n    ]);\n\n    this.systems.addPortFrontSystem([\n      new systems.RailgunTurreted2x140mm(\n        { id: 612, hitpoints: 8, armor: 4 },\n        { start: 270, end: 30 }\n      ),\n      new systems.ChemicalThruster({ id: 601, hitpoints: 10, armor: 3 }, 15, [\n        4,\n        5,\n      ]),\n\n      new systems.AutoCannon85mm(\n        { id: 603, hitpoints: 6, armor: 3 },\n        { start: 200, end: 30 }\n      ),\n      new systems.PDC30mm(\n        { id: 602, hitpoints: 4, armor: 3 },\n        { start: 180, end: 0 }\n      ),\n      new systems.AutoCannon85mm(\n        { id: 604, hitpoints: 6, armor: 3 },\n        { start: 200, end: 30 }\n      ),\n    ]);\n\n    this.systems.addAftSystem([\n      new systems.ManeuveringThruster(\n        { id: 401, hitpoints: 10, armor: 3 },\n        10,\n        3\n      ),\n\n      new systems.Thruster({ id: 431, hitpoints: 15, armor: 3 }, 15, 3),\n      new systems.Thruster({ id: 432, hitpoints: 15, armor: 3 }, 15, 3),\n      new systems.Thruster({ id: 433, hitpoints: 15, armor: 3 }, 15, 3),\n\n      new systems.Structure({\n        id: 411,\n        hitpoints: 80,\n        armor: 4,\n        heatStorage: 100,\n        radiator: 5,\n        fuel: 4000,\n      }),\n      new systems.Radiator10x40({ id: 412, hitpoints: 10, armor: 3 }),\n      new systems.Reactor({ id: 407, hitpoints: 10, armor: 3 }, 30),\n      new systems.AutoCannon85mm(\n        { id: 421, hitpoints: 6, armor: 3 },\n        { start: 0, end: 0 }\n      ),\n    ]);\n\n    this.systems.addPortAftSystem([\n      new systems.Radiator10x40({ id: 501 }),\n      new systems.CargoBay({ id: 502, hitpoints: 20, armor: 4 }, 150),\n      new systems.TorpedoLauncher158({ id: 503, hitpoints: 10, armor: 4 }),\n      new systems.TorpedoLauncherDual72({ id: 504, hitpoints: 10, armor: 4 }),\n      new systems.AutoCannon85mm(\n        { id: 521, hitpoints: 6, armor: 3 },\n        { start: 160, end: 30 }\n      ),\n    ]);\n\n    this.systems.addStarboardAftSystem([\n      new systems.Radiator10x40({ id: 301 }),\n      new systems.CargoBay({ id: 302, hitpoints: 20, armor: 4 }, 150),\n      new systems.TorpedoLauncher158({ id: 303, hitpoints: 10, armor: 4 }),\n      new systems.TorpedoLauncherDual72({ id: 304, hitpoints: 10, armor: 4 }),\n      new systems.AutoCannon85mm(\n        { id: 321, hitpoints: 6, armor: 3 },\n        { start: 330, end: 200 }\n      ),\n    ]);\n  }\n\n  setShipLoadout() {\n    super.setShipLoadout();\n\n    const cargoService = new CargoService();\n    cargoService.divideCargo(this, {\n      object: new Torpedo72MSV(),\n      amount: 12,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Torpedo72HE(),\n      amount: 12,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Torpedo158MSV(),\n      amount: 12,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Torpedo158Nuclear(),\n      amount: 2,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Ammo30mm(),\n      amount: 800,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Ammo140mmAP(),\n      amount: 40,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Ammo140mmHE(),\n      amount: 80,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Ammo85mmAP(),\n      amount: 200,\n    });\n\n    cargoService.divideCargo(this, {\n      object: new Ammo85mmHE(),\n      amount: 400,\n    });\n\n    this.systems.getSystemById(303).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo158MSV(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(503).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo158MSV(),\n      launcherIndex: 1,\n    });\n\n    this.systems.getSystemById(304).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72MSV(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(304).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72HE(),\n      launcherIndex: 2,\n    });\n\n    this.systems.getSystemById(504).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72MSV(),\n      launcherIndex: 1,\n    });\n    this.systems.getSystemById(504).callHandler(\"loadAmmoInstant\", {\n      ammo: new Torpedo72HE(),\n      launcherIndex: 2,\n    });\n  }\n}\n\nexport default Caliope;\n","import Ship from \"../../Ship.mjs\";\r\nimport systems from \"../../system/index.mjs\";\r\nimport Offset from \"../../../hexagon/Offset.mjs\";\r\nimport { RailgunTurreted32gw } from \"../../system/weapon/coilgun/index.mjs\";\r\n\r\nclass Mouros extends Ship {\r\n  setShipProperties() {\r\n    this.shipTypeName =\r\n      \"OuterLight Industries Mouros 118-A mainstay battleship\";\r\n    this.accelcost = 3;\r\n    this.rollcost = 3;\r\n    this.pivotcost = 3;\r\n    this.evasioncost = 3;\r\n    this.hexSizes = [\r\n      new Offset(-2, 0),\r\n      new Offset(-1, 0),\r\n      new Offset(0, 0),\r\n      new Offset(1, 0),\r\n      new Offset(2, 0),\r\n      new Offset(3, 0)\r\n      /*\r\n      new Offset(1, 1),\r\n      new Offset(2, 1),\r\n      new Offset(1, -1),\r\n      new Offset(2, -1),\r\n      new Offset(-1, 1),\r\n      new Offset(-0, 1),\r\n      new Offset(-1, -1),\r\n      new Offset(-0, -1)\r\n      */\r\n    ];\r\n\r\n    this.description = ``;\r\n\r\n    this.shipModel = \"Mouros\";\r\n    this.pointCost = 500;\r\n\r\n    this.systems.addFrontSystem([\r\n      new systems.ManeuveringThruster(\r\n        { id: 101, hitpoints: 10, armor: 3 },\r\n        3,\r\n        2\r\n      ),\r\n\r\n      new systems.Structure({ id: 102, hitpoints: 40, armor: 6 })\r\n    ]);\r\n\r\n    this.systems.addPrimarySystem([\r\n      new systems.Thruster({ id: 1, hitpoints: 10, armor: 3 }, 5, 0),\r\n      new systems.Thruster({ id: 2, hitpoints: 10, armor: 3 }, 5, 0),\r\n\r\n      new systems.EwArray({ id: 12, hitpoints: 30, armor: 4 }, 8),\r\n\r\n      new systems.Engine({ id: 5, hitpoints: 10, armor: 7 }, 10, 6, 2),\r\n      new systems.Reactor({ id: 7, hitpoints: 10, armor: 3 }, 20),\r\n      new systems.Structure({ id: 11, hitpoints: 50, armor: 5 })\r\n    ]);\r\n\r\n    this.systems.addAftSystem([\r\n      new systems.ManeuveringThruster(\r\n        { id: 201, hitpoints: 10, armor: 3 },\r\n        3,\r\n        2\r\n      ),\r\n\r\n      new systems.Engine({ id: 206, hitpoints: 20, armor: 7 }, 15, 6, 2),\r\n      new systems.Thruster({ id: 203, hitpoints: 10, armor: 3 }, 5, 3),\r\n      new systems.Thruster({ id: 204, hitpoints: 10, armor: 3 }, 5, 3),\r\n      new systems.Structure({ id: 202, hitpoints: 80, armor: 4 })\r\n    ]);\r\n\r\n    this.systems.addStarboardAftSystem([\r\n      new RailgunTurreted32gw(\r\n        { id: 301, hitpoints: 10, armor: 3 },\r\n        { start: 0, end: 183 }\r\n      ),\r\n\r\n      new systems.Thruster({ id: 308, hitpoints: 10, armor: 3 }, 5, [1, 2])\r\n    ]);\r\n\r\n    this.systems.addPortAftSystem([\r\n      new RailgunTurreted32gw(\r\n        { id: 501, hitpoints: 10, armor: 3 },\r\n        { start: 177, end: 0 }\r\n      ),\r\n\r\n      new systems.Thruster({ id: 508, hitpoints: 10, armor: 3 }, 5, [4, 5])\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default Mouros;\r\n","import Ship from \"../../Ship.mjs\";\r\nimport systems from \"../../system/index.mjs\";\r\nimport Offset from \"../../../hexagon/Offset.mjs\";\r\nimport Torpedo72MSV from \"../../system/weapon/ammunition/torpedo/Torpedo72MSV.mjs\";\r\nimport CargoService from \"../../../cargo/CargoService.mjs\";\r\nimport Ammo30mm from \"../../system/weapon/ammunition/conventional/Ammo30mm.mjs\";\r\nimport Ammo120mmAP from \"../../system/weapon/ammunition/conventional/Ammo120mmAP.mjs\";\r\nimport Ammo120mmHE from \"../../system/weapon/ammunition/conventional/Ammo120mmHE.mjs\";\r\n\r\nclass Fulcrum extends Ship {\r\n  setShipProperties() {\r\n    this.shipTypeName = \"Arakaki Systems Fulcrum IV fleet destroyer\";\r\n    this.accelcost = 2;\r\n    this.rollcost = 4;\r\n    this.pivotcost = 2;\r\n    this.evasioncost = 2;\r\n    this.hexSizes = [new Offset(1, 0), new Offset(0, 0), new Offset(-1, 0)];\r\n\r\n    this.description = `\r\n       Fulcrum was ordered to fill the role of a fleet destroyer. A ship that packs enough of a punch in \r\n       sufficiently armored frame to engage in front line fleet combat. The design requirements allowed\r\n       a considerable defieciency in endurance making the Fulcrum a ship that needs a supporting fleet\r\n       to operate in a meaningful role on a modern battlefield. \r\n\r\n       Arakaki Systems won the contract with the Fulcrum design. Fulcrum sacrifices endurance, \r\n       heat management and some speed to bring on a battlefield a destroyed armed with a spinal\r\n       mounted railgun, three kinetic cannons on a fixed bow mount, considerable six light PDCs \r\n       and a two missile launchers. All this in well armored spaceframe. \r\n\r\n       A squadron of Fulcrums can turn a battle if employed properly, but their role and \r\n       commitment must be well planned. A Fulcrum can function in a role of escort, rail gun attack craft\r\n       or close attack craft, but lack the endurance and heat management to keep up sustained railgun fire\r\n       or the manouvers needed in close quarters. This forces Fulcrums to disengage under fleet\r\n       protection to extends radiators or in extreme cases to resupply fuel and ammunition.\r\n\r\n       While the Fulcrum has a considerable PDC grid its missile capacity is greatly lacking for anything\r\n       else than defense or employment against unarmed or disabled targets. Fulcrums are also considered\r\n       undercrewed by many fleet standards. In combat operations the crew must work and live in cramped \r\n       conditions in extended shifts. Crew compliment does not include any marines, and the ship \r\n       deck plan is not optimized for repeling boarders, nor does it have any capacity for holding prisoners.\r\n\r\n       Regardless of this long list of deficiencies, a Fulcrum can employ a combination of superior\r\n       weaponry and manouverability to create an engagement where Fulcrum can effectively either \r\n       out range or out gun its opponent. In close quarter battle a Fulcrum can engage an opponent\r\n       and with superior armor still disengage with neglible damage to critical systems.\r\n    `;\r\n\r\n    this.shipModel = \"Fulcrum\";\r\n    this.pointCost = 500;\r\n\r\n    this.systems.addFrontSystem([\r\n      new systems.Structure({\r\n        id: 100,\r\n        hitpoints: 30,\r\n        armor: 5,\r\n        heatStorage: 30,\r\n        radiator: 5,\r\n      }),\r\n\r\n      new systems.CoilgunLightFixed({ id: 102 }, { start: 330, end: 30 }),\r\n      new systems.RailgunFixed120mm({ id: 103 }, { start: 330, end: 30 }),\r\n      new systems.RailgunFixed120mm({ id: 104 }, { start: 330, end: 30 }),\r\n      new systems.RailgunFixed120mm({ id: 105 }, { start: 330, end: 30 }),\r\n\r\n      new systems.ChemicalThruster({ id: 106, hitpoints: 10, armor: 3 }, 10, 0),\r\n      new systems.ChemicalThruster({ id: 107, hitpoints: 10, armor: 3 }, 10, 0),\r\n      new systems.ManeuveringThruster(\r\n        { id: 101, hitpoints: 10, armor: 3 },\r\n        10,\r\n        2\r\n      ),\r\n      new systems.TorpedoLauncherDual72({ id: 108, hitpoints: 10, armor: 4 }),\r\n    ]);\r\n\r\n    this.systems.addPrimarySystem([\r\n      new systems.EwArray(\r\n        { id: 12, hitpoints: 12, armor: 6, boostPower: 5 },\r\n        7\r\n      ),\r\n\r\n      new systems.Reactor({ id: 7, hitpoints: 15, armor: 7 }, 35),\r\n      new systems.Structure({\r\n        id: 11,\r\n        hitpoints: 30,\r\n        armor: 6,\r\n        cargoSpace: 100,\r\n        heatStorage: 70,\r\n        radiator: 5,\r\n      }),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 14, alwaysTargetable: true },\r\n        { start: 0, end: 0 }\r\n      ),\r\n    ]);\r\n\r\n    this.systems.addAftSystem([\r\n      new systems.Structure({\r\n        id: 200,\r\n        hitpoints: 40,\r\n        armor: 6,\r\n        heatStorage: 20,\r\n        radiator: 10,\r\n        fuel: 2000,\r\n      }),\r\n\r\n      new systems.ManeuveringThruster(\r\n        { id: 201, hitpoints: 10, armor: 3 },\r\n        10,\r\n        2\r\n      ),\r\n      new systems.Thruster({ id: 203, hitpoints: 20, armor: 3 }, 15, 3, {\r\n        power: 2,\r\n        boostPower: 1,\r\n        maxBoost: 10,\r\n      }),\r\n\r\n      new systems.PDC30mm(\r\n        { id: 214, alwaysTargetable: true },\r\n        { start: 0, end: 0 }\r\n      ),\r\n\r\n      new systems.Radiator5x40({ id: 316 }),\r\n      new systems.CargoBay({ id: 317, hitpoints: 10, armor: 4 }, 100),\r\n    ]);\r\n\r\n    this.systems.addStarboardFrontSystem([\r\n      new systems.PDC30mm(\r\n        { id: 15, hitpoints: 5, armor: 3 },\r\n        { start: 0, end: 180 }\r\n      ),\r\n    ]);\r\n\r\n    this.systems.addStarboardAftSystem([\r\n      new systems.PDC30mm(\r\n        { id: 215, hitpoints: 5, armor: 3 },\r\n        { start: 0, end: 180 }\r\n      ),\r\n\r\n      new systems.Radiator5x40({ id: 216 }),\r\n    ]);\r\n\r\n    this.systems.addPortFrontSystem([\r\n      new systems.PDC30mm(\r\n        { id: 13, hitpoints: 5, armor: 3 },\r\n        { start: 180, end: 0 }\r\n      ),\r\n    ]);\r\n\r\n    this.systems.addPortAftSystem([\r\n      new systems.PDC30mm(\r\n        { id: 213, hitpoints: 5, armor: 3 },\r\n        { start: 180, end: 0 }\r\n      ),\r\n\r\n      new systems.Radiator5x40({ id: 416 }),\r\n    ]);\r\n  }\r\n\r\n  setShipLoadout() {\r\n    super.setShipLoadout();\r\n\r\n    const cargoService = new CargoService();\r\n    cargoService.divideCargo(this, {\r\n      object: new Torpedo72MSV(),\r\n      amount: 12,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo30mm(),\r\n      amount: 120,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo120mmAP(),\r\n      amount: 20,\r\n    });\r\n\r\n    cargoService.divideCargo(this, {\r\n      object: new Ammo120mmHE(),\r\n      amount: 20,\r\n    });\r\n\r\n    this.systems.getSystemById(108).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo72MSV(),\r\n      launcherIndex: 1,\r\n    });\r\n    this.systems.getSystemById(108).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo72MSV(),\r\n      launcherIndex: 2,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Fulcrum;\r\n","import Weapon from \"../Weapon.mjs\";\r\nimport FireOrderStrategy from \"../../strategy/weapon/FireOrderStrategy.mjs\";\r\nimport WeaponArcStrategy from \"../../strategy/weapon/WeaponArcStrategy.mjs\";\r\nimport StandardHitStrategy from \"../../strategy/weapon/StandardHitStrategy.mjs\";\r\nimport StandardRangeStrategy from \"../../strategy/weapon/StandardRangeStrategy.mjs\";\r\nimport StandardLoadingStrategy from \"../../strategy/weapon/StandardLoadingStrategy.mjs\";\r\nimport BurstDamageStrategy from \"../../strategy/weapon/BurstDamageStrategy.mjs\";\r\nimport RequiresPowerSystemStrategy from \"../../strategy/RequiresPowerSystemStrategy.mjs\";\r\nimport WeaponAnimationStrategy from \"../../strategy/weapon/WeaponAnimationStrategy.mjs\";\r\nimport InterceptorStrategy from \"../../strategy/weapon/InterceptorStrategy.mjs\";\r\nimport { Ammo30mm } from \"../ammunition/conventional/index.mjs\";\r\nimport AmmunitionStrategy from \"../../strategy/weapon/AmmunitionStrategy.mjs\";\r\nimport { MEDIUM_WEAPON_RANGE } from \"../../../../gameConfig.mjs\";\r\n\r\nclass X2PDC30mm extends Weapon {\r\n  constructor(args, arcs) {\r\n    super(args, [\r\n      new RequiresPowerSystemStrategy(2),\r\n      new FireOrderStrategy(2),\r\n      new WeaponArcStrategy(arcs),\r\n      new StandardHitStrategy(30),\r\n      new StandardRangeStrategy([\r\n        { range: 0, modifier: 0 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.3), modifier: -20 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.5), modifier: -50 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.6), modifier: -100 },\r\n        { range: Math.round(MEDIUM_WEAPON_RANGE * 0.8), modifier: -200 },\r\n      ]),\r\n      new StandardLoadingStrategy(1),\r\n      new BurstDamageStrategy(\"d2\", \"d3+2\", 0, 6, 5),\r\n      new InterceptorStrategy(2),\r\n      new AmmunitionStrategy([Ammo30mm], 6, 36, 12),\r\n      new WeaponAnimationStrategy(\"UniversalBolt\", {\r\n        size: 6,\r\n        speed: 0.35,\r\n        color: [1.0, 0.8, 0.4],\r\n        shots: 6,\r\n      }),\r\n    ]);\r\n  }\r\n\r\n  getDisplayName() {\r\n    return \"2x30mm PDC\";\r\n  }\r\n\r\n  getBackgroundImage() {\r\n    return \"/img/system/gatlingPulseCannon.png\";\r\n  }\r\n}\r\n\r\nexport default X2PDC30mm;\r\n","import Ship from \"../../Ship.mjs\";\r\nimport systems from \"../../system/index.mjs\";\r\nimport Offset from \"../../../hexagon/Offset.mjs\";\r\nimport { X2PDC30mm } from \"../../system/weapon/pdc/index.mjs\";\r\nimport { RailgunTurreted64gw } from \"../../system/weapon/coilgun/index.mjs\";\r\nimport Torpedo158MSV from \"../../system/weapon/ammunition/torpedo/Torpedo158MSV.mjs\";\r\nimport Torpedo158Nuclear from \"../../system/weapon/ammunition/torpedo/Torpedo158Nuclear.mjs\";\r\n\r\nclass Impetous extends Ship {\r\n  setShipProperties() {\r\n    this.shipTypeName = \"Impetous\";\r\n    this.accelcost = 3;\r\n    this.rollcost = 3;\r\n    this.pivotcost = 3;\r\n    this.evasioncost = 3;\r\n    this.hexSizes = [\r\n      new Offset(3, 0),\r\n      new Offset(2, 0),\r\n      new Offset(1, 0),\r\n      new Offset(0, 0),\r\n      new Offset(-1, 0),\r\n      new Offset(-2, 0),\r\n      new Offset(-3, 0),\r\n      new Offset(-4, 0),\r\n      new Offset(3, 1),\r\n      new Offset(2, 1),\r\n      new Offset(1, 1),\r\n      new Offset(0, 1),\r\n      new Offset(-1, 1),\r\n      new Offset(-2, 1),\r\n      new Offset(-3, 1),\r\n      new Offset(3, -1),\r\n      new Offset(2, -1),\r\n      new Offset(1, -1),\r\n      new Offset(0, -1),\r\n      new Offset(-1, -1),\r\n      new Offset(-2, -1),\r\n      new Offset(-3, -1)\r\n    ];\r\n\r\n    this.description = ``;\r\n\r\n    this.shipModel = \"Impetous\";\r\n    this.pointCost = 500;\r\n\r\n    this.systems.addFrontSystem([\r\n      new systems.ManeuveringThruster({ id: 1, hitpoints: 10, armor: 3 }, 3, 2),\r\n      new systems.Structure({ id: 100, hitpoints: 90, armor: 5 })\r\n    ]);\r\n\r\n    this.systems.addPrimarySystem([\r\n      new systems.Thruster({ id: 601, hitpoints: 10, armor: 3 }, 5, 0),\r\n      new systems.Thruster({ id: 602, hitpoints: 10, armor: 3 }, 5, 0),\r\n      new systems.Thruster({ id: 603, hitpoints: 10, armor: 3 }, 5, 3),\r\n      new systems.Thruster({ id: 604, hitpoints: 10, armor: 3 }, 5, 3),\r\n\r\n      new systems.EwArray({ id: 612, hitpoints: 30, armor: 4 }, 8),\r\n\r\n      new systems.Engine({ id: 605, hitpoints: 10, armor: 3 }, 12, 6, 2),\r\n      new systems.Engine({ id: 606, hitpoints: 10, armor: 3 }, 12, 6, 2),\r\n      new systems.Reactor({ id: 607, hitpoints: 10, armor: 3 }, 20),\r\n      new systems.Structure({ id: 611, hitpoints: 75, armor: 6 }),\r\n\r\n      new RailgunTurreted64gw({ id: 613, hitpoints: 20, armor: 3 }, [\r\n        { start: 30, end: 150 },\r\n        { start: 210, end: 330 }\r\n      ]),\r\n      new RailgunTurreted64gw({ id: 614, hitpoints: 20, armor: 3 }, [\r\n        { start: 30, end: 150 },\r\n        { start: 210, end: 330 }\r\n      ])\r\n    ]);\r\n\r\n    this.systems.addAftSystem([\r\n      new systems.ManeuveringThruster(\r\n        { id: 201, hitpoints: 10, armor: 3 },\r\n        3,\r\n        2\r\n      ),\r\n\r\n      new systems.TorpedoLauncherDual158({ id: 202, hitpoints: 20, armor: 6 }),\r\n      new systems.TorpedoLauncherDual158({ id: 203, hitpoints: 20, armor: 6 }),\r\n      new systems.CargoBay({ id: 204, hitpoints: 20, armor: 4 }, 500),\r\n      new systems.Structure({ id: 200, hitpoints: 90, armor: 5 })\r\n    ]);\r\n\r\n    this.systems.addStarboardFrontSystem([\r\n      new X2PDC30mm(\r\n        { id: 101, hitpoints: 5, armor: 3 },\r\n        { start: 0, end: 180 }\r\n      ),\r\n      new X2PDC30mm(\r\n        { id: 102, hitpoints: 5, armor: 3 },\r\n        { start: 0, end: 180 }\r\n      ),\r\n      new X2PDC30mm(\r\n        { id: 103, hitpoints: 5, armor: 3 },\r\n        { start: 0, end: 180 }\r\n      ),\r\n\r\n      new systems.Thruster({ id: 104, hitpoints: 10, armor: 3 }, 5, [1, 2])\r\n    ]);\r\n\r\n    this.systems.addPortFrontSystem([\r\n      new X2PDC30mm(\r\n        { id: 501, hitpoints: 5, armor: 3 },\r\n        { start: 180, end: 0 }\r\n      ),\r\n      new X2PDC30mm(\r\n        { id: 502, hitpoints: 5, armor: 3 },\r\n        { start: 180, end: 0 }\r\n      ),\r\n      new X2PDC30mm(\r\n        { id: 503, hitpoints: 5, armor: 3 },\r\n        { start: 180, end: 0 }\r\n      ),\r\n\r\n      new systems.Thruster({ id: 504, hitpoints: 10, armor: 3 }, 5, [4, 5])\r\n    ]);\r\n  }\r\n\r\n  setShipLoadout() {\r\n    super.setShipLoadout();\r\n    const cargoBay = this.systems.getSystemById(204);\r\n\r\n    cargoBay.callHandler(\"addCargo\", {\r\n      object: new Torpedo158MSV(),\r\n      amount: 14\r\n    });\r\n\r\n    cargoBay.callHandler(\"addCargo\", {\r\n      object: new Torpedo158Nuclear(),\r\n      amount: 2\r\n    });\r\n\r\n    this.systems.getSystemById(202).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo158MSV(),\r\n      launcherIndex: 1\r\n    });\r\n    this.systems.getSystemById(202).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo158MSV(),\r\n      launcherIndex: 2\r\n    });\r\n\r\n    this.systems.getSystemById(203).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo158MSV(),\r\n      launcherIndex: 1\r\n    });\r\n    this.systems.getSystemById(203).callHandler(\"loadAmmoInstant\", {\r\n      ammo: new Torpedo158MSV(),\r\n      launcherIndex: 2\r\n    });\r\n  }\r\n}\r\n\r\nexport default Impetous;\r\n","import * as Uc from \"./uc/index.mjs\";\r\nimport * as Test from \"./test/index.mjs\";\r\nimport * as Protectorate from \"./protectorate/index.mjs\";\r\nimport * as Federation from \"./federation/index.mjs\";\r\n\r\nconst merged = { ...Uc, ...Protectorate, ...Test, ...Federation };\r\nexport default merged;\r\n","import ships from \"./ships/index.mjs\";\n\nexport const createShipObject = data => {\n  const { shipClass } = data;\n  if (!shipClass) {\n    throw new Error(\"Ship class missing, can not construct a ship\");\n  }\n\n  try {\n    return new ships[shipClass](data);\n  } catch (e) {\n    console.error(`Unable to construct ship of class \"${shipClass}\"`);\n    throw e;\n  }\n};\n\nexport const createBareShipObject = data => {\n  const { shipClass } = data;\n  if (!shipClass) {\n    throw new Error(\"Ship class missing, can not construct a ship\");\n  }\n\n  try {\n    return new ships[shipClass]();\n  } catch (e) {\n    console.error(`Unable to construct plain ship of class \"${shipClass}\"`);\n    throw e;\n  }\n};\n","import { createShipObject } from \"../unit/createShipObject.mjs\";\n\nclass GameShips {\n  constructor(gameData) {\n    this.gameData = gameData;\n    this.ships = [];\n  }\n\n  isSameTeam(shipA, shipB) {\n    return (\n      this.gameData.slots.getTeamForShip(shipA) ===\n      this.gameData.slots.getTeamForShip(shipB)\n    );\n  }\n\n  addShip(ship) {\n    if (ship.id && this.getShipById(ship.id)) {\n      throw new Error(\"Duplicate ship id added to gamedata\");\n    }\n\n    this.ships.push(ship);\n    return this;\n  }\n\n  getShips() {\n    return this.ships;\n  }\n\n  getAliveShips() {\n    return this.ships.filter((ship) => !ship.isDestroyed());\n  }\n\n  getShipById(id) {\n    return this.ships.find((ship) => ship.id === id);\n  }\n\n  getUsersShips(user) {\n    return this.ships.filter(\n      (ship) => ship.player.isUsers(user) && !ship.isDestroyed()\n    );\n  }\n\n  getShipsInSameTeam(user) {\n    const slot = this.gameData.slots.getUsersSlots(user);\n    if (!slot || slot.length === 0) {\n      return [];\n    }\n    const team = slot.pop().team;\n\n    return this.ships.filter(\n      (ship) =>\n        this.gameData.slots.getSlotByShip(ship).team === team &&\n        !ship.isDestroyed()\n    );\n  }\n\n  getShipsEnemyTeams(user) {\n    const teamShips = this.getShipsInSameTeam(user);\n\n    return this.ships.filter(\n      (ship) => !teamShips.includes(ship) && !ship.isDestroyed()\n    );\n  }\n\n  serialize() {\n    return this.ships.map((ship) => ship.serialize());\n  }\n\n  deserialize(ships = []) {\n    this.ships = ships.map((shipData) => createShipObject(shipData));\n\n    return this;\n  }\n\n  setShipLoadouts() {\n    this.getShips().forEach((ship) => ship.setShipLoadout());\n  }\n}\n\nexport default GameShips;\n","class GameActiveShips {\r\n  constructor(gameData) {\r\n    this.gameData = gameData;\r\n    this.shipIds = [];\r\n  }\r\n\r\n  isActive(ship) {\r\n    return this.shipIds.includes(ship.id);\r\n  }\r\n\r\n  setActive(ship) {\r\n    if (this.isActive(ship)) {\r\n      return;\r\n    }\r\n\r\n    this.shipIds.push(ship.id);\r\n  }\r\n\r\n  setInactive(ship) {\r\n    this.shipIds = this.shipIds.filter(id => id !== ship.id);\r\n  }\r\n\r\n  serialize() {\r\n    return this.shipIds;\r\n  }\r\n\r\n  deserialize(data = []) {\r\n    this.shipIds = data;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default GameActiveShips;\r\n","import Vector from \"../../model/utils/Vector.mjs\";\r\nconst TERRAIN_TYPE_SUN = \"sun\";\r\n\r\nclass GameTerrainEntity {\r\n  constructor(data) {\r\n    this.deserialize(data);\r\n  }\r\n\r\n  getGravityVector(position) {\r\n    const distance = position.distanceTo(this.position);\r\n    const actualGravity = this.gravity / Math.pow(distance, 2);\r\n\r\n    const gravityVector = this.position\r\n      .sub(position)\r\n      .normalize()\r\n      .multiplyScalar(actualGravity);\r\n\r\n    return gravityVector;\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.id = data.id || null;\r\n    this.type = data.type || TERRAIN_TYPE_SUN;\r\n    this.mass = 10000000000; // data.mass || 1000000000;\r\n    this.position = new Vector(data.position);\r\n    this.velocity = new Vector(data.velocity);\r\n    this.diameter = 7; // data.diameter || 1;\r\n    this.radius = this.affectedByGravity = this.type !== TERRAIN_TYPE_SUN;\r\n\r\n    return this;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      id: this.id,\r\n      type: this.type,\r\n      position: this.position,\r\n      velocity: this.velocity,\r\n      radius: this.diameter,\r\n      mass: this.mass\r\n    };\r\n  }\r\n}\r\n\r\nexport default GameTerrainEntity;\r\n","import Vector from \"./Vector.mjs\";\r\nimport THREE from \"three\";\r\n\r\nconst a = [\r\n  [0, 0, 0, 0, 0],\r\n  [1 / 4, 0, 0, 0, 0],\r\n  [3 / 32, 9 / 32, 0, 0, 0],\r\n  [1932 / 2197, -7200 / 2197, 7296 / 2197, 0, 0],\r\n  [439 / 216, -8, 3680 / 513, -845 / 4104, 0],\r\n  [-8 / 27, 2, -3544 / 2565, 1859 / 4104, -11 / 40]\r\n];\r\n\r\nconst bs = [16 / 135, 0, 6656 / 12825, 28561 / 56430, -9 / 50, 2 / 55];\r\n\r\nconst bsx = [25 / 216, 0, 1408 / 2565, 2197 / 4104, -1 / 5, 0];\r\n\r\nconst getCacheKey = (stage, arkFunction) => arkFunction + stage;\r\n\r\nclass ARKStep {\r\n  constructor(position, velocity, parentPosition, parentMass, dt) {\r\n    this.setValues(position, velocity, parentPosition, parentMass, dt);\r\n  }\r\n\r\n  derivativeVelocityX(position) {\r\n    const r = this.parentPosition.sub(position);\r\n    return (this.parentMass / Math.pow(r.length(), 3)) * r.x;\r\n  }\r\n\r\n  derivativeVelocityY(position) {\r\n    const r = this.parentPosition.sub(position);\r\n    return (this.parentMass / Math.pow(r.length(), 3)) * r.y;\r\n  }\r\n\r\n  sum(stage, f) {\r\n    let total = 0;\r\n    for (let i = 0; i < stage; i++) {\r\n      total += a[stage][i] * this.k(i, f);\r\n    }\r\n\r\n    return total;\r\n  }\r\n\r\n  kx(stage) {\r\n    return this.dt * (this.velocity.x + this.sum(stage, \"vx\"));\r\n  }\r\n\r\n  ky(stage) {\r\n    return this.dt * (this.velocity.y + this.sum(stage, \"vy\"));\r\n  }\r\n\r\n  kvx(stage) {\r\n    return (\r\n      this.dt *\r\n      this.derivativeVelocityX(\r\n        new Vector(\r\n          this.position.x + this.sum(stage, \"x\"),\r\n          this.position.y + this.sum(stage, \"y\")\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  kvy(stage) {\r\n    return (\r\n      this.dt *\r\n      this.derivativeVelocityY(\r\n        new Vector(\r\n          this.position.x + this.sum(stage, \"x\"),\r\n          this.position.y + this.sum(stage, \"y\")\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  k(stage, f) {\r\n    const cached = this.findCached(stage, f);\r\n    if (cached !== null) {\r\n      this.cacheHit++;\r\n      return cached;\r\n    }\r\n\r\n    this.cacheMiss++;\r\n    let result = null;\r\n\r\n    switch (f) {\r\n      case \"x\":\r\n        result = this.kx(stage);\r\n        break;\r\n      case \"y\":\r\n        result = this.ky(stage);\r\n        break;\r\n      case \"vx\":\r\n        result = this.kvx(stage);\r\n        break;\r\n      case \"vy\":\r\n        result = this.kvy(stage);\r\n        break;\r\n    }\r\n\r\n    this.setCache(stage, f, result);\r\n\r\n    return result;\r\n  }\r\n\r\n  findCached(stage, f) {\r\n    const key = getCacheKey(stage, f);\r\n    return this.cache[key] !== undefined ? this.cache[key] : null;\r\n  }\r\n\r\n  setCache(stage, f, result) {\r\n    const key = getCacheKey(stage, f);\r\n    this.cache[key] = result;\r\n  }\r\n\r\n  setValues(position, velocity, parentPosition, parentMass, dt) {\r\n    this.position = position;\r\n    this.velocity = velocity;\r\n    this.parentPosition = parentPosition;\r\n    this.parentMass = parentMass;\r\n    this.dt = dt;\r\n    this.cache = {};\r\n    this.cacheHit = 0;\r\n    this.cacheMiss = 0;\r\n    return this;\r\n  }\r\n\r\n  getAllKs(f) {\r\n    const result = [];\r\n    for (let i = 0; i < 6; i++) {\r\n      result[i] = this.k(i, f);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  weightedSum(values, k) {\r\n    return values\r\n      .map((value, i) => value * k[i])\r\n      .reduce((accumulator, current) => accumulator + current, 0);\r\n  }\r\n\r\n  subVectors(a, b) {\r\n    return a.map((valueA, i) => valueA - b[i]);\r\n  }\r\n\r\n  calculate() {\r\n    const ks = {\r\n      x: this.getAllKs(\"x\"),\r\n      y: this.getAllKs(\"y\"),\r\n      vx: this.getAllKs(\"vx\"),\r\n      vy: this.getAllKs(\"vy\")\r\n    };\r\n\r\n    const dPosition = new Vector(\r\n      this.weightedSum(bs, ks.x),\r\n      this.weightedSum(bs, ks.y)\r\n    );\r\n\r\n    const dVelocity = new Vector(\r\n      this.weightedSum(bs, ks.vx),\r\n      this.weightedSum(bs, ks.vy)\r\n    );\r\n\r\n    const error = new THREE.Vector4(\r\n      this.weightedSum(this.subVectors(bs, bsx), ks.x),\r\n      this.weightedSum(this.subVectors(bs, bsx), ks.y),\r\n      this.weightedSum(this.subVectors(bs, bsx), ks.vx),\r\n      this.weightedSum(this.subVectors(bs, bsx), ks.vy)\r\n    ).length();\r\n\r\n    return { dPosition, dVelocity, error };\r\n  }\r\n\r\n  reportCache() {\r\n    console.log(\r\n      \"total:\",\r\n      this.cacheHit + this.cacheMiss,\r\n      \"hit ratio:\",\r\n      this.cacheHit / (this.cacheHit + this.cacheMiss),\r\n      \"hit:\",\r\n      this.cacheHit,\r\n      \"miss:\",\r\n      this.cacheMiss\r\n    );\r\n  }\r\n}\r\n\r\nexport default ARKStep;\r\n","import ARKStep from \"./ARKStep.mjs\";\r\nimport Vector from \"./Vector.mjs\";\r\n\r\nconst arkStep = new ARKStep();\r\n\r\nconst MAX_ERROR = 0.001;\r\nconst MIN_ERROR = MAX_ERROR / 100;\r\n\r\nclass ARK {\r\n  constructor(gameTerrain) {\r\n    this.gameTerrain = gameTerrain;\r\n  }\r\n\r\n  calculateNewPositionVelocity(position, velocity, turn) {\r\n    let dt = 0.1;\r\n    let currentTime = 0;\r\n\r\n    let positions = [position.clone()];\r\n    /*\r\n    console.log(\r\n      \"startPosition\",\r\n      position.toString(),\r\n      \"startVelocity\",\r\n      velocity.toString()\r\n    );\r\n*/\r\n\r\n    const parent = this.gameTerrain.getParentEntity(position, turn);\r\n\r\n    if (!parent) {\r\n      const endPosition = position.add(velocity);\r\n      positions.push(endPosition);\r\n      return {\r\n        position: endPosition,\r\n        velocity,\r\n        positions,\r\n        collision: false\r\n      };\r\n    }\r\n\r\n    const parentMass = parent.mass;\r\n    const parentPosition = parent.position;\r\n\r\n    while (currentTime < 1 && dt <= 1) {\r\n      if (parent && parentPosition.distanceTo(position) < 100) {\r\n        positions.push(parentPosition.clone());\r\n        return {\r\n          position: parentPosition.clone(),\r\n          velocity: new Vector(0, 0),\r\n          positions,\r\n          collision: true\r\n        };\r\n      }\r\n\r\n      const { dPosition, dVelocity, error } = arkStep\r\n        .setValues(position, velocity, parentPosition, parentMass, dt)\r\n        .calculate();\r\n      //console.log(\"dt\", dt, \"currentTime\", currentTime);\r\n\r\n      if (error > MAX_ERROR) {\r\n        dt = dt * 0.5;\r\n        continue;\r\n      } else if (error < MIN_ERROR) {\r\n        dt = dt * 2;\r\n        continue;\r\n      } else if (currentTime + dt > 1) {\r\n        break;\r\n      } else {\r\n        position = position.add(dPosition);\r\n        velocity = velocity.add(dVelocity);\r\n        positions.push(position.clone());\r\n\r\n        //console.log(\"step\", position.toString(), \"delta time\", dt);\r\n\r\n        currentTime += dt;\r\n      }\r\n    }\r\n\r\n    dt = 1 - currentTime;\r\n    currentTime = 1;\r\n\r\n    const { dPosition: fDPosition, dVelocity: fDVelocity } = arkStep\r\n      .setValues(position, velocity, parentPosition, parentMass, dt)\r\n      .calculate();\r\n\r\n    position = position.add(fDPosition);\r\n    velocity = velocity.add(fDVelocity);\r\n    positions.push(position.clone());\r\n    /*\r\n    console.log(currentTime);\r\n\r\n    console.log(\r\n      \"endPosition\",\r\n      position.toString(),\r\n      \"endVelocity\",\r\n      velocity.toString()\r\n    );\r\n    */\r\n    return {\r\n      position,\r\n      velocity,\r\n      positions,\r\n      collision: false\r\n    };\r\n  }\r\n}\r\n\r\nexport default ARK;\r\n","import GameTerrainEntity from \"./GameTerrainEntity.mjs\";\r\nimport ARK from \"../../model/utils/ARK.mjs\";\r\n\r\nclass GameTerrain {\r\n  constructor(gameData) {\r\n    this.gameData = gameData;\r\n    this.entities = [];\r\n    this.ark = new ARK(this);\r\n  }\r\n\r\n  getEntities() {\r\n    return this.entities;\r\n  }\r\n\r\n  addEntity(entity) {\r\n    this.entities.push(entity);\r\n  }\r\n\r\n  getGravityVectorForTurn(position, velocity, turn) {\r\n    return this.ark.calculateNewPositionVelocity(position, velocity, turn);\r\n  }\r\n\r\n  getParentEntity(position, time, turn) {\r\n    return this.entities[0];\r\n  }\r\n\r\n  serialize() {\r\n    return this.entities.map(entity => entity.serialize());\r\n  }\r\n\r\n  deserialize(data = []) {\r\n    this.entities = data.map(entry => new GameTerrainEntity(entry));\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default GameTerrain;\r\n","import TorpedoFlight from \"../unit/TorpedoFlight.mjs\";\r\n\r\nclass GameTorpedos {\r\n  constructor() {\r\n    this.flights = [];\r\n  }\r\n\r\n  getTorpedoFlightById(id) {\r\n    return this.flights.find((flight) => flight.id === id);\r\n  }\r\n\r\n  addTorpedoFlights(flights) {\r\n    flights = [].concat(flights);\r\n\r\n    this.flights = [...this.flights, ...flights];\r\n  }\r\n\r\n  getTorpedoFlights() {\r\n    return [...this.flights];\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      flights: this.flights.map((flight) => flight.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = { flights: [] }) {\r\n    this.flights = data.flights.map((flight) =>\r\n      new TorpedoFlight().deserialize(flight)\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  advanceTurn() {\r\n    this.flights = this.flights.filter((flight) => !flight.isDone());\r\n  }\r\n}\r\n\r\nexport default GameTorpedos;\r\n","import WeaponHitChance from \"../weapon/WeaponHitChance.mjs\";\r\n\r\nclass CombatLogTorpedoIntercept {\r\n  constructor(torpedoFlightId, shipId, weaponId, interceptChange, roll) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n    this.shipId = shipId;\r\n    this.weaponId = weaponId;\r\n    this.interceptChange = interceptChange;\r\n    this.roll = roll;\r\n  }\r\n\r\n  isSucessfull() {\r\n    return this.roll <= this.interceptChange.result;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId,\r\n      weaponId: this.weaponId,\r\n      roll: this.roll,\r\n      shipId: this.shipId,\r\n      interceptChange: this.interceptChange.serialize()\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    this.weaponId = data.weaponId;\r\n    this.roll = data.roll;\r\n    this.shipId = data.shipId;\r\n    this.interceptChange = new WeaponHitChance().deserialize(\r\n      data.interceptChange\r\n    );\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoIntercept;\r\n","import Vector from \"../utils/Vector.mjs\";\r\n\r\nclass CombatLogTorpedoMove {\r\n  constructor(torpedoFlightId, startPosition, endPosition, velocity) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n    this.startPosition = startPosition;\r\n    this.endPosition = endPosition;\r\n    this.velocity = velocity;\r\n\r\n    this.replayOrder = 30;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId,\r\n      startPosition: this.startPosition,\r\n      endPosition: this.endPosition,\r\n      velocity: this.velocity,\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    this.startPosition = new Vector(data.startPosition);\r\n    this.endPosition = new Vector(data.endPosition);\r\n    this.velocity = new Vector(data.velocity);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoMove;\r\n","class CombatLogTorpedoOutOfTime {\r\n  constructor(torpedoFlightId) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoOutOfTime;\r\n","class CombatLogShipVelocity {\r\n  constructor(shipId) {\r\n    this.shipId = shipId;\r\n    this.replayOrder = 10;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      shipId: this.shipId\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.shipId = data.shipId;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogShipVelocity;\r\n","class CombatLogTorpedoNotArmed {\r\n  constructor(torpedoFlightId, turnsActive, armingTime) {\r\n    this.torpedoFlightId = torpedoFlightId;\r\n    this.turnsActive = turnsActive;\r\n    this.armingTime = armingTime;\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      logEntryClass: this.constructor.name,\r\n      torpedoFlightId: this.torpedoFlightId,\r\n      turnsActive: this.turnsActive,\r\n      armingTime: this.armingTime\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.torpedoFlightId = data.torpedoFlightId;\r\n    this.turnsActive = data.turnsActive;\r\n    this.armingTime = data.armingTime;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default CombatLogTorpedoNotArmed;\r\n","import CombatLogTorpedoAttack from \"./CombatLogTorpedoAttack.mjs\";\r\nimport CombatLogDamageEntry from \"./CombatLogDamageEntry.mjs\";\r\nimport CombatLogTorpedoLaunch from \"./CombatLogTorpedoLaunch.mjs\";\r\nimport CombatLogTorpedoIntercept from \"./CombatLogTorpedoIntercept.mjs\";\r\nimport CombatLogTorpedoMove from \"./CombatLogTorpedoMove.mjs\";\r\nimport CombatLogTorpedoOutOfTime from \"./CombatLogTorpedoOutOfTime.mjs\";\r\nimport CombatLogWeaponOutOfArc from \"./CombatLogWeaponOutOfArc.mjs\";\r\nimport CombatLogWeaponFire from \"./CombatLogWeaponFire.mjs\";\r\nimport CombatLogShipMovement from \"./CombatLogShipMovement.mjs\";\r\nimport CombatLogShipVelocity from \"./CombatLogShipVelocity.mjs\";\r\nimport CombatLogTorpedoNotArmed from \"./CombatLogTorpedoNotArmed.mjs\";\r\nimport CombatLogGroupedWeaponFire from \"./CombatLogGroupedWeaponFire.mjs\";\r\nimport CombatLogGroupedTorpedoAttack from \"./CombatLogGroupedTorpedoAttack.mjs\";\r\n\r\nexport const combatLogClasses = {\r\n  CombatLogTorpedoAttack,\r\n  CombatLogDamageEntry,\r\n  CombatLogTorpedoLaunch,\r\n  CombatLogTorpedoIntercept,\r\n  CombatLogTorpedoMove,\r\n  CombatLogTorpedoOutOfTime,\r\n  CombatLogWeaponOutOfArc,\r\n  CombatLogWeaponFire,\r\n  CombatLogShipMovement,\r\n  CombatLogShipVelocity,\r\n  CombatLogTorpedoNotArmed,\r\n  CombatLogGroupedWeaponFire,\r\n  CombatLogGroupedWeaponFire\r\n};\r\n","import { combatLogClasses } from \"./combatLogClasses.mjs\";\r\nimport CombatLogWeaponFire from \"./CombatLogWeaponFire.mjs\";\r\nimport CombatLogGroupedWeaponFire from \"./CombatLogGroupedWeaponFire.mjs\";\r\nimport CombatLogTorpedoAttack from \"./CombatLogTorpedoAttack.mjs\";\r\nimport CombatLogGroupedTorpedoAttack from \"./CombatLogGroupedTorpedoAttack.mjs\";\r\nimport CombatLogTorpedoIntercept from \"./CombatLogTorpedoIntercept.mjs\";\r\n\r\nclass CombatLogData {\r\n  constructor() {\r\n    this.entries = [];\r\n  }\r\n\r\n  addEntry(entry) {\r\n    this.entries.push(entry);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      entries: this.entries.map((entry) => entry.serialize()),\r\n    };\r\n  }\r\n\r\n  deserialize(data = {}) {\r\n    this.entries = data.entries\r\n      ? data.entries.map((entry) =>\r\n          new combatLogClasses[entry.logEntryClass]().deserialize(entry)\r\n        )\r\n      : [];\r\n\r\n    return this;\r\n  }\r\n\r\n  advanceTurn() {\r\n    this.entries = [];\r\n  }\r\n\r\n  getInterceptsFor(torpedoAttack) {\r\n    return this.entries\r\n      .filter((entry) => entry instanceof CombatLogTorpedoIntercept)\r\n      .filter(\r\n        (entry) => entry.torpedoFlightId === torpedoAttack.torpedoFlightId\r\n      );\r\n  }\r\n\r\n  getForReplay() {\r\n    const entries = [...this.entries];\r\n    const groupedFires = [];\r\n\r\n    entries\r\n      .filter((entry) => entry instanceof CombatLogWeaponFire)\r\n      .forEach((fire) => {\r\n        let entry = groupedFires.find(\r\n          (grouped) => grouped.targetId === fire.targetId\r\n        );\r\n\r\n        if (!entry) {\r\n          entry = new CombatLogGroupedWeaponFire(fire.targetId);\r\n          groupedFires.push(entry);\r\n        }\r\n\r\n        entry.addEntry(fire);\r\n      });\r\n\r\n    const groupedTorpedos = [];\r\n\r\n    entries\r\n      .filter((entry) => entry instanceof CombatLogTorpedoAttack)\r\n      .forEach((torpedo) => {\r\n        let entry = groupedTorpedos.find(\r\n          (grouped) => grouped.targetId === torpedo.targetId\r\n        );\r\n\r\n        if (!entry) {\r\n          entry = new CombatLogGroupedTorpedoAttack(torpedo.targetId);\r\n          groupedTorpedos.push(entry);\r\n        }\r\n\r\n        entry.addEntry(torpedo);\r\n      });\r\n\r\n    return [\r\n      ...this.entries.filter(\r\n        (entry) => !(entry instanceof CombatLogWeaponFire)\r\n      ),\r\n      ...groupedFires,\r\n      ...groupedTorpedos,\r\n    ]\r\n      .filter((entry) => entry.replayOrder)\r\n      .sort((a, b) => {\r\n        if (a.replayOrder > b.replayOrder) {\r\n          return 1;\r\n        }\r\n\r\n        if (a.replayOrder < b.replayOrder) {\r\n          return -1;\r\n        }\r\n\r\n        return 0;\r\n      });\r\n  }\r\n}\r\n\r\nexport default CombatLogData;\r\n","import GameSlots from \"./GameSlots.mjs\";\nimport GameShips from \"./GameShips.mjs\";\nimport GameActiveShips from \"./GameActiveShips.mjs\";\nimport GameTerrain from \"./GameTerrain.mjs\";\nimport User from \"../User.mjs\";\nimport * as gameStatuses from \"./gameStatuses.mjs\";\nimport * as gamePhases from \"./gamePhases.mjs\";\nimport GameTorpedos from \"./GameTorpedos.mjs\";\nimport CombatLogData from \"../combatLog/CombatLogData.mjs\";\n\nclass GameData {\n  constructor(data) {\n    this.deserialize(data);\n  }\n\n  setStatus(status) {\n    this.status = status;\n  }\n\n  setPhase(phase) {\n    this.phase = phase;\n  }\n\n  advanceTurn() {\n    this.turn++;\n  }\n\n  addPlayer(user) {\n    if (this.players.find((player) => player.id === user.id)) {\n      return;\n    }\n\n    this.players.push(user);\n  }\n\n  removePlayer(user) {\n    this.players = this.players.filter((player) => player.id !== user.id);\n  }\n\n  isPlayerInGame(user) {\n    return this.players.find((player) => player.id === user.id);\n  }\n\n  isPlayerActive(user) {\n    return this.activePlayerIds.includes(user.id);\n  }\n\n  setPlayerActive(user, requireShips = false) {\n    if (this.isPlayerActive(user)) {\n      return;\n    }\n\n    if (requireShips && this.ships.getUsersShips(user).length === 0) {\n      return;\n    }\n\n    this.activePlayerIds.push(user.id);\n  }\n\n  setPlayerInactive(user) {\n    this.activePlayerIds = this.activePlayerIds.filter((id) => id !== user.id);\n  }\n\n  validateForGameCreate(user) {\n    if (!this.name) {\n      return \"Game needs a name\";\n    }\n\n    const slots = this.slots.getSlots();\n\n    if (slots.length < 2) {\n      return \"Game has to have atleast two slots\";\n    }\n\n    const teams = {};\n    slots.forEach((slot) => (teams[slot.team] = true));\n\n    if (Object.keys(teams).length < 2) {\n      return \"Game has to have atleast two teams\";\n    }\n\n    let error = undefined;\n\n    slots.forEach((slot) => {\n      const slotError = slot.validate();\n      if (slotError) {\n        error = slotError;\n      }\n    });\n\n    if (error) {\n      return error;\n    }\n\n    if (!slots.some((slot) => slot.userId === user.id)) {\n      return \"Game creator has to occupy atleast one slot\";\n    }\n\n    if (slots.some((slot) => slot.userId && slot.userId !== user.id)) {\n      return \"Other players can not occupy slots at this stage\";\n    }\n  }\n\n  getActiveShips() {\n    return this.ships\n      .getShips()\n      .filter((ship) => this.activeShips.isActive(ship));\n  }\n\n  getActiveShipsForUser(user) {\n    return this.ships\n      .getShips()\n      .filter(\n        (ship) => this.activeShips.isActive(ship) && ship.player.isUsers(user)\n      );\n  }\n\n  isActiveShip(ship) {\n    return this.activeShips.isActive(ship);\n  }\n\n  setActiveShip(ship) {\n    this.activeShips.setActive(ship);\n  }\n\n  setInactiveShip(ship) {\n    this.activeShips.setInactive(ship);\n  }\n\n  getShipsForUser(user) {\n    return this.ships.getShips().filter((ship) => ship.player.isUsers(user));\n  }\n\n  serialize() {\n    return {\n      id: this.id,\n      phase: this.phase,\n      name: this.name,\n      turn: this.turn,\n      data: {\n        activePlayerIds: this.activePlayerIds,\n        ...this.slots.serialize(),\n        terrain: this.terrain.serialize(),\n        combatLog: this.combatLog.serialize(),\n        torpedos: this.torpedos.serialize(),\n      },\n      ships: this.ships.serialize(),\n      activeShips: this.activeShips.serialize(),\n      creatorId: this.creatorId,\n      status: this.status,\n      players: this.players.map((player) => player.serialize()),\n    };\n  }\n\n  deserialize(data = {}) {\n    const gameData = data.data || {};\n    this.id = data.id || null;\n    this.name = data.name;\n    this.phase = data.phase || gamePhases.DEPLOYMENT;\n    this.turn = data.turn || 1;\n    this.players = data.players\n      ? data.players.map((player) => new User().deserialize(player))\n      : [];\n    this.activePlayerIds = gameData.activePlayerIds || [];\n    this.slots = new GameSlots(this).deserialize(gameData);\n    this.ships = new GameShips(this).deserialize(data.ships);\n    this.activeShips = new GameActiveShips(this).deserialize(data.activeShips);\n    this.creatorId = data.creatorId;\n    this.status = data.status || gameStatuses.LOBBY;\n\n    this.torpedos = new GameTorpedos().deserialize(gameData.torpedos);\n    this.terrain = new GameTerrain(this).deserialize(gameData.terrain);\n    this.combatLog = new CombatLogData().deserialize(gameData.combatLog);\n\n    return this;\n  }\n\n  clone() {\n    return new GameData(this.serialize());\n  }\n\n  censorForUser(user) {\n    this.ships.getShips().forEach((ship) => {\n      ship.movement.removeMovementForOtherTurns(this.turn);\n      const mine = user && ship.player.is(user);\n      ship.censorForUser(user, mine);\n    });\n\n    return this;\n  }\n\n  endTurn() {\n    this.ships.getShips().forEach((ship) => {\n      ship.endTurn(this.turn);\n    });\n  }\n\n  advanceTurn() {\n    this.turn++;\n    this.players.forEach((player) => this.setPlayerActive(player, true));\n    this.combatLog.advanceTurn();\n    this.torpedos.advanceTurn();\n\n    this.ships\n      .getShips()\n      .filter((ship) => !ship.isDestroyed())\n      .forEach((ship) => {\n        ship.advanceTurn(this.turn);\n        this.setActiveShip(ship);\n      });\n  }\n}\n\nexport default GameData;\n","import { loadObject, cloneObject } from \"../../utils/objectLoader\";\r\nimport LineSprite from \"../sprite/LineSprite\";\r\nimport Vector from \"../../../../../model/utils/Vector.mjs\";\r\nimport Line from \"../Line\";\r\nimport * as THREE from \"three\";\r\nimport StarParticleEmitter from \"../../animation/particle/StarParticleEmitter\";\r\nimport { ParticleEmitter } from \"../../animation/particle\";\r\nimport {\r\n  TEXTURE_GLOW,\r\n  TEXTURE_STARLINE,\r\n  TEXTURE_GAS,\r\n} from \"../../animation/particle/BaseParticle\";\r\nimport { getSeededRandomGenerator } from \"../../../../../model/utils/math.mjs\";\r\nimport { degreeToRadian } from \"../../../../../model/utils/math.mjs\";\r\n\r\nconst torpedoMesh = loadObject(\"/img/3d/torpedo/scene.gltf\");\r\n\r\nclass TorpedoObject {\r\n  constructor(torpedoFlight, scene) {\r\n    this.torpedoFlight = torpedoFlight;\r\n    this.scene = scene;\r\n    this.torpedo = null;\r\n\r\n    this.object = new THREE.Object3D();\r\n    this.particleEmitter = new ParticleEmitter(this.object, 10);\r\n    this.create();\r\n    this.lastAnimationTime = null;\r\n    this.totalAnimationTime = 0;\r\n\r\n    this.hidden = true;\r\n  }\r\n\r\n  hide() {\r\n    if (this.hidden) {\r\n      return;\r\n    }\r\n\r\n    this.scene.remove(this.object);\r\n    this.hidden = true;\r\n  }\r\n\r\n  show() {\r\n    if (!this.hidden) {\r\n      return;\r\n    }\r\n\r\n    this.scene.add(this.object);\r\n    this.hidden = false;\r\n  }\r\n\r\n  setFacing(facing) {\r\n    this.object.quaternion.setFromAxisAngle(\r\n      new THREE.Vector3(0, 0, 1),\r\n      degreeToRadian(facing)\r\n    );\r\n  }\r\n\r\n  setPosition(position) {\r\n    this.object.position.set(position.x, position.y, position.z);\r\n    return this;\r\n  }\r\n\r\n  getEnginePosition() {\r\n    const slot = this.torpedo.children.find((child) => {\r\n      if (!child.name) {\r\n        return false;\r\n      }\r\n\r\n      if (child.name === \"thrustEffect\") {\r\n        return true;\r\n      }\r\n    });\r\n\r\n    if (!slot) {\r\n      return new Vector();\r\n    }\r\n\r\n    return new Vector(slot.position);\r\n  }\r\n\r\n  async create() {\r\n    const scene = await torpedoMesh;\r\n\r\n    const torpedo = scene.scene.children[0].clone();\r\n\r\n    this.torpedo = torpedo;\r\n\r\n    const visuals = this.torpedoFlight.torpedo.visuals;\r\n    const color = new THREE.Color(\r\n      visuals.engineColor[0],\r\n      visuals.engineColor[1],\r\n      visuals.engineColor[2]\r\n    );\r\n\r\n    //this.torpedo.position.x = 100;\r\n    //this.torpedo.position.z = 50;\r\n\r\n    /*\r\n    this.line = new Line(this.object, {\r\n      start: new Vector(0, 0, 0),\r\n      end: new Vector(0, 0, -30),\r\n      width: 0.5,\r\n      color: new THREE.Color(1, 1, 1),\r\n      opacity: 0.2\r\n      //type: \"cylinder\"\r\n    });\r\n    */\r\n\r\n    const enginePosition = this.getEnginePosition();\r\n\r\n    this.particleEmitter.mesh.position.set(\r\n      enginePosition.x,\r\n      enginePosition.y,\r\n      enginePosition.z\r\n    );\r\n    const getRandom = getSeededRandomGenerator(this.torpedoFlight.id);\r\n\r\n    const size = 10;\r\n    const sineFrequency = getRandom() * 50 + 200;\r\n\r\n    this.particleEmitter\r\n      .getParticle()\r\n      .setSize(size)\r\n      .setOpacity(0.5)\r\n      .setFadeIn(0, 0)\r\n      .setFadeOut(0, 0)\r\n      .setColor(color)\r\n      //.setVelocity(this.movement)\r\n      .setPosition({\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n      })\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(0);\r\n    //.setSine(100, 0.99);\r\n\r\n    this.particleEmitter\r\n      .getParticle()\r\n      .setSize(size)\r\n      .setOpacity(0.1)\r\n      .setFadeIn(0, 0)\r\n      .setFadeOut(0, 0)\r\n      .setColor(color)\r\n      //.setVelocity(this.movement)\r\n      .setPosition({\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n      })\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(0)\r\n      .setSine(sineFrequency, 0.99);\r\n\r\n    this.particleEmitter\r\n      .getParticle()\r\n      .setSize(size * 0.3)\r\n      .setOpacity(0.8)\r\n      .setFadeIn(0, 0)\r\n      .setFadeOut(0, 0)\r\n      .setColor(new THREE.Color(1, 1, 1))\r\n      //.setVelocity(this.movement)\r\n      .setPosition({\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n      })\r\n      .setTexture(TEXTURE_GLOW)\r\n      .setActivationTime(0);\r\n\r\n    let angle = 90;\r\n    let shines = 2;\r\n    let angleChange = 0; // getRandom() * 0.05 - 0.025;\r\n\r\n    while (shines--) {\r\n      angle += 90;\r\n\r\n      /*\r\n      this.particleEmitter\r\n        .getParticle()\r\n        .setActivationTime(0)\r\n        .setFadeIn(0, 0)\r\n        .setFadeOut(0, 0)\r\n        .setSize(getRandom() * 10 + size * 5)\r\n        .setOpacity(getRandom() * 0.05 + 0.2)\r\n        .setPosition({\r\n          x: 0,\r\n          y: 0,\r\n          z: 0\r\n        })\r\n        .setColor(new THREE.Color(51 / 255, 163 / 255, 255 / 255))\r\n        //.setSine(getRandom() * 200 + 100, 0.1)\r\n        .setAngle(angle, angleChange)\r\n        .setTexture(TEXTURE_STARLINE);\r\n      //.setSine(100, 0.5);\r\n      */\r\n\r\n      this.particleEmitter\r\n        .getParticle()\r\n        .setActivationTime(0)\r\n        .setFadeIn(0, 0)\r\n        .setFadeOut(0, 0)\r\n        .setSize(getRandom() * 10 + size * 3)\r\n        .setOpacity(0.1)\r\n        .setPosition({\r\n          x: 0,\r\n          y: 0,\r\n          z: 0,\r\n        })\r\n        .setColor(color)\r\n        //.setSine(getRandom() * 200 + 100, 0.1)\r\n        .setAngle(angle, angleChange)\r\n        .setTexture(TEXTURE_STARLINE)\r\n        .setSine(sineFrequency, 0.99);\r\n    }\r\n\r\n    this.object.add(torpedo);\r\n  }\r\n\r\n  render({ zoom }) {\r\n    if (this.lastAnimationTime === null) {\r\n      this.lastAnimationTime = Date.now();\r\n    }\r\n\r\n    var deltaTime = Date.now() - this.lastAnimationTime;\r\n\r\n    this.totalAnimationTime += deltaTime;\r\n\r\n    this.particleEmitter.render({\r\n      delta: 0,\r\n      total: this.totalAnimationTime,\r\n      last: 0,\r\n      zoom: zoom,\r\n    });\r\n\r\n    this.lastAnimationTime = Date.now();\r\n  }\r\n\r\n  destroy() {\r\n    this.scene.remove(this.object);\r\n  }\r\n\r\n  update(torpedoFlight) {\r\n    this.torpedoFlight = torpedoFlight;\r\n  }\r\n}\r\n\r\nexport default TorpedoObject;\r\n","import TorpedoObject from \"../ships/TorpedoObject\";\r\n\r\nclass TorpedoIconContainer {\r\n  constructor(scene) {\r\n    this.scene = scene;\r\n\r\n    this.icons = [];\r\n  }\r\n\r\n  getArray() {\r\n    return this.icons;\r\n  }\r\n\r\n  hasIcon(id) {\r\n    return Boolean(this.getIconById(id));\r\n  }\r\n\r\n  getIconByTorpedoFlight(flight) {\r\n    let icon = this.getIconById(flight.id);\r\n    if (!icon) {\r\n      icon = new TorpedoObject(flight, this.scene);\r\n      this.icons.push(icon);\r\n    }\r\n\r\n    return icon;\r\n  }\r\n\r\n  getIconById(id) {\r\n    return this.icons.find(icon => icon.torpedoFlight.id === id);\r\n  }\r\n\r\n  render(renderPayload) {\r\n    this.icons.forEach(icon => icon.render(renderPayload));\r\n  }\r\n}\r\n\r\nexport default TorpedoIconContainer;\r\n","import MovementService from \"../../../../model/movement/MovementService\";\nimport WeaponFireService from \"../../../../model/weapon/WeaponFireService\";\nimport PhaseState from \"./PhaseState\";\nimport ShipIconContainer from \"../renderer/icon/ShipIconContainer\";\nimport ElectronicWarfareIndicatorService from \"../renderer/electronicWarfare/ElectronicWarfareIndicatorService\";\nimport TerrainRenderer from \"../renderer/TerrainRenderer\";\nimport ShipWindowManager from \"../ui/shipWindow/ShipWindowManager\";\nimport MovementPathService from \"../movement/MovementPathService\";\nimport * as gameStatus from \"../../../../model/game/gameStatuses\";\nimport * as gamePhase from \"../../../../model/game/gamePhases\";\n\nimport LobbyPhaseStrategy from \"./phaseStrategy/LobbyPhaseStrategy\";\nimport DeploymentPhaseStrategy from \"./phaseStrategy/DeploymentPhaseStrategy\";\nimport ReplayPhaseStrategy from \"./phaseStrategy/ReplayPhaseStrategy\";\nimport WaitingPhaseStrategy from \"./phaseStrategy/WaitingPhaseStrategy\";\nimport GamePhaseStrategy from \"./phaseStrategy/GamePhaseStrategy\";\nimport AutomaticReplayPhaseStrategy from \"./phaseStrategy/AutomaticReplayPhaseStrategy/index.js\";\nimport GameDataCache from \"./GameDataCache\";\nimport GameData from \"../../../../model/game/GameData.mjs\";\nimport TorpedoIconContainer from \"../renderer/icon/TorpedoIconContainer\";\nimport TorpedoAttackService from \"../../../../model/weapon/TorpedoAttackService.mjs\";\n\nclass PhaseDirector {\n  constructor(uiState, currentUser, coordinateConverter, gameConnector) {\n    this.uiState = uiState;\n    this.currentUser = currentUser;\n    this.shipIconContainer = null;\n    this.torpedoIconContainer = null;\n    this.electronicWarfareIndicatorService = null;\n    this.timeline = [];\n\n    this.phaseStrategy = null;\n    this.coordinateConverter = coordinateConverter;\n    this.shipWindowManager = null;\n    this.movementService = new MovementService();\n    this.weaponFireService = new WeaponFireService();\n    this.torpedoAttackService = new TorpedoAttackService();\n    this.movementPathService = null;\n    this.terrainRenderer = null;\n    this.phaseState = new PhaseState();\n    this.gameConnector = gameConnector;\n    this.gameConnector.init(this);\n    this.scene = null;\n    this.emitterContainer = null;\n    this.camera = null;\n\n    this.gameDataCache = new GameDataCache();\n  }\n\n  init(scene, emitterContainer, camera) {\n    this.scene = scene;\n    this.emitterContainer = emitterContainer;\n    this.camera = camera;\n\n    this.shipIconContainer = new ShipIconContainer(scene, this.currentUser);\n    this.torpedoIconContainer = new TorpedoIconContainer(scene);\n    this.electronicWarfareIndicatorService = new ElectronicWarfareIndicatorService(\n      scene,\n      this.shipIconContainer,\n      this.currentUser\n    );\n    this.shipWindowManager = new ShipWindowManager(\n      this.uiState,\n      this.movementService\n    );\n\n    this.movementPathService = new MovementPathService(\n      scene,\n      this.shipIconContainer,\n      this.currentUser\n    );\n    this.terrainRenderer = new TerrainRenderer(scene);\n\n    this.uiState.setPhaseDirector(this);\n  }\n\n  closeReplay() {\n    this.phaseStrategy.deactivate();\n    this.phaseStrategy = null;\n\n    this.resolvePhaseStrategy();\n  }\n\n  startReplay() {\n    const gameDatas = this.gameDataCache.getGameDatasForAutomaticReplay();\n\n    if (!gameDatas) {\n      return;\n    }\n\n    this.activatePhaseStrategy(AutomaticReplayPhaseStrategy);\n    this.relayEvent(\"newTurn\", gameDatas);\n  }\n\n  receiveGameData(gameData) {\n    window.gameData = this.gameDataCache;\n    this.gameDataCache.setCurrent(gameData);\n    this.resolvePhaseStrategy();\n  }\n\n  receiveReplay(gameDatas) {\n    this.receiveTurnChange(gameDatas);\n  }\n\n  receiveTurnChange(gameDatas) {\n    this.gameDataCache.setCurrent(gameDatas[gameDatas.length - 1]);\n    const replays = [...gameDatas];\n    replays.splice(-1, 1);\n    this.gameDataCache.setReplays(replays);\n\n    if (!this.phaseStrategy || this.phaseStrategy.canDisturb()) {\n      this.activatePhaseStrategy(AutomaticReplayPhaseStrategy);\n    }\n\n    if (this.phaseStrategy) {\n      this.relayEvent(\"newTurn\", gameDatas);\n    }\n  }\n\n  relayEvent(name, payload) {\n    if (!this.phaseStrategy || this.phaseStrategy.inactive) {\n      return;\n    }\n\n    this.phaseStrategy.onEvent(name, payload);\n    this.shipIconContainer.onEvent(name, payload);\n  }\n\n  commitTurn() {\n    this.phaseStrategy.commitTurn(this.gameConnector);\n    return this.activatePhaseStrategy(WaitingPhaseStrategy);\n  }\n\n  render(scene, coordinateConverter, zoom) {\n    if (!this.phaseStrategy || this.phaseStrategy.inactive) {\n      return;\n    }\n\n    this.phaseStrategy.render(coordinateConverter, scene, zoom);\n    this.electronicWarfareIndicatorService.render(zoom);\n    this.uiState.render();\n  }\n\n  resolvePhaseStrategy() {\n    const gameData = this.gameDataCache.getCurrent();\n\n    if (this.phaseStrategy && !this.phaseStrategy.canDisturb()) {\n      return;\n    }\n\n    if (gameData.status === gameStatus.LOBBY) {\n      return this.activatePhaseStrategy(LobbyPhaseStrategy, gameData);\n    }\n\n    if (\n      !this.currentUser ||\n      !gameData.isPlayerInGame(this.currentUser) ||\n      this.uiState.isReplay() ||\n      gameData.status === gameStatus.FINISHED\n    ) {\n      return this.activatePhaseStrategy(ReplayPhaseStrategy, gameData);\n    }\n\n    if (!gameData.isPlayerActive(this.currentUser)) {\n      return this.activatePhaseStrategy(WaitingPhaseStrategy, gameData);\n    }\n\n    if (gameData.phase === gamePhase.DEPLOYMENT) {\n      return this.activatePhaseStrategy(DeploymentPhaseStrategy, gameData);\n    }\n\n    if (!gameData.isPlayerActive(this.currentUser)) {\n      return this.activatePhaseStrategy(WaitingPhaseStrategy, gameData);\n    }\n\n    return this.activatePhaseStrategy(GamePhaseStrategy, gameData);\n  }\n\n  activatePhaseStrategy(phaseStrategy) {\n    const gameData = this.gameDataCache.getCurrent();\n\n    this.uiState.update(gameData);\n    this.shipIconContainer.update(gameData);\n    this.movementService.update(gameData, this);\n    this.movementPathService.update(gameData);\n    this.terrainRenderer.update(gameData.terrain);\n    this.weaponFireService.update(gameData);\n    this.torpedoAttackService.update(gameData);\n\n    if (this.phaseStrategy && this.phaseStrategy instanceof phaseStrategy) {\n      this.phaseStrategy.update(gameData);\n      return;\n    }\n\n    if (this.phaseStrategy) {\n      this.phaseStrategy.deactivate();\n    }\n\n    this.phaseStrategy = new phaseStrategy(this.getServices());\n    this.phaseStrategy.activate().update(gameData);\n  }\n\n  getServices() {\n    return {\n      phaseState: this.phaseState,\n      shipIconContainer: this.shipIconContainer,\n      torpedoIconContainer: this.torpedoIconContainer,\n      electronicWarfareIndicatorService: this.electronicWarfareIndicatorService,\n      scene: this.scene,\n      shipWindowManager: this.shipWindowManager,\n      movementService: this.movementService,\n      coordinateConverter: this.coordinateConverter,\n      uiState: this.uiState,\n      currentUser: this.currentUser,\n      gameConnector: this.gameConnector,\n      movementPathService: this.movementPathService,\n      weaponFireService: this.weaponFireService,\n      particleEmitterContainer: this.emitterContainer,\n      gameCamera: this.camera,\n      torpedoAttackService: this.torpedoAttackService,\n    };\n  }\n\n  deactivate() {}\n}\n\nexport default PhaseDirector;\n","class PositionObject {\r\n  constructor(view, game, hex, entity = null) {\r\n    this.view = view;\r\n    this.game = game;\r\n    this.hex = hex;\r\n    this.entity = entity;\r\n  }\r\n}\r\n\r\nexport default PositionObject;\r\n","class GameSettings {\r\n  constructor(settings) {\r\n    this.populate(settings);\r\n  }\r\n\r\n  populate(settings = {}) {\r\n    this.settings = {\r\n      ShowAllEW: settings.ShowAllEW || {\r\n        keyCode: 87,\r\n        shiftKey: false,\r\n        altKey: false,\r\n        ctrlKey: false,\r\n        metaKey: false\r\n      },\r\n      ShowFriendlyEW: settings.ShowFriendlyEW || {\r\n        keyCode: 88,\r\n        shiftKey: false,\r\n        altKey: false,\r\n        ctrlKey: false,\r\n        metaKey: false\r\n      },\r\n      ShowEnemyEW: settings.ShowEnemyEW || {\r\n        keyCode: 89,\r\n        shiftKey: false,\r\n        altKey: false,\r\n        ctrlKey: false,\r\n        metaKey: false\r\n      },\r\n      ZoomLevelToStrategic: 0.2\r\n    };\r\n  }\r\n\r\n  set(key, value) {\r\n    if (this.settings[key] === undefined) {\r\n      throw new Error(\"Unrecognized settings key '\" + key + \"'\");\r\n    }\r\n\r\n    console.log(\"setting key\", key, \"to\", value, typeof value);\r\n    this.settings[key] = value;\r\n  }\r\n\r\n  save() {\r\n    localStorage.setItem(\"settings\", JSON.stringify(this.settings));\r\n  }\r\n\r\n  matchEvent = function(event) {\r\n    return Object.keys(this.settings).find(function(action) {\r\n      var def = this.settings[action];\r\n      if (!def || !def.keyCode) {\r\n        return false;\r\n      }\r\n\r\n      return (\r\n        def.keyCode === event.keyCode &&\r\n        def.shiftKey === event.shiftKey &&\r\n        def.altKey === event.altKey &&\r\n        def.ctrlKey === event.ctrlKey &&\r\n        def.metaKey === event.metaKey\r\n      );\r\n    }, this);\r\n  };\r\n\r\n  load() {\r\n    var settings = localStorage.getItem(\"settings\") || \"{}\";\r\n    this.populate(JSON.parse(settings));\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default GameSettings;\r\n","export const MESSAGE_TAKE_SLOT = \"takeSlot\";\r\nexport const MESSAGE_LEAVE_SLOT = \"leaveSlot\";\r\nexport const MESSAGE_BUY_SHIPS = \"buyShips\";\r\nexport const MESSAGE_COMMIT_TURN = \"commitTurn\";\r\nexport const MESSAGE_COMMIT_DEPLOYMENT = \"commitDeployment\";\r\nexport const MESSAGE_REQUEST_REPLAY = \"requestReplay\";\r\n\r\nexport const MESSAGE_REPLAY = \"replay\";\r\nexport const MESSAGE_GAMEDATA = \"gameData\";\r\nexport const MESSAGE_TURN_CHANGED = \"turnChanged\";\r\n","import { SERVER_WEBSOCKET_URL } from \"../../config\";\nimport GameData from \"../../../model/game/GameData.mjs\";\nimport * as gameMessages from \"../../../model/game/gameMessage\";\n\nclass GameConnector {\n  constructor(gameId) {\n    this.gameId = gameId;\n    this.phaseDirector = null;\n    this.webSocket = null;\n    this.open = false;\n    this.connection = null;\n    this.connectionResolve = null;\n  }\n\n  init(phaseDirector) {\n    this.phaseDirector = phaseDirector;\n  }\n\n  async deactivate() {\n    const connection = await this.connection;\n    connection.close();\n  }\n\n  connect(timeout = 0) {\n    this.connection = new Promise((resolve) => {\n      setTimeout(() => {\n        this.webSocket = new WebSocket(SERVER_WEBSOCKET_URL + this.gameId);\n        this.connectionResolve = resolve;\n        this.webSocket.onerror = this.onError.bind(this);\n        this.webSocket.onmessage = this.onMessage.bind(this);\n        this.webSocket.onclose = this.onClose.bind(this);\n        this.webSocket.onopen = this.onOpen.bind(this);\n      }, timeout);\n    });\n  }\n\n  async commitTurn(gameData) {\n    const connection = await this.connection;\n    connection.send(\n      JSON.stringify({\n        type: gameMessages.MESSAGE_COMMIT_TURN,\n        payload: gameData.serialize(),\n      })\n    );\n  }\n\n  async commitDeployment(gameData) {\n    const connection = await this.connection;\n    connection.send(\n      JSON.stringify({\n        type: gameMessages.MESSAGE_COMMIT_DEPLOYMENT,\n        payload: gameData.serialize(),\n      })\n    );\n  }\n\n  async takeSlot(slotId) {\n    const connection = await this.connection;\n    connection.send(\n      JSON.stringify({\n        type: gameMessages.MESSAGE_TAKE_SLOT,\n        payload: slotId,\n      })\n    );\n  }\n\n  async leaveSlot(slotId) {\n    const connection = await this.connection;\n    connection.send(\n      JSON.stringify({\n        type: gameMessages.MESSAGE_LEAVE_SLOT,\n        payload: slotId,\n      })\n    );\n  }\n\n  async buyShips(slotId, ships) {\n    const connection = await this.connection;\n    connection.send(\n      JSON.stringify({\n        type: gameMessages.MESSAGE_BUY_SHIPS,\n        payload: {\n          slotId,\n          ships: ships.map((ship) => ship.serialize()),\n        },\n      })\n    );\n  }\n\n  async disconnect() {\n    this.open = false;\n    (await this.connection).close();\n  }\n\n  onOpen() {\n    this.open = true;\n    this.connectionResolve(this.webSocket);\n  }\n\n  onError() {\n    console.log(\"error\");\n  }\n\n  onClose() {\n    if (this.open) {\n      this.connect(2000);\n    }\n  }\n\n  onMessage({ data }) {\n    const { type, payload } = JSON.parse(data);\n    console.log(\"message received\", type);\n\n    switch (type) {\n      case gameMessages.MESSAGE_GAMEDATA:\n        this.phaseDirector.receiveGameData(new GameData(payload));\n        break;\n\n      case gameMessages.MESSAGE_TURN_CHANGED:\n        this.phaseDirector.receiveTurnChange(\n          payload.map((entry) => new GameData(entry))\n        );\n        break;\n\n      case gameMessages.MESSAGE_REPLAY:\n        this.phaseDirector.receiveReplay(\n          payload.map((entry) => new GameData(entry))\n        );\n        break;\n      default:\n        throw new Error(`Unrecognized websocket message type: '${type}'`);\n    }\n  }\n}\n\nexport default GameConnector;\n","import * as THREE from \"three\";\r\nimport HexagonMath from \"../../../../../model/utils/HexagonMath\";\r\nimport HexagonTexture from \"./HexagonTexture\";\r\n\r\nconst HEX_COUNT_WIDTH = 9999;\r\nconst HEX_COUNT_HEIGHT = 9999;\r\nconst HEX_LINE_COLOR = \"rgba(255,255,255,255)\";\r\nconst HEX_FILL_COLOR = \"rgba(0,0,0,0)\";\r\nconst HEX_LINE_WIDTH = 20;\r\nconst HEX_CANVAS_SIZE = 1024;\r\nconst HEX_OPACITY = 0.05;\r\n//const HEX_MAX_OPACITY = 0.3;\r\n\r\nconst getGeometryWidth = () => HexagonMath.getGridWidth(HEX_COUNT_WIDTH);\r\n\r\nconst getGeometryHeight = () => HexagonMath.getGridHeight(HEX_COUNT_HEIGHT);\r\n\r\nclass HexGridRenderer {\r\n  constructor() {\r\n    this.material = null;\r\n    this.mesh = null;\r\n    this.minZoom = 0;\r\n    this.maxZoom = 0;\r\n    this.hexSize = 128;\r\n  }\r\n\r\n  renderHexGrid(scene, minZoom, maxZoom) {\r\n    this.minZoom = minZoom;\r\n    this.maxZoom = maxZoom;\r\n\r\n    const width = getGeometryWidth();\r\n    const height = getGeometryHeight();\r\n\r\n    const texture = HexagonTexture.getHexGridTexture(\r\n      HEX_CANVAS_SIZE,\r\n      HEX_COUNT_WIDTH,\r\n      HEX_COUNT_HEIGHT,\r\n      HEX_LINE_COLOR,\r\n      HEX_FILL_COLOR,\r\n      HEX_LINE_WIDTH\r\n    );\r\n\r\n    const geometry = new THREE.PlaneGeometry(width, height, 1, 1);\r\n    this.material = new THREE.MeshBasicMaterial({\r\n      map: texture,\r\n      transparent: true,\r\n      opacity: HEX_OPACITY,\r\n      depthWrite: false,\r\n    });\r\n    this.mesh = new THREE.Mesh(geometry, this.material);\r\n    this.mesh.position.x += HexagonMath.getHexB() / 2;\r\n    this.mesh.name = \"hexgrid\";\r\n\r\n    scene.add(this.mesh);\r\n  }\r\n\r\n  onZoom = function (zoom) {\r\n    if (zoom > 1) {\r\n      //this.material.opacity = (HEX_MAX_OPACITY - HEX_OPACITY) * ((zoom - 1) / (this.maxZoom - 1)) + HEX_OPACITY;\r\n    } else {\r\n      //this.material.opacity = zoom * HEX_OPACITY;\r\n    }\r\n  };\r\n}\r\n\r\nexport default HexGridRenderer;\r\n","import * as THREE from \"three\";\nimport {\n  ParticleEmitterContainer,\n  StarParticleEmitter\n} from \"../animation/particle\";\n\nimport { getSeededRandomGenerator } from \"../../../../model/utils/math\";\n\nclass StarField {\n  constructor(scene, gameId) {\n    this.starCount = 5000;\n    this.emitterContainer = new ParticleEmitterContainer(scene, this.starCount);\n    this.scene = scene;\n    this.lastAnimationTime = null;\n    this.totalAnimationTime = 0;\n    this.zoomChanged = 0;\n    this.gameId = gameId;\n\n    this.getRandom = null;\n\n    this.create();\n  }\n\n  async create() {\n    await this.emitterContainer.ready();\n    //this.scene.background = new THREE.Color(10 / 255, 10 / 255, 30 / 255);\n\n    //this.webglScene.scene.background = new THREE.Color(10/255, 10/255, 30/255);\n    var width = 3000; //this.webglScene.width * 1.5;\n    var height = 2000; // this.webglScene.height * 1.5;\n\n    this.getRandom = getSeededRandomGenerator(this.gameId);\n\n    //var stars = Math.floor(this.starCount * (width / 4000));\n    var stars = this.starCount;\n    while (stars--) {\n      this.createStar(width, height);\n\n      if (this.getRandom() > 0.98) {\n        this.createShiningStar(width, height);\n      }\n    }\n\n    //var gas = Math.floor(this.getRandom() * 5) + 8;\n\n    /*\n        while(gas--){\n            this.createGasCloud(width, height)\n        }\n        */\n\n    this.lastAnimationTime = new Date().getTime();\n    this.totalAnimationTime = 0;\n    this.zoomChanged = 1;\n    return this;\n  }\n\n  resize() {}\n\n  cleanUp() {\n    this.emitterContainer.release(this);\n  }\n\n  render() {\n    if (!this.emitterContainer.isReady()) {\n      return;\n    }\n\n    var deltaTime = new Date().getTime() - this.lastAnimationTime;\n    this.totalAnimationTime += deltaTime;\n    this.emitterContainer.render({\n      delta: 0,\n      total: this.totalAnimationTime,\n      last: 0,\n      zoom: this.zoomChanged\n    });\n\n    if (this.zoomChanged === 1) {\n      this.zoomChanged = 0;\n    }\n\n    this.lastAnimationTime = new Date().getTime();\n  }\n\n  createStar(width, height) {\n    var particle = this.emitterContainer.getStarParticle(this);\n\n    var x = (this.getRandom() - 0.5) * width * 1.5;\n    var y = (this.getRandom() - 0.5) * height * 1.5;\n\n    particle\n      .setActivationTime(0)\n      .setSize(2 + this.getRandom() * 2)\n      .setOpacity(this.getRandom() * 0.2 + 0.9)\n      .setPosition({ x: x, y: y })\n      .setColor(new THREE.Color(1, 1, 1))\n      .setParallaxFactor(0.1 + this.getRandom() * 0.1);\n\n    if (this.getRandom() > 0.9) {\n      particle\n        .setSineFrequency(this.getRandom() * 200 + 50)\n        .setSineAmplitude(this.getRandom());\n    }\n  }\n\n  createShiningStar(width, height) {\n    var particle = this.emitterContainer.getStarParticle(this);\n\n    var x = (this.getRandom() - 0.5) * width * 1.5;\n    var y = (this.getRandom() - 0.5) * height * 1.5;\n\n    var size = 6 + this.getRandom() * 6;\n    var parallaxFactor = 0.1 + this.getRandom() * 0.1;\n    var color = new THREE.Color(\n      this.getRandom() * 0.4 + 0.6,\n      this.getRandom() * 0.2 + 0.8,\n      this.getRandom() * 0.4 + 0.6\n    );\n\n    particle\n      .setActivationTime(0)\n      .setSize(size * 0.5)\n      .setOpacity(this.getRandom() * 0.2 + 0.9)\n      .setPosition({ x: x, y: y })\n      .setColor(new THREE.Color(1, 1, 1))\n      .setParallaxFactor(parallaxFactor);\n\n    particle = this.emitterContainer.getStarParticle(this);\n    particle\n      .setActivationTime(0)\n      .setSize(size)\n      .setOpacity(this.getRandom() * 0.1 + 0.1)\n      .setPosition({ x: x, y: y })\n      .setColor(color)\n      .setParallaxFactor(parallaxFactor)\n      .setSineFrequency(this.getRandom() * 200 + 100)\n      .setSineAmplitude(this.getRandom() * 0.4);\n\n    var shines = Math.round(this.getRandom() * 8) - 3;\n\n    if (shines <= 2) {\n      return;\n    }\n\n    var angle = this.getRandom() * 360;\n    var angleChange = (this.getRandom() - 0.5) * 0.01;\n\n    while (shines--) {\n      angle += this.getRandom() * 60 + 40;\n      particle = this.emitterContainer.getStarParticle(this);\n      particle\n        .setActivationTime(0)\n        .setSize(size * this.getRandom() * 10 + 10)\n        .setOpacity(this.getRandom() * 0.1 + 0.1)\n        .setPosition({ x: x, y: y })\n        .setColor(color)\n        .setParallaxFactor(parallaxFactor)\n        .setSineFrequency(this.getRandom() * 200 + 100)\n        .setSineAmplitude(0.1)\n        .setAngle(angle)\n        .setAngleChange(angleChange)\n        .setTexture(particle.texture.starLine);\n    }\n  }\n\n  createGasCloud(width, height) {\n    var position = {\n      x: (this.getRandom() - 0.5) * width,\n      y: (this.getRandom() - 0.5) * height\n    };\n\n    var vector = {\n      x: (this.getRandomBand(0.5, 1) * width) / 100,\n      y: (this.getRandomBand(0.5, 1) * width) / 100\n    };\n\n    var iterations = Math.floor(this.getRandom() * 3) + 5;\n\n    while (iterations--) {\n      this.createGasCloudPart({ x: position.x, y: position.y }, width);\n      position.x += this.getRandomBand(0, 1) * 50 + vector.x;\n      position.y += this.getRandomBand(0, 1) * 50 + vector.y;\n    }\n  }\n\n  getRandomBand(min, max) {\n    var random = this.getRandom() * (max - min) + min;\n    return this.getRandom() > 0.5 ? random * -1 : random;\n  }\n\n  createGasCloudPart(position, width) {\n    var gas = Math.floor(this.getRandom() * 5 + 5);\n    var baseRotation = (this.getRandom() - 0.5) * 0.002;\n\n    while (gas--) {\n      this.createGas(\n        position,\n        baseRotation,\n        this.getRandom() * width * 0.4 + width * 0.4\n      );\n    }\n  }\n\n  createGas(position, baseRotation, size) {\n    var particle = this.emitterContainer.getStarParticle(this);\n\n    position.x += (this.getRandom() - 0.5) * 100;\n    position.y += (this.getRandom() - 0.5) * 100;\n\n    particle\n      .setActivationTime(0)\n      .setSize(this.getRandom() * size * 0.5 + size * 0.5)\n      .setOpacity(this.getRandom() * 0.005 + 0.005)\n      .setPosition({ x: position.x, y: position.y })\n      .setColor(new THREE.Color(104 / 255, 204 / 255, 249 / 255))\n      .setTexture(particle.texture.gas)\n      .setAngle(this.getRandom() * 360)\n      .setAngleChange(baseRotation + (this.getRandom() - 0.5) * 0.001)\n      .setParallaxFactor(0.1 + this.getRandom() * 0.1);\n\n    if (this.getRandom() > 0.9) {\n      particle\n        .setActivationTime(0)\n        .setSize(this.getRandom() * size * 0.25 + size * 0.25)\n        .setOpacity(0)\n        .setPosition({ x: position.x, y: position.y })\n        .setColor(new THREE.Color(1, 1, 1))\n        .setTexture(particle.texture.gas)\n        .setAngle(this.getRandom() * 360)\n        .setAngleChange(baseRotation + (this.getRandom() - 0.5) * 0.01)\n        .setParallaxFactor(0.1 + this.getRandom() * 0.1)\n        .setSineFrequency(this.getRandom() * 200 + 200)\n        .setSineAmplitude(this.getRandom() * 0.02);\n    }\n  }\n}\n\nexport default StarField;\n","import * as THREE from \"three\";\r\nimport Vector from \"../../../model/utils/Vector.mjs\";\r\nimport { degreeToRadian } from \"../../../model/utils/math.mjs\";\r\nimport { ZOOM_PERSPECTIVE_MIN } from \"../../../model/gameConfig.mjs\";\r\n\r\nclass GameCamera {\r\n  constructor(zoom, width, height, z) {\r\n    this.ortho = new THREE.OrthographicCamera(\r\n      (zoom * width) / -2,\r\n      (zoom * width) / 2,\r\n      (zoom * height) / 2,\r\n      (zoom * height) / -2,\r\n      -40000,\r\n      40000\r\n    );\r\n\r\n    this.z = z;\r\n\r\n    this.ortho.position.set(0, 0, z);\r\n    this.orthoCameraAngle = 0;\r\n\r\n    this.perspectiveRatio = 10;\r\n    this.perspectiveFieldOfView = 25;\r\n\r\n    this.perspective = new THREE.PerspectiveCamera(\r\n      this.perspectiveFieldOfView,\r\n      width / height,\r\n      1,\r\n      100000\r\n    );\r\n\r\n    this.perspectiveCameraDistance = 1;\r\n\r\n    this.closeAngle = -z * 0.5;\r\n\r\n    this.setCameraAngle(this.closeAngle);\r\n\r\n    this.current = this.perspective;\r\n    window.gameCamera = this;\r\n  }\r\n\r\n  changeToMapView() {\r\n    this.setCameraAngle(0);\r\n    this.current = this.ortho;\r\n  }\r\n\r\n  changeToCloseView() {\r\n    this.setCameraAngle(this.closeAngle);\r\n    this.current = this.perspective;\r\n  }\r\n\r\n  solvePerspectiveSize() {\r\n    const adjacent = this.perspective.position.z;\r\n    const hypotenuse =\r\n      adjacent / Math.cos(degreeToRadian(this.perspectiveFieldOfView / 2));\r\n\r\n    const opposite =\r\n      Math.sin(degreeToRadian(this.perspectiveFieldOfView / 2)) * hypotenuse;\r\n\r\n    return {\r\n      width: opposite * 3 * this.perspective.aspect,\r\n      height: opposite * 2\r\n    };\r\n  }\r\n\r\n  changeCamera() {\r\n    if (this.current === this.perspective) {\r\n      this.current = this.ortho;\r\n    } else {\r\n      this.current = this.perspective;\r\n    }\r\n  }\r\n\r\n  zoomPerspective(zoom, width, height) {\r\n    const current = this.solvePerspectiveSize();\r\n    const perspectiveZoom = current.height / (height * zoom);\r\n    this.perspectiveCameraDistance /= perspectiveZoom;\r\n\r\n    if (this.perspectiveCameraDistance < ZOOM_PERSPECTIVE_MIN) {\r\n      this.perspectiveCameraDistance = ZOOM_PERSPECTIVE_MIN;\r\n    }\r\n\r\n    this.setPerspectiveCameraPositionByLookat(this.getLookAtPosition());\r\n  }\r\n\r\n  zoomCamera(zoom, width, height) {\r\n    this.ortho.left = (zoom * width) / -2;\r\n    this.ortho.right = (zoom * width) / 2;\r\n    this.ortho.top = (zoom * height) / 2;\r\n    this.ortho.bottom = (zoom * height) / -2;\r\n\r\n    this.perspective.aspect = width / height;\r\n    this.perspective.zoom = 1;\r\n    this.zoomPerspective(zoom, width, height);\r\n    //this.perspective.position.z = 1000;\r\n    this.perspective.updateProjectionMatrix();\r\n    this.ortho.updateProjectionMatrix();\r\n    this.ortho.updateMatrixWorld();\r\n  }\r\n\r\n  getPosition() {\r\n    return new Vector(this.current.position);\r\n  }\r\n\r\n  getLookAtPosition() {\r\n    return new Vector(\r\n      this.ortho.position.x,\r\n      this.ortho.position.y - this.orthoCameraAngle,\r\n      this.ortho.position.z - this.z\r\n    );\r\n  }\r\n\r\n  setByLookAtPosition(position) {\r\n    this.ortho.position.x = position.x;\r\n    this.ortho.position.y = position.y + this.orthoCameraAngle;\r\n    this.setPerspectiveCameraPositionByLookat(this.getLookAtPosition());\r\n  }\r\n\r\n  addPosition(position) {\r\n    this.ortho.position.x += position.x;\r\n    this.ortho.position.y += position.y;\r\n    this.perspective.position.x += position.x;\r\n    this.perspective.position.y += position.y;\r\n  }\r\n\r\n  setPosition(position) {\r\n    this.ortho.position.x = position.x;\r\n    this.ortho.position.y = position.y;\r\n    this.perspective.position.x += position.x;\r\n    this.perspective.position.y += position.y;\r\n  }\r\n\r\n  getCamera() {\r\n    return this.current;\r\n  }\r\n\r\n  setPerspectiveCameraPositionByLookat(lookAt) {\r\n    const perspectivePositionVector = new Vector(\r\n      0,\r\n      this.orthoCameraAngle / this.perspectiveRatio,\r\n      this.z / this.perspectiveRatio\r\n    ).normalize();\r\n\r\n    const perspectivePosition = new Vector(lookAt).add(\r\n      perspectivePositionVector.multiplyScalar(this.perspectiveCameraDistance)\r\n    );\r\n\r\n    this.perspective.position.set(\r\n      perspectivePosition.x,\r\n      perspectivePosition.y,\r\n      perspectivePosition.z\r\n    );\r\n\r\n    this.perspective.lookAt(new Vector(lookAt).toThree());\r\n  }\r\n\r\n  setCameraAngle(newAngle) {\r\n    if (newAngle > 0) {\r\n      newAngle = 0;\r\n    }\r\n\r\n    if (newAngle < -this.z) {\r\n      newAngle = -this.z;\r\n    }\r\n\r\n    const currentLookat = this.getLookAtPosition().toThree();\r\n\r\n    const delta = this.orthoCameraAngle - newAngle;\r\n\r\n    this.ortho.position.set(\r\n      this.ortho.position.x,\r\n      this.ortho.position.y - delta,\r\n      this.ortho.position.z\r\n    );\r\n    this.ortho.lookAt(currentLookat);\r\n    this.orthoCameraAngle = newAngle;\r\n\r\n    this.setPerspectiveCameraPositionByLookat(currentLookat);\r\n  }\r\n}\r\n\r\nexport default GameCamera;\r\n","import * as THREE from \"three\";\nimport HexGridRenderer from \"./renderer/hexgrid/HexGridRender\";\nimport StarField from \"./terrain/StarField\";\nimport { ZOOM_MAX, ZOOM_MIN } from \"../../../model/gameConfig\";\nimport { ParticleEmitterContainer } from \"./animation/particle\";\nimport GameCamera from \"./GameCamera\";\n\nwindow.THREE = THREE;\n\nclass GameScene {\n  constructor(phaseDirector, coordinateConverter) {\n    this.phaseDirector = phaseDirector;\n    this.coordinateConverter = coordinateConverter;\n    this.hexGridRenderer = new HexGridRenderer();\n    this.particleEmitterContainer = null;\n    this.scene = null;\n    this.camera = null;\n    this.starFieldScene = null;\n    this.starFieldCamera = null;\n    this.starField = null;\n    this.width = null;\n    this.height = null;\n\n    this.element = null;\n\n    this.initialized = false;\n\n    this.zoom = 1;\n    this.zoomTarget = this.zoom;\n\n    this.cameraAngle = 0; //-500;\n\n    this.deactivated = false;\n  }\n\n  init(element, { width, height }, gameId) {\n    this.element = element;\n\n    this.scene = new THREE.Scene();\n\n    this.particleEmitterContainer = new ParticleEmitterContainer(\n      this.scene,\n      2000\n    );\n\n    this.width = width;\n    this.height = height;\n\n    this.camera = new GameCamera(this.zoom, this.width, this.height, 10000);\n\n    this.coordinateConverter.init(this.camera, this.scene);\n    this.phaseDirector.init(\n      this.scene,\n      this.particleEmitterContainer,\n      this.camera\n    );\n\n    this.starFieldScene = new THREE.Scene();\n    this.starFieldCamera = new THREE.OrthographicCamera(\n      (this.zoom * this.width) / -2,\n      (this.zoom * this.width) / 2,\n      (this.zoom * this.height) / 2,\n      (this.zoom * this.height) / -2,\n      -4000,\n      30000\n    );\n\n    this.starFieldCamera.position.set(0, 0, 500);\n    this.starFieldCamera.lookAt(0, 0, 100);\n\n    this.light = new THREE.PointLight(0xffffff, 1.0, 0);\n    this.light.position.set(0, 0, 100000);\n    this.scene.add(this.light);\n\n    const directionalLight = new THREE.DirectionalLight(0x35527a, 0.005);\n    directionalLight.position.set(0, 0, 1).normalize();\n    this.scene.add(directionalLight);\n\n    /*\n    const directionalLight3 = new THREE.DirectionalLight(0xffffff, 0.8);\n    directionalLight3.position.set(0, 1, 1).normalize();\n    directionalLight3.castShadow = true;\n    //this.scene.add(directionalLight3);\n    this.directionalLight3 = directionalLight3;\n\n    //const directionalLight4 = new THREE.DirectionalLight(0x609dc1, 0.5);\n    const directionalLight4 = new THREE.DirectionalLight(0xfff3a6, 0.02);\n    directionalLight4.position.set(0, -1, 1);\n    //this.scene.add(directionalLight4);\n*/\n    /*\n    const line = new Line(\n      this.scene,\n      { x: 406.5864317029974, y: 534.742785792575, z: 0 },\n      { x: 567.692147554496, y: 627.757214207425, z: 0 },\n      2,\n      new THREE.Color(1, 0, 0)\n    );\n\n    new Line(\n      this.scene,\n      { x: 0, y: 0, z: 0 },\n      { x: 0, y: 0, z: 100 },\n      2,\n      new THREE.Color(1, 0, 0)\n    );\n\n    */\n    /*\n    const line2 = new Line(\n      { x: 0, y: 0, z: 0 },\n      { x: 0, y: 2000, z: 0 },\n      10,\n      new THREE.Color(1, 0, 0)\n    );\n    this.scene.add(line2.mesh);\n    */\n\n    /*\n    const helper = new THREE.DirectionalLightHelper(directionalLight4, 5);\n\n    this.scene.add(helper);\n    */\n\n    //this.scene.add(new THREE.AmbientLight(0x0a0f17));\n    this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.width, this.height);\n    this.renderer.autoClear = false;\n    this.renderer.context.getExtension(\"OES_standard_derivatives\");\n    this.renderer.context.getExtension(\"GL_OES_standard_derivatives\");\n\n    const gl =\n      this.renderer.domElement.getContext(\"webgl\") ||\n      this.renderer.domElement.getContext(\"experimental-webgl\");\n    gl.getExtension(\"OES_standard_derivatives\");\n\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.shadowMap.type = THREE.PCFShadowMap;\n    this.renderer.gammaOutput = true;\n    this.renderer.gammaFactor = 2.2;\n\n    element.appendChild(this.renderer.domElement);\n\n    this.initialized = true;\n    this.hexGridRenderer.renderHexGrid(this.scene, ZOOM_MIN, ZOOM_MAX);\n    this.starField = new StarField(this.starFieldScene, gameId);\n\n    this.render();\n  }\n\n  scroll(delta) {\n    this.moveCamera({\n      x: delta.x * (1 / this.zoom),\n      y: delta.y * (1 / this.zoom),\n    });\n  }\n\n  moveCamera(position) {\n    if (!this.initialized) {\n      return;\n    }\n\n    this.camera.addPosition({\n      x: position.x * this.zoom * this.zoom * -1,\n      y: position.y * this.zoom * this.zoom,\n    });\n    //this.camera.position.x -= position.x * this.zoom * this.zoom;\n    //this.camera.position.y += position.y * this.zoom * this.zoom;\n    this.starFieldCamera.position.x -=\n      position.x * this.zoom * this.zoom * 0.05;\n    this.starFieldCamera.position.y +=\n      position.y * this.zoom * this.zoom * 0.05;\n\n    this.phaseDirector.relayEvent(\"ScrollEvent\", this.camera.getPosition());\n  }\n\n  moveCameraTo(position) {\n    if (!this.initialized) {\n      return;\n    }\n\n    this.camera.setPosition({ x: position.x, y: position.y });\n\n    //this.camera.position.x = position.x;\n    //this.camera.position.y = position.y;\n    this.starFieldCamera.position.x = position.x * 0.1;\n    this.starFieldCamera.position.y = position.y * 0.1;\n\n    this.phaseDirector.relayEvent(\"ScrollEvent\", this.camera.getPosition());\n  }\n\n  zoomCamera(zoom, animationReady) {\n    this.zoom = zoom;\n\n    if (!this.initialized) {\n      return;\n    }\n\n    this.camera.zoomCamera(this.zoom, this.width, this.height);\n    this.coordinateConverter.onZoom(this.zoom);\n    this.hexGridRenderer.onZoom(this.zoom);\n\n    this.phaseDirector.relayEvent(\"ZoomEvent\", {\n      zoom: this.zoom,\n      animationReady: Boolean(animationReady),\n    });\n  }\n\n  render() {\n    if (this.deactivated) {\n      return;\n    }\n\n    this.phaseDirector.render(this.scene, this.coordinateConverter, this.zoom);\n\n    this.renderer.clear();\n    this.renderer.render(this.starFieldScene, this.starFieldCamera);\n    this.renderer.clearDepth();\n    this.renderer.render(this.scene, this.camera.getCamera());\n\n    this.animateZoom();\n    this.starField.render();\n\n    requestAnimationFrame(this.render.bind(this));\n  }\n\n  animateZoom() {\n    if (this.zoomTarget && this.zoomTarget !== this.zoom) {\n      var change = (this.zoomTarget - this.zoom) * 0.1;\n      if (\n        Math.abs(change) < 0.00001 ||\n        (this.zoomTarget === 1 && Math.abs(change) < 0.00001)\n      ) {\n        this.zoomCamera(this.zoomTarget, true);\n      } else {\n        this.zoomCamera(this.zoom + change);\n      }\n    }\n  }\n\n  onResize({ width, height }) {\n    this.width = width;\n    this.height = height;\n\n    this.zoomCamera(this.zoom);\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.starField.resize();\n  }\n\n  changeZoom(zoom) {\n    zoom *= 0.5;\n    if (zoom < -0.5) zoom = -0.5;\n\n    this.zoominprogress = false;\n    var newzoom = this.zoom + this.zoom * zoom;\n\n    if (newzoom < ZOOM_MIN) newzoom = ZOOM_MIN;\n\n    if (newzoom > ZOOM_MAX) newzoom = ZOOM_MAX;\n\n    this.zoomTarget = newzoom;\n  }\n\n  deactivate() {\n    if (this.deactivated) {\n      return;\n    }\n\n    this.deactivated = true;\n    this.element.removeChild(this.renderer.domElement);\n    this.renderer.clear();\n    this.renderer.forceContextLoss();\n    this.renderer.domElement = null;\n    this.renderer.dispose();\n    this.renderer = null;\n  }\n}\n\nexport default GameScene;\n","import PhaseDirector from \"./phase/PhaseDirector\";\r\nimport coordinateConverter from \"../../../model/utils/CoordinateConverter\";\r\nimport PositionObject from \"./utils/PositionObject\";\r\nimport GameSettings from \"./GameSettings\";\r\nimport GameConnector from \"./GameConnector\";\r\n\r\nimport GameScene from \"./GameScene\";\r\n\r\nclass Game {\r\n  constructor(gameId, user, uiState) {\r\n    this.gameId = gameId;\r\n    this.currentUser = user;\r\n\r\n    this.uiState = uiState;\r\n    this.coordinateConverter = coordinateConverter;\r\n\r\n    this.gameConnector = new GameConnector(gameId);\r\n    this.phaseDirector = new PhaseDirector(\r\n      this.uiState,\r\n      this.currentUser,\r\n      this.coordinateConverter,\r\n      this.gameConnector\r\n    );\r\n    this.gameScene = new GameScene(\r\n      this.phaseDirector,\r\n      this.coordinateConverter\r\n    );\r\n    this.gameSettings = new GameSettings().load();\r\n    this.sceneElement = null;\r\n\r\n    this.init = false;\r\n\r\n    this.mouseOvered = null;\r\n    this.mouseOveredHex = null;\r\n  }\r\n\r\n  getUiState() {\r\n    return this.uiState;\r\n  }\r\n\r\n  initRender(element) {\r\n    this.sceneElement = element;\r\n    this.init = true;\r\n    this.gameScene.init(element, this.getDimensions(), this.gameId);\r\n    this.gameConnector.connect();\r\n    this.onResize();\r\n  }\r\n\r\n  onMouseWheel(step) {\r\n    this.gameScene.changeZoom(step);\r\n  }\r\n\r\n  onKeyDown(event) {\r\n    const action = this.gameSettings.matchEvent(event);\r\n    this.uiState.customEvent(action, { up: false });\r\n  }\r\n\r\n  onKeyUp(event) {\r\n    const action = this.gameSettings.matchEvent(event);\r\n    this.uiState.customEvent(action, { up: true });\r\n  }\r\n\r\n  onMouseUp(position, button) {\r\n    if (!this.init) {\r\n      return;\r\n    }\r\n\r\n    const gamePos = this.coordinateConverter.fromViewPortToGame(position);\r\n    const entity = this.coordinateConverter\r\n      .getEntitiesIntersected(position, true)\r\n      .shift();\r\n    const hexPos = this.coordinateConverter.fromGameToHex(gamePos, true);\r\n\r\n    const payload = new PositionObject(position, gamePos, hexPos, entity);\r\n    console.log(payload.hex);\r\n\r\n    if (button && button === 2 && entity) {\r\n      this.phaseDirector.relayEvent(\"shipRightClicked\", payload);\r\n    } else if (entity) {\r\n      this.phaseDirector.relayEvent(\"shipClicked\", payload);\r\n    } else {\r\n      this.phaseDirector.relayEvent(\"hexClicked\", payload);\r\n    }\r\n  }\r\n\r\n  onDrag(position, delta) {\r\n    this.gameScene.scroll(delta);\r\n  }\r\n\r\n  onMouseMove(position) {\r\n    const gamePos = this.coordinateConverter.fromViewPortToGame(position);\r\n    const hexPos = this.coordinateConverter.fromGameToHex(gamePos);\r\n    const entity = this.coordinateConverter\r\n      .getEntitiesIntersected(position)\r\n      .shift();\r\n\r\n    const payload = new PositionObject(position, gamePos, hexPos, entity);\r\n\r\n    if (this.mouseOvered && entity && this.mouseOvered != entity) {\r\n      this.phaseDirector.relayEvent(\"mouseOutShip\", {\r\n        ...payload,\r\n        entity: this.mouseOvered\r\n      });\r\n\r\n      this.phaseDirector.relayEvent(\"mouseOverShip\", payload);\r\n      this.mouseOvered = entity;\r\n    } else if (this.mouseOvered == null && entity) {\r\n      this.phaseDirector.relayEvent(\"mouseOverShip\", payload);\r\n      this.mouseOvered = entity;\r\n    } else if (this.mouseOvered && !entity) {\r\n      this.phaseDirector.relayEvent(\"mouseOutShip\", {\r\n        ...payload,\r\n        entity: this.mouseOvered\r\n      });\r\n      this.mouseOvered = null;\r\n    }\r\n\r\n    if (!entity) {\r\n      if (this.mouseOveredHex && !this.mouseOveredHex.equals(payload.hex)) {\r\n        this.phaseDirector.relayEvent(\"mouseOutHex\", this.mouseOveredHex);\r\n        this.phaseDirector.relayEvent(\"mouseOverHex\", payload.hex);\r\n        this.mouseOveredHex = payload.hex;\r\n      } else if (!this.mouseOveredHex) {\r\n        this.phaseDirector.relayEvent(\"mouseOverHex\", payload.hex);\r\n        this.mouseOveredHex = payload.hex;\r\n      }\r\n    } else if (entity && this.mouseOveredHex) {\r\n      this.phaseDirector.relayEvent(\"mouseOutHex\", this.mouseOveredHex);\r\n      this.mouseOveredHex = null;\r\n    }\r\n  }\r\n\r\n  onMouseOut() {\r\n    this.phaseDirector.relayEvent(\"mouseOut\");\r\n  }\r\n\r\n  onResize() {\r\n    if (!this.sceneElement) {\r\n      return;\r\n    }\r\n\r\n    const dimensions = this.getDimensions();\r\n    this.coordinateConverter.onResize(dimensions);\r\n    this.gameScene.onResize(dimensions);\r\n  }\r\n\r\n  getDimensions() {\r\n    return {\r\n      width: this.sceneElement.offsetWidth,\r\n      height: this.sceneElement.offsetHeight\r\n    };\r\n  }\r\n\r\n  deactivate() {\r\n    this.gameConnector.deactivate();\r\n    this.phaseDirector.deactivate();\r\n    this.gameScene.deactivate();\r\n  }\r\n}\r\n\r\nexport default Game;\r\n","import * as gameUiModes from \"./gameUiModes\";\nimport { HEX_SIZE } from \"../../../../model/gameConfig.mjs\";\nimport { angleToHexFacing } from \"../../../../model/utils/math.mjs\";\n\nclass UIState {\n  constructor() {\n    this.phaseDirector = null;\n    this.services = null;\n\n    this.renderListeners = [];\n\n    this.systemChangeListeners = [];\n\n    this.state = {\n      lobby: false,\n      gameData: null,\n      selectedShip: null,\n      selectedSystems: [],\n      systemInfo: null,\n      systemInfoMenu: null,\n      shipMovement: null,\n      shipTooltip: [],\n      turnReady: false,\n      shipTooltipMenuProvider: null,\n      systemMenu: {\n        systemInfoMenuProvider: null,\n        activeSystem: null,\n        activeSystemElement: null,\n      },\n      shipBadges: [],\n      gameUiMode: {},\n      gameUiModeButtons: false,\n      replayUi: false,\n      combatLog: false,\n      systemList: [],\n      ewList: [],\n      stateVersion: 0,\n    };\n\n    this.state.gameUiMode[gameUiModes.EW] = false;\n    this.state.gameUiMode[gameUiModes.ENEMY_WEAPONS] = false;\n    this.state.gameUiMode[gameUiModes.WEAPONS] = false;\n    this.state.gameUiMode[gameUiModes.MOVEMENT] = false;\n  }\n\n  setDispatch(dispatch) {\n    this.dispatch = dispatch;\n  }\n\n  getReducer() {\n    return this.reducer.bind(this);\n  }\n\n  getInitialState() {\n    return this.state;\n  }\n\n  reducer(state, action) {\n    this.state = {\n      ...state,\n      ...action,\n    };\n\n    return this.state;\n  }\n\n  showShipBadge(icon, showName) {\n    const entry = this.state.shipBadges.find(\n      (badge) => badge.icon.ship.id === icon.ship.id\n    );\n\n    if (entry) {\n      entry.icon = icon;\n      entry.version++;\n      entry.showName = showName;\n      entry.visible = true;\n    } else {\n      this.state.shipBadges.push({\n        icon,\n        version: 0,\n        showName,\n        visible: true,\n      });\n    }\n\n    this.updateState();\n  }\n\n  hideShipBadge(icon) {\n    const entry = this.state.shipBadges.find(\n      (badge) => badge.icon.ship.id === icon.ship.id\n    );\n\n    if (entry) {\n      entry.visible = false;\n      entry.version++;\n      this.updateState();\n    }\n  }\n\n  removeShipBadge(icon) {\n    this.state.shipBadges = this.state.shipBadges.filter(\n      (entry) => entry.icon.ship.id !== icon.ship.id\n    );\n\n    this.updateState();\n  }\n\n  setEwList(entries) {\n    this.state.ewList = entries;\n  }\n\n  setSystemList(systems) {\n    this.state.systemList = systems;\n    this.updateState();\n  }\n\n  isSelectedSystem(system) {\n    return this.state.selectedSystems.includes(system);\n  }\n\n  selectSystem(ship, systems) {\n    if (this.getSelectedShip() !== ship) {\n      this.selectShip(ship);\n    }\n\n    systems = []\n      .concat(systems)\n      .filter((system) => !this.isSelectedSystem(system))\n      .forEach((system) => this.state.selectedSystems.push(system));\n\n    this.updateState();\n    this.customEvent(\"systemSelected\", { systems });\n  }\n\n  deselectSystem(systems) {\n    systems = [].concat(systems);\n\n    this.state.selectedSystems = this.state.selectedSystems.filter((selected) =>\n      systems.every((system) => system.id !== selected.id)\n    );\n\n    this.updateState();\n    this.customEvent(\"systemDeselected\", { systems });\n  }\n\n  deselectAllSystems() {\n    const systems = this.state.selectedSystems;\n    this.state.selectedSystems = [];\n    this.updateState();\n    this.customEvent(\"systemDeselected\", { systems });\n  }\n\n  getSelectedSystems() {\n    return this.state.selectedSystems;\n  }\n\n  hasGameUiMode(values) {\n    values = [].concat(values);\n    return values.some((value) => this.state.gameUiMode[value]);\n  }\n\n  toggleGameUiMode(value) {\n    this.state.gameUiMode[value] = !this.state.gameUiMode[value];\n    this.updateState();\n  }\n\n  showUiModeButtons(value) {\n    this.state.gameUiModeButtons = value;\n    this.updateState();\n  }\n\n  showReplayUi(value) {\n    this.state.replayUi = value;\n    this.updateState();\n  }\n\n  startCombatLog(replayContext, gameData) {\n    this.state.combatLog = {\n      gameData,\n      replayContext,\n      log: [],\n    };\n  }\n\n  addToCombatLog(value) {\n    if (this.state.combatLog === false) {\n      throw new Error(\"Start combat log first\");\n    }\n\n    this.state.combatLog.log.push(value);\n    this.updateState();\n  }\n\n  hideCombatLog() {\n    this.state.combatLog = false;\n    this.updateState();\n  }\n\n  startReplay() {\n    this.phaseDirector.startReplay();\n    this.updateState();\n  }\n\n  closeReplay() {\n    this.phaseDirector.closeReplay();\n    this.updateState();\n  }\n\n  isReplay() {\n    return this.state.replay;\n  }\n\n  update(gameData) {\n    this.gameData = gameData;\n    if (this.state.selectedShip) {\n      this.selectShip(\n        this.gameData.ships.getShipById(this.state.selectedShip.id)\n      );\n\n      this.selectSystem(\n        this.getSelectedShip(),\n        this.state.selectedSystems.map((system) =>\n          this.getSelectedShip().systems.getSystemById(system.id)\n        )\n      );\n    }\n  }\n\n  setTurnReady(ready) {\n    this.state.turnReady = ready;\n    this.updateState();\n  }\n\n  setWaiting(waiting) {\n    this.state.waiting = waiting;\n    this.updateState();\n  }\n\n  setPhaseDirector(phaseDirector) {\n    this.phaseDirector = phaseDirector;\n    this.services = phaseDirector.getServices();\n  }\n\n  customEvent(name, payload) {\n    if (!this.phaseDirector) {\n      return;\n    }\n\n    this.phaseDirector.relayEvent(name, payload);\n  }\n\n  commitTurn() {\n    this.phaseDirector.commitTurn();\n  }\n\n  selectShip(ship) {\n    if (this.getSelectedShip() === ship) {\n      return;\n    }\n\n    this.deselectShip();\n    this.state.selectedShip = ship;\n    this.updateState();\n    this.customEvent(\"shipSelected\", ship);\n  }\n\n  deselectShip() {\n    const ship = this.state.selectedShip;\n    this.state.selectedShip = null;\n    this.updateState();\n    this.deselectAllSystems();\n    if (ship) {\n      this.customEvent(\"shipDeselected\", ship);\n    }\n  }\n\n  getSelectedShip() {\n    return this.state.selectedShip;\n  }\n\n  isSelected(ship) {\n    return this.state.selectedShip === ship;\n  }\n\n  updateState() {\n    //this.state.stateVersion++;\n    this.dispatch(this.state);\n    this.customEvent(\"uiStateChanged\");\n  }\n\n  setTooltipMenuProvider(callBack) {\n    this.state.shipTooltipMenuProvider = callBack;\n    this.updateState();\n  }\n\n  setSystemInfoMenuProvider(callBack) {\n    this.state.systemMenu.systemInfoMenuProvider = callBack;\n    this.updateState();\n  }\n\n  setSystemMenuActiveSystem(system, element) {\n    this.state.systemMenu.activeSystem = system;\n    this.state.systemMenu.activeSystemElement = element;\n    this.updateState();\n  }\n\n  setGameData(gameData) {\n    this.state.gameData = gameData.serialize();\n    this.updateState();\n  }\n\n  setLobby(status) {\n    this.state.lobby = status;\n    this.updateState();\n  }\n\n  getState() {\n    return this.state;\n  }\n\n  showSystemInfo(args) {\n    this.state.systemInfo = args;\n    this.updateState();\n  }\n\n  hideSystemInfo() {\n    this.state.systemInfo = null;\n    this.updateState();\n  }\n\n  showSystemInfoMenu(args) {\n    this.state.systemInfoMenu = args;\n    this.updateState();\n  }\n\n  hideSystemInfoMenu() {\n    this.state.systemInfoMenu = null;\n    this.updateState();\n  }\n\n  shipStateChanged(ship) {\n    this.customEvent(\"shipStateChanged\", ship);\n  }\n\n  shipSystemStateChanged(ship, system) {\n    this.customEvent(\"shipSystemStateChanged\", { ship, system });\n    this.systemChangeListeners.forEach((callBack) => callBack(ship, system));\n  }\n\n  showShipTooltip(ship, ui = false, right = false) {\n    this.hideShipTooltip(ship);\n    this.state.shipTooltip.push({\n      ship,\n      ui,\n      right: !right,\n    });\n    this.updateState();\n  }\n\n  hideShipTooltip(ship) {\n    this.state.shipTooltip = this.state.shipTooltip.filter(\n      (tooltip) => tooltip.ship.id !== ship.id\n    );\n\n    this.customEvent(\"shipTooltipHidden\", ship);\n    this.updateState();\n  }\n\n  showShipDeploymentMovement(ship) {\n    const {\n      shipIconContainer,\n      coordinateConverter,\n      movementService,\n    } = this.services;\n\n    this.state.shipMovement = {\n      ship,\n      type: \"deploy\",\n      movementService,\n      getPosition: () =>\n        coordinateConverter.fromGameToViewPort(\n          shipIconContainer.getByShip(ship).getPosition()\n        ),\n    };\n    this.updateState();\n  }\n\n  showShipMovement(ship) {\n    const {\n      shipIconContainer,\n      coordinateConverter,\n      movementService,\n    } = this.services;\n\n    this.state.shipMovement = {\n      ship,\n      type: \"game\",\n      movementService,\n      getPosition: () =>\n        coordinateConverter.fromGameToViewPort(\n          shipIconContainer.getByShip(ship).getPosition()\n        ),\n    };\n    this.updateState();\n  }\n\n  hideShipMovement() {\n    this.state.shipMovement = null;\n    this.updateState();\n  }\n\n  render() {\n    this.renderListeners.forEach((listener) => listener());\n  }\n\n  subscribeToRender(callBack) {\n    this.renderListeners.push(callBack);\n  }\n\n  unsubscribeFromRender(callBack) {\n    this.renderListeners = this.renderListeners.filter(\n      (listener) => listener !== callBack\n    );\n  }\n\n  subscribeToSystemChange(callBack) {\n    this.systemChangeListeners.push(callBack);\n  }\n\n  unsubscribeFromSystemChange(callBack) {\n    this.systemChangeListeners = this.systemChangeListeners.filter(\n      (listener) => listener !== callBack\n    );\n  }\n}\n\nexport default UIState;\n","import React, { useCallback, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  SubTitle,\r\n  DarkContainer,\r\n  Section,\r\n  SectionRight,\r\n  Button,\r\n  Value,\r\n  InputAndLabel\r\n} from \"../../../../styled\";\r\n\r\nconst Container = styled.div`\r\n  border: 1px solid black;\r\n  width: 200px;\r\n  padding: 8px;\r\n`;\r\n\r\nexport function PurchasedShip({ ship, uiState }) {\r\n  const openShipWindow = useCallback(() => {\r\n    uiState.showShipTooltip(ship, true, true);\r\n  }, [uiState, ship]);\r\n\r\n  const [error, setError] = useState(\"Ship must have a name\");\r\n\r\n  return (\r\n    <Container>\r\n      <Button buttonStyle=\"text\" onClick={openShipWindow}>\r\n        {ship.shipTypeName} <Value>{ship.pointCost}</Value> points\r\n      </Button>\r\n      <InputAndLabel\r\n        error={error}\r\n        label=\"Name\"\r\n        onChange={e => {\r\n          ship.name = e.target.value;\r\n          if (!ship.name) {\r\n            setError(\"Ship must have a name\");\r\n          } else {\r\n            setError(null);\r\n          }\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  SubTitle,\r\n  DarkContainer,\r\n  Section,\r\n  SectionRight,\r\n  Button,\r\n  Value\r\n} from \"../../../../styled\";\r\nimport { PurchasedShip } from \"./PurchasedShip\";\r\n\r\nconst FleetContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: 440px;\r\n  justify-content: space-around;\r\n  margin-top: 16px;\r\n`;\r\n\r\nclass FleetList extends Component {\r\n  openShipWindow(ship) {\r\n    return () => {\r\n      const { uiState } = this.props;\r\n      uiState.showShipTooltip(ship, true, true);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { ships, onReady, bought, uiState } = this.props;\r\n\r\n    return (\r\n      <DarkContainer>\r\n        <Section>\r\n          <SubTitle>Current fleet for slot</SubTitle>\r\n          <SectionRight>\r\n            {!bought && ships.length > 0 && (\r\n              <Button buttonStyle=\"button\" onClick={onReady}>\r\n                Ready\r\n              </Button>\r\n            )}\r\n          </SectionRight>\r\n        </Section>\r\n        <FleetContainer>\r\n          {ships.map((ship, i) => (\r\n            <PurchasedShip\r\n              key={`fleetlist-ship-${i}`}\r\n              ship={ship}\r\n              uiState={uiState}\r\n            />\r\n          ))}\r\n        </FleetContainer>\r\n      </DarkContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FleetList;\r\n","import React, { Component } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nimport {\r\n  Title,\r\n  InputAndLabel,\r\n  Container,\r\n  Section,\r\n  Label,\r\n  Value,\r\n  SectionRight,\r\n  Button,\r\n  icons,\r\n  colors\r\n} from \"../../styled\";\r\n\r\nconst selected = css`\r\n  box-shadow: 0px 0px 3px 3px rgba(222, 235, 255, 0.5);\r\n  color: #0a3340;\r\n  background-color: ${colors.border};\r\n  border-color: ${colors.blue};\r\n`;\r\n\r\nconst SlotContainer = styled(Container)`\r\n  ${props => (props.selected ? selected : \"\")}\r\n`;\r\n\r\nclass Slot extends Component {\r\n  handleChange() {}\r\n\r\n  getPlayerName(slot) {\r\n    const { gameData } = this.props;\r\n\r\n    const user = gameData.players.find(user => user.id === slot.userId);\r\n    return user.username;\r\n  }\r\n\r\n  leaveSlot(slot) {\r\n    return () => {\r\n      const { uiState } = this.props;\r\n      uiState.customEvent(\"leaveSlot\", slot);\r\n    };\r\n  }\r\n\r\n  takeSlot(slot) {\r\n    return () => {\r\n      const { uiState } = this.props;\r\n      uiState.customEvent(\"takeSlot\", slot);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      slot,\r\n      edit,\r\n      take,\r\n      currentUser,\r\n      selectedSlot,\r\n      children\r\n    } = this.props;\r\n\r\n    return (\r\n      <SlotContainer selected={selectedSlot && selectedSlot.id === slot.id}>\r\n        <Section>\r\n          {edit ? (\r\n            <>\r\n              <InputAndLabel\r\n                label=\"Slot name\"\r\n                id={`slotName-${slot.name}`}\r\n                placeholder=\"slot name\"\r\n                value={slot.name}\r\n                onChange={this.handleChange}\r\n                error={!slot.name ? \"Name is required\" : false}\r\n              />\r\n\r\n              <InputAndLabel\r\n                label=\"Points\"\r\n                id={`slotPoints-${slot.name}`}\r\n                placeholder=\"5000\"\r\n                value={slot.points}\r\n                onChange={this.handleChange}\r\n                error={\r\n                  slot.points !== parseInt(slot.points, 10) || slot.points <= 0\r\n                    ? \"Points must be a positive number\"\r\n                    : false\r\n                }\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Title>{slot.name}</Title>\r\n              <Title>\r\n                Points: <Value>{slot.points}</Value>\r\n              </Title>\r\n              <SectionRight>\r\n                {slot.isTaken() && (\r\n                  <Title>\r\n                    Player: <Value>{this.getPlayerName(slot)}</Value>\r\n                  </Title>\r\n                )}\r\n                {currentUser && !slot.isTaken() && take && (\r\n                  <Button\r\n                    onClick={this.takeSlot(slot)}\r\n                    type=\"button\"\r\n                    buttonStyle=\"button-grey\"\r\n                  >\r\n                    Take slot\r\n                  </Button>\r\n                )}\r\n                {take && currentUser && slot.isOccupiedBy(currentUser) && (\r\n                  <Button\r\n                    onClick={this.leaveSlot(slot)}\r\n                    type=\"button\"\r\n                    icon={icons.X}\r\n                  />\r\n                )}\r\n              </SectionRight>\r\n            </>\r\n          )}\r\n        </Section>\r\n\r\n        <Section>\r\n          {edit ? (\r\n            <>\r\n              <InputAndLabel\r\n                label=\"Deployment position (X,Y):\"\r\n                id={`deploymentPosition-${slot.name}`}\r\n                placeholder=\"0\"\r\n                value={`${slot.deploymentLocation.q},${\r\n                  slot.deploymentLocation.r\r\n                }`}\r\n                onChange={this.handleChange}\r\n              />\r\n\r\n              <InputAndLabel\r\n                label=\"Deployment vector (X,Y):\"\r\n                id={`deploymentVector-${slot.name}`}\r\n                placeholder=\"0\"\r\n                value={`${slot.deploymentVector.q},${slot.deploymentVector.r}`}\r\n                onChange={this.handleChange}\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Label>\r\n                Deployment position:\r\n                <Value>{` ${slot.deploymentLocation.q},${\r\n                  slot.deploymentLocation.r\r\n                }`}</Value>\r\n              </Label>\r\n              <Label>\r\n                Deployment vector:\r\n                <Value>{`${slot.deploymentVector.q},${\r\n                  slot.deploymentVector.r\r\n                }`}</Value>\r\n              </Label>\r\n              <Label>\r\n                Deployment radius: <Value> {slot.deploymentRadius}</Value>\r\n              </Label>\r\n            </>\r\n          )}\r\n        </Section>\r\n\r\n        <Section>\r\n          {edit && (\r\n            <InputAndLabel\r\n              label=\"Deployment radius:\"\r\n              id={`deploymentRadius-${slot.name}`}\r\n              placeholder=\"0\"\r\n              value={slot.deploymentRadius}\r\n              onChange={this.handleChange}\r\n            />\r\n          )}\r\n        </Section>\r\n        {children}\r\n      </SlotContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slot;\r\n","import React, { Component } from \"react\";\r\nimport FleetList from \"./FleetList\";\r\n\r\nimport Slot from \"../../../createGame/Slot\";\r\n\r\nimport { Title, DarkContainer } from \"../../../../styled\";\r\nclass LobbySlots extends Component {\r\n  mapTeamsToComponents() {\r\n    const { gameData, selectedSlot, ships, uiState, onReady } = this.props;\r\n\r\n    return gameData.slots.getSlotsByTeams().map(team => {\r\n      return (\r\n        <DarkContainer key={`team-${team.team}`}>\r\n          <Title>TEAM: {team.team}</Title>\r\n          {team.slots.map(slot => {\r\n            if (selectedSlot && slot.id === selectedSlot.id) {\r\n              return (\r\n                <Slot key={slot.id} slot={slot} {...this.props}>\r\n                  <FleetList\r\n                    bought={slot.isBought()}\r\n                    onReady={onReady}\r\n                    uiState={uiState}\r\n                    ships={ships}\r\n                  />\r\n                </Slot>\r\n              );\r\n            } else {\r\n              return <Slot key={slot.id} slot={slot} {...this.props} />;\r\n            }\r\n          })}\r\n        </DarkContainer>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return <>{this.mapTeamsToComponents()}</>;\r\n  }\r\n}\r\n\r\nexport default LobbySlots;\r\n","class Faction {\r\n  constructor(name, ships) {\r\n    this.name = name;\r\n    this.ships = ships;\r\n  }\r\n}\r\n\r\nexport default [\r\n  new Faction(\"United Colonies\", [\"UcRhino\", \"Haka\"]),\r\n  new Faction(\"The Expanse Protecorate\", [\"Caliope\", \"Fulcrum\", \"Mouros\"]),\r\n  new Faction(\"Federation Navy\", [\"Impetous\"])\r\n];\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  DarkContainer,\r\n  Section,\r\n  SubTitle,\r\n  Button,\r\n  Value\r\n} from \"../../../../styled\";\r\nimport ships from \"../../../../../model/unit/ships\";\r\n\r\nclass Faction extends Component {\r\n  buyShip(className) {\r\n    const { buyShip } = this.props;\r\n    return () => {\r\n      buyShip(className);\r\n    };\r\n  }\r\n\r\n  openShipWindow(ship) {\r\n    return () => {\r\n      const { uiState } = this.props;\r\n      uiState.showShipTooltip(ship, true, true);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { faction } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <SubTitle>{faction.name}</SubTitle>\r\n        {faction.ships\r\n          .map(ship => new ships[ship]())\r\n          .map(ship => (\r\n            <Section key={`fleetStoreEntry-${ship.shipClass}`}>\r\n              <Button buttonStyle=\"text\" onClick={this.openShipWindow(ship)}>\r\n                {ship.shipTypeName} <Value>{ship.pointCost}</Value> points\r\n              </Button>\r\n\r\n              <Button\r\n                buttonStyle=\"button\"\r\n                onClick={this.buyShip(ship.shipClass)}\r\n              >\r\n                Add to fleet\r\n              </Button>\r\n            </Section>\r\n          ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Faction;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport factions from \"../../../../../model/unit/ships/factions\";\r\nimport Faction from \"./Faction\";\r\n\r\nimport { Title, DarkContainer, Section } from \"../../../../styled\";\r\n\r\nconst FleetContainer = styled(DarkContainer)`\r\n  flex-grow: 1;\r\n  margin-left: 10px;\r\n`;\r\n\r\nclass FleetStore extends Component {\r\n  render() {\r\n    return (\r\n      <FleetContainer>\r\n        {factions.map(faction => (\r\n          <Faction key={faction.name} faction={faction} {...this.props} />\r\n        ))}\r\n      </FleetContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FleetStore;\r\n","import * as THREE from \"three\";\r\nimport StarField from \"../game/terrain/StarField\";\r\n\r\nwindow.THREE = THREE;\r\n\r\nclass HomeScene {\r\n  constructor() {\r\n    this.starFieldScene = null;\r\n    this.starFieldCamera = null;\r\n    this.starField = null;\r\n    this.width = null;\r\n    this.height = null;\r\n    this.element = null;\r\n    this.initialized = false;\r\n\r\n    this.zoom = 1;\r\n  }\r\n\r\n  init(element, { width, height }) {\r\n    this.element = element;\r\n    this.scene = new THREE.Scene();\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.starFieldScene = new THREE.Scene();\r\n    this.starFieldCamera = new THREE.OrthographicCamera(\r\n      (this.zoom * this.width) / -2,\r\n      (this.zoom * this.width) / 2,\r\n      (this.zoom * this.height) / 2,\r\n      (this.zoom * this.height) / -2,\r\n      -4000,\r\n      30000\r\n    );\r\n\r\n    this.starFieldCamera.position.set(0, 0, 500);\r\n    this.starFieldCamera.lookAt(0, 0, 100);\r\n\r\n    this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.setSize(this.width, this.height);\r\n    this.renderer.autoClear = false;\r\n    this.renderer.context.getExtension(\"OES_standard_derivatives\");\r\n    this.renderer.gammaOutput = true;\r\n    this.renderer.gammaFactor = 2.2;\r\n    element.appendChild(this.renderer.domElement);\r\n\r\n    this.initialized = true;\r\n    this.starField = new StarField(this.starFieldScene, \"home\");\r\n\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.renderer.clear();\r\n    this.renderer.render(this.starFieldScene, this.starFieldCamera);\r\n    this.starField.render();\r\n\r\n    requestAnimationFrame(this.render.bind(this));\r\n  }\r\n\r\n  onResize({ width, height }) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    this.starField.resize();\r\n  }\r\n}\r\n\r\nexport default HomeScene;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport HomeScene from \"./HomeScene\";\r\n\r\nconst WebglCanvas = styled.div`\r\n  position: fixed;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  display: flex;\r\n  background-size: cover;\r\n  background-color: #0b121a;\r\n  box-shadow: inset 0px 0px 200px rgba(0, 0, 0, 1);\r\n  z-index: -2;\r\n`;\r\n\r\nclass HomeSceneComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef = React.createRef();\r\n    this.scene = new HomeScene();\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.onResize.bind(this));\r\n\r\n    const sceneElement = this.canvasRef.current;\r\n\r\n    this.scene.init(sceneElement, this.getDimensions());\r\n  }\r\n\r\n  getDimensions() {\r\n    return {\r\n      width: this.canvasRef.current.offsetWidth,\r\n      height: this.canvasRef.current.offsetHeight\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.onResize.bind(this));\r\n  }\r\n\r\n  onResize() {\r\n    if (!this.canvasRef.current) {\r\n      return;\r\n    }\r\n\r\n    const dimensions = this.getDimensions();\r\n    this.scene.onResize(dimensions);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    return <WebglCanvas ref={this.canvasRef} />;\r\n  }\r\n}\r\n\r\nexport default HomeSceneComponent;\r\n","import React, { Component } from \"react\";\r\n\r\nimport Slot from \"./Slot\";\r\n\r\nimport { Title, DarkContainer } from \"../../styled\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  margin: 0 8px 8px 8px;\r\n`;\r\n\r\nclass Slots extends Component {\r\n  mapTeamsToComponents() {\r\n    const { gameData } = this.props;\r\n    return gameData.slots.getSlotsByTeams().map((team) => {\r\n      return (\r\n        <Container>\r\n          <DarkContainer key={`team-${team.team}`}>\r\n            <Title>TEAM: {team.team}</Title>\r\n            {team.slots.map((slot) => (\r\n              <Slot key={slot.id} slot={slot} {...this.props} />\r\n            ))}\r\n          </DarkContainer>\r\n        </Container>\r\n      );\r\n    });\r\n  }\r\n\r\n  handleChange() {}\r\n\r\n  render() {\r\n    return <>{this.mapTeamsToComponents()}</>;\r\n  }\r\n}\r\n\r\nexport default Slots;\r\n","import React, {\r\n  Component,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport GameData from \"../../../model/game/GameData\";\r\nimport GameSlot from \"../../../model/game/GameSlot\";\r\nimport hexagon from \"../../../model/hexagon\";\r\nimport Slots from \"./Slots\";\r\nimport { createGame } from \"../../api/game\";\r\n\r\nimport {\r\n  Title,\r\n  InputAndLabel,\r\n  Button,\r\n  Link,\r\n  TooltipContainer,\r\n  TooltipHeader,\r\n} from \"../../styled\";\r\nimport { StateStore } from \"../../state/StoreProvider\";\r\nimport { CloseButton } from \"../../styled/Button\";\r\nimport { LinkInline } from \"../../styled/Link\";\r\n\r\nconst Container = styled.div`\r\n  width: 1200px;\r\n`;\r\n\r\nconst CreateGame = ({ location }) => {\r\n  const state = useContext(StateStore);\r\n  const user = state.currentUser;\r\n  const [gameData, setGameData] = useState(new GameData());\r\n\r\n  useEffect(() => {\r\n    gameData.slots.addSlot(\r\n      new GameSlot({\r\n        name: \"Blue\",\r\n        team: 1,\r\n        points: 3000,\r\n        userId: user.id,\r\n        deploymentLocation: new hexagon.Offset(-150, 0),\r\n        deploymentVector: new hexagon.Offset(10, 0),\r\n      })\r\n    );\r\n\r\n    gameData.slots.addSlot(\r\n      new GameSlot({\r\n        name: \"Red\",\r\n        team: 2,\r\n        points: 3000,\r\n        userId: null,\r\n        deploymentLocation: new hexagon.Offset(150, 0),\r\n        deploymentVector: new hexagon.Offset(-10, 0),\r\n      })\r\n    );\r\n\r\n    gameData.addPlayer(user);\r\n    gameData.name = \"Test game\";\r\n\r\n    setGameData(gameData.clone());\r\n  }, [setGameData]);\r\n\r\n  const changeGameName = useCallback(\r\n    (e) => {\r\n      gameData.name = e.target.value;\r\n      setGameData(gameData.clone());\r\n    },\r\n    [gameData, setGameData]\r\n  );\r\n\r\n  const createGameCallBack = useCallback(() => {\r\n    (async () => {\r\n      try {\r\n        const response = await createGame(gameData);\r\n        gameData.id = response.data.gameId;\r\n        setGameData(gameData.clone());\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    })();\r\n  }, [gameData, setGameData]);\r\n\r\n  if (gameData.id) {\r\n    return (\r\n      <Redirect\r\n        to={{ pathname: `/game/${gameData.id}`, state: { from: location } }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TooltipContainer>\r\n        <TooltipHeader>\r\n          Create game\r\n          <LinkInline to=\"/\">\r\n            <CloseButton />\r\n          </LinkInline>\r\n        </TooltipHeader>\r\n\r\n        <InputAndLabel\r\n          placeholder=\"name\"\r\n          value={gameData.name}\r\n          onChange={changeGameName}\r\n          error={!gameData.name ? \"Name is required\" : false}\r\n        />\r\n\r\n        <Slots gameData={gameData} />\r\n        <Button buttonStyle=\"button-grey\" onClick={createGameCallBack}>\r\n          Create game\r\n        </Button>\r\n      </TooltipContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateGame;\r\n","import CreateGame from \"./CreateGame\";\r\n\r\nexport default CreateGame;\r\n","import React, { useCallback, useContext, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Link,\r\n  TooltipContainer,\r\n  TooltipHeader,\r\n  Section,\r\n  Label,\r\n  Value,\r\n  TooltipValue,\r\n} from \"../../styled\";\r\nimport { createTestGameGame } from \"../../api/game\";\r\nimport { StateStore } from \"../../state/StoreProvider\";\r\nimport { LinkInline } from \"../../styled/Link\";\r\nimport styled from \"styled-components\";\r\n\r\nconst GameIdContainer = styled.div`\r\n  margin: 8px;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst Home = () => {\r\n  const { currentUser } = useContext(StateStore);\r\n  const [gameId, setGameId] = useState(null);\r\n\r\n  const createGame = useCallback(() => {\r\n    const callApi = async () => {\r\n      const response = await createTestGameGame();\r\n      console.log(response);\r\n      setGameId(response.data.gameId);\r\n    };\r\n\r\n    callApi();\r\n  }, [setGameId, createTestGameGame]);\r\n\r\n  return (\r\n    <TooltipContainer>\r\n      <TooltipHeader>Home</TooltipHeader>\r\n\r\n      {currentUser && (currentUser.id === 1 || currentUser.id === 2) && (\r\n        <Button type=\"button\" buttonStyle=\"button-grey\" onClick={createGame}>\r\n          Create test game\r\n        </Button>\r\n      )}\r\n\r\n      {gameId && (\r\n        <GameIdContainer>\r\n          <Label>Game created:</Label>\r\n          <Value>\r\n            <LinkInline to={`/game/${gameId}`}>{`/game/${gameId}`}</LinkInline>\r\n          </Value>\r\n        </GameIdContainer>\r\n      )}\r\n    </TooltipContainer>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import Home from \"./Home\";\r\n\r\nexport default Home;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { getCurrentUser } from \"../../state/actions\";\r\nimport { login as loginUser } from \"../../api/user\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  Title,\r\n  InputAndLabel,\r\n  PanelContainer,\r\n  Button,\r\n  Section,\r\n  Link,\r\n  TooltipContainer,\r\n  TooltipHeader,\r\n  Cell50,\r\n  Error,\r\n  Label,\r\n  Value,\r\n} from \"../../styled\";\r\nimport { StateStore, DispatchStore } from \"../../state/StoreProvider\";\r\n\r\nconst ErrorContainer = styled.div`\r\n  margin: 0 8px 8px 8px;\r\n`;\r\n\r\nconst Login = ({ className }) => {\r\n  const dispatch = useContext(DispatchStore);\r\n  const { currentUser } = useContext(StateStore);\r\n  const [error, setError] = useState(null);\r\n\r\n  const onSubmit = async (values, { setSubmitting }) => {\r\n    try {\r\n      await loginUser(values.username, values.password);\r\n      await getCurrentUser(dispatch);\r\n      setSubmitting(false);\r\n    } catch (e) {\r\n      if (e.status === 401) {\r\n        setError(\"Wrong password or user not found.\");\r\n      }\r\n    }\r\n\r\n    setSubmitting(false);\r\n  };\r\n\r\n  if (currentUser) {\r\n    return (\r\n      <TooltipContainer>\r\n        <TooltipHeader>\r\n          You are logged in as <Value>{currentUser.username}</Value>\r\n        </TooltipHeader>\r\n\r\n        <Link to=\"/logout\">\r\n          <Button buttonStyle=\"button-grey\">Log out</Button>\r\n        </Link>\r\n      </TooltipContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{ username: \"\", password: \"\" }}\r\n      onSubmit={onSubmit}\r\n      validationSchema={Yup.object().shape({\r\n        username: Yup.string().required(\"Required\"),\r\n        password: Yup.string().required(\"Required\"),\r\n      })}\r\n    >\r\n      {(props) => {\r\n        const {\r\n          values,\r\n          touched,\r\n          errors,\r\n          isSubmitting,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n        } = props;\r\n\r\n        const wrappedHandleChange = (event) => {\r\n          setError(null);\r\n          handleChange(event);\r\n        };\r\n\r\n        return (\r\n          <TooltipContainer\r\n            className={className}\r\n            as=\"form\"\r\n            onSubmit={handleSubmit}\r\n          >\r\n            <TooltipHeader>Login</TooltipHeader>\r\n            <Section>\r\n              <Cell50>\r\n                <InputAndLabel\r\n                  label=\"Username\"\r\n                  id=\"username\"\r\n                  placeholder=\"Username\"\r\n                  value={values.username}\r\n                  onChange={wrappedHandleChange}\r\n                  onBlur={handleBlur}\r\n                  error={touched.username && errors.username}\r\n                />\r\n              </Cell50>\r\n              <Cell50>\r\n                <InputAndLabel\r\n                  label=\"Password\"\r\n                  id=\"password\"\r\n                  placeholder=\"Password\"\r\n                  value={values.password}\r\n                  onChange={wrappedHandleChange}\r\n                  onBlur={handleBlur}\r\n                  error={touched.password && errors.password}\r\n                  type=\"password\"\r\n                />\r\n              </Cell50>\r\n            </Section>\r\n\r\n            {error && (\r\n              <ErrorContainer>\r\n                <Error>{error}</Error>\r\n              </ErrorContainer>\r\n            )}\r\n            <Section>\r\n              <Button\r\n                buttonStyle=\"button-grey\"\r\n                type=\"submit\"\r\n                disabled={isSubmitting || Object.entries(errors).length !== 0}\r\n              >\r\n                Login\r\n              </Button>\r\n              <Button\r\n                buttonStyle=\"button-grey\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n\r\n                  alert(\"not implemented\");\r\n                }}\r\n              >\r\n                Register\r\n              </Button>\r\n            </Section>\r\n          </TooltipContainer>\r\n        );\r\n      }}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport HomeSceneComponent from \"./HomeSceneComponent\";\r\nimport { Router, Route } from \"react-router-dom\";\r\nimport { PrivateRoute } from \"../../Router\";\r\nimport CreateGame from \"../createGame\";\r\nimport Home from \"../home\";\r\nimport Login from \"../login/Login\";\r\n\r\nconst Logo = styled.div`\r\n  height: 58px;\r\n  width: 412px;\r\n  background-image: url(img/coldvoid.png);\r\n  position: absolute;\r\n  top: 45px;\r\n  left: 30px;\r\n  opacity: 0.8;\r\n  z-index: -1;\r\n`;\r\n\r\nexport const SuperContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  flex-wrap: wrap-reverse;\r\n  margin: 5px;\r\n`;\r\n\r\nexport const ContainerLeft = styled.div`\r\n  width: 40%;\r\n  min-width: 800px;\r\n  margin: 5px;\r\n`;\r\n\r\nexport const ContainerRight = styled.div`\r\n  width: 21%;\r\n  min-width: 200px;\r\n  margin: 5px;\r\n`;\r\n\r\nexport const BaseView = () => {\r\n  return (\r\n    <>\r\n      <Logo />\r\n      <HomeSceneComponent />\r\n      <SuperContainer>\r\n        <ContainerLeft>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <PrivateRoute exact path=\"/createGame\" component={CreateGame} />\r\n        </ContainerLeft>\r\n        <ContainerRight>\r\n          <Login />\r\n        </ContainerRight>\r\n      </SuperContainer>\r\n    </>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GameData from \"../../../../../model/game/GameData\";\r\nimport LobbySlots from \"./LobbySlots\";\r\nimport FleetStore from \"./FleetStore\";\r\nimport shipClasses from \"../../../../../model/unit/ships\";\r\n\r\nimport {\r\n  Title,\r\n  PanelContainer,\r\n  Section,\r\n  TooltipContainer,\r\n  TooltipHeader,\r\n} from \"../../../../styled\";\r\nimport { SuperContainer } from \"../../../baseView\";\r\n\r\nconst LobbyContainer = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n  top: 5px;\r\n  max-height: calc(100vh - 40px);\r\n  left: calc(50vw - 400px);\r\n  right: 5px;\r\n  bottom: 5px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst ContainerLeft = styled.div`\r\n  width: 50%;\r\n  min-width: 800px;\r\n  margin: 5px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst ContainerRight = styled.div`\r\n  width: 50%;\r\n  min-width: 200px;\r\n  margin: 5px;\r\n  z-index: 3;\r\n`;\r\n\r\nclass Lobby extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedSlot: null,\r\n      ships: [],\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let { gameData, currentUser } = nextProps;\r\n    if (!gameData) {\r\n      return prevState;\r\n    }\r\n\r\n    gameData = new GameData(gameData);\r\n\r\n    if (!prevState.selectedSlot) {\r\n      const selectedSlot =\r\n        gameData.slots\r\n          .getSlots()\r\n          .find((slot) => slot.isOccupiedBy(currentUser)) || null;\r\n\r\n      const ships = selectedSlot ? selectedSlot.getShips() : [];\r\n      return {\r\n        ...prevState,\r\n        selectedSlot,\r\n        ships,\r\n      };\r\n    }\r\n\r\n    return prevState;\r\n  }\r\n\r\n  selectSlot() {}\r\n\r\n  buyShip(shipClass) {\r\n    const ship = new shipClasses[shipClass]();\r\n    const { selectedSlot, ships } = this.state;\r\n\r\n    if (!selectedSlot) {\r\n      return;\r\n    }\r\n\r\n    const totalCost = [...ships, ship].reduce(\r\n      (acc, ship) => acc + ship.getPointCost(),\r\n      0\r\n    );\r\n\r\n    if (totalCost > selectedSlot.points) {\r\n      alert(\"Too costly\");\r\n      return;\r\n    }\r\n\r\n    this.setState({ ships: [...ships, ship] });\r\n  }\r\n\r\n  onReady() {\r\n    const { uiState } = this.props;\r\n    const { selectedSlot, ships } = this.state;\r\n    uiState.customEvent(\"buyShips\", { slot: selectedSlot, ships });\r\n  }\r\n\r\n  render() {\r\n    let { uiState, gameData, currentUser, game } = this.props;\r\n\r\n    const { selectedSlot, ships } = this.state;\r\n\r\n    if (!gameData) {\r\n      return null;\r\n    }\r\n\r\n    gameData = new GameData(gameData);\r\n\r\n    return (\r\n      <LobbyContainer>\r\n        <ContainerLeft>\r\n          <TooltipContainer>\r\n            <TooltipHeader>GAME: {gameData.name}</TooltipHeader>\r\n            <LobbySlots\r\n              gameData={gameData}\r\n              edit={false}\r\n              currentUser={currentUser}\r\n              take={true}\r\n              select={true}\r\n              selectedSlot={selectedSlot}\r\n              game={game}\r\n              ships={ships}\r\n              uiState={uiState}\r\n              onReady={this.onReady.bind(this)}\r\n            />\r\n          </TooltipContainer>\r\n        </ContainerLeft>\r\n        <ContainerRight>\r\n          <TooltipContainer>\r\n            <TooltipHeader>Buy your fleet</TooltipHeader>\r\n            <FleetStore uiState={uiState} buyShip={this.buyShip.bind(this)} />\r\n          </TooltipContainer>\r\n        </ContainerRight>\r\n      </LobbyContainer>\r\n    );\r\n  }\r\n}\r\n\r\n/*\r\n\r\n      <LobbyContainer>\r\n        <Section>\r\n          <div>\r\n            <Title>GAME: '{gameData.name}'</Title>\r\n            <Title>Take a slot and buy ships</Title>\r\n            <LobbySlots\r\n              gameData={gameData}\r\n              edit={false}\r\n              currentUser={currentUser}\r\n              take={true}\r\n              select={true}\r\n              selectedSlot={selectedSlot}\r\n              game={game}\r\n              ships={ships}\r\n              uiState={uiState}\r\n              onReady={this.onReady.bind(this)}\r\n            />\r\n          </div>\r\n          <FleetStore uiState={uiState} buyShip={this.buyShip.bind(this)} />\r\n        </Section>\r\n      </LobbyContainer>\r\n\r\n      */\r\nexport default Lobby;\r\n","import Lobby from \"./Lobby\";\r\n\r\nexport default Lobby;\r\n","import ShipTooltip from \"./ShipTooltip\";\r\n\r\nexport default ShipTooltip;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  ContainerRoundedRightBottom,\r\n  Title,\r\n  icons,\r\n  SectionRight,\r\n  Section,\r\n  colors,\r\n  TooltipButton,\r\n} from \"../../../styled\";\r\nimport * as gamePhases from \"../../../../model/game/gamePhases\";\r\n\r\nconst TurnHeaderContainer = styled.div`\r\n  position: absolute;\r\n  top: -1px;\r\n  left: -1px;\r\n  padding-right: 10px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst ReadySection = styled(SectionRight)`\r\n  align-items: center;\r\n`;\r\n\r\nconst ReadyContainer = styled.div`\r\n  ${(props) => (props.ready ? \"cursor:pointer;\" : \"cursor:not-allowed;\")}\r\n`;\r\n\r\nclass TurnHeader extends React.PureComponent {\r\n  onReady() {\r\n    const { uiState, ready } = this.props;\r\n\r\n    if (!ready) {\r\n      return;\r\n    }\r\n\r\n    uiState.commitTurn();\r\n  }\r\n\r\n  render() {\r\n    const { gameData, ready, waiting } = this.props;\r\n    return (\r\n      <TurnHeaderContainer>\r\n        <Section>\r\n          <Title>\r\n            {`TURN: ${gameData.turn}`}{\" \"}\r\n            {gameData.phase === gamePhases.DEPLOYMENT && \"DEPLOYMENT\"}\r\n            {waiting && \" Waiting\"}\r\n          </Title>\r\n          {!waiting && ready && (\r\n            <ReadySection>\r\n              <TooltipButton onClick={this.onReady.bind(this)}>\r\n                <icons.CheckMark />\r\n              </TooltipButton>\r\n            </ReadySection>\r\n          )}\r\n        </Section>\r\n      </TurnHeaderContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TurnHeader;\r\n","import * as React from \"react\";\nimport styled, { css } from \"styled-components\";\n\nconst Container = styled.div`\n  position: absolute;\n  left: 50%;\n  bottom: 125px;\n  opacity: 0.85;\n  user-select: none;\n  z-index: 3;\n`;\n\nconst Text = css`\n  color: white;\n  font-family: arial;\n  font-size: 16px;\n  text-transform: uppercase;\n`;\n\nconst TextContainer = styled.div`\n  ${Text}\n  position: absolute;\n  width: 600px;\n  left: calc(50% - 300px);\n  bottom: 0;\n  padding: 2px 0;\n  /* background-color: rgba(0, 0, 0, 0.5); */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-shadow: black 0px 0px 13px, black 0px 0px 13px, black 0px 0px 13px;\n  cursor: default;\n`;\n\nconst Power = styled.div`\n  ${Text}\n  font-size: 36px;\n  font-weight: bold;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  width: 50px;\n  height: 60px;\n  left: -25px;\n  bottom: -30px;\n`;\n\nconst TextRow = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin: 5px 0 0 0;\n\n  div {\n    padding: 0 5px;\n    white-space: nowrap;\n  }\n`;\n\nconst TextRowSmall = styled(TextRow)`\n  font-size: 14px;\n  text-transform: none;\n`;\n\nclass Movement extends React.Component {\n  render() {\n    const { ship, children, ui = true } = this.props;\n\n    return (\n      <>\n        <Container id=\"shipMovementActual\">{children}</Container>\n      </>\n    );\n  }\n}\n\nexport default Movement;\n","import styled, { css } from \"styled-components\";\nimport { Clickable } from \"../../../../styled\";\n\nconst Container = styled.div`\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 0.5;\n\n  svg #svg-path {\n    fill: white;\n    ${props => props.overChannel && \"fill:#4c7ca8;\"}\n    ${props => props.disabled && \"fill: #8f2626;\"}\n  }\n  ${Clickable}\n\n  ${props =>\n    props.active &&\n    css`\n      animation: blinker 1s linear infinite;\n\n      @keyframes blinker {\n        50% {\n          opacity: 0;\n        }\n      }\n    `}\n`;\n\nexport default Container;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Arrow } from \"../../../../styled/icon\";\nimport {\n  getPointInDirection,\n  hexFacingToAngle\n} from \"../../../../../model/utils/math\";\n\nimport Container from \"./Container\";\n\nconst ButtonContainer = styled(Container)`\n\n  ${props => `transform: rotate(${props.direction + 90}deg);`}\n\n  ${props => `left: calc(${props.x}px - 16px);`}\n  ${props => `top: calc(${props.y}px - 16px);`}\n`;\n\nclass ThrustButton extends React.Component {\n  getPosition(direction) {\n    return getPointInDirection(75, -hexFacingToAngle(direction), 0, 0);\n  }\n\n  canThrust() {\n    const { ship, movementService, direction } = this.props;\n    return movementService.canThrust(ship, direction);\n  }\n\n  thrust(can) {\n    if (!can) {\n      return;\n    }\n\n    const { ship, movementService, direction } = this.props;\n    return movementService.thrust(ship, direction);\n  }\n\n  render() {\n    const { direction } = this.props;\n\n    const can = this.canThrust();\n    const { overChannel } = can;\n\n    return (\n      <ButtonContainer\n        overChannel={overChannel}\n        disabled={!can}\n        direction={hexFacingToAngle(direction)}\n        onClick={this.thrust.bind(this, can)}\n        {...this.getPosition(direction)}\n      >\n        <Arrow />\n      </ButtonContainer>\n    );\n  }\n}\n\nexport default ThrustButton;\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Clickable } from \"../../../../styled\";\r\nimport { Cancel } from \"../../../../styled/icon\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  width: 32px;\r\n  height: 32px;\r\n  left: 125px;\r\n  top: 53px;\r\n  ${Clickable}\r\n`;\r\n\r\nclass RevertButton extends React.Component {\r\n  canRevert() {\r\n    const { movementService, ship } = this.props;\r\n    return movementService.canRevert(ship);\r\n  }\r\n\r\n  revert() {\r\n    const { movementService, ship } = this.props;\r\n    return movementService.revert(ship);\r\n  }\r\n\r\n  render() {\r\n    if (!this.canRevert()) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Container onClick={this.revert.bind(this)}>\r\n        <Cancel />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RevertButton;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { X } from \"../../../../styled/icon\";\r\nimport Container from \"./Container\";\r\n\r\nconst ButtonContainer = styled(Container)`\r\n  left: -175px;\r\n  top: 53px;\r\n`;\r\n\r\nclass CancelButton extends React.Component {\r\n  canCancel() {\r\n    const { movementService, ship } = this.props;\r\n    return movementService.canCancel(ship);\r\n  }\r\n\r\n  cancel() {\r\n    const { movementService, ship } = this.props;\r\n    return movementService.cancel(ship);\r\n  }\r\n\r\n  render() {\r\n    if (!this.canCancel()) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <ButtonContainer onClick={this.cancel.bind(this)}>\r\n        <X />\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CancelButton;\r\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Pivot } from \"../../../../styled/icon\";\nimport Container from \"./Container\";\n\nconst ButtonContainer = styled(Container)`\n  left: 25px;\n  top: -16px;\n\n  ${props =>\n    props.pivotDirection === 1\n      ? \"left: -57px;\"\n      : \"transform: rotate(-180deg) scaleY(-1);\"};\n`;\n\nclass PivotButton extends React.Component {\n  canPivot() {\n    const { ship, movementService, pivotDirection } = this.props;\n    return movementService.canPivot(ship, pivotDirection);\n  }\n\n  pivot() {\n    const { ship, movementService, pivotDirection } = this.props;\n    if (!movementService.canPivot(ship, pivotDirection)) {\n      return;\n    }\n\n    return movementService.pivot(ship, pivotDirection);\n  }\n\n  render() {\n    const { pivotDirection } = this.props;\n\n    const can = this.canPivot();\n\n    return (\n      <ButtonContainer\n        pivotDirection={pivotDirection}\n        onClick={this.pivot.bind(this)}\n        disabled={!can}\n      >\n        <Pivot />\n      </ButtonContainer>\n    );\n  }\n}\n\nexport default PivotButton;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Clickable } from \"../../../../styled\";\nimport { Roll } from \"../../../../styled/icon\";\nimport Container from \"./Container\";\n\nconst RollContainer = styled(Container)`\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  left: -16px;\n  top: -65px;\n  ${Clickable}\n`;\n\nclass RollButton extends React.Component {\n  canRoll() {\n    const { movementService, ship } = this.props;\n    return movementService.canRoll(ship);\n  }\n\n  roll() {\n    const { movementService, ship } = this.props;\n    if (!movementService.canRoll(ship)) {\n      return;\n    }\n\n    return movementService.roll(ship);\n  }\n\n  render() {\n    const { ship } = this.props;\n    return (\n      <RollContainer\n        active={ship.movement.isRolling()}\n        onClick={this.roll.bind(this)}\n        disabled={!this.canRoll()}\n      >\n        <Roll />\n      </RollContainer>\n    );\n  }\n}\n\nexport default RollButton;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Clickable } from \"../../../../styled\";\nimport { Evade } from \"../../../../styled/icon\";\nimport Container from \"./Container\";\n\nconst EvadeContainer = styled(Container)`\n  position: absolute;\n  width: 26px;\n  height: 26px;\n  left: -13px;\n  top: 28px;\n  ${Clickable}\n`;\n\nconst RotatedContainer = styled(EvadeContainer)`\n  transform: rotate(180deg);\n  top: 79px;\n`;\n\nconst Evasion = styled.div`\n  color: white;\n  font-family: arial;\n  font-size: 24px;\n  text-transform: uppercase;\n  font-weight: bold;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  width: 50px;\n  height: 20px;\n  left: -25px;\n  top: 57px;\n`;\n\nclass EvadeButton extends React.Component {\n  canEvade(step) {\n    const { movementService, ship } = this.props;\n    return movementService.canEvade(ship, step);\n  }\n\n  evade(step) {\n    const { movementService, ship } = this.props;\n    if (!movementService.canEvade(ship, step)) {\n      return;\n    }\n\n    return movementService.evade(ship, step);\n  }\n\n  render() {\n    const { ship } = this.props;\n    const canMore = this.canEvade(1);\n    const canLess = this.canEvade(-1);\n    return (\n      <>\n        <EvadeContainer\n          key=\"evade-more\"\n          onClick={this.evade.bind(this, 1)}\n          disabled={!canMore}\n        >\n          <Evade />\n        </EvadeContainer>\n\n        <Evasion>{ship.movement.getEvasion()}</Evasion>\n        <RotatedContainer\n          key=\"evade-less\"\n          onClick={this.evade.bind(this, -1)}\n          disabled={!canLess}\n        >\n          <Evade />\n        </RotatedContainer>\n      </>\n    );\n  }\n}\n\nexport default EvadeButton;\n","import * as React from \"react\";\r\nimport Movement from \"./Movement\";\r\nimport ThrustButton from \"./ThrustButton\";\r\nimport RevertButton from \"./RevertButton\";\r\nimport CancelButton from \"./CancelButton\";\r\nimport PivotButton from \"./PivotButton\";\r\nimport RollButton from \"./RollButton\";\r\nimport EvadeButton from \"./EvadeButton\";\r\n\r\nclass GameMovement extends React.PureComponent {\r\n  render() {\r\n    const { ship, movementService, ...rest } = this.props;\r\n\r\n    return (\r\n      <Movement ship={ship} movementService={movementService} {...rest}>\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={0}\r\n        />\r\n\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={1}\r\n        />\r\n\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={2}\r\n        />\r\n\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={3}\r\n        />\r\n\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={4}\r\n        />\r\n\r\n        <ThrustButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          direction={5}\r\n        />\r\n\r\n        <RevertButton ship={ship} movementService={movementService} />\r\n\r\n        <CancelButton ship={ship} movementService={movementService} />\r\n\r\n        <PivotButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          pivotDirection={-1}\r\n        />\r\n\r\n        <PivotButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          pivotDirection={1}\r\n        />\r\n\r\n        <RollButton ship={ship} movementService={movementService} />\r\n\r\n        <EvadeButton ship={ship} movementService={movementService} />\r\n      </Movement>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameMovement;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Pivot } from \"../../../../styled/icon\";\r\nimport Container from \"./Container\";\r\n\r\nconst ButtonContainer = styled(Container)`\r\n  left: 125px;\r\n  top: 103px;\r\n\r\n  ${props =>\r\n    props.pivotDirection === 1\r\n      ? \"left: -175px; transform: rotate(-90deg);\"\r\n      : \"transform: rotate(-90deg) scaleY(-1);\"}\r\n`;\r\n\r\nclass DeploymentPivotButton extends React.Component {\r\n  pivot() {\r\n    const { ship, movementService, pivotDirection } = this.props;\r\n    return movementService.doDeploymentTurn(ship, pivotDirection);\r\n  }\r\n\r\n  render() {\r\n    const { pivotDirection } = this.props;\r\n\r\n    return (\r\n      <ButtonContainer\r\n        pivotDirection={pivotDirection}\r\n        onClick={this.pivot.bind(this)}\r\n      >\r\n        <Pivot />\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeploymentPivotButton;\r\n","import * as React from \"react\";\r\nimport Movement from \"./Movement\";\r\nimport DeploymentPivotButton from \"./DeploymentPivotButton\";\r\n\r\nclass DeploymentMovementButtons extends React.PureComponent {\r\n  render() {\r\n    const { ship, movementService, ...rest } = this.props;\r\n\r\n    return (\r\n      <Movement\r\n        ship={ship}\r\n        movementService={movementService}\r\n        ui={false}\r\n        {...rest}\r\n      >\r\n        <DeploymentPivotButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          pivotDirection={-1}\r\n        />\r\n\r\n        <DeploymentPivotButton\r\n          ship={ship}\r\n          movementService={movementService}\r\n          pivotDirection={1}\r\n        />\r\n      </Movement>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeploymentMovementButtons;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport * as gameUiModes from \"./gameUiModes\";\r\nimport { TooltipMenu, TooltipButton } from \"../../../styled\";\r\nimport { Replay } from \"../../../styled/icon\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 500px;\r\n  display: flex;\r\n  z-index: 3;\r\n`;\r\n\r\nconst ReplayButton = styled(TooltipButton)`\r\n  margin-left: 32px;\r\n`;\r\n\r\nclass GameUiModeButtons extends React.PureComponent {\r\n  render() {\r\n    const { ew, movement, weapons, enemy_weapons, uiState } = this.props;\r\n\r\n    return (\r\n      <Container>\r\n        <TooltipButton\r\n          selected={enemy_weapons}\r\n          img=\"/img/targetShip.png\"\r\n          onClick={() => uiState.toggleGameUiMode(gameUiModes.ENEMY_WEAPONS)}\r\n        />\r\n        <TooltipButton\r\n          selected={weapons}\r\n          img=\"/img/firing.png\"\r\n          onClick={() => uiState.toggleGameUiMode(gameUiModes.WEAPONS)}\r\n        />\r\n        <TooltipButton\r\n          selected={ew}\r\n          img=\"/img/addOEW.png\"\r\n          onClick={() => uiState.toggleGameUiMode(gameUiModes.EW)}\r\n        />\r\n        <TooltipButton\r\n          selected={movement}\r\n          img=\"/img/selectShip.png\"\r\n          onClick={() => uiState.toggleGameUiMode(gameUiModes.MOVEMENT)}\r\n        />\r\n        <ReplayButton onClick={() => uiState.startReplay()}>\r\n          <Replay />\r\n        </ReplayButton>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameUiModeButtons;\r\n","import * as React from \"react\";\nimport SystemIcon from \"./SystemIcon\";\n\nclass SystemList extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { ship, uiState, systems, ...rest } = this.props;\n\n    if (!ship) {\n      return null;\n    }\n\n    return systems.map(system => (\n      <SystemIcon\n        scs\n        uiState={uiState}\n        key={`system-list-${system.id}`}\n        system={system}\n        ship={ship}\n        {...rest}\n      />\n    ));\n  }\n}\n\nexport default SystemList;\n","import * as React from \"react\";\r\nimport OEWButtons from \"./OEWButtons\";\r\n\r\nclass EwList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { ship, uiState, ewList, selectedShip } = this.props;\r\n\r\n    const { gameData } = uiState;\r\n    if (!ship) {\r\n      return null;\r\n    }\r\n\r\n    return ewList.map((entry, index) => {\r\n      const target = gameData.ships.getShipById(entry.targetShipId);\r\n      return (\r\n        <OEWButtons\r\n          highlight\r\n          name={target.name}\r\n          uiState={uiState}\r\n          key={`ew-list-${index}`}\r\n          ship={selectedShip}\r\n          target={target}\r\n          oew={selectedShip.electronicWarfare.getOffensiveEw(\r\n            entry.targetShipId\r\n          )}\r\n        />\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nexport default EwList;\r\n","import * as React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport SystemList from \"../system/SystemList\";\r\nimport EwList from \"../electronicWarfare/EwList\";\r\nimport CCEWButtons from \"../electronicWarfare/CCEWButtons\";\r\nimport GameShipTooltipMenu from \"../shipTooltip/GameShipTooltipMenu\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: calc(50% - 100px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 3;\r\n`;\r\n\r\nconst SubContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap-reverse;\r\n`;\r\n\r\nclass LeftPanel extends React.PureComponent {\r\n  render() {\r\n    const { uiState, systemList, ewList, ...rest } = this.props;\r\n\r\n    if (!uiState.state.selectedShip) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Container>\r\n        <SubContainer>\r\n          {ewList && (\r\n            <EwList\r\n              ship={uiState.state.selectedShip}\r\n              uiState={uiState}\r\n              ewList={ewList}\r\n              {...rest}\r\n            />\r\n          )}\r\n        </SubContainer>\r\n        <GameShipTooltipMenu\r\n          ship={uiState.state.selectedShip}\r\n          uiState={uiState}\r\n          {...rest}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftPanel;\r\n","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TooltipButton, Button } from \"../../../../styled\";\r\nimport { Pause, Play, X } from \"../../../../styled/icon\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 500px;\r\n  display: flex;\r\n  z-index: 3;\r\n`;\r\n\r\nconst RotatedButton = styled(TooltipButton)`\r\n  transform: rotate(180deg);\r\n`;\r\n\r\nclass ReplayUi extends React.PureComponent {\r\n  render() {\r\n    const { uiState, replayContext } = this.props;\r\n\r\n    return (\r\n      <Container>\r\n        <Button onClick={() => replayContext.rewindToFiring()}>Firing</Button>\r\n\r\n        <RotatedButton onClick={() => replayContext.resumeReplayRewind()}>\r\n          <Play />\r\n        </RotatedButton>\r\n        <TooltipButton onClick={() => replayContext.pauseReplay()}>\r\n          <Pause />\r\n        </TooltipButton>\r\n        <TooltipButton onClick={() => replayContext.resumeReplay()}>\r\n          <Play />\r\n        </TooltipButton>\r\n        <TooltipButton onClick={() => uiState.closeReplay()}>\r\n          <X />\r\n        </TooltipButton>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReplayUi;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Highlight = styled.span`\r\n  color: #6daaff;\r\n`;\r\n\r\nexport const DangerHighlight = styled.span`\r\n  color: #db4949;\r\n  font-weight: bold;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Highlight, DangerHighlight } from \"./styled\";\r\n\r\nconst HitChanceContainer = styled.div`\r\n  margin-left: 5px;\r\n`;\r\n\r\nclass HitChance extends React.Component {\r\n  render() {\r\n    const { resolution, totalShots, shotsHit } = this.props;\r\n\r\n    return (\r\n      <HitChanceContainer>\r\n        Change to hit: <Highlight>{resolution.hitChance.result}</Highlight>. Hit\r\n        roll: <Highlight>{resolution.hitRoll}</Highlight>.\r\n        {resolution.result ? (\r\n          <Highlight>\r\n            <b>{` ${shotsHit}/${totalShots} Hit!`}</b>\r\n          </Highlight>\r\n        ) : (\r\n          <DangerHighlight>\r\n            <b> Miss!</b>\r\n          </DangerHighlight>\r\n        )}\r\n      </HitChanceContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HitChance;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Highlight, DangerHighlight } from \"./styled\";\r\n\r\nconst DamageContainer = styled.div``;\r\n\r\nclass DamageLine extends React.Component {\r\n  render() {\r\n    const { target, gameData, combatLogEntry } = this.props;\r\n\r\n    const damages = combatLogEntry.getDamages(target);\r\n    const systemsDestroyed = combatLogEntry.getDestroyedSystems(target);\r\n\r\n    const totalDamage = damages.reduce((total, current) => {\r\n      return total + current.amount;\r\n    }, 0);\r\n\r\n    const totalArmor = damages.reduce((total, current) => {\r\n      return total + current.armor;\r\n    }, 0);\r\n\r\n    return (\r\n      <DamageContainer>\r\n        Damage caused: <DangerHighlight>{totalDamage}</DangerHighlight>.\r\n        Mitigated by armor <Highlight>{totalArmor}</Highlight>.\r\n        {systemsDestroyed.length > 0 && (\r\n          <>\r\n            {\" \"}\r\n            Systems destroyed:{\" \"}\r\n            <DangerHighlight>\r\n              {systemsDestroyed\r\n                .map(system => system.getDisplayName())\r\n                .join(\", \")}\r\n            </DangerHighlight>\r\n          </>\r\n        )}\r\n      </DamageContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DamageLine;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport HitChance from \"./HitChance\";\r\nimport { Highlight, DangerHighlight } from \"./styled\";\r\nimport DamageLine from \"./DamageLine\";\r\nimport CombatLogWeaponFire from \"../../../../../model/combatLog/CombatLogWeaponFire.mjs\";\r\nimport WeaponFireService from \"../../../../../model/weapon/WeaponFireService.mjs\";\r\nimport CombatLogTorpedoAttack from \"../../../../../model/combatLog/CombatLogTorpedoAttack.mjs\";\r\n\r\nconst LineContainer = styled.div`\r\n  color: #d6d6d6;\r\n  font-family: arial;\r\n  font-size: 12px;\r\n  padding: 8px 8px 8px 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-bottom: 1px dashed gray;\r\n`;\r\n\r\nconst SubLine = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst IndentedSubline = styled(SubLine)`\r\n  margin-left: 50px;\r\n  margin-top: 4px;\r\n`;\r\n\r\nclass CombatLogLine extends React.Component {\r\n  getTorpedoAttackLine() {\r\n    const { combatLogEntry, gameData, replayContext } = this.props;\r\n\r\n    const target = gameData.ships.getShipById(combatLogEntry.targetId);\r\n    const flight = gameData.torpedos.getTorpedoFlightById(\r\n      combatLogEntry.torpedoFlightId\r\n    );\r\n\r\n    const targetName = target.name.trim();\r\n\r\n    return (\r\n      <LineContainer>\r\n        <SubLine>\r\n          <DangerHighlight>TORPEDO STRIKE:&nbsp;</DangerHighlight>\r\n          <Highlight>&nbsp;{flight.torpedo.getDisplayName()}&nbsp;</Highlight>\r\n          strikes {targetName}\r\n        </SubLine>\r\n        {combatLogEntry.notes.length > 0 && (\r\n          <IndentedSubline>{combatLogEntry.notes.join(\". \")}</IndentedSubline>\r\n        )}\r\n        {combatLogEntry.damages.length > 0 && (\r\n          <IndentedSubline>\r\n            <DamageLine\r\n              target={target}\r\n              gameData={gameData}\r\n              combatLogEntry={combatLogEntry}\r\n            />\r\n          </IndentedSubline>\r\n        )}\r\n      </LineContainer>\r\n    );\r\n  }\r\n\r\n  getWeaponFireLine() {\r\n    const { combatLogEntry, gameData, replayContext } = this.props;\r\n\r\n    const weaponFireService = new WeaponFireService().update(gameData);\r\n    const fireOrder = weaponFireService.getFireOrderById(\r\n      combatLogEntry.fireOrderId\r\n    );\r\n\r\n    const target = gameData.ships.getShipById(fireOrder.targetId);\r\n    const shooter = gameData.ships.getShipById(fireOrder.shooterId);\r\n    const weapon = shooter.systems.getSystemById(fireOrder.weaponId);\r\n\r\n    const hit = combatLogEntry.hitResult.result;\r\n    const shooterName = shooter.name.trim();\r\n    const targetName = target.name.trim();\r\n    const weaponName = weapon.getDisplayName();\r\n\r\n    return (\r\n      <LineContainer>\r\n        <SubLine>\r\n          <DangerHighlight>FIRE:&nbsp;</DangerHighlight>\r\n          {shooterName} fires{\" \"}\r\n          <Highlight>\r\n            &nbsp;{weaponName}&nbsp;\r\n            {combatLogEntry.ammoName && `(${combatLogEntry.ammoName})`}&nbsp;\r\n          </Highlight>{\" \"}\r\n          at {targetName}.\r\n          <HitChance\r\n            resolution={combatLogEntry.hitResult}\r\n            totalShots={combatLogEntry.totalShots}\r\n            shotsHit={combatLogEntry.shotsHit}\r\n          />\r\n        </SubLine>\r\n        {combatLogEntry.notes.length > 0 && (\r\n          <IndentedSubline>{combatLogEntry.notes.join(\" \")}</IndentedSubline>\r\n        )}\r\n        {hit && (\r\n          <IndentedSubline>\r\n            <DamageLine\r\n              target={target}\r\n              gameData={gameData}\r\n              combatLogEntry={combatLogEntry}\r\n            />\r\n          </IndentedSubline>\r\n        )}\r\n      </LineContainer>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { combatLogEntry } = this.props;\r\n\r\n    if (combatLogEntry instanceof CombatLogWeaponFire) {\r\n      return this.getWeaponFireLine();\r\n    } else if (combatLogEntry instanceof CombatLogTorpedoAttack) {\r\n      return this.getTorpedoAttackLine();\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default CombatLogLine;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport CombatLogLine from \"./CombatLogLine\";\r\n\r\nconst LogContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  height: 150px;\r\n  width: 33%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  overflow-y: scroll;\r\n  padding-top: 8px;\r\n  z-index: 3;\r\n  scrollbar-width: 0;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 0;\r\n  }\r\n`;\r\n\r\nclass CombatLog extends React.Component {\r\n  render() {\r\n    const { replayContext, gameData, log } = this.props;\r\n\r\n    return (\r\n      <LogContainer>\r\n        {log.map((logEntry, i) => (\r\n          <CombatLogLine\r\n            gameData={gameData}\r\n            replayContext={replayContext}\r\n            key={`combatlog-line-${i}`}\r\n            combatLogEntry={logEntry}\r\n          />\r\n        ))}\r\n      </LogContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CombatLog;\r\n","import React, { useMemo, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport GamePositionComponent from \"../GamePositionComponent\";\r\nimport { Tooltip, IconAndLabel } from \"../../../../styled\";\r\nimport TorpedoMovementService from \"../../../../../model/movement/TorpedoMovementService.mjs\";\r\nimport GameData from \"../../../../../model/game/GameData.mjs\";\r\nimport coordinateConverter from \"../../../../../model/utils/CoordinateConverter.mjs\";\r\n\r\nconst ShipBadgeContainer = styled.div`\r\n  text-align: left;\r\n  position: relative;\r\n  z-index: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  color: white;\r\n  font-family: arial;\r\n  margin-left: -50%;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst DewBadge = styled(IconAndLabel)`\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 0 1px;\r\n`;\r\n\r\nconst ShipName = styled.div`\r\n  /* background-color: rgba(0, 0, 0, 0.5);\r\n  padding: 3px 5px; */\r\n  margin-right: 5px;\r\n`;\r\n\r\nconst BackgroundContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  align-items: center;\r\n  padding: 3px 5px;\r\n`;\r\n\r\nconst Icon = styled.div`\r\n  width: 15px;\r\n  height: 15px;\r\n  background-size: cover;\r\n  background-color: transparent;\r\n  background-image: ${(props) => `url(${props.background})`};\r\n  margin: 0 3px 0 0;\r\n`;\r\n\r\nconst BadgeIconAndLabel = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  align-items: center;\r\n`;\r\n\r\nconst BadgeIcon = styled(BadgeIconAndLabel)`\r\n  ${Icon} {\r\n    margin: 0;\r\n  }\r\n`;\r\n\r\nconst Badges = styled.div`\r\n  display: flex;\r\n  hieght: 100%;\r\n\r\n  ${BadgeIconAndLabel} {\r\n    margin-left: 5px;\r\n\r\n    &:first-child {\r\n      margin-left: 0px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst WarningBadge = styled(BadgeIcon)`\r\n  animation: blinker 1s linear infinite;\r\n\r\n  @keyframes blinker {\r\n    50% {\r\n      opacity: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst getNumberOfMissilesImpacting = (ship, gameData) => {\r\n  const gameDataObject = new GameData(gameData);\r\n\r\n  return gameDataObject.torpedos\r\n    .getTorpedoFlights()\r\n    .filter((flight) => flight.targetId === ship.id).length;\r\n};\r\n\r\nconst ShipBadge = ({ icon, uiState, showName, visible }) => {\r\n  const { currentUser } = uiState.services;\r\n  const isMine = icon.ship.player.is(currentUser);\r\n\r\n  const getPosition = () =>\r\n    coordinateConverter.fromGameToViewPort(icon.getPosition());\r\n\r\n  const missiles = getNumberOfMissilesImpacting(\r\n    icon.ship,\r\n    uiState.state.gameData\r\n  );\r\n\r\n  const validPower = icon.ship.systems.power.isValidPower();\r\n\r\n  if (!isMine || (missiles === 0 && validPower)) {\r\n    visible = false;\r\n  }\r\n\r\n  const memoizedComponent = useMemo(\r\n    () =>\r\n      visible && (\r\n        <ShipBadgeContainer>\r\n          <BackgroundContainer>\r\n            {false && showName && <ShipName>{icon.ship.name}</ShipName>}\r\n\r\n            <Badges>\r\n              {isMine && missiles > 0 && (\r\n                <WarningBadge>\r\n                  <Icon background=\"/img/system/missile1.png\" />\r\n                  {missiles}\r\n                </WarningBadge>\r\n              )}\r\n\r\n              {isMine && !icon.ship.systems.power.isValidPower() && (\r\n                <WarningBadge>\r\n                  <Icon background=\"/img/offline.png\" />\r\n                </WarningBadge>\r\n              )}\r\n            </Badges>\r\n          </BackgroundContainer>\r\n        </ShipBadgeContainer>\r\n      ),\r\n    [visible, isMine, missiles, validPower]\r\n  );\r\n\r\n  return (\r\n    <GamePositionComponent\r\n      getPosition={getPosition}\r\n      uiState={uiState}\r\n      marginTop={0}\r\n      marginLeft={0}\r\n    >\r\n      {memoizedComponent}\r\n    </GamePositionComponent>\r\n  );\r\n};\r\n\r\nexport default ShipBadge;\r\n","import React, { useReducer } from \"react\";\r\n\r\nexport const GameStateStore = React.createContext({});\r\nexport const GameDispatchStore = React.createContext({});\r\n\r\nconst GameStoreProvider = ({ uiState, children }) => {\r\n  const [state, dispatch] = useReducer(\r\n    uiState.getReducer(),\r\n    uiState.getInitialState()\r\n  );\r\n\r\n  uiState.setDispatch(dispatch);\r\n\r\n  return (\r\n    <GameDispatchStore.Provider value={dispatch}>\r\n      <GameStateStore.Provider value={state}>\r\n        {children}\r\n      </GameStateStore.Provider>\r\n    </GameDispatchStore.Provider>\r\n  );\r\n};\r\n\r\nexport default GameStoreProvider;\r\n","import React, { useContext, useCallback, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ShipName from \"../ShipName\";\r\nimport {\r\n  TooltipContainer,\r\n  TooltipHeader,\r\n  TooltipValue,\r\n  TooltipValueHeader,\r\n  colors,\r\n  TooltipButton\r\n} from \"../../../../styled\";\r\nimport { StateStore } from \"../../../../state/StoreProvider\";\r\n\r\nconst Container = styled(TooltipContainer)`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 200px;\r\n  box-sizing: border-box;\r\n  text-align: left;\r\n  margin-top: 5px;\r\n  cursor: pointer;\r\n\r\n  :hover {\r\n    border: 1px solid\r\n      ${props => (props.isMine ? colors.lightBlue : colors.textDanger)};\r\n  }\r\n\r\n  &:first-child {\r\n    margin-top: 0;\r\n  }\r\n\r\n  ${props =>\r\n    props.isSelected &&\r\n    `background-color: ${colors.mediumBlue}; border: 1px solid ${colors.lightBlue};`}\r\n`;\r\n\r\nconst Header = styled(TooltipHeader)`\r\n  border-bottom: none;\r\n`;\r\n\r\nconst Fleet = styled(TooltipValueHeader)`\r\n  padding-left: 8px;\r\n`;\r\n\r\nexport default function ShipFleetBadge({ ship, uiState }) {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  const isMine = ship.player.isUsers(currentUser);\r\n\r\n  const selectedShip = uiState.getSelectedShip();\r\n  const isSelected = selectedShip && selectedShip.id === ship.id;\r\n\r\n  const scrollToShip = useCallback(() => {\r\n    const { gameCamera, shipIconContainer } = uiState.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n    gameCamera.setByLookAtPosition(icon.getPosition());\r\n    uiState.customEvent(\"shipClicked\", { entity: icon });\r\n  }, []);\r\n\r\n  const mouseOver = useCallback(() => {\r\n    const { shipIconContainer } = uiState.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n    uiState.customEvent(\"mouseOverShip\", { entity: icon });\r\n  }, []);\r\n\r\n  const mouseOut = useCallback(() => {\r\n    const { shipIconContainer } = uiState.services;\r\n    const icon = shipIconContainer.getByShip(ship);\r\n    uiState.customEvent(\"mouseOutShip\", { entity: icon });\r\n  }, []);\r\n\r\n  const Component = useMemo(() => {\r\n    return (\r\n      <Container\r\n        isMine={isMine}\r\n        onClick={scrollToShip}\r\n        onMouseOver={mouseOver}\r\n        onMouseOut={mouseOut}\r\n        isSelected={isSelected}\r\n      >\r\n        <Header>\r\n          <ShipName ship={ship} />\r\n        </Header>\r\n        <Fleet>Second fleet</Fleet>\r\n      </Container>\r\n    );\r\n  }, [isSelected]);\r\n\r\n  return Component;\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ShipFleetBadge from \"./ShipFleetBadge\";\r\nimport { StateStore } from \"../../../../state/StoreProvider\";\r\nimport GameData from \"../../../../../model/game/GameData.mjs\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 50px;\r\n  ${(props) => (props.right ? \"right: 10px;\" : \"left: 10px;\")}\r\n\r\n  z-index: 3;\r\n`;\r\n\r\nfunction ShipListActual({\r\n  uiState,\r\n  primary = [],\r\n  secondary = [],\r\n  right = false,\r\n}) {\r\n  return (\r\n    <Container right={right}>\r\n      {primary.map((ship) => (\r\n        <ShipFleetBadge\r\n          key={`ship-fleet-list-${ship.id}`}\r\n          ship={ship}\r\n          uiState={uiState}\r\n        />\r\n      ))}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default function ShipList({ gameData, uiState }) {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  if (!gameData) {\r\n    return null;\r\n  }\r\n\r\n  gameData = new GameData(gameData);\r\n\r\n  const myShips = gameData.ships\r\n    .getUsersShips(currentUser)\r\n    .filter((ship) => !ship.isDestroyed());\r\n\r\n  const alliedShips = gameData.ships\r\n    .getShipsInSameTeam(currentUser)\r\n    .filter((ship) => !ship.isDestroyed())\r\n    .filter((ship) => !myShips.includes(ship));\r\n\r\n  const enemyShips = gameData.ships\r\n    .getShipsEnemyTeams(currentUser)\r\n    .filter((ship) => !ship.isDestroyed());\r\n\r\n  return (\r\n    <>\r\n      {myShips.length > 0 && (\r\n        <ShipListActual\r\n          uiState={uiState}\r\n          primary={[...myShips]}\r\n          secondary={alliedShips}\r\n        />\r\n      )}\r\n      {myShips.length > 0 && (\r\n        <ShipListActual uiState={uiState} primary={[...enemyShips]} right />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport Lobby from \"./lobby\";\r\nimport ShipTooltip from \"../ui/shipTooltip\";\r\nimport TurnHeader from \"../ui/TurnHeader\";\r\nimport GameMovement from \"../ui/movement/GameMovement\";\r\nimport DeploymentMovement from \"../ui/movement/DeploymentMovement\";\r\nimport GameUiModeButtons from \"../ui/GameUiModeButtons\";\r\nimport LeftPanel from \"../ui/leftPanel/LeftPanel\";\r\nimport ReplayUI from \"../ui/replay/ReplayUI\";\r\nimport * as gamePhases from \"../../../../model/game/gamePhases\";\r\nimport CombatLog from \"../ui/combatLog/CombatLog\";\r\nimport ShipBadge from \"../ui/shipBadge/ShipBadge\";\r\nimport { StateStore } from \"../../../state/StoreProvider\";\r\nimport { GameStateStore } from \"../GameStoreProvider\";\r\nimport { MOVEMENT } from \"../ui/gameUiModes\";\r\nimport ShipList from \"../ui/shipList/ShipList\";\r\n\r\nconst GameUiComponent = ({ game }) => {\r\n  const { currentUser } = useContext(StateStore);\r\n  const state = useContext(GameStateStore);\r\n  const uiState = game.getUiState();\r\n\r\n  return (\r\n    <>\r\n      {state.lobby && (\r\n        <Lobby\r\n          uiState={uiState}\r\n          gameData={state.gameData}\r\n          game={game}\r\n          currentUser={currentUser}\r\n        />\r\n      )}\r\n\r\n      {state.shipTooltip.map((tooltip) => (\r\n        <ShipTooltip\r\n          key={`tooltip-ship-${tooltip.ship.id}`}\r\n          uiState={uiState}\r\n          {...state}\r\n          {...tooltip}\r\n        />\r\n      ))}\r\n\r\n      {state.gameData &&\r\n        (state.gameData.phase === gamePhases.GAME ||\r\n          state.gameData.phase === gamePhases.DEPLOYMENT) && (\r\n          <TurnHeader\r\n            uiState={uiState}\r\n            gameData={uiState.state.gameData}\r\n            ready={uiState.state.turnReady}\r\n            waiting={uiState.state.waiting}\r\n          />\r\n        )}\r\n\r\n      {state.shipMovement && state.shipMovement.type === \"deploy\" && (\r\n        <DeploymentMovement {...state.shipMovement} uiState={uiState} />\r\n      )}\r\n\r\n      {state.shipMovement &&\r\n        state.shipMovement.type === \"game\" &&\r\n        uiState.hasGameUiMode(MOVEMENT) && (\r\n          <GameMovement {...state.shipMovement} uiState={uiState} />\r\n        )}\r\n\r\n      {state.gameUiModeButtons && (\r\n        <GameUiModeButtons uiState={uiState} {...state.gameUiMode} />\r\n      )}\r\n\r\n      {state.replayUi && (\r\n        <ReplayUI uiState={uiState} replayContext={state.replayUi} />\r\n      )}\r\n\r\n      {!state.replayUi && <LeftPanel uiState={uiState} {...state} />}\r\n\r\n      {uiState.state.combatLog && (\r\n        <CombatLog\r\n          uiState={uiState}\r\n          replayContext={state.combatLog.replayContext}\r\n          gameData={state.combatLog.gameData}\r\n          log={state.combatLog.log}\r\n        />\r\n      )}\r\n\r\n      {state.shipBadges.map(({ version, icon, visible, showName }) => (\r\n        <ShipBadge\r\n          key={`ship-badge-${icon.ship.id}`}\r\n          icon={icon}\r\n          version={version}\r\n          visible={visible}\r\n          uiState={uiState}\r\n          showName={showName}\r\n        />\r\n      ))}\r\n\r\n      <ShipList uiState={uiState} gameData={uiState.state.gameData} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameUiComponent;\r\n","import React, { useContext } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { StateStore } from \"../../state/StoreProvider\";\r\nimport Login from \"./Login\";\r\n\r\nconst LoginFloaterContainer = styled(Login)`\r\n  position: absolute;\r\n  width: 20%;\r\n  min-width: 200px;\r\n  right: 10px;\r\n  top: 10px;\r\n  z-index: 3;\r\n`;\r\n\r\nconst LoginFloater = () => {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  if (currentUser) {\r\n    return null;\r\n  }\r\n\r\n  return <LoginFloaterContainer />;\r\n};\r\n\r\nexport default LoginFloater;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport GameSceneComponent from \"./GameSceneComponent\";\r\nimport Game from \"../Game\";\r\nimport UIState from \"../ui/UIState\";\r\nimport GameUiComponent from \"./GameUiComponent\";\r\nimport { StateStore } from \"../../../state/StoreProvider\";\r\nimport GameStoreProvider from \"../GameStoreProvider\";\r\nimport LoginFloater from \"../../login/LoginFloater\";\r\n\r\nconst GameComponent = ({ match }) => {\r\n  const { currentUser } = useContext(StateStore);\r\n  const [uiState, setUiState] = useState(null);\r\n  const [game, setGame] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const newUiState = new UIState();\r\n    const newGame = new Game(match.params.gameid, currentUser, newUiState);\r\n    setUiState(newUiState);\r\n    setGame(newGame);\r\n  }, [currentUser, setUiState, setGame]);\r\n\r\n  if (!uiState || !game || currentUser === undefined) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <GameStoreProvider uiState={uiState}>\r\n      <GameSceneComponent game={game} currentUser={currentUser} />\r\n      <GameUiComponent game={game} />\r\n      <LoginFloater />\r\n    </GameStoreProvider>\r\n  );\r\n};\r\n\r\nexport default GameComponent;\r\n","import GameComponent from \"./components/GameComponent\";\r\n\r\nexport default GameComponent;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport { getCurrentUser } from \"../../state/actions\";\r\nimport { logout as logoutUser } from \"../../api/user\";\r\nimport { DispatchStore, StateStore } from \"../../state/StoreProvider\";\r\n\r\nconst Logout = ({ location }) => {\r\n  const dispatch = useContext(DispatchStore);\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      await logoutUser();\r\n      await getCurrentUser(dispatch);\r\n    })();\r\n  }, [dispatch]);\r\n\r\n  if (!currentUser) {\r\n    return <Redirect to={{ pathname: \"/\", state: { from: location } }} />;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default Logout;\r\n","import Logout from \"./Logout\";\r\n\r\nexport default Logout;\r\n","import React, { Component, useContext } from \"react\";\r\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\r\nimport Game from \"./view/game\";\r\nimport Logout from \"./view/logout\";\r\nimport { StateStore } from \"./state/StoreProvider\";\r\nimport { BaseView } from \"./view/baseView\";\r\n\r\nexport const PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  const authed = Boolean(currentUser);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        authed === true ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to={{ pathname: \"/\", state: { from: props.location } }} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nconst Routes = () => {\r\n  const { currentUser } = useContext(StateStore);\r\n\r\n  if (currentUser === undefined) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n      <PrivateRoute exact path=\"/game/:gameid\" component={Game} />\r\n      <Route exact path=\"/logout\" component={Logout} />\r\n      <Route path=\"*\" component={BaseView} />\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Component } from \"react\";\nimport Router from \"./Router\";\n\nimport StoreProvider from \"./state/StoreProvider\";\n\nclass App extends Component {\n  render() {\n    return (\n      <StoreProvider>\n        <Router />\n      </StoreProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./client/App\";\nimport * as serviceWorker from \"./client/serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}